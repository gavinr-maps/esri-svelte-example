const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BtUFGore.js","./index-DwIhxbHs.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./dom-DEluURzl.js","./guid-ejniuQmw.js","./observers-Co4E8E8j.js","./ref-D9wHsL_T.js","./directive-helpers-DaBykg1t.js","./loadable-XBvaWFYY.js","./interactive-DTzfFku4.js","./key-CZcQa38B.js","./component-CBVlbUuE.js","./useT9n-C1Hrfc-A.js","./index-BCDLx0rN.js","./index-CMxz6F2k.js","./index-DyXGQ9Xl.js","./keyed-CU1C-h1n.js","./index-fFnlo_g2.js","./index-DWeq-ojO.js","./index-pyEU_klK.js","./live-D7NQ-TrC.js","./static-DLD4WjLv.js","./form-BzoUrXC7.js","./label-CHHpnzD0.js","./locale-CXx8I9ox.js","./Validation-BYp9DS84.js","./input-DI9tZAPS.js","./filter-D4A4y0z5.js","./escapeRegExp-CdLjXKbf.js","./debounce-DbkufipY.js","./utils-Dtivty39.js","./index-B0pN5y8B.js","./index-DVGzfobf.js","./floating-ui-IixYHfbQ.js","./openCloseComponent-nqWrSaIH.js","./dynamicClasses-pKEMtFzB.js","./index-BPm91e5Z.js","./index-C7Sgjfzm.js","./resources6-Cs2_VmEC.js","./index-XCNLEnDV.js","./customElement-_nG5icNK.js","./resources5-SciNIBSe.js","./index-Bts9-rBr.js","./FloatingArrow-BZRr6Zld.js","./Feature-zYPb8B0H.js","./Attachments-CEjxK4Wg.js","./unitFormatUtils-Q7ZG7HcF.js","./ByteSizeUnit-BsxeN7wM.js","./Cyclical-Dlbl-cQK.js","./mathUtils-Cfq9PL9W.js","./quantityUtils-BsDK158M.js","./Point-Cz2JYYmX.js","./writer-DKgfqj4X.js","./Graphic-Dt0LgVGU.js","./Clonable-Z-AWS-16.js","./opacityUtils-Dim20wpZ.js","./enumeration-DpvDkLNI.js","./Color-VJEMvW-n.js","./colorUtils-Rxh2V3ai.js","./ActionToggle-D7439N1A.js","./Identifiable-BHVfzH03.js","./jsonUtils-CwFG8yN4.js","./Extent-g5W9hy0j.js","./Polyline-s-JzsQqo.js","./typeUtils-B6WBEKDM.js","./TextSymbol-BLIQ6RKX.js","./screenUtils-_ZIvrt5o.js","./collectionUtils-CTT-51g7.js","./Portal-CmmHxpLg.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-Dw3yBk2f.js","./AttachmentInfo-b6cNZMAJ.js","./AttachmentQuery-CpEmJqq-.js","./featureUtils-BovNToiy.js","./layerUtils-B__v9OBu.js","./utils-v4CMtYiY.js","./mat4f32-DcsiF_Rp.js","./mat4-Fi6iAz29.js","./common-DQOJ18NT.js","./timeZoneUtils-DxzjpEBb.js","./attachmentUtils-BG3pf-R1.js","./globalCss-vQlnDsEX.js","./legacyIcon-Wt_jLiuK.js","./FeatureRelationshipViewModel-CSg-U4Be.js","./Heading-BcR6CGTM.js","./ReactiveMap-BHFEHYMj.js","./NetworkElement-BEwoE6j2.js","./Query-B_2mhyL4.js","./Field-BDG0QV_T.js","./fieldType-CBeoJWlv.js","./FullTextSearch-CBnxSwz4.js","./TimeExtent-BO6BsF_x.js","./timeUtils-C1c_L2Fd.js","./RelationshipQuery-B5a-mYy7.js","./featureFormUtils-Cjx4R4NB.js","./formUtils-l8pvwous.js","./dateUtils-CkANlKbA.js","./substitute-CvdjmBYq.js","./widget-GKEQ1p1m.js","./uriUtils-CBE5heUM.js","./a11yUtils-ClKbIIe-.js","./utils-B1XxMXhZ.js","./ColorStop-BYiAUa8d.js","./utils-aIx1khaq.js","./jsonUtils-DZz5FrgB.js","./utils-DYurMneM.js","./cimSymbolUtils-DzhKvmq_.js","./utils-UPZJIDfz.js","./defaultCIMValues-Bb-CUowV.js","./enums-BTM-fOHQ.js","./LRUCache-CXiGQWMN.js","./MemCache-CmojB_Z1.js","./HeatmapColorStop-CHbSyb1s.js","./executeQueryJSON-BvVQs3iA.js","./utils-YowqfOgk.js","./query-Bjn_Ozo1.js","./normalizeUtils-BTGdXlpz.js","./normalizeUtilsCommon-lGDszWRI.js","./utils-B-dlKIhi.js","./pbfQueryUtils-mqiWagfZ.js","./pbf-BsmI3A9L.js","./memoryEstimations-Bcyf-mHz.js","./OptimizedGeometry-BJqUA4Pi.js","./OptimizedFeature-P2towpqD.js","./OptimizedFeatureSet-Blu9Ckm7.js","./queryZScale-BdW_vUm_.js","./projection-CyCZAIaD.js","./projectBuffer-CQnuEMuP.js","./geodesicConstants-RQL9oKdk.js","./FeatureSet-B5-Veyin.js","./themeUtils-C3zvZbsE.js","./throttle-jjSnxk80.js","./shared-2m9g3-y2.js","./TimeOnly-CveCl9ie.js","./FeatureLayer-U46cmps3.js","./MultiOriginJSONSupport-DbmrbwMa.js","./layerContainerType-C5CzMsLd.js","./FeatureLayerBase-C4QQJYE9.js","./HeightModelInfo-C05IFsWs.js","./commonProperties-B0GHoNP5.js","./ElevationInfo-BPOqhCue.js","./unitConversionUtils-rg07EgOm.js","./lengthUtils-_77UiyVF.js","./AttributeTableTemplate-cR37sM72.js","./featureLayerUtils-Btb8HY8h.js","./featureQueryAll-JpNZKIBO.js","./SimpleRenderer-CEw_geZx.js","./commonProperties-ZfGquLPI.js","./colorRamps-CRjjPL3r.js","./SizeVariable-B-ghFm6e.js","./visualVariableUtils-Xcorldoo.js","./jsonUtils-B-voMz-i.js","./defaults-FkBa0ybj.js","./defaultsJSON-GKolV7NZ.js","./UniqueValueRenderer-yoWHKJ_P.js","./diffUtils-BanfihCO.js","./RendererLegendOptions-CYAPr8D6.js","./styleUtils-ColFrJ-Z.js","./NormalizationBinParametersMixin-CZD0XfhN.js","./LayerFloorInfo-iCgtHY6f.js","./Relationship-CTbzI1Kb.js","./serviceCapabilitiesUtils-B2yGaMdk.js","./infoFor3D-C7tb3HsI.js","./Layer-DH4_Pn8a.js","./workers-Cds_sd9m.js","./Queue-BQesTh_6.js","./editsZScale-LI19I1vI.js","./APIKeyMixin-3z69J1h4.js","./ArcGISService-CDyDWGI0.js","./ScaleRangeLayer-Cnzwr9PT.js","./CustomParametersMixin-Be7WOSEG.js","./DisplayFilteredLayer-CzliK74b.js","./scaleUtils-DPfHG2g0.js","./displayFilterUtils-uKPOP7_-.js","./EditBusLayer-KXo-LY9o.js","./FeatureEffectLayer-BZmannck.js","./FeatureEffect-DZgZP6Sj.js","./FeatureFilter-Ca1n-g_b.js","./FeatureReductionLayer-B6VhUfZv.js","./FeatureReductionSelection-BJWsAyix.js","./labelingInfo-BgG6IH9B.js","./labelUtils-DCpQ7n-8.js","./jsonUtils-BZp85R7u.js","./typeUtils-B3iPBwJ2.js","./ClassBreaksRenderer-C7fhua2J.js","./Version-Cd3TlGH0.js","./FieldsIndex-FW1AMU67.js","./heatmapUtils-Cyq-bAyG.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./MD5-C9MwAd2G.js","./OperationalLayer-B__lrMRq.js","./OrderedLayer-ucEg87Tu.js","./OrderByInfo-KsusEmpW.js","./PortalLayer-Cqwv_mmr.js","./PortalItem-CTx1kJsR.js","./portalItemUtils-ByOtbGao.js","./RefreshableLayer-C90FXoHt.js","./TemporalLayer-CMqBosxi.js","./TimeInfo-CctegBed.js","./TimeInterval-B7L-CEq7.js","./TrackableLayer-DaYHUnrc.js","./FeatureTemplate-Dh5_oWTV.js","./FeatureType-DhERcdEP.js","./fieldProperties-DDN0PSrH.js","./TitleCreator-DIyQ9Yy3.js","./versionUtils-BfhafDf-.js","./styleUtils-Bye9ft1s.js","./popupUtils-CmsUVJA0.js","./interfaces-CL2NbQte.js"])))=>i.map(i=>d[i]);
import{_ as m}from"./index-4eY77cms.js";import{av as _,r as a,m as d,a as A}from"./Accessor-BmwT4B0c.js";import"./intl-Duiy0OzY.js";import{c as y}from"./popupUtils-CmsUVJA0.js";import{_ as g,i as h}from"./FeatureRelationshipViewModel-CSg-U4Be.js";import{c as F,n as r,i as E}from"./jsxFactory-Cnml7uXM.js";import{e as V}from"./globalCss-vQlnDsEX.js";import{h as T,n as v,a as L,b}from"./isConnectivityMidspan-Bt3Op6WB.js";import{s as $}from"./substitute-CvdjmBYq.js";import"./Promise-DfET-uns.js";import"./cast-CsZslgGN.js";import"./JSONSupport-DcrLLGjL.js";import"./Graphic-Dt0LgVGU.js";import"./Clonable-Z-AWS-16.js";import"./reactiveUtils-XM7cS2OP.js";import"./Evented-Dw4_VOGn.js";import"./SimpleObservable-CvOkykwM.js";import"./writer-DKgfqj4X.js";import"./opacityUtils-Dim20wpZ.js";import"./Point-Cz2JYYmX.js";import"./enumeration-DpvDkLNI.js";import"./Color-VJEMvW-n.js";import"./colorUtils-Rxh2V3ai.js";import"./mathUtils-Cfq9PL9W.js";import"./ActionToggle-D7439N1A.js";import"./Identifiable-BHVfzH03.js";import"./jsonUtils-CwFG8yN4.js";import"./Extent-g5W9hy0j.js";import"./Polyline-s-JzsQqo.js";import"./typeUtils-B6WBEKDM.js";import"./TextSymbol-BLIQ6RKX.js";import"./screenUtils-_ZIvrt5o.js";import"./collectionUtils-CTT-51g7.js";import"./Portal-CmmHxpLg.js";import"./vec3f64-BLpZdpfb.js";import"./aaBoundingBox-Dw3yBk2f.js";import"./Heading-BcR6CGTM.js";import"./ReactiveMap-BHFEHYMj.js";import"./layerUtils-B__v9OBu.js";import"./NetworkElement-BEwoE6j2.js";import"./Query-B_2mhyL4.js";import"./Field-BDG0QV_T.js";import"./fieldType-CBeoJWlv.js";import"./FullTextSearch-CBnxSwz4.js";import"./TimeExtent-BO6BsF_x.js";import"./timeUtils-C1c_L2Fd.js";import"./featureUtils-BovNToiy.js";import"./utils-v4CMtYiY.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-Fi6iAz29.js";import"./common-DQOJ18NT.js";import"./timeZoneUtils-DxzjpEBb.js";import"./RelationshipQuery-B5a-mYy7.js";import"./featureFormUtils-Cjx4R4NB.js";import"./formUtils-l8pvwous.js";import"./dateUtils-CkANlKbA.js";import"./uuid-Cl5lrJ4c.js";var w;const M="esri-feature-utility-network-associations",I={base:M,listItemHidden:`${M}__list-item--hidden`},C="nested";let l=w=class extends T{constructor(e,t){super(e,t),this.description=null,this.flowItems=null,this.flowType="feature-utility-network-association-type",this.listType=null,this.parentFeatureViewModel=null,this.title=null,this.viewModel=new g,this.visibleElements=new h}initialize(){this.setUpObserver()}loadDependencies(){return F({chip:()=>m(()=>import("./index-BtUFGore.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url),icon:()=>m(()=>import("./index-DwIhxbHs.js").then(e=>e.i),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),list:()=>m(()=>import("./index-BCDLx0rN.js"),__vite__mapDeps([24,25,2,3,4,5,6,7,8,9,10,11,12,13,15,23,26,17,18,16,14,27,1,28,29,30,31,32,33,20,21,34,19,35,22,36,37,38,39,40,41]),import.meta.url),"list-item":()=>m(()=>import("./index-B0pN5y8B.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,43,17,18,44,40,20,21,19,45,46,25,23,47,27,22,48,49,50,51,41,52]),import.meta.url),tooltip:()=>m(()=>import("./index-Bts9-rBr.js"),__vite__mapDeps([53,2,3,4,5,6,7,8,9,10,11,12,13,17,18,44,14,15,40,45,54,27]),import.meta.url)})}destroy(){this.tooltipReferenceMap.clear()}render(){var s;const e=this.viewModel.associationViewModels,{state:t,showAllEnabled:o}=this.viewModel,{state:i}=this.parentFeatureViewModel??{};return r("div",{class:this.classes(I.base,V.widget)},t==="loading"||t==="querying"||i==="loading"?this.renderLoading():r("calcite-list",{displayMode:C,label:((s=this.selectedLayer)==null?void 0:s.title)??this.messagesCommon.untitled},o&&this.selectedLayer?r(E,null,this.renderFilter(),this.renderFeatureCountWarning(),this._renderAssociatedFeatureListPage(),this.renderFeatureObserver()):Array.from(e.keys(),n=>this._renderTypeList(n,e.get(n)))))}_showAllAssociations(e){const{flowItems:t,viewModel:o,description:i}=this;if(!t||!e)return;o.showAllEnabled=!0;const s=new w({selectedLayer:e,title:e==null?void 0:e.title,flowItems:t,parentFeatureViewModel:this.parentFeatureViewModel,featureVisibleElements:this.featureVisibleElements,description:i,visibleElements:new h({title:!1,description:!1}),viewModel:o});t.push(s)}_renderAssociatedFeatureListPage(){const e=this.viewModel.associationViewModels.get(this.selectedLayer).filter(t=>y(t.featureViewModel).toLowerCase().includes(this.filterText)).slice(0,this.endIndex);return[...this._renderTooltips(e),...this._renderAssociatedFeatureList(e)]}_renderItemTooltip(e){const{tooltipReferenceMap:t}=this;return v(e.association)?r("calcite-tooltip",{key:`tooltip-${e.featureViewModel.uid}`,overlayPositioning:"fixed",referenceElement:t.get(e.featureViewModel.uid)},this.getConnectivityTooltip(e.association.associationType)):null}_renderAssociatedFeature(e){const{featureViewModel:t}=e,o=y(t),i=t.state==="loading",s=this._findFlowItem(t),n=s<0&&this._isParentFeature(t),p=n||s>=0;return r("calcite-list-item",{class:i?I.listItemHidden:void 0,description:_(e.terminalName??""),key:`associated-feature-type-${t.uid}`,label:_(o),onCalciteListItemSelect:()=>this._handleFeatureClick(n,s,t)},v(e.association)?this.renderConnectivityIcon(e.association.associationType,e.featureViewModel.uid):null,L(e.association)?r("calcite-chip",{label:b(e.association),scale:"s",slot:"content-end"},b(e.association)):null,this._renderChevronIconNode(p))}async _selectAssociation(e){const{flowItems:t,featureVisibleElements:o}=this;if(!t)return;e.abilities={utilityNetworkAssociationsContent:!0};const{default:i}=await m(()=>import("./Feature-zYPb8B0H.js").then(s=>s.F),__vite__mapDeps([55,7,8,3,4,5,6,9,11,10,12,2,13,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220]),import.meta.url);t.push(new i({flowItems:t,flowType:"feature-association",viewModel:e,visibleElements:o}))}_handleFeatureClick(e,t,o){if(e)this.flowItems.drain(i=>{"showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i.viewModel=null,i.destroy()});else if(t<0||!this.flowItems)this._selectAssociation(o);else for(;this.flowItems.length>t+1;){const i=this.flowItems.pop();i&&("showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i.viewModel=null,i.destroy())}}_featureViewModelMatch(e,t){const o=e.graphic,i=o==null?void 0:o.layer;let s=null;(i==null?void 0:i.type)==="subtype-sublayer"&&i.parent?s=i.parent.globalIdField??null:i&&"globalIdField"in i&&(s=i.globalIdField);const n=s?o==null?void 0:o.attributes[s]:null,p=t.graphic,c=p==null?void 0:p.layer;let u=null;(c==null?void 0:c.type)==="subtype-sublayer"&&c.parent?u=c.parent.globalIdField??null:c&&"globalIdField"in c&&(u=c.globalIdField);const f=u?p==null?void 0:p.attributes[u]:null;return n&&f&&n===f}_isParentFeature(e){var i;const t=(i=this.flowItems)==null?void 0:i.getItemAt(0);if(!t)return!1;const o=t.parentFeatureViewModel;return this._featureViewModelMatch(o,e)}_findFlowItem(e){var t;return((t=this.flowItems)==null?void 0:t.findIndex(o=>{if(o.flowType!=="feature-association")return!1;const i=o.viewModel;return this._featureViewModelMatch(i,e)}))??-1}_renderTooltips(e){return e.toArray().map(t=>this._renderItemTooltip(t))}_renderAssociatedFeatureList(e){return e.toArray().map(t=>this._renderAssociatedFeature(t))}_renderChevronIconNode(e){return r("calcite-icon",{flipRtl:!0,icon:e?"move-up":"chevron-right",scale:"s",slot:"content-end"})}_renderTypeList(e,t){const{messagesFeature:o}=this,{displayCount:i}=this.viewModel,s=t.slice(0,i),n=s.length<t.length;return r("calcite-list-item",{key:"show-all",label:e.title,open:!0,value:e.id},r("calcite-chip",{label:String(t.length),scale:"s",slot:"content-end"},t.length),r("calcite-list",{group:e.id,label:e.title??""},[this._renderTooltips(s),this._renderAssociatedFeatureList(s)],n?r("calcite-list-item",{description:$(o==null?void 0:o.numberRecords,{number:t.length.toString()}),key:"show-all-item",label:o.showAll,onCalciteListItemSelect:()=>this._showAllAssociations(e)},r("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})):null))}};a([d()],l.prototype,"description",void 0),a([d()],l.prototype,"featureVisibleElements",void 0),a([d()],l.prototype,"flowItems",void 0),a([d()],l.prototype,"flowType",void 0),a([d()],l.prototype,"listType",void 0),a([d()],l.prototype,"parentFeatureViewModel",void 0),a([d()],l.prototype,"title",void 0),a([d({type:g})],l.prototype,"viewModel",void 0),a([d({type:h,nonNullable:!0})],l.prototype,"visibleElements",void 0),l=w=a([A("esri.widgets.Feature.FeatureUtilityNetworkAssociationList")],l);const Oe=l;export{Oe as default};
