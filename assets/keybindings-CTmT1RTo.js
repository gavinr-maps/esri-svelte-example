import{o as p,e as f,F as d,t as h}from"./Accessor-BmwT4B0c.js";import{t as u,_ as g}from"./InputManager-DZ3jJnlx.js";const s="z",a="r",l={redo:a,undo:s,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},w={toggle:"Control"},A={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},S={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:u,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},editSourcePoints:{key:"Alt",continuePropagation:!0},undo:s,redo:a};class P{constructor(){this._bindings=new Map}add(t,e){return this.addToggle(t,i=>{i.type==="key-down"&&e(i)})}addToggle(t,e){const i=n.fromDefinition(t,e),r=p(this._bindings,i.key,()=>[]);return r.push(i),f(()=>d(r,i))}register(t,e=g.WIDGET){return h([t.on("key-down",i=>this.dispatch(t.inputManager,i),e),t.on("key-up",i=>this.dispatch(t.inputManager,i),e)])}dispatch(t,e){const i=e.key,r=this._bindings.get(i);if(r)for(const o of r)o.process(t,e)}}class n{constructor(t,e,i,r,o){this.key=t,this.modifiers=e,this.repeats=i,this.continuePropagation=r,this.callback=o}process(t,e){if(!(e.key!==this.key||"repeat"in e&&e.repeat&&!this.repeats)){for(const i of this.modifiers)if(!t.isModifierKeyDown(i))return;this.continuePropagation||e.stopPropagation(),this.callback(e)}}static fromDefinition(t,e){if(typeof t=="string")return new n(t,[],!1,!1,e);const{key:i,modifier:r,repeats:o,continuePropagation:c}=t;return new n(i,r?Array.isArray(r)?r:[r]:[],!!o,!!c,e)}}export{w as c,S as d,A as f,P as h,l as p};
