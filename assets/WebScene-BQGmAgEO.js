const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./viewpointUtils-Bq9TFP4R.js","./Viewpoint-C4FqWA2d.js","./tslib.es6-B3Jf3DVX.js","./Clonable-D3rtuBWg.js","./Accessor-BLX9ikPh.js","./subclass-BZA_h8Db.js","./Cyclical-oTUX3aX7.js","./mathUtils-C4_ghTv4.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./cast-Bjksrh93.js","./writer-DNAwXnhG.js","./Point-Cg0-ChZE.js","./jsonMap-0cxwUWs2.js","./geometry-D964gYQX.js","./Extent-Bf3YTe7m.js","./Polyline-D9YkgmM_.js","./jsonUtils-CEfjT-BK.js","./Graphic-DsxsIjhH.js","./PopupTemplate-BHMhS05j.js","./Collection-CEdjem1-.js","./Evented-BHRw9x22.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./fieldUtils-tmQlKvWo.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./enumeration-Ba5njXdz.js","./Color-BCS62Hs5.js","./colorUtils-0bJDPow9.js","./ActionToggle-iT4slXc7.js","./Identifiable-B1UbsKNt.js","./symbols-CNimns--.js","./TextSymbol-D8QO_KUV.js","./screenUtils-_ZIvrt5o.js","./materialUtils-DarhapKC.js","./opacityUtils-C68Tlu6_.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-BE7cC1jD.js","./persistableUrlUtils-fa1mAujs.js","./collectionUtils-D_lHIu88.js","./Portal-C10FKnaA.js","./Loadable-BabW5Xcc.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./mat3-BRl2i9Bz.js","./common-DQOJ18NT.js","./mat3f64-BBpwCtoL.js","./mat4f64-Dk4dwAN8.js","./vec32-Dvg_eL9J.js","./projection-B971H0Re.js","./projectBuffer-Bs7GwaPY.js","./geodesicConstants-DWQLYX7F.js","./computeTranslationToOriginAndRotation-Q27G6TBL.js","./mat4-GpOFENPA.js","./projectPointToVector-GINIbYMz.js","./projectVectorToPoint-DcLtSZYw.js","./projectVectorToVector-G2uWGoIb.js","./frustum-CQrOepbv.js","./sphere-C77djCO6.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./plane-IENfwZlB.js","./quatf64-CCm9z-pX.js","./vec2f64-miziP1SN.js","./mathUtils-BG-eq9fO.js","./scaleUtils-D_Nw3nhM.js","./dehydratedFeatureUtils-B--Sgpdi.js","./ViewingMode-Dodu7ZZk.js","./intersectorUtils-BK9EUwUf.js","./boundedPlane-EV1sS2Ke.js","./lineSegment-D7sKPPYf.js","./verticalOffsetUtils-BDQLpfho.js","./orientedBoundingBox-DOAJUK5g.js","./quat-4pa1e6ds.js","./spatialReferenceEllipsoidUtils-DBE_OFra.js","./vec2-maR1OrZI.js","./earthUtils-ByXwmaX5.js","./ElevationProvider-C95wyCKc.js","./spatialReferenceSupport-yRFduOSO.js","./layersCreator-qSEwd4GK.js","./portalLayers-BzFmbxxn.js","./associatedFeatureServiceUtils-CXx2I5Ic.js","./arcgisLayerUrl-BX1FE5Hm.js","./PortalItem-DzgXrpyc.js","./lazyLayerLoader-Buplpp4b.js","./requestPresets-B-6DU6iY.js","./layerUtils-BrNoooE9.js","./portalItemUtils-BzVoFAku.js","./styleUtils-KMFBtb6u.js"])))=>i.map(i=>d[i]);
import{_ as fe}from"./index-Bh2oEzTI.js";import{r as n}from"./tslib.es6-B3Jf3DVX.js";import{f as w,m as xe,k as je,I as D,a5 as Ue}from"./assets-C43MgM-v.js";import{L as Ne}from"./Map-iWpb5DpI.js";import{m as le}from"./Viewpoint-C4FqWA2d.js";import{V as P}from"./Collection-CEdjem1-.js";import{b as y,m as a,a as g,g as F,x as _e,w as H,n as C}from"./subclass-BZA_h8Db.js";import{m as Ge}from"./Loadable-BabW5Xcc.js";import{t as Fe}from"./loadAll-B6mYSptb.js";import{q as Se,w as ke,u as qe,c as We,l as Je,C as Be}from"./Accessor-BLX9ikPh.js";import{S as De,m as He}from"./MultiOriginJSONSupport-B5nfqtQh.js";import{n as Ke}from"./Promise-B2Hu02L7.js";import{whenOnce as ze,when as Qe,on as Xe,watch as Ye}from"./reactiveUtils-C5zUhJQJ.js";import{r as b,o as K}from"./writer-DNAwXnhG.js";import{i as ce}from"./originUtils-D69mHv66.js";import{w as Ze}from"./Extent-Bf3YTe7m.js";import{v as et}from"./HeightModelInfo-9nOoV6LU.js";import{J as tt}from"./projection-B971H0Re.js";import{g as _,ae as it}from"./Point-Cg0-ChZE.js";import{i as rt}from"./heightModelInfoUtils-C6gW75mB.js";import{f as nt}from"./jsonUtils-CEfjT-BK.js";import{b as z}from"./Portal-C10FKnaA.js";import Ae from"./PortalItem-DzgXrpyc.js";import{o as he}from"./jsonContext-DueMnVx9.js";import{u as de,f as me}from"./portalItemUtils-BzVoFAku.js";import{b as st,S as ot,T as ue}from"./basemapUtils-B9TjOm47.js";import{i as at,a as lt,l as pt}from"./Viewing-sdZ4A8fX.js";import{e as ct}from"./tagSymbols-BPcGfZon.js";import{p as ht}from"./TimeExtent-DocT5yPf.js";import{l as ye}from"./ViewingMode-Dodu7ZZk.js";import{r as ge}from"./spatialReferenceSupport-yRFduOSO.js";import{A as S}from"./interfaces-CL2NbQte.js";import{a as dt}from"./Widgets-upjPhxDC.js";import{n as mt,p as ut}from"./resourceUtils-BZzv7-k7.js";import{t as yt}from"./saveUtils-gB1pYTqT.js";import{isCopyAllowed as gt,initializeNewItem as wt}from"./webdocSaveUtils-05fKEmYz.js";import{b as k,i as vt,p as Le,a as bt}from"./Environment-BDo9QJi6.js";import{m as Ie,u as $}from"./timeProperties-BBnV2Dje.js";import{n as $e,t as ft}from"./collectionUtils-D_lHIu88.js";import{s as L}from"./cast-Bjksrh93.js";import{F as _t}from"./Basemap-DVYOaWHz.js";import{_ as St}from"./asyncUtils-CWX51uTe.js";import{i as At}from"./Clonable-D3rtuBWg.js";import{S as Lt}from"./mathUtils-C4_ghTv4.js";import{v as we}from"./vec32-Dvg_eL9J.js";import{n as Q}from"./vec3f64-BLpZdpfb.js";import It from"./Layer-CVt7Hb5J.js";import{g as $t}from"./Scheduler-CJu5awNf.js";import{e as Et,n as Tt}from"./weather-eV4wTXCK.js";import{b as Vt}from"./Ground-CAIVlzbd.js";import{r as Ct,n as Rt}from"./opacityUtils-C68Tlu6_.js";import{r as Pt}from"./Version-BSlAgupz.js";import"./CollectionFlattener-CQN6i8ZK.js";import"./Evented-BHRw9x22.js";import"./editableLayers-Cn9dHzhB.js";import"./catalogUtils-DyGHPM81.js";import"./layerUtils-BrNoooE9.js";import"./TablesMixin-5umgS75f.js";import"./Cyclical-oTUX3aX7.js";import"./geometry-D964gYQX.js";import"./Polyline-D9YkgmM_.js";import"./jsonMap-0cxwUWs2.js";import"./shared-B3wH2qpO.js";import"./SimpleObservable-KocWTzVy.js";import"./multiOriginJSONSupportUtils-C0wm8_Yw.js";import"./projectBuffer-Bs7GwaPY.js";import"./geodesicConstants-DWQLYX7F.js";import"./arcgisLayerUrl-BX1FE5Hm.js";import"./persistableUrlUtils-fa1mAujs.js";import"./locale-C9TlLpzi.js";import"./utils-93yNk4Xc.js";import"./colorUtils-0bJDPow9.js";import"./screenUtils-_ZIvrt5o.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-GpOFENPA.js";import"./common-DQOJ18NT.js";import"./enumeration-Ba5njXdz.js";import"./fieldType-BuzM0UHS.js";import"./timeUtils-8fb_2oAt.js";import"./date-DlqISzcw.js";import"./TimeInterval-CNlkea1s.js";import"./uuid-fwrPAdZb.js";import"./resourceUtils-VfNT3fc0.js";import"./project-DlMfXva8.js";import"./utils-6jMaHUrH.js";import"./utils-Bema0iXE.js";import"./messages-OmQvZhAg.js";import"./writeUtils-Dz7BsE1e.js";import"./Color-BCS62Hs5.js";import"./materialUtils-DarhapKC.js";import"./Identifiable-B1UbsKNt.js";import"./signal-D4lghLjV.js";import"./debugFlags-BF6Z0j0F.js";import"./compilerUtils-Dw3R0f-Z.js";const Ot="webscene:schema-validation";function Mt(e){return new y(Ot,"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:e})}var Y;let O=Y=class extends w{constructor(e){super(e),this.viewing=null}clone(){var e;return new Y({viewing:((e=this.viewing)==null?void 0:e.clone())??null})}};n([a({type:at,json:{write:!0}})],O.prototype,"viewing",void 0),O=Y=n([g("esri.webscene.ApplicationProperties")],O);const xt=O;var Z;let f=Z=class extends w{constructor(e){super(e),this.environment=new k,this.spatialReference=null,this.viewpoint=null,this.timeExtent=null}set viewingMode(e){this._set("viewingMode",e)}clone(){var e,t,i;return new Z({environment:this.environment.clone(),spatialReference:((e=this.spatialReference)==null?void 0:e.clone())??null,viewingMode:this.viewingMode,viewpoint:((t=this.viewpoint)==null?void 0:t.clone())??null,timeExtent:((i=this.timeExtent)==null?void 0:i.clone())??null})}};n([a({type:k,json:{write:{isRequired:!0}}})],f.prototype,"environment",void 0),n([a({type:_})],f.prototype,"spatialReference",void 0),n([a({type:["local","global"]})],f.prototype,"viewingMode",null),n([a({type:le,json:{write:{isRequired:!0}}})],f.prototype,"viewpoint",void 0),n([a(Ie)],f.prototype,"timeExtent",void 0),f=Z=n([g("esri.webscene.InitialViewProperties")],f);const q=f;var ee;let M=ee=class extends w{constructor(){super(...arguments),this.text=""}clone(){return new ee({text:this.text})}};n([a({type:String,json:{write:!0}})],M.prototype,"text",void 0),M=ee=n([g("esri.webscene.support.Description")],M);const x=M;var te;let E=te=class extends w{constructor(){super(...arguments),this.lighting=new Le,this.weather=new Tt}clone(){return new te({lighting:F(this.lighting),weather:F(this.weather)})}};n([a({types:vt,json:{write:!0}})],E.prototype,"lighting",void 0),n([a({types:Et,json:{write:!0}})],E.prototype,"weather",void 0),E=te=n([g("esri.webscene.Environment")],E);var j;let U=j=class extends w{constructor(){super(...arguments),this.opacity=null}clone(){return new j({opacity:this.opacity})}cloneAndApplyTo(e){return this.opacity==null||((e=(e==null?void 0:e.clone())??new Vt).opacity=this.opacity),e}static fromGround(e){return new j({opacity:e.opacity})}};n([a({type:Number,json:{type:_e,read:{reader:Ct,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Rt(e)},target:"transparency"}}})],U.prototype,"opacity",void 0),U=j=n([g("esri.webscene.support.SlideGround")],U);const Ee=U;var ie;let T=ie=class extends w{constructor(e){super(e),this.id="",this.sublayerIds=null}clone(){return new ie({id:this.id,sublayerIds:F(this.sublayerIds)})}};n([a({type:String,json:{write:!0}})],T.prototype,"id",void 0),n([a({type:[_e],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],T.prototype,"sublayerIds",void 0),T=ie=n([g("esri.webscene.support.SlideVisibleLayer")],T);var re;let N=re=class extends w{constructor(){super(...arguments),this.text=""}clone(){return new re({text:this.text})}};n([a({type:String,json:{write:{isRequired:!0}}})],N.prototype,"text",void 0),N=re=n([g("esri.webscene.support.Title")],N);const R=N;let jt=0;const ne=P.ofType(T),Ut=["caption","cover","none"];let u=class extends At(w){constructor(e){super(e),this.id=Date.now().toString(16)+"-slide-"+jt++,this.title=new R,this.description=new x,this.hidden=!1,this.thumbnail=new $,this.viewpoint=null,this.basemap=null,this.ground=null,this.layout="caption",this.environment=new E,this.timeExtent=null,this.visibleLayers=new ne}destroy(){this.visibleLayers.removeAll(),this.basemap=null,this.thumbnail=Se(this.thumbnail),this.description=null,this.title=null,this.thumbnail=null}castTitle(e){return typeof e=="string"?new R({text:e}):H(R,e)}castDescription(e){return typeof e=="string"?new x({text:e}):H(x,e)}castThumbnail(e){return typeof e=="string"?new $({url:e}):H($,e)}castBasemap(e){return st(e)}set visibleLayers(e){this._set("visibleLayers",$e(e,this._get("visibleLayers"),ne))}castVisibleLayers(e){return e&&typeof e.map=="function"?e.map(t=>{if(typeof t=="string")return{id:t};if(t instanceof It){const i=ve(t);return{id:t.id,sublayerIds:i}}return t.id?{id:t.id,sublayerIds:"sublayerIds"in t?t.sublayerIds:void 0}:(C.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"'),t)}):null}async _updateVisibleLayersFrom(e){const t=[];await Promise.allSettled(this._getLayers(e.map).map(i=>e.whenLayerView(i).then(r=>{if(r.visible){const s=ve(i);t.push(new T({id:r.layer.id,sublayerIds:s}))}})).toArray()),this.visibleLayers.removeAll(),this.visibleLayers.addMany(t)}updateFrom(e,t){const i={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...t==null?void 0:t.screenshot};return e.when(()=>{var r;return this.viewpoint=e.viewpoint.clone(),this.environment.lighting=e.environment.lighting.type==="virtual"?bt.prototype.clone.apply(e.environment.lighting):Le.prototype.clone.apply(e.environment.lighting),this.environment.weather=e.environment.weather.clone(),this.basemap=e.map.basemap&&e.map.basemap.clone()||null,this.ground=e.map.ground?Ee.fromGround(e.map.ground):null,this.timeExtent=((r=e.timeExtent)==null?void 0:r.clone())??null,this._updateVisibleLayersFrom(e)}).then(()=>e.takeScreenshot(i)).then(r=>(this.thumbnail=new $({url:r.dataUrl}),this))}async applyTo(e,t){this._applyToController!=null&&this._applyToController.abort();let i=new AbortController;this._applyToController=i;const r=ke(t,()=>i==null?void 0:i.abort()),s=()=>{this._applyToController===i&&(this._applyToController=null),i=null,r==null||r.remove()};try{await ze(()=>e.ready,i.signal)}catch(m){throw s(),m}if(i.signal.aborted)throw s(),qe();const o=e.resourceController.scheduler.registerTask($t.SLIDE);let c=!1;const l={animate:!0,...t,signal:this._applyToController.signal},d=async()=>{await Promise.all([o.schedule(async()=>c=await this._setViewpointOfInterest(e,l)),o.schedule(()=>this._applyBasemap(e,l),l.signal),o.schedule(()=>this._loadLayersWithSublayerVisibility(e))]),await Promise.all([o.schedule(()=>this._applyLayerVisibility(e),l.signal),o.schedule(()=>this._applyGround(e),l.signal),o.schedule(()=>this._applyViewpoint(e,l),l.signal),o.schedule(()=>{var m;return e.timeExtent=((m=this.timeExtent)==null?void 0:m.clone())??null},l.signal),o.schedule(()=>e.environment.weather=this.environment.weather.clone())])},h=await St(e.addUpdatingPromise(d()));if(c&&(e.contentCamera=null),o.remove(),s(),h.ok===!1)throw h.error;return this}async _applyBasemap(e,t){if(this.basemap){try{await this.basemap.load(t)}catch(i){if(We(i))throw i}e.map.basemap=ot(this.basemap,e.map.basemap)}}_applyGround(e){this.ground&&(e.map.ground=this.ground.cloneAndApplyTo(e.map.ground))}_getLayers(e){const t=new P;return this._collectLayers(e,t),this._collectLayers(e.ground,t),t}_collectLayers(e,t){e.layers.forEach(i=>{i.persistenceEnabled&&(t.add(i),"layers"in i&&this._collectLayers(i,t))})}async _loadLayersWithSublayerVisibility(e){this.visibleLayers&&await Promise.allSettled(this._getLayers(e.map).items.map(t=>{var r;return((r=this.visibleLayers.find(s=>s.id===t.id))==null?void 0:r.sublayerIds)?t.load():null}))}_applyLayerVisibility(e){this.visibleLayers&&this._getLayers(e.map).forEach(t=>{const i=this.visibleLayers.find(o=>o.id===t.id);t.visible=i!=null;const r=i==null?void 0:i.sublayerIds,s=Te(t);r&&s&&s.forEach(o=>o.visible=r.includes(o.id))})}async _setViewpointOfInterest(e,t){if(e.state.fixedContentCamera||!this.viewpoint||t!=null&&t.ignoreViewpoint||!(t!=null&&t.useDestinationCamera))return!1;const{toCameraAsync:i}=await fe(()=>import("./viewpointUtils-Bq9TFP4R.js").then(s=>s.v),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83]),import.meta.url),r=await i(e,this.viewpoint);return e.contentCamera=r,r!=null}async _applyViewpoint(e,t){if(this._applyCachedCameraTrackingEnabled(e),this.viewpoint&&!t.ignoreViewpoint){const i=this.environment.lighting;if(t.animate&&i.type==="sun"&&i.date)return this._animateToLighting(e,t);t.animate&&(e.environment.applyLighting(i.clone()),await e.goTo(this.viewpoint,t)),e.viewpoint=this.viewpoint}e.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(e,t){let i=null;return e.environment.lighting.type!=="virtual"&&this.environment.lighting.type!=="virtual"&&(e.viewingMode==="global"&&(i=this._animateLightingWithCamera(e,e.environment.lighting,this.environment.lighting)),e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1),e.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled,this.environment.lighting.type==="virtual"||e.environment.lighting.type==="virtual"?(e.environment.applyLighting(this.environment.lighting.clone()),e.environment.lighting.type!=="virtual"&&(e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1)):this.environment.lighting.displayUTCOffset!=null&&(e.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset),e.goTo(this.viewpoint,t).then(()=>{this._applyCachedCameraTrackingEnabled(e),e.environment.applyLighting(this.environment.lighting.clone())}).catch(r=>{throw e.animation==null&&this._applyCachedCameraTrackingEnabled(e),r}).finally(()=>{Je(i)})}_applyCachedCameraTrackingEnabled(e){e.environment.cachedCameraTrackingEnabled!=null&&(e.environment.lighting.cameraTrackingEnabled=e.environment.cachedCameraTrackingEnabled,e.environment.cachedCameraTrackingEnabled=null)}_getTime(e){return[e.getTime(),3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds()]}_setTime(e,t,i){return e.setTime(t),e.setUTCHours(i/3600),e.setUTCMinutes(i%3600/60),e.setUTCSeconds(i%3600%60),e}_animateLightingWithCamera(e,t,i){const r=new Date(t.date.toString()),[s,o]=this._getTime(r),[c,l]=this._getTime(i.date),d=Gt(o,l),h=e.renderCoordsHelper,m=Q();h.toRenderCoords(e.camera.position,m);const v=Q(),V=Q();this.viewpoint.camera!=null&&h.toRenderCoords(this.viewpoint.camera.position,v);const Re=new Date;return Qe(()=>e.camera,Pe=>{h.toRenderCoords(Pe.position,V);const J=we(m,V),pe=we(v,V);let B=0;J+pe!==0&&(B=J/(J+pe));const Oe=s+(c-s)*B,Me=Ft(o,d*B);t.date=this._setTime(Re,Oe,Me)})}static createFrom(e,t){return new this().updateFrom(e,t)}};n([a({type:String,json:{write:{isRequired:!0}}})],u.prototype,"id",void 0),n([a({type:R,json:{default:()=>new R({text:""}),write:{isRequired:!0}}})],u.prototype,"title",void 0),n([L("title")],u.prototype,"castTitle",null),n([a({type:x,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.text)})}}})],u.prototype,"description",void 0),n([L("description")],u.prototype,"castDescription",null),n([a({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],u.prototype,"hidden",void 0),n([a({type:$,json:{default:()=>new $({url:""}),write:{isRequired:!0}}})],u.prototype,"thumbnail",void 0),n([L("thumbnail")],u.prototype,"castThumbnail",null),n([a({type:le,nonNullable:!0,json:{write:{isRequired:!0}}})],u.prototype,"viewpoint",void 0),n([a({type:_t,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],u.prototype,"basemap",void 0),n([L("basemap")],u.prototype,"castBasemap",null),n([a({type:Ee,json:{write:!0}})],u.prototype,"ground",void 0),n([a({type:Ut,json:{write:!0,default:"caption"},nonNullable:!0})],u.prototype,"layout",void 0),n([a({type:ne,json:{write:{isRequired:!0}}})],u.prototype,"visibleLayers",null),n([L("visibleLayers")],u.prototype,"castVisibleLayers",null),n([a({type:E,json:{write:!0}})],u.prototype,"environment",void 0),n([a(Ie)],u.prototype,"timeExtent",void 0),u=n([g("esri.webscene.Slide")],u);const Nt=u;function Te(e){if(e.type==="building-scene"||e.type==="map-image")return e.allSublayers.toArray()}function ve(e){const t=Te(e);if(t)return t.filter(i=>i.visible).map(i=>i.id)}const se=86400,be=43200;function Gt(e,t){let i=t-e;return i>be&&(i-=se),i<-be&&(i+=se),i}function Ft(e,t){return Lt(e+t,se)}const oe=P.ofType(Nt);let G=class extends w{constructor(e){super(e),this.slides=new oe}destroy(){this.slides.forEach(e=>e.destroy()),this.slides.removeAll()}set slides(e){e&&(e=e.filter(t=>!!t.viewpoint)),this._set("slides",$e(e,this._get("slides"),oe))}clone(){return new this.constructor({slides:this.slides.clone()})}};n([a({type:oe,nonNullable:!0,json:{write:!0}}),L(ft)],G.prototype,"slides",null),G=n([g("esri.webscene.Presentation")],G);const Ve=G;var ae;let I=ae=class extends w{constructor(e){super(e)}clone(){return new ae({name:this.name,path:this.path,title:this.title})}};n([a({type:String,json:{write:!0}})],I.prototype,"name",void 0),n([a({type:String,json:{write:!0}})],I.prototype,"path",void 0),n([a({type:String,json:{write:!0}})],I.prototype,"title",void 0),I=ae=n([g("esri.webscene.TransportationNetwork")],I);const kt=I;class W extends Pt{constructor(t,i){super(t,i,"webscene")}get supportsGround(){return this.greaterEqual(1,8)}get supportsVisibleElevationLayersInSlides(){return this.lessThan(1,8)}}let qt=null;function Wt(){return qt}var Ce;const A=new W(1,35),Jt=()=>{const t=[],i=A.major;for(let r=8;r<=A.minor;r++)t.push(`${i}.${r}`);return t},X="Web Scene";let p=class extends Ge.LoadableMixin(Ke(De(Ne))){constructor(e){super(e),this[Ce]=!0,this._layersIdGCTimeoutId=void 0,this._updateFromPromise=null,this.applicationProperties=null,this.clippingArea=null,this.clippingEnabled=!1,this.floorInfo=null,this.heightModelInfo=void 0,this.sourceVersion=null,this.transportationNetworks=null,this.presentation=new Ve,this.initialViewProperties=new q,this.portalItem=null,this.resourceInfo=null,this.widgets=null,this._debouncedSaveOperations=Be(async(t,i,r)=>{switch(t){case S.SAVE:return this._saveImpl(i);case S.SAVE_AS:return this._saveAsImpl(r,i)}}),this._resourceReferences={portalItem:null,paths:[]},this.authoringApp=null,this.authoringAppVersion=null,this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1}initialize(){if(this.when().catch(e=>{C.getLogger(this).error("#load()","Failed to load web scene",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e),this.addResolvingPromise(this._validateSpatialReference()),this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles(Xe(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC()))}destroy(){this._unscheduleLayersIdGC(),this.presentation&&this.presentation.destroy(),this.portalItem=Se(this.portalItem)}writeClippingArea(e,t){t.clippingArea||(t.clippingArea={}),t.clippingArea.geometry=e.toJSON()}readClippingEnabled(e,t){return!!t.clippingArea&&!!t.clippingArea.clip}writeClippingEnabled(e,t){this.clippingArea&&(t.clippingArea||(t.clippingArea={}),t.clippingArea.clip=e)}writeLayers(e,t,i,r){t[i]=this._layersToJSON(e,"operational-layers",r)}readSourceVersion(e,t){const[i,r]=t.version.split(".");return new W(parseInt(i,10),parseInt(r,10))}writeSourceVersion(e,t,i){t[i]=`${A.major}.${A.minor}`}writeTables(e,t,i,r){const s=this._layersToJSON(e,"tables",r);s.length&&(t[i]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)??null}set thumbnailUrl(e){e?this._override("thumbnailUrl",e):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp="ArcGIS API for JavaScript"}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=xe}writeGround(e,t,i,r){t[i]=e?e.write({},r):{transparency:0,layers:[]}}readInitialViewProperties(e,t){var s,o,c;const i={};(s=t.initialState)!=null&&s.environment&&(i.environment=k.fromJSON(t.initialState.environment)),i.spatialReference=t.spatialReference?_.fromJSON(t.spatialReference):_.WebMercator,i.viewingMode=t.viewingMode??"global",(o=t.initialState)!=null&&o.viewpoint&&(i.viewpoint=le.fromJSON(t.initialState.viewpoint));const r=(c=t.initialState)==null?void 0:c.timeExtent;return r!=null&&(i.timeExtent=ht.fromArray(r)),new q(i)}get spatialReference(){var e;return((e=this.initialViewProperties)==null?void 0:e.spatialReference)??_.WebMercator}get viewingMode(){var e;return((e=this.initialViewProperties)==null?void 0:e.viewingMode)??"global"}load(e){const t=this.ground;return this.addResolvingPromise(this._loadFromSource().then(()=>{t&&t!==this.ground&&t.destroy(),this._validateFeatureLayerSymbolVisibility()})),Promise.resolve(this)}loadAll(){return Fe(this,e=>{const t=this.presentation&&this.presentation.slides;e(this.ground,this.basemap,this.layers,t&&t.map(i=>i.basemap),this.tables)})}read(e,t){var s;t={...t,origin:"web-scene"};const i=this._isAuthoringAppVersionSetByUser,r=this._isAuthoringAppSetByUser;if(je(this,e,o=>super.read(e,o),t),r||(this._isAuthoringAppSetByUser=!1),i||(this._isAuthoringAppVersionSetByUser=!1),e.baseMap&&Array.isArray(e.baseMap.elevationLayers)&&((s=this.sourceVersion)==null?void 0:s.supportsVisibleElevationLayersInSlides)){const o=e.baseMap.elevationLayers.map(h=>({id:h.id})),c=this.presentation.slides,l=(h,m)=>h.visibleLayers.some(v=>v.id===m),d=o.filter(h=>!c.some(m=>l(m,h.id)));c.forEach(h=>{h.visibleLayers.addMany(d)})}}_writeBasemapElevationLayers(e){var i;const t=(i=e.ground)==null?void 0:i.layers;!e.baseMap&&(t!=null&&t.length)&&(e.baseMap={title:"Basemap",baseMapLayers:[]}),e.baseMap&&(e.baseMap.elevationLayers=F(t))}_layersToJSON(e,t,i){const r={...i,layerContainerType:t};return e.map(s=>this._verifyWritableLayer(s,i)?s.write({},r):null).filter(s=>!!s).toArray()}_verifyWritableLayer(e,t){return!!e.persistenceEnabled&&("write"in e||(t!=null&&t.messages&&t.messages.push(new y("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in web scenes`,{layer:e})),!1))}write(e,t){var s;if(this.loadStatus!=="loaded"){const o=new y("webscene:not-loaded","Web scene must be loaded before it can be serialized");throw C.getLogger(this).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),o}this._runLayersIdGC();const i=!(t!=null&&t.messages);t={messages:[],...t,origin:"web-scene"};const r=super.write(e,t);if(i){const o=((s=t.messages)==null?void 0:s.filter(c=>c.name==="web-document-write:property-required"))??[];if(o.length){const c=new y("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:o});throw C.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",o),c}}return this._writeBasemapElevationLayers(r),r}async save(e){return this._debouncedSaveOperations(S.SAVE,e)}async _saveImpl(e){var s;if(!this.portalItem)throw new y("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");if(((s=this.portalItem)==null?void 0:s.type)!==X)throw new y("webscene:portal-item-wrong-type",`Portal item needs to have type "${X}"`);const t=this._updateFromPromise;await this._ensureLoadBeforeSave();const i=this._enableVerifyItemRelativeUrls(he(this.portalItem,"web-scene",!0)),r=this.write({},i);return await Promise.all(i.resources.pendingOperations),await this._verifySave(r,i,S.SAVE,e),this._updateTypeKeywords(this.portalItem),await mt(this.portalItem,r,this._resourceReferences,i),ce(i),t&&await t,await this._saveThumbnail(),this.portalItem}async saveAs(e,t){return this._debouncedSaveOperations(S.SAVE_AS,t,e)}async _saveAsImpl(e,t){let i=Ae.from(e);if(!i)throw new y("webscene:portal-item-required","saveAs requires a portal item to save to");i.id&&(i=i.clone(),i.id=null);const r=i.portal||z.getDefault();await this._ensureLoadBeforeSave(),i.type=X,i.portal=r;const s=this._enableVerifyItemRelativeUrls(he(i,"web-scene",!0)),o=this.write({},s);await Promise.all(s.resources.pendingOperations),await this._verifySaveAs(o,s,t);const c=this.thumbnailUrl,l=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(i),await r.signIn();const d=this.portalItem,h={item:d,authenticated:!(!(d!=null&&d.id)||!d.portal.user)},{copyAllowed:m,itemReloaded:v}=await gt(h,r);if(h.authenticated||(h.authenticated=v),!m)throw new y(`${s.name}:save-as-copy-not-allowed`,"Owner of this map does not allow others to save a copy");const V={...t,copyAllResources:!0};return await wt(i,h,o,V)&&(this._resourceReferences.portalItem=i),await ut(this._resourceReferences,s),this.portalItem=i,He.prototype.read.call(this,{version:o.version,authoringApp:o.authoringApp,authoringAppVersion:o.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:i.itemUrl?D(i.itemUrl):void 0}),ce(s),c&&(this.thumbnailUrl=l?Ue(c,"w","8192"):c),s.portalItem=i,await this._saveThumbnail(),i}async _saveThumbnail(){var e;this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl})),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}async _verifySave(e,t,i,r){if(!it(this.spatialReference))throw new y("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently.");const{ignoreUnsupported:s,requiredPropertyChecksDisabled:o,strictSchemaValidationEnabled:c}=r||{};yt(t,{errorName:"webscene:save"},{ignoreUnsupported:s,supplementalUnsupportedErrors:["scenemodification:unsupported"],requiredPropertyChecksDisabled:o});const l=Wt();if(c&&l){const d=(await l()).validate(e);if(!d.length)return;const h=`webscene did not validate:
${d.join(`
`)}`;C.getLogger(this).error(`${i===S.SAVE_AS?"saveAs":"save"}(): ${h}`);const m=d.map(v=>new y("webscene:schema-validation",v));throw Mt(m)}}_verifySaveAs(e,t,i){return this._verifySave(e,t,S.SAVE_AS,i)}verifySaveAs(e){const t=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),i=this.write({},t);return this._verifySaveAs(i,t,e)}canNotSaveAs(){return!1}async updateFrom(e,t={}){const i=this._updateFrom(e,t);this._updateFromPromise=i,await i,this._updateFromPromise===i&&(this._updateFromPromise=null)}async _updateFrom(e,t={}){var i;if(await e.whenReady(),!t.environmentExcluded&&e.environment&&(this.initialViewProperties.environment=k.prototype.clone.apply(e.environment)),!t.viewpointExcluded&&e.viewpoint&&(this.initialViewProperties.viewpoint=e.viewpoint.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),this.initialViewProperties.viewingMode=e.viewingMode,this.initialViewProperties.timeExtent=((i=e.timeExtent)==null?void 0:i.clone())??null,e.clippingArea!=null?e.clippingArea!==this.clippingArea&&(this.clippingArea=e.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1,e.heightModelInfo&&(this.heightModelInfo=e.heightModelInfo.clone()),e.map===this)for(const r of e.allLayerViews){const s="visible";s in r&&s in r.layer&&r._isOverridden(s)&&(r.layer[s]=r[s])}if(!t.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this);(t.thumbnailExcluded===!1||t.thumbnailExcluded==null&&!t.viewpointExcluded)&&await this._updateFromThumbnail(e,t.thumbnailSize??void 0)}async _updateFromThumbnail(e,t){const i=lt(e,t),r=await e.takeScreenshot({format:"jpg",width:i.width,height:i.height,disableDecorations:!0});this.thumbnailUrl=r.dataUrl}_loadFromSource(){var e;return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):(e=this.portalItem)!=null&&e.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}_readAndLoadFromJSON(e,t){const i=this._validateJSON(e);return this.read(i,t),this._loadFromJSON(i,t)}_extractOperationalLayers(e){var s;const t=[];if(!((s=this.sourceVersion)!=null&&s.supportsGround)&&e.baseMap&&Array.isArray(e.baseMap.elevationLayers))for(const o of e.baseMap.elevationLayers)t.push(o);const i=[],r=o=>{var c;return o.layers&&(o.layers=o.layers.filter(r)),o.layerType!=="ArcGISTiledElevationServiceLayer"||((c=this.sourceVersion)!=null&&c.supportsGround||i.push(o),!1)};return{operationalLayers:e.operationalLayers?e.operationalLayers.filter(r):[],operationalElevationLayers:i,basemapElevationLayers:t}}async _loadFromJSON(e,t){var h;const i=new P;await this._validateSpatialReference(),await this._validateHeightModelInfo();const{populateOperationalLayers:r}=await fe(()=>import("./layersCreator-qSEwd4GK.js"),__vite__mapDeps([84,21,2,4,5,22,23,24,85,86,8,9,10,87,42,44,45,46,12,16,13,11,14,28,88,89,90,91,92,54,40,17,7,55,56,93,48]),import.meta.url),{operationalLayers:s,operationalElevationLayers:o,basemapElevationLayers:c}=this._extractOperationalLayers(e),l=[],d={context:{...t,layerContainerType:"operational-layers"}};if(this.portalItem&&(d.context.portal=this.portalItem.portal||z.getDefault()),c.length>0){const m={...d,context:{...d.context,layerContainerType:"ground"}};m.defaultLayerType="ArcGISTiledElevationServiceLayer",l.push(r(this.ground.layers,c,m))}if(o.length>0){const m={...d,context:{...d.context,layerContainerType:"ground"}};m.defaultLayerType="ArcGISTiledElevationServiceLayer",l.push(r(i,o,m))}s&&s.length>0&&l.push(r(this.layers,s,d)),(h=e.tables)!=null&&h.length&&l.push(r(this.tables,e.tables,{...d,context:{...d.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"})),await Promise.allSettled(l),await this._loadObjectsWithLayers(),this.ground.layers.addMany(i.filter(m=>m.type==="base-elevation"||m.type==="elevation"))}async _ensureLoadBeforeSave(){await this.load(),await this._loadObjectsWithLayers();const e=[],t=[...this.allLayers.items];for(const{basemap:i}of this.presentation.slides.items)i&&(t.push(...i.baseLayers.items),t.push(...i.referenceLayers.items));for(const i of t)if("beforeSave"in i&&typeof i.beforeSave=="function"){const r=i.beforeSave();r&&e.push(r)}await Promise.allSettled(e)}async _loadObjectsWithLayers(){const e=[];this.ground&&e.push(this.ground.load()),this.basemap&&e.push(this.basemap.load()),this.presentation.slides.forEach(t=>{t.basemap&&e.push(t.basemap.load())}),await Promise.allSettled(e)}async _loadFromItem(e){if(await e.load().catch(r=>{throw new y("webscene:load-portal-item","Failed to load portal item",{error:r})}),e.type!=="Web Scene")throw new y("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:e.type});const t=await e.fetchData();this.resourceInfo=t;const i={origin:"web-scene",url:D(e.itemUrl),portal:e.portal||z.getDefault(),portalItem:e,readResourcePaths:[]};await this._readAndLoadFromJSON(t,i),this._resourceReferences={portalItem:e,paths:i.readResourcePaths??[]}}_validateSpatialReference(){const e=this.initialViewProperties,t=this._sceneSpatialReference;let i;if(e.viewingMode!=="local"){if(!ge(t,ye.Global))return Promise.reject(new y("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:t,viewingMode:e.viewingMode}));i=l=>!l||tt(l,t)}else{if(!ge(t,ye.Local))return Promise.reject(new y("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:t,viewingMode:e.viewingMode}));i=l=>!l||l.equals(t)}const r=l=>{var d,h;return((d=l==null?void 0:l.camera)==null?void 0:d.position.spatialReference)??((h=l==null?void 0:l.targetGeometry)==null?void 0:h.spatialReference)},s=e.viewpoint,o=r(s);if(o&&!i(o))return Promise.reject(new y("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:o,sceneSpatialReference:t,viewingMode:e.viewingMode}));const c=this.presentation.slides.find(l=>!i(r(l.viewpoint)));if(c){const l=r(c.viewpoint);return Promise.reject(new y("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:l,sceneSpatialReference:t,viewingMode:e.viewingMode}))}return Promise.resolve()}_validateHeightModelInfo(){const e=this._sceneSpatialReference,t=rt(this.heightModelInfo,e);return t?Promise.reject(t):Promise.resolve()}_validateFeatureLayerSymbolVisibility(){var e;(e=this.sourceVersion)!=null&&e.greaterEqual(1,35)||this.layers.forEach(t=>{t.type==="feature"&&Ye(()=>t.loaded,()=>t.warnInvisibleDrapedSymbols(),{once:!0,sync:!0})})}_validateJSON(e){const t=W.parse(e.version||"","webscene");return A.validate(t),e.version=`${t.major}.${t.minor}`,t.major===1&&t.minor<=2&&(e.spatialReference=_.WebMercator.toJSON()),e}_updateTypeKeywords(e){de(e,me.LOCAL_SCENE,this.initialViewProperties.viewingMode==="local"),de(e,me.DEVELOPER_BASEMAP,ue(this.basemap)||this.presentation.slides.some(({basemap:t})=>!!t&&ue(t))),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((t,i,r)=>r.indexOf(t)===i))}get _sceneSpatialReference(){return this.initialViewProperties.spatialReference||_.WebMercator}get _verifyItemRelativeRootPath(){var e;return(e=this.portalItem)!=null&&e.itemUrl?D(this.portalItem.itemUrl).path:null}_enableVerifyItemRelativeUrls(e){const t=this._verifyItemRelativeRootPath;return t&&(e.verifyItemRelativeUrls={rootPath:t,writtenUrls:[]}),e}_unscheduleLayersIdGC(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}_scheduleLayersIdGC(){this._unscheduleLayersIdGC(),this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0,this._runLayersIdGC()},3e3)}_runLayersIdGC(){var r,s;this._unscheduleLayersIdGC();const e=(s=(r=this.applicationProperties)==null?void 0:r.viewing)==null?void 0:s.search,t=o=>this.allLayers.some(c=>c.id===o&&c.persistenceEnabled);e!=null&&e.layers&&(e.layers=e.layers.filter(o=>t(o.id)));const i=this.presentation&&this.presentation.slides;i&&i.forEach(o=>{o.visibleLayers&&(o.visibleLayers=o.visibleLayers.filter(c=>t(c.id)))})}static fromJSON(e){if(!e)throw new y("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:e})}};Ce=ct,p.version=`${A.major}.${A.minor}`,n([a({type:xt,json:{write:!0}})],p.prototype,"applicationProperties",void 0),n([a({type:Ze,json:{read:{source:"clippingArea.geometry",reader:nt},write:{target:"clippingArea.geometry"}}})],p.prototype,"clippingArea",void 0),n([b("clippingArea")],p.prototype,"writeClippingArea",null),n([a({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],p.prototype,"clippingEnabled",void 0),n([K("clippingEnabled",["clippingArea"])],p.prototype,"readClippingEnabled",null),n([b("clippingEnabled")],p.prototype,"writeClippingEnabled",null),n([a({type:pt,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],p.prototype,"floorInfo",void 0),n([a({type:et,json:{write:!0}})],p.prototype,"heightModelInfo",void 0),n([a({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],p.prototype,"layers",void 0),n([b("layers")],p.prototype,"writeLayers",null),n([a({readOnly:!0,type:W,json:{type:Jt(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],p.prototype,"sourceVersion",void 0),n([K("sourceVersion",["version"])],p.prototype,"readSourceVersion",null),n([b("sourceVersion")],p.prototype,"writeSourceVersion",null),n([a({json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],p.prototype,"tables",void 0),n([b("tables")],p.prototype,"writeTables",null),n([a()],p.prototype,"thumbnailUrl",null),n([a({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],p.prototype,"authoringApp",null),n([b("authoringApp")],p.prototype,"writeAuthoringApp",null),n([a({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],p.prototype,"authoringAppVersion",null),n([b("authoringAppVersion")],p.prototype,"writeAuthoringAppVersion",null),n([a({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],p.prototype,"ground",void 0),n([b("ground")],p.prototype,"writeGround",null),n([a({type:P.ofType(kt),json:{write:!0}})],p.prototype,"transportationNetworks",void 0),n([a({type:Ve,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(e,t,i,r)=>{if(e.slides&&e.slides.length>0){const s={...r,isPresentation:!0};t.presentation=e.write({},s)}}}}})],p.prototype,"presentation",void 0),n([a({type:q,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new q({viewingMode:"global",spatialReference:_.WebMercator})}})],p.prototype,"initialViewProperties",void 0),n([K("initialViewProperties",["initialState.timeExtent","initialState.environment","initialState.viewpoint","spatialReference","viewingMode"])],p.prototype,"readInitialViewProperties",null),n([a({type:_,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],p.prototype,"spatialReference",null),n([a({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],p.prototype,"viewingMode",null),n([a({type:Ae})],p.prototype,"portalItem",void 0),n([a()],p.prototype,"resourceInfo",void 0),n([a({type:dt,json:{write:!0}})],p.prototype,"widgets",void 0),p=n([g("esri.WebScene")],p);const Rr=p;export{Rr as default};
