import{M as Re,r as Pe,s as _e,l as Ae}from"./mathUtils-DV9iOXpW.js";import{s as $,a as ee,t as W,c as se,Q as ce,aa as Me,F as oe,O as Oe,ab as Ne,u as ie,i as Le,f as Ge,p as Fe,ac as We,ad as fe}from"./Point-XGrwlf63.js";import{s as Ie}from"./geodesicConstants-yASAK_zX.js";var e;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(e||(e={}));const Te={[e.WGS84]:{[e.CGCS2000]:a,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:a,[e.SPHERICAL_ECEF]:H,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:O,[e.PLATE_CARREE]:N,[e.WGS84]:a,[e.WGS84_ECEF]:L},[e.CGCS2000]:{[e.CGCS2000]:a,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:a,[e.SPHERICAL_ECEF]:H,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:O,[e.PLATE_CARREE]:N,[e.WGS84]:a,[e.WGS84_ECEF]:L},[e.GCSMARS2000]:{[e.CGCS2000]:null,[e.GCSMARS2000]:a,[e.GCSMOON2000]:null,[e.LON_LAT]:a,[e.SPHERICAL_ECEF]:null,[e.SPHERICAL_MARS_PCPF]:x,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:null,[e.PLATE_CARREE]:null,[e.WGS84]:null,[e.WGS84_ECEF]:null},[e.GCSMOON2000]:{[e.CGCS2000]:null,[e.GCSMARS2000]:null,[e.GCSMOON2000]:a,[e.LON_LAT]:a,[e.SPHERICAL_ECEF]:null,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:y,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:null,[e.PLATE_CARREE]:null,[e.WGS84]:null,[e.WGS84_ECEF]:null},[e.WEB_MERCATOR]:{[e.CGCS2000]:p,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:p,[e.SPHERICAL_ECEF]:ne,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:a,[e.PLATE_CARREE]:re,[e.WGS84]:p,[e.WGS84_ECEF]:Ce},[e.WGS84_ECEF]:{[e.CGCS2000]:G,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:G,[e.SPHERICAL_ECEF]:le,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:ue,[e.PLATE_CARREE]:He,[e.WGS84]:G,[e.WGS84_ECEF]:a},[e.SPHERICAL_ECEF]:{[e.CGCS2000]:i,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:i,[e.SPHERICAL_ECEF]:a,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:Se,[e.PLATE_CARREE]:de,[e.WGS84]:i,[e.WGS84_ECEF]:ae},[e.SPHERICAL_MARS_PCPF]:{[e.CGCS2000]:null,[e.GCSMARS2000]:Q,[e.GCSMOON2000]:null,[e.LON_LAT]:Q,[e.SPHERICAL_ECEF]:null,[e.SPHERICAL_MARS_PCPF]:a,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:null,[e.PLATE_CARREE]:null,[e.WGS84]:null,[e.WGS84_ECEF]:null},[e.SPHERICAL_MOON_PCPF]:{[e.CGCS2000]:null,[e.GCSMARS2000]:null,[e.GCSMOON2000]:v,[e.LON_LAT]:v,[e.SPHERICAL_ECEF]:null,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:a,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:null,[e.PLATE_CARREE]:null,[e.WGS84]:null,[e.WGS84_ECEF]:null},[e.UNKNOWN]:{[e.CGCS2000]:null,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:null,[e.SPHERICAL_ECEF]:null,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:a,[e.WEB_MERCATOR]:null,[e.PLATE_CARREE]:null,[e.WGS84]:null,[e.WGS84_ECEF]:null},[e.LON_LAT]:{[e.CGCS2000]:a,[e.GCSMARS2000]:a,[e.GCSMOON2000]:a,[e.LON_LAT]:a,[e.SPHERICAL_ECEF]:H,[e.SPHERICAL_MARS_PCPF]:x,[e.SPHERICAL_MOON_PCPF]:y,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:O,[e.PLATE_CARREE]:N,[e.WGS84]:a,[e.WGS84_ECEF]:L},[e.PLATE_CARREE]:{[e.CGCS2000]:h,[e.GCSMARS2000]:null,[e.GCSMOON2000]:null,[e.LON_LAT]:h,[e.SPHERICAL_ECEF]:Ue,[e.SPHERICAL_MARS_PCPF]:null,[e.SPHERICAL_MOON_PCPF]:null,[e.UNKNOWN]:null,[e.WEB_MERCATOR]:Ke,[e.PLATE_CARREE]:a,[e.WGS84]:h,[e.WGS84_ECEF]:we}};function te(t,r){var n;return(n=pe(t,r))==null?void 0:n.projector}function pe(t,r){if(t==null||r==null)return null;if(A.source.spatialReference===t&&A.dest.spatialReference===r)return A;const n=X(t,A.source),C=X(r,A.dest);return n===e.UNKNOWN&&C===e.UNKNOWN?se(t,r)?A.projector=a:A.projector=null:A.projector=Te[n][C],A}function qe(t,r){switch(te(t,r)){case a:return"copy3";case H:return"wgs84ToSphericalECEF";case O:return"wgs84ToWebMercator";case N:return"wgs84ToPlateCarree";case L:return"wgs84ToWGS84ECEF";case p:return"webMercatorToWGS84";case ne:return"webMercatorToSphericalECEF";case Ce:return"webMercatorToWGS84ECEF";case re:return"webMercatorToPlateCarree";case G:return"wgs84ECEFToWGS84";case le:return"wgs84ECEFToSphericalECEF";case ue:return"wgs84ECEFToWebMercator";case i:return"sphericalECEFToWGS84";case Se:return"sphericalECEFToWebMercator";case Q:return"sphericalMarsPCPFToMars2000";case v:return"sphericalMoonPCPFToMoon2000";case ae:return"sphericalECEFToWGS84ECEF";case x:return"mars2000ToSphericalPCPF";case y:return"moon2000ToSphericalPCPF";default:return null}}function X(t,r){return t?r.spatialReference===t?r.spatialReferenceId:(r.spatialReference=t,"metersPerUnit"in r&&(r.metersPerUnit=ce(t,1)),Me(t)?r.spatialReferenceId=e.SPHERICAL_ECEF:oe(t)?r.spatialReferenceId=e.WGS84:Oe(t)?r.spatialReferenceId=e.WEB_MERCATOR:Ne(t)?r.spatialReferenceId=e.PLATE_CARREE:t.wkt===ie.wkt?r.spatialReferenceId=e.WGS84_ECEF:t.wkid===Le.CGCS2000?r.spatialReferenceId=e.CGCS2000:t.wkt===Ge.wkt?r.spatialReferenceId=e.SPHERICAL_MARS_PCPF:t.wkt===Fe.wkt?r.spatialReferenceId=e.SPHERICAL_MOON_PCPF:We(t)?r.spatialReferenceId=e.GCSMARS2000:fe(t)?r.spatialReferenceId=e.GCSMOON2000:r.spatialReferenceId=e.UNKNOWN):e.UNKNOWN}function a(t,r,n,C){t!==n&&(n[C++]=t[r++],n[C++]=t[r++],n[C]=t[r])}function p(t,r,n,C){n[C]=U*(t[r]/F),n[C+1]=U*(Ee-2*Math.atan(Math.exp(-t[r+1]/F))),n[C+2]=t[r+2]}function ne(t,r,n,C){const u=t[r]/F,l=Ee-2*Math.atan(Math.exp(-t[r+1]/F)),E=F+t[r+2],S=Math.cos(l)*E;n[C]=Math.cos(u)*S,n[C+1]=Math.sin(u)*S,n[C+2]=Math.sin(l)*E}function Ce(t,r,n,C){p(t,r,n,C),L(n,C,n,C)}function he(t,r,n,C,u){const l=.4999999*Math.PI,E=Pe(d*t[r+1],-l,l),S=Math.sin(E);n[C++]=d*t[r]*u.radius,n[C++]=u.halfSemiMajorAxis*Math.log((1+S)/(1-S)),n[C]=t[r+2]}function O(t,r,n,C){he(t,r,n,C,W)}function N(t,r,n,C){n[C]=t[r]*Y,n[C+1]=t[r+1]*Y,n[C+2]=t[r+2]}function h(t,r,n,C){n[C]=t[r]*Z,n[C+1]=t[r+1]*Z,n[C+2]=t[r+2]}function re(t,r,n,C){p(t,r,n,C),N(n,C,n,C)}function He(t,r,n,C){G(t,r,n,C),N(n,C,n,C)}function de(t,r,n,C){i(t,r,n,C),N(n,C,n,C)}function Ue(t,r,n,C){h(t,r,n,C),H(n,C,n,C)}function Ke(t,r,n,C){h(t,r,n,C),O(n,C,n,C)}function we(t,r,n,C){h(t,r,n,C),L(n,C,n,C)}function z(t,r,n,C,u){const l=u+t[r+2],E=d*t[r+1],S=d*t[r],R=Math.cos(E)*l;n[C]=Math.cos(S)*R,n[C+1]=Math.sin(S)*R,n[C+2]=Math.sin(E)*l}function y(t,r,n,C){z(t,r,n,C,$.radius)}function x(t,r,n,C){z(t,r,n,C,ee.radius)}function H(t,r,n,C){z(t,r,n,C,W.radius)}function D(t,r,n,C,u){const l=t[r],E=t[r+1],S=t[r+2],R=Math.sqrt(l*l+E*E+S*S),_=Ae(S/(R===0?1:R)),P=Math.atan2(E,l);n[C++]=U*P,n[C++]=U*_,n[C]=R-u}function v(t,r,n,C){D(t,r,n,C,$.radius)}function Q(t,r,n,C){D(t,r,n,C,ee.radius)}function i(t,r,n,C){D(t,r,n,C,W.radius)}function Se(t,r,n,C){i(t,r,n,C),O(n,C,n,C)}function ae(t,r,n,C){i(t,r,n,C),L(n,C,n,C)}function Be(t,r,n,C,u){const l=d*t[r],E=d*t[r+1],S=t[r+2],R=Math.sin(E),_=Math.cos(E),P=u.radius/Math.sqrt(1-u.eccentricitySquared*R*R);n[C++]=(P+S)*_*Math.cos(l),n[C++]=(P+S)*_*Math.sin(l),n[C++]=(P*(1-u.eccentricitySquared)+S)*R}function L(t,r,n,C){Be(t,r,n,C,W)}function G(t,r,n,C){const u=Ie,l=t[r],E=t[r+1],S=t[r+2];let R,_,P,M,o,B,w,s,c,K,m,b,g,f,I,j,q,k,T,J,V;R=Math.abs(S),_=l*l+E*E,P=Math.sqrt(_),M=_+S*S,o=Math.sqrt(M),J=Math.atan2(E,l),B=S*S/M,w=_/M,f=u.a2/o,I=u.a3-u.a4/o,w>.3?(s=R/o*(1+w*(u.a1+f+B*I)/o),T=Math.asin(s),K=s*s,c=Math.sqrt(1-K)):(c=P/o*(1-B*(u.a5-f-w*I)/o),T=Math.acos(c),K=1-c*c,s=Math.sqrt(K)),m=1-W.eccentricitySquared*K,b=W.radius/Math.sqrt(m),g=u.a6*b,f=P-b*c,I=R-g*s,q=c*f+s*I,j=c*I-s*f,k=j/(g/m+q),T+=k,V=q+j*k/2,S<0&&(T=-T),n[C++]=U*J,n[C++]=U*T,n[C]=V}function le(t,r,n,C){G(t,r,n,C),H(n,C,n,C)}function ue(t,r,n,C){G(t,r,n,C),O(n,C,n,C)}const A={source:{spatialReference:null,spatialReferenceId:e.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:e.UNKNOWN,metersPerUnit:1},projector:a},d=_e(1),U=Re(1),Ee=.5*Math.PI,F=W.radius,Y=F*Math.PI/180,Z=180/(F*Math.PI);function me(t,r,n,C,u,l,E=Math.floor(t.length/3)){const S=te(r,u);if(S==null)return!1;if(S===a){if(t===C&&n===l)return!0;const _=n+3*E;for(let P=n,M=l;P<_;P++,M++)C[M]=t[P];return!0}const R=n+3*E;for(let _=n,P=l;_<R;_+=3,P+=3)S(t,_,C,P);return!0}const ke=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:me},Symbol.toStringTag,{value:"Module"}));export{pe as F,te as G,a as I,Te as L,e as N,qe as W,O as d,he as h,me as o,ke as p,Z as r,D as v};
