const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ShadowCastAccumulate.glsl-DMni1gLj.js","./index-4eY77cms.js","./index-Cx51aysm.css","./Accessor-BmwT4B0c.js","./Camera-CdyTfTAk.js","./Clonable-Z-AWS-16.js","./Cyclical-Dlbl-cQK.js","./mathUtils-Cfq9PL9W.js","./JSONSupport-DcrLLGjL.js","./cast-CsZslgGN.js","./writer-DKgfqj4X.js","./Point-Cz2JYYmX.js","./Viewpoint-DvyUmqUt.js","./jsonUtils-CwFG8yN4.js","./Extent-g5W9hy0j.js","./Polyline-s-JzsQqo.js","./typeUtils-B6WBEKDM.js","./reactiveUtils-XM7cS2OP.js","./Evented-Dw4_VOGn.js","./SimpleObservable-CvOkykwM.js","./jsxFactory-Cnml7uXM.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./uuid-Cl5lrJ4c.js","./screenUtils-_ZIvrt5o.js","./workers-Cds_sd9m.js","./Queue-BQesTh_6.js","./vec3f64-BLpZdpfb.js","./GraphicsCollection-BJ5Nr2H8.js","./Graphic-Dt0LgVGU.js","./opacityUtils-Dim20wpZ.js","./enumeration-DpvDkLNI.js","./Color-VJEMvW-n.js","./colorUtils-Rxh2V3ai.js","./ActionToggle-D7439N1A.js","./Identifiable-BHVfzH03.js","./TextSymbol-BLIQ6RKX.js","./collectionUtils-CTT-51g7.js","./Portal-CmmHxpLg.js","./aaBoundingBox-Dw3yBk2f.js","./HeightModelInfo-C05IFsWs.js","./projection-CyCZAIaD.js","./projectBuffer-CQnuEMuP.js","./geodesicConstants-RQL9oKdk.js","./projectBoundingRect-C2OcwCLZ.js","./projectPointToVector-BoxjK-qy.js","./boundedPlane-DuGhiiFM.js","./sphere-Cin5efBj.js","./mat4-Fi6iAz29.js","./common-DQOJ18NT.js","./vec32-Dvg_eL9J.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./mat3-CR8GKnhD.js","./mat3f64-BBpwCtoL.js","./plane-CpXmOyqq.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./vec2f64-Dy6m9Nrb.js","./mathUtils-BgCEaV43.js","./lineSegment-v806maA5.js","./RenderCoordsHelper-DA-pMWeR.js","./spatialReferenceEllipsoidUtils-DBqQpPRa.js","./projectVectorToPoint-DEm8-dt4.js","./projectVectorToVector-CCOy_B5J.js","./dehydratedFeatureUtils-1rrRm6hF.js","./ViewingMode-Dodu7ZZk.js","./scaleUtils-DPfHG2g0.js","./layerUtils-B__v9OBu.js","./DefaultUI-BwWVKFUS.js","./UpdatingHandles-CzJ4c3KT.js","./InputManager-DZ3jJnlx.js","./signal-CySMLEX9.js","./Basemap-BZmrlnvW.js","./loadAll-D1eTJ7uv.js","./PortalItem-CTx1kJsR.js","./basemapDefinitions-D-Q7PKmu.js","./writeUtils-CcunaxF8.js","./groundInstanceUtils-Ben03ZCf.js","./CollectionFlattener-U8hHQmGf.js","./editableLayers-CWgCazH-.js","./catalogUtils-CGCu8hgu.js","./basemapEnsureType-CmRtohu0.js","./basemapUtils-oMnqy94d.js","./utils-DYurMneM.js","./mat4f32-DcsiF_Rp.js","./TablesMixin-Bqfi1Ha_.js","./Layer-DH4_Pn8a.js","./TimeExtent-BO6BsF_x.js","./timeUtils-C1c_L2Fd.js","./timeZoneUtils-DxzjpEBb.js","./ReactiveMap-BHFEHYMj.js","./Query-B_2mhyL4.js","./Field-BDG0QV_T.js","./fieldType-CBeoJWlv.js","./FullTextSearch-CBnxSwz4.js","./selectionUtils-DYi6daQO.js","./ViewEvents-c9mvQ_r3.js","./IViewEvents-Bci6PjlS.js","./interfaces-D6pIddIh.js","./screenUtils-BWEEmpSb.js","./HighlightDefaults-CumzVg9-.js","./a11yUtils-ClKbIIe-.js","./heightModelInfoUtils-D_x68P3s.js","./unitBezier-B1N-tmtC.js","./imageUtils-DsXKmbqJ.js","./capabilities-DwlKKScG.js","./themeUtils-C3zvZbsE.js","./globalCss-vQlnDsEX.js","./accessibleHandler-BaA3O97p.js","./CompassViewModel-DBhnIkQP.js","./GoTo-zPv0y7kC.js","./ZoomViewModel-Bua4WqEj.js","./NormalUtils.glsl-W-nmUbAv.js","./earcut-D9gy186-.js","./computeTranslationToOriginAndRotation-DYUrDrjE.js","./Indices-D8XWalpO.js","./vec3-BXNNVgyU.js","./ElevationContext-BJejROd5.js","./ElevationProvider-aS5xrHHy.js","./VertexAttribute-Cq4MnHjR.js","./unitConversionUtils-rg07EgOm.js","./lengthUtils-_77UiyVF.js","./hydratedFeatures-CNHxsqRS.js","./SnappingCandidate-DGkpYqI6.js","./LineCallout.glsl-BQyjm-mE.js","./visualVariableUtils-Xcorldoo.js","./Material-C_-mgXN8.js","./NoParameters-t-PuNrgq.js","./FloatArray-BQXWSSJh.js","./BindType-BBwFZqyN.js","./Matrix3PassUniform-uCCQMnlP.js","./Texture-BVJ22uHh.js","./enums-D9v74xTE.js","./getDataTypeBytes-BTGR5GyG.js","./renderState-Ci93M1-P.js","./basicInterfaces-CZwQPxTp.js","./InterleavedLayout-_dYEAUNK.js","./BufferView-0osDbyWD.js","./vec2-ChnYg_BJ.js","./types-D0PSWh4d.js","./triangle-B1tKFm7z.js","./ShaderTechniqueConfiguration-D4dZMCXS.js","./glsl-BH37Aalp.js","./requestImageUtils-DWgRKL5q.js","./TextureFormat-1mYWTFa-.js","./graphicUtils-BFGMMQ1R.js","./meshVertexSpaceUtils-AgAbm20L.js","./MeshLocalVertexSpace-CnHk-qPr.js","./RibbonLine.glsl-DwJpAQ1c.js","./sdfPrimitives-DBgFWIDT.js","./doublePrecisionUtils-B0owpBza.js","./floatRGBA-Cb__GiDF.js","./Octree-CmoRJhci.js","./ShaderBuilder-BKul5qh8.js","./RgbaFloatEncoding.glsl-_io2eW3M.js","./Attribute-DGhdp5lO.js","./vec2f32-BbH2jxlN.js","./DefaultBufferWriter-CqCDaNCZ.js","./memoryEstimations-Bcyf-mHz.js","./dehydratedFeatures-kwLHUA1D.js","./quantizationUtils-DgFbqZi7.js","./featureConversionUtils-CvnFcmH_.js","./OptimizedFeature-P2towpqD.js","./OptimizedGeometry-BJqUA4Pi.js","./OptimizedFeatureSet-Blu9Ckm7.js","./edgeUtils-D0U-z06n.js","./NormalAttribute.glsl-0GHNIsQf.js","./Float4DrawUniform-Db0CLl_z.js","./Matrix3DrawUniform-DD7AqlIc.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./GeometryUtil-D-PMXorz.js","./vec3f32-nZdmKIgz.js","./RealisticTree.glsl-PW_KtBDJ.js","./Intersector-tBiZcjSu.js","./intersectorUtils-BNnvTT1E.js","./verticalOffsetUtils-BFnFdbst.js","./orientedBoundingBox-B17G_yFO.js","./quat-CP7JhygC.js","./Intersector-zrebwyaY.js","./DefaultMaterial-GRoe8HM5.js","./SceneLighting-BuSMIzqo.js","./GLTextureMaterial-96UpbkjC.js","./VertexColor.glsl-D3WyDYIi.js","./Matrix4PassUniform-COGIPIq4.js","./VerticalOffset.glsl-CsMbbWIx.js","./Matrix4sPassUniform-SKhQ1xSr.js","./Float2PassUniform-x4sHx2JD.js","./BooleanBindUniform-BgD_OP8i.js","./CameraSpace.glsl-g9iLbhnR.js","./Scheduler-i_u8qdlN.js","./debugFlags-B1LM_Apo.js","./HUDRenderStyle-BhGvVxgm.js","./HUDVisibility.glsl-DuFScu5i.js","./triangulationUtils-Cu97ljqy.js","./deduplicate-Cp1WDW0w.js","./OverlayCompositing.glsl-CUa8aMAb.js","./GridLocalOriginFactory-CngFIYNp.js","./RenderCamera-CDB-KFBK.js","./axisAngleDegrees-DdLZENJj.js","./weather-zOic7P_q.js","./RenderPlugin-CTXypYLE.js","./VertexElementDescriptor-BLyltQyJ.js","./VertexArrayObject-vYejmVPr.js","./BufferObject-BJilD_hc.js","./NestedMap-GuqgquCN.js","./Normals-D6WqMXVD.js","./fontUtils-CGi-tOxo.js","./cameraUtils-Cg-qbPDO.js","./earthUtils-8WLQbUUl.js","./spatialReferenceSupport-DfixDcu7.js","./ElevationSamplerData-UywXoG8C.js","./terrainUtils-CgFk6NLH.js","./TileInfo-DxwC9WcY.js","./TileKey-DZd6gJy7.js","./FramebufferObject-B01p0UGV.js","./glUtil-CAJRmga-.js","./ShadowCastVisualizeTechniqueConfiguration-vN_a9xco.js","./SunCalc-uwgdo0BB.js","./VirtualLighting-CdhwLgbn.js","./ray-C_tSu6xd.js","./RenderFeature-2QP3kBrd.js","./unitFormatUtils-Q7ZG7HcF.js","./ByteSizeUnit-BsxeN7wM.js","./quantityUtils-BsDK158M.js","./ZoomMomentumEstimator-BDiG9U4W.js","./HUDMaterial-DDt4C7E7.js","./labelFormatUtils-F9rkrs4Y.js","./labelUtils-DCpQ7n-8.js","./DepthRange-BJLjx8ee.js","./elevationInfoUtils-D26wVF2d.js","./hitTest-Dmi1EcVX.js","./LayerConstants-B33OP6sh.js","./intersectorUtilsConversions-CiJ6bOx7.js","./ElevationRange-BrgM1moX.js","./hitTestSelectUtils-UXJPjatw.js","./MemCache-CmojB_Z1.js","./DefaultLoadingContext-pYVsNNqG.js","./wosrLoader-CvsaTck0.js","./Version-Cd3TlGH0.js","./DrawParameters-C9t9_e99.js","./TileStrategy-CtmYSAoK.js","./TileKey-DBTeo_j0.js","./ScheduledQueueProcessor-U8WIIyj8.js","./RenderableTile-FJVLrFon.js","./config-BOD8--da.js","./StyleDefinition-C2Flw6Qv.js","./enums-BTM-fOHQ.js","./enums-BRzLM11V.js","./GeometryUtils-F7QfOKlc.js","./DefaultVertexAttributeLayouts-wSIZdMhB.js","./DisplayObject-Dejv4A66.js","./resources-D31XxULB.js","./WorkerHandle-CKOgUZ7i.js","./colorUtils-DaPfwnk3.js","./vec33-KumQEj7U.js","./ShaderTechniqueRepository-Ch1TPHrL.js","./Blit-_zFq7-RL.js","./testSVGPremultipliedAlpha-BGpZOwI7.js","./RenderingContext-7iVYEQBa.js","./ProgramCache-CuBZBhwD.js","./Program-C5Xq9SwE.js","./layerViewUtils-Bevty3Jm.js","./makeScheduleFunction-CggzEh3c.js","./layersCreator-BJyy3KAG.js","./loadUtils-DPEbqruB.js","./requestPresets-D39VZbLJ.js","./associatedFeatureServiceUtils-BqJqfohX.js","./fetchService-DZsSekGm.js","./lazyLayerLoader-C_wVyUAo.js","./portalLayers-BFMslhQ9.js","./portalItemUtils-ByOtbGao.js","./styleUtils-Bye9ft1s.js"])))=>i.map(i=>d[i]);
import{_ as Pe,L as ze,c as ve,n as Ke,i as Qe,a as Xe}from"./index-4eY77cms.js";import{m as Re,r as y,a as Ye}from"./index-C5b9dHRB.js";import{V as M,w as Ze,_ as et,p as tt,v as it,d as ie}from"./reactiveUtils-XM7cS2OP.js";import{c as B,d as rt,n as st}from"./ShadowCastAccumulate.glsl-DMni1gLj.js";import{r as s,m as n,a as g,c as x,$ as xe,N as Me,L as Q,B as O,a5 as at,a6 as ot,E as nt,l as pt,k as lt,s as w,U as mt}from"./Accessor-BmwT4B0c.js";import{a as A,a3 as ht,I as X,a5 as ct}from"./cast-CsZslgGN.js";import{E as dt,L as ut}from"./DefaultUI-BwWVKFUS.js";import{m as we}from"./Viewpoint-DvyUmqUt.js";import{m as yt,C as Y}from"./Portal-CmmHxpLg.js";import{t as wt}from"./loadAll-D1eTJ7uv.js";import{S as gt,m as vt}from"./MultiOriginJSONSupport-DbmrbwMa.js";import{p as ft}from"./Promise-DfET-uns.js";import{r as f,o as Z}from"./writer-DKgfqj4X.js";import{i as fe}from"./originUtils-D69mHv66.js";import{S as v,d as bt}from"./JSONSupport-DcrLLGjL.js";import{w as _t}from"./Extent-g5W9hy0j.js";import{v as St}from"./HeightModelInfo-C05IFsWs.js";import{L as Lt}from"./projection-CyCZAIaD.js";import{g as _,ag as It}from"./Point-Cz2JYYmX.js";import{i as At}from"./heightModelInfoUtils-D_x68P3s.js";import{f as Et}from"./jsonUtils-CwFG8yN4.js";import Oe from"./PortalItem-CTx1kJsR.js";import{o as be}from"./jsonContext-Ctyl6VtL.js";import{u as _e,E as Se}from"./portalItemUtils-ByOtbGao.js";import{m as Le}from"./basemapUtils-oMnqy94d.js";import{i as Vt,a as $t,l as Ct}from"./Viewing-DCv36m9x.js";import{e as Tt}from"./tagSymbols-BPcGfZon.js";import{p as Pt}from"./TimeExtent-BO6BsF_x.js";import{l as Ie}from"./ViewingMode-Dodu7ZZk.js";import{r as Ae}from"./spatialReferenceSupport-DfixDcu7.js";import{A as I}from"./interfaces-CL2NbQte.js";import{a as Rt}from"./Widgets-BkRSKro2.js";import{n as xt,p as Mt}from"./resourceUtils-DLwJDPjK.js";import{t as Ot}from"./saveUtils-D2cY3Oni.js";import{isCopyAllowed as jt,initializeNewItem as Ut}from"./webdocSaveUtils-De4BSi7Z.js";import{m as je,u as V}from"./timeProperties-DLK_VrPU.js";import{n as Ue,t as Ft}from"./collectionUtils-CTT-51g7.js";import Nt from"./Basemap-BZmrlnvW.js";import{a as kt}from"./Clonable-Z-AWS-16.js";import{_ as Gt}from"./mathUtils-Cfq9PL9W.js";import{v as Ee}from"./vec32-Dvg_eL9J.js";import{n as ee}from"./vec3f64-BLpZdpfb.js";import{f as Dt}from"./Layer-DH4_Pn8a.js";import{m as qt,u as Wt}from"./basemapEnsureType-CmRtohu0.js";import{g as Bt}from"./Scheduler-i_u8qdlN.js";import{p as Fe,c as Jt}from"./VirtualLighting-CdhwLgbn.js";import{p as Ht,d as zt}from"./weather-zOic7P_q.js";import{r as Kt,ad as Qt}from"./opacityUtils-Dim20wpZ.js";import{r as Xt}from"./Version-Cd3TlGH0.js";import{r as Yt}from"./FloatArray-BQXWSSJh.js";import{H as Ve,u as $e,O as Ce,N as Zt}from"./component-utils-D0ciaaZ_.js";import"./Evented-Dw4_VOGn.js";import"./SimpleObservable-CvOkykwM.js";import"./Camera-CdyTfTAk.js";import"./Cyclical-Dlbl-cQK.js";import"./jsxFactory-Cnml7uXM.js";import"./intl-Duiy0OzY.js";import"./uuid-Cl5lrJ4c.js";import"./screenUtils-_ZIvrt5o.js";import"./workers-Cds_sd9m.js";import"./Queue-BQesTh_6.js";import"./GraphicsCollection-BJ5Nr2H8.js";import"./Graphic-Dt0LgVGU.js";import"./enumeration-DpvDkLNI.js";import"./Color-VJEMvW-n.js";import"./colorUtils-Rxh2V3ai.js";import"./ActionToggle-D7439N1A.js";import"./Identifiable-BHVfzH03.js";import"./typeUtils-B6WBEKDM.js";import"./Polyline-s-JzsQqo.js";import"./TextSymbol-BLIQ6RKX.js";import"./aaBoundingBox-Dw3yBk2f.js";import"./projectBoundingRect-C2OcwCLZ.js";import"./projectBuffer-CQnuEMuP.js";import"./geodesicConstants-RQL9oKdk.js";import"./projectPointToVector-BoxjK-qy.js";import"./boundedPlane-DuGhiiFM.js";import"./sphere-Cin5efBj.js";import"./mat4-Fi6iAz29.js";import"./common-DQOJ18NT.js";import"./vec42-YcqnINSP.js";import"./vec4f64-o2zAXfmz.js";import"./mat3-CR8GKnhD.js";import"./mat3f64-BBpwCtoL.js";import"./plane-CpXmOyqq.js";import"./mat4f64-Dk4dwAN8.js";import"./quatf64-CCm9z-pX.js";import"./vec2f64-Dy6m9Nrb.js";import"./mathUtils-BgCEaV43.js";import"./lineSegment-v806maA5.js";import"./RenderCoordsHelper-DA-pMWeR.js";import"./spatialReferenceEllipsoidUtils-DBqQpPRa.js";import"./projectVectorToPoint-DEm8-dt4.js";import"./projectVectorToVector-CCOy_B5J.js";import"./dehydratedFeatureUtils-1rrRm6hF.js";import"./scaleUtils-DPfHG2g0.js";import"./layerUtils-B__v9OBu.js";import"./NormalUtils.glsl-W-nmUbAv.js";import"./earcut-D9gy186-.js";import"./computeTranslationToOriginAndRotation-DYUrDrjE.js";import"./Indices-D8XWalpO.js";import"./vec3-BXNNVgyU.js";import"./ElevationContext-BJejROd5.js";import"./ElevationProvider-aS5xrHHy.js";import"./VertexAttribute-Cq4MnHjR.js";import"./unitConversionUtils-rg07EgOm.js";import"./lengthUtils-_77UiyVF.js";import"./hydratedFeatures-CNHxsqRS.js";import"./SnappingCandidate-DGkpYqI6.js";import"./LineCallout.glsl-BQyjm-mE.js";import"./visualVariableUtils-Xcorldoo.js";import"./Material-C_-mgXN8.js";import"./NoParameters-t-PuNrgq.js";import"./triangle-B1tKFm7z.js";import"./basicInterfaces-CZwQPxTp.js";import"./graphicUtils-BFGMMQ1R.js";import"./meshVertexSpaceUtils-AgAbm20L.js";import"./MeshLocalVertexSpace-CnHk-qPr.js";import"./RibbonLine.glsl-DwJpAQ1c.js";import"./InterleavedLayout-_dYEAUNK.js";import"./BufferView-0osDbyWD.js";import"./vec2-ChnYg_BJ.js";import"./types-D0PSWh4d.js";import"./sdfPrimitives-DBgFWIDT.js";import"./doublePrecisionUtils-B0owpBza.js";import"./floatRGBA-Cb__GiDF.js";import"./enums-D9v74xTE.js";import"./Octree-CmoRJhci.js";import"./Matrix3PassUniform-uCCQMnlP.js";import"./BindType-BBwFZqyN.js";import"./renderState-Ci93M1-P.js";import"./glsl-BH37Aalp.js";import"./Texture-BVJ22uHh.js";import"./signal-CySMLEX9.js";import"./getDataTypeBytes-BTGR5GyG.js";import"./ShaderTechniqueConfiguration-D4dZMCXS.js";import"./ShaderBuilder-BKul5qh8.js";import"./RgbaFloatEncoding.glsl-_io2eW3M.js";import"./Attribute-DGhdp5lO.js";import"./vec2f32-BbH2jxlN.js";import"./DefaultBufferWriter-CqCDaNCZ.js";import"./memoryEstimations-Bcyf-mHz.js";import"./dehydratedFeatures-kwLHUA1D.js";import"./quantizationUtils-DgFbqZi7.js";import"./Field-BDG0QV_T.js";import"./fieldType-CBeoJWlv.js";import"./featureConversionUtils-CvnFcmH_.js";import"./OptimizedFeature-P2towpqD.js";import"./OptimizedGeometry-BJqUA4Pi.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./edgeUtils-D0U-z06n.js";import"./NormalAttribute.glsl-0GHNIsQf.js";import"./Float4DrawUniform-Db0CLl_z.js";import"./Matrix3DrawUniform-DD7AqlIc.js";import"./webStyleAcceptedFormats-CG7ZQ6BV.js";import"./GeometryUtil-D-PMXorz.js";import"./vec3f32-nZdmKIgz.js";import"./RealisticTree.glsl-PW_KtBDJ.js";import"./Intersector-tBiZcjSu.js";import"./intersectorUtils-BNnvTT1E.js";import"./verticalOffsetUtils-BFnFdbst.js";import"./orientedBoundingBox-B17G_yFO.js";import"./quat-CP7JhygC.js";import"./Intersector-zrebwyaY.js";import"./DefaultMaterial-GRoe8HM5.js";import"./SceneLighting-BuSMIzqo.js";import"./GLTextureMaterial-96UpbkjC.js";import"./VertexColor.glsl-D3WyDYIi.js";import"./Matrix4PassUniform-COGIPIq4.js";import"./VerticalOffset.glsl-CsMbbWIx.js";import"./Matrix4sPassUniform-SKhQ1xSr.js";import"./Float2PassUniform-x4sHx2JD.js";import"./BooleanBindUniform-BgD_OP8i.js";import"./CameraSpace.glsl-g9iLbhnR.js";import"./HUDRenderStyle-BhGvVxgm.js";import"./HUDVisibility.glsl-DuFScu5i.js";import"./triangulationUtils-Cu97ljqy.js";import"./deduplicate-Cp1WDW0w.js";import"./OverlayCompositing.glsl-CUa8aMAb.js";import"./GridLocalOriginFactory-CngFIYNp.js";import"./RenderCamera-CDB-KFBK.js";import"./axisAngleDegrees-DdLZENJj.js";import"./RenderPlugin-CTXypYLE.js";import"./HighlightDefaults-CumzVg9-.js";import"./VertexElementDescriptor-BLyltQyJ.js";import"./VertexArrayObject-vYejmVPr.js";import"./BufferObject-BJilD_hc.js";import"./NestedMap-GuqgquCN.js";import"./Normals-D6WqMXVD.js";import"./fontUtils-CGi-tOxo.js";import"./cameraUtils-Cg-qbPDO.js";import"./earthUtils-8WLQbUUl.js";import"./ElevationSamplerData-UywXoG8C.js";import"./terrainUtils-CgFk6NLH.js";import"./TileInfo-DxwC9WcY.js";import"./TileKey-DZd6gJy7.js";import"./FramebufferObject-B01p0UGV.js";import"./glUtil-CAJRmga-.js";import"./ShadowCastVisualizeTechniqueConfiguration-vN_a9xco.js";import"./SunCalc-uwgdo0BB.js";import"./ray-C_tSu6xd.js";import"./InputManager-DZ3jJnlx.js";import"./RenderFeature-2QP3kBrd.js";import"./unitFormatUtils-Q7ZG7HcF.js";import"./ByteSizeUnit-BsxeN7wM.js";import"./quantityUtils-BsDK158M.js";import"./ZoomMomentumEstimator-BDiG9U4W.js";import"./UpdatingHandles-CzJ4c3KT.js";import"./HUDMaterial-DDt4C7E7.js";import"./labelFormatUtils-F9rkrs4Y.js";import"./labelUtils-DCpQ7n-8.js";import"./DepthRange-BJLjx8ee.js";import"./elevationInfoUtils-D26wVF2d.js";import"./hitTest-Dmi1EcVX.js";import"./LayerConstants-B33OP6sh.js";import"./intersectorUtilsConversions-CiJ6bOx7.js";import"./ElevationRange-BrgM1moX.js";import"./hitTestSelectUtils-UXJPjatw.js";import"./MemCache-CmojB_Z1.js";import"./DefaultLoadingContext-pYVsNNqG.js";import"./wosrLoader-CvsaTck0.js";import"./requestImageUtils-DWgRKL5q.js";import"./CollectionFlattener-U8hHQmGf.js";import"./DrawParameters-C9t9_e99.js";import"./TileStrategy-CtmYSAoK.js";import"./TileKey-DBTeo_j0.js";import"./ScheduledQueueProcessor-U8WIIyj8.js";import"./ReactiveMap-BHFEHYMj.js";import"./RenderableTile-FJVLrFon.js";import"./config-BOD8--da.js";import"./StyleDefinition-C2Flw6Qv.js";import"./enums-BTM-fOHQ.js";import"./enums-BRzLM11V.js";import"./GeometryUtils-F7QfOKlc.js";import"./DefaultVertexAttributeLayouts-wSIZdMhB.js";import"./DisplayObject-Dejv4A66.js";import"./resources-D31XxULB.js";import"./WorkerHandle-CKOgUZ7i.js";import"./colorUtils-DaPfwnk3.js";import"./vec33-KumQEj7U.js";import"./ShaderTechniqueRepository-Ch1TPHrL.js";import"./Blit-_zFq7-RL.js";import"./testSVGPremultipliedAlpha-BGpZOwI7.js";import"./RenderingContext-7iVYEQBa.js";import"./ProgramCache-CuBZBhwD.js";import"./Program-C5Xq9SwE.js";import"./capabilities-DwlKKScG.js";import"./imageUtils-DsXKmbqJ.js";import"./layerViewUtils-Bevty3Jm.js";import"./screenUtils-BWEEmpSb.js";import"./makeScheduleFunction-CggzEh3c.js";import"./groundInstanceUtils-Ben03ZCf.js";import"./editableLayers-CWgCazH-.js";import"./catalogUtils-CGCu8hgu.js";import"./TablesMixin-Bqfi1Ha_.js";import"./timeZoneUtils-DxzjpEBb.js";import"./Query-B_2mhyL4.js";import"./FullTextSearch-CBnxSwz4.js";import"./selectionUtils-DYi6daQO.js";import"./ViewEvents-c9mvQ_r3.js";import"./IViewEvents-Bci6PjlS.js";import"./interfaces-D6pIddIh.js";import"./a11yUtils-ClKbIIe-.js";import"./unitBezier-B1N-tmtC.js";import"./themeUtils-C3zvZbsE.js";import"./globalCss-vQlnDsEX.js";import"./accessibleHandler-BaA3O97p.js";import"./CompassViewModel-DBhnIkQP.js";import"./GoTo-zPv0y7kC.js";import"./ZoomViewModel-Bua4WqEj.js";import"./multiOriginJSONSupportUtils-C0wm8_Yw.js";import"./utils-DYurMneM.js";import"./mat4f32-DcsiF_Rp.js";import"./basemapDefinitions-D-Q7PKmu.js";import"./timeUtils-C1c_L2Fd.js";import"./TimeInterval-B7L-CEq7.js";import"./resourceUtils-B0t9BqfX.js";import"./project-CvBujuEW.js";import"./utils-YowqfOgk.js";import"./utils-B-dlKIhi.js";import"./writeUtils-CcunaxF8.js";import"./debugFlags-B1LM_Apo.js";import"./TextureFormat-1mYWTFa-.js";var re;let j=re=class extends v{constructor(t){super(t),this.viewing=null}clone(){var t;return new re({viewing:((t=this.viewing)==null?void 0:t.clone())??null})}};s([n({type:Vt,json:{write:!0}})],j.prototype,"viewing",void 0),j=re=s([g("esri.webscene.ApplicationProperties")],j);const ei=j;var se;let b=se=class extends v{constructor(t){super(t),this.environment=new B,this.spatialReference=null,this.viewpoint=null,this.timeExtent=null}set viewingMode(t){this._set("viewingMode",t)}clone(){var t,e,i;return new se({environment:this.environment.clone(),spatialReference:((t=this.spatialReference)==null?void 0:t.clone())??null,viewingMode:this.viewingMode,viewpoint:((e=this.viewpoint)==null?void 0:e.clone())??null,timeExtent:((i=this.timeExtent)==null?void 0:i.clone())??null})}};s([n({type:B,json:{write:{isRequired:!0}}})],b.prototype,"environment",void 0),s([n({type:_})],b.prototype,"spatialReference",void 0),s([n({type:["local","global"]})],b.prototype,"viewingMode",null),s([n({type:we,json:{write:{isRequired:!0}}})],b.prototype,"viewpoint",void 0),s([n(je)],b.prototype,"timeExtent",void 0),b=se=s([g("esri.webscene.InitialViewProperties")],b);const J=b;var ae;let U=ae=class extends v{constructor(){super(...arguments),this.text=""}clone(){return new ae({text:this.text})}};s([n({type:String,json:{write:{isRequired:!0}}})],U.prototype,"text",void 0),U=ae=s([g("esri.webscene.support.Description")],U);const F=U;var oe;let N=oe=class extends v{constructor(t){super(t),this.visible=!1}clone(){return new oe({visible:this.visible})}cloneConstructProperties(){return{visible:this.visible}}};s([n({type:Boolean,json:{default:!1,write:!0}})],N.prototype,"visible",void 0),N=oe=s([g("esri.webscene.SlideLegendInfo")],N);const ti=N;var ne;let k=ne=class extends v{constructor(){super(...arguments),this.legendInfo=null}clone(){return new ne({legendInfo:x(this.legendInfo)})}};s([n({type:ti,json:{write:!0}})],k.prototype,"legendInfo",void 0),k=ne=s([g("esri.webscene.support.SlideElements")],k);const ii=k;var pe;let $=pe=class extends v{constructor(){super(...arguments),this.lighting=new Fe,this.weather=new Ht}clone(){return new pe({lighting:x(this.lighting),weather:x(this.weather)})}};s([n({types:rt,json:{write:!0}})],$.prototype,"lighting",void 0),s([n({types:zt,json:{write:!0}})],$.prototype,"weather",void 0),$=pe=s([g("esri.webscene.Environment")],$);var G;let D=G=class extends v{constructor(){super(...arguments),this.opacity=null}clone(){return new G({opacity:this.opacity})}cloneAndApplyTo(t){return this.opacity==null||((t=(t==null?void 0:t.clone())??new dt).opacity=this.opacity),t}static fromGround(t){return new G({opacity:t.opacity})}};s([n({type:Number,json:{type:xe,read:{reader:Kt,source:"transparency"},write:{writer:(t,e)=>{e.transparency=Qt(t)},target:"transparency"}}})],D.prototype,"opacity",void 0),D=G=s([g("esri.webscene.support.SlideGround")],D);const Ne=D;var le;let C=le=class extends v{constructor(t){super(t),this.id="",this.sublayerIds=null}clone(){return new le({id:this.id,sublayerIds:x(this.sublayerIds)})}};s([n({type:String,json:{write:!0}})],C.prototype,"id",void 0),s([n({type:[xe],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],C.prototype,"sublayerIds",void 0),C=le=s([g("esri.webscene.support.SlideVisibleLayer")],C);var me;let q=me=class extends v{constructor(){super(...arguments),this.text=""}clone(){return new me({text:this.text})}};s([n({type:String,json:{write:{isRequired:!0}}})],q.prototype,"text",void 0),q=me=s([g("esri.webscene.support.Title")],q);const P=q;let ri=0;const he=M.ofType(C),si=["caption","cover","none"];let u=class extends kt.ClonableMixin(v){constructor(t){super(t),this.id=Date.now().toString(16)+"-slide-"+ri++,this.title=new P,this.description=new F,this.hidden=!1,this.thumbnail=new V,this.viewpoint=null,this.basemap=null,this.ground=null,this.layout="caption",this.environment=new $,this.timeExtent=null,this.elements=null,this.visibleLayers=new he}destroy(){this.visibleLayers.removeAll(),this.basemap=null,this.thumbnail=Me(this.thumbnail),this.description=null,this.title=null,this.thumbnail=null,this.elements=null}castTitle(t){return typeof t=="string"?new P({text:t}):Q(P,t)}castDescription(t){return typeof t=="string"?new F({text:t}):Q(F,t)}castThumbnail(t){return typeof t=="string"?new V({url:t}):Q(V,t)}castBasemap(t){return qt(t)}set visibleLayers(t){this._set("visibleLayers",Ue(t,this._get("visibleLayers"),he))}castVisibleLayers(t){return t&&typeof t.map=="function"?t.map(e=>{if(typeof e=="string")return{id:e};if(e instanceof Dt){const i=Te(e);return{id:e.id,sublayerIds:i}}return e.id?{id:e.id,sublayerIds:"sublayerIds"in e?e.sublayerIds:void 0}:(O.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"'),e)}):null}async _updateVisibleLayersFrom(t){const e=[];await Promise.allSettled(this._getLayers(t.map).map(i=>t.whenLayerView(i).then(r=>{if(r.visible){const a=Te(i);e.push(new C({id:r.layer.id,sublayerIds:a}))}})).toArray()),this.visibleLayers.removeAll(),this.visibleLayers.addMany(e)}updateFrom(t,e){const i={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...e==null?void 0:e.screenshot};return t.when(()=>{var r,a;return this.viewpoint=t.viewpoint.clone(),this.environment.lighting=t.environment.lighting.type==="virtual"?Jt.prototype.clone.apply(t.environment.lighting):Fe.prototype.clone.apply(t.environment.lighting),this.environment.weather=t.environment.weather.clone(),this.basemap=((r=t.map.basemap)==null?void 0:r.clone())||null,this.ground=t.map.ground?Ne.fromGround(t.map.ground):null,this.timeExtent=((a=t.timeExtent)==null?void 0:a.clone())??null,this._updateVisibleLayersFrom(t)}).then(()=>t.takeScreenshot(i)).then(r=>(this.thumbnail=new V({url:r.dataUrl}),this))}async applyTo(t,e){this._applyToController!=null&&this._applyToController.abort();let i=new AbortController;this._applyToController=i;const r=at(e,()=>i==null?void 0:i.abort()),a=()=>{this._applyToController===i&&(this._applyToController=null),i=null,r==null||r.remove()};try{await Ze(()=>t.ready,i.signal)}catch(d){throw a(),d}if(i.signal.aborted)throw a(),ot();const o=t.resourceController.scheduler.registerTask(Bt.SLIDE);let m=!1;const p={animate:!0,...e,signal:this._applyToController.signal},c=async()=>{await Promise.all([o.schedule(async()=>m=await this._setViewpointOfInterest(t,p)),o.schedule(()=>this._applyBasemap(t,p),p.signal),o.schedule(()=>this._loadLayersWithSublayerVisibility(t))]),await Promise.all([o.schedule(()=>this._applyLayerVisibility(t),p.signal),o.schedule(()=>this._applyGround(t),p.signal),o.schedule(()=>this._applyViewpoint(t,p),p.signal),o.schedule(()=>{var d;return t.timeExtent=((d=this.timeExtent)==null?void 0:d.clone())??null},p.signal),o.schedule(()=>t.environment.weather=this.environment.weather.clone())])},h=await et(t.addUpdatingPromise(c()));if(m&&(t.contentCamera=null),o.remove(),a(),h.ok===!1)throw h.error;return this}async _applyBasemap(t,e){if(this.basemap){try{await this.basemap.load(e)}catch(i){if(nt(i))throw i}t.map.basemap=Wt(this.basemap,t.map.basemap)}}_applyGround(t){this.ground&&(t.map.ground=this.ground.cloneAndApplyTo(t.map.ground))}_getLayers(t){const e=new M;return this._collectLayers(t,e),this._collectLayers(t.ground,e),e}_collectLayers(t,e){t.layers.forEach(i=>{i.persistenceEnabled&&(e.add(i),"layers"in i&&this._collectLayers(i,e))})}async _loadLayersWithSublayerVisibility(t){this.visibleLayers&&await Promise.allSettled(this._getLayers(t.map).items.map(e=>{var r;return((r=this.visibleLayers.find(a=>a.id===e.id))==null?void 0:r.sublayerIds)?e.load():null}))}_applyLayerVisibility(t){this.visibleLayers&&this._getLayers(t.map).forEach(e=>{const i=this.visibleLayers.find(o=>o.id===e.id);e.visible=i!=null;const r=i==null?void 0:i.sublayerIds,a=ke(e);r&&a&&a.forEach(o=>o.visible=r.includes(o.id))})}async _setViewpointOfInterest(t,e){if(t.state.fixedContentCamera||!this.viewpoint||e!=null&&e.ignoreViewpoint||!(e!=null&&e.useDestinationCamera))return!1;const{toCameraAsync:i}=await Pe(()=>import("./ShadowCastAccumulate.glsl-DMni1gLj.js").then(a=>a.m),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263]),import.meta.url),r=await i(t,this.viewpoint);return t.contentCamera=r,r!=null}async _applyViewpoint(t,e){if(this._applyCachedCameraTrackingEnabled(t),this.viewpoint&&!e.ignoreViewpoint){const i=this.environment.lighting;if(e.animate&&i.type==="sun"&&i.date)return this._animateToLighting(t,e);e.animate&&(t.environment.applyLighting(i.clone()),await t.goTo(this.viewpoint,e)),t.viewpoint=this.viewpoint}t.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(t,e){let i=null;return t.environment.lighting.type!=="virtual"&&this.environment.lighting.type!=="virtual"&&(t.viewingMode==="global"&&(i=this._animateLightingWithCamera(t,t.environment.lighting,this.environment.lighting)),t.environment.cachedCameraTrackingEnabled=t.environment.lighting.cameraTrackingEnabled,t.environment.lighting.cameraTrackingEnabled=!1),t.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled,this.environment.lighting.type==="virtual"||t.environment.lighting.type==="virtual"?(t.environment.applyLighting(this.environment.lighting.clone()),t.environment.lighting.type!=="virtual"&&(t.environment.cachedCameraTrackingEnabled=t.environment.lighting.cameraTrackingEnabled,t.environment.lighting.cameraTrackingEnabled=!1)):this.environment.lighting.displayUTCOffset!=null&&(t.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset),t.goTo(this.viewpoint,e).then(()=>{this._applyCachedCameraTrackingEnabled(t),t.environment.applyLighting(this.environment.lighting.clone())}).catch(r=>{throw t.animation==null&&this._applyCachedCameraTrackingEnabled(t),r}).finally(()=>{pt(i)})}_applyCachedCameraTrackingEnabled(t){t.environment.cachedCameraTrackingEnabled!=null&&(t.environment.lighting.cameraTrackingEnabled=t.environment.cachedCameraTrackingEnabled,t.environment.cachedCameraTrackingEnabled=null)}_getTime(t){return[t.getTime(),3600*t.getUTCHours()+60*t.getUTCMinutes()+t.getUTCSeconds()]}_setTime(t,e,i){return t.setTime(e),t.setUTCHours(i/3600),t.setUTCMinutes(i%3600/60),t.setUTCSeconds(i%3600%60),t}_animateLightingWithCamera(t,e,i){const r=new Date(e.date.toString()),[a,o]=this._getTime(r),[m,p]=this._getTime(i.date),c=ni(o,p),h=t.renderCoordsHelper,d=ee();h.toRenderCoords(t.camera.position,d);const L=ee(),T=ee();this.viewpoint.camera!=null&&h.toRenderCoords(this.viewpoint.camera.position,L);const We=new Date;return tt(()=>t.camera,Be=>{h.toRenderCoords(Be.position,T);const z=Ee(d,T),ge=Ee(L,T);let K=0;z+ge!==0&&(K=z/(z+ge));const Je=a+(m-a)*K,He=pi(o,c*K);e.date=this._setTime(We,Je,He)})}static createFrom(t,e){return new this().updateFrom(t,e)}};s([n({type:String,json:{write:{isRequired:!0}}})],u.prototype,"id",void 0),s([n({type:P,json:{default:()=>new P({text:""}),write:{isRequired:!0}}})],u.prototype,"title",void 0),s([A("title")],u.prototype,"castTitle",null),s([n({type:F,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.text)})}}})],u.prototype,"description",void 0),s([A("description")],u.prototype,"castDescription",null),s([n({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],u.prototype,"hidden",void 0),s([n({type:V,json:{default:()=>new V({url:""}),write:{isRequired:!0}}})],u.prototype,"thumbnail",void 0),s([A("thumbnail")],u.prototype,"castThumbnail",null),s([n({type:we,nonNullable:!0,json:{write:{isRequired:!0}}})],u.prototype,"viewpoint",void 0),s([n({type:Nt,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],u.prototype,"basemap",void 0),s([A("basemap")],u.prototype,"castBasemap",null),s([n({type:Ne,json:{write:!0}})],u.prototype,"ground",void 0),s([n({type:si,json:{write:!0,default:"caption"},nonNullable:!0})],u.prototype,"layout",void 0),s([n({type:he,json:{write:{isRequired:!0}}})],u.prototype,"visibleLayers",null),s([A("visibleLayers")],u.prototype,"castVisibleLayers",null),s([n({type:$,json:{write:!0}})],u.prototype,"environment",void 0),s([n(je)],u.prototype,"timeExtent",void 0),s([n({type:ii,json:{write:!0}})],u.prototype,"elements",void 0),u=s([g("esri.webscene.Slide")],u);const ai=u;function ke(t){if(t.type==="building-scene"||t.type==="map-image")return t.allSublayers.toArray()}function Te(t){const e=ke(t);if(e)return e.filter(i=>i.visible).map(i=>i.id)}const ce=86400,oi=43200;function ni(t,e){let i=e-t;return i>oi&&(i-=ce),i<-43200&&(i+=ce),i}function pi(t,e){return Gt(t+e,ce)}const de=M.ofType(ai);let W=class extends v{constructor(t){super(t),this.slides=new de}destroy(){this.slides.forEach(t=>t.destroy()),this.slides.removeAll()}set slides(t){t&&(t=t.filter(e=>!!e.viewpoint)),this._set("slides",Ue(t,this._get("slides"),de))}clone(){return new this.constructor({slides:this.slides.clone()})}};s([n({type:de,nonNullable:!0,json:{write:!0}}),A(Ft)],W.prototype,"slides",null),W=s([g("esri.webscene.Presentation")],W);const Ge=W;var ue;let E=ue=class extends v{constructor(t){super(t)}clone(){return new ue({name:this.name,path:this.path,title:this.title})}};s([n({type:String,json:{write:{isRequired:!0}}})],E.prototype,"name",void 0),s([n({type:String,json:{write:{isRequired:!0}}})],E.prototype,"path",void 0),s([n({type:String,json:{write:{isRequired:!0}}})],E.prototype,"title",void 0),E=ue=s([g("esri.webscene.TransportationNetwork")],E);const li=E;class H extends Xt{constructor(e,i){super(e,i,"webscene")}get supportsGround(){return this.greaterEqual(1,8)}get supportsVisibleElevationLayersInSlides(){return this.lessThan(1,8)}}var De;const S=new H(1,36),mi=()=>{const e=[],i=S.major;for(let r=8;r<=S.minor;r++)e.push(`${i}.${r}`);return e},te="Web Scene";let l=class extends yt.LoadableMixin(ft.EsriPromiseMixin(gt(ut))){constructor(t){super(t),this[De]=!0,this._layersIdGCTimeoutId=void 0,this._updateFromPromise=null,this.applicationProperties=null,this.clippingArea=null,this.clippingEnabled=!1,this.floorInfo=null,this.heightModelInfo=void 0,this.sourceVersion=null,this.transportationNetworks=null,this.presentation=new Ge,this.initialViewProperties=new J,this.portalItem=null,this.resourceInfo=null,this.widgets=null,this._debouncedSaveOperations=lt(async(e,i,r)=>{switch(e){case I.SAVE:return this._saveImpl(i);case I.SAVE_AS:return this._saveAsImpl(r,i)}}),this._resourceReferences={portalItem:null,paths:[]},this.authoringApp=null,this.authoringAppVersion=null,this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1}initialize(){if(this.when().catch(t=>{O.getLogger(this).error("#load()","Failed to load web scene",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t),this.addResolvingPromise(this._validateSpatialReference()),this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles(it(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC()))}destroy(){this._unscheduleLayersIdGC(),this.presentation&&this.presentation.destroy(),this.portalItem=Me(this.portalItem)}writeClippingArea(t,e){e.clippingArea||(e.clippingArea={}),e.clippingArea.geometry=t.toJSON()}readClippingEnabled(t,e){return!!e.clippingArea&&!!e.clippingArea.clip}writeClippingEnabled(t,e){this.clippingArea&&(e.clippingArea||(e.clippingArea={}),e.clippingArea.clip=t)}writeLayers(t,e,i,r){e[i]=this._layersToJSON(t,"operational-layers",r)}readSourceVersion(t,e){const[i,r]=e.version.split(".");return new H(parseInt(i,10),parseInt(r,10))}writeSourceVersion(t,e,i){e[i]=`${S.major}.${S.minor}`}writeTables(t,e,i,r){const a=this._layersToJSON(t,"tables",r);a.length&&(e[i]=a)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)??null}set thumbnailUrl(t){t?this._override("thumbnailUrl",t):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,e){t&&this._isAuthoringAppSetByUser?e.authoringApp=t:e.authoringApp="ArcGIS API for JavaScript"}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,e){t&&this._isAuthoringAppVersionSetByUser?e.authoringAppVersion=t:e.authoringAppVersion=ht}writeGround(t,e,i,r){e[i]=t?t.write({},r):{transparency:0,layers:[]}}readInitialViewProperties(t,e){var a,o,m;const i={};(a=e.initialState)!=null&&a.environment&&(i.environment=B.fromJSON(e.initialState.environment)),i.spatialReference=e.spatialReference?_.fromJSON(e.spatialReference):_.WebMercator,i.viewingMode=e.viewingMode??"global",(o=e.initialState)!=null&&o.viewpoint&&(i.viewpoint=we.fromJSON(e.initialState.viewpoint));const r=(m=e.initialState)==null?void 0:m.timeExtent;return r!=null&&(i.timeExtent=Pt.fromArray(r)),new J(i)}get spatialReference(){var t;return((t=this.initialViewProperties)==null?void 0:t.spatialReference)??_.WebMercator}get viewingMode(){var t;return((t=this.initialViewProperties)==null?void 0:t.viewingMode)??"global"}load(t){const e=this.ground;return this.addResolvingPromise(this._loadFromSource().then(()=>{e&&e!==this.ground&&e.destroy(),this._validateFeatureLayerSymbolVisibility()})),Promise.resolve(this)}loadAll(){return wt(this,t=>{const e=this.presentation&&this.presentation.slides;t(this.ground,this.basemap,this.layers,e&&e.map(i=>i.basemap),this.tables)})}read(t,e){var a;e={...e,origin:"web-scene"};const i=this._isAuthoringAppVersionSetByUser,r=this._isAuthoringAppSetByUser;if(bt(this,t,o=>super.read(t,o),e),r||(this._isAuthoringAppSetByUser=!1),i||(this._isAuthoringAppVersionSetByUser=!1),t.baseMap&&Array.isArray(t.baseMap.elevationLayers)&&((a=this.sourceVersion)==null?void 0:a.supportsVisibleElevationLayersInSlides)){const o=t.baseMap.elevationLayers.map(h=>({id:h.id})),m=this.presentation.slides,p=(h,d)=>h.visibleLayers.some(L=>L.id===d),c=o.filter(h=>!m.some(d=>p(d,h.id)));m.forEach(h=>{h.visibleLayers.addMany(c)})}}_writeBasemapElevationLayers(t){var i;const e=(i=t.ground)==null?void 0:i.layers;!t.baseMap&&(e!=null&&e.length)&&(t.baseMap={title:"Basemap",baseMapLayers:[]}),t.baseMap&&(t.baseMap.elevationLayers=x(e))}_layersToJSON(t,e,i){const r={...i,layerContainerType:e};return t.map(a=>this._verifyWritableLayer(a,i)?a.write({},r):null).filter(a=>!!a).toArray()}_verifyWritableLayer(t,e){return!!t.persistenceEnabled&&("write"in t||(e!=null&&e.messages&&e.messages.push(new w("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted in web scenes`,{layer:t})),!1))}write(t,e){var a;if(this.loadStatus!=="loaded"){const o=new w("webscene:not-loaded","Web scene must be loaded before it can be serialized");throw O.getLogger(this).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),o}this._runLayersIdGC();const i=!(e!=null&&e.messages);e={messages:[],...e,origin:"web-scene"};const r=super.write(t,e);if(i){const o=((a=e.messages)==null?void 0:a.filter(m=>m.name==="web-document-write:property-required"))??[];if(o.length){const m=new w("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:o});throw O.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",o),m}}return this._writeBasemapElevationLayers(r),r}async save(t){return this._debouncedSaveOperations(I.SAVE,t)}async _saveImpl(t){var a;if(!this.portalItem)throw new w("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");if(((a=this.portalItem)==null?void 0:a.type)!==te)throw new w("webscene:portal-item-wrong-type",`Portal item needs to have type "${te}"`);const e=this._updateFromPromise;await this._ensureLoadBeforeSave();const i=this._enableVerifyItemRelativeUrls(be(this.portalItem,"web-scene",!0)),r=this.write({},i);return await Promise.all(i.resources.pendingOperations),await this._verifySave(r,i,I.SAVE,t),this._updateTypeKeywords(this.portalItem),await xt(this.portalItem,r,this._resourceReferences,i),fe(i),e&&await e,await this._saveThumbnail(),this.portalItem}async saveAs(t,e){return this._debouncedSaveOperations(I.SAVE_AS,e,t)}async _saveAsImpl(t,e){let i=Oe.from(t);if(!i)throw new w("webscene:portal-item-required","saveAs requires a portal item to save to");i.id&&(i=i.clone(),i.id=null);const r=i.portal||Y.getDefault();await this._ensureLoadBeforeSave(),i.type=te,i.portal=r;const a=this._enableVerifyItemRelativeUrls(be(i,"web-scene",!0)),o=this.write({},a);await Promise.all(a.resources.pendingOperations),await this._verifySaveAs(o,a,e);const m=this.thumbnailUrl,p=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(i),await r.signIn();const c=this.portalItem,h={item:c,authenticated:!(!(c!=null&&c.id)||!c.portal.user)},{copyAllowed:d,itemReloaded:L}=await jt(h,r);if(h.authenticated||(h.authenticated=L),!d)throw new w(`${a.name}:save-as-copy-not-allowed`,"Owner of this map does not allow others to save a copy");const T={...e,copyAllResources:!0};return await Ut(i,h,o,T)&&(this._resourceReferences.portalItem=i),await Mt(this._resourceReferences,a),this.portalItem=i,vt.prototype.read.call(this,{version:o.version,authoringApp:o.authoringApp,authoringAppVersion:o.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:i.itemUrl?X(i.itemUrl):void 0}),fe(a),m&&(this.thumbnailUrl=p?ct(m,"w","8192"):m),a.portalItem=i,await this._saveThumbnail(),i}async _saveThumbnail(){var t;this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl})),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}async _verifySave(t,e,i,r){if(!It(this.spatialReference))throw new w("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently.");const{ignoreUnsupported:a,requiredPropertyChecksDisabled:o,strictSchemaValidationEnabled:m}=r||{};Ot(e,{errorName:"webscene:save"},{ignoreUnsupported:a,supplementalUnsupportedErrors:["scenemodification:unsupported"],requiredPropertyChecksDisabled:o})}_verifySaveAs(t,e,i){return this._verifySave(t,e,I.SAVE_AS,i)}verifySaveAs(t){const e=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),i=this.write({},e);return this._verifySaveAs(i,e,t)}canNotSaveAs(){return!1}async updateFrom(t,e={}){const i=this._updateFrom(t,e);this._updateFromPromise=i,await i,this._updateFromPromise===i&&(this._updateFromPromise=null)}async _updateFrom(t,e={}){var i;if(await t.whenReady(),!e.environmentExcluded&&t.environment&&(this.initialViewProperties.environment=B.prototype.clone.apply(t.environment)),!e.viewpointExcluded&&t.viewpoint&&(this.initialViewProperties.viewpoint=t.viewpoint.clone()),this.initialViewProperties.spatialReference=t.spatialReference.clone(),this.initialViewProperties.viewingMode=t.viewingMode,this.initialViewProperties.timeExtent=((i=t.timeExtent)==null?void 0:i.clone())??null,t.clippingArea!=null?t.clippingArea!==this.clippingArea&&(this.clippingArea=t.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1,t.heightModelInfo&&(this.heightModelInfo=t.heightModelInfo.clone()),t.map===this)for(const r of t.allLayerViews){const a="visible";a in r&&a in r.layer&&r._isOverridden(a)&&(r.layer[a]=r[a])}if(!e.widgetsExcluded)for(const r of t.persistableViewModels)r.updateWebDocument(this);(e.thumbnailExcluded===!1||e.thumbnailExcluded==null&&!e.viewpointExcluded)&&await this._updateFromThumbnail(t,e.thumbnailSize??void 0)}async _updateFromThumbnail(t,e){const i=$t(t,e),r=await t.takeScreenshot({format:"jpg",width:i.width,height:i.height,disableDecorations:!0});this.thumbnailUrl=r.dataUrl}_loadFromSource(){var t;return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):(t=this.portalItem)!=null&&t.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}_readAndLoadFromJSON(t,e){const i=this._validateJSON(t);return this.read(i,e),this._loadFromJSON(i,e)}_extractOperationalLayers(t){var a;const e=[];if(!((a=this.sourceVersion)!=null&&a.supportsGround)&&t.baseMap&&Array.isArray(t.baseMap.elevationLayers))for(const o of t.baseMap.elevationLayers)e.push(o);const i=[],r=o=>{var m;return o.layers&&(o.layers=o.layers.filter(r)),o.layerType!=="ArcGISTiledElevationServiceLayer"||((m=this.sourceVersion)!=null&&m.supportsGround||i.push(o),!1)};return{operationalLayers:t.operationalLayers?t.operationalLayers.filter(r):[],operationalElevationLayers:i,basemapElevationLayers:e}}async _loadFromJSON(t,e){var h;const i=new M;await this._validateSpatialReference(),await this._validateHeightModelInfo();const{populateOperationalLayers:r}=await Pe(()=>import("./layersCreator-BJyy3KAG.js"),__vite__mapDeps([264,17,3,18,19,265,266,9,1,2,8,267,38,22,10,14,11,75,268,269,270,68,271,41,27,15,7,42,43,272]),import.meta.url),{operationalLayers:a,operationalElevationLayers:o,basemapElevationLayers:m}=this._extractOperationalLayers(t),p=[],c={context:{...e,layerContainerType:"operational-layers"}};if(this.portalItem&&(c.context.portal=this.portalItem.portal||Y.getDefault()),m.length>0){const d={...c,context:{...c.context,layerContainerType:"ground"}};d.defaultLayerType="ArcGISTiledElevationServiceLayer",p.push(r(this.ground.layers,m,d))}if(o.length>0){const d={...c,context:{...c.context,layerContainerType:"ground"}};d.defaultLayerType="ArcGISTiledElevationServiceLayer",p.push(r(i,o,d))}a&&a.length>0&&p.push(r(this.layers,a,c)),(h=t.tables)!=null&&h.length&&p.push(r(this.tables,t.tables,{...c,context:{...c.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"})),await Promise.allSettled(p),await this._loadObjectsWithLayers(),this.ground.layers.addMany(i.filter(d=>d.type==="base-elevation"||d.type==="elevation"))}async _ensureLoadBeforeSave(){await this.load(),await this._loadObjectsWithLayers();const t=[],e=[...this.allLayers.items];for(const{basemap:i}of this.presentation.slides.items)i&&(e.push(...i.baseLayers.items),e.push(...i.referenceLayers.items));for(const i of e)if("beforeSave"in i&&typeof i.beforeSave=="function"){const r=i.beforeSave();r&&t.push(r)}await Promise.allSettled(t)}async _loadObjectsWithLayers(){const t=[];this.ground&&t.push(this.ground.load()),this.basemap&&t.push(this.basemap.load()),this.presentation.slides.forEach(e=>{e.basemap&&t.push(e.basemap.load())}),await Promise.allSettled(t)}async _loadFromItem(t){if(await t.load().catch(r=>{throw new w("webscene:load-portal-item","Failed to load portal item",{error:r})}),t.type!=="Web Scene")throw new w("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:t.type});const e=await t.fetchData();this.resourceInfo=e;const i={origin:"web-scene",url:X(t.itemUrl),portal:t.portal||Y.getDefault(),portalItem:t,readResourcePaths:[]};await this._readAndLoadFromJSON(e,i),this._resourceReferences={portalItem:t,paths:i.readResourcePaths??[]}}_validateSpatialReference(){const t=this.initialViewProperties,e=this._sceneSpatialReference;let i;if(t.viewingMode!=="local"){if(!Ae(e,Ie.Global))return Promise.reject(new w("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:e,viewingMode:t.viewingMode}));i=p=>!p||Lt(p,e)}else{if(!Ae(e,Ie.Local))return Promise.reject(new w("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:e,viewingMode:t.viewingMode}));i=p=>!p||p.equals(e)}const r=p=>{var c,h;return((c=p==null?void 0:p.camera)==null?void 0:c.position.spatialReference)??((h=p==null?void 0:p.targetGeometry)==null?void 0:h.spatialReference)},a=t.viewpoint,o=r(a);if(o&&!i(o))return Promise.reject(new w("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:o,sceneSpatialReference:e,viewingMode:t.viewingMode}));const m=this.presentation.slides.find(p=>!i(r(p.viewpoint)));if(m){const p=r(m.viewpoint);return Promise.reject(new w("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:p,sceneSpatialReference:e,viewingMode:t.viewingMode}))}return Promise.resolve()}_validateHeightModelInfo(){const t=this._sceneSpatialReference,e=At(this.heightModelInfo,t);return e?Promise.reject(e):Promise.resolve()}_validateFeatureLayerSymbolVisibility(){var t;(t=this.sourceVersion)!=null&&t.greaterEqual(1,35)||this.layers.forEach(e=>{e.type==="feature"&&e.addHandles(ie(()=>e.loaded,()=>{var i,r,a;((i=e.elevationInfo)==null?void 0:i.mode)==="on-the-ground"&&((r=e.renderer)==null?void 0:r.type)==="simple"&&((a=e.renderer.symbol)==null?void 0:a.type)==="polygon-3d"&&e.renderer.symbol.symbolLayers.some(o=>o.type==="fill"&&o.material!=null&&(!o.material.color||o.material.color.a*e.opacity<Yt)&&(e.loadWarnings.push(new mt("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:e})),!0))},{once:!0,sync:!0}))})}_validateJSON(t){const e=H.parse(t.version||"","webscene");return S.validate(e),t.version=`${e.major}.${e.minor}`,e.major===1&&e.minor<=2&&(t.spatialReference=_.WebMercator.toJSON()),t}_updateTypeKeywords(t){_e(t,Se.LOCAL_SCENE,this.initialViewProperties.viewingMode==="local"),_e(t,Se.DEVELOPER_BASEMAP,Le(this.basemap)||this.presentation.slides.some(({basemap:e})=>!!e&&Le(e))),t.typeKeywords&&(t.typeKeywords=t.typeKeywords.filter((e,i,r)=>r.indexOf(e)===i))}get _sceneSpatialReference(){return this.initialViewProperties.spatialReference||_.WebMercator}get _verifyItemRelativeRootPath(){var t;return(t=this.portalItem)!=null&&t.itemUrl?X(this.portalItem.itemUrl).path:null}_enableVerifyItemRelativeUrls(t){const e=this._verifyItemRelativeRootPath;return e&&(t.verifyItemRelativeUrls={rootPath:e,writtenUrls:[]}),t}_unscheduleLayersIdGC(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}_scheduleLayersIdGC(){this._unscheduleLayersIdGC(),this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0,this._runLayersIdGC()},3e3)}_runLayersIdGC(){var r,a;this._unscheduleLayersIdGC();const t=(a=(r=this.applicationProperties)==null?void 0:r.viewing)==null?void 0:a.search,e=o=>this.allLayers.some(m=>m.id===o&&m.persistenceEnabled);t!=null&&t.layers&&(t.layers=t.layers.filter(o=>e(o.id)));const i=this.presentation&&this.presentation.slides;i&&i.forEach(o=>{o.visibleLayers&&(o.visibleLayers=o.visibleLayers.filter(m=>e(m.id)))})}static fromJSON(t){if(!t)throw new w("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};De=Tt,l.version=`${S.major}.${S.minor}`,s([n({type:ei,json:{write:!0}})],l.prototype,"applicationProperties",void 0),s([n({type:_t,json:{read:{source:"clippingArea.geometry",reader:Et},write:{target:"clippingArea.geometry"}}})],l.prototype,"clippingArea",void 0),s([f("clippingArea")],l.prototype,"writeClippingArea",null),s([n({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],l.prototype,"clippingEnabled",void 0),s([Z("clippingEnabled",["clippingArea"])],l.prototype,"readClippingEnabled",null),s([f("clippingEnabled")],l.prototype,"writeClippingEnabled",null),s([n({type:Ct,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],l.prototype,"floorInfo",void 0),s([n({type:St,json:{write:!0}})],l.prototype,"heightModelInfo",void 0),s([n({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],l.prototype,"layers",void 0),s([f("layers")],l.prototype,"writeLayers",null),s([n({readOnly:!0,type:H,json:{type:mi(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],l.prototype,"sourceVersion",void 0),s([Z("sourceVersion",["version"])],l.prototype,"readSourceVersion",null),s([f("sourceVersion")],l.prototype,"writeSourceVersion",null),s([n({json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],l.prototype,"tables",void 0),s([f("tables")],l.prototype,"writeTables",null),s([n()],l.prototype,"thumbnailUrl",null),s([n({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],l.prototype,"authoringApp",null),s([f("authoringApp")],l.prototype,"writeAuthoringApp",null),s([n({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],l.prototype,"authoringAppVersion",null),s([f("authoringAppVersion")],l.prototype,"writeAuthoringAppVersion",null),s([n({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],l.prototype,"ground",void 0),s([f("ground")],l.prototype,"writeGround",null),s([n({type:M.ofType(li),json:{write:!0}})],l.prototype,"transportationNetworks",void 0),s([n({type:Ge,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(t,e,i,r)=>{if(t.slides&&t.slides.length>0){const a={...r,isPresentation:!0};e.presentation=t.write({},a)}}}}})],l.prototype,"presentation",void 0),s([n({type:J,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new J({viewingMode:"global",spatialReference:_.WebMercator})}})],l.prototype,"initialViewProperties",void 0),s([Z("initialViewProperties",["initialState.timeExtent","initialState.environment","initialState.viewpoint","spatialReference","viewingMode"])],l.prototype,"readInitialViewProperties",null),s([n({type:_,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],l.prototype,"spatialReference",null),s([n({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],l.prototype,"viewingMode",null),s([n({type:Oe})],l.prototype,"portalItem",void 0),s([n()],l.prototype,"resourceInfo",void 0),s([n({type:Rt,json:{write:!0}})],l.prototype,"widgets",void 0),l=s([g("esri.WebScene")],l);const qe=l;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const hi=Qe`@layer{arcgis-scene{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,ci=Re(qe),di=Re(st),R=class R extends ze{constructor(){super(...arguments),this._camera=void 0,this._center=void 0,this._extent=void 0,this._itemId=void 0,this._scale=void 0,this._viewpoint=void 0,this._zoom=void 0,this._cameraFov=void 0,this._cameraHeading=void 0,this._cameraPosition=void 0,this._cameraTilt=void 0,this._map=ci(this,{editConstructorProperties:this._editMapProperties}),this.view=di(this,{editConstructorProperties:this._editViewProperties}),this.allLayerViews=this.view.allLayerViews,this.alphaCompositingEnabled=this.view.alphaCompositingEnabled,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.clippingArea=this.view.clippingArea,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.environment=this.view.environment,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.groundView=this.view.groundView,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.qualityProfile=this.view.qualityProfile,this.ready=this.view.ready,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.updating=this.view.updating,this.viewingMode=this.view.viewingMode,this.arcgisViewChange=ve(),this.arcgisViewClick=y(()=>this.view,"click"),this.arcgisViewDoubleClick=y(()=>this.view,"double-click"),this.arcgisViewDrag=y(()=>this.view,"drag"),this.arcgisViewHold=y(()=>this.view,"hold"),this.arcgisViewImmediateClick=y(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=y(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=y(()=>this.view,"key-down"),this.arcgisViewKeyUp=y(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=y(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=y(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=y(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=y(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=y(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=y(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=y(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=y(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=y(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=ve()}get camera(){return this.view.camera??this._camera}set camera(e){this._camera=e,this.ready&&!Ve(this.camera,e)&&(this.view.camera=e)}get cameraFov(){var e;return((e=this.view.camera)==null?void 0:e.fov)??this._cameraFov}set cameraFov(e){this.ready&&e!=null&&this._mutateCamera(i=>{i.fov=e}),this._cameraFov=e}get cameraHeading(){var e;return((e=this.view.camera)==null?void 0:e.heading)??this._cameraHeading}set cameraHeading(e){this.ready&&e!=null&&this._mutateCamera(i=>{i.heading=e}),this._cameraHeading=e}get cameraPosition(){var e;return((e=this.view.camera)==null?void 0:e.position)??this._cameraPosition}set cameraPosition(e){var i;if(this.ready){const r=$e((i=this.view.camera)==null?void 0:i.position,e);r&&this._mutateCamera(a=>{a.position=r})}else this._cameraPosition=e}get cameraTilt(){var e;return((e=this.view.camera)==null?void 0:e.tilt)??this._cameraTilt}set cameraTilt(e){this.ready&&e!=null&&this._mutateCamera(i=>{i.tilt=e}),this._cameraTilt=e}get center(){return this.view.center??this._center}set center(e){const i=Ce(e,this.ready?this.view:void 0);i&&(this.ready&&(this.view.center=i),this._center=i)}get extent(){return this.view.extent??this._extent}set extent(e){var i;this.ready&&e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e),this._extent=e}get gamepad(){return this.ready?this.view.input.gamepad:void 0}get interacting(){return this.view.interacting}get itemId(){var e;return((e=this._map.portalItem)==null?void 0:e.id)??this._itemId}set itemId(e){this._itemId=e,this.ready?Ye.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error):this.view.ready!=null&&(this._map.destroy(),this._map=new qe(this._editMapProperties({portalItem:{id:this._itemId}})),this.view.map=this._map)}get navigating(){return this.view.navigating}get performanceInfo(){return this.view.performanceInfo}get resolution(){return this.view.resolution}get scale(){return this.view.scale??this._scale}set scale(e){this.ready&&(this.view.scale=e),this._scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint??this._viewpoint}set viewpoint(e){this.ready&&Zt(this.viewpoint,e)&&(this.view.viewpoint=e),this._viewpoint=e}get zoom(){return this.view.zoom??this._zoom}set zoom(e){this.ready&&(this.view.zoom=e),this._zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){var e;(e=this.view)==null||e.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){var r;return await((r=this.view)==null?void 0:r.goTo(e,i))}async hitTest(e,i){var r;return await((r=this.view)==null?void 0:r.hitTest(e,i))}async openPopup(e){var i;await((i=this.view)==null?void 0:i.openPopup(e))}async takeScreenshot(e){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(e))}toMap(e,i){return this.view.toMap(e,i)}toScreen(e){return this.view.toScreen(e)}async tryFatalErrorRecovery(){var e;(e=this.view)==null||e.tryFatalErrorRecovery()}async whenAnalysisView(e){var i;return await((i=this.view)==null?void 0:i.whenAnalysisView(e))}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}load(){var e;this.el.childElem=document.createElement("div"),this.el.append(this.el.childElem),(e=this.view).container??(e.container=this.el.childElem)}loaded(){this.manager.onLifecycle(()=>[ie(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),ie(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}_editMapProperties(e){this.map&&(this._map=this.map),this.itemId&&(e.portalItem={id:this.itemId});const{basemap:i,...r}=e;return i||(e=r),e}async _editViewProperties(e){await this.manager.use(this._map),this.view.ui||(e.ui={components:["attribution"]}),e.map??(e.map=this._map);const i=Ce(this.center,void 0);i&&(e.center=i),this.viewpoint&&(e.viewpoint=this.viewpoint),this.scale!==void 0&&(e.scale=this.scale),this.extent&&(e.extent=this.extent),this.camera&&(e.camera=this.camera);const r=$e(void 0,this.cameraPosition);return r&&(e.camera??(e.camera={}),e.camera.position=r),this.cameraHeading!=null&&(e.camera??(e.camera={}),e.camera.heading=this.cameraHeading),this.cameraTilt!=null&&(e.camera??(e.camera={}),e.camera.tilt=this.cameraTilt),this.cameraFov!=null&&(e.camera??(e.camera={}),e.camera.fov=this.cameraFov),this.zoom!==void 0&&(e.zoom=this.zoom),e}_mutateCamera(e){const i=this.view.camera.clone();e(i),Ve(this.view.camera,i)||(this.view.camera=i)}};R.properties={_map:16,view:32,allLayerViews:0,alphaCompositingEnabled:5,analyses:0,autoDestroyDisabled:5,basemap:1,basemapView:0,camera:0,cameraFov:9,cameraHeading:9,cameraPosition:1,cameraTilt:9,center:1,clippingArea:0,constraints:0,displayFilterDisabled:5,environment:0,extent:0,fatalError:0,floors:0,gamepad:32,graphics:0,ground:1,groundView:0,highlights:0,highlightOptions:0,interacting:32,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,performanceInfo:32,popup:0,popupDisabled:5,qualityProfile:1,ready:4,resolution:32,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,updating:7,viewingMode:1,viewpoint:0,zoom:9},R.shadowRootOptions=Ke,R.styles=hi;let ye=R;Xe("arcgis-scene",ye);export{ye as ArcgisScene};
