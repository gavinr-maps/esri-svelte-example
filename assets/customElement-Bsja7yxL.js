const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BPm91e5Z.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DwIhxbHs.js","./dom-DEluURzl.js","./observers-Co4E8E8j.js","./keyed-CU1C-h1n.js","./directive-helpers-DaBykg1t.js","./ref-D9wHsL_T.js","./interactive-DTzfFku4.js","./loadable-XBvaWFYY.js","./component-CBVlbUuE.js","./index-DK5B8inx.js","./index-DMeQur4V.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./openCloseComponent-nqWrSaIH.js","./static-DLD4WjLv.js","./FloatingArrow-BZRr6Zld.js","./useFocusTrap-COeL24Kx.js","./focusTrapComponent-D1wJZ4RD.js","./key-CZcQa38B.js","./array-BbE1dLa5.js"])))=>i.map(i=>d[i]);
import{_ as nt,L as wt,u as xt,c as _t,n as bt,i as Et,a as Tt}from"./index-4eY77cms.js";import{r as kt}from"./index-C5b9dHRB.js";import{ag as St,E as $t,B as Mt,r as i,m as a,L as at,a as ut,ad as Ct,aO as Dt}from"./Accessor-BmwT4B0c.js";import{V as mt,d as D,P as Z,A as jt,w as Ft}from"./reactiveUtils-XM7cS2OP.js";import{o as dt,c as At}from"./timeUtils-C1c_L2Fd.js";import{t as Rt,e as Vt,E as B,j as Ot}from"./Promise-DfET-uns.js";import{l as W}from"./TimeInterval-B7L-CEq7.js";import{A as Lt}from"./Slider-BHSjZzBC.js";import{O as Bt,c as It,n as r,h as Zt,e as lt}from"./jsxFactory-Cnml7uXM.js";import{e as w}from"./globalCss-vQlnDsEX.js";import{i as C}from"./legacyIcon-Wt_jLiuK.js";import{t as I}from"./accessibleHandler-BaA3O97p.js";import{e as Wt}from"./vmEvent-D4Ubqkbq.js";import{c as Pt}from"./themeUtils-C3zvZbsE.js";import{i as Nt}from"./Evented-Dw4_VOGn.js";import{p as y}from"./TimeExtent-BO6BsF_x.js";import{y as Ut,a as zt}from"./Widgets-BkRSKro2.js";import{P as qt}from"./useWidget-BajufX8l.js";import"./SimpleObservable-CvOkykwM.js";import"./cast-CsZslgGN.js";import"./JSONSupport-DcrLLGjL.js";import"./Clonable-Z-AWS-16.js";import"./enumeration-DpvDkLNI.js";import"./intl-Duiy0OzY.js";import"./substitute-CvdjmBYq.js";import"./uuid-Cl5lrJ4c.js";import"./writer-DKgfqj4X.js";import"./component-utils-D0ciaaZ_.js";const d="esri-time-slider",n={timeSlider:`${d}`,timeSliderOutOfBounds:`${d}--out-of-bounds`,timeSliderMode:`${d}__mode--`,timeSliderLayout:`${d}__layout--`,timeSliderRow:`${d}__row`,animation:`${d}__animation`,animationButton:`${d}__animation-button`,timeExtent:`${d}__time-extent`,timeExtentGroup:`${d}__time-extent-group`,timeExtentDate:`${d}__time-extent-date`,timeExtentTime:`${d}__time-extent-time`,timeExtentSeparator:`${d}__time-extent-separator`,playbackControls:`${d}__playback-controls`,min:`${d}__min`,minDate:`${d}__min-date`,minTime:`${d}__min-time`,slider:`${d}__slider`,sliderMajorTick:"majorTick",sliderMinorTick:"minorTick",max:`${d}__max`,maxDate:`${d}__max-date`,maxTime:`${d}__max-time`,previous:`${d}__previous`,previousButton:`${d}__previous-button`,next:`${d}__next`,nextButton:`${d}__next-button`,warning:`${d}__warning`,warningText:`${d}__warning-text`,hasActions:`${d}--has-actions`,actions:`${d}__actions`,actionsButton:`${d}__actions-button`},ot=1e4;function P(t){return t!=null&&t.count!==void 0}function A(t){return t!=null&&t.interval!==void 0}function rt(t){return t!=null&&t.dates!==void 0}let p=class extends Nt.EventedAccessor{constructor(t){super(t),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new mt,this.fullTimeExtent=null,this.loop=!1,this.mode="time-window",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([D(()=>this.effectiveStops,()=>{this.timeExtent==null&&(this.timeExtent=this._getDefaultTimeExtent())},Z),D(()=>this.view,(t,e)=>{this._unregisterWidget(e),this._registerWidget(t)},jt),D(()=>this.timeExtent,t=>{if(this.view==null)return;const e=this.view.timeExtent;(t!=null&&!t.isAllTime||e!=null&&!e.isAllTime)&&(t!=null&&e!=null&&t.equals(e)||(this.view.timeExtent=t))},Z),D(()=>{var t;return(t=this.view)==null?void 0:t.timeExtent},t=>{this._isViewTimeExtentInitialized?(t!=null&&!t.isAllTime||this.timeExtent!=null&&!this.timeExtent.isAllTime)&&(t!=null&&this.timeExtent!=null&&t.equals(this.timeExtent)||(this.timeExtent=t)):this._isViewTimeExtentInitialized=!0})])}destroy(){this._timerId!=null&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(rt(e)){const{dates:l}=e;if(l==null||l.length===0)return null;const m=l.sort((v,c)=>v.getTime()-c.getTime());if(t==null)return m;const{start:s,end:h}=t;return s==null||h==null?m:m.filter(v=>!(v.getTime()<s.getTime()||v.getTime()>h.getTime()))}if(P(e)){const l=e.timeExtent??t;return this._divideTimeExtentByCount(l,e.count)}if(A(e)){const l=e.timeExtent??t;return this._divideTimeExtentByInterval(l,e.interval)}return[]}set playRate(t){t<=0||t>36e5||(this.state==="playing"&&this._startAnimation(),this._set("playRate",t))}get state(){return this.fullTimeExtent==null?"disabled":this._animationController!=null?"playing":"ready"}get timeExtentValues(){const{mode:t,timeExtent:e}=this;if(e==null||e.isAllTime||e.isEmpty)return null;const{start:l,end:m}=e;switch(t){case"cumulative-from-end":case"instant":return l!=null?[l.getTime()]:null;case"cumulative-from-start":return m!=null?[m.getTime()]:null;case"time-window":return l!=null&&m!=null?[l.getTime(),m.getTime()]:null}}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(t){this.emit("trigger-action",{action:t})}updateWebDocument(t){const e=new Ut({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:P(this.stops)?this.stops.count:null,numThumbs:this.mode==="time-window"?2:1,stopDelay:this.playRate,stopInterval:A(this.stops)?this.stops.interval:null,stops:rt(this.stops)?this.stops.dates:null});t.widgets?t.widgets.timeSlider=e:t.widgets=new zt({timeSlider:e})}valuesToTimeExtent(t){if(t==null)return null;const e=t.sort((s,h)=>s-h).map(s=>new Date(s)),l=e.length>0?e[0]:null,m=e.length>1?e[1]:null;switch(this.mode){case"time-window":return new y({start:l,end:m});case"instant":return new y({start:l,end:l});case"cumulative-from-start":return new y({start:null,end:l});case"cumulative-from-end":return new y({start:l,end:null});default:return y.allTime}}async _animate(){var t;try{const e=this.view,l=(t=this._animationController)==null?void 0:t.signal;await Promise.all([St(this.playRate,null,l),e!=null&&Ft(()=>e.updating===!1,l)])}catch(e){return $t(e)||Mt.getLogger(this).error(e),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),this._animationController!=null&&this._animate()}_divideTimeExtentByCount(t,e=10){if(!t||!e)return[];const{start:l,end:m}=t;if(l==null||m==null)return[];if(e>ot)return this._divideTimeExtentByCount(t);const s=[],h=l.getTime(),v=m.getTime()-h;for(let c=0;c<=e;c++)s.push(new Date(h+c/e*v));return s}_divideTimeExtentByInterval(t,e,l=ot){if(!t||!e)return[];const{start:m,end:s}=t;if(m==null||s==null)return[];const h=s.getTime()-m.getTime(),v=e.toMilliseconds();if(v<=0||h/v>l)return this._divideTimeExtentByCount(t);const c=[],{value:T,unit:b}=e;let o=m;for(;o.getTime()<=s.getTime();)c.push(new Date(o.getTime())),o=dt(o,T,b);return c}_getDefaultTimeExtent(){const{effectiveStops:t,mode:e}=this;if(t==null||!e)return null;switch(e){case"time-window":return t.length>1?new y({start:t[0],end:t[1]}):null;case"cumulative-from-start":return t.length>0?new y({start:null,end:t[0]}):null;case"cumulative-from-end":return t.length>0?new y({start:t[0],end:null}):null;case"instant":return t.length>0?new y({start:t[0],end:t[0]}):null;default:return null}}_registerWidget(t){t!=null&&(t.persistableViewModels.includes(this)||t.persistableViewModels.add(this))}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(t){const{forward:e,allowRestart:l}=t,{effectiveStops:m}=this;if(this.timeExtentValues==null||m==null)return;const s=m.map(o=>o.getTime()),h=this.timeExtentValues.map(o=>{const g=s.indexOf(o);if(g!==-1)return g;const k=s.reduce((f,S)=>Math.abs(S-o)<Math.abs(f-o)?S:f);return s.indexOf(k)}),v=h.map(o=>o+(e?1:-1)),c=v.some(o=>o<0||o>s.length-1),{loop:T,state:b}=this;if(c)if(T||l){const o=Math.min(...h),g=Math.max(...h),k=(e?h.map(f=>f-o):h.map(f=>f+(s.length-1-g))).map(f=>s[f]);this.timeExtent=this.valuesToTimeExtent(k)}else b==="playing"&&this.stop();else{const o=v.map(g=>s[g]);this.timeExtent=this.valuesToTimeExtent(o)}}_stopAnimation(){this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(t){t!=null&&t.persistableViewModels.remove(this)}};i([a()],p.prototype,"_animationController",void 0),i([a({type:mt})],p.prototype,"actions",void 0),i([a({readOnly:!0})],p.prototype,"effectiveStops",null),i([a({type:y})],p.prototype,"fullTimeExtent",void 0),i([a({nonNullable:!0})],p.prototype,"loop",void 0),i([a({nonNullable:!0})],p.prototype,"mode",void 0),i([a({nonNullable:!0,value:1e3})],p.prototype,"playRate",null),i([a({readOnly:!0})],p.prototype,"state",null),i([a({cast:t=>t==null?null:(A(t)&&(t.interval=at(W,t.interval)),(A(t)||P(t))&&(t.timeExtent=at(y,t.timeExtent)),t)})],p.prototype,"stops",void 0),i([a({type:y})],p.prototype,"timeExtent",void 0),i([a({readOnly:!0})],p.prototype,"timeExtentValues",null),i([a()],p.prototype,"view",void 0),i([a()],p.prototype,"next",null),i([a()],p.prototype,"play",null),i([a()],p.prototype,"previous",null),i([a()],p.prototype,"stop",null),i([a()],p.prototype,"updateWebDocument",null),p=i([ut("esri.widgets.TimeSlider.TimeSliderViewModel")],p);const ct=p,Gt=3,Ht=858,Jt=[{minor:{value:100,unit:"milliseconds"},major:{value:1,unit:"seconds"},format:{second:"numeric"}},{minor:{value:500,unit:"milliseconds"},major:{value:5,unit:"seconds"},format:{second:"numeric"}},{minor:{value:1,unit:"seconds"},major:{value:20,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:2,unit:"seconds"},major:{value:30,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:10,unit:"seconds"},major:{value:1,unit:"minutes"},format:{minute:"numeric"}},{minor:{value:15,unit:"seconds"},major:{value:5,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"minutes"},major:{value:20,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:5,unit:"minutes"},major:{value:2,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:15,unit:"minutes"},major:{value:6,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"hours"},major:{value:1,unit:"days"},format:{day:"numeric",month:"short"}},{minor:{value:6,unit:"hours"},major:{value:1,unit:"weeks"},format:{day:"numeric",month:"short"}},{minor:{value:1,unit:"days"},major:{value:1,unit:"months"},format:{month:"long"}},{minor:{value:2,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:3,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:4,unit:"days"},major:{value:3,unit:"months"},format:{month:"short",year:"numeric"}},{minor:{value:1,unit:"weeks"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"months"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:2,unit:"months"},major:{value:2,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"years"},major:{value:1,unit:"decades"},format:{year:"numeric"}},{minor:{value:2,unit:"years"},major:{value:5,unit:"decades"},format:{year:"numeric"}},{minor:{value:5,unit:"decades"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1,unit:"centuries"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:2,unit:"centuries"},major:{value:20,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:5,unit:"centuries"},major:{value:50,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:10,unit:"centuries"},major:{value:100,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:20,unit:"centuries"},major:{value:200,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:50,unit:"centuries"},major:{value:500,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:100,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:200,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:500,unit:"centuries"},major:{value:5e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1e3,unit:"centuries"},major:{value:1e4,unit:"centuries"},format:{era:"short",year:"numeric"}}];let u=class extends Bt{constructor(t,e){super(t,e),this._ignoreNextSliderUpdate=!1,this._slider=new Lt({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1,thumbsConstrained:!1}),this._tickFormat=null,this.disabled=!1,this.labelFormatFunction=null,this.messages=null,this.messagesCommon=null,this.tickConfigs=null,this.timeVisible=!1,this.viewModel=new ct}initialize(){this.addHandles([D(()=>this._slider.values,t=>{if(this._ignoreNextSliderUpdate)return void(this._ignoreNextSliderUpdate=!1);const e=this.viewModel.valuesToTimeExtent(t);this.timeExtent!=null?e!=null?this.timeExtent.equals(e)||(this.timeExtent=e):this.timeExtent=null:e!=null&&(this.timeExtent=e)}),D(()=>this.effectiveStops,()=>this._updateSliderSteps(),Z)])}loadDependencies(){return It({action:()=>nt(()=>import("./index-BPm91e5Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),"action-menu":()=>nt(()=>import("./index-DK5B8inx.js").then(t=>t.i),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,0,19,20,21,22,23,24,26,27,28,29,30,31,32,33,34,35]),import.meta.url)})}destroy(){this._slider.destroy(),this._tickFormat=null}get _dateFormat(){return this._getIntlOptions("short-date")}get _timeFormat(){return this._getIntlOptions("long-time")}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get effectiveStops(){return this.viewModel.effectiveStops}get fullTimeExtent(){return this.viewModel.fullTimeExtent}set fullTimeExtent(t){this.viewModel.fullTimeExtent=t}get icon(){return"clock"}set icon(t){this._overrideIfSome("icon",t)}get interactive(){return!(this.disabled||this.viewModel.state==="disabled"||this.timeZone===Rt)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){["auto","compact","wide"].includes(t)||(t="auto"),this._set("layout",t)}get loop(){return this.viewModel.loop}set loop(t){this.viewModel.loop=t}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}get playRate(){return this.viewModel.playRate}set playRate(t){this.viewModel.playRate=t}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}get tickFormats(){const{timeZone:t}=this;return Jt.map(({minor:e,major:l,format:m})=>({minor:new W(e),major:new W(l),format:{...m,timeZone:t}}))}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(t){this.viewModel.timeExtent=t}get timeZone(){var t;return((t=this.viewModel.view)==null?void 0:t.timeZone)??Vt}set timeZone(t){this._overrideIfSome("timeZone",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}next(){return this.viewModel.next()}play(){return this.viewModel.play()}previous(){return this.viewModel.previous()}stop(){return this.viewModel.stop()}render(){var Y,tt;const{_slider:t,actions:e,domNode:l,effectiveStops:m,fullTimeExtent:s,interactive:h,messages:v,messagesCommon:c,mode:T,tickConfigs:b,timeExtent:o,timeVisible:g,viewModel:{state:k,timeExtentValues:f}}=this;if(s!=null){const{start:_,end:et}=s;if(_!=null&&et!=null){const R=_.getTime(),V=et.getTime(),it=t.min!==R||t.max!==V;if(it&&(t.min=R,t.max=V),b!=null)t.tickConfigs!==b&&(t.tickConfigs=b);else{const yt=(V-R)/(((Y=t.trackElement)==null?void 0:Y.offsetWidth)||400),M=this.tickFormats.find(O=>O.minor.toMilliseconds()>Gt*yt)??this.tickFormats.at(-1),st=this._tickFormat!==M&&M!=null;if(st&&(this._tickFormat=M),it||st){const O={mode:"position",values:this._getTickPositions(M.minor),labelsVisible:!1,tickCreatedFunction:(L,E)=>{E==null||E.classList.add(n.sliderMinorTick)}},gt={mode:"position",values:this._getTickPositions(M.major),labelsVisible:!0,tickCreatedFunction:(L,E)=>{E==null||E.classList.add(n.sliderMajorTick)},labelFormatFunction:L=>B(L,M.format)};t.tickConfigs=[O,gt]}}}}const S=((tt=this.fullTimeExtent)==null?void 0:tt.start)==null||this.fullTimeExtent.end==null||this.timeExtent==null||this.timeExtent.isAllTime||this.timeExtent.isEmpty||this.timeExtent.start!=null&&(this.timeExtent.start<this.fullTimeExtent.start||this.timeExtent.start>this.fullTimeExtent.end)||this.timeExtent.end!=null&&(this.timeExtent.end>this.fullTimeExtent.end||this.timeExtent.end<this.fullTimeExtent.start);if(S)switch(this._ignoreNextSliderUpdate=!0,T){case"time-window":t.values=[t.min,t.max];break;case"instant":case"cumulative-from-end":t.values=[t.min];break;case"cumulative-from-start":t.values=[t.max]}else f!=null?Ct(t.values,f)||(t.values=f):t.values=null;t.disabled=!h;const ht=k==="ready",j=k==="playing",x=S||!h||m==null||m.length===0,$=this.layout==="auto"?l.clientWidth<Ht?"compact":"wide":this.layout,U=r("div",{class:n.animation},r("button",{"aria-disabled":x?"true":"false","aria-label":j?c.control.stop:c.control.play,bind:this,class:this.classes(w.widgetButton,n.animationButton,x&&w.buttonDisabled),disabled:x,onclick:this._playOrStopClick,title:j?c.control.stop:c.control.play,type:"button"},r("div",{class:this.classes((ht||x)&&C.play,j&&C.pause)}))),pt=this.labelFormatFunction!=null?r("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:n.timeExtentDate,"data-date":o?[o.start,o.end]:null,"data-layout":$,"data-type":"extent",key:"extent"}):o==null||o!=null&&o.isAllTime?[r("div",{class:this.classes(n.warning,C.noticeTriangle)}),r("div",{class:n.warningText,key:"warning-text"},v.noTimeExtent)]:o.isEmpty?[r("div",{class:this.classes(n.warning,C.noticeTriangle)}),r("div",{class:n.warningText,key:"warning-text"},v.emptyTimeExtent)]:[o.start!=null&&r("div",{class:n.timeExtentGroup,key:"start-date-group"},r("div",{class:n.timeExtentDate,key:"start-date"},this._formatDate(o.start)),g?r("div",{class:n.timeExtentTime,key:"start-time"},this._formatTime(o.start)):null),o.start!=null&&o.end!=null&&o.start.getTime()!==o.end.getTime()&&r("div",{class:n.timeExtentSeparator,key:"separator"},"–"),o.end!=null&&(o.start==null||o.start.getTime()!==o.end.getTime())&&r("div",{class:n.timeExtentGroup,key:"end-date-group"},r("div",{class:n.timeExtentDate,key:"end-date"},this._formatDate(o.end)),g?r("div",{class:n.timeExtentTime,key:"end-time"},this._formatTime(o.end)):null)],z=r("div",{class:this.classes(n.timeExtent,!h&&w.buttonDisabled)},[pt]),vt=this.labelFormatFunction!=null?r("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:n.minDate,"data-date":s==null?void 0:s.start,"data-layout":$,"data-type":"min",key:"min-date"}):(s==null?void 0:s.start)!=null&&[r("div",{class:n.minDate,key:"min-date"},this._formatDate(s.start)),g&&r("div",{class:n.minTime,key:"min-time"},this._formatTime(s.start))],q=r("div",{class:this.classes(n.min,!h&&w.buttonDisabled)},[vt]),G=r("div",{class:n.slider},t.render()),ft=this.labelFormatFunction!=null?r("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:n.maxDate,"data-date":s==null?void 0:s.end,"data-layout":$,"data-type":"max",key:"max-date"}):(s==null?void 0:s.end)!=null&&[r("div",{class:n.maxDate,key:"max-date"},this._formatDate(s.end)),g&&r("div",{class:n.maxTime,key:"max-time"},this._formatTime(s.end))],H=r("div",{class:this.classes(n.max,!h&&w.buttonDisabled)},[ft]),J=r("div",{class:n.previous},r("button",{"aria-disabled":x?"true":"false","aria-label":c.pagination.previous,bind:this,class:this.classes(w.widgetButton,n.previousButton,(j||x)&&w.buttonDisabled),disabled:x,onclick:this._previousClick,title:c.pagination.previous,type:"button"},r("div",{class:C.reverse}))),K=r("div",{class:n.next},r("button",{"aria-disabled":x?"true":"false","aria-label":c.pagination.next,bind:this,class:this.classes(w.widgetButton,n.nextButton,(j||x)&&w.buttonDisabled),disabled:x,onclick:this._nextClick,title:c.pagination.next,type:"button"},r("div",{class:C.forward}))),Q=(e==null?void 0:e.length)>0,X=Q&&r("div",{class:n.actions,title:c.options},r("calcite-action-menu",{class:n.actionsButton,label:c.options},e.toArray().map(_=>r("calcite-action",{bind:this,icon:_.icon,id:_.id,onclick:()=>this.viewModel.triggerAction(_),text:_.title,textEnabled:!0,title:_.title}))));return r("div",{afterCreate:_=>{this.addHandles(Zt(_,()=>this.scheduleRender()))},"aria-label":v.widgetLabel,class:this.classes(n.timeSlider,w.widget,`${n.timeSliderMode}${T}`,`${n.timeSliderLayout}${$}`,!h&&w.disabled,S&&n.timeSliderOutOfBounds,Q&&n.hasActions,Pt())},$==="wide"&&r("div",{class:n.timeSliderRow},r("div",{class:n.playbackControls},[U,z,q,G,H,J,K]),X),$==="compact"&&[r("div",{class:n.timeSliderRow,key:"time-slider-row-1"},[z,X]),r("div",{class:n.timeSliderRow,key:"time-slider-row-2"},[G]),r("div",{class:n.timeSliderRow,key:"time-slider-row-3"},[q,J,U,K,H])])}updateWebDocument(t){var e;(e=this.viewModel)==null||e.updateWebDocument(t)}_createLabel(t){if(this.labelFormatFunction==null)return;const e=t.getAttribute("data-type"),l=t.getAttribute("data-layout"),m=t["data-date"];this.labelFormatFunction(m,e,t,l)}_formatDate(t){return B(t,this._dateFormat)}_formatTime(t){return B(t,this._timeFormat)}_getIntlOptions(t){const{timeZone:e}=this;return{...Ot(t),timeZone:e}}_getTickPositions(t){const{fullTimeExtent:e}=this;if((e==null?void 0:e.start)==null||e.end==null)return[];const{start:l,end:m}=e,s=[],{value:h,unit:v}=t;let c=At(l,v,this.timeZone);for(;c.getTime()<=m.getTime();)c.getTime()>=l.getTime()&&s.push(c.getTime()),c=dt(c,h,v,this.timeZone);return s}_updateSliderSteps(){this._slider.steps=this.effectiveStops!=null&&this.effectiveStops.length>0?this.effectiveStops.map(t=>t.getTime()):null}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:Dt(this.viewModel.state)}}_previousClick(){this.viewModel.previous()}_nextClick(){this.viewModel.next()}};i([a()],u.prototype,"_dateFormat",null),i([a()],u.prototype,"_timeFormat",null),i([a()],u.prototype,"actions",null),i([a()],u.prototype,"disabled",void 0),i([a()],u.prototype,"effectiveStops",null),i([a()],u.prototype,"fullTimeExtent",null),i([a()],u.prototype,"icon",null),i([a({readOnly:!0})],u.prototype,"interactive",null),i([a()],u.prototype,"label",null),i([a()],u.prototype,"labelFormatFunction",void 0),i([a({value:"auto"})],u.prototype,"layout",null),i([a()],u.prototype,"loop",null),i([a(),lt("esri/widgets/TimeSlider/t9n/TimeSlider")],u.prototype,"messages",void 0),i([a(),lt("esri/t9n/common")],u.prototype,"messagesCommon",void 0),i([a()],u.prototype,"mode",null),i([a()],u.prototype,"playRate",null),i([a()],u.prototype,"stops",null),i([a()],u.prototype,"tickConfigs",void 0),i([a()],u.prototype,"tickFormats",null),i([a()],u.prototype,"timeExtent",null),i([a({nonNullable:!0})],u.prototype,"timeVisible",void 0),i([a()],u.prototype,"timeZone",null),i([a()],u.prototype,"view",null),i([a({type:ct}),Wt("trigger-action")],u.prototype,"viewModel",void 0),i([I()],u.prototype,"_playOrStopClick",null),i([I()],u.prototype,"_previousClick",null),i([I()],u.prototype,"_nextClick",null),u=i([ut("esri.widgets.TimeSlider")],u);const Kt=u;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const Qt=Et`@layer{arcgis-time-slider{display:block}}`,Xt=qt(Kt),F=class F extends wt{constructor(){super(...arguments),this.widget=Xt(this),this.viewModel=this.widget.viewModel,this.actions=this.widget.actions,this.autoDestroyDisabled=!1,this.disabled=this.widget.disabled,this.effectiveStops=this.widget.effectiveStops,this.fullTimeExtent=this.widget.fullTimeExtent,this.icon=this.widget.icon,this.label=this.widget.label,this.layout=this.widget.layout,this.loop=this.widget.loop,this.mode=this.widget.mode,this.playRate=this.widget.playRate,this.position="bottom-left",this.state=this.viewModel.state,this.stops=this.widget.stops,this.tickConfigs=this.widget.tickConfigs,this.timeExtent=this.widget.timeExtent,this.timeVisible=this.widget.timeVisible,this.timeZone=this.widget.timeZone,this.arcgisPropertyChange=xt()("effectiveStops","fullTimeExtent","timeExtent","state"),this.arcgisReady=_t(),this.arcgisTriggerAction=kt(()=>this.widget,"trigger-action")}async applyTimeSliderSettings(e){Object.assign(this,e)}async destroy(){await this.manager.destroy()}async next(){var e;(e=this.widget)==null||e.next()}async play(){var e;(e=this.widget)==null||e.play()}async previous(){var e;(e=this.widget)==null||e.previous()}async stop(){var e;(e=this.widget)==null||e.stop()}async updateWebDocument(e){var l;(l=this.widget)==null||l.updateWebDocument(e)}};F.properties={actions:0,autoDestroyDisabled:5,disabled:7,effectiveStops:0,fullTimeExtent:0,icon:1,label:1,layout:1,loop:5,mode:1,playRate:9,position:1,referenceElement:1,state:3,stops:0,tickConfigs:0,timeExtent:0,timeVisible:5,timeZone:1},F.shadowRootOptions=bt,F.styles=Qt;let N=F;Tt("arcgis-time-slider",N);export{N as ArcgisTimeSlider};
