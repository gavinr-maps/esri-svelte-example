/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */function x(n,t){Array.isArray(t)?n._watchHandles=[...n._watchHandles,...t]:n._watchHandles.push(t)}function L(n){n.el.childElem&&(n.el.childElem.ownedBy=n.el);const t=m(n);if(!t){const e=w(n.referenceElement);if(!e){g(n);return}return f(e,n,!0),e}return y(t,n.el.parent)||(n.el.parent=t,t.tagName.toLowerCase()==="arcgis-expand"?v(t,n):t.tagName.toLowerCase()==="arcgis-placement"?h(t,n):f(t,n,!1)),t}function m({el:n}){for(let t=n.parentElement;t;t=(t==null?void 0:t.parentElement)??null){if(u.has(t.tagName.toLowerCase()))return t;if("ownedBy"in t&&t.ownedBy instanceof HTMLElement&&u.has(t.ownedBy.tagName.toLowerCase()))return t.ownedBy}}const u=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function y(n,t){if(n!==t)return!1;const e=n.tagName.toLowerCase();return e==="arcgis-expand"||e==="arcgis-placement"}function s(n,t,e="arcgisReady"){var r;const o=n;if(typeof((r=o.view)==null?void 0:r.ready)=="boolean")t(o.view);else{let c=function(i){i.target===n&&(s(n,t,e),n.removeEventListener(e,c))};n.addEventListener(e,c)}}const v=(n,t)=>s(n,e=>{var o;t.el.childElem&&n.content!=null&&n.content.append(t.el.childElem),n.expandIcon=t.icon||((o=t.widget)==null?void 0:o.icon)||n.expandIcon,t.position=n.position,t.el.view=e}),h=(n,t)=>s(n,e=>{t.el.childElem&&t.el.append(t.el.childElem),t.position=n.position,t.el.view=e}),f=(n,t,e)=>s(n,o=>{e?g(t):t.el.childElem&&E(n,t),t.el.view=o},"arcgisViewReadyChange");function E(n,t){var d;const e=t.el.childElem??t.el,o=[...n.children],r={};for(const l of o){const a=l.getAttribute("position")??"manual";r[a]??(r[a]=[]),r[a].push({child:l,position:a,index:o.indexOf(l)})}const c=(d=r[t.position??"manual"])==null?void 0:d.findIndex(({child:l})=>l===t.el),i=n.view.ui;i.remove(e),i.add(e,{position:t.position,index:c})}function C(n){let t=!1,e=n.el.view;const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n.el),"view")??{get:()=>e,set:r=>e=r};Object.defineProperty(n.el,"view",{get:o.get.bind(n.el),set:r=>{o.set.call(n.el,r),r&&!t&&(t=!0,n.arcgisReady.emit())},configurable:!0,enumerable:!0}),e&&(n.el.view=e)}function N(n){return n==null||n===""}function O(n,t){return t!=null&&(n==null?void 0:n.position)===t.position&&(n==null?void 0:n.heading)===t.heading&&(n==null?void 0:n.tilt)===t.tilt&&(n==null?void 0:n.fov)===t.fov}function A(n,t){return t===void 0||(n==null?void 0:n.targetGeometry)!==(t==null?void 0:t.targetGeometry)||(n==null?void 0:n.rotation)!==(t==null?void 0:t.rotation)||(n==null?void 0:n.scale)!==(t==null?void 0:t.scale)}function B(n,t){return p(t==null?void 0:t.center,n)}function p(n,t){if(typeof t=="string")return p(n,t.split(",").map(Number));if(!n)return t;if(Array.isArray(t)){const e=t[0],o=t[1],r=t.length>2?t[2]:void 0;if(e!==n.longitude||o!==n.latitude||r!==n.z)return t}else if(t&&!(n!=null&&n.equals(t)))return t}async function H(n,t){t!=null&&(typeof t=="string"?n.el.view=await b(t):n.widget&&(n.el.view=t.view))}async function b(n){const t=w(n);return await new Promise(e=>{var o;typeof((o=t==null?void 0:t.view)==null?void 0:o.ready)=="boolean"?e(t.view):t&&t.addEventListener("arcgisViewReadyChange",()=>e(t.view),{once:!0})})}function g(n){n.el.childElem&&(n.el.shadowRoot??n.el).append(n.el.childElem)}function w(n){return typeof n!="string"?n??void 0:(n.includes("#")||n.includes(".")||n.includes("[")?void 0:document.querySelector(`#${n}`))??document.querySelector(n)??void 0}export{O as H,C as L,A as N,B as O,x as P,H as S,L as p,p as u,N as x};
