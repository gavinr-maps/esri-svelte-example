const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./AreaMeasurement2D-D627XDh-.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./jsxFactory-Be5PKa9i.js","./intl-CArXn1et.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./assets-BNizZMOZ.js","./index-BVncS3aY.js","./index-CjOb8WjV.css","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./uuid-fwrPAdZb.js","./Point-TlcsOcXV.js","./writer-3zufXUNV.js","./projection-tSh-0UvX.js","./mathUtils-ClvKsMak.js","./Extent-B4rrMrqp.js","./Polyline-BQFeqYXi.js","./projectBuffer-iyGwL2dv.js","./geodesicConstants-kj1AtlGg.js","./defaultUnit-6wOlq6cB.js","./getDefaultUnitForView-C278cFTz.js","./Portal-DCqdz-K4.js","./geometry-CnaxvJsv.js","./Graphic-Bi5hWHps.js","./PopupTemplate-D8mXPxzU.js","./Clonable-cKbRam6-.js","./fieldUtils-C5R42-PY.js","./enumeration--HlxOQ_N.js","./Color-DDUWtbqR.js","./colorUtils-CS9vdHXB.js","./ActionToggle-C0Z1k2jc.js","./Identifiable-BLvpQbOc.js","./symbols-CfvYGR4J.js","./TextSymbol-zZq0BA1M.js","./screenUtils-PfxkaaMN.js","./materialUtils-CQ3JLQ1x.js","./opacityUtils-BT7mQkwC.js","./aaBoundingBox-BGxkJAW0.js","./persistableUrlUtils-Dx61-x4K.js","./collectionUtils-Dm1icNvk.js","./jsonUtils-DtWlwXHP.js","./colorUtils-D5nOabzP.js","./vec42-B1mBkh1w.js","./vec4f64-CBQL1T0x.js","./unitFormatUtils-BtkL2qzA.js","./ByteSizeUnit-BsxeN7wM.js","./Cyclical-BY_I03kj.js","./quantityUtils-Cz8e0KG8.js","./UpdatingHandles-CMtXpTiG.js","./geometryEngine-DyRMGqqp.js","./geometryEngineBase-RmbNeFm7.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-CRSW297p.js","./geodesicUtils-DyOqnDq-.js","./GraphicsLayer-DACkzSwx.js","./GraphicsCollection-B0IuEpT5.js","./Layer-CfUiPX3n.js","./TimeExtent-Dl-qaORu.js","./timeUtils-DQR2jUPL.js","./BlendLayer-DmvCcS5c.js","./jsonUtils-C4Wp5KpV.js","./parser-BN6zmHl-.js","./utils-D20M4_S8.js","./mat4f32-DcsiF_Rp.js","./mat4-ybYUU6jq.js","./ScaleRangeLayer-CKYXLXxK.js","./ElevationInfo-jptbPjRY.js","./unitConversionUtils-BUA_O87q.js","./lengthUtils-vgIBtB6M.js","./ViewingMode-Dodu7ZZk.js","./SnappingVisualizer2D-D8iIxBDy.js","./vec2-B_ymkwGp.js","./vec2f64-Diu2Kaa8.js","./enums-BRXbslMp.js","./SnappingManager-DFm0py-D.js","./elevationInfoUtils-C0SzfJu0.js","./projectVectorToVector-BLdiwuTJ.js","./projectPointToVector-C-hGM2ap.js","./plane-Bz78OrLf.js","./mat3f64-BBpwCtoL.js","./mat4f64-Dk4dwAN8.js","./quatf64-BrpT0VRp.js","./mathUtils-kvswLROa.js","./sphere-DIv2hmik.js","./geometry2dUtils-BraNT6Fs.js","./FeatureFilter-DqmBE6ye.js","./Query-BpMwiNVl.js","./DataLayerSource-BX7Ap_tY.js","./Field-poIiHWUc.js","./fieldType-CIG5ey7e.js","./FullTextSearch-BhJOgh_r.js","./floorFilterUtils-DZ5C6FQv.js","./layerUtils-BzjQnEdj.js","./InputManager-C4xu1R9l.js","./Queue-DpHko4Yk.js","./signal-DzOfzcfh.js","./keybindings-DYR2fa8r.js","./utils-CXgSw6Sd.js","./layerViewUtils-D2JqIDZ8.js","./geodesicLengthMeasurementUtils-YCCCQWpE.js","./SnappingVisualizer-Bg9_3fTb.js","./PointSnappingHint-DJuRAzp4.js","./Draw-BJJbi6cJ.js","./EditGeometryOperations-yqtNdguW.js","./compilerUtils-BA04t1lN.js","./SnappingContext-lR2hMWGP.js","./SnappingOperation-CqqVcxu4.js","./Scheduler-CDoWuxMK.js","./debugFlags-B3L9P_UW.js","./screenUtils-BGG3AyYa.js","./surfaceCoordinateSystems-BE1mjxbn.js","./memoize-DsJmrG76.js","./ReactiveSet-HYC-4KEs.js","./diffUtils--7ofoPN-.js","./dehydratedFeatureComparison-NNZuxUKF.js","./InteractiveToolBase-BwczmwYA.js","./meshVertexSpaceUtils-BfF6O78E.js","./MeshLocalVertexSpace-sBjAuOT3.js","./hydratedFeatures-DHwl8sGq.js","./interfaces-D6pIddIh.js","./SketchLabelOptions-10TdxHmI.js","./SnappingDragPipelineStep-Xj6G0KqT.js","./mat2d-DPkeMmgR.js","./mat2df64-CBKYtunK.js","./quat-ChS85qAG.js","./GraphicManipulator-Dp-uSe1P.js","./defaults-CIM29kXM.js","./defaultsJSON-GKolV7NZ.js","./drapedUtils-BgWOavfo.js","./SnappingManagerPool-CxgepikZ.js","./MeasurementWidgetContent-CNKyAkoI.js","./UnitSelect-Cnnhr_2u.js","./globalCss-CZa70j6i.js","./AreaMeasurement3D-sScRMwol.js","./Analysis-BPeFLKhb.js","./measurementUtils-22mMXl4k.js","./geodesicAreaMeasurementUtils-CSr4mjZE.js","./SnappingVisualizer3D-MnPwlkC2.js","./ExtendedLineVisualElement-CC63Pz3j.js","./vec4f32-CjrfB-0a.js","./frustum-6KI4j9vx.js","./lineSegment-A3_mEhFF.js","./EngineVisualElement-DP_S_DwA.js","./RenderGeometry-C4TY81Cr.js","./vec3f32-Cw9Q6TO_.js","./DoubleArray-CF_CpVBS.js","./Texture-DjTh7HwY.js","./NormalAttribute.glsl-Dqf1UPF9.js","./interfaces-B8ge7Jg9.js","./BindType-BmZEZMMh.js","./VertexAttribute-BnAa5VW0.js","./Util-BMqL_pkg.js","./enums-BlUEVwJR.js","./Texture-BbJIOVx_.js","./basicInterfaces-wONHx_SN.js","./mat3-DRqs2t5W.js","./ShaderTechniqueConfiguration-D3UbJ2mX.js","./doublePrecisionUtils-B0owpBza.js","./Indices-B6BGScAS.js","./Material-BN_i9QRJ.js","./triangle-DtfDEZcP.js","./renderState-PYzNpa1K.js","./requestImageUtils-BkbekjsQ.js","./orientedBoundingBox-WyW1LZfF.js","./spatialReferenceEllipsoidUtils-DuE2W35w.js","./computeTranslationToOriginAndRotation-CFxYfzBj.js","./ElevationProvider-eMOI1-3B.js","./boundedPlane-Xr4Vx-V9.js","./verticalOffsetUtils-CU5zOPGb.js","./axisAngleDegrees-CHCWDIqP.js","./weather-B51D8kuv.js","./Float4DrawUniform-CWdxHXQ-.js","./NestedMap-DgiGbX8E.js","./Octree-BnKLop8B.js","./InterleavedLayout-UIhsB8jd.js","./BufferView-B7Z-dzh4.js","./floatRGBA-C8rGFKJ0.js","./Intersector-pThUjfQo.js","./glUtil-C6KhMg1m.js","./VertexElementDescriptor-BOD-G50G.js","./MemCache-C6WUx-5V.js","./VertexArrayObject-Cwnso4un.js","./BufferObject-CjYoWxgZ.js","./VisualElement-CT5Yhr5G.js","./Laserlines.glsl-Dgb6OMTT.js","./PointVisualElement-BUqXP0eU.js","./Object3DVisualElement-DudZRJcw.js","./ColorMaterial.glsl-8RSfQ59m.js","./VertexColor.glsl-BROYASAm.js","./RightAngleQuadVisualElement-ChD6bB1A.js","./dragEventPipeline3D-BsmsUwER.js","./ray-DzoXcN4v.js","./RenderObject-Cc5ObyLE.js","./ToolIntersector-CtDkwpAn.js","./ShadedColorMaterial.glsl-vn9dLgnT.js","./InteractiveAnalysisViewModel-Dobr8sYR.js","./DistanceMeasurement2D-C2a9jDE-.js","./DirectLineMeasurement3D-ikcM1IrM.js","./interfaces-js1RL7O8.js","./interfaces-CjSZqm0S.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./index-BVncS3aY.js";import{e}from"./Evented-CXIxDjmW.js";import{S as w,t as _}from"./Accessor-D6mNnsWy.js";import{d as c}from"./reactiveUtils-BFQ0BtrB.js";import{y as i,b as v}from"./subclass-BR3PhgZG.js";import{e as h,B as g,n as m}from"./jsxFactory-Be5PKa9i.js";import{ad as f,ae as y}from"./Point-TlcsOcXV.js";import{e as M}from"./defaultUnit-6wOlq6cB.js";import"./shared-B3wH2qpO.js";import"./intl-CArXn1et.js";import"./Promise-CZrWwByK.js";import"./jsonMap-DCC6W5ex.js";import"./assets-BNizZMOZ.js";import"./uuid-fwrPAdZb.js";import"./writer-3zufXUNV.js";import"./getDefaultUnitForView-C278cFTz.js";import"./Portal-DCqdz-K4.js";import"./Extent-B4rrMrqp.js";let o=class extends w{constructor(t){super(t),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(t){this._overrideIfSome("areaUnit",t)}get linearUnit(){return this.defaultUnit}set linearUnit(t){this._overrideIfSome("linearUnit",t)}get state(){const{activeViewModel:t}=this;return t?t.state:"disabled"}};e([i({type:["area","distance","direct-line"]})],o.prototype,"activeTool",void 0),e([i()],o.prototype,"activeViewModel",void 0),e([i({type:f})],o.prototype,"areaUnit",null),e([i(M)],o.prototype,"defaultUnit",void 0),e([i({type:y})],o.prototype,"linearUnit",null),e([i({readOnly:!0})],o.prototype,"state",null),e([i()],o.prototype,"view",void 0),o=e([v("esri.widgets.Measurement.MeasurementViewModel")],o);const p=o,U={base:"esri-measurement"};function W(t){return(t==null?void 0:t.declaredClass)==="esri.widgets.AreaMeasurement2D"||(t==null?void 0:t.declaredClass)==="esri.widgets.AreaMeasurement3D"}let a=class extends g{constructor(t,r){super(t,r),this._widgets=new Map,this.activeWidget=null,this.messages=null,this.viewModel=new p}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then(t=>{this._set("activeWidget",t)}),this.addHandles([c(()=>[this.view,this.activeTool],async()=>{this._set("activeWidget",await this._getActiveWidget())}),c(()=>this.activeWidget,(t,r)=>{this.viewModel.set("activeViewModel",t?t.viewModel:null),r&&(r.visible=!1)}),c(()=>[this.areaUnit,this.linearUnit,this.uiStrings],()=>this._updateSubWidgetProperties())])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(t){this.viewModel.activeTool=t}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(t){this.viewModel.areaUnit=t}get icon(){return"measure"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(t){this.viewModel.linearUnit=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{activeWidget:t}=this,r=t&&!t.destroyed?t.render():null;return m("div",{class:U.base},r)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:t}=this.viewModel;t&&_(t.start())}async _createWidget(t){const{areaUnit:r,linearUnit:s,view:n}=this;if(!n)return null;switch(t){case"area":{const{type:d}=n;switch(d){case"2d":return new(await u(async()=>{const{default:l}=await import("./AreaMeasurement2D-D627XDh-.js");return{default:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135]),import.meta.url)).default({view:n,unit:r,uiStrings:this._createUIStringsForWidget(t)});case"3d":return new(await u(async()=>{const{default:l}=await import("./AreaMeasurement3D-sScRMwol.js");return{default:l}},__vite__mapDeps([136,1,2,3,4,5,6,7,8,9,10,11,12,13,137,28,34,14,15,19,18,17,22,23,24,114,51,121,25,26,27,29,30,31,32,33,35,36,37,38,39,40,41,42,43,79,20,21,80,16,138,86,67,45,46,81,82,83,84,75,85,139,50,52,53,54,55,56,102,74,78,70,71,140,44,141,142,143,144,145,146,147,148,149,150,151,152,107,153,154,155,156,157,158,159,160,161,162,72,163,164,165,166,127,167,168,169,170,171,172,173,110,98,111,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,77,87,88,60,61,89,90,91,92,93,94,95,96,97,99,100,101,49,103,104,193,194,118,119,120,106,122,195,196,197,108,124,117,132,109,112,198,133,134,135]),import.meta.url)).default({view:n,unit:r,uiStrings:this._createUIStringsForWidget(t)});default:return null}}case"distance":{const{type:d}=n;return d==="2d"?new(await u(async()=>{const{default:l}=await import("./DistanceMeasurement2D-C2a9jDE-.js");return{default:l}},__vite__mapDeps([199,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135]),import.meta.url)).default({view:n,unit:s,uiStrings:this._createUIStringsForWidget(t)}):null}case"direct-line":{const{type:d}=n;return d==="3d"?new(await u(async()=>{const{default:l}=await import("./DirectLineMeasurement3D-ikcM1IrM.js");return{default:l}},__vite__mapDeps([200,1,2,3,4,5,6,7,8,9,10,11,12,13,137,28,34,14,15,22,23,24,18,25,19,17,114,51,121,26,27,29,30,31,32,33,35,36,37,38,39,40,41,42,43,79,20,21,80,16,138,86,67,45,46,81,82,83,84,75,85,139,50,52,53,54,55,56,102,74,78,70,71,140,44,141,142,143,144,145,146,147,148,149,150,151,152,107,153,154,155,156,157,158,159,160,161,162,72,163,164,165,166,127,167,168,169,170,171,172,173,110,98,111,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,77,87,88,60,61,89,90,91,92,93,94,95,96,97,99,100,101,49,103,104,193,194,118,119,120,106,122,201,202,195,197,108,124,117,132,112,198,133,134,135]),import.meta.url)).default({view:n,unit:s,uiStrings:this._createUIStringsForWidget(t)}):null}default:return null}}_destroyWidgets(){this._widgets.forEach(t=>t.destroy()),this._widgets.clear()}async _getActiveWidget(){const{activeTool:t,view:r}=this;if(!r||!t)return null;let s=null;if(this._widgets.has(t))s=this._widgets.get(t),s.visible=!0;else{if(s=await this._createWidget(t),!s)return null;await s.viewModel.start(),this._widgets.set(t,s)}return s}_createUIStringsForWidget(t){var s;if(!this.uiStrings)return;const r=t+"-"+((s=this.view)==null?void 0:s.type);return this.uiStrings[r]}_updateSubWidgetProperties(){this._widgets.forEach((t,r)=>{const{areaUnit:s,linearUnit:n}=this;t.unit=W(t)?s:n,t.uiStrings=this._createUIStringsForWidget(r)})}};e([i()],a.prototype,"activeTool",null),e([i({readOnly:!0})],a.prototype,"activeWidget",void 0),e([i()],a.prototype,"areaUnit",null),e([i()],a.prototype,"icon",null),e([i()],a.prototype,"label",null),e([i()],a.prototype,"linearUnit",null),e([i(),h("esri/widgets/Measurement/t9n/Measurement")],a.prototype,"messages",void 0),e([i()],a.prototype,"uiStrings",void 0),e([i()],a.prototype,"view",null),e([i({type:p})],a.prototype,"viewModel",void 0),a=e([v("esri.widgets.Measurement")],a);const H=a;export{H as default};
