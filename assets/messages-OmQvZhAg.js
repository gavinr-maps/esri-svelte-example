import{e as h,b as a}from"./subclass-BZA_h8Db.js";import{L as f}from"./Accessor-BLX9ikPh.js";import{c as _,d as m}from"./locale-C9TlLpzi.js";const d=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,p={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function c(n){return n in p}const i=[],e=new Map;function u(n){for(const t of e.keys())l(n.pattern,t)&&e.delete(t)}function y(n){return i.includes(n)||(u(n),i.unshift(n)),h(()=>{const t=i.indexOf(n);t>-1&&(i.splice(t,1),u(n))})}async function z(n){const t=_();e.has(n)||e.set(n,g(n,t));const s=e.get(n);return s&&await w.add(s),s}function k(n){if(!d.test(n))return null;const t=d.exec(n);if(t===null)return null;const[,s,r]=t,o=s+(r?"-"+r.toUpperCase():"");return c(o)?o:c(s)?s:null}async function g(n,t){const s=[];for(const r of i)if(l(r.pattern,n))try{return await r.fetchMessageBundle(n,t)}catch(o){s.push(o)}throw s.length?new a("intl:message-bundle-error",`Errors occurred while loading "${n}"`,{errors:s}):new a("intl:no-message-bundle-loader",`No loader found for message bundle "${n}"`)}function l(n,t){return typeof n=="string"?t.startsWith(n):n.test(t)}m(()=>{e.clear()});const w=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(n){return this._increase(),n.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=f())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};export{k as f,z as h,y as u};
