import{e as i,aC as p}from"./Accessor-BmwT4B0c.js";import{d as u,A as c,V as s}from"./reactiveUtils-XM7cS2OP.js";import{d as f,p as l,I as m}from"./SnappingManager-DoaI-UDx.js";import{p as d}from"./RightAngleSnappingHint-BepRvd6S.js";function $(t,e){const o=new f({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??d.touchSensitivityMultiplier});return{...u(()=>{var n,r;return((r=(n=t.map)==null?void 0:n.allLayers)==null?void 0:r.toArray())??[]},n=>{o.featureSources=new s(n).map(r=>new l({layer:r}))},c),options:o}}const a=new Map;function h(t){if(!a.has(t)){const n=$(t,{distance:10}),r=v(t,n.options);a.set(t,{referenceCount:0,snappingManager:r,remove:()=>{n.remove(),r.destroy()}})}const e=a.get(t);e.referenceCount++;const o=i(()=>g(t,e));return{snappingManager:e.snappingManager,...o}}function g(t,e){e.referenceCount--,e.referenceCount>0||p(()=>{e.referenceCount===0&&(e.remove(),a.delete(t))})}function v(t,e){return new m({view:t,options:e})}export{h as a};
