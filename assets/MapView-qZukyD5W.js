const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./webglDeps-CIb9ipkP.js","./BufferObject-CjYoWxgZ.js","./subclass-BR3PhgZG.js","./Texture-BbJIOVx_.js","./enums-BlUEVwJR.js","./Program-BE7XUO18.js","./Accessor-D6mNnsWy.js","./_commonjsHelpers-DCkdB7M8.js","./ProgramCache-DZJRjGv8.js","./NestedMap-DgiGbX8E.js","./ShaderCompiler-G2XYGDs6.js","./VertexArrayObject-Cwnso4un.js","./programUtils-CwiKxPbA.js","./ProgramTemplate-wM3hmZl7.js","./capabilities-C84AMSCg.js","./mapViewDeps-1jPcgj0b.js","./signal-DzOfzcfh.js","./reactiveUtils-BFQ0BtrB.js","./Evented-CXIxDjmW.js","./shared-B3wH2qpO.js","./DefaultUI-Cy6B6U3V.js","./jsxFactory-Be5PKa9i.js","./intl-CArXn1et.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./assets-BNizZMOZ.js","./index-BVncS3aY.js","./index-CjOb8WjV.css","./uuid-fwrPAdZb.js","./UpdatingHandles-CMtXpTiG.js","./InputManager-C4xu1R9l.js","./Queue-DpHko4Yk.js","./Map-D9sO0Jqv.js","./Basemap-CKBB4cRW.js","./collectionUtils-Dm1icNvk.js","./Portal-DCqdz-K4.js","./writer-3zufXUNV.js","./Extent-B4rrMrqp.js","./Point-TlcsOcXV.js","./loadAll-z9YY33Kx.js","./PortalItem-CaeKabGc.js","./persistableUrlUtils-Dx61-x4K.js","./writeUtils-BUKZUL8X.js","./layerUtils-BzjQnEdj.js","./Ground-CSI-YC3C.js","./Color-DDUWtbqR.js","./colorUtils-CS9vdHXB.js","./mathUtils-ClvKsMak.js","./compilerUtils-BA04t1lN.js","./enumeration--HlxOQ_N.js","./opacityUtils-BT7mQkwC.js","./CollectionFlattener-CkyePFnC.js","./editableLayers-BdCikvlg.js","./catalogUtils--o1nDhfl.js","./basemapUtils-fcYt_ePc.js","./utils-D20M4_S8.js","./screenUtils-PfxkaaMN.js","./mat4f32-DcsiF_Rp.js","./mat4-ybYUU6jq.js","./TablesMixin-BWPSKW45.js","./Layer-CfUiPX3n.js","./geometry-CnaxvJsv.js","./Polyline-BQFeqYXi.js","./TimeExtent-Dl-qaORu.js","./timeUtils-DQR2jUPL.js","./Identifiable-BLvpQbOc.js","./GraphicsCollection-B0IuEpT5.js","./Graphic-Bi5hWHps.js","./PopupTemplate-D8mXPxzU.js","./Clonable-cKbRam6-.js","./fieldUtils-C5R42-PY.js","./ActionToggle-C0Z1k2jc.js","./symbols-CfvYGR4J.js","./TextSymbol-zZq0BA1M.js","./materialUtils-CQ3JLQ1x.js","./aaBoundingBox-BGxkJAW0.js","./jsonUtils-DtWlwXHP.js","./HeightModelInfo-CzO-kRMK.js","./ReactiveMap-Dl_3-Rm5.js","./Query-BpMwiNVl.js","./DataLayerSource-BX7Ap_tY.js","./Field-poIiHWUc.js","./fieldType-CIG5ey7e.js","./FullTextSearch-BhJOgh_r.js","./selectionUtils-DYi6daQO.js","./IViewEvents-Bci6PjlS.js","./interfaces-D6pIddIh.js","./screenUtils-BGG3AyYa.js","./a11yUtils-DwloBVAu.js","./heightModelInfoUtils-C5nNknML.js","./arcgisLayerUrl-ETqee4Bd.js","./ViewingMode-Dodu7ZZk.js","./projection-tSh-0UvX.js","./projectBuffer-iyGwL2dv.js","./geodesicConstants-kj1AtlGg.js","./themeUtils-C3zvZbsE.js","./globalCss-CZa70j6i.js","./accessibleHandler-COYT31Am.js","./Compass-eoZ7sbNQ.js","./utils-DsJqvptN.js","./GoTo-CyjNnle5.js","./NavigationToggle-Dune4J79.js","./Zoom-BgowPovH.js","./colorUtils-D5nOabzP.js","./vec42-B1mBkh1w.js","./vec4f64-CBQL1T0x.js","./fontUtils-CILP_6vp.js","./CIMSymbolHelper-Ei9DhmLE.js","./BidiEngine-BwB1Df7c.js","./OptimizedGeometry-vU5jWBvU.js","./GeometryUtils-CXWuBstD.js","./enums-BRXbslMp.js","./utils-D8D39sLt.js","./definitions-ByNBSgP9.js","./mat2d-DPkeMmgR.js","./mat2df32-orApM5a3.js","./vec2-B_ymkwGp.js","./vec2f32-BbH2jxlN.js","./Rect-CUzevAry.js","./BoundingBox-BhuXqU4L.js","./defaults-CIM29kXM.js","./defaultsJSON-GKolV7NZ.js","./OverrideHelper-0-cH6aQ2.js","./quantizationUtils-DFd0XKEL.js","./SDFHelper-C8oRF-3T.js","./floatRGBA-C8rGFKJ0.js","./PieChartMeshWriter-6zNUQ6Fs.js","./UpdateTracking2D-CBckaO4D.js","./BindType-BmZEZMMh.js","./Util-BMqL_pkg.js","./vec2f64-Diu2Kaa8.js","./LabelMetric-Agz2doNK.js","./VertexElementDescriptor-BOD-G50G.js","./highlightReasons-CQmHiFo_.js","./HighlightOptions-BG8_qaKQ.js","./quickselect-D0_cvEX6.js","./TileKey-CIqLSCov.js","./TurboLine-DWtK5y8s.js","./earcut-BqgeR2O3.js","./constants-D5zmR9t2.js","./Container-BQo1Tfto.js","./EffectView-D2q0Wr_W.js","./parser-BN6zmHl-.js","./DisplayObject-DFOkWAgp.js","./mat2df64-CBKYtunK.js","./WGLContainer-BPPb4wqa.js","./WGLBrushVTLSymbol-BVZwlPlb.js","./vec4f32-CjrfB-0a.js","./StyleDefinition-BK3ROBTO.js","./config-MDUrh2eL.js","./DefaultVertexAttributeLayouts-BIPVF1RK.js","./mat3-DRqs2t5W.js","./vec3f32-Cw9Q6TO_.js","./featureConversionUtils-B-SknPj_.js","./OptimizedFeature-7juV2tZm.js","./OptimizedFeatureSet-Blu9Ckm7.js","./VTLMaterialManager-B10yUbF1.js","./enums-BRzLM11V.js","./MagnifierPrograms-DQDTAYgp.js","./CircularArray-CujHzHWW.js","./testSVGPremultipliedAlpha-CKx7iZPZ.js","./AttributeStore-BezdLLOX.js","./labelFormatUtils-CJcADR3o.js","./labelUtils-Cczy0uDR.js","./FieldsIndex-DHql50vu.js","./UnknownTimeZone-D0GlcniK.js","./TimeOnly-BtK5SiqG.js","./centroid-DdLmOD72.js","./diffUtils--7ofoPN-.js","./timeSupport-86-Lo3YD.js","./normalizeUtils-CuTX3yb4.js","./normalizeUtilsCommon-DNPu20r0.js","./utils-Blh5cXWv.js","./utils-Bh7lx_TM.js","./json-Wa8cmqdu.js","./Viewpoint-7_owAOZm.js","./Cyclical-BY_I03kj.js","./viewpointUtils-m5ps6MiV.js","./ZoomMomentumEstimator-BjFm7M7Z.js","./MaterialPrograms-CQOe4hHU.js","./CIMResourceManager-BAhUK52Z.js","./imageUtils-Bwri-Uf9.js","./rasterizingUtils-Cm2OdJYT.js","./pbf-CmaozfCN.js","./utils-C7fJQNqb.js","./grouping-D5xAxFjR.js","./QueueProcessor-Bu6RBZRX.js","./resources-Aq4homSZ.js","./requestImageUtils-BkbekjsQ.js","./FeatureCommandQueue-CXv6tVJy.js","./heatmapTextureUtils-DhR7tWLr.js","./lengthUtils-vgIBtB6M.js","./MeshWriterRegistry-CaHsWeZB.js","./RenderingContext-B0G6O7lI.js","./renderState-PYzNpa1K.js","./basicInterfaces-wONHx_SN.js","./interfaces-B8ge7Jg9.js","./doublePrecisionUtils-B0owpBza.js","./GraphicsView2D-u2hXgWGU.js","./normalizeUtilsSync-DD8htqGn.js","./GraphicContainer-dBb5mX3Q.js","./AGraphicContainer-DV1awRM6.js","./TechniqueInstance-CdE5J-S7.js","./TileContainer-nXcbD7rd.js","./workers-D8NOwm_V.js","./TileInfo-Dm24FfTU.js","./TileKey-DZd6gJy7.js","./unitBezier-BX6NeAEr.js","./TileStrategy-Dx1mrlzq.js","./utils-CXgSw6Sd.js","./ColorBackground-Ds8mXmIZ.js","./TileLayerView2D-RnD2dwfm.js","./imageUtils-CL2bLt2Z.js","./Bitmap-UVG-lDis.js","./LayerView2D-Dn0gqiP2.js","./ClipRect-CkQqwQzT.js","./layerViewUtils-D2JqIDZ8.js","./HighlightGraphicContainer-DicKqNIZ.js","./LayerView-CbIY_4n2.js","./RefreshableLayerView-BClKL0FL.js","./MapServiceLayerViewHelper-DYMcPhwY.js","./scaleUtils-C_vWi-B7.js","./floorFilterUtils-DZ5C6FQv.js","./drapedUtils-BgWOavfo.js","./sublayerUtils-_xnIyjYh.js","./popupUtils-BA90ku9o.js","./FeatureLayerView2D-BjyOJWH7.js","./FeatureFilter-DqmBE6ye.js","./timeSupport-DeLDxidC.js","./timeUtils-FF8YLCMd.js","./tagSymbols-BPcGfZon.js","./FeatureSet-4rZsDUx9.js","./tileUtils-B7X19rIS.js","./featureReductionUtils-Caulfaw_.js","./sizeVariableUtils-Cmcuvw-4.js","./OrderByInfo-D0jsxwzL.js","./labelingInfo-DAjvnaKu.js","./jsonUtils-aUmUTP_F.js","./heatmapUtils-C-uT6ZIV.js","./HighlightCounter-C6mREwEw.js","./FeatureLayerView-C0ylNWtU.js","./FeatureEffect-By-hP1x9.js","./jsonUtils-C4Wp5KpV.js","./BaseDynamicLayerView2D-5OnUdqo4.js","./BitmapContainer-BbCPQbvy.js","./ExportStrategy-bzMx2TwC.js","./CatalogLayerView2D-cC6sSWy_.js","./CatalogLayerView-B7s_YSCL.js","./CatalogDynamicGroupLayerView2D-wqeH8K2o.js","./CatalogDynamicGroupLayerView-D3Vh3278.js","./CatalogFootprintLayerView2D-CBH5KBID.js","./CatalogFootprintLayerView-iq08Mw7I.js","./GeoRSSLayerView2D-C4uo8GMP.js","./SimpleRenderer-FL1Ywtqd.js","./UniqueValueRenderer-Q9ooDuxf.js","./colorRamps-BBM5Timv.js","./SizeVariable-Bq7jlw1r.js","./ColorStop-DEfc5Idt.js","./visualVariableUtils-CrTsYJ9f.js","./styleUtils-C7rrjuqd.js","./jsonUtils-DsFdmTaK.js","./ClassBreaksRenderer-B2uJHW90.js","./LRUCache-ju6LnIBZ.js","./MemCache-C6WUx-5V.js","./Version-_Vxue7Ui.js","./HeatmapColorStop-7F2_sZ2U.js","./GraphicsLayerView2D-C5TlhDTx.js","./GroupLayerView2D-B2SkorqO.js","./GroupLayerView-DbjAVkM1.js","./ImageryLayerView2D-BWlDBi1y.js","./RasterVFDisplayObject-Bqt-bdVC.js","./dataUtils-BTw6iaAi.js","./pixelRangeUtils-DR2RxTkt.js","./rasterProjectionHelper-CuUa3waC.js","./ImageryLayerView-DXyhkgR6.js","./ImageryTileLayerView2D-BMjz3qvP.js","./multidimensionalUtils-BMbLhPO8.js","./rasterUtils-Brs-M08Y.js","./RawBlockCache-Rzsg6ltc.js","./ImageryTileLayerView-SCdASw7T.js","./KMLLayerView2D-ms9FC4XC.js","./kmlUtils-D17SHcg7.js","./KnowledgeGraphLayerView2D-DS_EzXuY.js","./MapImageLayerView2D-CHtwrVxi.js","./MapImageLayerView-CzK9EQ2T.js","./ExportImageParameters-ejhot2o-.js","./MapNotesLayerView2D-C4KPLIQ-.js","./MediaLayerView2D-Dr2mZJsG.js","./perspectiveUtils-CiAQDRsn.js","./mat3f64-BBpwCtoL.js","./OverlayContainer-zrkGkj6n.js","./OGCFeatureLayerView2D-B74YNo1A.js","./OGCFeatureLayerView-CGLmxsqB.js","./RouteLayerView2D-B_ZT73Sl.js","./RouteInfo-DjFt5bex.js","./networkEnums-CvjEi2yz.js","./Stop-DtyCWHkQ.js","./StreamLayerView2D-CrnvulAx.js","./StreamLayerView-BxLSbpdG.js","./SubtypeGroupLayerView2D-DyGOF9tv.js","./VectorTileLayerView2D-DTV-ocot.js","./TileInfoViewPOT-z-AsSuJR.js","./RenderableTile-DOglSSxI.js","./PooledRBush-CGlhTzFe.js","./SourceLayerData-BCkczum9.js","./StyleRepository-CcGT0u4w.js","./VideoLayerView2D-9rlfYtbH.js","./GraphicsLayer-DACkzSwx.js","./BlendLayer-DmvCcS5c.js","./ScaleRangeLayer-CKYXLXxK.js","./ElevationInfo-jptbPjRY.js","./unitConversionUtils-BUA_O87q.js","./TelemetryDisplay-dt6EWeb3.js","./WMSLayerView2D-CCanJsuf.js","./WMSLayerView-BkSmmRWw.js","./ExportWMSImageParameters-BI_JqfG1.js","./WMTSLayerView2D-D--kAYoa.js"])))=>i.map(i=>d[i]);
import{_}from"./index-BVncS3aY.js";import{e as h,o as Me}from"./Evented-CXIxDjmW.js";import{m as I}from"./Viewpoint-7_owAOZm.js";import{d as b,C as xt,w as Se,V as Tt,P as Jt,p as Dt,A as U}from"./reactiveUtils-BFQ0BtrB.js";import{l as be}from"./CollectionFlattener-CkyePFnC.js";import{y as l,b as S,h as D,n as R,c as $,d as Pt,aa as $e,O as zt,R as Ve}from"./subclass-BR3PhgZG.js";import{S as P,U as Mt,f as dt,H as kt,s as Ot,z as Re,T as De,a4 as Pe,u as Qt,_ as Et}from"./Accessor-D6mNnsWy.js";import{m as ze}from"./workers-D8NOwm_V.js";import{s as ke}from"./jsonMap-DCC6W5ex.js";import{K as te,B as Oe}from"./projection-tSh-0UvX.js";import{p as Ee,z as Le}from"./TileInfo-Dm24FfTU.js";import{e as ot,b as ee,c as ut,p as Ie,d as St,f as nt,g as Ae,h as Ce,s as Ne,j as ie,k as X,n as Ze,u as Lt,m as Ge,o as Ue,q as He,v as Fe,w as qe,x as je,y as Ke,z as We,A as Be,B as Ye,C as se,D as Xe,E as Je,H as Qe,F as ti,N as ei}from"./DefaultUI-Cy6B6U3V.js";import"./geometry-CnaxvJsv.js";import{c as Z}from"./screenUtils-PfxkaaMN.js";import{n as bt}from"./vec2f64-Diu2Kaa8.js";import{r as it,S as H,o as ii,e as si,m as ai}from"./vec2-B_ymkwGp.js";import{Z as L,m as ni,u as oi,o as ri,_ as hi,l as li,f as pi,y as ci,g as di,a as ui,Y as mi,x as It,t as gi,w as _i,j as At,H as ae,p as wi,h as vi,k as yi,G as fi}from"./viewpointUtils-m5ps6MiV.js";import{f as xi}from"./assets-BNizZMOZ.js";import{u as Ti,h as Mi,N as J}from"./mathUtils-ClvKsMak.js";import{f as Si,s as bi,i as $i,u as Vi}from"./mat2d-DPkeMmgR.js";import{n as Ri}from"./mat2df32-orApM5a3.js";import{e as rt}from"./mat2df64-CBKYtunK.js";import{r as Di,o as Pi,M as Ct,h as zi,i as ki}from"./mat3-DRqs2t5W.js";import{t as Nt}from"./vec2f32-BbH2jxlN.js";import{P as Oi}from"./normalizeUtils-CuTX3yb4.js";import{w as $t,t as ne,f as oe,s as Ei}from"./Extent-B4rrMrqp.js";import{_ as x,au as Li,B as Ii,G as Ai,b as Ci}from"./Point-TlcsOcXV.js";import{t as Ni,r as Zi}from"./unitBezier-BX6NeAEr.js";import{o as Gi}from"./a11yUtils-DwloBVAu.js";import{i as Vt}from"./Identifiable-BLvpQbOc.js";import{V as Ui,j as Hi,r as Fi,s as qi,a as Q}from"./Polyline-BQFeqYXi.js";import{s as ji,h as Ki}from"./TileStrategy-Dx1mrlzq.js";import{e as Wi}from"./TileKey-CIqLSCov.js";import{a as V,d as Bi,_ as Zt}from"./InputManager-C4xu1R9l.js";import{i as Yi,n as Gt,p as re}from"./HighlightOptions-BG8_qaKQ.js";import{d as Xi}from"./Graphic-Bi5hWHps.js";import{o as he,r as le}from"./screenUtils-BGG3AyYa.js";import{e as Ut}from"./utils-CXgSw6Sd.js";import{m as Ji}from"./ColorBackground-Ds8mXmIZ.js";function Qi(e){return e instanceof Float32Array&&e.length>=2}function ts(e){return Array.isArray(e)&&e.length>=2}function ht(e){return Qi(e)||ts(e)}var mt;const k=[0,0];let E=mt=class extends xi{constructor(e){super(e),this._viewpoint2D={center:bt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new $t,this.id=0,this.inverseTransform=rt(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=rt(),this.transformNoRotation=rt(),this.displayMat3=ot(),this.displayViewMat3=ot(),this.viewMat3=ot(),this.viewMat2d=Ri(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=L(i,e.viewpoint),this._set("size",it(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new mt({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return ht(t)?H(e,t,this.inverseTransform):(k[0]=t,k[1]=i,H(e,k,this.inverseTransform))}toScreen(e,t,i){return ht(t)?H(e,t,this.transform):(k[0]=t,k[1]=i,H(e,k,this.transform))}toScreenNoRotation(e,t,i){return ht(t)?H(e,t,this.transformNoRotation):(k[0]=t,k[1]=i,H(e,k,this.transformNoRotation))}wrapMapCoordinate(e,t){it(e,t);const[i]=t,[s]=this.center,{extent:a,spatialReference:n}=this;let{xmin:o,xmax:r}=a;if(n.isWrappable){const c=ni(n)/2;o=Math.max(o,s-c),r=Math.min(r,s+c)}return(i<o||i>r)&&(e[0]=Oi(i,s,n)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,a=this._get("size");return oi(e,i,a,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,a=this._get("pixelRatio")||1,n=this._get("size"),o=new I({targetGeometry:new x(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",o),!n||!t||!i)return;this.resolution=ri(o),this.rotation=s,this.scale=i,this.spatialReference=t,it(this.center,e);const r=n[0]!==0?2/n[0]:0,c=n[1]!==0?-2/n[1]:0;Di(this.displayMat3,r,0,0,0,c,0,-1,1,1);const p=Pi(this.viewMat3),u=Nt(n[0]/2,n[1]/2),m=Nt(-n[0]/2,-n[1]/2),d=Ti(s);Ct(p,p,u),zi(p,p,d),Ct(p,p,m),ki(this.displayViewMat3,this.displayMat3,p);const w=Si(this.viewMat2d,u);return bi(w,w,d),$i(w,w,m),hi(this.extent,o,n),li(this.transform,o,n,a),Vi(this.inverseTransform,this.transform),pi(this.transformNoRotation,o,n,a),this.worldScreenWidth=ci(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};h([l({readOnly:!0})],E.prototype,"id",void 0),h([l({value:1,json:{write:!0}})],E.prototype,"pixelRatio",null),h([l({json:{write:!0}})],E.prototype,"size",null),h([l()],E.prototype,"spatialReference",void 0),h([l({type:I,json:{write:!0}})],E.prototype,"viewpoint",null),E=mt=h([S("esri.views.2d.ViewState")],E);const Ht=E;var gt,_t;let O=gt=class extends P{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new gt({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};h([l()],O.prototype,"left",void 0),h([l()],O.prototype,"top",void 0),h([l()],O.prototype,"right",void 0),h([l()],O.prototype,"bottom",void 0),O=gt=h([S("esri.views.2d.PaddedViewState.Padding")],O);let q=_t=class extends Ht{constructor(...e){super(...e),this.paddedViewState=new Ht,this._updateContent=(()=>{const t=bt();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const a=this.paddedViewState;ii(t,s.left+s.right,s.top+s.bottom),si(t,i,t),it(a.size,t);const n=a.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(b(()=>[this.size,this.padding],()=>this._updateContent(),xt)),this.padding=new O,this.size=[0,0]}set padding(e){this._set("padding",e||new O)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;const t=this._viewpoint2D;if(this._get("padding")){const i=e.clone();di(i,e,this._get("size"),this._get("padding"));const s=i.targetGeometry;t.center[0]=s.x,t.center[1]=s.y,t.rotation=i.rotation,t.scale=i.scale,t.spatialReference=s.spatialReference}else{const i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}}clone(){return new _t({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};h([l()],q.prototype,"paddedViewState",void 0),h([l({type:O})],q.prototype,"padding",null),h([l()],q.prototype,"viewpoint",null),q=_t=h([S("esri.views.2d.PaddedViewState")],q);const Rt=q;let Ft=class{constructor(t){this._view=t,this.viewpoint=new I({targetGeometry:new x,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return ui(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,i){i.pan=Li(this.center,t.center);let s=Math.abs(t.rotation-this.rotation);s=s>=180?360-s:s,i.rotate=Mi(s),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,s){const{pan:a,rotate:n,zoom:o,zoomOffset:r}=s,{center:c}=this;c.spatialReference=t.center.spatialReference,c.x=J(t.center.x,i.center.x,a),c.y=J(t.center.y,i.center.y,a),this.viewpoint.scale=J(t.scale,i.scale+r,o);let p=t.rotation;const u=i.rotation;Math.abs(u-p)>=180&&(p+=360*(p<u?1:-1)),this.viewpoint.rotation=J(p,u,n)}copyFrom(t){L(this.viewpoint,t.viewpoint),this._view=t.view}};const qt=2e3,es=64;let is=class{constructor(t){this._view=t,this._animation=new Ie(()=>new Ft(this._view)),this._current=new Ft(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,s={}){L(this._current.viewpoint,t),L(this._source.viewpoint,t),L(this._target.viewpoint,i),this._animation.update(this._source,this._target,s)}applyRatio(t,i){this._animation.cameraAt(i,this._current),L(t,this._current.viewpoint)}},j=class extends P{constructor(t){super(t),this._animation=null,this._destinationViewState=new Rt,this.updateFunction=null,this.easing=Ni.ease,this.viewpoint=new I({targetGeometry:new x,scale:0,rotation:0}),this._updateTask=Mt({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new is(t.view)}destroy(){this._updateTask=dt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,s){this.stop();const a=this.viewpoint;L(a,i);const n=(typeof(s==null?void 0:s.easing)=="string"?Zi(s.easing):s==null?void 0:s.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(i.scale,o.scale)*es,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:s==null?void 0:s.duration,maxDuration:(s==null?void 0:s.animationMode)==="auto"?kt(1/0):(s==null?void 0:s.maxDuration)??ee.maxDuration,speedFactor:s==null?void 0:s.speedFactor,easing:typeof n=="function"?c=>n(c):void 0}),(s==null?void 0:s.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,ss(this._transition.animation,s,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:kt(0)}));const r=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new ut({target:t.clone()}),a=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var s,a;const i=this.animation;if(i&&i.state!==ut.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(s=this.animation)==null||s.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,r=o>0?n/o:1,c=r>=1;this._transition.applyRatio(this.viewpoint,r),c&&((a=this.animation)==null||a.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function ss(e,t,i,s){if((t==null?void 0:t.duration)!=null)return!0;const{time:a,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1,r=(t==null?void 0:t.maxDuration)??ee.maxDuration/o;if(D("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",a),console.log("adjusted max duration:	",r),console.log("is linear:",n)),a>r)return D("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${r/1e3}s`),!1;if(n){const p=bt(),u=Z(...s.toScreen(p,...i.center)),m=Z(...i.toScreen(p,...s.center)),d=m!=null&&m.x>-(1.5-.5)*i.size[0]&&m.x<(1.5+.5)*i.size[0]&&m.y>-(1.5-.5)*i.size[1]&&m.y<(1.5+.5)*i.size[1],w=u!=null&&u.x>-(1.5-.5)*s.size[0]&&u.x<(1.5+.5)*s.size[0]&&u.y>-(1.5-.5)*s.size[1]&&u.y<(1.5+.5)*s.size[1];if(D("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,d),console.log(`start is within ${1.5} screens at dest view:`,w)),a>qt/o&&!d&&!w)return D("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${qt/1e3/o}s, or
  - shorter than ${r/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${r/1e3}s and the start point is close enough to the destination screen`),!1}return!0}h([l()],j.prototype,"easing",void 0),h([l()],j.prototype,"view",void 0),h([l()],j.prototype,"viewpoint",void 0),j=h([S("esri.views.2d.AnimationManager")],j);const as=j;let ns=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{var o,r;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:a,state:{id:n}}=this.view;i.forEach(this._updateLayerView,this),a!=null&&(a.lastUpdateId!==n&&(a.viewChange(),a.lastUpdateId=n),a.updateRequested&&a.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==n&&(s.viewChange(),s.lastUpdateId=n),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((r=this._frameTaskHandle)==null||r.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Rt,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=b(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Mt(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var a;if(!t.attached)return void this.requestUpdate();const i=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0),s!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((a=t.layerViews)==null||a.forEach(this._updateLayerView,this))}},st=class extends P{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,t){if(!e)return void R.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new ut;this.view.animation=i,await Se(()=>this.view.ready,t);const s={...t,animate:(t==null?void 0:t.animate)??!Gi(),animationMode:(t==null?void 0:t.animationMode)??"auto"},{extent:a,spatialReference:n,size:o,viewpoint:r,constraints:c,padding:p,allLayerViews:u}=this.view,m=mi(e,{extent:a,spatialReference:n,size:o,viewpoint:r,constraints:c,padding:p,allLayerViews:u,pickClosestTarget:(t==null?void 0:t.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},s.animate?this._gotoAnimated(m,s):this._gotoImmediate(m,s)}_gotoImmediate(e,t){const i=this._gotoTask,s=this.view.animation,a=e.then(n=>{if(Ot(t),i!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=n,s.finish()});return this._cancellableGoTo(i,s,a,t)}_gotoAnimated(e,t){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const a=e.then(n=>{if(Ot(t),i!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");return s.update(n),this.view.animationManager.animate(s,this.view.viewpoint,t),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,a,t)}_cancellableGoTo(e,t,i,s){const a=()=>e===this._gotoTask;return Re(i,s).finally(()=>{a()&&(t.done||t.stop())})}};h([l({constructOnly:!0})],st.prototype,"view",void 0),st=h([S("esri.views.2d.GoToManager")],st);function v(){return Promise.all([_(()=>import("./webglDeps-CIb9ipkP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url),_(()=>import("./mapViewDeps-1jPcgj0b.js"),__vite__mapDeps([15,2,6,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,4,127,128,129,130,3,5,1,7,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,11,146,147,148,149,10,13,150,151,152,153,154,155,156,157,12,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,8,9,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210]),import.meta.url)])}const W=()=>v().then(()=>_(()=>import("./TileLayerView2D-RnD2dwfm.js"),__vite__mapDeps([211,18,6,2,38,24,36,25,26,27,66,67,61,37,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,103,104,105,110,107,108,106,109,111,112,113,114,115,116,117,118,119,120,121,122,123,125,141,142,55,57,58,140,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,59,60,63,64,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,143,133,134,135,7,136,4,3,145,131,5,1,132,11,146,147,148,149,10,13,150,151,152,138,130,153,154,155,157,158,159,160,161,127,128,129,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,144,178,183,189,190,139,191,186,126,137,194,195,196,198,199,212,213,203,214,215,216,217,201,202,208,218,219,220,221,222,223,224,225,204,205,206,207,209,210]),import.meta.url)),F=()=>v().then(()=>_(()=>import("./FeatureLayerView2D-BjyOJWH7.js").then(e=>e.F),__vite__mapDeps([226,18,6,2,67,61,37,38,24,36,25,26,27,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,48,141,142,55,57,58,153,154,109,155,227,63,64,79,80,81,82,83,43,228,229,209,230,231,133,134,135,7,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,143,113,4,3,215,216,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,159,208,186,232,204,233,191,234,235,236,163,120,121,237,238,107,108,106,110,112,118,124,125,189,190,139,239,240,241,242,222,225,218,219]),import.meta.url)),jt={"base-dynamic":()=>v().then(()=>_(()=>import("./BaseDynamicLayerView2D-5OnUdqo4.js"),__vite__mapDeps([243,18,6,2,244,145,113,131,111,3,4,5,1,7,132,119,117,11,146,47,20,17,19,21,22,23,24,25,26,27,28,29,30,31,16,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,147,148,149,10,13,150,151,143,136,115,114,152,140,141,142,133,134,135,138,116,130,153,154,109,155,214,215,216,245,205,206,213,208,186,218,219,175,176,204,177,144,170,171,172,173,207,209,210]),import.meta.url)),"base-tile":W,"bing-maps":W,catalog:()=>v().then(()=>_(()=>import("./CatalogLayerView2D-cC6sSWy_.js"),__vite__mapDeps([246,18,6,2,17,19,214,34,140,20,21,22,23,24,25,26,27,28,29,30,31,16,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,133,134,135,7,136,113,4,3,215,216,247,218]),import.meta.url)),"catalog-dynamic-group":()=>v().then(()=>_(()=>import("./CatalogDynamicGroupLayerView2D-wqeH8K2o.js"),__vite__mapDeps([248,18,6,2,17,19,214,34,140,20,21,22,23,24,25,26,27,28,29,30,31,16,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,133,134,135,7,136,113,4,3,215,216,249,218]),import.meta.url)),"catalog-footprint":()=>v().then(()=>_(()=>import("./CatalogFootprintLayerView2D-CBH5KBID.js"),__vite__mapDeps([250,18,6,2,226,67,61,37,38,24,36,25,26,27,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,48,141,142,55,57,58,153,154,109,155,227,63,64,79,80,81,82,83,43,228,229,209,230,231,133,134,135,7,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,143,113,4,3,215,216,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,159,208,186,232,204,233,191,234,235,236,163,120,121,237,238,107,108,106,110,112,118,124,125,189,190,139,239,240,241,242,222,225,218,219,251,175,176,205,206,177,144,170,171,172,173,207,210]),import.meta.url)),csv:F,"geo-rss":()=>v().then(()=>_(()=>import("./GeoRSSLayerView2D-C4uo8GMP.js"),__vite__mapDeps([252,18,6,2,68,69,17,19,25,26,27,24,36,70,22,23,47,61,37,38,62,49,45,46,71,65,253,254,72,73,56,74,50,75,41,34,35,168,255,256,257,234,258,67,76,48,191,237,43,120,121,259,260,261,262,263,264,164,165,122,103,104,105,112,123,265,238,231,81,82,214,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,55,57,58,59,60,63,64,66,77,78,79,80,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,133,134,135,7,136,113,4,3,215,216,200,201,202,127,128,129,130,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,153,154,109,155,189,107,108,106,110,118,190,139,186,170,171,172,173,198,161,162,163,166,167,169,174,199,218,175,176,204,205,206,177,144,207,208,209,210]),import.meta.url)),feature:F,geojson:F,graphics:()=>v().then(()=>_(()=>import("./GraphicsLayerView2D-C5TlhDTx.js"),__vite__mapDeps([266,18,6,2,67,61,37,38,24,36,25,26,27,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,133,134,135,7,79,63,64,80,81,82,83,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,55,57,58,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,113,4,3,215,216,200,201,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,153,154,109,155,189,107,108,106,110,112,118,120,121,190,139,191,186,170,171,172,173,198,164,165,122,103,123,161,162,163,166,167,168,169,174,199,239,218,175,176,204,205,206,177,144,207,208,209,210]),import.meta.url)),group:()=>v().then(()=>_(()=>import("./GroupLayerView2D-B2SkorqO.js"),__vite__mapDeps([267,18,6,2,214,17,19,34,140,20,21,22,23,24,25,26,27,28,29,30,31,16,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,133,134,135,7,136,113,4,3,215,216,268,218]),import.meta.url)),imagery:()=>v().then(()=>_(()=>import("./ImageryLayerView2D-BWlDBi1y.js"),__vite__mapDeps([269,18,6,2,67,61,37,38,24,36,25,26,27,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,66,270,1,3,4,11,132,271,272,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,55,57,58,59,60,63,64,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,146,147,113,148,111,117,149,140,141,142,143,133,134,135,7,136,145,131,5,119,10,13,150,151,115,114,152,138,116,130,153,154,109,155,214,215,216,198,164,165,107,108,106,110,112,118,120,121,122,103,104,105,123,161,127,128,129,162,163,166,167,168,169,170,171,172,173,174,189,190,139,191,186,199,217,201,202,203,244,213,245,205,206,208,273,274,228,229,209,230,225,218,219,175,176,204,177,144,207,210]),import.meta.url)),"imagery-tile":()=>v().then(()=>_(()=>import("./ImageryTileLayerView2D-BMjz3qvP.js"),__vite__mapDeps([275,18,6,2,17,19,276,25,26,27,270,67,61,37,38,24,36,62,47,68,69,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,1,3,4,11,132,271,272,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,55,57,58,59,60,63,64,66,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,146,147,113,148,111,117,149,140,141,142,143,133,134,135,7,136,145,131,5,119,10,13,150,151,115,114,152,138,116,130,153,154,109,155,214,215,216,177,175,176,144,170,171,172,173,277,203,205,206,278,273,208,186,279,228,229,209,230,225,218,219,204,207,210]),import.meta.url)),kml:()=>v().then(()=>_(()=>import("./KMLLayerView2D-ms9FC4XC.js"),__vite__mapDeps([280,18,6,2,25,26,27,17,19,37,38,24,36,92,47,62,93,94,281,68,69,70,22,23,61,49,45,46,71,65,75,260,261,72,73,56,74,50,41,34,35,254,168,255,256,257,234,258,67,76,48,191,237,43,120,121,259,262,263,264,164,165,122,103,104,105,112,123,265,238,253,231,81,82,172,66,213,151,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,55,57,58,59,60,63,64,77,78,79,80,83,84,85,86,87,88,89,90,91,14,95,96,97,98,99,100,101,102,117,143,4,3,244,145,113,131,111,5,1,7,132,119,11,146,147,148,149,10,13,150,136,115,114,152,140,141,142,133,134,135,138,116,130,153,154,109,155,214,215,216,200,201,202,127,128,129,203,189,107,108,106,110,118,190,139,186,170,171,173,198,161,162,163,166,167,169,174,199,218,273,179,12,277,193,8,9,194,195,196,160,125,197,175,176,204,205,206,177,144,207,208,209,210]),import.meta.url)),"knowledge-graph":()=>v().then(()=>_(()=>import("./KnowledgeGraphLayerView2D-DS_EzXuY.js"),__vite__mapDeps([282,18,6,2,17,19,34,214,140,20,21,22,23,24,25,26,27,28,29,30,31,16,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,133,134,135,7,136,113,4,3,215,216,218]),import.meta.url)),"link-chart":()=>v().then(()=>_(()=>import("./KnowledgeGraphLayerView2D-DS_EzXuY.js"),__vite__mapDeps([282,18,6,2,17,19,34,214,140,20,21,22,23,24,25,26,27,28,29,30,31,16,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,133,134,135,7,136,113,4,3,215,216,218]),import.meta.url)),"knowledge-graph-sublayer":F,"map-image":()=>v().then(()=>_(()=>import("./MapImageLayerView2D-CHtwrVxi.js"),__vite__mapDeps([283,18,6,2,17,19,66,67,61,37,38,24,36,25,26,27,62,47,68,69,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,244,145,113,131,111,3,4,5,1,7,132,119,117,11,146,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,55,57,58,59,60,63,64,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,147,148,149,10,13,150,151,143,136,115,114,152,140,141,142,133,134,135,138,116,130,153,154,109,155,214,215,216,198,164,165,107,108,106,110,112,118,120,121,122,103,104,105,123,161,127,128,129,162,163,166,167,168,169,170,171,172,173,174,189,190,139,191,186,199,217,201,202,203,245,205,206,213,208,218,284,285,221,222,224,228,229,209,230,219,220,223,225,175,176,204,177,144,207,210]),import.meta.url)),"map-notes":()=>v().then(()=>_(()=>import("./MapNotesLayerView2D-C4KPLIQ-.js"),__vite__mapDeps([286,18,6,2,67,61,37,38,24,36,25,26,27,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,133,134,135,7,79,63,64,80,81,82,83,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,55,57,58,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,113,4,3,215,216,200,201,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,153,154,109,155,189,107,108,106,110,112,118,120,121,190,139,191,186,170,171,172,173,198,164,165,122,103,123,161,162,163,166,167,168,169,174,199,218,175,176,204,205,206,177,144,207,208,209,210]),import.meta.url)),media:()=>v().then(()=>_(()=>import("./MediaLayerView2D-Dr2mZJsG.js"),__vite__mapDeps([287,18,6,2,61,37,38,24,36,25,26,27,62,47,67,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,261,254,168,255,256,257,234,258,48,191,237,43,120,121,259,260,262,263,264,164,165,122,103,104,105,112,123,265,238,253,288,92,93,94,199,171,151,289,116,110,107,108,106,109,111,113,114,115,117,118,119,125,141,142,55,57,58,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,59,60,63,64,66,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,14,95,96,97,98,99,100,101,102,143,133,134,135,7,136,4,3,145,131,5,1,132,11,146,147,148,149,10,13,150,152,138,130,153,154,155,157,158,159,160,161,127,128,129,162,163,166,167,169,170,172,173,174,175,176,177,144,178,183,189,190,139,186,126,137,194,195,196,198,208,184,185,290,214,215,216,218,204,205,206,207,209,210]),import.meta.url)),"ogc-feature":()=>v().then(()=>_(()=>import("./OGCFeatureLayerView2D-B74YNo1A.js"),__vite__mapDeps([291,18,6,2,226,67,61,37,38,24,36,25,26,27,62,47,68,69,17,19,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,48,141,142,55,57,58,153,154,109,155,227,63,64,79,80,81,82,83,43,228,229,209,230,231,133,134,135,7,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,143,113,4,3,215,216,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,159,208,186,232,204,233,191,234,235,236,163,120,121,237,238,107,108,106,110,112,118,124,125,189,190,139,239,240,241,242,222,225,218,219,292,175,176,205,206,177,144,170,171,172,173,207,210]),import.meta.url)),"open-street-map":W,"oriented-imagery":F,route:()=>v().then(()=>_(()=>import("./RouteLayerView2D-B_ZT73Sl.js"),__vite__mapDeps([293,18,6,2,17,19,51,294,67,61,37,38,24,36,25,26,27,62,47,68,69,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,295,296,133,134,135,7,79,63,64,80,81,82,83,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,52,53,54,55,57,58,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,141,142,143,113,4,3,215,216,200,201,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,153,154,109,155,189,107,108,106,110,112,118,120,121,190,139,191,186,170,171,172,173,198,164,165,122,103,123,161,162,163,166,167,168,169,174,199,218,175,176,204,205,206,177,144,207,208,209,210]),import.meta.url)),stream:()=>v().then(()=>_(()=>import("./StreamLayerView2D-CrnvulAx.js"),__vite__mapDeps([297,18,6,2,17,19,231,61,37,38,24,36,25,26,27,62,47,67,68,69,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,81,82,226,48,141,142,55,57,58,153,154,109,155,227,63,64,79,80,83,43,228,229,209,230,133,134,135,7,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,143,113,4,3,215,216,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,159,208,186,232,204,233,191,234,235,236,163,120,121,237,238,107,108,106,110,112,118,124,125,189,190,139,239,240,241,242,222,225,218,219,298,175,176,205,206,177,144,170,171,172,173,207,210]),import.meta.url)),"subtype-group":()=>v().then(()=>_(()=>import("./SubtypeGroupLayerView2D-DyGOF9tv.js"),__vite__mapDeps([299,18,6,2,17,19,226,67,61,37,38,24,36,25,26,27,62,47,68,69,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,48,141,142,55,57,58,153,154,109,155,227,63,64,79,80,81,82,83,43,228,229,209,230,231,133,134,135,7,136,214,140,20,21,28,29,30,31,16,32,33,39,40,42,44,51,52,53,54,59,60,66,77,78,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,143,113,4,3,215,216,202,127,128,129,130,104,105,5,1,131,111,132,119,117,203,145,11,146,147,148,149,10,13,150,151,115,114,152,138,116,159,208,186,232,204,233,191,234,235,236,163,120,121,237,238,107,108,106,110,112,118,124,125,189,190,139,239,240,241,242,222,225,218,219,175,176,205,206,177,144,170,171,172,173,207,210]),import.meta.url)),tile:W,"vector-tile":()=>v().then(()=>_(()=>import("./VectorTileLayerView2D-DTV-ocot.js"),__vite__mapDeps([300,18,6,2,168,17,19,38,24,36,25,26,27,62,37,47,157,301,204,31,22,23,118,4,3,183,182,125,139,136,205,206,208,116,186,78,16,262,263,302,151,20,21,28,29,30,32,33,34,35,39,40,41,42,43,44,45,46,48,49,50,51,52,53,54,55,56,57,58,59,60,61,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,1,11,149,150,143,132,148,111,110,140,141,142,133,134,135,7,113,203,145,131,5,119,117,146,147,10,13,115,114,152,138,130,153,154,109,155,303,304,305,103,104,105,207,214,215,216,218,175,176,177,144,170,171,172,173,209,210]),import.meta.url)),video:()=>v().then(()=>_(()=>import("./VideoLayerView2D-9rlfYtbH.js"),__vite__mapDeps([306,18,6,2,45,46,47,67,61,37,38,24,36,25,26,27,62,68,69,17,19,70,22,23,49,71,65,72,73,56,74,50,75,41,34,35,76,307,66,60,63,64,308,242,142,55,57,58,309,310,311,191,312,290,151,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,59,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,117,152,170,171,172,173,177,175,176,114,144,116,130,145,113,131,111,3,4,5,1,7,132,119,11,146,147,148,149,10,13,150,143,136,115,140,141,133,134,135,138,153,154,109,155,214,215,216,200,201,202,127,128,129,104,105,203,189,107,108,106,110,112,118,120,121,190,139,186,198,164,165,122,103,123,161,162,163,166,167,168,169,174,199,218,204,205,206,207,208,209,210]),import.meta.url)),wcs:()=>v().then(()=>_(()=>import("./ImageryTileLayerView2D-BMjz3qvP.js"),__vite__mapDeps([275,18,6,2,17,19,276,25,26,27,270,67,61,37,38,24,36,62,47,68,69,70,22,23,49,45,46,71,65,72,73,56,74,50,75,41,34,35,76,1,3,4,11,132,271,272,20,21,28,29,30,31,16,32,33,39,40,42,43,44,48,51,52,53,54,55,57,58,59,60,63,64,66,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,146,147,113,148,111,117,149,140,141,142,143,133,134,135,7,136,145,131,5,119,10,13,150,151,115,114,152,138,116,130,153,154,109,155,214,215,216,177,175,176,144,170,171,172,173,277,203,205,206,278,273,208,186,279,228,229,209,230,225,218,219,204,207,210]),import.meta.url)),"web-tile":W,wfs:F,wms:()=>v().then(()=>_(()=>import("./WMSLayerView2D-CCanJsuf.js"),__vite__mapDeps([313,18,6,2,17,19,37,38,24,36,25,26,27,244,145,113,131,111,3,4,5,1,7,132,119,117,11,146,47,20,21,22,23,28,29,30,31,16,32,33,34,35,39,40,41,42,43,44,45,46,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,147,148,149,10,13,150,151,143,136,115,114,152,140,141,142,133,134,135,138,116,130,153,154,109,155,214,215,216,245,205,206,213,208,186,218,219,314,315,228,229,209,230,175,176,204,177,144,170,171,172,173,207,210]),import.meta.url)),wmts:()=>v().then(()=>_(()=>import("./WMTSLayerView2D-D--kAYoa.js"),__vite__mapDeps([316,18,6,2,38,24,36,25,26,27,212,62,37,47,20,17,19,21,22,23,28,29,30,31,16,32,33,34,35,39,40,41,42,43,44,45,46,48,49,50,51,52,53,54,55,56,57,58,59,60,61,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,213,151,117,143,4,3,150,136,132,145,113,131,111,5,1,7,119,11,146,147,148,149,10,13,115,114,152,140,141,142,133,134,135,138,116,130,153,154,109,155,203,214,215,216,208,186,218,219,175,176,204,205,206,177,144,170,171,172,173,207,209,210]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function os(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new $(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const Kt={hasLayerViewModule:e=>jt[e.type]!=null,importLayerView:e=>{const t=jt[e.type];if(t==null)throw os(e);return t(e)}};function rs(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let a=Number.POSITIVE_INFINITY,n=0,o=0;const r=[0,0],c=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const p of c)for(let u=0;u<p.length-1;u++){Ui(r,s,p,u);const m=ai(s,r);m<a&&(a=m,n=r[0],o=r[1])}return{coordinate:new x({x:n,y:o,spatialReference:i}),distance:a}}var wt;let N=wt=class extends Vt(P){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return te(this.geometry,this.spatialReference)}catch(e){return R.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?ne(this.normalizedGeometry,i):oe(this.normalizedGeometry,i))return e;const{coordinate:s}=rs(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){var e,t;return new wt({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};h([l({constructOnly:!0})],N.prototype,"geometry",void 0),h([l({readOnly:!0})],N.prototype,"normalizedGeometry",null),h([l({constructOnly:!0})],N.prototype,"spatialReference",void 0),N=wt=h([S("esri.views.2d.constraints.GeometryConstraint")],N);var vt;let B=vt=class extends Vt(P){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new vt({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};h([l()],B.prototype,"enabled",void 0),h([l()],B.prototype,"rotationEnabled",void 0),B=vt=h([S("esri.views.2d.constraints.RotationConstraint")],B);const pe=B;var yt;let M=yt=class extends Vt(P){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:a,maxZoom:n}=this,o=-1,r=-1,c=!1,p=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(u=>u.clone()),t.sort((u,m)=>m.scale-u.scale),t.forEach((u,m)=>u.level=m);for(const u of t)!c&&i>0&&i>=u.scale&&(o=u.level,c=!0),!p&&s>0&&s>=u.scale&&(r=e?e.level:-1,p=!0),e=u;a===-1&&(a=i===0?0:o),n===-1&&(n=s===0?t.length-1:r),a=Math.max(a,0),a=Math.min(a,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),a>n&&([a,n]=[n,a]),i=t[a].scale,s=t[n].scale,t.splice(0,a),t.splice(n-a+1,t.length),t.forEach((u,m)=>{this._lodByScale[u.scale]=u,this._scales[m]=u.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,a=e.targetGeometry,n=t&&t.targetGeometry,o=s!==0&&e.scale<s,r=i!==0&&e.scale>i;if(o||r){const c=r?i:s;if(t&&n){const p=(c-t.scale)/(e.scale-t.scale);a.x=n.x+(a.x-n.x)*p,a.y=n.y+(a.y-n.y)*p}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),s=Math.ceil(e);return t[i]+(e-i)*(t[s]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let a=0;a<t.length-1;a++){if(i=t[a],s=t[a+1],s===e)return a+this.effectiveMinZoom+1;if(i>e&&s<e)return a+this.effectiveMinZoom+1-(e-s)/(i-s)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new yt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};h([l({readOnly:!0})],M.prototype,"effectiveLODs",void 0),h([l({readOnly:!0})],M.prototype,"effectiveMinZoom",void 0),h([l({readOnly:!0})],M.prototype,"effectiveMaxZoom",void 0),h([l({readOnly:!0})],M.prototype,"effectiveMinScale",void 0),h([l({readOnly:!0})],M.prototype,"effectiveMaxScale",void 0),h([l()],M.prototype,"lods",void 0),h([l()],M.prototype,"minZoom",void 0),h([l()],M.prototype,"maxZoom",void 0),h([l()],M.prototype,"minScale",void 0),h([l()],M.prototype,"maxScale",void 0),h([l()],M.prototype,"snapToZoom",void 0),M=yt=h([S("esri.views.2d.constraints.ZoomConstraint")],M);const ce=M,hs={base:null,key:"type",typeMap:{extent:$t,polygon:Hi}};let y=class extends P{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Tt}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,i;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var t,i;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((t=this.view)==null?void 0:t.constraintsInfo.spatialReference)===e.spatialReference?e:new N({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new pe({rotationEnabled:this.rotationEnabled})}get _zoom(){var r;const e=this._get("_zoom"),t=this.lods||((r=this.view)==null?void 0:r.constraintsInfo.lods),i=this.minZoom,s=this.maxZoom,a=this.minScale,n=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===s&&e.minScale===a&&e.maxScale===n&&e.snapToZoom===o?e:new ce({lods:t,minZoom:i,maxZoom:s,minScale:a,maxScale:n,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(i=>i.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>{var i;return(i=t.applyPanConstraint)==null?void 0:i.call(t,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};h([l({readOnly:!0})],y.prototype,"effectiveLODs",null),h([l({readOnly:!0})],y.prototype,"effectiveMinScale",null),h([l({readOnly:!0})],y.prototype,"effectiveMaxScale",null),h([l({readOnly:!0})],y.prototype,"effectiveMinZoom",null),h([l({readOnly:!0})],y.prototype,"effectiveMaxZoom",null),h([l({types:hs,value:null})],y.prototype,"geometry",null),h([l({type:[Ee]})],y.prototype,"lods",void 0),h([l()],y.prototype,"minScale",void 0),h([l()],y.prototype,"maxScale",void 0),h([l()],y.prototype,"minZoom",void 0),h([l()],y.prototype,"maxZoom",void 0),h([l()],y.prototype,"rotationEnabled",void 0),h([l()],y.prototype,"snapToZoom",void 0),h([l({type:Tt})],y.prototype,"customConstraints",void 0),h([l()],y.prototype,"view",void 0),h([l({readOnly:!0})],y.prototype,"version",null),h([l({type:N,readOnly:!0})],y.prototype,"_geometry",null),h([l({type:pe})],y.prototype,"_rotation",null),h([l({readOnly:!0,type:ce})],y.prototype,"_zoom",null),y=h([S("esri.views.2d.MapViewConstraints")],y);const de=y;let f=class extends P{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([b(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},xt)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new x({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(a){return void R.getLogger(this).error(new $("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:a}))}const s=this.viewpoint;It(s,s,i),this.viewpoint=s}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void R.getLogger(this).error(new $("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(a){return void R.getLogger(this).error(new $("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:a}))}const s=this.viewpoint;gi(s,s,i,this.state.size,{constraints:this.constraints}),this.viewpoint=s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;_i(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.viewpoint;At(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,s;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?s=new $("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(s=new $("mapview:invalid-viewpoint","geometry not defined"))}catch(o){s=new $("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(s)return void R.getLogger(this).error(s);this._scaleBeforeChangingSpatialReference=null;const a=new I({targetGeometry:new x,scale:0,rotation:0});L(a,i),(n=this.constraints)==null||n.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this._set("viewpoint",a)}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var a,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((a=this.constraints)==null?void 0:a.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const s=this.viewpoint;At(s,s,i),this.viewpoint=s,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:s}=this,a=this._get("center"),n=this._get("extent"),o=this._get("scale"),r=this._get("rotation"),c=this._get("viewpoint"),p=this._get("zoom"),u=p!=null&&s!=null&&s.zoomToScale(p)||void 0;let m,d,w;const G=c==null?void 0:c.rotation,T=c==null?void 0:c.targetGeometry;(T==null?void 0:T.type)==="extent"?m=T:(T==null?void 0:T.type)==="point"&&(d=T,w=c==null?void 0:c.scale);const z=n??m;return{center:a??d??(z==null?void 0:z.center),rotation:r??G,scale:(o??u??w??(z&&ae(z,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,s,a){var o;const n=t.targetGeometry;try{this._project(t,s)}catch(r){R.getLogger(this).warn(new Pt("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:s,error:r})),t.targetGeometry=a||new x({x:0,y:0,spatialReference:s})}(o=this.constraints)==null||o.fit(t),this._set("state",new Rt({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:s,rotation:a,scale:n}=this.state.paddedViewState,o=new x({x:t,y:i,spatialReference:s});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",a),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var c;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const p=i.viewpoint.clone();p.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=p}const s=i.clone(),[a,n]=i.center;let o=null;try{o=this._project(new x({x:a,y:n,spatialReference:i.spatialReference}),t)}catch(p){Ii()||R.getLogger(this).warn(new Pt("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:p}))}o||(o=new x({x:0,y:0,spatialReference:t}));const r=It(new I({targetGeometry:new x,scale:0,rotation:0}),i.viewpoint,o);s.viewpoint=r;try{const u=[i.size[0]/2,i.size[1]/2],m=[u[0]+20,u[1]],d=i.toMap([0,0],m),{x:w,y:G}=this._project(new x({x:d[0],y:d[1],spatialReference:i.spatialReference}),t);d[0]=w,d[1]=G,s.toScreen(d,d);const T=wi(u,d,m),z=Math.hypot(d[0]-u[0],d[1]-u[1])/20;!Number.isFinite(z)||Math.abs(z)>4?(r.rotation=0,r.targetGeometry=new x({x:0,y:0,spatialReference:t})):(r.scale*=z,r.scale>D("mapview-srswitch-adjust-rotation-scale-threshold")?r.rotation=0:r.rotation+=Number.isFinite(T)?T:0)}catch{}(c=this._get("constraints"))==null||c.constrain(r,void 0),this._get("state").viewpoint=r}resize(t,i){var o;if(!this.ready)return;const s=this.state;let a=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();s.size=[t,i],vi(a,a,n,this.state.paddedViewState.size,this.resizeAlign),a=((o=this.constraints)==null?void 0:o.constrain(a,void 0))??a,this.state.viewpoint=a}toMap(t){if(!this.ready)return null;const i=[0,0],[s,a]=this.state.toMap(i,[t.x,t.y]),n=this.state.spatialReference;return new x({x:s,y:a,spatialReference:n})}toScreen(t,i){if(!this.ready)return null;const s=this._project(t,this.state.spatialReference),a=[s.x,s.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(a,a),this.state.toScreen(a,a),Z(a[0],a[1])}_project(t,i){var n;const s=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!s)return null;if(i.imageCoordinateSystem||(n=s.spatialReference)!=null&&n.imageCoordinateSystem||Ai(i,s.spatialReference))return t;const a=te(s,i);if(!a)throw new $("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:i});return ls(t)?(t.targetGeometry=a,t):a}};function ls(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}h([l({type:x})],f.prototype,"center",null),h([l()],f.prototype,"constraints",void 0),h([l({type:$t})],f.prototype,"extent",null),h([l({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],f.prototype,"padding",null),h([l()],f.prototype,"ready",void 0),h([l()],f.prototype,"resizeAlign",void 0),h([l({readOnly:!0})],f.prototype,"resolution",null),h([l({type:Number})],f.prototype,"rotation",null),h([l({type:Number})],f.prototype,"scale",null),h([l({readOnly:!0})],f.prototype,"state",void 0),h([l({type:I})],f.prototype,"viewpoint",null),h([l()],f.prototype,"zoom",null),f=h([S("esri.views.2d.ViewStateManager")],f);let Wt=class extends V{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(t,i){St(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},ps=class extends V{constructor(t,i,s){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",s,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:s}=i;if(s!==this.pointerType)return;t.stopPropagation();const{action:a,delta:n}=i,{view:o}=this,{mapViewNavigation:r}=o;switch(a){case"begin":{const{scale:c}=o;this._startScale=c,this._currentScale=c,this._previousDelta=n,r.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const c=1.015**n.y,p=this._startScale*c,u=p/this._currentScale;r.setViewpointImmediate(u),this._currentScale=p;break}case"end":{const{constraints:c}=o,{effectiveLODs:p,snapToZoom:u}=c;if(!u||!p)return void r.end();const m=c.snapScale(this._currentScale),d=(n.y>0?Math.max(m,c.snapToPreviousScale(this._startScale)):Math.min(m,c.snapToNextScale(this._startScale)))/this._currentScale;r.zoom(d).then(()=>{r.end()});break}}}},cs=class extends V{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",s,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new nt({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&St(s.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ds=class extends V{constructor(t,i,s){super(!0),this._view=t,this.pointerAction=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new nt({start:(n,o)=>{a.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{a.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{a.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&St(o.data,this.pointerAction)}),this.registerIncoming("drag",s,n=>this._dragEventSeparator.handle(n))}},us=class extends V{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new De,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([b(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Mt({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Jt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Ae(this._transformation)):(this._currentDevice=t.data.device,Ce(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(Ne(i))return;const s=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,n=gs*a*t;yi(s,s,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*_s*t,r=this._view.constraints.rotationEnabled?-i.heading*ms*t:0,c=this._view.size,p=[c[0]/2,c[1]];fi(s,s,o,r,p,c);const u=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=u}};const ms=.06,gs=.7,_s=6e-4;let ws=class extends V{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=a=>{const n=this._keyMap[a.data.key];if(a.modifiers.has("Meta")||a.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;a.stopPropagation(),a.preventDefault();const o=a.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const r=this._timeout===void 0,c=this._pressedKeys.size>0;r||c?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,this._handleKey),this.registerIncoming("key-up",s,this._handleKey),this.registerIncoming("blur",s,this._stopMovement),this._visibilityHandle=ie(a=>a?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},vs=class extends V{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleStop()),this._visibilityHandle=ie(a=>a?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection[t.data.key];if(this._pressed=a!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var K;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(K||(K={}));let ys=class extends V{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=K.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=K.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const a=this._keysToZoomAction[s],{mapViewNavigation:n}=this.view;let o=null;switch(a){case K.IN:o=n.zoomIn();break;case K.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const fs=.6;let xs=class extends V{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:a,deltaY:n}=t.data,o=1/fs**(1/60*n),r=i.zoom(o,[s,a]);r&&(this._canZoom=!1,r.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Ts=class extends V{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new nt({start:(s,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(s,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(s,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}},Ms=class extends V{constructor(t=X.maximumDoubleClickDelay,i=X.maximumDoubleClickDistance,s=X.maximumDoubleTouchDelay,a=X.maximumDoubleTouchDistance,n=Pe){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Z(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new nt({start:(o,r)=>this._dragStart(o,r),update:(o,r)=>this._dragUpdate(r),end:(o,r)=>this._dragEnd(r)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=dt(t.doubleTapTimeout)})}get hasPendingInputs(){return $e(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=dt(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:a}=i,{center:n}=s;this._dragStartCenter=n;const o=lt("begin",Z(0,0),s);this._doubleTapDrag.emit(o,void 0,a),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:a}=i,n=lt("update",Z(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:a}=i,n=lt("end",Z(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,s=Lt(i),a=this._pointerState.get(s),{pointerType:n}=i.native;if(a){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),Ze(a.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:s}=i.native,a=Lt(i),n=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(a),n);this._pointerState.set(a,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function lt(e,t,i){const{button:s,buttons:a,pointer:n,pointers:o,pointerType:r,timestamp:c}=i;return{action:e,delta:t,button:s,buttons:a,pointer:n,pointers:o,pointerType:r,timestamp:c}}const tt={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let C=class extends P{initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this.addHandles([Dt(()=>!e(),()=>this._disconnect()),Dt(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var t;return((t=this._inputManager)==null?void 0:t.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Qt(this._inputManager)}_connect(){const e=this.view.surface,t=new Ge(e,this.view.input),i=[new Ue,new He,new Fe,new qe(this.view.navigation),new Ms],s=new Bi({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new je],Zt.INTERNAL),s.installHandlers("navigation",[new Ts(this.view),new us(this.view),new xs(this.view),new Wt(this.view),new Wt(this.view,[tt.counter]),new cs(this.view,"primary"),new ws(this.view,tt.pan),new ys(this.view,tt.zoom),new vs(this.view,tt.rotate),new ds(this.view,"secondary"),new ps(this.view,"touch")],Zt.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,b(()=>{var a,n;return(n=(a=this.view)==null?void 0:a.navigation)==null?void 0:n.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},Jt)}get test(){}};h([l()],C.prototype,"view",void 0),h([l()],C.prototype,"latestPointerType",null),h([l()],C.prototype,"latestPointerLocation",null),h([l()],C.prototype,"multiTouchActive",null),C=h([S("esri.views.2d.input.MapViewInputManager")],C);const Ss=C,A={added:[],removed:[]},pt=new Set,bs=new Wi(0,0,0,0);function $s(e,t){const i=Ci(t);if(!i)return null;const[s,a]=i.valid;return e[2]>a?[Q([e[0],e[1],a,e[3]]),Q([s,e[1],s+e[2]-a,e[3]])]:e[0]<s?[Q([s,e[1],e[2],e[3]]),Q([a-(s-e[0]),e[1],a,e[3]])]:null}let Vs=class extends Me{constructor(t){super(),this._tiles=new Map,this._index=Yi(9,D("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||Fi(t)===0||qi(t)===0)return[];const i=$s(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const s of t.added)if(!this.has(s)){const a=new Gt(this.tileScheme,s);this._tiles.set(s,a),this._index.insert(a),i.added.push(a)}for(const s of t.removed)if(this.has(s)){const a=this.get(s);this._tiles.delete(s),this._index.remove(a),i.removed.push(a)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:s,lodInfo:a}=i,{level:n}=a;if(s.length>0)for(const{row:o,colFrom:r,colTo:c}of s)for(let p=r;p<=c;p++){const u=bs.set(n,o,a.normalizeCol(p),a.getWorldForColumn(p)).id;if(pt.add(u),!this.has(u)){const m=new Gt(this.tileScheme,u);this._tiles.set(u,m),this._index.insert(m),this.tiles.push(m),A.added.push(m)}}for(let o=this.tiles.length-1;o>=0;o--){const r=this.tiles[o];pt.has(r.id)||(this._tiles.delete(r.id),this.tiles.splice(o,1),this._index.remove(r),A.removed.push(r))}(A.added.length||A.removed.length)&&this.emit("update",A),ji.pool.release(i),pt.clear(),A.added.length=0,A.removed.length=0}};const et=e=>parseFloat(e)/100;function Rs(e,t,i){const s=typeof e.left=="string"?et(e.left)*t:e.left,a=typeof e.right=="string"?et(e.right)*t:e.right,n=typeof e.top=="string"?et(e.top)*i:e.top,o=typeof e.bottom=="string"?et(e.bottom)*i:e.bottom,r=n;return{xmin:s,xmax:Math.max(t-a,s),ymin:r,ymax:Math.max(i-o,n)}}function Ds(e,t,i,s){switch(t.type){case"rect":{const{width:a,height:n}=e,{xmin:o,xmax:r,ymin:c,ymax:p}=Rs(t,a,n),{x:u,y:m}=i;return u>o&&u<r&&m>c&&m<p}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||Ei(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?oe(t.geometry,s):ne(t.geometry,s))}}async function Ps(e,t,i){const s=he(t)?le(e,t):t;if(!e.ready||isNaN(s.x)||isNaN(s.y))return{screenPoint:s,results:[]};let a=new Set;const n=new Set;let o=!1,r=null,c=null;i!=null&&i.include?Yt(i.include,Bt(e,d=>{a.add(d),ct(d,w=>n.add(w))},(d,w)=>{n.add(d),a.add(w)},d=>{r||(r=new Set),r.add(d)},d=>a.add(d),()=>o=!0)):(o=!0,a=new Set(e.allLayerViews),a.forEach(d=>{ct(d,w=>n.add(w))})),i!=null&&i.exclude&&Yt(i.exclude,Bt(e,d=>{a.delete(d),ct(d,w=>n.delete(w))},d=>n.delete(d),d=>{c||(c=new Set),c.add(d)}));const p=e.toMap(s),u=e.allLayerViews.filter(d=>!d.suspended&&a.has(d)&&d.clips.every(w=>Ds(e,w,s,p))).reverse();let m=[...o?e.graphicsView.hitTest(p).map(d=>({type:"graphic",graphic:d,layer:null,mapPoint:p})):[],...await Promise.all(u.map(d=>d.hitTest(p,s)).toArray())].filter(zt).flat().filter(zt);return m=m.filter(d=>{var w;return d.type!=="graphic"||((w=d.layer)==null?void 0:w.type)!=="subtype-group"||n.has(d.graphic.layer)}),r&&(m=m.filter(d=>!("graphic"in d)||!d.graphic||(r==null?void 0:r.has(ft(d.graphic))))),c&&(m=m.filter(d=>!("graphic"in d)||!d.graphic||!(c!=null&&c.has(ft(d.graphic))))),{screenPoint:s,results:m}}function Bt(e,t,i,s,a,n){return o=>{if(o instanceof Xi){if(o.layer===e)n==null||n();else{const r=e.allLayerViews.find(c=>c.layer===o.layer);r&&(a==null||a(r))}s(ft(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const r=e.allLayerViews.find(c=>c.layer===o.parent);r&&i(o,r)}else{const r=e.allLayerViews.find(c=>c.layer===o);r&&t(r)}}}function Yt(e,t){if(e)if(Et(e))for(const i of e)if(Et(i))for(const s of i)t(s);else t(i);else t(e)}function ft(e){var i,s;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((s=e.sourceLayer)==null?void 0:s.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function ct({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}const ue={flipY:!0,premultipliedAlpha:!0};async function zs(e,t){const i=await me(e,t),{format:s,quality:a}=Ke(t==null?void 0:t.format,t==null?void 0:t.quality);return We(i,{format:s,quality:a,rotation:0,disableDecorations:!1},ue)}async function ks(e,t){const i=await me(e,t);return Be(i,ue)}function me(e,t){const i=Ls(t||{},Es(e.stage,e.size),e.size,e.padding),s=Os(t,e.allLayerViews);return e.stage.takeScreenshot(i,s,e.backgroundColor,t==null?void 0:t.rotation)}function Os(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(s=>{const a=t.find(n=>n.layer.id===s.id);a!=null&&a.container&&i.push(a.container)}),i}function Es(e,t){return Math.min(4,Ye(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function Ls(e,t,i,s){e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let a=null;e.width!=null&&e.height!=null?a=[e.width,e.height]:e.width==null&&e.height!=null?a=[e.height,e.height]:e.width!=null&&e.height==null?a=[e.width,e.width]:e.width==null&&e.height==null&&(a=null);const n=i[0]-(s.left+s.right),o=i[1]-(s.top+s.bottom);let r,c,p=e.area||{x:0,y:0,width:n,height:o};if(a){const u=n/o,m=a[0]/a[1];if(m>u){const d=p.width/m;p={x:p.x,y:Math.round(p.y+(p.height-d)/2),width:p.width,height:Math.round(d)}}else{const d=p.height*m;p={x:Math.round(p.x+(p.width-d)/2),y:p.y,width:Math.round(d),height:p.height}}}else a=[p.width,p.height];return a[0]>p.width?(r=Math.min(a[0]/p.width,t),c=a[0]/p.width/r):(r=1,c=a[0]/p.width),{cropArea:{x:Math.round((p.x+s.left)*r),y:Math.round((p.y+s.top)*r),width:Math.round(p.width*r),height:Math.round(p.height*r)},outputScale:c,resolutionScale:r}}const Xt=160;let Y=class extends P{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Xt&&this.clear()},Xt))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};h([l()],Y.prototype,"_timer",void 0),h([l()],Y.prototype,"stationary",null),Y=h([S("esri.views.2d.support.StationaryManager")],Y);const Is=e=>e.includes("Brush");let ge=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Is(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},at=class extends se{constructor(e){super(e),this.components=["attribution","zoom"]}};h([l()],at.prototype,"components",void 0),at=h([S("esri.views.ui.2d.DefaultUI2D")],at);const _e=at;let we,ve,ye,fe,xe,Te;async function As(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:a,Stage:n}]=await Promise.all([_(()=>import("./webglDeps-CIb9ipkP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url),_(()=>import("./mapViewDeps-1jPcgj0b.js"),__vite__mapDeps([15,2,6,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,4,127,128,129,130,3,5,1,7,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,11,146,147,148,149,10,13,150,151,152,153,154,155,156,157,12,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,8,9,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210]),import.meta.url)]);ve=e,ye=t,fe=i,xe=s,Te=a,we=n}let g=class extends Xe(Je(Qe(ei))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new be({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new st({view:this}),this.graphicsView=null,this.stateManager=new f({constraints:new de({view:this})}),this.stationaryManager=new Y,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new ns(this),this.floors=new Tt,this.highlightOptions=new re,this.inputManager=new Ss({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new ge,this.type="2d",this.ui=new _e,this.test={takeScreenshot:async t=>ks(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([b(()=>this.viewpoint,()=>this.stationaryManager.flip(),xt),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),ze()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Qt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Vs(this.featuresTilingScheme)}get constraintsInfo(){var i,s;const e=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,t=this.spatialReference;return{lods:(s=e==null?void 0:e.spatialReference)!=null&&s.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:i,viewpoint:s,extent:a}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!a&&(t!=null&&t.effectiveLODs||(n=-1),(!i||e===0&&n===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,i=this.spatialReference;return Oe(t.spatialReference,i)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var s;this.destroyed||(e===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return Ut(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t==null||t.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var i,s,a,n;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0)||e);if(D("esri-2d-log-updating")){const o=this.allLayerViews.reduce((r,c)=>({...r,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(a=this.labelManager)==null?void 0:a.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(o)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return Ps(this,e,t)}async takeScreenshot(e){return zs(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=he(e)?le(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}getDefaultTimeZone(){return Ut(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return Kt.hasLayerViewModule(e)}importLayerView(e){return Kt.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(R.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var c;const t=this.toMap(e),i=await this.hitTest(e),s=this.allLayerViews.toArray().reverse(),a=new globalThis.Map(s.map(p=>[p.layer.uid,p])),n=[];let o=0,r=0;for(;o<i.results.length||r<s.length;){const p=i.results.at(o);if(p&&p.type!=="graphic"){++o;continue}const u=a.get((c=(p==null?void 0:p.layer)??(p==null?void 0:p.graphic.layer))==null?void 0:c.uid);if((!p||u)&&r<s.length&&s.at(r)!==u){const m=s.at(r);"fetchPopupFeaturesAtLocation"in m&&n.push({mapPoint:t,layerView:m}),++r}else p&&(n.push({graphic:p.graphic,layerView:u}),++o)}return{hits:n,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=ti(this.type);if(D("safari")&&D("safari")<9&&(e=new $("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:D("safari")})),e!=null)throw R.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return As()}_getDefaultViewpoint(){var T;const{constraints:e,initialExtent:t,map:i,padding:s,size:a}=this;if(!e)return null;const n=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),r=n==null?void 0:n.viewpoint,c=((T=r==null?void 0:r.targetGeometry)==null?void 0:T.extent)??t,p=c==null?void 0:c.center,u=(r==null?void 0:r.rotation)??0,m=(r==null?void 0:r.scale)||c&&ae(c,[a[0]-s.left-s.right,a[1]-s.top-s.bottom]),d=o.center??p,w=o.rotation??u,G=o.scale??m;return d&&G?new I({targetGeometry:d,scale:G,rotation:w}):null}_startup(){var o;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(o=this.defaultsFromMap.extent)==null?void 0:o.center),this.graphics.owner=this;const t=new we(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new Te,this._magnifierView.magnifier=this.magnifier;const i=new fe({view:this});this._set("labelManager",i);const s=new as({view:this});this._set("animationManager",s);const a=new xe({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",r=>this.fatalError=r.error),b(()=>this.stationary,r=>t.stationary=r,U),b(()=>this.background,r=>{t.backgroundColor=r==null?void 0:r.color,this._magnifierView.backgroundColor=r==null?void 0:r.color},U),b(()=>this.magnifier,r=>this._magnifierView.magnifier=r,U),b(()=>this.renderingOptions,r=>t.renderingOptions=r,U),b(()=>this.highlightOptions,r=>t.highlightOptions=r,U),b(()=>this.state.id,()=>t.state=this.state,U)],"map-view"),this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach(r=>r(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Ki(Le.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new ve({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ye(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var n;const{allLayerViews:t,padding:i,size:s,stage:a}=this;return{allLayerViews:t,backgroundColor:e!=null&&e.ignoreBackground?null:(n=this.background)==null?void 0:n.color,padding:i,size:s,stage:a}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};g.type="2d",h([l({readOnly:!0})],g.prototype,"animationManager",void 0),h([l({constructOnly:!0})],g.prototype,"deactivatedWebGLExtensions",void 0),h([l({constructOnly:!0})],g.prototype,"debugWebGLExtensions",void 0),h([l({readOnly:!0})],g.prototype,"featuresTilingScheme",void 0),h([l({readOnly:!0})],g.prototype,"fullOpacity",void 0),h([l()],g.prototype,"goToManager",void 0),h([l({readOnly:!0})],g.prototype,"graphicsTileStore",null),h([l()],g.prototype,"graphicsView",void 0),h([l()],g.prototype,"stateManager",void 0),h([l()],g.prototype,"constraintsInfo",null),h([l({readOnly:!0})],g.prototype,"state",null),h([l()],g.prototype,"initialExtentRequired",null),h([l()],g.prototype,"labelManager",void 0),h([l({readOnly:!0})],g.prototype,"mapViewNavigation",void 0),h([l({constructOnly:!0})],g.prototype,"renderCanvas",void 0),h([l()],g.prototype,"renderingOptions",void 0),h([l({constructOnly:!0})],g.prototype,"supersampleScreenshotsEnabled",void 0),h([l({readOnly:!0})],g.prototype,"supportsGround",void 0),h([l()],g.prototype,"_defaultsFromMapSettings",null),h([l({readOnly:!0})],g.prototype,"typeSpecificPreconditionsReady",null),h([l()],g.prototype,"animation",null),h([l({type:Ji})],g.prototype,"background",null),h([l()],g.prototype,"center",null),h([l({type:de})],g.prototype,"constraints",null),h([l()],g.prototype,"extent",null),h([l()],g.prototype,"floors",void 0),h([l({type:re})],g.prototype,"highlightOptions",void 0),h([l({readOnly:!0})],g.prototype,"inputManager",void 0),h([l()],g.prototype,"map",void 0),h([l()],g.prototype,"padding",null),h([l({readOnly:!0})],g.prototype,"rendering",null),h([l()],g.prototype,"resizeAlign",null),h([l({readOnly:!0})],g.prototype,"resolution",null),h([l()],g.prototype,"rotation",null),h([l()],g.prototype,"scale",null),h([l({constructOnly:!0})],g.prototype,"spatialReferenceLocked",void 0),h([l()],g.prototype,"stationary",null),h([l({readOnly:!0})],g.prototype,"tileInfo",null),h([l({type:ge,readOnly:!0})],g.prototype,"timeline",void 0),h([l({readOnly:!0})],g.prototype,"type",void 0),h([l({readOnly:!0})],g.prototype,"updating",null),h([l()],g.prototype,"viewpoint",null),h([l()],g.prototype,"zoom",null),h([l({readOnly:!0})],g.prototype,"navigating",null),h([l(),ke(e=>e instanceof se?e:Ve(_e,e))],g.prototype,"ui",void 0),g=h([S("esri.views.MapView")],g);const Cs=g,Ua=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"}));export{Ua as M,Cs as X,ge as e,Rs as n};
