const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ShadowCastAccumulate.glsl-7ziGQBCy.js","./index-tefRSezt.js","./index-Cx51aysm.css","./Accessor-BHnuXKD2.js","./Camera-DJtV7zYb.js","./Clonable-DvJsj5LF.js","./Cyclical-CPiNl4ru.js","./mathUtils-DV9iOXpW.js","./JSONSupport-CGdeqxpk.js","./cast-BA_-jlhc.js","./writer-B2bQV2uU.js","./Point-XGrwlf63.js","./Viewpoint-Cv8Otrne.js","./jsonUtils-Cu7OBRmN.js","./Extent-CBBGeHb-.js","./Polyline-BmuD2-ZN.js","./typeUtils-BSg8Y507.js","./reactiveUtils-BR0C1Kq4.js","./Evented-DCWccWGU.js","./SimpleObservable-7oieNGD8.js","./jsxFactory-CLjKarlq.js","./intl-Do3GEEJ7.js","./Promise-CmQqe-ke.js","./uuid-Cl5lrJ4c.js","./screenUtils-_ZIvrt5o.js","./workers-D8Q3pEzK.js","./Queue-BOnccek2.js","./vec3f64-BLpZdpfb.js","./GraphicsCollection-CkliHSk1.js","./Graphic-CFXUQZlS.js","./opacityUtils-CSd4XoR2.js","./enumeration-Cr5WIZs4.js","./Color-gncXBiLc.js","./colorUtils-Rxh2V3ai.js","./ActionToggle-__-l4AdQ.js","./Identifiable-BrT7zvUW.js","./TextSymbol-BQ_NW9Xo.js","./collectionUtils-CbaToa73.js","./Portal-CTRRujjZ.js","./aaBoundingBox-CeBivBRq.js","./HeightModelInfo-B3GZyQFz.js","./projection-B2I9Bzj_.js","./projectBuffer-DOU0xvVi.js","./geodesicConstants-yASAK_zX.js","./projectBoundingRect-BA_jRNoI.js","./projectPointToVector-BS0u8fq6.js","./boundedPlane-Dyz2ub5d.js","./sphere-DQxj5tsv.js","./mat4-Fi6iAz29.js","./common-DQOJ18NT.js","./vec32-Dvg_eL9J.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./mat3-CR8GKnhD.js","./mat3f64-BBpwCtoL.js","./plane-4dpuo6-e.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./vec2f64-Dy6m9Nrb.js","./mathUtils-B9R7G-2c.js","./lineSegment-C-CDF7QX.js","./RenderCoordsHelper-BbefYyBA.js","./spatialReferenceEllipsoidUtils-DM073JUd.js","./projectVectorToPoint-d6Mr4zvQ.js","./projectVectorToVector-dS8io47t.js","./dehydratedFeatureUtils-1rrRm6hF.js","./ViewingMode-Dodu7ZZk.js","./scaleUtils-CfLu-sg1.js","./layerUtils-dJgsXxkC.js","./DefaultUI-DqLHkAzt.js","./UpdatingHandles-ptqz1ck8.js","./InputManager-Bs9UE-jw.js","./signal-DSa0yokC.js","./Basemap-BHdJ6wQH.js","./loadAll-Do8S8AWH.js","./PortalItem-CXk7DqVv.js","./basemapDefinitions-BmB40s1J.js","./writeUtils-C3ZSK02Z.js","./groundInstanceUtils-Ben03ZCf.js","./CollectionFlattener-B9CFCLSp.js","./editableLayers-BZGjz8nI.js","./catalogUtils-CK4eMvD1.js","./basemapEnsureType-BVU7UGJp.js","./basemapUtils-DQr5T1wn.js","./utils-DYurMneM.js","./mat4f32-DcsiF_Rp.js","./TablesMixin-BzMj7HDl.js","./Layer-C9uQlTBT.js","./TimeExtent-J5qnUFx_.js","./timeUtils-D2X862bk.js","./timeZoneUtils-COos5xIr.js","./ReactiveMap-Dwhwbx9R.js","./Query-DCBIeen2.js","./Field-Cyk7Ur5d.js","./fieldType-L-VlbZqy.js","./FullTextSearch-BWm_kPUE.js","./selectionUtils-DYi6daQO.js","./ViewEvents-Hl5AOQnu.js","./IViewEvents-Bci6PjlS.js","./interfaces-D6pIddIh.js","./screenUtils-DyhV4TAA.js","./HighlightDefaults-ESbuT2uR.js","./a11yUtils-CSYUX1kC.js","./heightModelInfoUtils-CMg1cdju.js","./unitBezier-B1N-tmtC.js","./imageUtils-brik-GLm.js","./capabilities-DwlKKScG.js","./themeUtils-C3zvZbsE.js","./globalCss-CZa70j6i.js","./accessibleHandler-rIBXQ52V.js","./CompassViewModel-BAJa4WdS.js","./GoTo-BsXOAO95.js","./ZoomViewModel-BZXEbLSs.js","./NormalUtils.glsl-CV524hT5.js","./earcut-Lltz9D9k.js","./computeTranslationToOriginAndRotation-BT43Xu5d.js","./Indices-Db9lERgy.js","./vec3-Bn81gjoR.js","./ElevationContext-jcnAn7VT.js","./ElevationProvider-aS5xrHHy.js","./VertexAttribute-Cq4MnHjR.js","./unitConversionUtils-C4AR5obr.js","./lengthUtils-DjJgJFRg.js","./hydratedFeatures-BVVSs98j.js","./SnappingCandidate-O5eRSE6e.js","./LineCallout.glsl-BFpkOc4i.js","./visualVariableUtils-Bp9QCb8E.js","./Material-Ba8x5bbY.js","./NoParameters-t-PuNrgq.js","./FloatArray-BCfeX8wo.js","./BindType-BBwFZqyN.js","./Matrix3PassUniform-Bhi2fM3C.js","./Texture-D-SqNa4i.js","./enums-D9v74xTE.js","./getDataTypeBytes-BTGR5GyG.js","./renderState-e7QeQoUO.js","./basicInterfaces-CZwQPxTp.js","./InterleavedLayout-Dvj-Snan.js","./BufferView-_QDXRCew.js","./vec2-maR1OrZI.js","./types-D0PSWh4d.js","./triangle-D_E6eTS3.js","./ShaderTechniqueConfiguration-YrUOztAU.js","./glsl-BH37Aalp.js","./requestImageUtils-Brn0e8z8.js","./TextureFormat-1mYWTFa-.js","./graphicUtils-Daa6cjYT.js","./meshVertexSpaceUtils-SW0WEjNN.js","./MeshLocalVertexSpace-C0YDTRex.js","./RibbonLine.glsl-D3IEIaDR.js","./sdfPrimitives-B8Jbwvqs.js","./doublePrecisionUtils-B0owpBza.js","./floatRGBA-CR2j2c7-.js","./Octree-B-jwmuW2.js","./ShaderBuilder-DV1s2efh.js","./RgbaFloatEncoding.glsl-_io2eW3M.js","./Attribute-B-NAci_J.js","./vec2f32-BbH2jxlN.js","./DefaultBufferWriter-D4XUxbP-.js","./memoryEstimations-5gFNwkKK.js","./dehydratedFeatures-Nwhn-hep.js","./quantizationUtils-2Az-xHPA.js","./featureConversionUtils-DpmsPUmt.js","./OptimizedFeature-DcMLlxvB.js","./OptimizedGeometry-7IxBWtHr.js","./OptimizedFeatureSet-Blu9Ckm7.js","./edgeUtils-52Urp6s4.js","./NormalAttribute.glsl-BPQl43kJ.js","./Float4DrawUniform-C_Hqa-pI.js","./Matrix3DrawUniform-B_gSHO7v.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./GeometryUtil-vHI0hYMT.js","./vec3f32-nZdmKIgz.js","./RealisticTree.glsl-BIYA2y1x.js","./Intersector-DqUGp7Vs.js","./intersectorUtils-l6zkk4nF.js","./verticalOffsetUtils-CUH6QZ7-.js","./orientedBoundingBox-9z4w3ZAL.js","./quat-4pa1e6ds.js","./Intersector-DPK4WnQE.js","./DefaultMaterial-B5sYRDQR.js","./SceneLighting-fZH2UQ_L.js","./GLTextureMaterial-BXvkeRxQ.js","./VertexColor.glsl-C67vI27I.js","./Matrix4PassUniform-LFIUaE9i.js","./VerticalOffset.glsl-0YVQE7vQ.js","./Matrix4sPassUniform--uPzDbTP.js","./Float2PassUniform-Blij1ug3.js","./BooleanBindUniform-xvVHJCDz.js","./CameraSpace.glsl-BZ4Eapt3.js","./Scheduler-B_GuBefw.js","./debugFlags-ZrDyTcDc.js","./HUDRenderStyle-BhGvVxgm.js","./HUDVisibility.glsl-DSeZY4v-.js","./triangulationUtils-ChyeOnqC.js","./deduplicate-8uOXlcvp.js","./OverlayCompositing.glsl-BbJKjUZQ.js","./GridLocalOriginFactory-BvhZ_UoU.js","./RenderCamera-BovI3JTe.js","./axisAngleDegrees-8Sw4vC28.js","./weather-DtiKeY2t.js","./RenderPlugin-B2sz29jJ.js","./VertexElementDescriptor-BOD-G50G.js","./VertexArrayObject-DcVjXzZo.js","./BufferObject-CIl3vJtA.js","./NestedMap-GuqgquCN.js","./Normals-OOhKYumi.js","./fontUtils-D0SfAiSy.js","./cameraUtils-D51h-KGF.js","./earthUtils-5Ip67eD0.js","./spatialReferenceSupport-CJqi4Nvp.js","./ElevationSamplerData-ejt2NMnl.js","./terrainUtils-NB9gChf5.js","./TileInfo-CRfZy5zq.js","./TileKey-DZd6gJy7.js","./FramebufferObject-DHwDHMWe.js","./glUtil-D0YUa0ow.js","./ShadowCastVisualizeTechniqueConfiguration-WdqoNZsk.js","./SunCalc-uwgdo0BB.js","./VirtualLighting-CTSkZQzH.js","./ray-D3Okb4cY.js","./RenderFeature-3I21ZjJq.js","./unitFormatUtils-Dbksq3U5.js","./ByteSizeUnit-BsxeN7wM.js","./quantityUtils-1LswOhxZ.js","./ZoomMomentumEstimator-Igei2Npb.js","./HUDMaterial-DRUv4rua.js","./labelFormatUtils-B--9rEVY.js","./labelUtils-Dq8OkaT-.js","./DepthRange-C25RnOB3.js","./elevationInfoUtils-RSZ4Logn.js","./hitTest-CblPROa1.js","./LayerConstants-B33OP6sh.js","./intersectorUtilsConversions-CZnn6t-z.js","./ElevationRange-BrgM1moX.js","./hitTestSelectUtils-UXJPjatw.js","./MemCache-CDoaVBHf.js","./DefaultLoadingContext-b8vwa5ZD.js","./wosrLoader-F8PxTYxV.js","./Version-9k2AOv05.js","./DrawParameters-C0gywgJQ.js","./TileStrategy-DlGVvP4C.js","./TileKey-BtGhNUzq.js","./ScheduledQueueProcessor-DfrR8pp0.js","./RenderableTile-Ewnw5ULl.js","./config-MDUrh2eL.js","./StyleDefinition-DxJzQnGW.js","./enums-BJSSbDkD.js","./enums-BRzLM11V.js","./GeometryUtils-B5FJlfZD.js","./DefaultVertexAttributeLayouts-DMsCtEEh.js","./DisplayObject-S19ALweP.js","./resources-CcZcI9oR.js","./WorkerHandle-B2QLNs3X.js","./colorUtils-BAowQmkN.js","./vec33-KumQEj7U.js","./ShaderTechniqueRepository-CuJwDr2t.js","./Blit-D5AxBSxC.js","./testSVGPremultipliedAlpha-CpxLiQJP.js","./RenderingContext-BkhmhK8E.js","./ProgramCache-D9MJNX7j.js","./Program-DD6La1z3.js","./layerViewUtils-tkZ5z_iY.js","./makeScheduleFunction-CggzEh3c.js","./layersCreator-CoWD_P2i.js","./loadUtils-BiECFALG.js","./requestPresets-v9_cUP4i.js","./associatedFeatureServiceUtils-Bfw5GA1N.js","./fetchService-zLGBmq3X.js","./lazyLayerLoader-cbt8Aa3v.js","./portalLayers-B1IFhyYP.js","./portalItemUtils-rm7sAgcm.js","./styleUtils-BQ_uVsZf.js"])))=>i.map(i=>d[i]);
import{_ as Pe,i as ze,L as Ke,c as ve,n as Qe,a as Xe}from"./index-tefRSezt.js";import{r as y,a as Ye,m as Re}from"./index-BkKcLxWB.js";import{V as O,w as Ze,_ as et,p as tt,v as it,d as ie}from"./reactiveUtils-BR0C1Kq4.js";import{d as B,f as rt,n as st}from"./ShadowCastAccumulate.glsl-7ziGQBCy.js";import{s as w,r as s,m as n,a as g,c as M,$ as xe,N as Me,L as Q,B as P,a5 as ot,a6 as at,E as nt,l as pt,k as lt,U as mt}from"./Accessor-BHnuXKD2.js";import{a as A,a2 as ht,I as X,a5 as ct}from"./cast-BA_-jlhc.js";import{E as dt,L as ut}from"./DefaultUI-DqLHkAzt.js";import{m as we}from"./Viewpoint-Cv8Otrne.js";import{m as yt,C as Y}from"./Portal-CTRRujjZ.js";import{t as wt}from"./loadAll-Do8S8AWH.js";import{S as gt,m as vt}from"./MultiOriginJSONSupport-nGLpCFeg.js";import{p as ft}from"./Promise-CmQqe-ke.js";import{r as b,o as Z}from"./writer-B2bQV2uU.js";import{i as fe}from"./originUtils-D69mHv66.js";import{S as v,d as bt}from"./JSONSupport-CGdeqxpk.js";import{w as _t}from"./Extent-CBBGeHb-.js";import{v as St}from"./HeightModelInfo-B3GZyQFz.js";import{L as Lt}from"./projection-B2I9Bzj_.js";import{g as S,ag as It}from"./Point-XGrwlf63.js";import{i as At}from"./heightModelInfoUtils-CMg1cdju.js";import{f as $t}from"./jsonUtils-Cu7OBRmN.js";import Oe from"./PortalItem-CXk7DqVv.js";import{o as be}from"./jsonContext-CdRtpU_S.js";import{u as _e,E as Se}from"./portalItemUtils-rm7sAgcm.js";import{m as Le}from"./basemapUtils-DQr5T1wn.js";import{i as Et,a as Vt,l as Ct}from"./Viewing-BEd2CNs6.js";import{e as Tt}from"./tagSymbols-BPcGfZon.js";import{p as Pt}from"./TimeExtent-J5qnUFx_.js";import{l as Ie}from"./ViewingMode-Dodu7ZZk.js";import{r as Ae}from"./spatialReferenceSupport-CJqi4Nvp.js";import{A as L}from"./interfaces-CL2NbQte.js";import{a as Rt}from"./Widgets-Bgpt11Wu.js";import{n as xt,p as Mt}from"./resourceUtils-sguC8912.js";import{t as Ot}from"./saveUtils-DLMLWtvP.js";import{isCopyAllowed as jt,initializeNewItem as Ut}from"./webdocSaveUtils-DtKNuvKv.js";import{m as je,u as E}from"./timeProperties-2ojMrJEd.js";import{n as Ue,t as Ft}from"./collectionUtils-CbaToa73.js";import Nt from"./Basemap-BHdJ6wQH.js";import{a as kt}from"./Clonable-DvJsj5LF.js";import{_ as Gt}from"./mathUtils-DV9iOXpW.js";import{v as $e}from"./vec32-Dvg_eL9J.js";import{n as ee}from"./vec3f64-BLpZdpfb.js";import{f as Dt}from"./Layer-C9uQlTBT.js";import{m as qt,u as Wt}from"./basemapEnsureType-BVU7UGJp.js";import{g as Bt}from"./Scheduler-B_GuBefw.js";import{p as Fe,c as Jt}from"./VirtualLighting-CTSkZQzH.js";import{p as Ht,d as zt}from"./weather-DtiKeY2t.js";import{r as Kt,ad as Qt}from"./opacityUtils-CSd4XoR2.js";import{r as Xt}from"./Version-9k2AOv05.js";import{r as Yt}from"./FloatArray-BCfeX8wo.js";import{H as Ee,u as Ve,O as Ce,N as Zt}from"./component-utils-DWY0IMHC.js";import"./Evented-DCWccWGU.js";import"./SimpleObservable-7oieNGD8.js";import"./Camera-DJtV7zYb.js";import"./Cyclical-CPiNl4ru.js";import"./jsxFactory-CLjKarlq.js";import"./intl-Do3GEEJ7.js";import"./uuid-Cl5lrJ4c.js";import"./screenUtils-_ZIvrt5o.js";import"./workers-D8Q3pEzK.js";import"./Queue-BOnccek2.js";import"./GraphicsCollection-CkliHSk1.js";import"./Graphic-CFXUQZlS.js";import"./enumeration-Cr5WIZs4.js";import"./Color-gncXBiLc.js";import"./colorUtils-Rxh2V3ai.js";import"./ActionToggle-__-l4AdQ.js";import"./Identifiable-BrT7zvUW.js";import"./typeUtils-BSg8Y507.js";import"./Polyline-BmuD2-ZN.js";import"./TextSymbol-BQ_NW9Xo.js";import"./aaBoundingBox-CeBivBRq.js";import"./projectBoundingRect-BA_jRNoI.js";import"./projectBuffer-DOU0xvVi.js";import"./geodesicConstants-yASAK_zX.js";import"./projectPointToVector-BS0u8fq6.js";import"./boundedPlane-Dyz2ub5d.js";import"./sphere-DQxj5tsv.js";import"./mat4-Fi6iAz29.js";import"./common-DQOJ18NT.js";import"./vec42-YcqnINSP.js";import"./vec4f64-o2zAXfmz.js";import"./mat3-CR8GKnhD.js";import"./mat3f64-BBpwCtoL.js";import"./plane-4dpuo6-e.js";import"./mat4f64-Dk4dwAN8.js";import"./quatf64-CCm9z-pX.js";import"./vec2f64-Dy6m9Nrb.js";import"./mathUtils-B9R7G-2c.js";import"./lineSegment-C-CDF7QX.js";import"./RenderCoordsHelper-BbefYyBA.js";import"./spatialReferenceEllipsoidUtils-DM073JUd.js";import"./projectVectorToPoint-d6Mr4zvQ.js";import"./projectVectorToVector-dS8io47t.js";import"./dehydratedFeatureUtils-1rrRm6hF.js";import"./scaleUtils-CfLu-sg1.js";import"./layerUtils-dJgsXxkC.js";import"./NormalUtils.glsl-CV524hT5.js";import"./earcut-Lltz9D9k.js";import"./computeTranslationToOriginAndRotation-BT43Xu5d.js";import"./Indices-Db9lERgy.js";import"./vec3-Bn81gjoR.js";import"./ElevationContext-jcnAn7VT.js";import"./ElevationProvider-aS5xrHHy.js";import"./VertexAttribute-Cq4MnHjR.js";import"./unitConversionUtils-C4AR5obr.js";import"./lengthUtils-DjJgJFRg.js";import"./hydratedFeatures-BVVSs98j.js";import"./SnappingCandidate-O5eRSE6e.js";import"./LineCallout.glsl-BFpkOc4i.js";import"./visualVariableUtils-Bp9QCb8E.js";import"./Material-Ba8x5bbY.js";import"./NoParameters-t-PuNrgq.js";import"./triangle-D_E6eTS3.js";import"./basicInterfaces-CZwQPxTp.js";import"./graphicUtils-Daa6cjYT.js";import"./meshVertexSpaceUtils-SW0WEjNN.js";import"./MeshLocalVertexSpace-C0YDTRex.js";import"./RibbonLine.glsl-D3IEIaDR.js";import"./InterleavedLayout-Dvj-Snan.js";import"./BufferView-_QDXRCew.js";import"./vec2-maR1OrZI.js";import"./types-D0PSWh4d.js";import"./sdfPrimitives-B8Jbwvqs.js";import"./doublePrecisionUtils-B0owpBza.js";import"./floatRGBA-CR2j2c7-.js";import"./enums-D9v74xTE.js";import"./Octree-B-jwmuW2.js";import"./Matrix3PassUniform-Bhi2fM3C.js";import"./BindType-BBwFZqyN.js";import"./renderState-e7QeQoUO.js";import"./glsl-BH37Aalp.js";import"./Texture-D-SqNa4i.js";import"./signal-DSa0yokC.js";import"./getDataTypeBytes-BTGR5GyG.js";import"./ShaderTechniqueConfiguration-YrUOztAU.js";import"./ShaderBuilder-DV1s2efh.js";import"./RgbaFloatEncoding.glsl-_io2eW3M.js";import"./Attribute-B-NAci_J.js";import"./vec2f32-BbH2jxlN.js";import"./DefaultBufferWriter-D4XUxbP-.js";import"./memoryEstimations-5gFNwkKK.js";import"./dehydratedFeatures-Nwhn-hep.js";import"./quantizationUtils-2Az-xHPA.js";import"./Field-Cyk7Ur5d.js";import"./fieldType-L-VlbZqy.js";import"./featureConversionUtils-DpmsPUmt.js";import"./OptimizedFeature-DcMLlxvB.js";import"./OptimizedGeometry-7IxBWtHr.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./edgeUtils-52Urp6s4.js";import"./NormalAttribute.glsl-BPQl43kJ.js";import"./Float4DrawUniform-C_Hqa-pI.js";import"./Matrix3DrawUniform-B_gSHO7v.js";import"./webStyleAcceptedFormats-CG7ZQ6BV.js";import"./GeometryUtil-vHI0hYMT.js";import"./vec3f32-nZdmKIgz.js";import"./RealisticTree.glsl-BIYA2y1x.js";import"./Intersector-DqUGp7Vs.js";import"./intersectorUtils-l6zkk4nF.js";import"./verticalOffsetUtils-CUH6QZ7-.js";import"./orientedBoundingBox-9z4w3ZAL.js";import"./quat-4pa1e6ds.js";import"./Intersector-DPK4WnQE.js";import"./DefaultMaterial-B5sYRDQR.js";import"./SceneLighting-fZH2UQ_L.js";import"./GLTextureMaterial-BXvkeRxQ.js";import"./VertexColor.glsl-C67vI27I.js";import"./Matrix4PassUniform-LFIUaE9i.js";import"./VerticalOffset.glsl-0YVQE7vQ.js";import"./Matrix4sPassUniform--uPzDbTP.js";import"./Float2PassUniform-Blij1ug3.js";import"./BooleanBindUniform-xvVHJCDz.js";import"./CameraSpace.glsl-BZ4Eapt3.js";import"./HUDRenderStyle-BhGvVxgm.js";import"./HUDVisibility.glsl-DSeZY4v-.js";import"./triangulationUtils-ChyeOnqC.js";import"./deduplicate-8uOXlcvp.js";import"./OverlayCompositing.glsl-BbJKjUZQ.js";import"./GridLocalOriginFactory-BvhZ_UoU.js";import"./RenderCamera-BovI3JTe.js";import"./axisAngleDegrees-8Sw4vC28.js";import"./RenderPlugin-B2sz29jJ.js";import"./HighlightDefaults-ESbuT2uR.js";import"./VertexElementDescriptor-BOD-G50G.js";import"./VertexArrayObject-DcVjXzZo.js";import"./BufferObject-CIl3vJtA.js";import"./NestedMap-GuqgquCN.js";import"./Normals-OOhKYumi.js";import"./fontUtils-D0SfAiSy.js";import"./cameraUtils-D51h-KGF.js";import"./earthUtils-5Ip67eD0.js";import"./ElevationSamplerData-ejt2NMnl.js";import"./terrainUtils-NB9gChf5.js";import"./TileInfo-CRfZy5zq.js";import"./TileKey-DZd6gJy7.js";import"./FramebufferObject-DHwDHMWe.js";import"./glUtil-D0YUa0ow.js";import"./ShadowCastVisualizeTechniqueConfiguration-WdqoNZsk.js";import"./SunCalc-uwgdo0BB.js";import"./ray-D3Okb4cY.js";import"./InputManager-Bs9UE-jw.js";import"./RenderFeature-3I21ZjJq.js";import"./unitFormatUtils-Dbksq3U5.js";import"./ByteSizeUnit-BsxeN7wM.js";import"./quantityUtils-1LswOhxZ.js";import"./ZoomMomentumEstimator-Igei2Npb.js";import"./UpdatingHandles-ptqz1ck8.js";import"./HUDMaterial-DRUv4rua.js";import"./labelFormatUtils-B--9rEVY.js";import"./labelUtils-Dq8OkaT-.js";import"./DepthRange-C25RnOB3.js";import"./elevationInfoUtils-RSZ4Logn.js";import"./hitTest-CblPROa1.js";import"./LayerConstants-B33OP6sh.js";import"./intersectorUtilsConversions-CZnn6t-z.js";import"./ElevationRange-BrgM1moX.js";import"./hitTestSelectUtils-UXJPjatw.js";import"./MemCache-CDoaVBHf.js";import"./DefaultLoadingContext-b8vwa5ZD.js";import"./wosrLoader-F8PxTYxV.js";import"./requestImageUtils-Brn0e8z8.js";import"./CollectionFlattener-B9CFCLSp.js";import"./DrawParameters-C0gywgJQ.js";import"./TileStrategy-DlGVvP4C.js";import"./TileKey-BtGhNUzq.js";import"./ScheduledQueueProcessor-DfrR8pp0.js";import"./ReactiveMap-Dwhwbx9R.js";import"./RenderableTile-Ewnw5ULl.js";import"./config-MDUrh2eL.js";import"./StyleDefinition-DxJzQnGW.js";import"./enums-BJSSbDkD.js";import"./enums-BRzLM11V.js";import"./GeometryUtils-B5FJlfZD.js";import"./DefaultVertexAttributeLayouts-DMsCtEEh.js";import"./DisplayObject-S19ALweP.js";import"./resources-CcZcI9oR.js";import"./WorkerHandle-B2QLNs3X.js";import"./colorUtils-BAowQmkN.js";import"./vec33-KumQEj7U.js";import"./ShaderTechniqueRepository-CuJwDr2t.js";import"./Blit-D5AxBSxC.js";import"./testSVGPremultipliedAlpha-CpxLiQJP.js";import"./RenderingContext-BkhmhK8E.js";import"./ProgramCache-D9MJNX7j.js";import"./Program-DD6La1z3.js";import"./capabilities-DwlKKScG.js";import"./imageUtils-brik-GLm.js";import"./layerViewUtils-tkZ5z_iY.js";import"./screenUtils-DyhV4TAA.js";import"./makeScheduleFunction-CggzEh3c.js";import"./groundInstanceUtils-Ben03ZCf.js";import"./editableLayers-BZGjz8nI.js";import"./catalogUtils-CK4eMvD1.js";import"./TablesMixin-BzMj7HDl.js";import"./timeZoneUtils-COos5xIr.js";import"./Query-DCBIeen2.js";import"./FullTextSearch-BWm_kPUE.js";import"./selectionUtils-DYi6daQO.js";import"./ViewEvents-Hl5AOQnu.js";import"./IViewEvents-Bci6PjlS.js";import"./interfaces-D6pIddIh.js";import"./a11yUtils-CSYUX1kC.js";import"./unitBezier-B1N-tmtC.js";import"./themeUtils-C3zvZbsE.js";import"./globalCss-CZa70j6i.js";import"./accessibleHandler-rIBXQ52V.js";import"./CompassViewModel-BAJa4WdS.js";import"./GoTo-BsXOAO95.js";import"./ZoomViewModel-BZXEbLSs.js";import"./multiOriginJSONSupportUtils-C0wm8_Yw.js";import"./utils-DYurMneM.js";import"./mat4f32-DcsiF_Rp.js";import"./basemapDefinitions-BmB40s1J.js";import"./timeUtils-D2X862bk.js";import"./TimeInterval-BDTTJ9Uw.js";import"./resourceUtils-t6ydfQSV.js";import"./project-BoEABhcm.js";import"./utils-Cy8wFNQo.js";import"./utils-CkSELPnj.js";import"./writeUtils-C3ZSK02Z.js";import"./debugFlags-ZrDyTcDc.js";import"./TextureFormat-1mYWTFa-.js";const ei="webscene:schema-validation";function ti(e){return new w(ei,"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:e})}var re;let j=re=class extends v{constructor(e){super(e),this.viewing=null}clone(){var e;return new re({viewing:((e=this.viewing)==null?void 0:e.clone())??null})}};s([n({type:Et,json:{write:!0}})],j.prototype,"viewing",void 0),j=re=s([g("esri.webscene.ApplicationProperties")],j);const ii=j;var se;let _=se=class extends v{constructor(e){super(e),this.environment=new B,this.spatialReference=null,this.viewpoint=null,this.timeExtent=null}set viewingMode(e){this._set("viewingMode",e)}clone(){var e,t,i;return new se({environment:this.environment.clone(),spatialReference:((e=this.spatialReference)==null?void 0:e.clone())??null,viewingMode:this.viewingMode,viewpoint:((t=this.viewpoint)==null?void 0:t.clone())??null,timeExtent:((i=this.timeExtent)==null?void 0:i.clone())??null})}};s([n({type:B,json:{write:{isRequired:!0}}})],_.prototype,"environment",void 0),s([n({type:S})],_.prototype,"spatialReference",void 0),s([n({type:["local","global"]})],_.prototype,"viewingMode",null),s([n({type:we,json:{write:{isRequired:!0}}})],_.prototype,"viewpoint",void 0),s([n(je)],_.prototype,"timeExtent",void 0),_=se=s([g("esri.webscene.InitialViewProperties")],_);const J=_;var oe;let U=oe=class extends v{constructor(){super(...arguments),this.text=""}clone(){return new oe({text:this.text})}};s([n({type:String,json:{write:{isRequired:!0}}})],U.prototype,"text",void 0),U=oe=s([g("esri.webscene.support.Description")],U);const F=U;var ae;let N=ae=class extends v{constructor(e){super(e),this.visible=!1}clone(){return new ae({visible:this.visible})}cloneConstructProperties(){return{visible:this.visible}}};s([n({type:Boolean,json:{default:!1,write:!0}})],N.prototype,"visible",void 0),N=ae=s([g("esri.webscene.SlideLegendInfo")],N);const ri=N;var ne;let k=ne=class extends v{constructor(){super(...arguments),this.legendInfo=null}clone(){return new ne({legendInfo:M(this.legendInfo)})}};s([n({type:ri,json:{write:!0}})],k.prototype,"legendInfo",void 0),k=ne=s([g("esri.webscene.support.SlideElements")],k);const si=k;var pe;let V=pe=class extends v{constructor(){super(...arguments),this.lighting=new Fe,this.weather=new Ht}clone(){return new pe({lighting:M(this.lighting),weather:M(this.weather)})}};s([n({types:rt,json:{write:!0}})],V.prototype,"lighting",void 0),s([n({types:zt,json:{write:!0}})],V.prototype,"weather",void 0),V=pe=s([g("esri.webscene.Environment")],V);var G;let D=G=class extends v{constructor(){super(...arguments),this.opacity=null}clone(){return new G({opacity:this.opacity})}cloneAndApplyTo(e){return this.opacity==null||((e=(e==null?void 0:e.clone())??new dt).opacity=this.opacity),e}static fromGround(e){return new G({opacity:e.opacity})}};s([n({type:Number,json:{type:xe,read:{reader:Kt,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Qt(e)},target:"transparency"}}})],D.prototype,"opacity",void 0),D=G=s([g("esri.webscene.support.SlideGround")],D);const Ne=D;var le;let C=le=class extends v{constructor(e){super(e),this.id="",this.sublayerIds=null}clone(){return new le({id:this.id,sublayerIds:M(this.sublayerIds)})}};s([n({type:String,json:{write:!0}})],C.prototype,"id",void 0),s([n({type:[xe],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],C.prototype,"sublayerIds",void 0),C=le=s([g("esri.webscene.support.SlideVisibleLayer")],C);var me;let q=me=class extends v{constructor(){super(...arguments),this.text=""}clone(){return new me({text:this.text})}};s([n({type:String,json:{write:{isRequired:!0}}})],q.prototype,"text",void 0),q=me=s([g("esri.webscene.support.Title")],q);const R=q;let oi=0;const he=O.ofType(C),ai=["caption","cover","none"];let u=class extends kt.ClonableMixin(v){constructor(e){super(e),this.id=Date.now().toString(16)+"-slide-"+oi++,this.title=new R,this.description=new F,this.hidden=!1,this.thumbnail=new E,this.viewpoint=null,this.basemap=null,this.ground=null,this.layout="caption",this.environment=new V,this.timeExtent=null,this.elements=null,this.visibleLayers=new he}destroy(){this.visibleLayers.removeAll(),this.basemap=null,this.thumbnail=Me(this.thumbnail),this.description=null,this.title=null,this.thumbnail=null,this.elements=null}castTitle(e){return typeof e=="string"?new R({text:e}):Q(R,e)}castDescription(e){return typeof e=="string"?new F({text:e}):Q(F,e)}castThumbnail(e){return typeof e=="string"?new E({url:e}):Q(E,e)}castBasemap(e){return qt(e)}set visibleLayers(e){this._set("visibleLayers",Ue(e,this._get("visibleLayers"),he))}castVisibleLayers(e){return e&&typeof e.map=="function"?e.map(t=>{if(typeof t=="string")return{id:t};if(t instanceof Dt){const i=Te(t);return{id:t.id,sublayerIds:i}}return t.id?{id:t.id,sublayerIds:"sublayerIds"in t?t.sublayerIds:void 0}:(P.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"'),t)}):null}async _updateVisibleLayersFrom(e){const t=[];await Promise.allSettled(this._getLayers(e.map).map(i=>e.whenLayerView(i).then(r=>{if(r.visible){const o=Te(i);t.push(new C({id:r.layer.id,sublayerIds:o}))}})).toArray()),this.visibleLayers.removeAll(),this.visibleLayers.addMany(t)}updateFrom(e,t){const i={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...t==null?void 0:t.screenshot};return e.when(()=>{var r,o;return this.viewpoint=e.viewpoint.clone(),this.environment.lighting=e.environment.lighting.type==="virtual"?Jt.prototype.clone.apply(e.environment.lighting):Fe.prototype.clone.apply(e.environment.lighting),this.environment.weather=e.environment.weather.clone(),this.basemap=((r=e.map.basemap)==null?void 0:r.clone())||null,this.ground=e.map.ground?Ne.fromGround(e.map.ground):null,this.timeExtent=((o=e.timeExtent)==null?void 0:o.clone())??null,this._updateVisibleLayersFrom(e)}).then(()=>e.takeScreenshot(i)).then(r=>(this.thumbnail=new E({url:r.dataUrl}),this))}async applyTo(e,t){this._applyToController!=null&&this._applyToController.abort();let i=new AbortController;this._applyToController=i;const r=ot(t,()=>i==null?void 0:i.abort()),o=()=>{this._applyToController===i&&(this._applyToController=null),i=null,r==null||r.remove()};try{await Ze(()=>e.ready,i.signal)}catch(d){throw o(),d}if(i.signal.aborted)throw o(),at();const a=e.resourceController.scheduler.registerTask(Bt.SLIDE);let m=!1;const p={animate:!0,...t,signal:this._applyToController.signal},c=async()=>{await Promise.all([a.schedule(async()=>m=await this._setViewpointOfInterest(e,p)),a.schedule(()=>this._applyBasemap(e,p),p.signal),a.schedule(()=>this._loadLayersWithSublayerVisibility(e))]),await Promise.all([a.schedule(()=>this._applyLayerVisibility(e),p.signal),a.schedule(()=>this._applyGround(e),p.signal),a.schedule(()=>this._applyViewpoint(e,p),p.signal),a.schedule(()=>{var d;return e.timeExtent=((d=this.timeExtent)==null?void 0:d.clone())??null},p.signal),a.schedule(()=>e.environment.weather=this.environment.weather.clone())])},h=await et(e.addUpdatingPromise(c()));if(m&&(e.contentCamera=null),a.remove(),o(),h.ok===!1)throw h.error;return this}async _applyBasemap(e,t){if(this.basemap){try{await this.basemap.load(t)}catch(i){if(nt(i))throw i}e.map.basemap=Wt(this.basemap,e.map.basemap)}}_applyGround(e){this.ground&&(e.map.ground=this.ground.cloneAndApplyTo(e.map.ground))}_getLayers(e){const t=new O;return this._collectLayers(e,t),this._collectLayers(e.ground,t),t}_collectLayers(e,t){e.layers.forEach(i=>{i.persistenceEnabled&&(t.add(i),"layers"in i&&this._collectLayers(i,t))})}async _loadLayersWithSublayerVisibility(e){this.visibleLayers&&await Promise.allSettled(this._getLayers(e.map).items.map(t=>{var r;return((r=this.visibleLayers.find(o=>o.id===t.id))==null?void 0:r.sublayerIds)?t.load():null}))}_applyLayerVisibility(e){this.visibleLayers&&this._getLayers(e.map).forEach(t=>{const i=this.visibleLayers.find(a=>a.id===t.id);t.visible=i!=null;const r=i==null?void 0:i.sublayerIds,o=ke(t);r&&o&&o.forEach(a=>a.visible=r.includes(a.id))})}async _setViewpointOfInterest(e,t){if(e.state.fixedContentCamera||!this.viewpoint||t!=null&&t.ignoreViewpoint||!(t!=null&&t.useDestinationCamera))return!1;const{toCameraAsync:i}=await Pe(()=>import("./ShadowCastAccumulate.glsl-7ziGQBCy.js").then(o=>o.m),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263]),import.meta.url),r=await i(e,this.viewpoint);return e.contentCamera=r,r!=null}async _applyViewpoint(e,t){if(this._applyCachedCameraTrackingEnabled(e),this.viewpoint&&!t.ignoreViewpoint){const i=this.environment.lighting;if(t.animate&&i.type==="sun"&&i.date)return this._animateToLighting(e,t);t.animate&&(e.environment.applyLighting(i.clone()),await e.goTo(this.viewpoint,t)),e.viewpoint=this.viewpoint}e.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(e,t){let i=null;return e.environment.lighting.type!=="virtual"&&this.environment.lighting.type!=="virtual"&&(e.viewingMode==="global"&&(i=this._animateLightingWithCamera(e,e.environment.lighting,this.environment.lighting)),e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1),e.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled,this.environment.lighting.type==="virtual"||e.environment.lighting.type==="virtual"?(e.environment.applyLighting(this.environment.lighting.clone()),e.environment.lighting.type!=="virtual"&&(e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1)):this.environment.lighting.displayUTCOffset!=null&&(e.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset),e.goTo(this.viewpoint,t).then(()=>{this._applyCachedCameraTrackingEnabled(e),e.environment.applyLighting(this.environment.lighting.clone())}).catch(r=>{throw e.animation==null&&this._applyCachedCameraTrackingEnabled(e),r}).finally(()=>{pt(i)})}_applyCachedCameraTrackingEnabled(e){e.environment.cachedCameraTrackingEnabled!=null&&(e.environment.lighting.cameraTrackingEnabled=e.environment.cachedCameraTrackingEnabled,e.environment.cachedCameraTrackingEnabled=null)}_getTime(e){return[e.getTime(),3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds()]}_setTime(e,t,i){return e.setTime(t),e.setUTCHours(i/3600),e.setUTCMinutes(i%3600/60),e.setUTCSeconds(i%3600%60),e}_animateLightingWithCamera(e,t,i){const r=new Date(t.date.toString()),[o,a]=this._getTime(r),[m,p]=this._getTime(i.date),c=li(a,p),h=e.renderCoordsHelper,d=ee();h.toRenderCoords(e.camera.position,d);const f=ee(),T=ee();this.viewpoint.camera!=null&&h.toRenderCoords(this.viewpoint.camera.position,f);const We=new Date;return tt(()=>e.camera,Be=>{h.toRenderCoords(Be.position,T);const z=$e(d,T),ge=$e(f,T);let K=0;z+ge!==0&&(K=z/(z+ge));const Je=o+(m-o)*K,He=mi(a,c*K);t.date=this._setTime(We,Je,He)})}static createFrom(e,t){return new this().updateFrom(e,t)}};s([n({type:String,json:{write:{isRequired:!0}}})],u.prototype,"id",void 0),s([n({type:R,json:{default:()=>new R({text:""}),write:{isRequired:!0}}})],u.prototype,"title",void 0),s([A("title")],u.prototype,"castTitle",null),s([n({type:F,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.text)})}}})],u.prototype,"description",void 0),s([A("description")],u.prototype,"castDescription",null),s([n({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],u.prototype,"hidden",void 0),s([n({type:E,json:{default:()=>new E({url:""}),write:{isRequired:!0}}})],u.prototype,"thumbnail",void 0),s([A("thumbnail")],u.prototype,"castThumbnail",null),s([n({type:we,nonNullable:!0,json:{write:{isRequired:!0}}})],u.prototype,"viewpoint",void 0),s([n({type:Nt,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],u.prototype,"basemap",void 0),s([A("basemap")],u.prototype,"castBasemap",null),s([n({type:Ne,json:{write:!0}})],u.prototype,"ground",void 0),s([n({type:ai,json:{write:!0,default:"caption"},nonNullable:!0})],u.prototype,"layout",void 0),s([n({type:he,json:{write:{isRequired:!0}}})],u.prototype,"visibleLayers",null),s([A("visibleLayers")],u.prototype,"castVisibleLayers",null),s([n({type:V,json:{write:!0}})],u.prototype,"environment",void 0),s([n(je)],u.prototype,"timeExtent",void 0),s([n({type:si,json:{write:!0}})],u.prototype,"elements",void 0),u=s([g("esri.webscene.Slide")],u);const ni=u;function ke(e){if(e.type==="building-scene"||e.type==="map-image")return e.allSublayers.toArray()}function Te(e){const t=ke(e);if(t)return t.filter(i=>i.visible).map(i=>i.id)}const ce=86400,pi=43200;function li(e,t){let i=t-e;return i>pi&&(i-=ce),i<-43200&&(i+=ce),i}function mi(e,t){return Gt(e+t,ce)}const de=O.ofType(ni);let W=class extends v{constructor(e){super(e),this.slides=new de}destroy(){this.slides.forEach(e=>e.destroy()),this.slides.removeAll()}set slides(e){e&&(e=e.filter(t=>!!t.viewpoint)),this._set("slides",Ue(e,this._get("slides"),de))}clone(){return new this.constructor({slides:this.slides.clone()})}};s([n({type:de,nonNullable:!0,json:{write:!0}}),A(Ft)],W.prototype,"slides",null),W=s([g("esri.webscene.Presentation")],W);const Ge=W;var ue;let $=ue=class extends v{constructor(e){super(e)}clone(){return new ue({name:this.name,path:this.path,title:this.title})}};s([n({type:String,json:{write:{isRequired:!0}}})],$.prototype,"name",void 0),s([n({type:String,json:{write:{isRequired:!0}}})],$.prototype,"path",void 0),s([n({type:String,json:{write:{isRequired:!0}}})],$.prototype,"title",void 0),$=ue=s([g("esri.webscene.TransportationNetwork")],$);const hi=$;class H extends Xt{constructor(t,i){super(t,i,"webscene")}get supportsGround(){return this.greaterEqual(1,8)}get supportsVisibleElevationLayersInSlides(){return this.lessThan(1,8)}}let ci=null;function di(){return ci}var De;const I=new H(1,36),ui=()=>{const t=[],i=I.major;for(let r=8;r<=I.minor;r++)t.push(`${i}.${r}`);return t},te="Web Scene";let l=class extends yt.LoadableMixin(ft.EsriPromiseMixin(gt(ut))){constructor(e){super(e),this[De]=!0,this._layersIdGCTimeoutId=void 0,this._updateFromPromise=null,this.applicationProperties=null,this.clippingArea=null,this.clippingEnabled=!1,this.floorInfo=null,this.heightModelInfo=void 0,this.sourceVersion=null,this.transportationNetworks=null,this.presentation=new Ge,this.initialViewProperties=new J,this.portalItem=null,this.resourceInfo=null,this.widgets=null,this._debouncedSaveOperations=lt(async(t,i,r)=>{switch(t){case L.SAVE:return this._saveImpl(i);case L.SAVE_AS:return this._saveAsImpl(r,i)}}),this._resourceReferences={portalItem:null,paths:[]},this.authoringApp=null,this.authoringAppVersion=null,this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1}initialize(){if(this.when().catch(e=>{P.getLogger(this).error("#load()","Failed to load web scene",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e),this.addResolvingPromise(this._validateSpatialReference()),this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles(it(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC()))}destroy(){this._unscheduleLayersIdGC(),this.presentation&&this.presentation.destroy(),this.portalItem=Me(this.portalItem)}writeClippingArea(e,t){t.clippingArea||(t.clippingArea={}),t.clippingArea.geometry=e.toJSON()}readClippingEnabled(e,t){return!!t.clippingArea&&!!t.clippingArea.clip}writeClippingEnabled(e,t){this.clippingArea&&(t.clippingArea||(t.clippingArea={}),t.clippingArea.clip=e)}writeLayers(e,t,i,r){t[i]=this._layersToJSON(e,"operational-layers",r)}readSourceVersion(e,t){const[i,r]=t.version.split(".");return new H(parseInt(i,10),parseInt(r,10))}writeSourceVersion(e,t,i){t[i]=`${I.major}.${I.minor}`}writeTables(e,t,i,r){const o=this._layersToJSON(e,"tables",r);o.length&&(t[i]=o)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)??null}set thumbnailUrl(e){e?this._override("thumbnailUrl",e):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp="ArcGIS API for JavaScript"}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=ht}writeGround(e,t,i,r){t[i]=e?e.write({},r):{transparency:0,layers:[]}}readInitialViewProperties(e,t){var o,a,m;const i={};(o=t.initialState)!=null&&o.environment&&(i.environment=B.fromJSON(t.initialState.environment)),i.spatialReference=t.spatialReference?S.fromJSON(t.spatialReference):S.WebMercator,i.viewingMode=t.viewingMode??"global",(a=t.initialState)!=null&&a.viewpoint&&(i.viewpoint=we.fromJSON(t.initialState.viewpoint));const r=(m=t.initialState)==null?void 0:m.timeExtent;return r!=null&&(i.timeExtent=Pt.fromArray(r)),new J(i)}get spatialReference(){var e;return((e=this.initialViewProperties)==null?void 0:e.spatialReference)??S.WebMercator}get viewingMode(){var e;return((e=this.initialViewProperties)==null?void 0:e.viewingMode)??"global"}load(e){const t=this.ground;return this.addResolvingPromise(this._loadFromSource().then(()=>{t&&t!==this.ground&&t.destroy(),this._validateFeatureLayerSymbolVisibility()})),Promise.resolve(this)}loadAll(){return wt(this,e=>{const t=this.presentation&&this.presentation.slides;e(this.ground,this.basemap,this.layers,t&&t.map(i=>i.basemap),this.tables)})}read(e,t){var o;t={...t,origin:"web-scene"};const i=this._isAuthoringAppVersionSetByUser,r=this._isAuthoringAppSetByUser;if(bt(this,e,a=>super.read(e,a),t),r||(this._isAuthoringAppSetByUser=!1),i||(this._isAuthoringAppVersionSetByUser=!1),e.baseMap&&Array.isArray(e.baseMap.elevationLayers)&&((o=this.sourceVersion)==null?void 0:o.supportsVisibleElevationLayersInSlides)){const a=e.baseMap.elevationLayers.map(h=>({id:h.id})),m=this.presentation.slides,p=(h,d)=>h.visibleLayers.some(f=>f.id===d),c=a.filter(h=>!m.some(d=>p(d,h.id)));m.forEach(h=>{h.visibleLayers.addMany(c)})}}_writeBasemapElevationLayers(e){var i;const t=(i=e.ground)==null?void 0:i.layers;!e.baseMap&&(t!=null&&t.length)&&(e.baseMap={title:"Basemap",baseMapLayers:[]}),e.baseMap&&(e.baseMap.elevationLayers=M(t))}_layersToJSON(e,t,i){const r={...i,layerContainerType:t};return e.map(o=>this._verifyWritableLayer(o,i)?o.write({},r):null).filter(o=>!!o).toArray()}_verifyWritableLayer(e,t){return!!e.persistenceEnabled&&("write"in e||(t!=null&&t.messages&&t.messages.push(new w("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in web scenes`,{layer:e})),!1))}write(e,t){var o;if(this.loadStatus!=="loaded"){const a=new w("webscene:not-loaded","Web scene must be loaded before it can be serialized");throw P.getLogger(this).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),a}this._runLayersIdGC();const i=!(t!=null&&t.messages);t={messages:[],...t,origin:"web-scene"};const r=super.write(e,t);if(i){const a=((o=t.messages)==null?void 0:o.filter(m=>m.name==="web-document-write:property-required"))??[];if(a.length){const m=new w("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:a});throw P.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",a),m}}return this._writeBasemapElevationLayers(r),r}async save(e){return this._debouncedSaveOperations(L.SAVE,e)}async _saveImpl(e){var o;if(!this.portalItem)throw new w("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");if(((o=this.portalItem)==null?void 0:o.type)!==te)throw new w("webscene:portal-item-wrong-type",`Portal item needs to have type "${te}"`);const t=this._updateFromPromise;await this._ensureLoadBeforeSave();const i=this._enableVerifyItemRelativeUrls(be(this.portalItem,"web-scene",!0)),r=this.write({},i);return await Promise.all(i.resources.pendingOperations),await this._verifySave(r,i,L.SAVE,e),this._updateTypeKeywords(this.portalItem),await xt(this.portalItem,r,this._resourceReferences,i),fe(i),t&&await t,await this._saveThumbnail(),this.portalItem}async saveAs(e,t){return this._debouncedSaveOperations(L.SAVE_AS,t,e)}async _saveAsImpl(e,t){let i=Oe.from(e);if(!i)throw new w("webscene:portal-item-required","saveAs requires a portal item to save to");i.id&&(i=i.clone(),i.id=null);const r=i.portal||Y.getDefault();await this._ensureLoadBeforeSave(),i.type=te,i.portal=r;const o=this._enableVerifyItemRelativeUrls(be(i,"web-scene",!0)),a=this.write({},o);await Promise.all(o.resources.pendingOperations),await this._verifySaveAs(a,o,t);const m=this.thumbnailUrl,p=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(i),await r.signIn();const c=this.portalItem,h={item:c,authenticated:!(!(c!=null&&c.id)||!c.portal.user)},{copyAllowed:d,itemReloaded:f}=await jt(h,r);if(h.authenticated||(h.authenticated=f),!d)throw new w(`${o.name}:save-as-copy-not-allowed`,"Owner of this map does not allow others to save a copy");const T={...t,copyAllResources:!0};return await Ut(i,h,a,T)&&(this._resourceReferences.portalItem=i),await Mt(this._resourceReferences,o),this.portalItem=i,vt.prototype.read.call(this,{version:a.version,authoringApp:a.authoringApp,authoringAppVersion:a.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:i.itemUrl?X(i.itemUrl):void 0}),fe(o),m&&(this.thumbnailUrl=p?ct(m,"w","8192"):m),o.portalItem=i,await this._saveThumbnail(),i}async _saveThumbnail(){var e;this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl})),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}async _verifySave(e,t,i,r){if(!It(this.spatialReference))throw new w("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently.");const{ignoreUnsupported:o,requiredPropertyChecksDisabled:a,strictSchemaValidationEnabled:m}=r||{};Ot(t,{errorName:"webscene:save"},{ignoreUnsupported:o,supplementalUnsupportedErrors:["scenemodification:unsupported"],requiredPropertyChecksDisabled:a});const p=di();if(m&&p){const c=(await p()).validate(e);if(!c.length)return;const h=`webscene did not validate:
${c.join(`
`)}`;P.getLogger(this).error(`${i===L.SAVE_AS?"saveAs":"save"}(): ${h}`);const d=c.map(f=>new w("webscene:schema-validation",f));throw ti(d)}}_verifySaveAs(e,t,i){return this._verifySave(e,t,L.SAVE_AS,i)}verifySaveAs(e){const t=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),i=this.write({},t);return this._verifySaveAs(i,t,e)}canNotSaveAs(){return!1}async updateFrom(e,t={}){const i=this._updateFrom(e,t);this._updateFromPromise=i,await i,this._updateFromPromise===i&&(this._updateFromPromise=null)}async _updateFrom(e,t={}){var i;if(await e.whenReady(),!t.environmentExcluded&&e.environment&&(this.initialViewProperties.environment=B.prototype.clone.apply(e.environment)),!t.viewpointExcluded&&e.viewpoint&&(this.initialViewProperties.viewpoint=e.viewpoint.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),this.initialViewProperties.viewingMode=e.viewingMode,this.initialViewProperties.timeExtent=((i=e.timeExtent)==null?void 0:i.clone())??null,e.clippingArea!=null?e.clippingArea!==this.clippingArea&&(this.clippingArea=e.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1,e.heightModelInfo&&(this.heightModelInfo=e.heightModelInfo.clone()),e.map===this)for(const r of e.allLayerViews){const o="visible";o in r&&o in r.layer&&r._isOverridden(o)&&(r.layer[o]=r[o])}if(!t.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this);(t.thumbnailExcluded===!1||t.thumbnailExcluded==null&&!t.viewpointExcluded)&&await this._updateFromThumbnail(e,t.thumbnailSize??void 0)}async _updateFromThumbnail(e,t){const i=Vt(e,t),r=await e.takeScreenshot({format:"jpg",width:i.width,height:i.height,disableDecorations:!0});this.thumbnailUrl=r.dataUrl}_loadFromSource(){var e;return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):(e=this.portalItem)!=null&&e.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}_readAndLoadFromJSON(e,t){const i=this._validateJSON(e);return this.read(i,t),this._loadFromJSON(i,t)}_extractOperationalLayers(e){var o;const t=[];if(!((o=this.sourceVersion)!=null&&o.supportsGround)&&e.baseMap&&Array.isArray(e.baseMap.elevationLayers))for(const a of e.baseMap.elevationLayers)t.push(a);const i=[],r=a=>{var m;return a.layers&&(a.layers=a.layers.filter(r)),a.layerType!=="ArcGISTiledElevationServiceLayer"||((m=this.sourceVersion)!=null&&m.supportsGround||i.push(a),!1)};return{operationalLayers:e.operationalLayers?e.operationalLayers.filter(r):[],operationalElevationLayers:i,basemapElevationLayers:t}}async _loadFromJSON(e,t){var h;const i=new O;await this._validateSpatialReference(),await this._validateHeightModelInfo();const{populateOperationalLayers:r}=await Pe(()=>import("./layersCreator-CoWD_P2i.js"),__vite__mapDeps([264,17,3,18,19,265,266,9,1,2,8,267,38,22,10,14,11,75,268,269,270,68,271,41,27,15,7,42,43,272]),import.meta.url),{operationalLayers:o,operationalElevationLayers:a,basemapElevationLayers:m}=this._extractOperationalLayers(e),p=[],c={context:{...t,layerContainerType:"operational-layers"}};if(this.portalItem&&(c.context.portal=this.portalItem.portal||Y.getDefault()),m.length>0){const d={...c,context:{...c.context,layerContainerType:"ground"}};d.defaultLayerType="ArcGISTiledElevationServiceLayer",p.push(r(this.ground.layers,m,d))}if(a.length>0){const d={...c,context:{...c.context,layerContainerType:"ground"}};d.defaultLayerType="ArcGISTiledElevationServiceLayer",p.push(r(i,a,d))}o&&o.length>0&&p.push(r(this.layers,o,c)),(h=e.tables)!=null&&h.length&&p.push(r(this.tables,e.tables,{...c,context:{...c.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"})),await Promise.allSettled(p),await this._loadObjectsWithLayers(),this.ground.layers.addMany(i.filter(d=>d.type==="base-elevation"||d.type==="elevation"))}async _ensureLoadBeforeSave(){await this.load(),await this._loadObjectsWithLayers();const e=[],t=[...this.allLayers.items];for(const{basemap:i}of this.presentation.slides.items)i&&(t.push(...i.baseLayers.items),t.push(...i.referenceLayers.items));for(const i of t)if("beforeSave"in i&&typeof i.beforeSave=="function"){const r=i.beforeSave();r&&e.push(r)}await Promise.allSettled(e)}async _loadObjectsWithLayers(){const e=[];this.ground&&e.push(this.ground.load()),this.basemap&&e.push(this.basemap.load()),this.presentation.slides.forEach(t=>{t.basemap&&e.push(t.basemap.load())}),await Promise.allSettled(e)}async _loadFromItem(e){if(await e.load().catch(r=>{throw new w("webscene:load-portal-item","Failed to load portal item",{error:r})}),e.type!=="Web Scene")throw new w("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:e.type});const t=await e.fetchData();this.resourceInfo=t;const i={origin:"web-scene",url:X(e.itemUrl),portal:e.portal||Y.getDefault(),portalItem:e,readResourcePaths:[]};await this._readAndLoadFromJSON(t,i),this._resourceReferences={portalItem:e,paths:i.readResourcePaths??[]}}_validateSpatialReference(){const e=this.initialViewProperties,t=this._sceneSpatialReference;let i;if(e.viewingMode!=="local"){if(!Ae(t,Ie.Global))return Promise.reject(new w("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:t,viewingMode:e.viewingMode}));i=p=>!p||Lt(p,t)}else{if(!Ae(t,Ie.Local))return Promise.reject(new w("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:t,viewingMode:e.viewingMode}));i=p=>!p||p.equals(t)}const r=p=>{var c,h;return((c=p==null?void 0:p.camera)==null?void 0:c.position.spatialReference)??((h=p==null?void 0:p.targetGeometry)==null?void 0:h.spatialReference)},o=e.viewpoint,a=r(o);if(a&&!i(a))return Promise.reject(new w("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:a,sceneSpatialReference:t,viewingMode:e.viewingMode}));const m=this.presentation.slides.find(p=>!i(r(p.viewpoint)));if(m){const p=r(m.viewpoint);return Promise.reject(new w("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:p,sceneSpatialReference:t,viewingMode:e.viewingMode}))}return Promise.resolve()}_validateHeightModelInfo(){const e=this._sceneSpatialReference,t=At(this.heightModelInfo,e);return t?Promise.reject(t):Promise.resolve()}_validateFeatureLayerSymbolVisibility(){var e;(e=this.sourceVersion)!=null&&e.greaterEqual(1,35)||this.layers.forEach(t=>{t.type==="feature"&&t.addHandles(ie(()=>t.loaded,()=>{var i,r,o;((i=t.elevationInfo)==null?void 0:i.mode)==="on-the-ground"&&((r=t.renderer)==null?void 0:r.type)==="simple"&&((o=t.renderer.symbol)==null?void 0:o.type)==="polygon-3d"&&t.renderer.symbol.symbolLayers.some(a=>a.type==="fill"&&a.material!=null&&(!a.material.color||a.material.color.a*t.opacity<Yt)&&(t.loadWarnings.push(new mt("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:t})),!0))},{once:!0,sync:!0}))})}_validateJSON(e){const t=H.parse(e.version||"","webscene");return I.validate(t),e.version=`${t.major}.${t.minor}`,t.major===1&&t.minor<=2&&(e.spatialReference=S.WebMercator.toJSON()),e}_updateTypeKeywords(e){_e(e,Se.LOCAL_SCENE,this.initialViewProperties.viewingMode==="local"),_e(e,Se.DEVELOPER_BASEMAP,Le(this.basemap)||this.presentation.slides.some(({basemap:t})=>!!t&&Le(t))),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((t,i,r)=>r.indexOf(t)===i))}get _sceneSpatialReference(){return this.initialViewProperties.spatialReference||S.WebMercator}get _verifyItemRelativeRootPath(){var e;return(e=this.portalItem)!=null&&e.itemUrl?X(this.portalItem.itemUrl).path:null}_enableVerifyItemRelativeUrls(e){const t=this._verifyItemRelativeRootPath;return t&&(e.verifyItemRelativeUrls={rootPath:t,writtenUrls:[]}),e}_unscheduleLayersIdGC(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}_scheduleLayersIdGC(){this._unscheduleLayersIdGC(),this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0,this._runLayersIdGC()},3e3)}_runLayersIdGC(){var r,o;this._unscheduleLayersIdGC();const e=(o=(r=this.applicationProperties)==null?void 0:r.viewing)==null?void 0:o.search,t=a=>this.allLayers.some(m=>m.id===a&&m.persistenceEnabled);e!=null&&e.layers&&(e.layers=e.layers.filter(a=>t(a.id)));const i=this.presentation&&this.presentation.slides;i&&i.forEach(a=>{a.visibleLayers&&(a.visibleLayers=a.visibleLayers.filter(m=>t(m.id)))})}static fromJSON(e){if(!e)throw new w("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:e})}};De=Tt,l.version=`${I.major}.${I.minor}`,s([n({type:ii,json:{write:!0}})],l.prototype,"applicationProperties",void 0),s([n({type:_t,json:{read:{source:"clippingArea.geometry",reader:$t},write:{target:"clippingArea.geometry"}}})],l.prototype,"clippingArea",void 0),s([b("clippingArea")],l.prototype,"writeClippingArea",null),s([n({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],l.prototype,"clippingEnabled",void 0),s([Z("clippingEnabled",["clippingArea"])],l.prototype,"readClippingEnabled",null),s([b("clippingEnabled")],l.prototype,"writeClippingEnabled",null),s([n({type:Ct,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],l.prototype,"floorInfo",void 0),s([n({type:St,json:{write:!0}})],l.prototype,"heightModelInfo",void 0),s([n({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],l.prototype,"layers",void 0),s([b("layers")],l.prototype,"writeLayers",null),s([n({readOnly:!0,type:H,json:{type:ui(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],l.prototype,"sourceVersion",void 0),s([Z("sourceVersion",["version"])],l.prototype,"readSourceVersion",null),s([b("sourceVersion")],l.prototype,"writeSourceVersion",null),s([n({json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],l.prototype,"tables",void 0),s([b("tables")],l.prototype,"writeTables",null),s([n()],l.prototype,"thumbnailUrl",null),s([n({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],l.prototype,"authoringApp",null),s([b("authoringApp")],l.prototype,"writeAuthoringApp",null),s([n({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],l.prototype,"authoringAppVersion",null),s([b("authoringAppVersion")],l.prototype,"writeAuthoringAppVersion",null),s([n({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],l.prototype,"ground",void 0),s([b("ground")],l.prototype,"writeGround",null),s([n({type:O.ofType(hi),json:{write:!0}})],l.prototype,"transportationNetworks",void 0),s([n({type:Ge,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(e,t,i,r)=>{if(e.slides&&e.slides.length>0){const o={...r,isPresentation:!0};t.presentation=e.write({},o)}}}}})],l.prototype,"presentation",void 0),s([n({type:J,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new J({viewingMode:"global",spatialReference:S.WebMercator})}})],l.prototype,"initialViewProperties",void 0),s([Z("initialViewProperties",["initialState.timeExtent","initialState.environment","initialState.viewpoint","spatialReference","viewingMode"])],l.prototype,"readInitialViewProperties",null),s([n({type:S,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],l.prototype,"spatialReference",null),s([n({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],l.prototype,"viewingMode",null),s([n({type:Oe})],l.prototype,"portalItem",void 0),s([n()],l.prototype,"resourceInfo",void 0),s([n({type:Rt,json:{write:!0}})],l.prototype,"widgets",void 0),l=s([g("esri.WebScene")],l);const qe=l;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const yi=ze`@layer{arcgis-scene{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,wi=Re(qe),gi=Re(st),x=class x extends Ke{constructor(){super(...arguments),this._camera=void 0,this._center=void 0,this._extent=void 0,this._itemId=void 0,this._scale=void 0,this._viewpoint=void 0,this._zoom=void 0,this._cameraFov=void 0,this._cameraHeading=void 0,this._cameraPosition=void 0,this._cameraTilt=void 0,this._map=wi(this,{editConstructorProperties:this._editMapProperties}),this.view=gi(this,{editConstructorProperties:this._editViewProperties}),this.allLayerViews=this.view.allLayerViews,this.alphaCompositingEnabled=this.view.alphaCompositingEnabled,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.clippingArea=this.view.clippingArea,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.environment=this.view.environment,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.groundView=this.view.groundView,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.qualityProfile=this.view.qualityProfile,this.ready=this.view.ready,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.updating=this.view.updating,this.viewingMode=this.view.viewingMode,this.arcgisViewChange=ve(),this.arcgisViewClick=y(()=>this.view,"click"),this.arcgisViewDoubleClick=y(()=>this.view,"double-click"),this.arcgisViewDrag=y(()=>this.view,"drag"),this.arcgisViewHold=y(()=>this.view,"hold"),this.arcgisViewImmediateClick=y(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=y(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=y(()=>this.view,"key-down"),this.arcgisViewKeyUp=y(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=y(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=y(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=y(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=y(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=y(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=y(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=y(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=y(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=y(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=ve()}get camera(){return this.view.camera??this._camera}set camera(t){this._camera=t,this.ready&&!Ee(this.camera,t)&&(this.view.camera=t)}get cameraFov(){var t;return((t=this.view.camera)==null?void 0:t.fov)??this._cameraFov}set cameraFov(t){this.ready&&t!=null&&this._mutateCamera(i=>{i.fov=t}),this._cameraFov=t}get cameraHeading(){var t;return((t=this.view.camera)==null?void 0:t.heading)??this._cameraHeading}set cameraHeading(t){this.ready&&t!=null&&this._mutateCamera(i=>{i.heading=t}),this._cameraHeading=t}get cameraPosition(){var t;return((t=this.view.camera)==null?void 0:t.position)??this._cameraPosition}set cameraPosition(t){var i;if(this.ready){const r=Ve((i=this.view.camera)==null?void 0:i.position,t);r&&this._mutateCamera(o=>{o.position=r})}else this._cameraPosition=t}get cameraTilt(){var t;return((t=this.view.camera)==null?void 0:t.tilt)??this._cameraTilt}set cameraTilt(t){this.ready&&t!=null&&this._mutateCamera(i=>{i.tilt=t}),this._cameraTilt=t}get center(){return this.view.center??this._center}set center(t){const i=Ce(t,this.ready?this.view:void 0);i&&(this.ready&&(this.view.center=i),this._center=i)}get extent(){return this.view.extent??this._extent}set extent(t){var i;this.ready&&t&&!((i=this.extent)!=null&&i.equals(t))&&(this.view.extent=t),this._extent=t}get gamepad(){return this.ready?this.view.input.gamepad:void 0}get interacting(){return this.view.interacting}get itemId(){var t;return((t=this._map.portalItem)==null?void 0:t.id)??this._itemId}set itemId(t){this._itemId=t,this.ready?Ye.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error):this.view.ready!=null&&(this._map.destroy(),this._map=new qe(this._editMapProperties({portalItem:{id:this._itemId}})),this.view.map=this._map)}get navigating(){return this.view.navigating}get performanceInfo(){return this.view.performanceInfo}get resolution(){return this.view.resolution}get scale(){return this.view.scale??this._scale}set scale(t){this.ready&&(this.view.scale=t),this._scale=t}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint??this._viewpoint}set viewpoint(t){this.ready&&Zt(this.viewpoint,t)&&(this.view.viewpoint=t),this._viewpoint=t}get zoom(){return this.view.zoom??this._zoom}set zoom(t){this.ready&&(this.view.zoom=t),this._zoom=t}async addLayer(t,i){var r;(r=this.map)==null||r.add(t,i)}async addLayers(t,i){var r;(r=this.map)==null||r.addMany(t,i)}async addTable(t){var i;(i=this.map)==null||i.tables.add(t)}async addTables(t,i){var r;(r=this.map)==null||r.tables.addMany(t,i)}async closePopup(){var t;(t=this.view)==null||t.closePopup()}async destroy(){await this.manager.destroy()}async goTo(t,i){var r;return await((r=this.view)==null?void 0:r.goTo(t,i))}async hitTest(t,i){var r;return await((r=this.view)==null?void 0:r.hitTest(t,i))}async openPopup(t){var i;await((i=this.view)==null?void 0:i.openPopup(t))}async takeScreenshot(t){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(t))}toMap(t,i){return this.view.toMap(t,i)}toScreen(t){return this.view.toScreen(t)}async tryFatalErrorRecovery(){var t;(t=this.view)==null||t.tryFatalErrorRecovery()}async whenAnalysisView(t){var i;return await((i=this.view)==null?void 0:i.whenAnalysisView(t))}async whenLayerView(t){var i;return await((i=this.view)==null?void 0:i.whenLayerView(t))}load(){var t;this.el.childElem=document.createElement("div"),this.el.append(this.el.childElem),(t=this.view).container??(t.container=this.el.childElem)}loaded(){this.manager.onLifecycle(()=>[ie(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),ie(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}_editMapProperties(t){this.map&&(this._map=this.map),this.itemId&&(t.portalItem={id:this.itemId});const{basemap:i,...r}=t;return i||(t=r),t}async _editViewProperties(t){await this.manager.use(this._map),this.view.ui||(t.ui={components:["attribution"]}),t.map??(t.map=this._map);const i=Ce(this.center,void 0);i&&(t.center=i),this.viewpoint&&(t.viewpoint=this.viewpoint),this.scale!==void 0&&(t.scale=this.scale),this.extent&&(t.extent=this.extent),this.camera&&(t.camera=this.camera);const r=Ve(void 0,this.cameraPosition);return r&&(t.camera??(t.camera={}),t.camera.position=r),this.cameraHeading!=null&&(t.camera??(t.camera={}),t.camera.heading=this.cameraHeading),this.cameraTilt!=null&&(t.camera??(t.camera={}),t.camera.tilt=this.cameraTilt),this.cameraFov!=null&&(t.camera??(t.camera={}),t.camera.fov=this.cameraFov),this.zoom!==void 0&&(t.zoom=this.zoom),t}_mutateCamera(t){const i=this.view.camera.clone();t(i),Ee(this.view.camera,i)||(this.view.camera=i)}};x.properties={_map:16,view:32,allLayerViews:0,alphaCompositingEnabled:5,analyses:0,autoDestroyDisabled:5,basemap:1,basemapView:0,camera:0,cameraFov:9,cameraHeading:9,cameraPosition:1,cameraTilt:9,center:1,clippingArea:0,constraints:0,displayFilterDisabled:5,environment:0,extent:0,fatalError:0,floors:0,gamepad:32,graphics:0,ground:1,groundView:0,highlights:0,highlightOptions:0,interacting:32,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,performanceInfo:32,popup:0,popupDisabled:5,qualityProfile:1,ready:4,resolution:32,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,updating:7,viewingMode:1,viewpoint:0,zoom:9},x.shadowRootOptions=Qe,x.styles=yi;let ye=x;Xe("arcgis-scene",ye);export{ye as ArcgisScene};
