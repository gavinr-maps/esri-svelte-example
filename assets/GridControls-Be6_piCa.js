const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BPm91e5Z.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DwIhxbHs.js","./dom-DEluURzl.js","./observers-Co4E8E8j.js","./keyed-CU1C-h1n.js","./directive-helpers-DaBykg1t.js","./ref-D9wHsL_T.js","./interactive-DTzfFku4.js","./loadable-XBvaWFYY.js","./component-CBVlbUuE.js","./index-BeicfmvH.js","./index-DMeQur4V.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./openCloseComponent-nqWrSaIH.js","./static-DLD4WjLv.js","./FloatingArrow-BZRr6Zld.js","./useFocusTrap-COeL24Kx.js","./focusTrapComponent-D1wJZ4RD.js","./key-CZcQa38B.js","./index-DK5B8inx.js","./array-BbE1dLa5.js","./index-Cz6Ao6Wl.js","./ExpandToggle-BhiztZLi.js","./index--OBudxYA.js","./label-CHHpnzD0.js","./index-Bts9-rBr.js","./index-DUx6F4yX.js","./index-BSn6RZnP.js","./_commonjsHelpers-DqlTr81k.js","./global-BYws3GYH.js","./index-fFnlo_g2.js","./index-DWeq-ojO.js","./customElement-BxsvsANk.js","./live-D7NQ-TrC.js","./form-BzoUrXC7.js","./Validation-BYp9DS84.js","./input-DI9tZAPS.js","./index-BVlRRyQC.js","./locale-CXx8I9ox.js","./index-DLytGOKi.js","./index-jjUP6Yam.js","./index-B3pS2bTY.js","./core-zHisM37C.js","./index-yzfJymDm.js","./index-MCMiazMa.js","./repeat-B6KIBwLP.js","./math-BpAtBkbz.js","./throttle-DCm6gPaM.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./index-4eY77cms.js";import{r as o,m as s,a as P,g as tt,N as L,B as et}from"./Accessor-BmwT4B0c.js";import{h as u}from"./Color-VJEMvW-n.js";import"./intl-Duiy0OzY.js";import{p as it,d as $,P as rt}from"./reactiveUtils-XM7cS2OP.js";import{g as ot}from"./unitFormatUtils-Q7ZG7HcF.js";import{n as a,O as st,c as nt,v as at,e as V}from"./jsxFactory-Cnml7uXM.js";import{e as A}from"./globalCss-vQlnDsEX.js";import{r as q,t as lt,o as x}from"./LabeledSwitch--Ta60UQe.js";import{i as pt}from"./Evented-Dw4_VOGn.js";import{_ as z,M as ct}from"./mathUtils-Cfq9PL9W.js";import{j as k,x as j}from"./Point-Cz2JYYmX.js";import{U as dt,O as mt}from"./projection-CyCZAIaD.js";import{u as ht}from"./scaleUtils-DPfHG2g0.js";import{S as ut}from"./JSONSupport-DcrLLGjL.js";import{r as gt}from"./enumeration-DpvDkLNI.js";import{e as U}from"./projectVectorToVector-CCOy_B5J.js";import{e as vt}from"./defaultUnit-CHqZKPQE.js";import{d as F,y as _t}from"./TextSymbol-BLIQ6RKX.js";import{t as yt,l as bt,f as wt,u as ft}from"./gridUtils-DPJnnI3Y.js";import{DrawGraphicTool2D as St}from"./editingTools-JEBHcv68.js";import{d as Ct}from"./SnappingManager-DoaI-UDx.js";import{d as W}from"./RightAngleSnappingHint-BepRvd6S.js";import{x as Mt}from"./TextOverlayItem-Bocd_PuB.js";import{o as Tt}from"./formatUtils-DK6L-D15.js";import{s as xt}from"./substitute-CvdjmBYq.js";import"./colorUtils-Rxh2V3ai.js";import"./Promise-DfET-uns.js";import"./cast-CsZslgGN.js";import"./SimpleObservable-CvOkykwM.js";import"./ByteSizeUnit-BsxeN7wM.js";import"./Cyclical-Dlbl-cQK.js";import"./quantityUtils-BsDK158M.js";import"./uuid-Cl5lrJ4c.js";import"./writer-DKgfqj4X.js";import"./vec3f64-BLpZdpfb.js";import"./Extent-g5W9hy0j.js";import"./Polyline-s-JzsQqo.js";import"./projectBuffer-CQnuEMuP.js";import"./geodesicConstants-RQL9oKdk.js";import"./projectPointToVector-BoxjK-qy.js";import"./getDefaultUnitForView-BBSnYQvp.js";import"./Portal-CmmHxpLg.js";import"./screenUtils-_ZIvrt5o.js";import"./geodesicUtils-Cvz9v8ds.js";import"./normalizeUtils-BTGdXlpz.js";import"./normalizeUtilsCommon-lGDszWRI.js";import"./jsonUtils-CwFG8yN4.js";import"./utils-YowqfOgk.js";import"./utils-B-dlKIhi.js";import"./Graphic-Dt0LgVGU.js";import"./Clonable-Z-AWS-16.js";import"./opacityUtils-Dim20wpZ.js";import"./ActionToggle-D7439N1A.js";import"./Identifiable-BHVfzH03.js";import"./typeUtils-B6WBEKDM.js";import"./collectionUtils-CTT-51g7.js";import"./aaBoundingBox-Dw3yBk2f.js";import"./SnappingVisualizer2D-xvUExsy2.js";import"./vec2-ChnYg_BJ.js";import"./common-DQOJ18NT.js";import"./vec2f64-Dy6m9Nrb.js";import"./enums-BTM-fOHQ.js";import"./SnappingVisualizer-bfo0JaXd.js";import"./PointSnappingHint-DWAfJfrj.js";import"./vec32-Dvg_eL9J.js";import"./editPlaneUtils-Cjvg8foP.js";import"./UpdatingHandles-CzJ4c3KT.js";import"./coordinateFormatter-sQ_KRFCi.js";import"./GraphicsLayer-D3KyXpUc.js";import"./GraphicsCollection-BJ5Nr2H8.js";import"./Layer-DH4_Pn8a.js";import"./TimeExtent-BO6BsF_x.js";import"./timeUtils-C1c_L2Fd.js";import"./ScaleRangeLayer-Cnzwr9PT.js";import"./layerContainerType-C5CzMsLd.js";import"./jsonUtils-DZz5FrgB.js";import"./utils-DYurMneM.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-Fi6iAz29.js";import"./ElevationInfo-BPOqhCue.js";import"./unitConversionUtils-rg07EgOm.js";import"./lengthUtils-_77UiyVF.js";import"./dehydratedFeatureComparison-j4L0peJx.js";import"./createUtils-BLSknDZf.js";import"./Circle-DhDdChqp.js";import"./geometryEngine-CLtm9OQA.js";import"./geometryEngineBase-B0ZyeKAX.js";import"./_commonjsHelpers-DCkdB7M8.js";import"./hydrated-DcIAHEVL.js";import"./surfaceCoordinateSystems-DVyjKZ7x.js";import"./memoize-DmxaQ-k8.js";import"./ReactiveSet-DgPcISC1.js";import"./diffUtils-BanfihCO.js";import"./elevationInfoUtils-D26wVF2d.js";import"./ViewingMode-Dodu7ZZk.js";import"./DrawingMode-Cvvf0VVz.js";import"./EditGeometryOperations-CAMJU2Wn.js";import"./vec42-YcqnINSP.js";import"./vec4f64-o2zAXfmz.js";import"./plane-CpXmOyqq.js";import"./mat3f64-BBpwCtoL.js";import"./mat4f64-Dk4dwAN8.js";import"./quatf64-CCm9z-pX.js";import"./mathUtils-BgCEaV43.js";import"./geometry2dUtils-D9Oax6Qb.js";import"./dragEventPipeline-Dj33NxJd.js";import"./meshVertexSpaceUtils-AgAbm20L.js";import"./MeshLocalVertexSpace-CnHk-qPr.js";import"./hydratedFeatures-CNHxsqRS.js";import"./angularMeasurementUtils-hHgHLVYP.js";import"./SketchLabelOptions-DnwnoaXO.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingDragPipelineStep-dx2sltqU.js";import"./Scheduler-i_u8qdlN.js";import"./signal-CySMLEX9.js";import"./debugFlags-B1LM_Apo.js";import"./SnappingOperation-D1hMlFdT.js";import"./mat2d-D9DBP-jx.js";import"./mat2df64-CBKYtunK.js";import"./quat-CP7JhygC.js";import"./helpMessageUtils-2XpUG8Xk.js";import"./helpMessageUtils3d-BpdsCwtg.js";import"./SketchTooltipInfo-BnqQiqHr.js";import"./MeshTransform-mu8wTSqx.js";import"./axisAngleDegrees-DdLZENJj.js";import"./keybindings-CTmT1RTo.js";import"./InputManager-DZ3jJnlx.js";import"./Queue-BQesTh_6.js";import"./themeUtils-C3zvZbsE.js";import"./a11yUtils-ClKbIIe-.js";import"./quantityFormatUtils-Bo0-7oki.js";import"./directionModeIcons-Br5woIHu.js";import"./automaticAreaMeasurementUtils-BdEZtLRA.js";import"./geodesicMeasurementUtils-B-7dBAnY.js";import"./euclideanAreaMeasurementUtils-ButVfzxp.js";import"./earcut-D9gy186-.js";import"./triangle-B1tKFm7z.js";import"./sphere-Cin5efBj.js";import"./mat3-CR8GKnhD.js";import"./lineSegment-v806maA5.js";import"./euclideanLengthMeasurementUtils-Bcu5HQVu.js";import"./spatialReferenceEllipsoidUtils-DBqQpPRa.js";import"./geodesicAreaMeasurementUtils-CfJYiWyy.js";import"./automaticLengthMeasurementUtils-4SpTQo4O.js";import"./geodesicLengthMeasurementUtils-B4BXDmbs.js";import"./InteractiveToolBase-rZBtMOMv.js";import"./interfaces-D6pIddIh.js";import"./SketchOptions-D7mgFOwQ.js";import"./boundedPlane-DuGhiiFM.js";import"./cimSymbolUtils-DzhKvmq_.js";import"./utils-UPZJIDfz.js";import"./defaultCIMValues-Bb-CUowV.js";import"./GraphicManipulator-D7rJmkQr.js";import"./defaults-FkBa0ybj.js";import"./defaultsJSON-GKolV7NZ.js";import"./drapedUtils--IsYcWNz.js";import"./colorUtils-DaPfwnk3.js";import"./drawUtils-BdkQO_cU.js";import"./hitTestSelectUtils-UXJPjatw.js";import"./screenUtils-BWEEmpSb.js";import"./viewUtils-CV6QVz7y.js";import"./Query-B_2mhyL4.js";import"./Field-BDG0QV_T.js";import"./fieldType-CBeoJWlv.js";import"./FullTextSearch-CBnxSwz4.js";import"./utils-BjSXFjBJ.js";import"./Version-Cd3TlGH0.js";import"./number-QOqKffTG.js";let g=class extends ut{constructor(i){super(i),this.center=new k,this.dynamicScaling=!0,this.majorLineColor=u.fromArray([115,115,115,1]),this.majorLineInterval=10,this.minorLineColor=u.fromArray([165,165,165,1]),this.rotateWithMap=!1,this.rotation=0,this.spacing=1,this.type="measured",this.units="miles"}};o([s()],g.prototype,"center",void 0),o([s()],g.prototype,"dynamicScaling",void 0),o([s()],g.prototype,"majorLineColor",void 0),o([s()],g.prototype,"majorLineInterval",void 0),o([s()],g.prototype,"minorLineColor",void 0),o([s()],g.prototype,"rotateWithMap",void 0),o([s()],g.prototype,"rotation",void 0),o([s()],g.prototype,"spacing",void 0),o([gt({measured:"measured"})],g.prototype,"type",void 0),o([s()],g.prototype,"units",void 0),g=o([P("esri.grids.MeasuredGrid")],g);let v=class extends tt{constructor(i){super(i),this.color=new u([255,127,0,1]),this.isDecoration=!0,this.length=34,this.rotation=0,this.thickness=2,this.visible=!0}get _strokeStyle(){return this.color.toCss(!0)}render(){const{x:i,y:t,length:e,thickness:r,rotation:n}=this,l=e/2,d=`0 0 ${e} ${e}`,c=`M${l} 0 V${e} M0 ${l} H${e}`;return a("div",{classes:{"esri-box-overlay-item":!0},dir:"ltr",styles:{left:`${(i??0)-l}px`,top:`${(t??0)-l}px`,width:`${e}px`,height:`${e}px`,transform:`rotate(${n}deg)`,visibility:this.visible?"visible":"hidden"}},a("svg",{styles:{overflow:"visible"},viewbox:d},a("path",{d:c,stroke:this._strokeStyle,"stroke-width":r})))}renderCanvas(){}};o([s()],v.prototype,"color",void 0),o([s()],v.prototype,"isDecoration",void 0),o([s()],v.prototype,"length",void 0),o([s()],v.prototype,"rotation",void 0),o([s()],v.prototype,"thickness",void 0),o([s()],v.prototype,"visible",void 0),o([s()],v.prototype,"x",void 0),o([s()],v.prototype,"y",void 0),o([s({readOnly:!0})],v.prototype,"_strokeStyle",null),v=o([P("esri.views.overlay.CrosshairOverlayItem")],v);const It=v,K=i=>{if(i==null||isNaN(i))return 0;const t=i+180;return Math.trunc(z(t,360))},$t=i=>{let t=i;return t==null?0:(typeof t=="string"&&(t=parseInt(t,10)),isNaN(t)?0:z(Math.trunc(t),360)-180)},B=(i,t)=>{if(!i||t.length<3)return;const[e,r,n,l]=t,[d,c]=l===void 0?[1,.25]:[l,.25*l];i.majorLineColor=u.fromArray([e,r,n,d]),i.minorLineColor=u.fromArray([e,r,n,c])},N=Symbol("grid-interactivity");let p=class extends pt.EventedAccessor{constructor(t){super(t),this._drawGraphicTool=null,this._crosshairLabel=null,this._crosshairItem=null,this.snappingManager=null,this.snappingOptions=null,this.view=null,this.placementDisabled=!1,this._mostRecentlyShownGrid=null,this._sketchedVertexCount=0}initialize(){this.addHandles([it(()=>!this.displayEnabled,()=>{this.interactivePlacementState=null}),$(()=>{var t;return(t=this.view)==null?void 0:t.viewpoint},()=>{this._renderOverlays()}),$(()=>{var t;return(t=this.snappingOptions)==null?void 0:t.gridEnabled},t=>{t!=null&&this.trySetDisplayEnabled(t)}),$(()=>{var t;return(t=this.view)==null?void 0:t.grid},(t,e)=>{this._mostRecentlyShownGrid=!t&&e?e:null})])}destroy(){var t,e,r,n;this._resetGridPlacementState(),this._crosshairItem&&((e=(t=this.view)==null?void 0:t.overlay)==null||e.removeItem(this._crosshairItem),this._crosshairItem=L(this._crosshairItem)),this._crosshairLabel&&((n=(r=this.view)==null?void 0:r.overlay)==null||n.removeItem(this._crosshairLabel),this._crosshairLabel=L(this._crosshairLabel))}get displayEnabled(){var t;return!!((t=this.view)!=null&&t.grid)}get dynamicScaling(){var t;return((t=this.grid)==null?void 0:t.dynamicScaling)??!1}set dynamicScaling(t){this.grid&&(this.grid.dynamicScaling=t)}get grid(){var t;return((t=this.view)==null?void 0:t.grid)??this._mostRecentlyShownGrid}set gridColor(t){this._set("gridColor",t);const[e,r,n,l]=t.toArray();B(this.grid,[e,r,n,l/255])}get gridControlsEnabled(){return this.displayEnabled&&!this.interactivePlacementState}set interactivePlacementState(t){this._set("interactivePlacementState",t),this._resetGridPlacementState(),t&&this._startGridManipulation(t)}get majorLineInterval(){var t;return((t=this.grid)==null?void 0:t.majorLineInterval)??10}set majorLineInterval(t){this.grid&&(this.grid.majorLineInterval=t<1?1:t>15?15:t)}get rotateWithMap(){var t;return((t=this.grid)==null?void 0:t.rotateWithMap)??!1}set rotateWithMap(t){this.grid&&(this.grid.rotateWithMap=t)}get rotation(){var t;return((t=this.grid)==null?void 0:t.rotation)??-180}set rotation(t){this.grid&&(this.grid.rotation=t)}get snappingEnabled(){var t;return(this.grid&&((t=this.snappingOptions)==null?void 0:t.gridEnabled))??!1}set snappingEnabled(t){const{snappingOptions:e}=this;e&&(e.gridEnabled=t)}get spacing(){var t;return((t=this.grid)==null?void 0:t.spacing)??1}set spacing(t){this.grid&&t>0&&(this.grid.spacing=t)}get unit(){var t;return(t=this.grid)==null?void 0:t.units}set unit(t){this.grid&&(this.grid.units=t)}get gridOutOfScale(){return!this.dynamicScaling&&this._pixelsPerStride!=null&&this._pixelsPerStride<yt}get effectiveSpacingAfterDynamicScaling(){var t;return this.majorLineInterval<1||!this.dynamicScaling||!this.view||this._pixelsPerStride==null||!((t=this.grid)!=null&&t.spacing)?null:this.grid.spacing*bt(this.majorLineInterval,this._pixelsPerStride,this.dynamicScaling)}get numericSpacingInputShouldBeVisible(){var t;return!!((t=this.view)!=null&&t.spatialReference)&&wt(this.view.spatialReference)}get _metersPerSRUnit(){if(!(this.view&&this.displayEnabled&&this.grid&&dt(this.grid.center.spatialReference,this.view.spatialReference)))return null;const t=mt(this.grid.center,this.view.spatialReference);return ft(t)}get _pixelsPerStride(){var n;if(!((n=this.view)!=null&&n.scale)||!this.displayEnabled||!this.grid||this._metersPerSRUnit==null)return null;const t=this.grid,{scale:e,spatialReference:r}=this.view;return j(t.spacing,t.units,"meters")/(this._metersPerSRUnit*ht(e,r))}get _isPlacing(){if(!this._drawGraphicTool)return!1;const t=this.interactivePlacementState;return t==="place"||t==="interactive"&&this._sketchedVertexCount===0}get _isRotating(){if(!this._drawGraphicTool)return!1;const t=this.interactivePlacementState;return t==="rotate"||t==="interactive"&&this._sketchedVertexCount===1}get _isScaling(){return this._drawGraphicTool?this.interactivePlacementState==="interactive"&&this._sketchedVertexCount===1:!1}togglePlacementState(t){this.interactivePlacementState=this.interactivePlacementState===t?null:t}trySetDisplayEnabled(t){const{view:e}=this;if(e!=null&&e.ready)if(!e.grid&&t)if(this._mostRecentlyShownGrid)e.grid=this._mostRecentlyShownGrid;else{const r=this.defaultUnit==="imperial"?"feet":"meters";e.grid=new g({units:r,center:e.center??new k,rotateWithMap:!0}),B(this.grid,[115,115,115])}else t||(e.grid=null);else et.getLogger(this).warn("Attempting to enable grid display while view is not ready")}startPlacement(t){const{view:e,snappingManager:r}=this;if(!e)return;this._set("interactivePlacementState",t),this._sketchedVertexCount=0;const n=new St({view:e,graphicProperties:{attributes:{[W]:W}},sketchOptions:{tooltips:{enabled:!0,visibleElements:{direction:!1,rotation:!1,totalLength:!1,elevation:!1,distance:!1,area:!1}}},geometryType:"polyline",mode:"click",snapToScene:!1,snappingManager:r,forceUniformSize:!0,centered:!1,cursor:this.interactivePlacementState==="interactive"||this.interactivePlacementState==="place"?"none":null,regularVerticesSymbol:void 0,activeVertexSymbol:Pt,activeLineSymbol:H,graphicSymbol:H});this._drawGraphicTool=n,e.addAndActivateTool(n),this._renderOverlays(),this.addHandles([n.on("cursor-update",l=>this._onCursorUpdate(l)),n.on("complete",()=>this._onDrawComplete()),n.on("vertex-add",l=>this._onVertexAdd(l,t))],N)}async _startGridManipulation(t){const{view:e}=this;if(!e)return void(this.interactivePlacementState=null);const r=new CustomEvent("before-placement",{cancelable:!0});this.emit("before-placement",r),r.defaultPrevented||this.startPlacement(t)}_onCursorUpdate(t){var e;try{if(this._isPlacing){const r=t.vertices[0].coordinates;return void this._handlePlace(r)}if(this._drawGraphicTool.cursor=null,this._isRotating&&this._handleRotate(t.vertices[0].coordinates),this._isScaling){const r=(e=this._drawGraphicTool)==null?void 0:e.drawOperation.cursorVertex;this._handleScale(r)}}finally{this._renderOverlays()}}_onDrawComplete(){this._drawGraphicTool.cursor=null,this.interactivePlacementState=null}_onVertexAdd(t,e){const r=t.vertices[0].coordinates;this._isPlacing&&this._handlePlace(r),this._isRotating&&this._sketchedVertexCount>0&&this._handleRotate(r),this._isScaling&&this._sketchedVertexCount>0&&this._handleScale(U(r[0],r[1],void 0,this.view.spatialReference)),this._sketchedVertexCount++,this._drawGraphicTool.cursor=null,this._sketchedVertexCount!==2&&e==="interactive"||(this.interactivePlacementState=null),this._renderOverlays()}_handlePlace(t){const{grid:e,view:r}=this;e&&r&&(e.center=new k({x:t[0],y:t[1],spatialReference:r.spatialReference}))}_handleRotate(t){var D;const{grid:e,view:r}=this;if(!e||!r)return;(D=this._drawGraphicTool)==null||D.sketchOptions.tooltips.set("enabled",!1);const{x:n,y:l}=e.center,[d,c]=t,y=r.toScreen(e.center,{pickClosestTarget:!0}),m=y&&r.toMap(y),w=r.toScreen(U(d,c,void 0,r.spatialReference),{pickClosestTarget:!0}),S=w&&r.toMap(w),M=m?m.x:n,E=m?m.y:l,T=M-(S?S.x:d),R=E-(S?S.y:c);if(T===0&&R===0)return;const Q=Math.atan2(R,T),G=ct(Q),X=e.rotateWithMap,Y=r.viewpoint.rotation??0,Z=X?G:G-Y;e.rotation=Math.fround(Z)%360}_handleScale(t){const{view:e,grid:r,_drawGraphicTool:n,interactivePlacementState:l,_metersPerSRUnit:d}=this;if(!(t&&e&&r&&n&&d))return;n.sketchOptions.tooltips.enabled=!1;const c=l==="interactive"?r.center:n.drawOperation.firstVertex;if(!c||!t)return;const y=e==null?void 0:e.toScreen(c),m=y&&e.toMap(y),w=e==null?void 0:e.toScreen(t),S=m??c,M=(w&&e.toMap(w))??t,E=Math.sqrt((S.x-M.x)**2+(S.y-M.y)**2),T=j(E*d,"meters",r.units);this.spacing=T}_renderOverlays(){this._renderCrosshairOverlay(),this._renderTextOverlay()}_renderTextOverlay(){const{grid:t,view:e,_drawGraphicTool:r}=this,n=this._getCrosshairLabel();if(!(t&&(e!=null&&e.overlay)&&r&&n))return;const l=e.toScreen(t.center,{pickClosestTarget:!0});l&&(n.position=[l.x+12,l.y+12]),this._isRotating?(n.text=`${K(t.rotation)}${Tt}`,n.visible=!0):n.visible=!1}_renderCrosshairOverlay(){const{grid:t,view:e,_drawGraphicTool:r}=this;if(!t||!(e!=null&&e.overlay)||!r)return;const n=this._getCrosshair();if(!n)return;const l=e.toScreen(t.center);l&&(n.x=l.x,n.y=l.y,n.rotation=t.rotateWithMap?e.viewpoint.rotation-t.rotation:-t.rotation,n.visible=!!r)}_getCrosshairLabel(){if(this._crosshairLabel)return this._crosshairLabel;const{grid:t,view:e,_drawGraphicTool:r}=this;if(!t||!(e!=null&&e.overlay)||!r)return null;const n=new Mt({anchor:"top-left",fontSize:10,textColor:new u([21,21,21]),backgroundColor:new u([248,248,248]),padding:8,borderRadius:20});return e.overlay.addItem(n),this._crosshairLabel=n,n}_getCrosshair(){var r;const{_crosshairItem:t,view:e}=this;return e!=null&&e.overlay?t&&e.overlay.items.includes(t)?t:(this._crosshairItem=new It({color:e.effectiveTheme.accentColor,thickness:4,length:36,visible:!0}),(r=e.overlay)==null||r.addItem(this._crosshairItem),this._crosshairItem):null}_resetGridPlacementState(){var t,e;this.removeHandles(N),this._crosshairItem&&(this._crosshairItem.visible=!1),this._crosshairLabel&&(this._crosshairLabel.visible=!1),this._drawGraphicTool&&(((t=this.view)==null?void 0:t.activeTool)===this._drawGraphicTool&&(this.view.activeTool=null),(e=this.view)==null||e.tools.remove(this._drawGraphicTool)),this._drawGraphicTool=L(this._drawGraphicTool)}};o([s(vt)],p.prototype,"defaultUnit",void 0),o([s({readOnly:!0})],p.prototype,"displayEnabled",null),o([s()],p.prototype,"dynamicScaling",null),o([s()],p.prototype,"grid",null),o([s({type:u})],p.prototype,"gridColor",null),o([s({readOnly:!0})],p.prototype,"gridControlsEnabled",null),o([s()],p.prototype,"interactivePlacementState",null),o([s()],p.prototype,"majorLineInterval",null),o([s()],p.prototype,"rotateWithMap",null),o([s()],p.prototype,"rotation",null),o([s()],p.prototype,"snappingEnabled",null),o([s()],p.prototype,"snappingManager",void 0),o([s({type:Ct})],p.prototype,"snappingOptions",void 0),o([s()],p.prototype,"spacing",null),o([s()],p.prototype,"unit",null),o([s()],p.prototype,"view",void 0),o([s({readOnly:!0})],p.prototype,"gridOutOfScale",null),o([s({readOnly:!0})],p.prototype,"effectiveSpacingAfterDynamicScaling",null),o([s({readOnly:!0})],p.prototype,"numericSpacingInputShouldBeVisible",null),o([s()],p.prototype,"placementDisabled",void 0),o([s()],p.prototype,"_metersPerSRUnit",null),o([s()],p.prototype,"_pixelsPerStride",null),o([s()],p.prototype,"_isPlacing",null),o([s()],p.prototype,"_isRotating",null),o([s()],p.prototype,"_isScaling",null),o([s()],p.prototype,"_mostRecentlyShownGrid",void 0),o([s()],p.prototype,"_sketchedVertexCount",void 0),p=o([P("esri.widgets.support.GridControls.GridControlsViewModel")],p);const J=p,H=new F({width:0}),Pt=new _t({color:u.fromArray([0,0,0,0]),outline:new F({color:u.fromArray([0,0,0,0])})}),b="esri-grid-controls",_={base:b,borderedSwitch:`${b}__switch--bordered`,container:`${b}__container`,numericInputsContainer:`${b}__numeric-inputs__container`,tilegroup:`${b}__tilegroup`,tile:`${b}__tile`,tileDisabled:`${b}__tile--disabled`,tileContent:`${b}__tile__content`,suffixedInputContainer:`${b}__input-with-suffix__container`,inlineIcon:`${b}__inline-icon`},C={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},I=u.fromArray([115,115,115]),O=u.fromArray([200,200,200]),Et=["interactive","place","rotate"];let h=class extends st{constructor(i,t){super(i,t),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new J,this.visibleElements=new q}initialize(){this.addHandles([$(()=>{var i,t;return(t=(i=this.view)==null?void 0:i.grid)==null?void 0:t.majorLineColor},i=>{!i||I.equals(i)||O.equals(i)||(this.customColor=i)},rt)])}loadDependencies(){return Promise.all([nt({action:()=>f(()=>import("./index-BPm91e5Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),"action-bar":()=>f(()=>import("./index-BeicfmvH.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,0,19,20,21,22,23,24,26,27,28,29,30,31,32,33,34,35,36,37,38]),import.meta.url),label:()=>f(()=>import("./index--OBudxYA.js"),__vite__mapDeps([39,2,3,4,5,6,7,8,9,10,11,12,13,40,17,14]),import.meta.url),icon:()=>f(()=>import("./index-DwIhxbHs.js").then(i=>i.i),__vite__mapDeps([16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18]),import.meta.url),popover:()=>f(()=>import("./index-DMeQur4V.js").then(i=>i.i),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,0,19,20,21,22,23,24,27,28,29,30,31,32,33,34]),import.meta.url),tooltip:()=>f(()=>import("./index-Bts9-rBr.js"),__vite__mapDeps([41,2,3,4,5,6,7,8,9,10,11,12,13,21,20,27,17,14,28,29,31,19]),import.meta.url),"color-picker":()=>f(()=>import("./index-DUx6F4yX.js"),__vite__mapDeps([42,43,2,3,4,5,6,7,8,9,10,11,12,13,19,20,44,45,17,14,16,18,46,47,48,49,21,50,22,40,23,24,51,52,15,53,34,54,55,1,56,30,57,58,59,60,61,62,63,28]),import.meta.url),"input-number":()=>f(()=>import("./index-BVlRRyQC.js"),__vite__mapDeps([53,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,46,47,49,20,19,21,50,22,34,40,23,54,24,51,52,15]),import.meta.url)}),lt()])}get icon(){return C.widgetIcon}set icon(i){this._overrideIfSome("icon",i)}get label(){return this.messages.widgetLabel}set label(i){this._overrideIfSome("label",i)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(i){this.viewModel.snappingManager=i}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(i){this.viewModel.snappingOptions=i}get theme(){var t;const i=(t=this.viewModel.grid)==null?void 0:t.majorLineColor;return i?I.equals(i)?"dark":O.equals(i)?"light":"custom":null}set theme(i){const{viewModel:t,customColor:e,view:r}=this;switch(i){case"light":t.gridColor=O;break;case"dark":t.gridColor=I;break;case"custom":t.gridColor=e??(r==null?void 0:r.effectiveTheme.accentColor)??I}}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}render(){return a("div",{"aria-label":this.label,class:this.classes(_.base,A.widget,A.panel)},a("div",{class:_.container},this._renderContent()))}_renderContent(){const{visibleElements:i}=this;return[i.gridEnabledToggle?this._renderEnabledToggle():null,i.placementButtons?this._renderGridPlacementButtons():null,i.numericInputs?this._renderNumericInputs():null,i.lineIntervalInput?this._renderIntervalInput():null,i.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,i.dynamicScaleToggle?this._renderDynamicScaleToggle():null,i.rotateWithMapToggle?this._renderRotateToggle():null,i.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:i,placementDisabled:t,gridControlsEnabled:e}=this.viewModel,r=t||!e;return a("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,a("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},Et.map(n=>this._renderPlacementModeButton(n,r,i))))}_renderPlacementModeButton(i,t,e){const r=this.messages.placementState[i],n=`__placement-action-${i}`;return a("div",null,a("calcite-action",{active:e===i,alignment:"center",disabled:t,icon:C.placementState[i],id:n,onclick:()=>this.viewModel.togglePlacementState(i),text:r}),a("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:n},r))}_renderNumericInputs(){const{rotation:i,spacing:t,effectiveSpacingAfterDynamicScaling:e,numericSpacingInputShouldBeVisible:r,unit:n="meters"}=this.viewModel,l=this.messagesUnits.units[n].abbr,d=this.viewModel.gridControlsEnabled,c=e!=null&&e!==this.viewModel.spacing,y=`__spacing_input_scaled-${this.id}`;return a("div",{class:this.classes(_.numericInputsContainer)},[r?a("calcite-label",{key:"spacing-label",scale:"s"},a("span",null,this.messages.inputLabel.spacing,c?a("calcite-icon",{class:this.classes(_.inlineIcon),icon:C.warning,id:y,scale:"s",tabIndex:0}):void 0),a("div",{class:_.suffixedInputContainer},a("calcite-input-number",{disabled:!d,numberButtonType:"none",suffixText:l,value:`${t==null?void 0:t.toFixed(2)}`,onCalciteInputNumberChange:({currentTarget:m})=>{const w=parseFloat(m.value);this.viewModel.spacing=w,w!==this.viewModel.spacing&&(m.value=`${this.viewModel.spacing}`)}}),c?a("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:y},xt(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:ot(this.messagesUnits,e,n,2,"plural")})):void 0)):void 0,a("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,a("calcite-input-number",{disabled:!d,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${K(i)}`,onCalciteInputNumberChange:({currentTarget:m})=>this.viewModel.rotation=$t(m.value)}))])}_renderIntervalInput(){const{majorLineInterval:i,gridControlsEnabled:t}=this.viewModel;return a("div",{class:this.classes(_.numericInputsContainer)},a("calcite-label",{scale:"s"},this.messages.inputLabel.interval,a("calcite-input-number",{disabled:!t,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${i}`,onCalciteInputNumberChange:({currentTarget:e})=>{const r=Number.parseInt(e.value,10);this.viewModel.majorLineInterval=r,r!==this.viewModel.majorLineInterval&&(e.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:i,gridControlsEnabled:t}=this.viewModel;return a(x,{checked:!!((i==null?void 0:i.gridEnabled)??!1),disabled:!(t&&i),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:e=>{var r;return(r=this.viewModel.snappingOptions)==null?void 0:r.set("gridEnabled",e)}})}_renderDynamicScaleToggle(){const{viewModel:i,messages:t}=this,e=this.visibleElements.outOfScaleWarning&&i.gridOutOfScale;return a(x,{checked:i.dynamicScaling,disabled:!i.gridControlsEnabled,hint:e?t.warnings.outOfScale:void 0,hintIcon:C.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:t.switchLabel.scaling,onChange:r=>i.dynamicScaling=r})}_renderRotateToggle(){const{gridControlsEnabled:i,rotateWithMap:t}=this.viewModel;return a(x,{checked:t,disabled:!i,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:e=>this.viewModel.rotateWithMap=e})}_renderEnabledToggle(){return a("div",{class:_.borderedSwitch},a(x,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:i=>this.viewModel.trySetDisplayEnabled(i)}))}_renderColorSelection(){const{customColor:i}=this,t=`${this.id}--custom-grid-color-button`;return a("calcite-label",{scale:"s"},this.messages.inputLabel.theme,a("div",{class:_.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:t}),a("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:t},a("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:(i==null?void 0:i.toHex({digits:8}))??"#000000ff",onCalciteColorPickerChange:e=>{const r=u.fromHex(e.currentTarget.value);r&&(this.customColor=r,this.theme="custom")}}))]))}_renderThemeTile(i){const{theme:t}=this,{value:e}=i,r=this.messages.gridTheme[e],n=`${this.id}--theme_tile_${e}`,l=`${n}__label`,d=C.gridTheme[e],c=this.viewModel.gridControlsEnabled;return a("div",{class:at({[_.tile]:!0,[_.tileDisabled]:!c}),id:i.id,role:"button"},a("input",{"aria-labelledby":l,checked:t===e,disabled:!c,id:n,name:`${this.id}--theme`,onchange:y=>{var m;this.theme=e,(m=y.target)==null||m.focus()},tabIndex:0,type:"radio"}),a("div",{class:_.tileContent},a("calcite-icon",{icon:d,scale:"l"}),a("calcite-label",{for:n,id:l},r)))}};o([s({type:u})],h.prototype,"customColor",void 0),o([s()],h.prototype,"icon",null),o([s()],h.prototype,"label",null),o([s(),V("esri/widgets/support/GridControls/t9n/GridControls")],h.prototype,"messages",void 0),o([s(),V("esri/core/t9n/Units")],h.prototype,"messagesUnits",void 0),o([s()],h.prototype,"snappingManager",null),o([s()],h.prototype,"snappingOptions",null),o([s()],h.prototype,"theme",null),o([s()],h.prototype,"view",null),o([s({type:J})],h.prototype,"viewModel",void 0),o([s({type:q,nonNullable:!0})],h.prototype,"visibleElements",void 0),h=o([P("esri.widgets.support.GridControls")],h);const jr=h;export{jr as default};
