import{p as h,A as a,a as l}from"./index-c99fc80c-B8Hva1Pq.js";import"./index-d2df902e-k_MvfteY.js";import{b as i}from"./component-utils-de9339fe-Dlc67iIs.js";import{m}from"./chunk-PVEVZB4O-2c3b8893-zEP54EYc.js";import{a as d}from"./index-CeCSsEgo.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.30/esri/copyright.txt for details.
 * v4.30.7
 */const _=(s,e)=>(t,o)=>w(t,s,o);class p extends a{hostConnected(){this.component.manager.didLoadCalled&&i(this.component)}async hostLoad(){await super.hostLoad(),!this.component.manager.destroyed&&(this._watchMetaProperties(),l.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"viewModel"))}hostLoaded(){var r;const{el:e}=this.component,t=((r=e.shadowRoot)==null?void 0:r.firstElementChild)??e.firstElementChild??void 0;e.childElem=t??e.childElem,e.childElem;let o=!1;const n=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view,set:c=>{this._instance.view=c,this._watchViewDestroy(),this.component.requestUpdate(),o||(o=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),n&&(this._instance.view=n),this.component.el.isConnected&&(i(this.component),this._watchViewDestroy())}hostDisconnected(){var e,t;typeof this.component.el.childElem=="object"&&((t=(e=this.component.el.view)==null?void 0:e.ui)==null||t.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){this.watch("position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&i(this.component)}),this.watch("referenceElement",()=>i(this.component))}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var t;return((t=this.component.el.view)==null?void 0:t.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}}const w=h(p),C=m(d);export{_ as m,C as u};
