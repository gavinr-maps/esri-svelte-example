const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./timeUtils-BnYjW4Rc.js","./subclass-BZA_h8Db.js","./Accessor-BLX9ikPh.js","./timeUtils-8fb_2oAt.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./locale-C9TlLpzi.js","./TimeExtent-DocT5yPf.js","./tslib.es6-B3Jf3DVX.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./writer-DNAwXnhG.js","./utils-BpB3MnW1.js","./Version-BSlAgupz.js","./tagSymbols-BPcGfZon.js","./calcite-action-Bys6x4p_.js","./action-D0Er9Ef6.js","./jsxFactory-CJa39Fro.js","./intl-CChhNOV8.js","./messages-OmQvZhAg.js","./Evented-BHRw9x22.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./dom-D_AJDzAj.js","./interactive-y84HQRWL.js","./loadable-DM18hPdE.js","./locale-A4FuYD8q.js","./key-D63ExP77.js","./observers-D2xgmA06.js","./component-6CIDVndn.js","./t9n-D0ry3MEw.js","./icon-BQO9J86c.js","./loader-C-zIPscB.js","./calcite-action-menu-U0ATVHAe.js","./action-menu-C6uYzPu-.js","./array-BMcQdnYi.js","./popover-Q5ruM4hh.js","./floating-ui-Bma_zPVt.js","./debounce-BOqmhDXu.js","./focusTrapComponent-BSUg_DLj.js","./openCloseComponent-CmOrfBN-.js","./Heading-D7P0OjYI.js","./FloatingArrow-BBdsG5MP.js"])))=>i.map(i=>d[i]);
import{_ as O}from"./index-Bh2oEzTI.js";import{r as i}from"./tslib.es6-B3Jf3DVX.js";import{n as B,m as o,w as ot,a as mt,S as yt}from"./subclass-BZA_h8Db.js";import{n as xt}from"./compilerUtils-Dw3R0f-Z.js";import{V as ut,I as wt,c as Tt}from"./Accessor-BLX9ikPh.js";import{watch as F,initial as U,syncAndInitial as bt,whenOnce as Et}from"./reactiveUtils-C5zUhJQJ.js";import{o as dt,c as kt}from"./timeUtils-8fb_2oAt.js";import{r as St,o as Mt,j as W,E as $t}from"./date-DlqISzcw.js";import{l as P}from"./TimeInterval-CNlkea1s.js";import{A as Ct}from"./Slider-Lf1VhhQX.js";import{e as rt,B as Ft,r as Dt,n as a,o as jt}from"./jsxFactory-CJa39Fro.js";import{e as y}from"./globalCss-CZa70j6i.js";import{i as C}from"./legacyIcon-CEIp6Pa9.js";import{t as L}from"./accessibleHandler-hWbBTR_7.js";import{e as At}from"./vmEvent-D4Ubqkbq.js";import{c as Rt}from"./themeUtils-C3zvZbsE.js";import{V as ct}from"./Collection-CEdjem1-.js";import{o as Vt}from"./Evented-BHRw9x22.js";import{p as g}from"./TimeExtent-DocT5yPf.js";import{y as It,a as Wt}from"./Widgets-upjPhxDC.js";import"./asyncUtils-CWX51uTe.js";import"./shared-B3wH2qpO.js";import"./SimpleObservable-KocWTzVy.js";import"./jsonMap-0cxwUWs2.js";import"./locale-C9TlLpzi.js";import"./Clonable-D3rtuBWg.js";import"./assets-C43MgM-v.js";import"./enumeration-Ba5njXdz.js";import"./intl-CChhNOV8.js";import"./messages-OmQvZhAg.js";import"./cast-Bjksrh93.js";import"./Promise-B2Hu02L7.js";import"./uuid-fwrPAdZb.js";import"./writer-DNAwXnhG.js";const d="esri-time-slider",s={timeSlider:`${d}`,timeSliderOutOfBounds:`${d}--out-of-bounds`,timeSliderMode:`${d}__mode--`,timeSliderLayout:`${d}__layout--`,timeSliderRow:`${d}__row`,animation:`${d}__animation`,animationButton:`${d}__animation-button`,timeExtent:`${d}__time-extent`,timeExtentGroup:`${d}__time-extent-group`,timeExtentDate:`${d}__time-extent-date`,timeExtentTime:`${d}__time-extent-time`,timeExtentSeparator:`${d}__time-extent-separator`,playbackControls:`${d}__playback-controls`,min:`${d}__min`,minDate:`${d}__min-date`,minTime:`${d}__min-time`,slider:`${d}__slider`,sliderMajorTick:"majorTick",sliderMinorTick:"minorTick",max:`${d}__max`,maxDate:`${d}__max-date`,maxTime:`${d}__max-time`,previous:`${d}__previous`,previousButton:`${d}__previous-button`,next:`${d}__next`,nextButton:`${d}__next-button`,warning:`${d}__warning`,warningText:`${d}__warning-text`,hasActions:`${d}--has-actions`,actions:`${d}__actions`,actionsButton:`${d}__actions-button`},at=1e4;function Z(t){return t!=null&&t.count!==void 0}function j(t){return t!=null&&t.interval!==void 0}function lt(t){return t!=null&&t.dates!==void 0}let h=class extends Vt.EventedAccessor{constructor(t){super(t),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new ct,this.fullTimeExtent=null,this.loop=!1,this.mode="time-window",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([F(()=>this.effectiveStops,()=>{this.timeExtent==null&&(this.timeExtent=this._getDefaultTimeExtent())},U),F(()=>this.view,(t,e)=>{this._unregisterWidget(e),this._registerWidget(t)},bt),F(()=>this.timeExtent,t=>{if(this.view==null)return;const e=this.view.timeExtent;(t!=null&&!t.isAllTime||e!=null&&!e.isAllTime)&&(t!=null&&e!=null&&t.equals(e)||(this.view.timeExtent=t))},U),F(()=>{var t;return(t=this.view)==null?void 0:t.timeExtent},t=>{this._isViewTimeExtentInitialized?(t!=null&&!t.isAllTime||this.timeExtent!=null&&!this.timeExtent.isAllTime)&&(t!=null&&this.timeExtent!=null&&t.equals(this.timeExtent)||(this.timeExtent=t)):this._isViewTimeExtentInitialized=!0})])}destroy(){this._timerId!=null&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(lt(e)){const{dates:l}=e;if(l==null||l.length===0)return null;const u=l.sort((v,c)=>v.getTime()-c.getTime());if(t==null)return u;const{start:n,end:p}=t;return n==null||p==null?u:u.filter(v=>!(v.getTime()<n.getTime()||v.getTime()>p.getTime()))}if(Z(e)){const l=e.timeExtent??t;return this._divideTimeExtentByCount(l,e.count)}if(j(e)){const l=e.timeExtent??t;return this._divideTimeExtentByInterval(l,e.interval)}return[]}set playRate(t){t<=0||t>36e5||(this.state==="playing"&&this._startAnimation(),this._set("playRate",t))}get state(){return this.fullTimeExtent==null?"disabled":this._animationController!=null?"playing":"ready"}get timeExtentValues(){const{mode:t,timeExtent:e}=this;if(e==null||e.isAllTime||e.isEmpty)return null;const{start:l,end:u}=e;switch(t){case"cumulative-from-end":case"instant":return l!=null?[l.getTime()]:null;case"cumulative-from-start":return u!=null?[u.getTime()]:null;case"time-window":return l!=null&&u!=null?[l.getTime(),u.getTime()]:null}}static async getPropertiesFromWebMap(t,e){ut(B.getLogger("esri.widgets.TimeSlider.TimeSliderViewModel"),"`TimeSliderViewModel.getPropertiesFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.29",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0});const{getTimeSliderSettingsFromWebDocument:l}=await O(()=>import("./timeUtils-BnYjW4Rc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url);return l(t,e)}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(t){this.emit("trigger-action",{action:t})}updateWebDocument(t){const e=new It({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:Z(this.stops)?this.stops.count:null,numThumbs:this.mode==="time-window"?2:1,stopDelay:this.playRate,stopInterval:j(this.stops)?this.stops.interval:null,stops:lt(this.stops)?this.stops.dates:null});t.widgets?t.widgets.timeSlider=e:t.widgets=new Wt({timeSlider:e})}valuesToTimeExtent(t){if(t==null)return null;const e=t.sort((n,p)=>n-p).map(n=>new Date(n)),l=e.length>0?e[0]:null,u=e.length>1?e[1]:null;switch(this.mode){case"time-window":return new g({start:l,end:u});case"instant":return new g({start:l,end:l});case"cumulative-from-start":return new g({start:null,end:l});case"cumulative-from-end":return new g({start:l,end:null});default:return g.allTime}}async _animate(){var t;try{const e=this.view,l=(t=this._animationController)==null?void 0:t.signal;await Promise.all([wt(this.playRate,null,l),e!=null&&Et(()=>e.updating===!1,l)])}catch(e){return Tt(e)||B.getLogger(this).error(e),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),this._animationController!=null&&this._animate()}_divideTimeExtentByCount(t,e=10){if(!t||!e)return[];const{start:l,end:u}=t;if(l==null||u==null)return[];if(e>at)return this._divideTimeExtentByCount(t);const n=[],p=l.getTime(),v=u.getTime()-p;for(let c=0;c<=e;c++)n.push(new Date(p+c/e*v));return n}_divideTimeExtentByInterval(t,e,l=at){if(!t||!e)return[];const{start:u,end:n}=t;if(u==null||n==null)return[];const p=n.getTime()-u.getTime(),v=e.toMilliseconds();if(v<=0||p/v>l)return this._divideTimeExtentByCount(t);const c=[],{value:E,unit:T}=e;let r=u;for(;r.getTime()<=n.getTime();)c.push(new Date(r.getTime())),r=dt(r,E,T);return c}_getDefaultTimeExtent(){const{effectiveStops:t,mode:e}=this;if(t==null||!e)return null;switch(e){case"time-window":return t.length>1?new g({start:t[0],end:t[1]}):null;case"cumulative-from-start":return t.length>0?new g({start:null,end:t[0]}):null;case"cumulative-from-end":return t.length>0?new g({start:t[0],end:null}):null;case"instant":return t.length>0?new g({start:t[0],end:t[0]}):null;default:return null}}_registerWidget(t){t!=null&&(t.persistableViewModels.includes(this)||t.persistableViewModels.add(this))}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(t){const{forward:e,allowRestart:l}=t,{effectiveStops:u}=this;if(this.timeExtentValues==null||u==null)return;const n=u.map(r=>r.getTime()),p=this.timeExtentValues.map(r=>{const _=n.indexOf(r);if(_!==-1)return _;const k=n.reduce((f,S)=>Math.abs(S-r)<Math.abs(f-r)?S:f);return n.indexOf(k)}),v=p.map(r=>r+(e?1:-1)),c=v.some(r=>r<0||r>n.length-1),{loop:E,state:T}=this;if(c)if(E||l){const r=Math.min(...p),_=Math.max(...p),k=(e?p.map(f=>f-r):p.map(f=>f+(n.length-1-_))).map(f=>n[f]);this.timeExtent=this.valuesToTimeExtent(k)}else T==="playing"&&this.stop();else{const r=v.map(_=>n[_]);this.timeExtent=this.valuesToTimeExtent(r)}}_stopAnimation(){this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(t){t!=null&&t.persistableViewModels.remove(this)}};i([o()],h.prototype,"_animationController",void 0),i([o({type:ct})],h.prototype,"actions",void 0),i([o({readOnly:!0})],h.prototype,"effectiveStops",null),i([o({type:g})],h.prototype,"fullTimeExtent",void 0),i([o({nonNullable:!0})],h.prototype,"loop",void 0),i([o({nonNullable:!0})],h.prototype,"mode",void 0),i([o({nonNullable:!0,value:1e3})],h.prototype,"playRate",null),i([o({readOnly:!0})],h.prototype,"state",null),i([o({cast:t=>t==null?null:(j(t)&&(t.interval=ot(P,t.interval)),(j(t)||Z(t))&&(t.timeExtent=ot(g,t.timeExtent)),t)})],h.prototype,"stops",void 0),i([o({type:g})],h.prototype,"timeExtent",void 0),i([o({readOnly:!0})],h.prototype,"timeExtentValues",null),i([o()],h.prototype,"view",void 0),i([o()],h.prototype,"next",null),i([o()],h.prototype,"play",null),i([o()],h.prototype,"previous",null),i([o()],h.prototype,"stop",null),i([o()],h.prototype,"updateWebDocument",null),h=i([mt("esri.widgets.TimeSlider.TimeSliderViewModel")],h);const N=h,Lt=3,Ot=858,Bt=[{minor:{value:100,unit:"milliseconds"},major:{value:1,unit:"seconds"},format:{second:"numeric"}},{minor:{value:500,unit:"milliseconds"},major:{value:5,unit:"seconds"},format:{second:"numeric"}},{minor:{value:1,unit:"seconds"},major:{value:20,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:2,unit:"seconds"},major:{value:30,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:10,unit:"seconds"},major:{value:1,unit:"minutes"},format:{minute:"numeric"}},{minor:{value:15,unit:"seconds"},major:{value:5,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"minutes"},major:{value:20,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:5,unit:"minutes"},major:{value:2,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:15,unit:"minutes"},major:{value:6,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"hours"},major:{value:1,unit:"days"},format:{day:"numeric",month:"short"}},{minor:{value:6,unit:"hours"},major:{value:1,unit:"weeks"},format:{day:"numeric",month:"short"}},{minor:{value:1,unit:"days"},major:{value:1,unit:"months"},format:{month:"long"}},{minor:{value:2,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:3,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:4,unit:"days"},major:{value:3,unit:"months"},format:{month:"short",year:"numeric"}},{minor:{value:1,unit:"weeks"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"months"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:2,unit:"months"},major:{value:2,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"years"},major:{value:1,unit:"decades"},format:{year:"numeric"}},{minor:{value:2,unit:"years"},major:{value:5,unit:"decades"},format:{year:"numeric"}},{minor:{value:5,unit:"decades"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1,unit:"centuries"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:2,unit:"centuries"},major:{value:20,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:5,unit:"centuries"},major:{value:50,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:10,unit:"centuries"},major:{value:100,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:20,unit:"centuries"},major:{value:200,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:50,unit:"centuries"},major:{value:500,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:100,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:200,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:500,unit:"centuries"},major:{value:5e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1e3,unit:"centuries"},major:{value:1e4,unit:"centuries"},format:{era:"short",year:"numeric"}}];let m=class extends Ft{constructor(t,e){super(t,e),this._ignoreNextSliderUpdate=!1,this._slider=new Ct({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1,thumbsConstrained:!1}),this._tickFormat=null,this.disabled=!1,this.labelFormatFunction=null,this.messages=null,this.messagesCommon=null,this.tickConfigs=null,this.timeVisible=!1,this.viewModel=new N}initialize(){this.addHandles([F(()=>this._slider.values,t=>{if(this._ignoreNextSliderUpdate)return void(this._ignoreNextSliderUpdate=!1);const e=this.viewModel.valuesToTimeExtent(t);this.timeExtent!=null?e!=null?this.timeExtent.equals(e)||(this.timeExtent=e):this.timeExtent=null:e!=null&&(this.timeExtent=e)}),F(()=>this.effectiveStops,()=>this._updateSliderSteps(),U)])}loadDependencies(){return Dt({action:()=>O(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([16,17,18,8,19,4,5,1,6,20,2,9,10,11,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),import.meta.url),"action-menu":()=>O(()=>import("./calcite-action-menu-U0ATVHAe.js"),__vite__mapDeps([40,41,18,8,19,4,5,1,6,20,2,9,10,11,21,22,23,24,25,26,27,28,29,42,30,34,32,17,31,33,35,36,37,38,39,43,44,45,46,47,48,49]),import.meta.url)})}destroy(){this._slider.destroy(),this._tickFormat=null}get _dateFormat(){return this._getIntlOptions("short-date")}get _timeFormat(){return this._getIntlOptions("long-time")}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get effectiveStops(){return this.viewModel.effectiveStops}get fullTimeExtent(){return this.viewModel.fullTimeExtent}set fullTimeExtent(t){this.viewModel.fullTimeExtent=t}get icon(){return"clock"}set icon(t){this._overrideIfSome("icon",t)}get interactive(){return!(this.disabled||this.viewModel.state==="disabled"||this.timeZone===St)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){["auto","compact","wide"].includes(t)||(t="auto"),this._set("layout",t)}get loop(){return this.viewModel.loop}set loop(t){this.viewModel.loop=t}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}get playRate(){return this.viewModel.playRate}set playRate(t){this.viewModel.playRate=t}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}get tickFormats(){const{timeZone:t}=this;return Bt.map(({minor:e,major:l,format:u})=>({minor:new P(e),major:new P(l),format:{...u,timeZone:t}}))}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(t){this.viewModel.timeExtent=t}get timeZone(){var t;return((t=this.viewModel.view)==null?void 0:t.timeZone)??Mt}set timeZone(t){this._overrideIfSome("timeZone",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}static async getPropertiesFromWebMap(t,e){return ut(B.getLogger("esri.widgets.TimeSlider"),"`TimeSlider.getPropertiesFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.29",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),N.getPropertiesFromWebMap(t,e)}next(){return this.viewModel.next()}play(){return this.viewModel.play()}previous(){return this.viewModel.previous()}stop(){return this.viewModel.stop()}render(){var tt,et;const{_slider:t,actions:e,domNode:l,effectiveStops:u,fullTimeExtent:n,interactive:p,messages:v,messagesCommon:c,mode:E,tickConfigs:T,timeExtent:r,timeVisible:_,viewModel:{state:k,timeExtentValues:f}}=this;if(n!=null){const{start:w,end:it}=n;if(w!=null&&it!=null){const A=w.getTime(),R=it.getTime(),nt=t.min!==A||t.max!==R;if(nt&&(t.min=A,t.max=R),T!=null)t.tickConfigs!==T&&(t.tickConfigs=T);else{const gt=(R-A)/(((tt=t.trackElement)==null?void 0:tt.offsetWidth)||400),$=this.tickFormats.find(V=>V.minor.toMilliseconds()>Lt*gt)??this.tickFormats.at(-1),st=this._tickFormat!==$&&$!=null;if(st&&(this._tickFormat=$),nt||st){const V={mode:"position",values:this._getTickPositions($.minor),labelsVisible:!1,tickCreatedFunction:(I,b)=>{b==null||b.classList.add(s.sliderMinorTick)}},_t={mode:"position",values:this._getTickPositions($.major),labelsVisible:!0,tickCreatedFunction:(I,b)=>{b==null||b.classList.add(s.sliderMajorTick)},labelFormatFunction:I=>W(I,$.format)};t.tickConfigs=[V,_t]}}}}const S=((et=this.fullTimeExtent)==null?void 0:et.start)==null||this.fullTimeExtent.end==null||this.timeExtent==null||this.timeExtent.isAllTime||this.timeExtent.isEmpty||this.timeExtent.start!=null&&(this.timeExtent.start<this.fullTimeExtent.start||this.timeExtent.start>this.fullTimeExtent.end)||this.timeExtent.end!=null&&(this.timeExtent.end>this.fullTimeExtent.end||this.timeExtent.end<this.fullTimeExtent.start);if(S)switch(this._ignoreNextSliderUpdate=!0,E){case"time-window":t.values=[t.min,t.max];break;case"instant":case"cumulative-from-end":t.values=[t.min];break;case"cumulative-from-start":t.values=[t.max]}else f!=null?yt(t.values,f)||(t.values=f):t.values=null;t.disabled=!p;const pt=k==="ready",D=k==="playing",x=S||!p||u==null||u.length===0,M=this.layout==="auto"?l.clientWidth<Ot?"compact":"wide":this.layout,z=a("div",{class:s.animation},a("button",{"aria-disabled":x?"true":"false","aria-label":D?c.control.stop:c.control.play,bind:this,class:this.classes(y.widgetButton,s.animationButton,x&&y.buttonDisabled),disabled:x,onclick:this._playOrStopClick,title:D?c.control.stop:c.control.play,type:"button"},a("div",{class:this.classes((pt||x)&&C.play,D&&C.pause)}))),ht=this.labelFormatFunction!=null?a("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:s.timeExtentDate,"data-date":r?[r.start,r.end]:null,"data-layout":M,"data-type":"extent",key:"extent"}):r==null||r!=null&&r.isAllTime?[a("div",{class:this.classes(s.warning,C.noticeTriangle)}),a("div",{class:s.warningText,key:"warning-text"},v.noTimeExtent)]:r.isEmpty?[a("div",{class:this.classes(s.warning,C.noticeTriangle)}),a("div",{class:s.warningText,key:"warning-text"},v.emptyTimeExtent)]:[r.start!=null&&a("div",{class:s.timeExtentGroup,key:"start-date-group"},a("div",{class:s.timeExtentDate,key:"start-date"},this._formatDate(r.start)),_?a("div",{class:s.timeExtentTime,key:"start-time"},this._formatTime(r.start)):null),r.start!=null&&r.end!=null&&r.start.getTime()!==r.end.getTime()&&a("div",{class:s.timeExtentSeparator,key:"separator"},"–"),r.end!=null&&(r.start==null||r.start.getTime()!==r.end.getTime())&&a("div",{class:s.timeExtentGroup,key:"end-date-group"},a("div",{class:s.timeExtentDate,key:"end-date"},this._formatDate(r.end)),_?a("div",{class:s.timeExtentTime,key:"end-time"},this._formatTime(r.end)):null)],q=a("div",{class:this.classes(s.timeExtent,!p&&y.buttonDisabled)},[ht]),vt=this.labelFormatFunction!=null?a("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:s.minDate,"data-date":n==null?void 0:n.start,"data-layout":M,"data-type":"min",key:"min-date"}):(n==null?void 0:n.start)!=null&&[a("div",{class:s.minDate,key:"min-date"},this._formatDate(n.start)),_&&a("div",{class:s.minTime,key:"min-time"},this._formatTime(n.start))],G=a("div",{class:this.classes(s.min,!p&&y.buttonDisabled)},[vt]),H=a("div",{class:s.slider},t.render()),ft=this.labelFormatFunction!=null?a("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:s.maxDate,"data-date":n==null?void 0:n.end,"data-layout":M,"data-type":"max",key:"max-date"}):(n==null?void 0:n.end)!=null&&[a("div",{class:s.maxDate,key:"max-date"},this._formatDate(n.end)),_&&a("div",{class:s.maxTime,key:"max-time"},this._formatTime(n.end))],J=a("div",{class:this.classes(s.max,!p&&y.buttonDisabled)},[ft]),K=a("div",{class:s.previous},a("button",{"aria-disabled":x?"true":"false","aria-label":c.pagination.previous,bind:this,class:this.classes(y.widgetButton,s.previousButton,(D||x)&&y.buttonDisabled),disabled:x,onclick:this._previousClick,title:c.pagination.previous,type:"button"},a("div",{class:C.reverse}))),Q=a("div",{class:s.next},a("button",{"aria-disabled":x?"true":"false","aria-label":c.pagination.next,bind:this,class:this.classes(y.widgetButton,s.nextButton,(D||x)&&y.buttonDisabled),disabled:x,onclick:this._nextClick,title:c.pagination.next,type:"button"},a("div",{class:C.forward}))),X=(e==null?void 0:e.length)>0,Y=X&&a("div",{class:s.actions,title:c.options},a("calcite-action-menu",{class:s.actionsButton,label:c.options},e.toArray().map(w=>a("calcite-action",{bind:this,icon:w.icon,id:w.id,onclick:()=>this.viewModel.triggerAction(w),text:w.title,textEnabled:!0,title:w.title}))));return a("div",{afterCreate:w=>{this.addHandles(jt(w,()=>this.scheduleRender()))},"aria-label":v.widgetLabel,class:this.classes(s.timeSlider,y.widget,`${s.timeSliderMode}${E}`,`${s.timeSliderLayout}${M}`,!p&&y.disabled,S&&s.timeSliderOutOfBounds,X&&s.hasActions,Rt())},M==="wide"&&a("div",{class:s.timeSliderRow},a("div",{class:s.playbackControls},[z,q,G,H,J,K,Q]),Y),M==="compact"&&[a("div",{class:s.timeSliderRow,key:"time-slider-row-1"},[q,Y]),a("div",{class:s.timeSliderRow,key:"time-slider-row-2"},[H]),a("div",{class:s.timeSliderRow,key:"time-slider-row-3"},[G,K,z,Q,J])])}updateWebDocument(t){var e;(e=this.viewModel)==null||e.updateWebDocument(t)}_createLabel(t){if(this.labelFormatFunction==null)return;const e=t.getAttribute("data-type"),l=t.getAttribute("data-layout"),u=t["data-date"];this.labelFormatFunction(u,e,t,l)}_formatDate(t){return W(t,this._dateFormat)}_formatTime(t){return W(t,this._timeFormat)}_getIntlOptions(t){const{timeZone:e}=this;return{...$t(t),timeZone:e}}_getTickPositions(t){const{fullTimeExtent:e}=this;if((e==null?void 0:e.start)==null||e.end==null)return[];const{start:l,end:u}=e,n=[],{value:p,unit:v}=t;let c=kt(l,v,this.timeZone);for(;c.getTime()<=u.getTime();)c.getTime()>=l.getTime()&&n.push(c.getTime()),c=dt(c,p,v,this.timeZone);return n}_updateSliderSteps(){this._slider.steps=this.effectiveStops!=null&&this.effectiveStops.length>0?this.effectiveStops.map(t=>t.getTime()):null}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:xt(this.viewModel.state)}}_previousClick(){this.viewModel.previous()}_nextClick(){this.viewModel.next()}};i([o()],m.prototype,"_dateFormat",null),i([o()],m.prototype,"_timeFormat",null),i([o()],m.prototype,"actions",null),i([o()],m.prototype,"disabled",void 0),i([o()],m.prototype,"effectiveStops",null),i([o()],m.prototype,"fullTimeExtent",null),i([o()],m.prototype,"icon",null),i([o({readOnly:!0})],m.prototype,"interactive",null),i([o()],m.prototype,"label",null),i([o()],m.prototype,"labelFormatFunction",void 0),i([o({value:"auto"})],m.prototype,"layout",null),i([o()],m.prototype,"loop",null),i([o(),rt("esri/widgets/TimeSlider/t9n/TimeSlider")],m.prototype,"messages",void 0),i([o(),rt("esri/t9n/common")],m.prototype,"messagesCommon",void 0),i([o()],m.prototype,"mode",null),i([o()],m.prototype,"playRate",null),i([o()],m.prototype,"stops",null),i([o()],m.prototype,"tickConfigs",void 0),i([o()],m.prototype,"tickFormats",null),i([o()],m.prototype,"timeExtent",null),i([o({nonNullable:!0})],m.prototype,"timeVisible",void 0),i([o()],m.prototype,"timeZone",null),i([o()],m.prototype,"view",null),i([o({type:N}),At("trigger-action")],m.prototype,"viewModel",void 0),i([L()],m.prototype,"_playOrStopClick",null),i([L()],m.prototype,"_previousClick",null),i([L()],m.prototype,"_nextClick",null),m=i([mt("esri.widgets.TimeSlider")],m);const we=m;export{we as default};
