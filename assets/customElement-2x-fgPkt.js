import{i as g,L as f,u as _,c as y,n as b,x as u,s as d,d as w,b as F,a as N}from"./index-tefRSezt.js";import{r as s,m as r,a as x,g as E,B as h}from"./Accessor-BHnuXKD2.js";import{s as S}from"./useT9n-B0I3cNlQ.js";import{u as I}from"./useViewModel-BxErfUSG.js";import{e as m}from"./globalCss-CyPh17x2.js";import"./index-BkKcLxWB.js";import"./component-utils-DWY0IMHC.js";let t=class extends E{constructor(e){super(e),this._vendorInfo=null,this._fullscreenStyle="width: 100%; height: 100%;",this.view=null,this._errorHandler=this._errorHandler.bind(this),this._stateHandler=this._stateHandler.bind(this)}destroy(){this._removeFullscreenListeners(),this.view=null}get element(){var e;return((e=this.view)==null?void 0:e.container)??null}set element(e){this._override("element",e)}get state(){return this.element?this._isSupported()?this._isActive()?"active":"ready":"feature-unsupported":"disabled"}enter(){this._enterFullscreen()}exit(){this._exitFullscreen()}toggle(){this._isActive()?this._exitFullscreen():this._enterFullscreen()}_isSupported(){this._removeFullscreenListeners();const e=this._getVendorInfo(this.element);return this._addFullscreenListeners(e),this._vendorInfo=e,!!e}_isActive(){return!!this._vendorInfo&&!!document[this._vendorInfo.propertyName]}_stateHandler(){this.notifyChange("state"),this.state==="active"?this._addStyle():this._removeStyle()}_errorHandler(e){h.getLogger(this).error("fullscreen request failed",e)}_getVendorInfo(e){if(e)return e.requestFullscreen?{enterName:"requestFullscreen",exitName:"exitFullscreen",errorEventName:"fullscreenerror",changeEventName:"fullscreenchange",propertyName:"fullscreen"}:e.webkitRequestFullScreen?{enterName:"webkitRequestFullscreen",exitName:"webkitCancelFullScreen",errorEventName:"webkitfullscreenerror",changeEventName:"webkitfullscreenchange",propertyName:"webkitIsFullScreen"}:e.mozRequestFullScreen?{enterName:"mozRequestFullScreen",exitName:"mozCancelFullScreen",errorEventName:"mozfullscreenerror",changeEventName:"mozfullscreenchange",propertyName:"mozFullScreen"}:void 0}_enterFullscreen(){if(this.state==="feature-unsupported")return void h.getLogger(this).warn("The fullscreen API is not supported in this browser.");const{element:e}=this;e&&(this._vendorInfo&&e[this._vendorInfo.enterName].call(e),this.notifyChange("state"))}_addStyle(){const{element:e}=this;e&&e.setAttribute("style",this._fullscreenStyle)}_removeStyle(){const{element:e}=this;e&&e.removeAttribute("style")}_exitFullscreen(){if(this.state==="feature-unsupported")return;const{element:e}=this;e&&(this._vendorInfo&&document[this._vendorInfo.exitName].call(document),this.notifyChange("state"))}_addFullscreenListeners(e){e&&(document.addEventListener(e.changeEventName,this._stateHandler),document.addEventListener(e.errorEventName,this._errorHandler))}_removeFullscreenListeners(){const{_vendorInfo:e}=this;e&&(document.removeEventListener(e.changeEventName,this._stateHandler),document.removeEventListener(e.errorEventName,this._errorHandler))}};s([r()],t.prototype,"element",null),s([r({readOnly:!0})],t.prototype,"state",null),s([r()],t.prototype,"view",void 0),s([r()],t.prototype,"enter",null),s([r()],t.prototype,"exit",null),s([r()],t.prototype,"toggle",null),t=s([x("esri.widgets.Fullscreen.FullscreenViewModel")],t);const L=t;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const H=g`@layer{arcgis-fullscreen{display:block}}`,k={base:"esri-fullscreen"},z=I(L),l=class l extends f{constructor(){super(...arguments),this.messages=S(),this.viewModel=z(this),this.autoDestroyDisabled=!1,this.element=this.viewModel.element,this.icon="zoom-out-fixed",this.position="top-left",this.state=this.viewModel.state,this.arcgisPropertyChange=_()("state"),this.arcgisReady=y()}get fullscreenTitle(){var o;const n=(o=this.viewModel)==null?void 0:o.state;return n==="active"?this.messages.exit:n==="ready"?this.messages.enter:""}async destroy(){await this.manager.destroy()}_toggle(){this.viewModel.toggle()}render(){var c;const{fullscreenTitle:n,icon:o}=this,i=(c=this.viewModel)==null?void 0:c.state,p=i==="feature-unsupported",v=i==="ready"||i==="disabled"||i==="feature-unsupported"?"zoom-out-fixed":"zoom-in-fixed";return u`<div class=${d(w(k.base,m.widget))}>${!p&&u`<calcite-button class=${d(m.widgetButton)} .disabled=${i==="disabled"} .iconStart=${o??v} kind=neutral .label=${n} @click=${this._toggle} title=${n??F}></calcite-button>`||""}</div>`}};l.properties={autoDestroyDisabled:5,element:0,icon:3,label:1,messageOverrides:0,position:3,referenceElement:1,state:3},l.shadowRootOptions=b,l.styles=H;let a=l;N("arcgis-fullscreen",a);export{a as ArcgisFullscreen};
