/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.2
 */function P(s,d){Array.isArray(d)?s._watchHandles=[...s._watchHandles,...d]:s._watchHandles.push(d)}function x(s){s.el.childElem&&(s.el.childElem.ownedBy=s.el);const d=E(s);if(!d){const l=b(s.referenceElement);if(!l){e(s);return}return r(l,s,!0),l}return C(d,s.el.parent)||(s.el.parent=d,d.tagName.toLowerCase()==="arcgis-expand"?T(d,s):d.tagName.toLowerCase()==="arcgis-placement"?S(d,s):r(d,s,!1)),d}function E({el:s}){for(let d=s.parentElement;d;d=(d==null?void 0:d.parentElement)??null){if(c.has(d.tagName.toLowerCase()))return d;if("ownedBy"in d&&d.ownedBy instanceof HTMLElement&&c.has(d.ownedBy.tagName.toLowerCase()))return d.ownedBy}}const c=new Set(["arcgis-map","arcgis-scene","arcgis-expand","arcgis-placement"]);function C(s,d){if(s!==d)return!1;const l=s.tagName.toLowerCase();return l==="arcgis-expand"||l==="arcgis-placement"}function g(s,d,l="arcgisReady"){var i;const a=s;typeof((i=a.view)==null?void 0:i.ready)=="boolean"?d(a.view):s.addEventListener(l,u=>u.target===s?g(s,d,l):void 0,{once:!0})}const T=(s,d)=>g(s,l=>{var a,i;d.el.childElem&&typeof s.content=="object"&&((a=s.content)==null||a.append(d.el.childElem)),s.expandIcon=d.icon||((i=d.widget)==null?void 0:i.icon)||s.expandIcon,d.position=s.position,d.el.view=l}),S=(s,d)=>g(s,l=>{d.el.childElem&&d.el.append(d.el.childElem),d.position=s.position,d.el.view=l}),r=(s,d,l)=>g(s,a=>{l?e(d):d.el.childElem&&N(s,d),d.el.view=a},"arcgisViewReadyChange");function N(s,d){var h;const l=d.el.childElem??d.el,a=[...s.children],i={};for(const t of a){const f=t.getAttribute("position")??"manual";i[f]??(i[f]=[]),i[f].push({child:t,position:f,index:a.indexOf(t)})}const u=(h=i[d.position??"manual"])==null?void 0:h.findIndex(({child:t})=>t===d.el);s.view.ui.remove(l),s.view.ui.add(l,{position:d.position,index:u})}function L(s){let d=!1,l=s.el.view;const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(s.el),"view")??{get:()=>l,set:i=>l=i};Object.defineProperty(s.el,"view",{get:a.get.bind(s.el),set:i=>{a.set.call(s.el,i),i&&!d&&(d=!0,s.arcgisReady.emit())},configurable:!0,enumerable:!0}),l&&(s.el.view=l)}function H(s){return s==null||s===""}function A(s,d){return d!=null&&(s==null?void 0:s.position)===d.position&&(s==null?void 0:s.heading)===d.heading&&(s==null?void 0:s.tilt)===d.tilt&&(s==null?void 0:s.fov)===d.fov}function B(s,d){return d===void 0||(d==null?void 0:d.atmosphereEnabled)!==(s==null?void 0:s.atmosphereEnabled)||(d==null?void 0:d.lighting).date!==(s==null?void 0:s.lighting).date||(d==null?void 0:d.lighting).directShadowsEnabled!==(s==null?void 0:s.lighting).directShadowsEnabled||(d==null?void 0:d.lighting).cameraTrackingEnabled!==(s==null?void 0:s.lighting).cameraTrackingEnabled||(d==null?void 0:d.lighting).date!==(s==null?void 0:s.lighting).date||(d==null?void 0:d.lighting).displayUTCOffset!==(s==null?void 0:s.lighting).displayUTCOffset}function j(s,d){return d===void 0||(s==null?void 0:s.targetGeometry)!==(d==null?void 0:d.targetGeometry)||(s==null?void 0:s.rotation)!==(d==null?void 0:d.rotation)||(s==null?void 0:s.scale)!==(d==null?void 0:d.scale)}function q(s,d){return y(d==null?void 0:d.center,s)}function y(s,d){if(typeof d=="string")return y(s,d.split(",").map(Number));if(!s)return d;if(Array.isArray(d)){const l=d[0],a=d[1],i=d.length>2?d[2]:void 0;if(l!==s.longitude||a!==s.latitude||i!==s.z)return d}else if(d&&!(s!=null&&s.equals(d)))return d}async function I(s,d){d!=null&&(typeof d=="string"?s.el.view=await O(d):s.widget&&(s.el.view=d.view))}async function O(s){const d=b(s);return await new Promise(l=>{var a;typeof((a=d==null?void 0:d.view)==null?void 0:a.ready)=="boolean"?l(d.view):d&&d.addEventListener("arcgisViewReadyChange",()=>l(d.view),{once:!0})})}function e(s){s.el.childElem&&(s.el.shadowRoot??s.el).append(s.el.childElem)}function b(s){return typeof s!="string"?s??void 0:(s.includes("#")||s.includes(".")||s.includes("[")?void 0:document.querySelector(`#${s}`))??document.querySelector(s)??void 0}export{y as a,A as b,j as c,H as d,x as e,L as f,P as g,B as i,q as p,I as r};
