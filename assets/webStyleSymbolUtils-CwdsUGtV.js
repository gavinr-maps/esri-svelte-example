import{x as I,c as h,i as d}from"./symbols-CNimns--.js";import{c as v,a as S}from"./devEnvironmentUtils-CnNDiFMM.js";import{b as N}from"./subclass-BZA_h8Db.js";import{I as y,R as D}from"./assets-C43MgM-v.js";import{b as U}from"./Portal-C10FKnaA.js";import{p as w}from"./persistableUrlUtils-fa1mAujs.js";import{p as P}from"./jsonUtils-Ds2Sqto-.js";import{i as A,p as j,m as O,h as E,y as M}from"./styleUtils-BYTm14n3.js";import"./tslib.es6-B3Jf3DVX.js";import"./enumeration-Ba5njXdz.js";import"./jsonMap-0cxwUWs2.js";import"./writer-DNAwXnhG.js";import"./fieldUtils-tmQlKvWo.js";import"./Accessor-BLX9ikPh.js";import"./index-Bh2oEzTI.js";import"./intl-CChhNOV8.js";import"./date-DlqISzcw.js";import"./locale-C9TlLpzi.js";import"./messages-OmQvZhAg.js";import"./mathUtils-C4_ghTv4.js";import"./geometry-D964gYQX.js";import"./Extent-Bf3YTe7m.js";import"./Point-Cg0-ChZE.js";import"./cast-Bjksrh93.js";import"./Polyline-D9YkgmM_.js";import"./TextSymbol-D8QO_KUV.js";import"./Color-BCS62Hs5.js";import"./colorUtils-0bJDPow9.js";import"./screenUtils-_ZIvrt5o.js";import"./materialUtils-DarhapKC.js";import"./opacityUtils-C68Tlu6_.js";import"./vec3f64-BLpZdpfb.js";import"./aaBoundingBox-BE7cC1jD.js";import"./Collection-CEdjem1-.js";import"./Evented-BHRw9x22.js";import"./shared-B3wH2qpO.js";import"./SimpleObservable-KocWTzVy.js";import"./collectionUtils-D_lHIu88.js";import"./Clonable-D3rtuBWg.js";import"./reactiveUtils-C5zUhJQJ.js";import"./asyncUtils-CWX51uTe.js";import"./Loadable-BabW5Xcc.js";import"./Promise-B2Hu02L7.js";import"./layerUtils-BrNoooE9.js";import"./defaults-DZ1kfMRx.js";import"./defaultsJSON-GKolV7NZ.js";function It(t,r,o,m){const i=t.name;return i==null?Promise.reject(new N("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?$(i,r,m):A(t,r,m).then(l=>W(l,i,r,o,M,m))}function T(t,r){return r.items.find(o=>o.name===t)}function W(t,r,o,m,i,l){var c,g;const p=(o==null?void 0:o.portal)!=null?o.portal:U.getDefault(),f={portal:p,url:y(t.baseUrl),origin:"portal-item"},n=T(r,t.data);if(!n){const u=`The symbol name '${r}' could not be found`;return Promise.reject(new N("symbolstyleutils:symbol-name-not-found",u,{symbolName:r}))}let a=w(i(n,m),f),s=((c=n.thumbnail)==null?void 0:c.href)??null;const b=(g=n.thumbnail)==null?void 0:g.imageData;v()&&(a=S(a)??"",s=S(s));const R={portal:p,url:y(D(a)),origin:"portal-item"};return j(a,l).then(u=>{const x=m==="cimRef"?O(u.data):u.data,e=P(x,R);if(e&&I(e)){if(s){const F=w(s,f);e.thumbnail=new h({url:F})}else b&&(e.thumbnail=new h({url:`data:image/png;base64,${b}`}));t.styleUrl?e.styleOrigin=new d({portal:o.portal,styleUrl:t.styleUrl,name:r}):t.styleName&&(e.styleOrigin=new d({portal:o.portal,styleName:t.styleName,name:r}))}return e})}function $(t,r,o){const m=E.replaceAll(/\{SymbolName\}/gi,t),i=r.portal!=null?r.portal:U.getDefault();return j(m,o).then(l=>{const p=O(l.data);return P(p,{portal:i,url:y(D(m)),origin:"portal-item"})})}export{W as fetchSymbolFromStyle,T as getStyleItemFromStyle,It as resolveWebStyleSymbol};
