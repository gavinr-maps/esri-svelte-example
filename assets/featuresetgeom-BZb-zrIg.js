import{a as u,r as p}from"./executionError-DNkSe-Q-.js";import{n as d}from"./TimeOnly-CveCl9ie.js";import{F as O,o as J,U as o,y as f,B as l}from"./deepClone-DD9qKKD3.js";import{u as c,l as w}from"./SpatialFilter-CxgE8EI_.js";import{a as s}from"./operatorsWorkerConnection-CtZcfY03.js";import"./Accessor-BmwT4B0c.js";import"./opacityUtils-Dim20wpZ.js";import"./index-4eY77cms.js";import"./Promise-DfET-uns.js";import"./cast-CsZslgGN.js";import"./JSONSupport-DcrLLGjL.js";import"./Point-Cz2JYYmX.js";import"./writer-DKgfqj4X.js";import"./Extent-g5W9hy0j.js";import"./ImmutableArray-BPVd6ESQ.js";import"./shared-2m9g3-y2.js";import"./Field-BDG0QV_T.js";import"./enumeration-DpvDkLNI.js";import"./fieldType-CBeoJWlv.js";import"./number-QOqKffTG.js";import"./Polyline-s-JzsQqo.js";import"./mathUtils-Cfq9PL9W.js";import"./jsonUtils-CwFG8yN4.js";import"./arcade-BXELiP5l.js";import"./featureConversionUtils-CvnFcmH_.js";import"./aaBoundingBox-Dw3yBk2f.js";import"./OptimizedFeature-P2towpqD.js";import"./memoryEstimations-Bcyf-mHz.js";import"./OptimizedGeometry-BJqUA4Pi.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./FieldsIndex-FW1AMU67.js";import"./timeZoneUtils-DxzjpEBb.js";import"./WhereClause-xGR0ztic.js";import"./unitConversion-DvIVg62C.js";import"./hash-CcEbRgUF.js";import"./uuid-Cl5lrJ4c.js";import"./Portal-CmmHxpLg.js";import"./workers-Cds_sd9m.js";import"./Queue-BQesTh_6.js";import"./SimpleObservable-CvOkykwM.js";import"./intl-Duiy0OzY.js";function a(i){return async(e,n,t)=>{if(J(t,2,2,e,n),(t=O(t))[0]===null&&t[1]===null)return!1;if(l(t[0])){if(o(t[1]))return new w({parentfeatureset:t[0],relation:i,relationGeom:t[1]});if(t[1]===null)return new c({parentfeatureset:t[0]});throw new u(e,p.InvalidParameter,n)}if(o(t[0])){if(o(t[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":{const m=d(t[0]),r=d(t[1]);return m!=null&&r!=null&&s("intersects",[m.toJSON(),r.toJSON()])}case"esriSpatialRelIntersects":return s("intersects",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelContains":return s("contains",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelOverlaps":return s("overlaps",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelWithin":return s("within",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelTouches":return s("touches",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelCrosses":return s("crosses",[t[0].toJSON(),t[1].toJSON()])}throw new u(e,p.InvalidParameter,n)}if(l(t[1]))return new w({parentfeatureset:t[1],relation:i,relationGeom:t[0]});if(t[1]===null)return!1;throw new u(e,p.InvalidParameter,n)}if(t[0]===null){if(l(t[1]))return new c({parentfeatureset:t[1]});if(o(t[1])||t[1]===null)return!1}throw new u(e,p.InvalidParameter,n)}}function ot(i){i.mode==="async"&&(i.functions.intersects=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelIntersects"))},i.functions.envelopeintersects=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelEnvelopeIntersects"))},i.signatures.push({name:"envelopeintersects",min:2,max:2}),i.functions.contains=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelContains"))},i.functions.overlaps=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelOverlaps"))},i.functions.within=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelWithin"))},i.functions.touches=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelTouches"))},i.functions.crosses=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelCrosses"))},i.functions.relate=function(e,n){return i.standardFunctionAsync(e,n,async(t,m,r)=>{if(r=O(r),J(r,3,3,e,n),o(r[0])&&o(r[1]))return s("relate",[r[0].toJSON(),r[1].toJSON(),f(r[2])]);if(o(r[0])&&r[1]===null||o(r[1])&&r[0]===null)return!1;if(l(r[0])&&r[1]===null)return new c({parentfeatureset:r[0]});if(l(r[1])&&r[0]===null)return new c({parentfeatureset:r[1]});if(l(r[0])&&o(r[1]))return r[0].relate(r[1],f(r[2]));if(l(r[1])&&o(r[0]))return r[1].relate(r[0],f(r[2]));if(r[0]===null&&r[1]===null)return!1;throw new u(e,p.InvalidParameter,n)})})}export{ot as registerFunctions};
