const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BtF7Kdcs.js","./index-CjrYEQXz.js","./jsxFactory-CLjKarlq.js","./Accessor-BHnuXKD2.js","./intl-Do3GEEJ7.js","./Promise-CmQqe-ke.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./Evented-DCWccWGU.js","./reactiveUtils-BR0C1Kq4.js","./SimpleObservable-7oieNGD8.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-CJAswmP1.js","./index-73bQemcW.js","./dom--xxYYVQF.js","./observers-BdozwIHb.js","./ref-Ccn4I0kT.js","./directive-helpers-C0aXnQdc.js","./static-g4FJ4v8I.js","./form-B15gmg4q.js","./interactive-B8siLByk.js","./label-BLne9qNB.js","./loadable-DOQnSSjG.js","./component-CFGnHAqh.js","./index-Df8-0rWt.js","./floating-ui-BkLjHVN3.js","./debounce-DbkufipY.js","./key-CZcQa38B.js","./openCloseComponent-dw_x67D_.js","./dynamicClasses-pKEMtFzB.js","./index-BfAp5_ga.js","./resources6-Cs2_VmEC.js","./index-DIB7yhJF.js","./index-BGRynF8w.js","./index-Ch_sYKt7.js","./index-svtat3zr.js","./live-BIBBLA6F.js","./keyed-CdPY5MOf.js","./locale-CXx8I9ox.js","./Validation-O1TFEQW-.js","./input-DI9tZAPS.js","./index-D130RxMY.js","./index-DIp-v4qk.js","./index-DVEy4f7w.js","./FloatingArrow-D9X-HbKW.js","./useFocusTrap-ENcZoC4L.js","./focusTrapComponent-Br_3Mz8_.js"])))=>i.map(i=>d[i]);
import{_ as M,i as j,L as q,u as F,c as J,n as H,a as U}from"./index-tefRSezt.js";import{r as n,m as c,g as D,a as E,at as C,N as W}from"./Accessor-BHnuXKD2.js";import{l as G}from"./intl-Do3GEEJ7.js";import{d as w,P as $,p as K}from"./reactiveUtils-BR0C1Kq4.js";import{n as Q,a as X}from"./cast-BA_-jlhc.js";import{l as A,A as Y}from"./Slider-D6Nt9woO.js";import{e as Z,O as ee,c as ie,n as m,y as te,T as R}from"./jsxFactory-CLjKarlq.js";import{r as ae}from"./Promise-CmQqe-ke.js";import{e as P}from"./globalCss-CZa70j6i.js";import{s as le}from"./substitute-D1XJWgT5.js";import{P as se}from"./useWidget-Dlf3SkC7.js";import"./Evented-DCWccWGU.js";import"./SimpleObservable-7oieNGD8.js";import"./JSONSupport-CGdeqxpk.js";import"./uuid-Cl5lrJ4c.js";import"./index-BkKcLxWB.js";import"./component-utils-DWY0IMHC.js";const v="esri-scale-range-slider",L=`${v}__scale-menu`,g={base:v,segmentElementActive:`${v}__segment-active`,scaleIndicatorWrapper:`${v}__scale-indicator-wrapper`,scaleIndicator:`${v}__scale-indicator`,scaleIndicatorIcon:`${v}__scale-indicator-icon`,scaleIndicatorContainer:`${v}__scale-indicator-container`,scaleMenuContainer:`${L}-container`,scaleMenuSeparator:`${L}-separator`,scaleMenuToggle:`${L}-toggle`,scaleMenuSubLabel:`${L}-sublabel`,scalePreview:`${v}__scale-preview`,scalePreviewThumbnail:`${v}__scale-preview-thumbnail`},ne="en-wo",re=ae().slice(0,2);var l;(function(e){e.ar="ar",e.bg="bg",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es="es",e.et="et",e.fi="fi",e.fr="fr",e.is="is",e.it="it",e.ja="ja",e.ko="ko",e.lt="lt",e.lv="lv",e.nl="nl",e.nn="nn",e.pl="pl",e.pt="pt",e.ro="ro",e.ru="ru",e.sk="sk",e.sv="sv",e.th="th",e.zh="zh"})(l||(l={}));const ce={ae:l.en,ar:l.es,at:l.de,au:l.en,be:l.nl,bg:l.bg,bo:l.es,br:l.pt,ca:l.en,ch:l.de,ci:l.fr,cl:l.es,cn:l.zh,co:l.es,cr:l.es,cz:l.cs,de:l.de,dk:l.da,ee:l.et,eg:l.en,es:l.es,fi:l.fi,fr:l.fr,gb:l.en,gl:l.da,gr:l.el,gt:l.es,hk:l.en,id:l.en,ie:l.en,il:l.en,in:l.en,iq:l.ar,is:l.is,it:l.it,jp:l.ja,ke:l.en,kr:l.ko,kw:l.ar,li:l.de,lt:l.lt,lu:l.en,lv:l.lv,ma:l.fr,mg:l.fr,ml:l.fr,mo:l.en,mx:l.es,my:l.en,ni:l.es,nl:l.nl,no:l.nn,nz:l.en,pe:l.es,pl:l.pl,pr:l.es,pt:l.pt,ro:l.ro,ru:l.ru,rw:l.en,se:l.sv,sg:l.en,sk:l.sk,sr:l.nl,sv:l.es,th:l.th,tn:l.fr,tw:l.zh,us:l.en,ve:l.es,vi:l.en,wo:l.en,za:l.en},O=new Set(["ar-iq","ar-kw","bg-bg","cs-cz","da-dk","da-gl","de-at","de-ch","de-de","de-li","el-gr","en-ae","en-au","en-ca","en-eg","en-gb","en-hk","en-id","en-ie","en-il","en-in","en-iq","en-ke","en-lu","en-mo","en-my","en-nz","en-rw","en-sg","en-us","en-vi","en-wo","en-za","es-ar","es-bo","es-cl","es-co","es-cr","es-es","es-gt","es-mx","es-ni","es-pe","es-pr","es-sv","es-ve","et-ee","fi-fi","fr-ci","fr-fr","fr-ma","fr-mg","fr-ml","fr-tn","is-is","it-it","ja-jp","ko-kr","lt-lt","lv-lv","nl-be","nl-nl","nl-sr","nn-no","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sv-se","th-th","zh-cn","zh-tw"]);function oe(e){return e.toLowerCase()}function de(e){return`url(${Q(`esri/widgets/ScaleRangeSlider/images/scalePreview/${e}.jpg`)})`}function me(e){e=oe(e);const i=`${re}-${e}`,t=`${ce[e]}-${e}`;return de(O.has(i)?i:O.has(t)?t:ne)}function ue(e){if(!(e<0||e>=5*5))return`-${128*(e%5)}px -${128*Math.floor(e/5)}px`}var f;const N=147914382,he=[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"stateProvince",minScale:3999999},{id:"statesProvinces",minScale:6999999},{id:"countriesSmall",minScale:14999999},{id:"countriesBig",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:N}];function T(e,i){const t=he,a=t.length,s=[];let r,d=e;e=e>=0?e:0,i=i>0?i:t[a-1].minScale;for(let u=0;u<a;u++){const S=Math.min(t[u].minScale,i);r=Math.min(S,i),e<=S&&d<i&&s.push({id:t[u].id,maxScale:Math.max(d,e),minScale:r}),d=r+1}return s.reverse(),Se(s)}function Se(e){if(e.length===0)return e;const[i]=e,t=e[e.length-1];return i.minScale===i.maxScale&&(e.shift(),i.minScale+=1),t.minScale===t.maxScale&&(e.pop(),t.maxScale-=1),e}let p=f=class extends D{constructor(){super(...arguments),this.ranges=[]}static fromScaleRange({maxScale:e,minScale:i}){return new f({ranges:T(e,i)})}static async fromLayer(e){var a;await e.when();const i="tileInfo"in e?(a=e.tileInfo)==null?void 0:a.lods:void 0;let t;return i?t=T(i[i.length-1].scale,i[0].scale):t=T(0,0),new f({ranges:t})}get firstRange(){return this.ranges[0]}get lastRange(){const e=this.ranges;return e[e.length-1]}get length(){return this.ranges.length}get maxScale(){return this.lastRange.maxScale}get minScale(){return this.firstRange.minScale}isMinScaleEdge(e){const{firstRange:i}=this,t=i.minScale,a=f.RecommendedScales[i.id]||i.maxScale;return e<=t&&e>=a}isMaxScaleEdge(e){const{lastRange:i}=this,t=i.maxScale;return e<=(f.RecommendedScales[i.id]||i.minScale)&&e>=t}findScaleRange(e){const i=this.ranges;let t;if(e>=i[0].maxScale)return i[0];if(e<=i[i.length-1].minScale)return i[i.length-1];for(let a=0;a<i.length;a++){const s=i[a];if(e>=s.maxScale&&e<=s.minScale){t=s;break}}return t}findScaleRangeByIndex(e){return this.ranges[this._clampScaleRangeIndex(e)]}scaleToRangeIndex(e){return this.ranges.indexOf(this.findScaleRange(e))}clampScale(e){return Math.min(this.minScale,Math.max(this.maxScale,e))}clampMinScale(e){return e===0?this.minScale:this.clampScale(e)}clampMaxScale(e){return this.clampScale(e)}contains(e){const i=this.ranges;let t=!1;for(let a=0;a<i.length;a++){const{maxScale:s,minScale:r}=i[a];if(e>=s&&e<=r){t=!0;break}}return t}_clampScaleRangeIndex(e){if(e<=0)return 0;const t=this.ranges.length-1;return e>t?t:Math.floor(e)}};p.RecommendedScales=Object.freeze({world:N,continent:5e7,countriesBig:25e6,countriesSmall:12e6,statesProvinces:6e6,stateProvince:3e6,counties:15e5,county:75e4,metropolitanArea:32e4,cities:16e4,city:8e4,town:4e4,neighborhood:2e4,streets:1e4,street:5e3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100}),n([c()],p.prototype,"firstRange",null),n([c()],p.prototype,"lastRange",null),n([c()],p.prototype,"length",null),n([c()],p.prototype,"maxScale",null),n([c()],p.prototype,"minScale",null),n([c({constructOnly:!0})],p.prototype,"ranges",void 0),p=f=n([E("esri.widgets.ScaleRangeSlider.ScaleRanges")],p);const y=p;let h=class extends D{constructor(i){super(i),this.layer=null,this.mode="range",this.scaleRanges=y.fromScaleRange({minScale:0,maxScale:0}),this.sliderViewModel=(()=>{const{max:t}=this._getSliderIndexRange(this.scaleRanges.length-1);return new A({precision:10,min:0,max:t,values:[0,t]})})()}initialize(){this.addHandles([w(()=>this.layer,i=>i==null?void 0:i.load().catch(()=>{})),w(()=>this.mode,i=>{var t,a;i==="range"&&((t=this.sliderViewModel.values)==null?void 0:t.length)===1?this.sliderViewModel.values=[this.sliderViewModel.min,this.sliderViewModel.values[0]]:((a=this.sliderViewModel.values)==null?void 0:a.length)===2&&(i==="min-scale-only"?this.sliderViewModel.values=[this.sliderViewModel.values[0]]:i==="max-scale-only"&&(this.sliderViewModel.values=[this.sliderViewModel.values[1]]))}),w(()=>{var i,t;return{loaded:(i=this.layer)==null?void 0:i.loaded,ready:(t=this.view)==null?void 0:t.ready}},({loaded:i,ready:t})=>{if(!i||!t)return;if(this._hasTiledLayer()){const s=this._getLayerResampling()?void 0:this.mapScaleToSlider(this._getTiledLayerMaxScale()),r=this.mapScaleToSlider(this._getTiledLayerMinScale());this.sliderViewModel.effectiveMax=s,this.sliderViewModel.effectiveMin=r}else{const s=this.layer&&"maxScaleRange"in this.layer?this.layer.maxScaleRange:null,{minScale:r=0,maxScale:d=0}=s??{};this.sliderViewModel.effectiveMax=d===0?void 0:this.mapScaleToSlider(d),this.sliderViewModel.effectiveMin=r===0?void 0:this.mapScaleToSlider(r)}const a=this.layer;a&&"minScale"in a&&"maxScale"in a?(this.minScale=a.minScale,this.maxScale=a.maxScale):(this.minScale=void 0,this.maxScale=void 0)},$)])}get effectiveMaxScale(){return this.maxScale===0?this.maxScaleLimit:this.maxScale}get effectiveMinScale(){return this.minScale===0?this.minScaleLimit:this.minScale}get effectiveMaxScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.effectiveMax??this.sliderViewModel.max)}get effectiveMinScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.effectiveMin??this.sliderViewModel.min)}get maxScale(){return this._getScale("max")}set maxScale(i){this._setMaxScaleOnSlider(i)}get maxScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.max)}set maxScaleLimit(i){this._setSliderRange({maxScale:i,minScale:this.minScaleLimit})}get minScale(){return this._getScale("min")}set minScale(i){this._setMinScaleOnSlider(i)}get minScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.min)}set minScaleLimit(i){this._setSliderRange({maxScale:this.maxScaleLimit,minScale:i})}get state(){const{view:i,layer:t}=this;return!i&&!t||!i&&(t!=null&&t.loaded)||!t&&(i!=null&&i.ready)||i&&i.ready&&(t!=null&&t.loaded)?"ready":"disabled"}set view(i){this._set("view",i)}mapScaleToSlider(i){const t=this.scaleRanges.scaleToRangeIndex(i),a=this.scaleRanges.findScaleRangeByIndex(t),{maxScale:s,minScale:r}=a,{max:d,min:u}=this._getSliderIndexRange(t);return this._mapToRange(i,r,s,u,d)}mapSliderToScale(i){const t=this.scaleRanges.findScaleRangeByIndex(i),{maxScale:a,minScale:s}=t,{max:r,min:d}=this._getSliderIndexRange(i);return this._mapToRange(i,d,r,s,a)}_setSliderRange(i){this.scaleRanges=y.fromScaleRange(i);const{max:t}=this._getSliderIndexRange(this.scaleRanges.length-1);this.sliderViewModel.max=t,this.sliderViewModel.min=0,this.notifyChange("maxScaleLimit"),this.notifyChange("minScaleLimit")}_getSliderIndexRange(i){const t=Math.floor(i);return{min:t,max:t+.99999}}_mapToRange(i,t,a,s,r){return s+(i-t)*(r-s)/(a-t)}_getSliderValue(i){const{min:t,max:a,values:s}=this.sliderViewModel,[r,d]=s;switch(this.mode){case"max-scale-only":return i==="min"?t:r;case"min-scale-only":return i==="min"?r:a;default:return i==="min"?r??t:d??a}}_getScale(i){const t=this.mapSliderToScale(this._getSliderValue(i));return this._normalizeScale(i,t)}_setMaxScaleOnSlider(i){const{scaleRanges:t,sliderViewModel:a}=this;if(i!==void 0){const s=this.mapScaleToSlider(this._constrainMaxScaleToLayer(t.clampMaxScale(i)));switch(this.mode){case"range":a.values=[a.values[0],s];break;case"max-scale-only":a.values=[s]}}}_setMinScaleOnSlider(i){const{scaleRanges:t,sliderViewModel:a}=this;if(i!==void 0){const s=this.mapScaleToSlider(this._constrainMinScaleToLayer(t.clampMinScale(i)));switch(this.mode){case"range":a.values=[s,a.values[1]];break;case"min-scale-only":a.values=[s]}}}_constrainMinScaleToLayer(i){const{scaleRanges:t}=this;if(this._hasTiledLayer()){const{firstRange:a}=t,s=this._getTiledLayerMinScale();i=this._mapToRange(i,a.maxScale,a.minScale,0,1)>.85||i>s?s:i}return i}_constrainMaxScaleToLayer(i){if(this._hasTiledLayer()&&!this._getLayerResampling()){const t=this._getTiledLayerMaxScale();i=i<t?t:i}return i}_normalizeScale(i,t){const a=i==="max"?"maxScale":"minScale",s=this._hasTiledLayer()?i==="min"?this._getTiledLayerMinScale():this._getTiledLayerMaxScale():this.scaleRanges[a],r=this._hasTiledLayer()?i==="min"?this._getTiledLayerRealMinScale():this._getTiledLayerRealMaxScale():s,d=1e-6,u=t===0||r===t||Math.abs(r-t)<=d;return Number((u?0:t).toFixed(6))}_getLayerLODS(){var t,a;const{layer:i}=this;return!(i!=null&&i.loaded)||!("tileInfo"in i)||i.type==="wcs"||i.type==="imagery-tile"&&((t=i.raster)==null?void 0:t.tileType)==="Raster"?null:(a=i.tileInfo)==null?void 0:a.lods}_getLayerResampling(){var i;return!!((i=this.layer)!=null&&i.loaded)&&(!("resampling"in this.layer)||this.layer.resampling)}_getTiledLayerMinScale(){const i=this._getLayerLODS();return this.scaleRanges.clampMinScale(i[0].scale)}_getTiledLayerMaxScale(){const i=this._getLayerLODS();return i[i.length-1].scale}_getTiledLayerRealMinScale(){var s,r;const i=this._getLayerLODS(),t=this.layer,a=t&&"sourceJSON"in t?((r=(s=t.sourceJSON)==null?void 0:s.tileInfo)==null?void 0:r.lods)??i:i;return this.scaleRanges.clampMinScale(a[0].scale)}_getTiledLayerRealMaxScale(){var s,r;const i=this._getLayerLODS(),t=this.layer,a=t&&"sourceJSON"in t?((r=(s=t.sourceJSON)==null?void 0:s.tileInfo)==null?void 0:r.lods)??i:i;return a[a.length-1].scale}_hasTiledLayer(){return!!this._getLayerLODS()}};n([c({readOnly:!0})],h.prototype,"effectiveMaxScale",null),n([c({readOnly:!0})],h.prototype,"effectiveMinScale",null),n([c()],h.prototype,"effectiveMaxScaleLimit",null),n([c()],h.prototype,"effectiveMinScaleLimit",null),n([c()],h.prototype,"layer",void 0),n([c()],h.prototype,"maxScale",null),n([c()],h.prototype,"maxScaleLimit",null),n([c()],h.prototype,"mode",void 0),n([c()],h.prototype,"minScale",null),n([c()],h.prototype,"minScaleLimit",null),n([c()],h.prototype,"scaleRanges",void 0),n([c({type:A})],h.prototype,"sliderViewModel",void 0),n([c({readOnly:!0})],h.prototype,"state",null),n([c()],h.prototype,"view",null),h=n([E("esri.widgets.ScaleRangeSlider.ScaleRangeSliderViewModel")],h);const ge=h,I={preview:!0,scaleMenus:{maxScaleMenu:!0,minScaleMenu:!0}},pe={maximumFractionDigits:0},k="1:",ve=16;let o=class extends ee{constructor(e,i){super(e,i),this._activeMenu=null,this._activeThumb=null,this._customInput=null,this._maxThumbNode=null,this._minThumbNode=null,this._previewAutoCloseTimeoutId=void 0,this._previewPopover=null,this._slider=new Y({thumbCreatedFunction:(t,a,s)=>{t===0?this._minThumbNode=s:t===1&&(this._maxThumbNode=s),this.addHandles([C(s,"mouseenter",()=>{this._activeThumb=t,this.scheduleRender()}),C(s,"mouseleave",()=>{this._previewAutoCloseTimeoutId||(this._activeThumb=null,this.scheduleRender())})])}}),this.disabled=!1,this.messages=null,this.region="US",this.viewModel=new ge,this.visibleElements=I,this._afterInputNumberCreate=t=>{"value"in t&&t.value!=null&&"setNumberValue"in t&&t.setNumberValue({committing:!1,value:t.value,origin:"direct"}),this._customInput=t},this._handleCustomScaleInputChange=(t,a)=>{const{viewModel:{scaleRanges:s}}=this,r=Number.parseFloat(a.value);Number.isNaN(r)?a.value=t:this._setScale(s.clampScale(r))}}loadDependencies(){return ie({button:()=>M(()=>import("./index-BtF7Kdcs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),dropdown:()=>M(()=>import("./index-Df8-0rWt.js"),__vite__mapDeps([27,2,3,4,5,6,7,8,9,10,11,12,13,19,20,17,14,28,29,23,30,25,18,31,32]),import.meta.url),"dropdown-group":()=>M(()=>import("./index-BfAp5_ga.js"),__vite__mapDeps([33,2,3,4,5,6,7,8,9,10,11,12,13,18,34]),import.meta.url),"dropdown-item":()=>M(()=>import("./index-DIB7yhJF.js"),__vite__mapDeps([35,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,19,20,25,26,23,34]),import.meta.url),icon:()=>M(()=>import("./index-73bQemcW.js").then(e=>e.i),__vite__mapDeps([16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18]),import.meta.url),"input-number":()=>M(()=>import("./index-BGRynF8w.js"),__vite__mapDeps([36,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,37,38,39,20,40,19,22,23,30,24,25,41,26,42,43,15]),import.meta.url),label:()=>M(()=>import("./index-D130RxMY.js"),__vite__mapDeps([44,2,3,4,5,6,7,8,9,10,11,12,13,24,17,14]),import.meta.url),popover:()=>M(()=>import("./index-DIp-v4qk.js").then(e=>e.i),__vite__mapDeps([45,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,46,40,20,19,23,25,26,28,29,31,21,47,48,49,30]),import.meta.url)})}initialize(){this.addHandles([w(()=>this.viewModel,e=>this._slider.viewModel=(e==null?void 0:e.sliderViewModel)??null,$),w(()=>this._interactive,e=>{this._slider.disabled=!e,e||this._setActiveMenu(null)},$),this._slider.on("thumb-drag",({index:e})=>{this._activeThumb=e,clearTimeout(this._previewAutoCloseTimeoutId);const i=250;this._previewAutoCloseTimeoutId=setTimeout(()=>{this._previewAutoCloseTimeoutId=void 0,this._activeThumb=null},i)}),K(()=>{var e;return((e=this.view)==null?void 0:e.stationary)===!0},()=>this.scheduleRender())])}destroy(){this._slider=W(this._slider)}get _maxScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return e===!0||typeof e!="boolean"&&e.maxScaleMenu}get _minScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return e===!0||typeof e!="boolean"&&e.minScaleMenu}get _interactive(){var e;return((e=this.viewModel)==null?void 0:e.state)!=="disabled"&&!this.disabled}get effectiveMaxScale(){return this.viewModel.effectiveMaxScale}get effectiveMinScale(){return this.viewModel.effectiveMinScale}get effectiveMaxScaleLimit(){return this.viewModel.effectiveMaxScaleLimit}get effectiveMinScaleLimit(){return this.viewModel.effectiveMinScaleLimit}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get maxScale(){return this.viewModel.maxScale}set maxScale(e){this.viewModel.maxScale=e}get maxScaleLimit(){return this.viewModel.maxScaleLimit}set maxScaleLimit(e){this.viewModel.maxScaleLimit=e}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}get minScale(){return this.viewModel.minScale}set minScale(e){this.viewModel.minScale=e}get minScaleLimit(){return this.viewModel.minScaleLimit}set minScaleLimit(e){this.viewModel.minScaleLimit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...I,...e,scaleMenus:typeof(e==null?void 0:e.scaleMenus)=="boolean"?e.scaleMenus:{...I.scaleMenus,...e==null?void 0:e.scaleMenus}}}formatScale(e){return`${k}${G(e,pe)}`}render(){const{_interactive:e,_slider:i,label:t,view:a,viewModel:{state:s}}=this,r=this._getLabel("min"),d=this._getLabel("max"),{segmentElements:u}=i,S=u.at(this.mode==="min-scale-only"?-1:-2);return S&&S.classList.add(g.segmentElementActive),m("div",{"aria-label":t,class:this.classes(g.base,P.widget,e?null:P.disabled)},m("div",{class:g.scaleIndicatorWrapper,dir:"ltr"},s==="ready"&&a?this._renderCurrentScaleIndicator():null,i.render(),this._renderPreviewPopover()),m("div",{class:g.scaleMenuContainer},this._minScaleMenuEnabled&&r?this._renderScaleMenuToggle("min",r):null,m("div",{class:g.scaleMenuSeparator}),this._maxScaleMenuEnabled&&d?this._renderScaleMenuToggle("max",d):null))}_renderPreviewPopover(){const{_activeThumb:e}=this,i=e!=null&&this.visibleElements.preview,t=i?e===0?this._minThumbNode:this._maxThumbNode:"";return m("calcite-popover",{afterCreate:te,afterUpdate:()=>{var a;return(a=this._previewPopover)==null?void 0:a.reposition()},bind:this,"data-node-ref":"_previewPopover",label:this.messages.preview,offsetDistance:ve,open:i,overlayPositioning:"fixed",placement:"top",referenceElement:t,triggerDisabled:!0},this._renderScalePreview())}_renderScalePreview(){const{_activeThumb:e,_slider:i,region:t,viewModel:{scaleRanges:a}}=this,s=e===0||this.mode!=="range"?i.values[0]:i.values[1],r=Object.keys(y.RecommendedScales).indexOf(a.findScaleRangeByIndex(s).id),d={backgroundImage:me(t),backgroundPosition:ue(r)};return m("div",{class:g.scalePreview},m("div",{class:g.scalePreviewThumbnail,styles:d}))}_getLabel(e){const{_slider:i,messages:t,mode:a,viewModel:{scaleRanges:s}}=this,[r,d]=i.values,u=e==="min"||a!=="range"?r:d,S=t.scaleRangeLabels[s.findScaleRangeByIndex(u).id];switch(a){case"range":return S;case"max-scale-only":return e==="min"?null:S;case"min-scale-only":return e==="min"?S:null}}_renderScaleMenuToggle(e,i){const{_activeMenu:t,_interactive:a}=this,s=t===e;return[m("calcite-dropdown",{closeOnSelectDisabled:!0,"data-type":e,open:s,overlayPositioning:"fixed",placement:e==="max"?"bottom-end":"bottom-start",scale:"s",onCalciteDropdownClose:({currentTarget:r})=>{this._activeMenu===e&&this._setActiveMenu(null),R(r.querySelector("calcite-button"))},onCalciteDropdownOpen:()=>this._setActiveMenu(e)},m("calcite-button",{appearance:s?"outline":"transparent","aria-pressed":s.toString(),class:g.scaleMenuToggle,disabled:!a,iconEnd:"chevron-down",scale:"s",slot:"trigger"},i),s&&e==="max"?this._renderMaxScaleMenu():null,s&&e==="min"?this._renderMinScaleMenu():null)]}_renderMinScaleMenu(){const{effectiveMaxScale:e,effectiveMinScaleLimit:i,view:t,viewModel:{scaleRanges:a}}=this,s=t?t.scale:void 0;return this._renderScaleMenu({type:"min",min:i,max:a.findScaleRange(e).minScale,viewScale:s})}_renderMaxScaleMenu(){const{effectiveMinScale:e,effectiveMaxScaleLimit:i,view:t,viewModel:{scaleRanges:a}}=this,s=t?t.scale:void 0;return this._renderScaleMenu({type:"max",min:a.findScaleRange(e).maxScale,max:i,viewScale:s})}_renderScaleMenu({viewScale:e,min:i,max:t,type:a}){const{effectiveMaxScale:s,effectiveMinScale:r,messages:d}=this,u=a==="max"?s:r,S=y.fromScaleRange({minScale:i,maxScale:t}),z=this.messages.featuredScaleLabels,b=y.RecommendedScales,B=Object.keys(b).filter(_=>S.contains(b[_])).map(_=>this._renderScaleMenuItem({scaleLabel:z[_],scaleValue:b[_],isSelected:u===b[_],valueVisible:_!=="world"}));return m("calcite-dropdown-group",{key:`${this.id}__scale-menu--${a}`},this._renderCustomScaleValue({currentScale:u}),e!=null?this._renderScaleMenuItem({scaleValue:e,scaleLabel:d.featuredScaleLabels.current,isSelected:u===e,valueVisible:!0}):null,B)}_renderCustomScaleValue({currentScale:e}){const{messages:i}=this,t=Math.round(e).toString();return m("calcite-dropdown-item",{afterCreate:a=>{R(a)},key:"custom-scale",label:i.featuredScaleLabels.custom,onCalciteDropdownItemSelect:()=>{R(this._customInput)}},m("calcite-label",{scale:"s"},m("span",null,i.featuredScaleLabels.custom),m("calcite-input-number",{afterCreate:this._afterInputNumberCreate,groupSeparator:!0,inputMode:"numeric",max:y.RecommendedScales.world,min:0,numberButtonType:"none",placeholder:i.customScaleInputTooltip,prefixText:k,scale:"s",step:1,value:t,onCalciteInputNumberChange:({currentTarget:a})=>this._handleCustomScaleInputChange(t,a)})))}_renderScaleMenuItem(e){const{scaleValue:i,scaleLabel:t,valueVisible:a,isSelected:s}=e;return m("calcite-dropdown-item",{key:t,label:t,selected:s,onCalciteDropdownItemSelect:this._setScale.bind(this,i)},t,a?m("div",{class:g.scaleMenuSubLabel},this.formatScale(i)):void 0)}_renderCurrentScaleIndicator(){const{_slider:e,messages:i,view:t,viewModel:{scaleRanges:a}}=this,s=a.clampScale(t.scale),r=this.viewModel.mapScaleToSlider(s),d=r/e.max,u=i.scaleRangeLabels[a.findScaleRangeByIndex(r).id],S=le(i.currentScaleTooltip,{scaleLabel:u});return m("div",{class:g.scaleIndicatorContainer,key:"scale-indicator"},m("div",{"aria-label":S,class:g.scaleIndicator,styles:{left:100*d+"%"},title:S},this.renderCurrentScaleIndicatorIcon()))}renderCurrentScaleIndicatorIcon(){return m("calcite-icon",{class:g.scaleIndicatorIcon,icon:"caret-up",scale:"s"})}_setScale(e){this._activeMenu==="max"?this.maxScale=Math.min(e,this.effectiveMinScale-1):this.minScale=Math.max(e,this.effectiveMaxScale+1),this._setActiveMenu(null)}_setActiveMenu(e){this._activeMenu=e}};n([c()],o.prototype,"_activeMenu",void 0),n([c()],o.prototype,"_activeThumb",void 0),n([c()],o.prototype,"_customInput",void 0),n([c()],o.prototype,"_maxScaleMenuEnabled",null),n([c()],o.prototype,"_minScaleMenuEnabled",null),n([c()],o.prototype,"_slider",void 0),n([c({readOnly:!0})],o.prototype,"_interactive",null),n([c()],o.prototype,"disabled",void 0),n([c()],o.prototype,"effectiveMaxScale",null),n([c()],o.prototype,"effectiveMinScale",null),n([c()],o.prototype,"effectiveMaxScaleLimit",null),n([c()],o.prototype,"effectiveMinScaleLimit",null),n([c()],o.prototype,"icon",null),n([c()],o.prototype,"label",null),n([c()],o.prototype,"layer",null),n([c()],o.prototype,"maxScale",null),n([c()],o.prototype,"maxScaleLimit",null),n([c(),Z("esri/widgets/ScaleRangeSlider/t9n/ScaleRangeSlider")],o.prototype,"messages",void 0),n([c()],o.prototype,"mode",null),n([c()],o.prototype,"minScale",null),n([c()],o.prototype,"minScaleLimit",null),n([c()],o.prototype,"region",void 0),n([c()],o.prototype,"view",null),n([c()],o.prototype,"viewModel",void 0),n([c()],o.prototype,"visibleElements",void 0),n([X("visibleElements")],o.prototype,"castVisibleElements",null),o=n([E("esri.widgets.ScaleRangeSlider")],o);const Me=o;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const _e=j`@layer{arcgis-scale-range-slider{display:block}}`,fe=se(Me),x=class x extends q{constructor(){super(...arguments),this.widget=fe(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.disabled=this.widget.disabled,this.hidePreview=this.widget.visibleElements.preview,this.hideScaleMenusMaxScaleMenu=this.widget.visibleElements.scaleMenus.maxScaleMenu,this.hideScaleMenusMinScaleMenu=this.widget.visibleElements.scaleMenus.minScaleMenu,this.icon=this.widget.icon,this.label=this.widget.label,this.layer=this.widget.layer,this.maxScale=this.widget.maxScale,this.maxScaleLimit=this.widget.maxScaleLimit,this.minScale=this.widget.minScale,this.minScaleLimit=this.widget.minScaleLimit,this.mode=this.widget.mode,this.position="bottom-left",this.region=this.widget.region,this.state=this.viewModel.state,this.arcgisPropertyChange=F()("state","minScale","maxScale"),this.arcgisReady=J()}async destroy(){await this.manager.destroy()}};x.properties={autoDestroyDisabled:5,disabled:7,hidePreview:5,hideScaleMenusMaxScaleMenu:5,hideScaleMenusMinScaleMenu:5,icon:1,label:1,layer:0,maxScale:9,maxScaleLimit:9,minScale:9,minScaleLimit:9,mode:1,position:1,referenceElement:1,region:0,state:3},x.shadowRootOptions=H,x.styles=_e;let V=x;U("arcgis-scale-range-slider",V);export{V as ArcgisScaleRangeSlider};
