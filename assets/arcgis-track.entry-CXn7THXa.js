import{r as u,c as o,h as r,g as p}from"./index-Bh2oEzTI.js";import{g as l}from"./globalCss-0ea08e9e-ByuaaWTq.js";import{u as f,m as w}from"./useViewModel-5eedd1c7-Chco_mlm.js";import{h as m,ag as v}from"./index-5cc0d3e9-BXwdUzLn.js";import{u as M}from"./index-ee4c09de-CPW6V7nq.js";import{u as k}from"./index-69f02a9e-wRYZXCy2.js";import"./component-utils-42b12dba-BfugynV_.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.2
 */const T={base:"esri-track"},E=w(v),I=class{constructor(e){u(this,e),this.arcgisPropertyChange=o(this,"arcgisPropertyChange",7),this.arcgisReady=o(this,"arcgisReady",7),this.viewModelTrack=o(this,"arcgisComplete",7),this.viewModelTrackError=o(this,"arcgisError",7),this.manager=k(this),this.messages=f(),this.viewModel=E(this),this.arcgisPropertyChange=M()("state"),this._toggleTracking=()=>{if(!this.viewModel)return;const{state:t}=this.viewModel;if(!(t==="feature-unsupported"||t==="disabled")){if(t==="tracking"||t==="waiting"){this.viewModel.stop();return}this.viewModel.start()}},this.autoDestroyDisabled=!1,this.error=this.viewModel.error,this.geolocationOptions=this.viewModel.geolocationOptions,this.goToOverride=this.viewModel.goToOverride,this.goToLocationDisabled=this.viewModel.goToLocationEnabled,this.graphic=this.viewModel.graphic,this.icon="compass-north-circle",this.label=void 0,this.positionFilterFunction=this.viewModel.positionFilterFunction,this.position="top-left",this.referenceElement=void 0,this.scale=this.viewModel.scale,this.state=this.viewModel.state,this.tracking=this.viewModel.tracking}async destroy(){await this.manager.destroy()}render(){var c;const{viewModel:e,messages:t,icon:s}=this,i=e==null?void 0:e.state,d=i==="tracking",a=this._localizeError((c=this.viewModel)==null?void 0:c.error),n=(d?t==null?void 0:t.stopTracking:t==null?void 0:t.startTracking)??"",h=i==="feature-unsupported",g=(i==="tracking"?"pause":void 0)??s??void 0;return r("div",{key:"d2f5f564c5f59ac3da392a4c502a8cdd1828f61f",class:m(T.base,l.widget)},!h&&r("calcite-button",{key:"ae19717d166017b8fc5af8d7994a9299a2f6d048",class:l.widgetButton,disabled:i==="disabled","icon-start":g,kind:"neutral",label:n,loading:i==="waiting",onClick:this._toggleTracking,title:n}),a?r("calcite-tooltip",{open:!0,"overlay-positioning":"fixed","reference-element":this.el},a):null)}async start(){this.viewModel.start()}async stop(){this.viewModel.stop()}_localizeError(e){var t,s,i;if(e instanceof GeolocationPositionError)return e.code===GeolocationPositionError.PERMISSION_DENIED?(t=this.messages)==null?void 0:t.permissionError:e.code===GeolocationPositionError.TIMEOUT?(s=this.messages)==null?void 0:s.timeoutError:(i=this.messages)==null?void 0:i.positionUnavailable;if(e instanceof Error)return e.message}static get assetsDirs(){return["assets"]}get el(){return p(this)}};export{I as arcgis_track};
