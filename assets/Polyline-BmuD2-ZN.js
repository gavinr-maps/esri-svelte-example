import{r as M,m as P,c as N,a as L,ad as at}from"./Accessor-BHnuXKD2.js";import{r as T}from"./writer-B2bQV2uU.js";import{w as q,p as zt,f as At}from"./Extent-CBBGeHb-.js";import{b as W,j as d,L as bt,a3 as St,g as ot}from"./Point-XGrwlf63.js";import{r as F}from"./mathUtils-DV9iOXpW.js";function S(t,e,n=!1){let{hasM:i,hasZ:r}=t;Array.isArray(e)?e.length!==4||i||r?e.length===3&&n&&!i?(r=!0,i=!1):e.length===3&&i&&r&&(i=!1,r=!1):(i=!0,r=!0):(r=!r&&e.hasZ&&(!i||e.hasM),i=!i&&e.hasM&&(!r||e.hasZ)),t.hasZ=r,t.hasM=i}var G;function it(t){return(e,n)=>e==null?n:n==null?e:t(e,n)}function _t(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Z=G=class extends W{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var r;if(!t&&!e)return{};const n={};Array.isArray(t)?(n.points=t,n.spatialReference=e):_t(t)?n.spatialReference=t:(t.points&&(n.points=t.points),t.spatialReference&&(n.spatialReference=t.spatialReference),t.hasZ&&(n.hasZ=t.hasZ),t.hasM&&(n.hasM=t.hasM));const i=(r=n.points)==null?void 0:r[0];return i&&(n.hasZ===void 0&&n.hasM===void 0?(n.hasZ=i.length>2,n.hasM=!1):n.hasZ===void 0?n.hasZ=i.length>3:n.hasM===void 0&&(n.hasM=i.length>3)),n}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new q,n=this.hasZ,i=this.hasM,r=n?3:2,a=t[0],s=it(Math.min),o=it(Math.max);let l,h,u,c,[f,p]=a,[m,y]=a;for(let g=0,$=t.length;g<$;g++){const x=t[g],[v,b]=x;if(f=s(f,v),p=s(p,b),m=o(m,v),y=o(y,b),n&&x.length>2){const I=x[2];l=s(l,I),u=o(u,I)}if(i&&x.length>r){const I=x[r];h=s(h,I),c=o(c,I)}}return e.xmin=f,e.ymin=p,e.xmax=m,e.ymax=y,e.spatialReference=this.spatialReference,n?(e.zmin=l,e.zmax=u):(e.zmin=void 0,e.zmax=void 0),i?(e.mmin=h,e.mmax=c):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=N(this.points)}addPoint(t){return S(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:N(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new G(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],n={x:e[0],y:e[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(n.z=e[2],i=3),this.hasM&&(n.m=e[i]),new d(n)}removePoint(t){if(!this._validateInputs(t))return null;const e=new d(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(S(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};M([P({readOnly:!0})],Z.prototype,"cache",null),M([P()],Z.prototype,"extent",null),M([P({type:[[Number]],json:{write:{isRequired:!0}}})],Z.prototype,"points",void 0),M([T("points")],Z.prototype,"writePoints",null),Z=G=M([L("esri.geometry.Multipoint")],Z),Z.prototype.toJSON.isDefaultToJSON=!0;const fe=Z;function pe(t){const e=[];for(t.reset();t.nextPath();){const n=[];for(;t.nextPoint();)n.push([t.x,t.y]);e.push(n)}return t.reset(),e}function Tt(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var k;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(k||(k={}));function me(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,n=t.hasM;if(t.type==="point")return n&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:n?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const i=t.clone().normalize();if(!i)return null;let r=!1,a=!1;return i.forEach(s=>{s.hasZ&&(r=!0),s.hasM&&(a=!0)}),i.map(s=>{const o=[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]];if(r&&s.hasZ){const l=.5*(s.zmax-s.zmin);for(let h=0;h<o.length;h++)o[h].push(l)}if(a&&s.hasM){const l=.5*(s.mmax-s.mmin);for(let h=0;h<o.length;h++)o[h].push(l)}return o})}return null}function J(t,e){const n=e[0]-t[0],i=e[1]-t[1];if(t.length>2&&e.length>2){const r=t[2]-e[2];return Math.sqrt(n*n+i*i+r*r)}return Math.sqrt(n*n+i*i)}function ht(t,e,n){const i=t[0]+n*(e[0]-t[0]),r=t[1]+n*(e[1]-t[1]);return t.length>2&&e.length>2?[i,r,t[2]+n*(e[2]-t[2])]:[i,r]}function ye(t,e,n,i){return Ct(t,e,n[i],n[i+1])}function Ct(t,e,n,i){const[r,a]=e,[s,o]=n,[l,h]=i,u=l-s,c=h-o,f=u*u+c*c,p=(r-s)*u+(a-o)*c,m=Math.min(1,Math.max(0,p/f));return t[0]=s+u*m,t[1]=o+c*m,t}function ge(t,e,n,i,r,a){let s=n,o=i,l=r-s,h=a-o;if(l!==0||h!==0){const u=((t-s)*l+(e-o)*h)/(l*l+h*h);u>1?(s=r,o=a):u>0&&(s+=l*u,o+=h*u)}return l=t-s,h=e-o,l*l+h*h}function lt(t,e){return ht(t,e,.5)}function xe(t){const e=t.length;let n=0;for(let i=0;i<e-1;++i)n+=J(t[i],t[i+1]);return n}function Me(t,e){if(e<=0)return t[0];const n=t.length;let i=0;for(let r=0;r<n-1;++r){const a=J(t[r],t[r+1]);if(e-i<a){const s=(e-i)/a;return ht(t[r],t[r+1],s)}i+=a}return t[n-1]}function ut(t,e=k.X,n=k.Y){let i=0;const r=t.length;let a=t[0];for(let s=1;s<r;s++){const o=t[s];i+=(o[e]-a[e])*(o[n]+a[n]),a=o}if(!ct(t)){const s=t[0];i+=(s[e]-a[e])*(s[n]+a[n])}return i>=0}function ct(t){const e=t.length;return e<3||at(t[0],t[e-1])}function $e(t){"rings"in t&&(Ot(t),Et(t))}function Ot(t){if(!("rings"in t))return!1;let e=!1;for(const n of t.rings)ct(n)||(n.push(n[0].slice()),e=!0);return e}function Et(t){if(!("rings"in t)||t.rings.length===0||ut(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function de(t){return t.type!=="polygon"&&t.type!=="polyline"||Ft(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function Ft(t,e){const n=bt(e);if(!n)return;const i=n.valid[0],r=n.valid[1],a=r-i;for(const s of t){let o=1/0,l=-1/0;for(const u of s){const c=Yt(u[0],i,r);o=Math.min(o,c),l=Math.max(l,c),u[0]=c}const h=l-o;a-h<h&&s.forEach(u=>{u[0]<0&&(u[0]+=a)})}}function Yt(t,e,n){const i=n-e;return t<e?n-(e-t)%i:t>n?e+(t-e)%i:t}function ve(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[n,i]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return n.length===i.length&&n.every((r,a)=>r.length===i[a].length)}function Ie(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function kt(t){return t?qt(t.rings,t.hasZ??!1):null}function qt(t,e){if(!(t!=null&&t.length))return null;const n=[],i=[],r=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let a=0,s=t.length;a<s;a++){const o=ft(t[a],e,r);o&&i.push(o)}if(i.sort((a,s)=>{let o=a[2]-s[2];return o===0&&e&&(o=a[4]-s[4]),o}),i.length&&(n[0]=i[0][0],n[1]=i[0][1],e&&(n[2]=i[0][3]),(n[0]<r[0]||n[0]>r[1]||n[1]<r[2]||n[1]>r[3]||e&&(n[2]<r[4]||n[2]>r[5]))&&(n.length=0)),!n.length){const a=t[0]&&t[0].length?Jt(t[0],e):null;if(!a)return null;n[0]=a[0],n[1]=a[1],e&&a.length>2&&(n[2]=a[2])}return n}function ft(t,e,n){let i=0,r=0,a=0,s=0,o=0;const l=t.length?t[0][0]:0,h=t.length?t[0][1]:0,u=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const p=t[f],m=t[(f+1)%t.length],[y,g,$]=p,x=y-l,v=g-h,[b,I,Zt]=m,V=b-l,Q=I-h,j=x*Q-V*v;if(s+=j,i+=(x+V)*j,r+=(v+Q)*j,e&&p.length>2&&m.length>2){const tt=$-u,et=Zt-u,nt=x*et-V*tt;a+=(tt+et)*nt,o+=nt}y<n[0]&&(n[0]=y),y>n[1]&&(n[1]=y),g<n[2]&&(n[2]=g),g>n[3]&&(n[3]=g),e&&($<n[4]&&(n[4]=$),$>n[5]&&(n[5]=$))}if(s>0&&(s*=-1),o>0&&(o*=-1),!s)return null;s*=.5,o*=.5;const c=[i/(6*s)+l,r/(6*s)+h,s];return e&&(n[4]===n[5]||o===0?(c[3]=(n[4]+n[5])/2,c[4]=0):(c[3]=a/(6*o)+u,c[4]=o)),c}function Pe(t,e){let n=0,i=0,r=0;t.nextPoint();const a=t.pathSize?t.x:0,s=t.pathSize?t.y:0;for(let o=0;o<t.pathSize;o++){t.seekInPath(o);const l=[t.x,t.y];t.seekInPath((o+1)%t.pathSize);const h=[t.x,t.y],[u,c]=l,f=u-a,p=c-s,[m,y]=h,g=m-a,$=y-s,x=f*$-g*p;r+=x,n+=(f+g)*x,i+=(p+$)*x,u<e[0]&&(e[0]=u),u>e[1]&&(e[1]=u),c<e[2]&&(e[2]=c),c>e[3]&&(e[3]=c)}return r>0&&(r*=-1),r?(r*=.5,[n/(6*r)+a,i/(6*r)+s,r]):null}function Jt(t,e){const n=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let r=0,a=0,s=0,o=0;for(let l=0,h=t.length;l<h-1;l++){const u=t[l],c=t[l+1];if(u&&c){n[0]=u[0],n[1]=u[1],i[0]=c[0],i[1]=c[1],e&&u.length>2&&c.length>2&&(n[2]=u[2],i[2]=c[2]);const f=J(n,i);if(f){r+=f;const p=lt(u,c);a+=f*p[0],s+=f*p[1],e&&p.length>2&&(o+=f*p[2])}}}return r>0?e?[a/r,s/r,o/r]:[a/r,s/r]:t.length?t[0]:null}function Vt(t){const{hasZ:e,totalSize:n}=t;if(n===0)return null;const i=[],r=[],a=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const s=ft(Tt(t),t.hasZ,a);s&&r.push(s)}if(r.sort((s,o)=>{let l=s[2]-o[2];return l===0&&e&&(l=s[4]-o[4]),l}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||e&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)),!i.length){t.reset(),t.nextPath();const s=t.pathSize?jt(t):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function jt(t){const{hasZ:e}=t,n=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let r=0,a=0,s=0,o=0;if(t.nextPoint()){let l=t.x,h=t.y,u=t.z;for(;t.nextPoint();){const c=t.x,f=t.y,p=t.z;n[0]=l,n[1]=h,i[0]=c,i[1]=f,e&&(n[2]=u,i[2]=p);const m=J(n,i);if(m){r+=m;const y=lt(n,i);a+=m*y[0],s+=m*y[1],e&&y.length>2&&(o+=m*y[2])}l=c,h=f,u=p}}return r>0?e?[a/r,s/r,o/r]:[a/r,s/r]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Gt=1e-6;function Re(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<Gt){const r=Vt(t);return r?[r[0],r[1]]:null}const n=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const i=[t.x,t.y];for(t.reset();t.nextPath();)Xt(n,i,t);return n[0]*=1/e,n[1]*=1/e,n[0]+=i[0],n[1]+=i[1],n}const Dt=1/3;function Xt(t,e,n){if(!n||n.pathSize<3)return null;n.nextPoint();const i=n.x,r=n.y;n.nextPoint();let a,s=n.x-i,o=n.y-r,l=0,h=0;for(;n.nextPoint();)l=n.x-i,h=n.y-r,a=.5*Dt*(l*o-h*s),t[0]+=a*(s+l),t[1]+=a*(o+h),s=l,o=h;const u=n.getCurrentRingArea(),c=[i,r];return c[0]-=e[0],c[1]-=e[1],c[0]*=u,c[1]*=u,t[0]+=c[0],t[1]+=c[1],t}function C(t=Lt){return[t[0],t[1],t[2],t[3]]}function we(t){return[t[0],t[1],t[2],t[3]]}function B(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function Ne(t,e,n,i,r=C()){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function Ze(t,e=C()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function ze(t,e,n=new q){return n.xmin=t[0],n.ymin=t[1],n.xmax=t[2],n.ymax=t[3],n.spatialReference=e,n}function Ae(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function be(t,e,n){if(e!=null)if("length"in e)D(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}else B(n,t)}function Se(t,e,n=t){const i=e.length;let r=t[0],a=t[1],s=t[2],o=t[3];for(let l=0;l<i;l++){const h=e[l];r=Math.min(r,h[0]),a=Math.min(a,h[1]),s=Math.max(s,h[0]),o=Math.max(o,h[1])}return n[0]=r,n[1]=a,n[2]=s,n[3]=o,n}function _e(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function O(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function E(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function Te(t){return O(t)*E(t)}function Ce(t){return O(t)>0&&E(t)>0}function Oe(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function Ee(t){const e=O(t),n=E(t);return Math.sqrt(e*e+n*n)}function Fe(t,e){return pt(t,e[0],e[1])}function Ye(t,e){const n=e[3],i=.5*(t[0]+t[2]),r=Math.abs(e[0]-i),a=.5*(t[2]-t[0]);if(r>n+a)return!1;const s=.5*(t[1]+t[3]),o=.5*(t[3]-t[1]),l=Math.abs(e[1]-s);if(l>n+o)return!1;if(r<a||l<o)return!0;const h=r-a,u=l-o;return h*h+u*u<=n*n}function ke(t,e,n){const i=t[0],r=t[1],a=t[2],s=t[3],{x:o,y:l}=e,{x:h,y:u}=n,c=(g,$)=>(u-l)*g+(o-h)*$+(h*l-o*u)<0,f=c(i,s),p=c(a,s),m=c(a,r),y=c(i,r);return!(f===p&&p===m&&m===y&&y===f||o<i&&h<i||o>a&&h>a||l>s&&u>s||l<r&&u<r)}function qe(t,e){return pt(t,e.x,e.y)}function pt(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function Je(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Ve(t,e,n){return Math.max(e[0],t[0])-n<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-n<=Math.min(e[3],t[3])}function je(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Ge(t,e,n){if(e==null)return B(n,t);const i=e[0],r=e[1],a=e[2],s=e[3];return n[0]=F(t[0],i,a),n[1]=F(t[1],r,s),n[2]=F(t[2],i,a),n[3]=F(t[3],r,s),n}function De(t,e){const n=(t[0]+t[2])/2,i=(t[1]+t[3])/2,r=Math.max(Math.abs(e[0]-n)-O(t)/2,0),a=Math.max(Math.abs(e[1]-i)-E(t)/2,0);return Math.sqrt(r*r+a*a)}function Xe(t,e,n,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+e,i[3]=t[3]+n,i}function Le(t,e,n=t){return n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n}function We(t){return t?B(t,rt):C(rt)}function D(t){return t!=null&&t.length===4}function Be(t){return!(O(t)!==0&&isFinite(t[0])||E(t)!==0&&isFinite(t[1]))}function Ue(t,e){return D(t)&&D(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const He=[-1/0,-1/0,1/0,1/0],rt=[1/0,1/0,-1/0,-1/0],Lt=[0,0,0,0];function mt(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function yt(t){return t.points!==void 0}function gt(t){return t.x!==void 0&&t.y!==void 0}function xt(t){return t.paths!==void 0}function Mt(t){return t.rings!==void 0}function $t(t){function e(n,i){return n==null?i:i==null?n:t(n,i)}return e}const z=$t(Math.min),A=$t(Math.max);function Ke(t,e){return xt(e)?_(t,e.paths,!1,!1):Mt(e)?_(t,e.rings,!1,!1):yt(e)?U(t,e.points,!1,!1,!1,!1):mt(e)?dt(t,e):(gt(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Qe(t){let e,n,i,r;for(t.reset(),e=i=1/0,n=r=-1/0;t.nextPath();){const a=Wt(t);e=Math.min(a[0],e),i=Math.min(a[1],i),n=Math.max(a[2],n),r=Math.max(a[3],r)}return C([e,i,n,r])}function Wt(t){let e,n,i,r;for(e=i=1/0,n=r=-1/0;t.nextPoint();)e=Math.min(t.x,e),i=Math.min(t.y,i),n=Math.max(t.x,n),r=Math.max(t.y,r);return C([e,i,n,r])}function tn(t,e){return xt(e)?_(t,e.paths,!0,!1):Mt(e)?_(t,e.rings,!0,!1):yt(e)?U(t,e.points,!0,!1,!0,!1):mt(e)?dt(t,e,!0,!1,!0,!1):(gt(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function _(t,e,n,i){const r=n?3:2;if(!e.length||!e[0].length)return null;let a,s,o,l,[h,u]=e[0][0],[c,f]=e[0][0];for(let p=0;p<e.length;p++){const m=e[p];for(let y=0;y<m.length;y++){const g=m[y],[$,x]=g;if(h=z(h,$),u=z(u,x),c=A(c,$),f=A(f,x),n&&g.length>2){const v=g[2];a=z(a,v),s=A(s,v)}if(i&&g.length>r){const v=g[r];o=z(a,v),l=A(s,v)}}}return n?i?(t[0]=h,t[1]=u,t[2]=a,t[3]=o,t[4]=c,t[5]=f,t[6]=s,t[7]=l,t.length=8,t):(t[0]=h,t[1]=u,t[2]=a,t[3]=c,t[4]=f,t[5]=s,t.length=6,t):i?(t[0]=h,t[1]=u,t[2]=o,t[3]=c,t[4]=f,t[5]=l,t.length=6,t):(t[0]=h,t[1]=u,t[2]=c,t[3]=f,t.length=4,t)}function dt(t,e,n,i,r,a){const s=e.xmin,o=e.xmax,l=e.ymin,h=e.ymax;let u=e.zmin,c=e.zmax,f=e.mmin,p=e.mmax;return r?(u=u||0,c=c||0,a?(f=f||0,p=p||0,t[0]=s,t[1]=l,t[2]=u,t[3]=f,t[4]=o,t[5]=h,t[6]=c,t[7]=p,t):(t[0]=s,t[1]=l,t[2]=u,t[3]=o,t[4]=h,t[5]=c,t)):a?(f=f||0,p=p||0,t[0]=s,t[1]=l,t[2]=f,t[3]=o,t[4]=h,t[5]=p,t):(t[0]=s,t[1]=l,t[2]=o,t[3]=h,t)}function U(t,e,n,i,r,a){const s=n?3:2,o=i&&a,l=n&&r;if(!e.length||!e[0].length)return null;let h,u,c,f,[p,m]=e[0],[y,g]=e[0];for(let $=0;$<e.length;$++){const x=e[$],[v,b]=x;if(p=z(p,v),m=z(m,b),y=A(y,v),g=A(g,b),l&&x.length>2){const I=x[2];h=z(h,I),u=A(u,I)}if(o&&x.length>s){const I=x[s];c=z(h,I),f=A(u,I)}}return r?(h=h||0,u=u||0,a?(c=c||0,f=f||0,t[0]=p,t[1]=m,t[2]=h,t[3]=c,t[4]=y,t[5]=g,t[6]=u,t[7]=f,t):(t[0]=p,t[1]=m,t[2]=h,t[3]=y,t[4]=g,t[5]=u,t)):a?(c=c||0,f=f||0,t[0]=p,t[1]=m,t[2]=c,t[3]=y,t[4]=g,t[5]=f,t):(t[0]=p,t[1]=m,t[2]=y,t[3]=g,t)}function Bt(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Ut(t){return t.points!==void 0}function Ht(t){return t.x!==void 0&&t.y!==void 0}function Kt(t){return t.paths!==void 0}function Qt(t){return t.rings!==void 0}const H=[];function vt(t,e,n,i){return{xmin:t,ymin:e,xmax:n,ymax:i}}function It(t,e,n,i,r,a){return{xmin:t,ymin:e,zmin:n,xmax:i,ymax:r,zmax:a}}function Pt(t,e,n,i,r,a){return{xmin:t,ymin:e,mmin:n,xmax:i,ymax:r,mmax:a}}function Rt(t,e,n,i,r,a,s,o){return{xmin:t,ymin:e,zmin:n,mmin:i,xmax:r,ymax:a,zmax:s,mmax:o}}function K(t,e=!1,n=!1){return e?n?Rt(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):It(t[0],t[1],t[2],t[3],t[4],t[5]):n?Pt(t[0],t[1],t[2],t[3],t[4],t[5]):vt(t[0],t[1],t[2],t[3])}function en(t){return t?Bt(t)?t:Ht(t)?ee(t):Qt(t)?wt(t):Kt(t)?Nt(t):Ut(t)?te(t):null:null}function te(t){const{hasZ:e,hasM:n,points:i}=t;return K(U(H,i,e??!1,n??!1),e,n)}function ee(t){const{x:e,y:n,z:i,m:r}=t,a=r!=null;return i!=null?a?Rt(e,n,i,r,e,n,i,r):It(e,n,i,e,n,i):a?Pt(e,n,r,e,n,r):vt(e,n,e,n)}function wt(t){const{hasZ:e,hasM:n,rings:i}=t,r=_(H,i,e??!1,n??!1);return r?K(r,e,n):null}function Nt(t){const{hasZ:e,hasM:n,paths:i}=t,r=_(H,i,e??!1,n??!1);return r?K(r,e,n):null}var Y;function st(t){return!Array.isArray(t[0])}function ne(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function ie(t){var a,s;if(!t)return;let{rings:e,hasM:n,hasZ:i,spatialReference:r}=t;switch(e??(e=[]),ne(e)&&(e=[e]),(s=(a=e[0])==null?void 0:a[0])==null?void 0:s.length){case 4:i??(i=!0),n??(n=!0);break;case 3:i??(i=n!==!0),n??(n=!i);break;default:i??(i=!1),n??(n=!1)}return r??(r=ot.WGS84),{...t,hasM:n,hasZ:i,rings:e,spatialReference:r}}let R=Y=class extends W{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:n}=t;let i=!1,r=!1;for(const s of e)s.hasZ&&(i=!0),s.hasM&&(r=!0);const a={rings:e.map(s=>{const o=[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]];if(i&&s.hasZ){const l=s.zmin+.5*(s.zmax-s.zmin);for(let h=0;h<o.length;h++)o[h].push(l)}if(r&&s.hasM){const l=s.mmin+.5*(s.mmax-s.mmin);for(let h=0;h<o.length;h++)o[h].push(l)}return o}),spatialReference:n};return i&&(a.hasZ=!0),r&&(a.hasM=!0),new Y(a)}constructor(t){super(ie(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=kt(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new d;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=N(t)}get extent(){const t=wt(this),{spatialReference:e}=this;return t?new q({...t,spatialReference:e}):null}get isSelfIntersecting(){return zt(this.rings)}writeRings(t,e){e.rings=N(this.rings)}addRing(t){if(!t)return;const e=this.rings,n=e.length;if(st(t)){const i=[];for(let r=0,a=t.length;r<a;r++)i[r]=t[r].toArray();e[n]=i}else e[n]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new Y;return t.spatialReference=this.spatialReference,t.rings=N(this.rings),t.curveRings=N(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;if(e!=null!=(n!=null)||e!=null&&n!=null&&!e.equals(n)||this.rings.length!==t.rings.length)return!1;const i=([r,a,s,o],[l,h,u,c])=>r===l&&a===h&&(s==null&&u==null||s===u)&&(o==null&&c==null||o===c);for(let r=0;r<this.rings.length;r++){const a=this.rings[r],s=t.rings[r];if(!at(a,s,i))return!1}return!0}contains(t){if(!t)return!1;const e=St(t,this.spatialReference);return At(this,e??t)}isClockwise(t){const e=st(t)?t.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):t;return ut(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.rings[t][e],i=this.hasZ,r=this.hasM;return i&&!r?new d(n[0],n[1],n[2],void 0,this.spatialReference):r&&!i?new d(n[0],n[1],void 0,n[2],this.spatialReference):i&&r?new d(n[0],n[1],n[2],n[3],this.spatialReference):new d(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?(S(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t].splice(e,0,n),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new d(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],n=this.spatialReference,i=e.map(r=>new d(r,n));return this.notifyChange("rings"),i}setPoint(t,e,n){return this._validateInputs(t,e)?(S(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t][e]=n,this.notifyChange("rings"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const i=this.rings[t];if(n&&(e<0||e>i.length)||!n&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};M([P({readOnly:!0})],R.prototype,"cache",null),M([P({readOnly:!0})],R.prototype,"centroid",null),M([P({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],R.prototype,"curveRings",void 0),M([T("curveRings")],R.prototype,"writeCurveRings",null),M([P({readOnly:!0})],R.prototype,"extent",null),M([P({readOnly:!0})],R.prototype,"isSelfIntersecting",null),M([P({type:[[[Number]]],json:{write:{isRequired:!0}}})],R.prototype,"rings",void 0),M([T("rings")],R.prototype,"writeRings",null),R=Y=M([L("esri.geometry.Polygon")],R);const nn=R;R.prototype.toJSON.isDefaultToJSON=!0;var X;function re(t){return!Array.isArray(t[0])}function se(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function ae(t){var a,s;if(!t)return;let{paths:e,hasM:n,hasZ:i,spatialReference:r}=t;switch(e??(e=[]),se(e)&&(e=[e]),(s=(a=e[0])==null?void 0:a[0])==null?void 0:s.length){case 4:i??(i=!0),n??(n=!0);break;case 3:i??(i=n!==!0),n??(n=!i);break;default:i??(i=!1),n??(n=!1)}return r??(r=ot.WGS84),{...t,hasM:n,hasZ:i,paths:e,spatialReference:r}}let w=X=class extends W{constructor(t){super(ae(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=N(t)}get extent(){const t=Nt(this),{spatialReference:e}=this;return t?new q({...t,spatialReference:e}):null}writePaths(t,e){e.paths=N(this.paths)}addPath(t){if(!t)return;const e=this.paths,n=e.length;if(re(t)){const i=[];for(let r=0,a=t.length;r<a;r++)i[r]=t[r].toArray();e[n]=i}else e[n]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new X;return t.spatialReference=this.spatialReference,t.paths=N(this.paths),t.curvePaths=N(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.paths[t][e],i=this.hasZ,r=this.hasM;return i&&!r?new d(n[0],n[1],n[2],void 0,this.spatialReference):r&&!i?new d(n[0],n[1],void 0,n[2],this.spatialReference):i&&r?new d(n[0],n[1],n[2],n[3],this.spatialReference):new d(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?(S(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t].splice(e,0,n),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],n=this.spatialReference,i=e.map(r=>new d(r,n));return this.notifyChange("paths"),i}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new d(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(t,e,n){return this._validateInputs(t,e)?(S(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t][e]=n,this.notifyChange("paths"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const i=this.paths[t];if(n&&(e<0||e>i.length)||!n&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};M([P({readOnly:!0})],w.prototype,"cache",null),M([P({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],w.prototype,"curvePaths",void 0),M([T("curvePaths")],w.prototype,"writeCurvePaths",null),M([P({readOnly:!0})],w.prototype,"extent",null),M([P({type:[[[Number]]],json:{write:{isRequired:!0}}})],w.prototype,"paths",void 0),M([T("paths")],w.prototype,"writePaths",null),w=X=M([L("esri.geometry.Polyline")],w);const rn=w;w.prototype.toJSON.isDefaultToJSON=!0;export{Re as $,E as A,Ge as B,$e as C,lt as D,Te as E,wt as F,kt as G,We as H,Ie as I,Oe as J,Ue as K,Fe as L,de as M,rt as N,qe as O,rn as P,ke as Q,Je as R,Le as S,ve as T,Yt as U,pe as V,Tt as W,Qe as X,Wt as Y,Pe as Z,Ct as _,C as a,Ee as a0,ye as a1,Ve as a2,_e as a3,He as a4,we as a5,Xe as a6,Ce as a7,Be as a8,De as a9,Ye as aa,Ne as b,Ze as c,je as d,me as e,B as f,ut as g,xe as h,be as i,nn as j,ze as k,Ke as l,tn as m,k as n,qt as o,Me as p,Ot as q,Ae as r,Se as s,ge as t,fe as u,en as v,pt as w,_ as x,O as y,Ft as z};
