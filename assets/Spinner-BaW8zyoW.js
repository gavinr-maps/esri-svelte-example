import{r as o,m as n,a as c,ag as m}from"./Accessor-BHnuXKD2.js";import{d as u}from"./reactiveUtils-BR0C1Kq4.js";import{O as b,n as M}from"./jsxFactory-CLjKarlq.js";import{l as y}from"./AnchorElementViewModel-CqI4lmqA.js";let l=class extends y{constructor(i){super(i),this.visible=!1}};o([n()],l.prototype,"visible",void 0),l=o([c("esri.widgets.Spinner.SpinnerViewModel")],l);const v=l,a="esri-spinner",h={base:a,spinnerStart:`${a}--start`,spinnerFinish:`${a}--finish`};let s=class extends b{constructor(i,e){super(i,e),this._animationDelay=500,this._animationPromise=null,this.viewModel=new v}initialize(){this.addHandles(u(()=>this.visible,i=>this._visibleChange(i)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(i){this.viewModel.location=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}get visible(){return this.viewModel.visible}set visible(i){this.viewModel.visible=i}show(i){const{location:e,promise:t}=i??{};e&&(this.viewModel.location=e),this.visible=!0;const r=()=>this.hide();t&&t.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:e}=this.viewModel,t=!!e,r=i&&t,d=!i&&t,p={[h.spinnerStart]:r,[h.spinnerFinish]:d},w=this._getPositionStyles();return M("div",{class:this.classes(h.base,p),styles:w})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const e=m(this._animationDelay);this._animationPromise=e,e.catch(()=>{}).then(()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(e==null||i==null)return{};const{padding:t}=e;return{left:i.x-t.left+"px",top:i.y-t.top+"px"}}};o([n()],s.prototype,"location",null),o([n()],s.prototype,"view",null),o([n({type:v})],s.prototype,"viewModel",void 0),o([n()],s.prototype,"visible",null),s=o([c("esri.widgets.Spinner")],s);const S=s;export{S as h,v as p};
