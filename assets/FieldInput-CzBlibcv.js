const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-jjUP6Yam.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DwIhxbHs.js","./dom-DEluURzl.js","./observers-Co4E8E8j.js","./ref-D9wHsL_T.js","./directive-helpers-DaBykg1t.js","./static-DLD4WjLv.js","./form-BzoUrXC7.js","./interactive-DTzfFku4.js","./label-CHHpnzD0.js","./loadable-XBvaWFYY.js","./component-CBVlbUuE.js","./index-DyXGQ9Xl.js","./index--OBudxYA.js","./index-DgqiEeTY.js","./array-BbE1dLa5.js","./index-DanFJwSx.js","./index-fFnlo_g2.js","./Validation-BYp9DS84.js"])))=>i.map(i=>d[i]);
import{_ as x}from"./index-4eY77cms.js";import{c as I,n as c,T as R}from"./jsxFactory-Cnml7uXM.js";import{e as k}from"./Heading-BcR6CGTM.js";import{g as M,r as i,m as n,a as T,s as q}from"./Accessor-BmwT4B0c.js";import{d as C,C as S}from"./reactiveUtils-XM7cS2OP.js";import{B as V,ae as W,n as _,H as N,af as B,a8 as H,g as w,F as $,x as D,ag as P}from"./opacityUtils-Dim20wpZ.js";import{$ as L}from"./utils-v4CMtYiY.js";import{isRelatableFeatureSupportedLayer as U}from"./featureUtils-BovNToiy.js";import{O as J}from"./layerUtils-B__v9OBu.js";import{D as Z,a as X,h as O,i as y,w as j,X as K,p as z,c as G,$ as A,s as Q}from"./featureFormUtils-Cjx4R4NB.js";import{g as Y,J as ee,H as te}from"./dateUtils-CkANlKbA.js";const ie={danger:"exclamation-mark-circle",info:"information",success:"check",warning:"exclamation-mark-triangle",brand:void 0,neutral:void 0,inverse:void 0},b="esri-editor__prompt",f={base:b,header:`${b}__header`,heading:`${b}__header__heading`,message:`${b}__message`,divider:`${b}__divider`,actions:`${b}__actions`,halfWidthButton:`${b}__half-width-button`},ge=()=>I({button:()=>x(()=>import("./index-jjUP6Yam.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),icon:()=>x(()=>import("./index-DwIhxbHs.js").then(e=>e.i),__vite__mapDeps([16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18]),import.meta.url),scrim:()=>x(()=>import("./index-DyXGQ9Xl.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,19,20,18,17]),import.meta.url),label:()=>x(()=>import("./index--OBudxYA.js"),__vite__mapDeps([28,2,3,4,5,6,7,8,9,10,11,12,13,24,17,14]),import.meta.url),"radio-button":()=>x(()=>import("./index-DgqiEeTY.js"),__vite__mapDeps([29,2,3,4,5,6,7,8,9,10,11,12,13,19,20,30,17,14,22,23,24,25]),import.meta.url),"radio-button-group":()=>x(()=>import("./index-DanFJwSx.js"),__vite__mapDeps([31,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,32,25,33]),import.meta.url)});function ve({actions:e,context:t,headingLevel:a,message:l,title:s,...o}){const{primary:p,secondary:u}=e;let d;switch(t){case"danger":d="danger";break;case"info":d="brand";break;default:d="neutral"}const h=c("calcite-button",{afterCreate:v=>R(v),appearance:"solid",classes:{[f.halfWidthButton]:!!u},"data-testid":"primary-prompt-button",key:"prompt-primary-button",kind:d,onclick:p.action,width:"full"},p.label),E=u&&c("calcite-button",{appearance:"outline",class:f.halfWidthButton,"data-testid":"secondary-prompt-button",key:"prompt-secondary-button",kind:d,onclick:u.action,width:"full"},u.label);return c("calcite-scrim",{"data-testid":"prompt",key:"prompt"},c("div",{class:`${f.base}--${t}`},c("div",{class:f.header},c("calcite-icon",{icon:ie.warning}),c(k,{class:f.heading,level:a},s)),c("div",{class:f.message},l),le(o)??c("div",{class:f.divider}),c("div",{class:f.actions},E,h)))}function le({radios:e,onRadioSelection:t,defaultRadioSelection:a}){return e!=null&&e.length?c("calcite-radio-button-group",{name:"PromptChoiceList"},e.map(l=>c("calcite-label",{layout:"inline"},c("calcite-radio-button",{checked:l.value===a,value:l.value,onCalciteRadioButtonChange:()=>t==null?void 0:t(l.value)}),l.label))):void 0}let m=class extends M{constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.timeZone=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){var e;return this.getFormattedLabel((e=this.element)==null?void 0:e.description)}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return e!=null?!!e.lastEvaluatedValue:null}get label(){var e;return this.getFormattedLabel((e=this.element)==null?void 0:e.label)}get updating(){return!1}get visible(){return this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null}getFormattedLabel(e){const{feature:t,layer:a,timeZone:l}=this;return a==null||e==null?e:Z({label:e,attributes:t.attributes,fieldsIndex:a.fieldsIndex,timeZone:l})}};i([n({readOnly:!0})],m.prototype,"description",null),i([n({constructOnly:!0})],m.prototype,"element",void 0),i([n()],m.prototype,"evaluatedVisibilityExpression",null),i([n()],m.prototype,"feature",void 0),i([n()],m.prototype,"label",null),i([n()],m.prototype,"layer",void 0),i([n()],m.prototype,"timeZone",void 0),i([n()],m.prototype,"type",void 0),i([n()],m.prototype,"updating",null),i([n()],m.prototype,"visible",null),i([n()],m.prototype,"visibilityExpressionExecutor",void 0),m=i([T("esri.widgets.FeatureForm.InputBase")],m);const ne=m;let g=class extends ne{constructor(e){super(e),this.arcadeEditType="NA",this.editableExpressionExecutor=null}get editable(){return!!this.layerAllowsEdits&&(this.evaluatedEditableExpression??!0)}get evaluatedEditableExpression(){const{editableExpressionExecutor:e}=this;return e!=null?!!e.lastEvaluatedValue:null}get layerAllowsEdits(){const{layer:e}=this;if(!e)return!1;const t=J(e),a=t==null?void 0:t.operations.supportsEditing,l=X(t,this.arcadeEditType);return!(!a||!l)}};i([n()],g.prototype,"arcadeEditType",void 0),i([n()],g.prototype,"editable",null),i([n()],g.prototype,"editableExpressionExecutor",void 0),i([n()],g.prototype,"evaluatedEditableExpression",null),i([n()],g.prototype,"layerAllowsEdits",null),g=i([T("esri.widgets.FeatureForm.EditableInput")],g);const ae=g;let r=class extends ae{constructor(e){super(e),this._storedValue=null,this.error=null,this.preservesValueWhenHidden=!0,this.field=null,this.group=null,this.requiredExpressionExecutor=null,this.type="field",this._fieldInputWasVisibleDuringLifetime=!1,this.valueExpressionExecutor=null}initialize(){this.addHandles(C(()=>this.feature,()=>this._fieldInputWasVisibleDuringLifetime=!1,S))}get _dateFormRange(){const{element:e,field:t}=this;if(this.dataType!=="date")return{};const a=e!=null&&e.domain?V(t,e.domain):null;if(!(e!=null&&e.input))return a??{};const l=e.input,{type:s}=l;let o={};if(s!=="date-picker"&&s!=="time-picker"&&s!=="datetimeoffset-picker"||(o=W(t,l.max,l.min)),s==="datetime-picker"){const{max:d,min:h}=l;o={max:d!=null&&O(d)?d.getTime():null,min:h!=null&&O(h)?h.getTime():null}}const{max:p,min:u}=o;if(a){const{max:d,min:h}=a,E=_(d)&&(p==null||p!=null&&d<p),v=_(h)&&(u==null||u!=null&&h>u);return{max:E?d:p??null,min:v?h:u??null,rawMax:E?a.rawMax:(o==null?void 0:o.rawMax)??null,rawMin:v?a.rawMin:(o==null?void 0:o.rawMin)??null}}return{min:u,max:p,rawMax:(o==null?void 0:o.rawMax)??null,rawMin:(o==null?void 0:o.rawMin)??null}}get _dateRange(){const{_dateFormRange:e,field:t}=this;if(this.dataType!=="date")return{};const a=V(t);if(!a)return e;const{max:l,min:s,rawMax:o,rawMin:p}=e;if(t.type==="date"){const{max:u,min:d}=a;return{max:_(l)&&(u===null||u!=null&&l<u)?l:u??null,min:_(s)&&(d===null||d!=null&&s>d)?s:d??null}}if(t.type==="date-only"||t.type==="time-only"||t.type==="timestamp-offset"){const{max:u,min:d,rawMax:h,rawMin:E}=a,v=_(l)&&o&&(u==null||l<u),F=_(s)&&p&&(d==null||s>d);return{max:v?l:u,min:F?s:d,rawMax:v?o:h,rawMin:F?p:E}}return{max:null,min:null}}get _configAllowsEdits(){var s,o;const{element:e,layer:t,name:a}=this;if(e!=null)return e.editableExpression?!!this.evaluatedEditableExpression:e.editable!==!1;if(t!=null&&t.userHasUpdateItemPrivileges)return!0;const l=t&&"popupTemplate"in t?(o=(s=t==null?void 0:t.popupTemplate)==null?void 0:s.fieldInfos)==null?void 0:o.find(({fieldName:p})=>p===a):null;return(l==null?void 0:l.isEditable)??!0}get _layerAndFieldAllowEdits(){var e;return this.layerAllowsEdits&&((e=this.field)==null?void 0:e.editable)}get _isVisibleByDefault(){const{field:e,layer:t}=this;return!!(e!=null&&e.visible)&&N(e,t)}get _isEditTrackingField(){var e;return B(this.layer).includes((e=this.name)==null?void 0:e.toLowerCase())}get _shouldUseValueExpression(){return this._layerAndFieldAllowEdits&&!this._configAllowsEdits&&this.valueExpressionExecutor!=null&&this.valueExpressionExecutor.initialExecutionComplete}get isSubtypeField(){var t;const{layer:e}=this;if(e&&"subtypeField"in e){const{subtypeField:a,fieldsIndex:l}=e;return(((t=l.get(a))==null?void 0:t.name)??a)===this.name}return!1}get valueIsOutOfDomain(){const{domain:e,value:t,field:a}=this;return!(!e||t==null)&&H(a,t,e)!==null}get dataType(){const{field:e}=this;return w(e)?y.Number:$(e)?y.Text:L(e)||D(e)?y.Date:y.Unsupported}get dateDataType(){if(this.dataType===y.Date)return this.field.type!=="date"?"string":"number"}get domain(){const{layer:e,feature:t,name:a,element:l}=this,s=l==null?void 0:l.domain;return s!=null&&this._isDomainCompatible(s)?s:e.getFieldDomain(a,{feature:t})}get editable(){return!!this._layerAndFieldAllowEdits&&(this.evaluatedEditableExpression??this._configAllowsEdits)}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:e}=this;return e!=null?!!e.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:e}=this;return e!=null?e.lastEvaluatedValue:null}get hint(){var e;return(e=this.element)==null?void 0:e.hint}get includeDate(){return!(this.dataType!==y.Date||this.field.type==="time-only")}get includeTime(){var l;const{element:e,field:t}=this;if(this.dataType!==y.Date)return!1;if(t.type==="time-only")return!0;if(t.type==="date-only")return!1;const a=((l=e==null?void 0:e.input)==null?void 0:l.type)==="datetime-picker"?e.input.includeTime:void 0;return a===void 0||a}get includeTimeOffset(){var t;if(this.field.type!=="timestamp-offset")return!1;const e=(t=this.element)==null?void 0:t.input;return!e||e.type==="datetimeoffset-picker"&&e.includeTimeOffset}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get inputType(){var e,t;return(t=(e=this.element)==null?void 0:e.input)==null?void 0:t.type}get hasInvalidSwitchValue(){const{element:e}=this,t=j(e,"switch")?e.input:null;return!t||K(this.value,t)}get isRelationshipKeyField(){var a;const{field:e,layer:t}=this;return U(t)&&!!((a=t.relationships)!=null&&a.some(l=>l.keyField===e.name))}get label(){var t;const{field:e}=this;return this.getFormattedLabel((t=this.element)==null?void 0:t.label)??e.alias??e.name}get maxLength(){var e;return z({dataType:this.dataType,field:this.field,input:(e=this.element)==null?void 0:e.input})}get minLength(){var e;return G({dataType:this.dataType,field:this.field,input:(e=this.element)==null?void 0:e.input})}get name(){var e;return(e=this.field)==null?void 0:e.name}get range(){const{domain:e,element:t,field:a}=this;if(this.dataType==="date")return this._dateRange;const l=V(a,e)||P(a,e),s=(l==null?void 0:l.max)===Number.MAX_VALUE?null:(l==null?void 0:l.max)??null,o=(l==null?void 0:l.min)===-Number.MAX_VALUE?null:(l==null?void 0:l.min)??null;if(!(t!=null&&t.domain)||t.domain.type!=="range")return{max:s,min:o};const{max:p,min:u}=V(a)||{};return{max:p!=null&&(s===null||s!=null&&p<s)?p:s,min:u!=null&&(o===null||o!=null&&u>o)?u:o}}get required(){var o;const{editable:e,evaluatedRequiredExpression:t,field:a,visible:l,isSubtypeField:s}=this;return e?(a==null?void 0:a.nullable)===!1||s?!0:!(!l||((o=this.group)==null?void 0:o.visible)===!1||t==null)&&t:!1}set required(e){this._overrideIfSome("required",e)}get showNoValueOptionEnabled(){const{element:e}=this;return!this.required&&(!A(e)||e.input.showNoValueOption)}get showNoValueLabel(){const{element:e}=this;return A(e)?e.input.noValueOptionLabel:null}get submittable(){const{field:e,required:t,valid:a,value:l}=this;return(!t||l!=null)&&(!!a||this.initialFeature.getAttribute(e.name)===l)}get timeResolution(){var t;const e=(t=this.element)==null?void 0:t.input;if(e&&(e.type==="datetimeoffset-picker"||e.type==="time-picker"))return e.timeResolution??"minutes"}get timeStep(){return this.timeResolution!=null?Y.get(this.timeResolution):void 0}get updating(){const{editableExpressionExecutor:e,valueExpressionExecutor:t,visibilityExpressionExecutor:a,preservesValueWhenHidden:l}=this;return t!=null&&t.updating||e!=null&&e.updating||l===!1&&a!=null&&a.updating}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),e===null}get value(){var e,t,a,l;if(this._fieldInputWasVisibleDuringLifetime=this._fieldInputWasVisibleDuringLifetime||this.visible&&((e=this.group)==null?void 0:e.visible)!==!1,this.preservesValueWhenHidden===!1&&this._fieldInputWasVisibleDuringLifetime&&(((t=this.visibilityExpressionExecutor)==null?void 0:t.lastEvaluatedValue)===!1||((l=(a=this.group)==null?void 0:a.visibilityExpressionExecutor)==null?void 0:l.lastEvaluatedValue)===!1))return this._storedValue!==null&&this.set("_storedValue",null),null;if(this._shouldUseValueExpression){const s=this.evaluatedValueExpression;return this.dataType===y.Date?this._arcadeOutputToDateFieldValue(s):s!=null&&typeof s=="object"?`${s}`:s}return this._storedValue}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e),this.notifyChange("value"),this.notifyChange("valid")}get visible(){var e;return!this._isEditTrackingField&&(this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null&&((e=this.field)==null?void 0:e.visible)!==!1||this._isVisibleByDefault)}_arcadeOutputToDateFieldValue(e){const t=this.field.type;try{if(typeof e=="object"){if(e===null)return null;if(ee(e))return te(e,t);if("getTime"in e&&typeof e.getTime=="function"&&t==="date")return parseInt(e.getTime(),10);if(t==="date-only"||t==="time-only"||t==="timestamp-offset")return e.toString()}else{if(typeof e=="string")return t==="date"?parseInt(e,10):e;if(typeof e=="number"&&t==="date")return e}throw new q("feature-form:invalid-date-value")}catch{return t==="date"?NaN:""}}_isDomainCompatible(e){const{field:t}=this;if((e==null?void 0:e.type)==="coded-value"){const a=typeof e.codedValues[0].code;if(a==="string"&&$(t)||a==="number"&&w(t))return!0}return!!((e==null?void 0:e.type)==="range"&&w(t)||L(t)||D(t))}_validate(){const{dataType:e,domain:t,field:a,minLength:l,range:s,required:o,value:p,maxLength:u}=this;return Q(p,{dataType:e,domain:t,field:a,maxLength:u,minLength:l,range:s,required:o})}};i([n()],r.prototype,"_dateFormRange",null),i([n()],r.prototype,"_dateRange",null),i([n()],r.prototype,"_storedValue",void 0),i([n()],r.prototype,"_configAllowsEdits",null),i([n()],r.prototype,"_layerAndFieldAllowEdits",null),i([n()],r.prototype,"_isVisibleByDefault",null),i([n()],r.prototype,"_isEditTrackingField",null),i([n()],r.prototype,"_shouldUseValueExpression",null),i([n()],r.prototype,"isSubtypeField",null),i([n()],r.prototype,"valueIsOutOfDomain",null),i([n()],r.prototype,"dataType",null),i([n()],r.prototype,"dateDataType",null),i([n()],r.prototype,"domain",null),i([n()],r.prototype,"editable",null),i([n({readOnly:!0})],r.prototype,"error",void 0),i([n({constructOnly:!0})],r.prototype,"preservesValueWhenHidden",void 0),i([n()],r.prototype,"evaluatedRequiredExpression",null),i([n()],r.prototype,"evaluatedValueExpression",null),i([n()],r.prototype,"field",void 0),i([n()],r.prototype,"group",void 0),i([n({readOnly:!0})],r.prototype,"hint",null),i([n()],r.prototype,"includeDate",null),i([n()],r.prototype,"includeTime",null),i([n()],r.prototype,"includeTimeOffset",null),i([n()],r.prototype,"initialFeature",null),i([n({readOnly:!0})],r.prototype,"inputType",null),i([n()],r.prototype,"hasInvalidSwitchValue",null),i([n()],r.prototype,"isRelationshipKeyField",null),i([n()],r.prototype,"label",null),i([n()],r.prototype,"maxLength",null),i([n()],r.prototype,"minLength",null),i([n({readOnly:!0})],r.prototype,"name",null),i([n()],r.prototype,"range",null),i([n()],r.prototype,"required",null),i([n()],r.prototype,"requiredExpressionExecutor",void 0),i([n()],r.prototype,"showNoValueOptionEnabled",null),i([n()],r.prototype,"submittable",null),i([n()],r.prototype,"timeResolution",null),i([n()],r.prototype,"timeStep",null),i([n({readOnly:!0})],r.prototype,"type",void 0),i([n()],r.prototype,"updating",null),i([n()],r.prototype,"valid",null),i([n({value:null})],r.prototype,"value",null),i([n()],r.prototype,"valueExpressionExecutor",void 0),i([n()],r.prototype,"visible",null),r=i([T("esri.widgets.FeatureForm.FieldInput")],r);const be=r;export{be as O,ae as a,ne as l,ie as n,ve as r,ge as s};
