/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */function x(t,n){Array.isArray(n)?t._watchHandles=[...t._watchHandles,...n]:t._watchHandles.push(n)}function L(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const n=m(t);if(!n){const e=w(t.referenceElement);if(!e){g(t);return}return f(e,t,!0),e}return y(n,t.el.parent)||(t.el.parent=n,n.tagName.toLowerCase()==="arcgis-expand"?v(n,t):n.tagName.toLowerCase()==="arcgis-placement"?h(n,t):f(n,t,!1)),n}function m({el:t}){for(let n=t.parentElement;n;n=(n==null?void 0:n.parentElement)??null){if(u.has(n.tagName.toLowerCase()))return n;if("ownedBy"in n&&n.ownedBy instanceof HTMLElement&&u.has(n.ownedBy.tagName.toLowerCase()))return n.ownedBy}}const u=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function y(t,n){if(t!==n)return!1;const e=t.tagName.toLowerCase();return e==="arcgis-expand"||e==="arcgis-placement"}function s(t,n,e="arcgisReady"){var r;const o=t;if(typeof((r=o.view)==null?void 0:r.ready)=="boolean")n(o.view);else{let c=function(i){i.target===t&&(s(t,n,e),t.removeEventListener(e,c))};t.addEventListener(e,c)}}const v=(t,n)=>s(t,e=>{var o;n.el.childElem&&t.content!=null&&t.content.append(n.el.childElem),t.expandIcon=n.icon||((o=n.widget)==null?void 0:o.icon)||t.expandIcon,n.position=t.position,n.el.view=e}),h=(t,n)=>s(t,e=>{n.el.childElem&&n.el.append(n.el.childElem),n.position=t.position,n.el.view=e}),f=(t,n,e)=>s(t,o=>{e?g(n):n.el.childElem&&E(t,n),n.el.view=o},"arcgisViewReadyChange");function E(t,n){var d;const e=n.el.childElem??n.el,o=[...t.children],r={};for(const l of o){const a=l.getAttribute("position")??"manual";r[a]??(r[a]=[]),r[a].push({child:l,position:a,index:o.indexOf(l)})}const c=(d=r[n.position??"manual"])==null?void 0:d.findIndex(({child:l})=>l===n.el),i=t.view.ui;i.remove(e),i.add(e,{position:n.position,index:c})}function C(t){let n=!1,e=t.el.view;const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.el),"view")??{get:()=>e,set:r=>e=r};Object.defineProperty(t.el,"view",{get:o.get.bind(t.el),set:r=>{o.set.call(t.el,r),r&&!n&&(n=!0,t.arcgisReady.emit())},configurable:!0,enumerable:!0}),e&&(t.el.view=e)}function N(t){return t==null||t===""}function O(t,n){return n!=null&&(t==null?void 0:t.position)===n.position&&(t==null?void 0:t.heading)===n.heading&&(t==null?void 0:t.tilt)===n.tilt&&(t==null?void 0:t.fov)===n.fov}function A(t,n){return n===void 0||(t==null?void 0:t.targetGeometry)!==(n==null?void 0:n.targetGeometry)||(t==null?void 0:t.rotation)!==(n==null?void 0:n.rotation)||(t==null?void 0:t.scale)!==(n==null?void 0:n.scale)}function B(t,n){return p(n==null?void 0:n.center,t)}function p(t,n){if(typeof n=="string")return p(t,n.split(",").map(Number));if(!t)return n;if(Array.isArray(n)){const e=n[0],o=n[1],r=n.length>2?n[2]:void 0;if(e!==t.longitude||o!==t.latitude||r!==t.z)return n}else if(n&&!(t!=null&&t.equals(n)))return n}async function H(t,n){n!=null&&(typeof n=="string"?t.el.view=await b(n):t.widget&&(t.el.view=n.view))}async function b(t){const n=w(t);return await new Promise(e=>{var o;typeof((o=n==null?void 0:n.view)==null?void 0:o.ready)=="boolean"?e(n.view):n&&n.addEventListener("arcgisViewReadyChange",()=>e(n.view),{once:!0})})}function g(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function w(t){return typeof t!="string"?t??void 0:(t.includes("#")||t.includes(".")||t.includes("[")?void 0:document.querySelector(`#${t}`))??document.querySelector(t)??void 0}export{O as H,C as L,A as N,B as O,x as P,H as S,L as p,p as u,N as x};
