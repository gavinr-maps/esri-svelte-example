import{r as g,c as s,h as d,g as v}from"./index-Bh2oEzTI.js";import{l as m}from"./index-ee4c09de-CPW6V7nq.js";import{u as p,r as h,g as a,a as r,m as o}from"./index-69f02a9e-wRYZXCy2.js";import{Y as l,Z as y,i as u}from"./index-5cc0d3e9-BXwdUzLn.js";import{p as n,c as f}from"./component-utils-42b12dba-BfugynV_.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.2
 */const V=".arcgis-map{padding:0;margin:0;height:100%;width:100%}",C=V,b=o(l),E=o(y),D=class{constructor(e){g(this,e),this.arcgisViewReadyChange=s(this,"arcgisViewReadyChange",7),this.arcgisViewChange=s(this,"arcgisViewChange",7),this.arcgisViewClick=s(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=s(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=s(this,"arcgisViewDrag",7),this.arcgisViewHold=s(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=s(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=s(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=s(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=s(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=s(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=s(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=s(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=s(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=s(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=s(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=s(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=s(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=s(this,"arcgisViewPointerUp",7),this.manager=p(this),this.reactiveUtils=m(u),this._map=b(this,{editConstructorProperties:this._editMapProperties}),this._setChildElement=i=>{this.el.childElem=i},this.autoDestroyDisabled=!1,this.view=h(E(this,{editConstructorProperties:this._editViewProperties})),this.map=this.view.map,this.allLayerViews=this.view.allLayerViews,this.background=this.view.background,this.basemapView=this.view.basemapView,this.basemap=this._map.basemap,this.center=a(void 0,{get:i=>this.view.center??i,set:i=>{const t=n(i,this.ready?this.view:void 0);return this.ready?(this.view.center=t,this.view.center):t}}),this.constraints=this.view.constraints,this.extent=a(void 0,{get:i=>this.view.extent??i,set:(i,t)=>this.view.ready?(i&&!(t!=null&&t.equals(i))&&(this.view.extent=i),this.view.extent):i}),this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.gamepad=a(void 0,{get:()=>this.ready?this.view.input.gamepad:void 0,set:"ignore"}),this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlightOptions=this.view.highlightOptions,this.interacting=a(!1,{get:()=>this.view.interacting,set:"ignore"}),this.ipsInfo=this._map.ipsInfo,this.itemId=a(void 0,{get:i=>{var t;return((t=this._map.portalItem)==null?void 0:t.id)??i},set:i=>(this.ready&&r.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error),i)}),this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.navigating=a(!1,{get:()=>this.view.navigating,set:"ignore"}),this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.scale=a(void 0,{get:i=>this.view.scale??i,set:i=>(this.ready&&(this.view.scale=i),i)}),this.spatialReference=a(this.view.spatialReference,{set:(i,t)=>t!=null&&t.equals(i)?t:i}),this.stationary=a(!0,{get:()=>this.view.stationary,set:"ignore"}),this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.toMap=h((...i)=>this.view.toMap(...i)),this.toScreen=h((...i)=>this.view.toScreen(...i)),this.updating=this.view.updating,this.viewpoint=a(void 0,{get:()=>this.view.viewpoint,set:(i,t)=>f(t,i)?i:t}),this.zoom=a(void 0,{get:i=>this.view.zoom??i,set:i=>(this.ready&&(this.view.zoom=i),i)})}async addLayer(e,i){var t;(t=this.map)==null||t.add(e,i)}async addLayers(e,i){var t;(t=this.map)==null||t.addMany(e,i)}async closePopup(){var e;(e=this.view)==null||e.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){var t;return await((t=this.view)==null?void 0:t.goTo(e,i))}async hitTest(e,i){var t;return await((t=this.view)==null?void 0:t.hitTest(e,i))}async openPopup(e){var i;await((i=this.view)==null?void 0:i.openPopup(e))}async takeScreenshot(e){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(e))}async tryFatalErrorRecovery(){var e;(e=this.view)==null||e.tryFatalErrorRecovery()}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}componentDidLoad(){var i;(i=this.view).container??(i.container=this.el.childElem);const{watch:e}=this.reactiveUtils;this.manager.onLifecycle(()=>[e(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),e(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})]),r.reEmitAccessorEvents(this.manager,this.view,this.reactiveUtils,"arcgisView")}render(){return d("div",{key:"77569d288f8260b1aeddb513498de4b38a9dd9ae",class:"arcgis-map",ref:this._setChildElement})}_editMapProperties(e){this.map&&(this._map=this.map),this.itemId?e.portalItem={id:this.itemId}:this.basemap?this.basemap==="none"&&(e.basemap=void 0,this.basemap=null):e.basemap="topo-vector";const{basemap:i,...t}=e;i||(e=t);const{ground:c,...w}=e;return c||(e=w),e}_editViewProperties(e){this.view.ui||(e.ui={components:["attribution"]}),e.map??(e.map=this._map);const i=n(this.center,void 0);return i&&(e.center=i),this.viewpoint&&(e.viewpoint=this.viewpoint),this.scale!==void 0&&(e.scale=this.scale),this.extent&&(e.extent=this.extent),this.zoom!==void 0&&(e.zoom=this.zoom),e}get el(){return v(this)}};D.style=C;export{D as arcgis_map};
