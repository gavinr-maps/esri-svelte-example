const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./HUDMaterial.glsl-Vt6rKj_O.js","./glsl-BH37Aalp.js","./VertexAttribute-Cq4MnHjR.js","./vec2-maR1OrZI.js","./common-DQOJ18NT.js","./vec2f64-Dy6m9Nrb.js","./BindType-BBwFZqyN.js","./Accessor-BHnuXKD2.js","./ShaderBuilder-DV1s2efh.js","./vec4f64-o2zAXfmz.js","./Point-XGrwlf63.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./writer-B2bQV2uU.js","./Matrix3PassUniform-Bhi2fM3C.js","./FloatArray-BCfeX8wo.js","./Material-Ba8x5bbY.js","./vec3f64-BLpZdpfb.js","./mathUtils-DV9iOXpW.js","./boundedPlane-Dyz2ub5d.js","./sphere-DQxj5tsv.js","./mat4-Fi6iAz29.js","./vec32-Dvg_eL9J.js","./vec42-YcqnINSP.js","./Polyline-BmuD2-ZN.js","./Extent-CBBGeHb-.js","./mat3-CR8GKnhD.js","./mat3f64-BBpwCtoL.js","./plane-4dpuo6-e.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./mathUtils-B9R7G-2c.js","./lineSegment-C-CDF7QX.js","./ViewingMode-Dodu7ZZk.js","./NoParameters-t-PuNrgq.js","./Texture-D-SqNa4i.js","./signal-DSa0yokC.js","./SimpleObservable-7oieNGD8.js","./enums-D9v74xTE.js","./getDataTypeBytes-BTGR5GyG.js","./renderState-e7QeQoUO.js","./basicInterfaces-CZwQPxTp.js","./Indices-Db9lERgy.js","./InterleavedLayout-Dvj-Snan.js","./BufferView-_QDXRCew.js","./types-D0PSWh4d.js","./triangle-D_E6eTS3.js","./ShaderTechniqueConfiguration-YrUOztAU.js","./lengthUtils-DjJgJFRg.js","./opacityUtils-CSd4XoR2.js","./Promise-CmQqe-ke.js","./Evented-DCWccWGU.js","./requestImageUtils-Brn0e8z8.js","./TextureFormat-1mYWTFa-.js","./HUDRenderStyle-BhGvVxgm.js","./HUDMaterial-DRUv4rua.js","./HUDVisibility.glsl-DSeZY4v-.js","./VerticalOffset.glsl-0YVQE7vQ.js","./BooleanBindUniform-xvVHJCDz.js","./reactiveUtils-BR0C1Kq4.js","./projectBuffer-DOU0xvVi.js","./geodesicConstants-yASAK_zX.js","./GLTextureMaterial-BXvkeRxQ.js","./DefaultBufferWriter-D4XUxbP-.js","./aaBoundingBox-CeBivBRq.js","./RgbaFloatEncoding.glsl-_io2eW3M.js","./Float2PassUniform-Blij1ug3.js","./Float4DrawUniform-C_Hqa-pI.js"])))=>i.map(i=>d[i]);
import{a as g}from"./BooleanBindUniform-xvVHJCDz.js";import{k as _,s as b,a as O,l as $,m as x,t as y}from"./FloatArray-BCfeX8wo.js";import{t as F}from"./RgbaFloatEncoding.glsl-_io2eW3M.js";import{n as s}from"./glsl-BH37Aalp.js";import{r as d,aO as C}from"./Accessor-BHnuXKD2.js";import{i as h,a as T}from"./ShaderTechniqueConfiguration-YrUOztAU.js";import{c as w}from"./NoParameters-t-PuNrgq.js";import{i as N}from"./ShaderBuilder-DV1s2efh.js";import{_ as P}from"./index-tefRSezt.js";import{B as c,o as v,g as m,c as D}from"./renderState-e7QeQoUO.js";import{_ as A}from"./enums-D9v74xTE.js";var a;(function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.PremultipliedAlpha=2]="PremultipliedAlpha",t[t.Depth=3]="Depth",t[t.COUNT=4]="COUNT"})(a||(a={}));let l=class extends T{constructor(){super(...arguments),this.blitMode=a.None,this.hasOpacityFactor=!1}};d([h({count:a.COUNT})],l.prototype,"blitMode",void 0),d([h()],l.prototype,"hasOpacityFactor",void 0);class f extends w{constructor(){super(...arguments),this.opacity=1}}function M(t){const e=new N;e.include(g),e.fragment.uniforms.add(new _("tex",r=>r.texture)),t.hasOpacityFactor&&e.fragment.uniforms.add(new b("opacity",r=>r.opacity));const i=t.blitMode===a.Depth;return i&&(e.fragment.uniforms.add(new O("nearFar",r=>r.camera.nearFar)),e.fragment.include($),e.fragment.include(F)),e.fragment.main.add(s`
    ${i?s`
          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);
          fragColor = float2rgba(normalizedLinearDepth);`:s`
          fragColor = texture(tex, uv) ${t.hasOpacityFactor?"* opacity":""};`}`),e}const q=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:f,build:M},Symbol.toStringTag,{value:"Module"}));class p extends x{constructor(e,i){super(e,i,new y(q,()=>P(()=>import("./HUDMaterial.glsl-Vt6rKj_O.js").then(r=>r.C),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69]),import.meta.url)))}initializePipeline(e){switch(e.blitMode){case a.None:case a.Depth:return c({colorWrite:m});case a.Alpha:return c({blending:D,colorWrite:m});default:C(e.blitMode);case a.PremultipliedAlpha:case a.COUNT:return c({blending:v,colorWrite:m})}}}class G{constructor(e,i=a.None){this._techniques=e,this._parameters=new f,this._configuration=new l,this._configuration.blitMode=i,e.precompile(p,this._configuration)}blit(e,i,r,n){e.bindFramebuffer(r.fbo),e.setClearColor(0,0,0,1),e.clear(A.COLOR),this._parameters.texture=i.getTexture();const o=this._techniques.get(p,this._configuration);e.bindTechnique(o,n,this._parameters),e.screen.draw()}blend(e,i,r,n,o=1){this._configuration.hasOpacityFactor=o<1;const u=this._techniques.get(p,this._configuration);return!!u.compiled&&(e.bindFramebuffer(r.fbo),this._parameters.texture=i.getTexture(),this._parameters.opacity=o,e.bindTechnique(u,n,this._parameters),e.screen.draw(),!0)}}export{p as a,M as g,a as i,f as m,G as o,l as r};
