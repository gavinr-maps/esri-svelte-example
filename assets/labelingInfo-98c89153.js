import{s as a,Q as c,T as f}from"./index-e8c6bcc0.js";import{C as u}from"./LabelClass-669bcee9.js";const l=a.getLogger("esri.layers.support.labelingInfo"),p=/\[([^\[\]]+)\]/gi;function $(t,e,o){return t?t.map(n=>{const r=new u;if(r.read(n,o),r.labelExpression){const i=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;r.labelExpression=r.labelExpression.replaceAll(p,(g,s)=>`[${b(s,i)}]`)}return r}):null}function b(t,e){if(!e)return t;const o=t.toLowerCase();for(let n=0;n<e.length;n++){const r=e[n].name;if(r.toLowerCase()===o)return r}return t}const m={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function h(t,e){const o=c(t);return o.some(n=>y(n,e))?[]:o}function y(t,e){const o=t.labelPlacement,n=m[e];if(!t.symbol)return l.warn("No ILabelClass symbol specified."),!0;if(!n)return l.error(new f("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!n.includes(o)){const r=n[0];o&&l.warn(`Found invalid label placement type ${o} for ${e}. Defaulting to ${r}`),t.labelPlacement=r}return!1}export{h as c,$ as i};
