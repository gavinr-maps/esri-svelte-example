import{Q as c}from"./Point-XGrwlf63.js";import{w as m}from"./Extent-CBBGeHb-.js";function u(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function h(e){let t=0,n=0;for(let r=0;r<e.length;r++){const o=e[r].size;typeof o=="number"&&(t+=o,n++)}return t/n}function p(e,t){var n;return typeof e=="number"?e:(n=e==null?void 0:e.stops)!=null&&n.length?h(e.stops):t}function M(e,t){if(!t)return e;const n=t.filter(s=>s.type==="size").map(s=>{const{maxSize:a,minSize:i}=s;return(p(a,e)+p(i,e))/2});let r=0;const o=n.length;if(o===0)return e;for(let s=0;s<o;s++)r+=n[s];const f=Math.floor(r/o);return Math.max(f,e)}function b(e){var f;const t=e==null?void 0:e.renderer,n=e==null?void 0:e.pointerType,r=n==="touch"?9:6;if(!t)return r;const o="visualVariables"in t?M(r,t.visualVariables):r;if(t.type==="simple")return u(o,t.symbol);if(t.type==="unique-value"){let s=o;return(f=t.uniqueValueInfos)==null||f.forEach(a=>{s=u(s,a.symbol)}),s}if(t.type==="class-breaks"){let s=o;return t.classBreakInfos.forEach(a=>{s=u(s,a.symbol)}),s}return t.type==="dot-density"||t.type,o}function d(e,t,n,r=new m){let o=0;if(n.type==="2d")o=t*(n.resolution??0);else if(n.type==="3d"){const x=n.overlayPixelSizeInMapUnits(e),l=n.basemapSpatialReference;o=l==null||l.equals(n.spatialReference)?t*x:c(l)/c(n.spatialReference)}const f=e.x-o,s=e.y-o,a=e.x+o,i=e.y+o,{spatialReference:y}=n;return r.xmin=Math.min(f,a),r.ymin=Math.min(s,i),r.xmax=Math.max(f,a),r.ymax=Math.max(s,i),r.spatialReference=y,r}function w(e,t,n){const r=n.toMap(e);return r==null?!1:d(r,b(),n,z).intersects(t)}const z=new m;export{w as i,b as o,d as r};
