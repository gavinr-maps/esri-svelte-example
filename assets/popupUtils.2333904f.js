import{r as e,gd as d,g1 as p}from"./vendor.d0a39f0f.js";async function l(l,t=l.popupTemplate){if(!e(t))return[];const n=await t.getRequiredFields(l.fieldsIndex),{lastEditInfoEnabled:a}=t,{objectIdField:i,typeIdField:s,globalIdField:u,relationships:f}=l;if(n.includes("*"))return["*"];const o=a?await d(l):[],r=p(l.fieldsIndex,[...n,...o]);return s&&r.push(s),r&&i&&l.fieldsIndex.has(i)&&-1===r.indexOf(i)&&r.push(i),r&&u&&l.fieldsIndex.has(u)&&-1===r.indexOf(u)&&r.push(u),f&&f.forEach((e=>{const{keyField:d}=e;r&&d&&l.fieldsIndex.has(d)&&-1===r.indexOf(d)&&r.push(d)})),r}function t(d,p){return d.popupTemplate?d.popupTemplate:e(p)&&p.defaultPopupTemplateEnabled&&e(d.defaultPopupTemplate)?d.defaultPopupTemplate:null}export{t as d,l as t};
