const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./reactiveUtils-XM7cS2OP.js","./Accessor-BmwT4B0c.js","./Evented-Dw4_VOGn.js","./SimpleObservable-CvOkykwM.js"])))=>i.map(i=>d[i]);
import{_ as y,p as w,y as g,z as C,A as P,C as E,D as b,F as A,G as L,t as U}from"./index-4eY77cms.js";var x=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function B(t){return t.default!==void 0}async function D(){if(x)return await window.$arcgis.import("esri/core/reactiveUtils");const t=await y(()=>import("./reactiveUtils-XM7cS2OP.js").then(o=>o.r),__vite__mapDeps([0,1,2,3]),import.meta.url);return B(t)?t.default:t}var m;async function p(){return m??(m=D()),await m}var O=(t,o)=>(e,r)=>V(e,t,r),I=class extends L{constructor(t,o,e){super(t),this._loadAccessor=o,this._options=e,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(_.makeGetterProxy(t,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches)),U(t,r=>{r&&(this._instancePropName=r)},this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){var a,n;this.reactiveUtils=await p();const t=this.component,o=this._gatherParameters(),e=((n=(a=this._options)==null?void 0:a.editConstructorProperties)==null?void 0:n.call(t,o))??o,r=e instanceof Promise?await e:e,l=t,s=typeof this._instancePropName=="string"?l[this._instancePropName]:void 0;s!=null&&s!==this.exports?(this._instance=s,s.set(r)):this._instance=await this._createInstance(r),!t.manager.destroyed&&(_.watchComponentUpdates(this,this._instance,this._watchedProperties),_.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([e,r])=>[r,this.component[e]]).filter(([,e])=>e!==void 0))}async _createInstance(t){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(t):await this._loadAccessor(t)}_isAccessorConstructor(t){return"prototype"in t&&"declaredClass"in t.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},V=w(I),_={makeGetterProxy:(t,o,e,r)=>new Proxy({},{has:(l,s)=>typeof s=="string"||s in l,get:(l,s)=>{const u=Reflect.get(l,s);if(typeof s=="symbol"||s in Promise.prototype)return u;const a=s in l,n=(e==null?void 0:e.value)??!0;if(a||!n)return u;if(!o.has(s))return A(t,i=>{i!==void 0&&o.set(i.key,s)},u)}}),watchComponentUpdates(t,o,e){function r(a,n){const i=e.get(n),c=o[i];return typeof c=="boolean"&&i!==n&&n.toLowerCase().includes("disable")?!c:c}const l=(a,n,i)=>{const c=e.get(i),f=o[c],d=typeof f=="boolean"&&c!==i&&i.toLowerCase().includes("disable");if((d?!f:s.manager.isLit?f??void 0:f)===a)return a;o[c]=d?!a:a;const h=o[c];return d?!h:h},s=t.component,u=s.manager.internals;e.forEach((a,n)=>{u.accessorGetter[n]=r,u.accessorSetter[n]=l})},watchAccessorUpdates(t,o,e){const{component:r}=t,l=r,s=o,u=G(o);E(()=>e.forEach((a,n)=>{if(u.has(a))return;const i=l[n];let c=s[a];r.manager.isLit&&(c??(c=void 0));const d=typeof i=="boolean"&&a!==n&&n.toLowerCase().includes("disable")?!i:i;d!=null&&c!==d&&(s[a]=d)})),t.onLifecycle(()=>{if(!o.destroyed)return Array.from(e,([a,n])=>t.reactiveUtils.watch(()=>s[n],()=>{const i=s[n],f=typeof i=="boolean"&&n!==a&&a.toLowerCase().includes("disable")?!i:i;b(()=>{l[a]=f})},{initial:!0}))})},reEmitAccessorEvents(t,o,e,r){if(!("on"in o&&typeof o.on=="function"))return;const s=Object.entries(t.component).map(([n,i])=>{const c=i;if(!n.startsWith(r)||n===r||typeof c!="object"||c===null||!("emit"in c)||typeof c.emit!="function")return;const f=c.emit,d=n.slice(r.length);return[C(d).toLowerCase(),f]}).filter(P);if(s.length===0)return;const u=o,a=()=>u;t.onLifecycle(()=>{if(!o.destroyed)return s.map(([n,i])=>e.on(a,n,i))})},async reCreate(t,o){const e=o.manager.useRefSync(t);e!==void 0&&await e.reCreate()}};function G(t){var r;const e=Object.entries(((r=t.__accessor__)==null?void 0:r.metadata)??{});return new Set(e.filter(([l,s])=>(s==null?void 0:s.readOnly)===!0).map(([l])=>l))}function R(t,o){const e=g(),r=e.manager,l=p();r.onLoaded(()=>{l.then(u=>r.onLifecycle(()=>u.on(t,o,s.emit)))});const s=e.constructor.$createEvent();return s}export{I as A,_ as a,O as m,R as r};
