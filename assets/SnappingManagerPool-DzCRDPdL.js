import{e as i,aC as p}from"./Accessor-BHnuXKD2.js";import{d as c,A as s,V as u}from"./reactiveUtils-BR0C1Kq4.js";import{d as f,p as l,I as m}from"./SnappingManager-CF4NflXd.js";import{p as d}from"./RightAngleSnappingHint-CCcBBYgG.js";function $(t,e){const r=new f({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??d.touchSensitivityMultiplier});return{...c(()=>{var n,o;return((o=(n=t.map)==null?void 0:n.allLayers)==null?void 0:o.toArray())??[]},n=>{r.featureSources=new u(n).map(o=>new l({layer:o}))},s),options:r}}const a=new Map;function h(t){if(!a.has(t)){const n=$(t,{distance:10}),o=v(t,n.options);a.set(t,{referenceCount:0,snappingManager:o,remove:()=>{n.remove(),o.destroy()}})}const e=a.get(t);e.referenceCount++;const r=i(()=>g(t,e));return{snappingManager:e.snappingManager,...r}}function g(t,e){e.referenceCount--,e.referenceCount>0||p(()=>{e.referenceCount===0&&(e.remove(),a.delete(t))})}function v(t,e){return new m({view:t,options:e})}export{h as a};
