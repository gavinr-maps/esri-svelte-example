const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Cz6Ao6Wl.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DwIhxbHs.js","./dom-DEluURzl.js","./observers-Co4E8E8j.js","./index-BPm91e5Z.js","./keyed-CU1C-h1n.js","./directive-helpers-DaBykg1t.js","./ref-D9wHsL_T.js","./interactive-DTzfFku4.js","./loadable-XBvaWFYY.js","./component-CBVlbUuE.js","./index-DMeQur4V.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./openCloseComponent-nqWrSaIH.js","./static-DLD4WjLv.js","./FloatingArrow-BZRr6Zld.js","./useFocusTrap-COeL24Kx.js","./focusTrapComponent-D1wJZ4RD.js","./key-CZcQa38B.js","./index-DK5B8inx.js","./array-BbE1dLa5.js","./index-B0pN5y8B.js","./index-DVGzfobf.js","./dynamicClasses-pKEMtFzB.js","./index-C7Sgjfzm.js","./resources6-Cs2_VmEC.js","./index-XCNLEnDV.js","./customElement-_nG5icNK.js","./utils-Dtivty39.js","./resources5-SciNIBSe.js","./index-BCDLx0rN.js","./index-DyXGQ9Xl.js","./index-fFnlo_g2.js","./index-DWeq-ojO.js","./index-pyEU_klK.js","./live-D7NQ-TrC.js","./form-BzoUrXC7.js","./label-CHHpnzD0.js","./locale-CXx8I9ox.js","./Validation-BYp9DS84.js","./input-DI9tZAPS.js","./filter-D4A4y0z5.js","./escapeRegExp-CdLjXKbf.js","./index-CV25o1as.js","./resources4-Crg87oFz.js"])))=>i.map(i=>d[i]);
import{_ as b}from"./index-4eY77cms.js";import{r as s,m as l,a as f}from"./Accessor-BmwT4B0c.js";import{a as E,i as C}from"./catalogUtils-CGCu8hgu.js";import{t as A,n as M}from"./actionUtils-CtQI3q6p.js";import{O as S,c as L,n as a,T as O}from"./jsxFactory-Cnml7uXM.js";import{r as k,t as D,w as P,l as $,y as x,k as R,N as V}from"./layerListUtils-BIu86t6C.js";var T;let o=T=class extends S{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=t=>{this.item.actionsOpen=t.currentTarget.open},this._setTooltipReference=t=>{var i,n;(n=this.onTooltipReferenceChange)==null||n.call(this,(i=this.item.layer)==null?void 0:i.uid,t)},this._removeTooltipReference=()=>{var t,i;(i=this.onTooltipReferenceChange)==null||i.call(this,(t=this.item.layer)==null?void 0:t.uid,null)}}loadDependencies(){return L({"action-group":()=>b(()=>import("./index-Cz6Ao6Wl.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url),"action-menu":()=>b(()=>import("./index-DK5B8inx.js").then(e=>e.i),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,36]),import.meta.url),action:()=>b(()=>import("./index-BPm91e5Z.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25]),import.meta.url),icon:()=>b(()=>import("./index-DwIhxbHs.js").then(e=>e.i),__vite__mapDeps([16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18]),import.meta.url),"list-item":()=>b(()=>import("./index-B0pN5y8B.js"),__vite__mapDeps([37,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,38,22,21,27,28,23,34,24,29,39,1,15,19,20,25,40,41,42,43,44,45]),import.meta.url),list:()=>b(()=>import("./index-BCDLx0rN.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,47,22,21,18,17,20,16,48,49,50,51,30,52,23,34,53,24,54,25,55,56,57,58,28,44]),import.meta.url),notice:()=>b(()=>import("./index-CV25o1as.js"),__vite__mapDeps([59,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,22,21,24,60,29,25,15]),import.meta.url)})}render(){var _,g;const e=this.parentTitles??[],{_title:t,item:i,activeItem:n,selectionMode:c,selectedItems:p,messages:d,parent:u,css:r}=this,y="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in d&&!i.visibleAtCurrentTimeExtent?`${t} (${d.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in d&&!i.visibleAtCurrentScale?`${t} (${d.layerInvisibleAtScale})`:t,v="parent"in i&&((g=(_=i.parent)==null?void 0:_.layer)==null?void 0:g.type)==="catalog",{layer:m}=i,I="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return a("calcite-list-item",{afterCreate:h=>this._focusSelectedDragEl(h,i),afterUpdate:h=>this._focusSelectedDragEl(h,i),class:this.classes(r.item,"itemActive"in r&&{[r.itemActive]:n===i}),"data-item":i,"data-layer-id":m==null?void 0:m.id,dragDisabled:!i.sortable||v,id:m==null?void 0:m.uid,key:`list-item-${m==null?void 0:m.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in i&&i.open,selected:c!=="none"&&p.includes(i),title:y,unavailable:I,value:m==null?void 0:m.uid,onCalciteListItemSelect:h=>"visible"in i&&this._handleCalciteListItemSelect(h,i,u),onCalciteListItemToggle:h=>"open"in i&&this._handleCalciteListItemToggle(h,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:i,css:n}=this;if(!i.statusIndicators)return null;const{publishing:c}=e,p="updating"in e&&e.updating&&!t,d="connectionStatus"in e?e.connectionStatus:void 0,u=!!d;return a("calcite-icon",{class:this.classes(n.statusIndicator,{[n.publishing]:c},"updating"in n&&{[n.updating]:p},"connectionStatus"in n&&{[n.connectionStatus]:u},"connectionStatusConnected"in n&&{[n.connectionStatusConnected]:u&&d==="connected"}),icon:k({connectionStatus:d,publishing:c}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:i}=this,{layer:n}=e,c="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,p="temporaryTableIndicators"in t&&t.temporaryTableIndicators,d=n&&"persistenceEnabled"in n&&(E(n)||!n.persistenceEnabled);return(c||p)&&d?a("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:i,visibilityAppearance:n,css:c}=this;if(!("visible"in e&&"layerVisibility"in i&&"visibleToggle"in c&&n))return null;const{visible:p}=e,d=this._getParentVisibilityMode(t);if(d==="inherited")return null;const u=D({visible:p,exclusive:d==="exclusive",visibilityAppearance:n}),r=n==="checkbox",y=i.layerVisibility;return a("calcite-action",{appearance:"transparent",class:c.visibleToggle,icon:r?u:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:r?"actions-start":"actions-end",text:y,title:y},r?null:a("calcite-icon",{class:this.classes({[c.visibleIcon]:d!=="exclusive"&&p}),icon:u,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:a("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:t,title:i,disabled:n}=e;return a("calcite-action",{active:t,appearance:"transparent",disabled:n,icon:A(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,i=t.options;return a("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},a("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>a("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(t=>this._renderAction({action:t,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,t=this.item.layer,i=(t==null?void 0:t.type)==="catalog-footprint",n=(t==null?void 0:t.type)==="sublayer"&&C(t,"footprints");return"itemCatalogIcon"in e&&(i||n)?a("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,t=this.item.layer,i=(t==null?void 0:t.type)==="catalog-dynamic-group",n=(t==null?void 0:t.type)==="sublayer"&&C(t,"layers-in-view");return"itemCatalogIcon"in e&&(i||n)?a("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:i}=this;if(!("visible"in t))return;const{layer:n}=t,c=(n==null?void 0:n.type)==="catalog-dynamic-group";return"catalogLayerList"in i&&i.catalogLayerList&&c?a("calcite-action",{appearance:"transparent",disabled:!n.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:i,listModeDisabled:n,selectionMode:c,displayMode:p}=this;if(!("children"in t))return;const d=[...this.parentTitles??[],t.title],{children:u,layer:r}=t,y=(r==null?void 0:r.type)!=="catalog-dynamic-group"&&P(t),v=!n&&$(r),m=(r==null?void 0:r.type)==="group",I=!v&&!y&&e&&m,_=!!e&&"childrenSortable"in t&&t.childrenSortable&&x(t);return y||I?a("calcite-list",{canPull:g=>!!this.canMove&&this.canMove(g,"pull"),canPut:g=>!!this.canMove&&this.canMove(g,"put"),"data-item":t,"data-layer-type":i,displayMode:p,dragEnabled:_,group:m?i:`${i}-${r==null?void 0:r.uid}`,key:`child-list-${r==null?void 0:r.uid}`,label:t.title,selectionAppearance:"border",selectionMode:c},u==null?void 0:u.filter(g=>!g.hidden&&(this.visibleElements.errors||!g.error)).toArray().map(g=>this._renderItem(g,t,d)),this._renderedTablesItem):null}get _hasTables(){var i,n;const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&"tables"in t&&!!((i=t.tables)!=null&&i.length);case"map-image":case"tile":return e.includes(t.type)&&"subtables"in t&&!!((n=t.subtables)!=null&&n.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:i}=this,{layer:n}=e;return"itemTableIcon"in i&&"visible"in e&&"tables"in t&&this._hasTables?a("calcite-list-item",{class:i.item,"data-layer-id":n==null?void 0:n.id,dragDisabled:!0,key:`list-item-table-list-tables-${n==null?void 0:n.uid}`,label:t.tables,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},a("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),a("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:i}=this;return e.error?a("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},a("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},a("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?a("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},a("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},a("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:R(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(t=>t.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,t)=>e+t.length,0)}_renderAction(e){const{item:t}=this,{action:i,textEnabled:n}=e;if(!i)return null;const{active:c,disabled:p,title:d,type:u,indicator:r}=i;return a("calcite-action",{active:u==="toggle"&&i.value,appearance:"transparent","data-action-id":i.id,disabled:p,icon:A(i),indicator:r,key:`action-${i.uid}`,loading:c,onclick:()=>this._triggerAction(t,i),scale:"s",slot:n?void 0:"actions-end",text:d??"",textEnabled:n,title:d??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(e){const{css:t}=this,{className:i,icon:n}=e;if(n)return null;const c="image"in e?e.image:void 0,p={[t.itemActionIcon]:!!i,[t.itemActionImage]:!!c};return i&&(p[i]=!0),c||i?a("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,p),key:"icon",styles:M(c)}):null}_renderItem(e,t,i=[]){var n;return a(T,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(n=e.layer)==null?void 0:n.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var t;e&&((t=this.onCatalogOpen)==null||t.call(this,e))}_focusSelectedDragEl(e,t){var i,n;this.selectedDragItemLayerUid===((i=t.layer)==null?void 0:i.uid)&&(O(e),(n=this.onSelectedDragItemLayerUidChange)==null||n.call(this,null))}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,t,i){if(V(e.target)!==t)return;const n=this._getParentVisibilityMode(i);this.selectionMode==="none"&&n!=="inherited"&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){!e||!("visible"in e)||this._getParentVisibilityMode(t)==="exclusive"&&e.visible||(e.visible=!e.visible)}};o.vnodeSelector="calcite-list-item",s([l()],o.prototype,"activeItem",void 0),s([l()],o.prototype,"canMove",void 0),s([l()],o.prototype,"css",void 0),s([l()],o.prototype,"displayMode",void 0),s([l()],o.prototype,"dragEnabled",void 0),s([l()],o.prototype,"item",void 0),s([l()],o.prototype,"layerTablesEnabled",void 0),s([l()],o.prototype,"listModeDisabled",void 0),s([l()],o.prototype,"messages",void 0),s([l()],o.prototype,"messagesCommon",void 0),s([l()],o.prototype,"onAction",void 0),s([l()],o.prototype,"onPanelOpen",void 0),s([l()],o.prototype,"onCatalogOpen",void 0),s([l()],o.prototype,"onTablesOpen",void 0),s([l()],o.prototype,"onSelectedDragItemLayerUidChange",void 0),s([l()],o.prototype,"onTooltipReferenceChange",void 0),s([l()],o.prototype,"parent",void 0),s([l()],o.prototype,"parentTitles",void 0),s([l()],o.prototype,"rootGroupUid",void 0),s([l()],o.prototype,"selectionMode",void 0),s([l()],o.prototype,"selectedItems",void 0),s([l()],o.prototype,"selectedDragItemLayerUid",void 0),s([l()],o.prototype,"visibleElements",void 0),s([l()],o.prototype,"visibilityAppearance",void 0),s([l()],o.prototype,"_title",null),s([l()],o.prototype,"_renderedItemStatus",null),s([l()],o.prototype,"_renderedItemTemporaryIcon",null),s([l()],o.prototype,"_renderedItemToggle",null),s([l()],o.prototype,"_renderedPanel",null),s([l()],o.prototype,"_renderedPanelAction",null),s([l()],o.prototype,"_renderedActions",null),s([l()],o.prototype,"_renderedActionMenu",null),s([l()],o.prototype,"_renderedActionMenuContent",null),s([l()],o.prototype,"_renderedCatalogFootprintIcon",null),s([l()],o.prototype,"_renderedCatalogDynamicIcon",null),s([l()],o.prototype,"_renderedCatalogSelectNode",null),s([l()],o.prototype,"_renderedChildList",null),s([l()],o.prototype,"_hasTables",null),s([l()],o.prototype,"_renderedTablesItem",null),s([l()],o.prototype,"_renderedItemMessage",null),s([l()],o.prototype,"_singleAction",null),s([l()],o.prototype,"_filteredSections",null),s([l()],o.prototype,"_actionsCount",null),o=T=s([f("esri.widgets.LayerList.LayerListItem")],o);const j=o;export{j as I};
