import{r as p,m as c,a as m,g as v}from"./Accessor-BHnuXKD2.js";import{V as u,d as P,A as f}from"./reactiveUtils-BR0C1Kq4.js";import{n as x}from"./customElement-0urxnKUi.js";import{l as y}from"./AnchorElementViewModel-CqI4lmqA.js";import{P as $}from"./Polyline-BmuD2-ZN.js";let h=class extends v{constructor(e){super(e),this._hoveredPoints=new u}initialize(){this.addHandles(P(()=>this._hoveredPoints.toArray().map(({anchor:e,element:o})=>({screenLocation:e.screenLocation,element:o})),e=>{for(const{screenLocation:o,element:t}of e)o&&(t.style.transform=`translate(${o.x}px, ${o.y}px)`)},f))}destroy(){this._hoveredPoints.drain(e=>this._destroyHoveredPoint(e))}update(e){var a;const o=this.view,t=this._hoveredPoints,s=e.length;for(;this._hoveredPoints.length>s;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<s;){const r=this._makeHoveredPoint();t.push(r),(a=o.surface)==null||a.appendChild(r.element)}for(let r=0;r<s;++r){const i=t.at(s-1-r),d=e[r];this._updateHoveredPoint(i,d)}}_makeHoveredPoint(){const{size:e,borderStyle:o,borderColor:t,borderWidth:s,boxShadow:a}=x().hoveredPointsStyle,r=this.view,i=new y({view:r,screenLocationEnabled:!0}),d=document.createElement("div"),n=d.style;return n.position="absolute",n.top="0",n.left="0",n.contain="strict",n.boxSizing="border-box",n.width=`${e}px`,n.height=`${e}px`,n.marginTop=`-${e/2}px`,n.marginLeft=`-${e/2}px`,n.border=`${o} ${s}px ${t}`,n.borderRadius=`${e}px`,n.boxShadow=a,{anchor:i,element:d}}_updateHoveredPoint({anchor:e,element:o},t){e.screenLocationEnabled=!0,e.location=t.hoveredPoint;const s=o.style;s.display="block",s.background=t.color.toCss()}_destroyHoveredPoint({anchor:e,element:o}){var t;e.destroy(),(t=this.view.surface)==null||t.removeChild(o)}};p([c()],h.prototype,"view",void 0),p([c()],h.prototype,"_hoveredPoints",void 0),h=p([m("esri.widgets.ElevationProfile.support.HoveredPoints")],h);function L(e,o){const t=e.samples??[],s=t.length-1,a=[];let r=[];for(let i=0;i<=s;i++){const{x:d,y:n,z:l}=t[i];l!=null&&r.push([d,n,l]),i!==s&&l!=null||!r.length||(a.push(r),r=[])}return new $({paths:a,hasZ:!0,spatialReference:o})}export{h as a,L as t};
