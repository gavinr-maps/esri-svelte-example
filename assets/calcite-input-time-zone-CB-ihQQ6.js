const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index2-CD3OMv-j.js","./time-zones-B23cWwRL.js","./index3-Do8bQ1HQ.js","./continent-DJXoL968.js","./index4-L3VP-GRQ.js"])))=>i.map(i=>d[i]);
import{_ as h}from"./index-CeCSsEgo.js";import{p as P,H as w,d as p,h as d,c as M}from"./jsxFactory-CbAu6VfF.js";import{c as F,d as k}from"./label-rdYpV4K5.js";import{u as B,I as V}from"./interactive-Dtpmn6Ls.js";import{c as R,d as z,b as $}from"./locale-BUTTOPma.js";import{u as A,c as U,d as H,s as W}from"./t9n-DfK3dFGw.js";import{c as G,s as q,a as j}from"./loadable-CTFTnu2T.js";import{c as K,d as J,a as N,H as Q}from"./form-DcBTx4ZC.js";import{d as X}from"./chip-Bl8qrqgL.js";import{d as Y}from"./combobox-Bv_ShTsg.js";import{d as ee}from"./combobox-item-CmQXBy7I.js";import{d as te}from"./combobox-item-group-ByJUMCnL.js";import{d as oe}from"./icon-DIKjN-ev.js";import{d as se}from"./input-message-CKyGNFPw.js";import"./Evented-CXIxDjmW.js";import"./Accessor-D6mNnsWy.js";import"./subclass-BR3PhgZG.js";import"./intl-Dpfm8vPB.js";import"./Promise-CZrWwByK.js";import"./jsonMap-DCC6W5ex.js";import"./assets-C2mb-ea2.js";import"./reactiveUtils-BFQ0BtrB.js";import"./shared-B3wH2qpO.js";import"./uuid-fwrPAdZb.js";import"./dom-Cv0oa6So.js";import"./component-ByvC-PUv.js";import"./key-D5DPfjW0.js";import"./observers-EizV_Lvc.js";import"./core-2D-WamSI.js";import"./filter-BHzLPuAd.js";import"./debounce-C5YDvsuO.js";import"./floating-ui-BiOoil4s.js";import"./openCloseComponent-v_dlVp47.js";import"./Validation-BBJwLSGg.js";import"./utils2-Dc8c3XNK.js";import"./conditionalSlot-MT4PnZbw.js";const ie={offset:"offset"},ne=60,y=["CET","CST6CDT","EET","EST","EST5EDT","Factory","HST","MET","MST","MST7MDT","PST8PDT","UTC","WET"];function T(t){return t.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace("âˆ’","-")}function ae(t,e){const o=C(t,"en-US",e).replace("GMT","");return o===""?0:Number(T(o))*ne}function le(){return new Date().getTimezoneOffset()*-1}function re(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}async function ce(t,e,o,s,l){if(o==="name"){const{groupByName:i}=await h(async()=>{const{groupByName:a}=await import("./index2-CD3OMv-j.js");return{groupByName:a}},__vite__mapDeps([0,1]),import.meta.url);return(await i()).map(({label:a})=>({label:g(a),value:a,filterValue:a})).filter(a=>!!a).sort()}const c=l==="user"?t:l==="utc"?"fr":"en-GB",f=s.getTime();if(o==="region"){const[{groupByRegion:i},{getCountry:r}]=await Promise.all([h(()=>import("./index3-Do8bQ1HQ.js"),__vite__mapDeps([2,1,3]),import.meta.url),h(()=>import("./country-z3Y3IuJ_.js"),[],import.meta.url)]);return(await i()).map(({label:n,tzs:m})=>({label:n,items:m.map(u=>{const Z=T(C(u,c,f));return{label:x(u,e),value:u,filterValue:g(u),metadata:{offset:Z,country:r(u)}}})})).sort((n,m)=>n.label.localeCompare(m.label))}const[{groupByOffset:D},{DateEngine:_}]=await Promise.all([h(()=>import("./index4-L3VP-GRQ.js"),__vite__mapDeps([4,1,3]),import.meta.url),h(()=>import("./index5-Bd1ZMZtF.js"),[],import.meta.url)]),v=await D({dateEngine:new _,groupDateRange:1,startDate:new Date(f).toISOString()}),S=new Intl.ListFormat(t,{style:"long",type:"conjunction"});return v.forEach(i=>{const r=[];let a=0;i.tzs.forEach((n,m)=>{y.includes(n)&&a++,r[m]=a}),i.tzs=i.tzs.filter(n=>!y.includes(n)),i.labelTzIdx=i.labelTzIdx.map(n=>n-r[n]).filter(n=>n>=0&&n<i.tzs.length)}),v.map(({labelTzIdx:i,tzs:r})=>{const a=r[0],n=T(C(a,c,f)),m=ae(a,f),u=i.map(b=>x(r[b],e));return{label:ue(e,n,S.format(u)),value:m,filterValue:r.map(b=>g(b))}}).filter(i=>!!i).sort((i,r)=>i.value-r.value)}function x(t,e){return e[t]||de(t)}function me(t,e,o){return o.timeZoneRegionLabel.replace("{city}",t).replace("{country}",I(o,e))}function I(t,e){return t[e]||e}function de(t){return t.split("/").pop()}function g(t){return t.replace(/_/g," ")}function ue(t,e,o){return t.timeZoneLabel.replace("{offset}",e).replace("{cities}",o)}function C(t,e,o=Date.now()){return $(e,{timeZone:t,timeZoneName:"shortOffset"}).formatToParts(o).find(({type:c})=>c==="timeZoneName").value}function fe(t){return t.items!==void 0}function he(t){return fe(t[0])?t.flatMap(e=>e.items):t}function E(t,e,o){return o==null?null:he(t).find(s=>s[e]==o)}const pe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}.offset{white-space:nowrap}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",be=pe,L=P(class extends w{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInputTimeZoneBeforeClose=p(this,"calciteInputTimeZoneBeforeClose",6),this.calciteInputTimeZoneBeforeOpen=p(this,"calciteInputTimeZoneBeforeOpen",6),this.calciteInputTimeZoneChange=p(this,"calciteInputTimeZoneChange",6),this.calciteInputTimeZoneClose=p(this,"calciteInputTimeZoneClose",6),this.calciteInputTimeZoneOpen=p(this,"calciteInputTimeZoneOpen",6),this.setComboboxRef=e=>{this.comboboxEl=e},this.onComboboxBeforeClose=e=>{e.stopPropagation(),this.overrideSelectedLabelForRegion(!1),this.calciteInputTimeZoneBeforeClose.emit()},this.onComboboxBeforeOpen=e=>{e.stopPropagation(),this.overrideSelectedLabelForRegion(!0),this.calciteInputTimeZoneBeforeOpen.emit()},this.onComboboxChange=e=>{e.stopPropagation();const s=e.target.selectedItems[0];if(!s){this.value=null,this.selectedTimeZoneItem=null,this.calciteInputTimeZoneChange.emit();return}const l=this.findTimeZoneItemByLabel(s.textLabel),c=`${l.value}`;this.value===c&&l.label===this.selectedTimeZoneItem.label||(this.value=c,this.selectedTimeZoneItem=l,this.calciteInputTimeZoneChange.emit())},this.onComboboxClose=e=>{e.stopPropagation(),this.open=!1,this.calciteInputTimeZoneClose.emit()},this.onComboboxOpen=e=>{this.open=!0,e.stopPropagation(),this.calciteInputTimeZoneOpen.emit()},this.clearable=!1,this.disabled=!1,this.form=void 0,this.maxItems=0,this.messages=void 0,this.messageOverrides=void 0,this.mode="offset",this.offsetStyle="user",this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.open=!1,this.overlayPositioning="absolute",this.referenceDate=void 0,this.required=!1,this.scale="m",this.status="idle",this.value=void 0,this.readOnly=!1,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}handleTimeZoneItemPropsChange(){this.updateTimeZoneItemsAndSelection()}openChanged(){this.comboboxEl.open=this.open}handleValueChange(e,o){if(e=this.normalizeValue(e),!e&&this.clearable){this.value=e,this.selectedTimeZoneItem=null;return}const s=this.findTimeZoneItem(e);if(!s){this.value=o;return}this.selectedTimeZoneItem=s}async setFocus(){await G(this),await this.comboboxEl.setFocus()}effectiveLocaleWatcher(){A(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}overrideSelectedLabelForRegion(e){if(this.mode!=="region"||!this.selectedTimeZoneItem)return;const{label:o,metadata:s}=this.selectedTimeZoneItem;this.comboboxEl.selectedItems[0].textLabel=e?o:me(o,s.country,this.messages)}findTimeZoneItem(e){return E(this.timeZoneItems,"value",e)}findTimeZoneItemByLabel(e){return E(this.timeZoneItems,"label",e)}async updateTimeZoneItemsAndSelection(){if(this.timeZoneItems=await this.createTimeZoneItems(),this.value===""&&this.clearable){this.selectedTimeZoneItem=null;return}const e=this.mode==="offset"?le():re(),o=this.value??e;this.selectedTimeZoneItem=this.findTimeZoneItem(o)||this.findTimeZoneItem(e)}async createTimeZoneItems(){return!this.effectiveLocale||!this.messages?[]:ce(this.effectiveLocale,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()),this.offsetStyle)}connectedCallback(){K(this),F(this),R(this),U(this)}disconnectedCallback(){J(this),k(this),z(this),H(this)}normalizeValue(e){return e===null?"":e}async componentWillLoad(){q(this),await W(this),this.value=this.normalizeValue(this.value),await this.updateTimeZoneItemsAndSelection();const e=this.selectedTimeZoneItem?`${this.selectedTimeZoneItem.value}`:null;N(this,e),this.value=e}componentDidLoad(){j(this),this.overrideSelectedLabelForRegion(this.open),this.openChanged()}componentDidRender(){B(this)}render(){return d(M,{key:"f6514d911e175218d13e8b10850d32c8e1307d21"},d(V,{key:"02472ff66a2bae4e70435d22a71a201aa68b2eb3",disabled:this.disabled},d("calcite-combobox",{key:"418552fd458195d30c0ad5f99bf61ee793c1207e",clearDisabled:!this.clearable,disabled:this.disabled,label:this.messages.chooseTimeZone,lang:this.effectiveLocale,maxItems:this.maxItems,onCalciteComboboxBeforeClose:this.onComboboxBeforeClose,onCalciteComboboxBeforeOpen:this.onComboboxBeforeOpen,onCalciteComboboxChange:this.onComboboxChange,onCalciteComboboxClose:this.onComboboxClose,onCalciteComboboxOpen:this.onComboboxOpen,overlayPositioning:this.overlayPositioning,placeholder:this.mode==="name"?this.messages.namePlaceholder:this.mode==="offset"?this.messages.offsetPlaceholder:this.messages.regionPlaceholder,placeholderIcon:"search",readOnly:this.readOnly,ref:this.setComboboxRef,scale:this.scale,selectionMode:this.clearable?"single":"single-persist",status:this.status,"validation-icon":this.validationIcon,"validation-message":this.validationMessage},this.renderItems()),d(Q,{key:"4b67af71a4c5f676a76b5ad43639e8c5828992bd",component:this})))}renderItems(){return this.mode==="region"?this.renderRegionItems():this.timeZoneItems.map(e=>{const o=this.selectedTimeZoneItem===e,{label:s,value:l}=e;return d("calcite-combobox-item",{"data-value":l,key:s,selected:o,textLabel:s,value:`${e.filterValue}`})})}renderRegionItems(){return this.timeZoneItems.flatMap(({label:e,items:o})=>d("calcite-combobox-item-group",{key:e,label:I(this.messages,e)},o.map(s=>{const l=this.selectedTimeZoneItem===s,{label:c,value:f}=s;return d("calcite-combobox-item",{"data-value":f,description:I(this.messages,s.metadata.country),key:c,metadata:s.metadata,selected:l,textLabel:c,value:`${s.filterValue}`},d("span",{class:ie.offset,slot:"content-end"},s.metadata.offset))})))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],open:["openChanged"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}}static get style(){return be}},[17,"calcite-input-time-zone",{clearable:[516],disabled:[516],form:[513],maxItems:[514,"max-items"],messages:[1040],messageOverrides:[1040],mode:[513],offsetStyle:[513,"offset-style"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],open:[1540],overlayPositioning:[513,"overlay-positioning"],referenceDate:[1,"reference-date"],required:[516],scale:[513],status:[513],value:[1025],readOnly:[516,"read-only"],defaultMessages:[32],effectiveLocale:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],open:["openChanged"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}]);function O(){if(typeof customElements>"u")return;["calcite-input-time-zone","calcite-chip","calcite-combobox","calcite-combobox-item","calcite-combobox-item-group","calcite-icon","calcite-input-message"].forEach(e=>{switch(e){case"calcite-input-time-zone":customElements.get(e)||customElements.define(e,L);break;case"calcite-chip":customElements.get(e)||X();break;case"calcite-combobox":customElements.get(e)||Y();break;case"calcite-combobox-item":customElements.get(e)||ee();break;case"calcite-combobox-item-group":customElements.get(e)||te();break;case"calcite-icon":customElements.get(e)||oe();break;case"calcite-input-message":customElements.get(e)||se();break}})}O();const et=L,tt=O;export{et as CalciteInputTimeZone,tt as defineCustomElement};
