const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./geometryEngineBase-RmbNeFm7.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-CRSW297p.js","./Extent-B4rrMrqp.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./Point-TlcsOcXV.js","./jsonMap-DCC6W5ex.js","./writer-3zufXUNV.js","./assets-BNizZMOZ.js","./index-BVncS3aY.js","./index-CjOb8WjV.css","./Polyline-BQFeqYXi.js","./mathUtils-ClvKsMak.js"])))=>i.map(i=>d[i]);
import{_ as W}from"./index-BVncS3aY.js";import{c as rn,j as V}from"./subclass-BR3PhgZG.js";import{s as ln,D as C}from"./Accessor-D6mNnsWy.js";import{s as un}from"./reactiveUtils-BFQ0BtrB.js";import{n as F}from"./mathUtils-ClvKsMak.js";import{G as j,ai as w,L as b,z as an,aj as cn,a9 as D,f as Z,N as g,_ as fn,B as pn,a3 as K,x as B,k as q}from"./Point-TlcsOcXV.js";import{w as hn}from"./Extent-B4rrMrqp.js";import{j as mn,m as dn,u as gn}from"./Polyline-BQFeqYXi.js";import{n as M,G as wn,E as _n}from"./projectBuffer-iyGwL2dv.js";function yn(e,t,n){if(t==null||n==null||n.vcsWkid||j(t,n)||w(t)||w(n))return null;const i=b(t)/b(n);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>kn(s,i);case"polyline":case"esriGeometryPolyline":return s=>Rn(s,i);case"polygon":case"esriGeometryPolygon":return s=>vn(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>jn(s,i);case"extent":case"esriGeometryEnvelope":return s=>xn(s,i);default:return null}}function kn(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function vn(e,t){if(e)for(const n of e.rings)for(const i of n)i.length>2&&(i[2]*=t)}function Rn(e,t){if(e)for(const n of e.paths)for(const i of n)i.length>2&&(i[2]*=t)}function jn(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}function xn(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function N(e,t,n,i,s,o){return E[0]=e,E[1]=t,E[2]=n,M(E,i,0,s,o,0,1)}const E=F();let $=0;class v{static fromGE(t){const n=new v;return n._wkt=t.wkt,n._wkid=t.wkid,n._isInverse=t.isInverse,n}constructor(t){this.uid=$++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=$++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=$++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=$++}getInverse(){const t=new v;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class d{static cacheKey(t,n){var i,s,o,r,l,u;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((o=t.wkt2)==null?void 0:o.toString())??"",((r=n.wkid)==null?void 0:r.toString())??"-1",((l=n.wkt)==null?void 0:l.toString())??"",((u=n.wkt2)==null?void 0:u.toString())??""].join()}static fromGE(t){const n=new d;let i="";for(const s of t.steps){const o=v.fromGE(s);n.steps.push(o),i+=o.uid.toString()+","}return n._cachedProjection={},n._gtlistentry=null,n._chain=i,n}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const n of t.steps)n instanceof v?this.steps.push(n):this.steps.push(new v({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}getInverse(){const t=new d;t.steps=[];for(let n=this.steps.length-1;n>=0;n--){const i=this.steps[n];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const n of this.steps)t+=n.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,n,i){this._cachedProjection[d.cacheKey(t,n)]=i}getCachedGeTransformation(t,n){let i="";for(const o of this.steps)i+=o.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[d.cacheKey(t,n)];return s===void 0?null:s}}let m=null,_=null,R=null,S={};const O=new un;function G(){return!!m&&pn()}function J(){return!!G()||(V(O),x(),!1)}function Pn(e,t){return!e||!t||y(e,t)||J()}function Gn(e,t){return!y(e,t)&&!G()}function x(e){return R==null&&(R=Promise.all([an(),W(()=>import("./geometryEngineBase-RmbNeFm7.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.g),W(()=>import("./hydrated-CRSW297p.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)])),R.then(([,t,{hydratedAdapter:n}])=>{ln(e),_=n,m=t.default,m._enableProjection(cn),O.notify()})}function H(e,t,n=null,i=null){return Array.isArray(e)?e.length===0?[]:A(_,e,e[0].spatialReference,t,n,i):A(_,[e],e.spatialReference,t,n,i)[0]}function A(e,t,n,i,s=null,o=null){if(n==null||i==null)return t;if(y(n,i,s))return t.map(r=>L(r,n,i));if(s==null&&D(n))return t.map(r=>L(r,n,Z.WGS84)).map(r=>P(r,i));if(s==null&&D(i))return t.map(r=>P(r,Z.WGS84)).map(r=>L(r,Z.WGS84,i));if(s==null){const r=d.cacheKey(n,i);S[r]!==void 0?s=S[r]:((s=U(n,i,void 0))==null&&(s=new d),S[r]=s)}if(m==null||e==null)throw new T;return o!=null?m._project(e,t,n,i,s,o):m._project(e,t,n,i,s)}function zn(e,t){const n=Q([e],t);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function Q(e,t){if(!G()){for(const n of e)if(n!=null&&!j(n.spatialReference,t)&&g(n.spatialReference)&&g(t)&&!y(n.spatialReference,t))return V(O),{pending:x(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:j(n.spatialReference,t)?n:g(n.spatialReference)&&g(t)?P(n,t):null)}}function U(e,t,n=null){if(e==null||t==null)return null;if(m==null||_==null)throw new T;const i=m._getTransformation(_,e,t,n,n==null?void 0:n.spatialReference);return i!==null?d.fromGE(i):null}function In(e,t,n=null){if(m==null||_==null)throw new T;const i=m._getTransformationBySuitability(_,e,t,n,n==null?void 0:n.spatialReference);if(i!==null){const s=[];for(const o of i)s.push(d.fromGE(o));return s}return[]}class T extends rn{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function En(){m=null,_=null,R=null,S={}}const $n={get loadPromise(){return R}};function P(e,t){try{const n=H(e,t);if(n==null)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const i=yn(n.type,e.spatialReference,t);return i!=null&&i(n),n}catch(n){if(!(n instanceof T))throw n;return null}}async function Sn(e,t,n){const i=e.spatialReference;return i!=null&&t!=null&&await X(i,t,null,n),P(e,t)}function y(e,t,n){return!n&&(!!j(e,t)||g(e)&&g(t)&&!!wn(e,t,_n))}function Ln(e,t){if(j(e,t))return!0;if(!g(e)||!g(t))return!1;const n=K(e)||B(e)||q(e),i=K(t)||B(t)||q(t);return n&&i}async function X(e,t,n,i){if(G())return C(i);if(Array.isArray(e)){for(const{source:s,dest:o,geographicTransformation:r}of e)if(s&&o&&!y(s,o,r))return x(i)}else if(e&&t&&!y(e,t,n))return x(i);return C(i)}function L(e,t,n){return e?"x"in e?Y(e,t,new fn,n,0):"xmin"in e?sn(e,t,new hn,n,0):"rings"in e?en(e,t,new mn,n,0):"paths"in e?tn(e,t,new dn,n,0):"points"in e?nn(e,t,new gn,n,0):null:null}function Mn(e,t,n=t.spatialReference,i=0){return n!=null&&e.spatialReference!=null&&Y(e,e.spatialReference,t,n,i)!=null}function Y(e,t,n,i,s){a[0]=e.x,a[1]=e.y;const o=e.z;return a[2]=o!==void 0?o:s,M(a,t,0,a,i,0,1)?(n.x=a[0],n.y=a[1],n.spatialReference=i,o!==void 0||w(i)?(n.z=a[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function Tn(e,t,n=t.spatialReference,i=0){return e.spatialReference!=null&&n!=null&&nn(e,e.spatialReference,t,n,i)!=null}function nn(e,t,n,i,s){const{points:o,hasZ:r,hasM:l}=e,u=[],p=o.length,h=[];for(const c of o)h.push(c[0],c[1],r?c[2]:s);if(!M(h,t,0,h,i,0,p))return null;const f=r||w(i);for(let c=0;c<p;++c){const k=3*c,z=h[k],I=h[k+1];f&&l?u.push([z,I,h[k+2],o[c][3]]):f?u.push([z,I,h[k+2]]):l?u.push([z,I,o[c][2]]):u.push([z,I])}return n.points=u,n.spatialReference=i,n.hasZ=r,n.hasM=l,n}function Zn(e,t,n=t.spatialReference,i=0){return e.spatialReference!=null&&n!=null&&tn(e,e.spatialReference,t,n,i)!=null}function tn(e,t,n,i,s){const{paths:o,hasZ:r,hasM:l}=e,u=[];if(!on(o,r??!1,l??!1,t,u,i,s))return null;const p=r||w(i);return n.paths=u,n.spatialReference=i,n.hasZ=p,n.hasM=l,n}function An(e,t,n=t.spatialReference,i=0){return e.spatialReference!=null&&n!=null&&en(e,e.spatialReference,t,n,i)!=null}function en(e,t,n,i,s){const{rings:o,hasZ:r,hasM:l}=e,u=[];if(!on(o,r??!1,l??!1,t,u,i,s))return null;const p=r||w(i);return n.rings=u,n.spatialReference=i,n.hasZ=p,n.hasM=l,n}function On(e,t,n=t.spatialReference,i=0){return e.spatialReference!=null&&n!=null&&sn(e,e.spatialReference,t,n,i)!=null}function sn(e,t,n,i,s){const{xmin:o,ymin:r,xmax:l,ymax:u,hasZ:p,hasM:h}=e,f=p?e.zmin:s;if(!N(o,r,f,t,a,i))return null;const c=p||w(i);n.xmin=a[0],n.ymin=a[1],c&&(n.zmin=a[2]);const k=p?e.zmax:s;return N(l,u,k,t,a,i)?(n.xmax=a[0],n.ymax=a[1],c&&(n.zmax=a[2]),h&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=i,n):null}function on(e,t,n,i,s,o,r=0){const l=new Array;for(const h of e)for(const f of h)l.push(f[0],f[1],t?f[2]:r);if(!M(l,i,0,l,o,0,l.length/3))return!1;let u=0;s.length=0;const p=t||w(o);for(const h of e){const f=new Array;for(const c of h)p&&n?f.push([l[u++],l[u++],l[u++],c[3]]):p?f.push([l[u++],l[u++],l[u++]]):n?(f.push([l[u++],l[u++],c[2]]),u++):(f.push([l[u++],l[u++]]),u++);s.push(f)}return!0}const a=F(),Fn=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:y,getTransformation:U,getTransformations:In,initializeProjection:X,isEqualBaseGCS:Ln,isLoaded:G,isLoadedOrLoad:J,isLoadedOrLoadFor:Pn,load:x,project:H,projectExtent:On,projectMany:A,projectMultipoint:Tn,projectOrLoad:zn,projectOrLoadMany:Q,projectPoint:Mn,projectPolygon:An,projectPolyline:Zn,projectWithZConversion:Sn,projectWithoutEngine:L,requiresLoad:Gn,test:$n,tryProjectWithZConversion:P,unload:En},Symbol.toStringTag,{value:"Module"}));export{Mn as $,Pn as B,P as H,Sn as I,y as J,H as K,Ln as L,X as N,A as O,L as Q,Gn as U,zn as V,x as W,Q as X,U as Y,G as _,An as a,yn as o,Fn as p,d as s,N as t};
