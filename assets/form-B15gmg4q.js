import{x as L}from"./index-tefRSezt.js";import{Q as M,m as p}from"./dom--xxYYVQF.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const A=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function $(t){return`${t.split("-").map((e,i)=>i===0?e:`${e[0].toUpperCase()}${e.slice(1)}`).join("")}${A.includes(t)?"Input":"Change"}`}const f="hidden-form-input";function h(t){return"checked"in t}const m=new WeakMap,E=new WeakSet;function w(t,e){if(p(e.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(i,a=>{n=a.composedPath().some(l=>E.has(l)),a.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),n}function q(t,{status:e,message:i,icon:n}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=n),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function y(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?p(t,"calcite-radio-button-group"):t}const x=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function g(t){var c;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,n=y(e==null?void 0:e.parentElement);if(!n)return;const a=(c=n==null?void 0:n.nodeName)==null?void 0:c.toLowerCase(),l=a==null?void 0:a.split("-");if(l.length<2||l[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in n&&(n.validity=e==null?void 0:e.validity),n.dispatchEvent(x),q(n,{message:i,icon:!0,status:"invalid"});const u=$(a);n.addEventListener(u,()=>{"status"in n&&(n.status="idle"),"validationIcon"in n&&(n.validationIcon===""||n.validationIcon===!0)&&(n.validationIcon=!1),"validationMessage"in n&&n.validationMessage===i&&(n.validationMessage=""),"validity"in n&&(n.validity=e==null?void 0:e.validity)},{once:!0})}function B(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",g,!0),e.requestSubmit(),e.removeEventListener("invalid",g,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const n of i)if(n!=null&&n.validationMessage){n==null||n.setFocus();break}}),!0):!1}function N(t){var e;(e=t.formEl)==null||e.reset()}function O(t){const{el:e,value:i}=t,n=F(t);if(!n||w(n,e))return;t.formEl=n,t.defaultValue=i,h(t)&&(t.defaultChecked=t.checked);const a=S.bind(t);n.addEventListener("reset",a),m.set(t.el,a),E.add(e)}function F(t){const{el:e,form:i}=t;return i?M(e,{id:i}):p(e,"form")}function S(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),h(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function P(t){const{el:e,formEl:i}=t;if(!i)return;const n=m.get(e);i.removeEventListener("reset",n),m.delete(e),t.formEl=null,E.delete(e)}function T(t,e){t.defaultValue=e}const V="calciteInternalHiddenInputInput",C=t=>{t.target.dispatchEvent(new CustomEvent(V,{bubbles:!0}))},b=t=>t.removeEventListener("input",C);function D(t){const{el:e,formEl:i,name:n,value:a}=t,{ownerDocument:l}=e,u=e.querySelectorAll(`input[slot="${f}"]`);if(!i||!n){u.forEach(o=>{b(o),o.remove()});return}const c=Array.isArray(a)?a:[a],d=[],v=new Set;u.forEach(o=>{const s=c.find(k=>k==o.value);s!=null?(v.add(s),I(t,o,s)):d.push(o)});let r;c.forEach(o=>{if(v.has(o))return;let s=d.pop();s||(s=l.createElement("input"),s.ariaHidden="true",s.slot=f),r||(r=l.createDocumentFragment()),r.append(s),s.addEventListener("input",C),I(t,s,o)}),r&&e.append(r),d.forEach(o=>{b(o),o.remove()})}function I(t,e,i){var v;const{defaultValue:n,disabled:a,form:l,name:u,required:c}=t;e.defaultValue=n,e.disabled=a,e.name=u,e.required=c,e.tabIndex=-1,l?e.setAttribute("form",l):e.removeAttribute("form"),h(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(v=t.syncHiddenFormInput)==null||v.call(t,e);const d=y(t.el);if(d&&"validity"in d)for(const r in{...e==null?void 0:e.validity})d.validity[r]=e.validity[r]}const W=({component:t})=>(D(t),L`<slot name=${f}></slot>`);export{B as $,F as A,W as B,O as D,T as O,P as W,V as q,N as x};
