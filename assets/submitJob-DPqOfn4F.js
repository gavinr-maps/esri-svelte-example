const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FeatureLayer-U46cmps3.js","./index-4eY77cms.js","./index-Cx51aysm.css","./Accessor-BmwT4B0c.js","./Graphic-Dt0LgVGU.js","./Clonable-Z-AWS-16.js","./reactiveUtils-XM7cS2OP.js","./Evented-Dw4_VOGn.js","./SimpleObservable-CvOkykwM.js","./JSONSupport-DcrLLGjL.js","./cast-CsZslgGN.js","./writer-DKgfqj4X.js","./opacityUtils-Dim20wpZ.js","./Promise-DfET-uns.js","./Point-Cz2JYYmX.js","./enumeration-DpvDkLNI.js","./Color-VJEMvW-n.js","./colorUtils-Rxh2V3ai.js","./mathUtils-Cfq9PL9W.js","./ActionToggle-D7439N1A.js","./Identifiable-BHVfzH03.js","./jsonUtils-CwFG8yN4.js","./Extent-g5W9hy0j.js","./Polyline-s-JzsQqo.js","./typeUtils-B6WBEKDM.js","./TextSymbol-BLIQ6RKX.js","./screenUtils-_ZIvrt5o.js","./collectionUtils-CTT-51g7.js","./Portal-CmmHxpLg.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-Dw3yBk2f.js","./MultiOriginJSONSupport-DbmrbwMa.js","./layerContainerType-C5CzMsLd.js","./FeatureLayerBase-C4QQJYE9.js","./formUtils-l8pvwous.js","./Field-BDG0QV_T.js","./fieldType-CBeoJWlv.js","./HeightModelInfo-C05IFsWs.js","./commonProperties-B0GHoNP5.js","./ElevationInfo-BPOqhCue.js","./unitConversionUtils-rg07EgOm.js","./lengthUtils-_77UiyVF.js","./AttributeTableTemplate-cR37sM72.js","./timeZoneUtils-DxzjpEBb.js","./featureLayerUtils-Btb8HY8h.js","./uuid-Cl5lrJ4c.js","./featureQueryAll-JpNZKIBO.js","./Query-B_2mhyL4.js","./FullTextSearch-CBnxSwz4.js","./TimeExtent-BO6BsF_x.js","./timeUtils-C1c_L2Fd.js","./layerUtils-B__v9OBu.js","./SimpleRenderer-CEw_geZx.js","./commonProperties-ZfGquLPI.js","./colorRamps-CRjjPL3r.js","./SizeVariable-B-ghFm6e.js","./visualVariableUtils-Xcorldoo.js","./ColorStop-BYiAUa8d.js","./jsonUtils-B-voMz-i.js","./defaults-FkBa0ybj.js","./defaultsJSON-GKolV7NZ.js","./UniqueValueRenderer-yoWHKJ_P.js","./diffUtils-BanfihCO.js","./RendererLegendOptions-CYAPr8D6.js","./styleUtils-ColFrJ-Z.js","./AttachmentQuery-CpEmJqq-.js","./NormalizationBinParametersMixin-CZD0XfhN.js","./RelationshipQuery-B5a-mYy7.js","./LayerFloorInfo-iCgtHY6f.js","./Relationship-CTbzI1Kb.js","./serviceCapabilitiesUtils-B2yGaMdk.js","./infoFor3D-C7tb3HsI.js","./Layer-DH4_Pn8a.js","./workers-Cds_sd9m.js","./Queue-BQesTh_6.js","./intl-Duiy0OzY.js","./editsZScale-LI19I1vI.js","./queryZScale-BdW_vUm_.js","./projection-CyCZAIaD.js","./projectBuffer-CQnuEMuP.js","./geodesicConstants-RQL9oKdk.js","./FeatureSet-B5-Veyin.js","./APIKeyMixin-3z69J1h4.js","./ArcGISService-CDyDWGI0.js","./ScaleRangeLayer-Cnzwr9PT.js","./jsonUtils-DZz5FrgB.js","./utils-DYurMneM.js","./mat4f32-DcsiF_Rp.js","./mat4-Fi6iAz29.js","./common-DQOJ18NT.js","./CustomParametersMixin-Be7WOSEG.js","./DisplayFilteredLayer-CzliK74b.js","./scaleUtils-DPfHG2g0.js","./displayFilterUtils-uKPOP7_-.js","./EditBusLayer-KXo-LY9o.js","./FeatureEffectLayer-BZmannck.js","./FeatureEffect-DZgZP6Sj.js","./FeatureFilter-Ca1n-g_b.js","./FeatureReductionLayer-B6VhUfZv.js","./FeatureReductionSelection-BJWsAyix.js","./labelingInfo-BgG6IH9B.js","./labelUtils-DCpQ7n-8.js","./jsonUtils-BZp85R7u.js","./typeUtils-B3iPBwJ2.js","./ClassBreaksRenderer-C7fhua2J.js","./LRUCache-CXiGQWMN.js","./MemCache-CmojB_Z1.js","./Version-Cd3TlGH0.js","./FieldsIndex-FW1AMU67.js","./utils-UPZJIDfz.js","./defaultCIMValues-Bb-CUowV.js","./enums-BTM-fOHQ.js","./HeatmapColorStop-CHbSyb1s.js","./heatmapUtils-Cyq-bAyG.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./MD5-C9MwAd2G.js","./OperationalLayer-B__lrMRq.js","./OrderedLayer-ucEg87Tu.js","./OrderByInfo-KsusEmpW.js","./PortalLayer-Cqwv_mmr.js","./PortalItem-CTx1kJsR.js","./portalItemUtils-ByOtbGao.js","./RefreshableLayer-C90FXoHt.js","./TemporalLayer-CMqBosxi.js","./TimeInfo-CctegBed.js","./TimeInterval-B7L-CEq7.js","./TrackableLayer-DaYHUnrc.js","./FeatureTemplate-Dh5_oWTV.js","./FeatureType-DhERcdEP.js","./fieldProperties-DDN0PSrH.js","./TitleCreator-DIyQ9Yy3.js","./versionUtils-BfhafDf-.js","./styleUtils-Bye9ft1s.js","./popupUtils-CmsUVJA0.js","./interfaces-CL2NbQte.js","./MapImageLayer-Fo-PQgpk.js","./loadAll-D1eTJ7uv.js","./SublayersOwner-BZG8n34G.js","./CollectionFlattener-U8hHQmGf.js","./QueryTask-DhCC-aVs.js","./utils-YowqfOgk.js","./executeForIds-BgTHdLi8.js","./query-Bjn_Ozo1.js","./normalizeUtils-BTGdXlpz.js","./normalizeUtilsCommon-lGDszWRI.js","./utils-B-dlKIhi.js","./pbfQueryUtils-mqiWagfZ.js","./pbf-BsmI3A9L.js","./memoryEstimations-Bcyf-mHz.js","./OptimizedGeometry-BJqUA4Pi.js","./OptimizedFeature-P2towpqD.js","./OptimizedFeatureSet-Blu9Ckm7.js","./executeQueryJSON-BvVQs3iA.js","./featureConversionUtils-CvnFcmH_.js","./sublayerUtils-Cj6GQMKz.js","./ExportImageParameters-AbYMPLed.js","./floorFilterUtils-DZ5C6FQv.js","./imageBitmapUtils-DPq40V9d.js"])))=>i.map(i=>d[i]);
import{g as re,h as oe,r,m as i,a as f,a4 as E,a6 as _}from"./Accessor-BmwT4B0c.js";import{w as Z}from"./Extent-g5W9hy0j.js";import{g as x}from"./Point-Cz2JYYmX.js";import{_ as B}from"./index-4eY77cms.js";import{o as ae,P,i as se}from"./cast-CsZslgGN.js";import{R as ie}from"./normalizeUtils-BTGdXlpz.js";import{y as ne}from"./Field-BDG0QV_T.js";import{S as j}from"./JSONSupport-DcrLLGjL.js";import{f as $,s as le}from"./utils-YowqfOgk.js";import{r as C}from"./enumeration-DpvDkLNI.js";import{s as ue,t as ce}from"./networkEnums-BgkT2jou.js";import{d as M}from"./FeatureSet-B5-Veyin.js";import{a as pe}from"./GPMessage-Ba6qfxW_.js";var V;let m=V=class extends re{constructor(t){super(t),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnColumnName=!1,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}static from(t){return oe(V,t)}};r([i({type:x})],m.prototype,"outSpatialReference",void 0),r([i({type:Z})],m.prototype,"processExtent",void 0),r([i({type:x})],m.prototype,"processSpatialReference",void 0),r([i({nonNullable:!0})],m.prototype,"returnColumnName",void 0),r([i({nonNullable:!0})],m.prototype,"returnFeatureCollection",void 0),r([i({nonNullable:!0})],m.prototype,"returnM",void 0),r([i({nonNullable:!0})],m.prototype,"returnZ",void 0),m=V=r([f("esri.rest.geoprocessor.GPOptions")],m);const W=m;let p=class extends j{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};r([i({type:Z})],p.prototype,"extent",void 0),r([i()],p.prototype,"height",void 0),r([i()],p.prototype,"href",void 0),r([i()],p.prototype,"opacity",void 0),r([i()],p.prototype,"rotation",void 0),r([i()],p.prototype,"scale",void 0),r([i()],p.prototype,"visible",void 0),r([i()],p.prototype,"width",void 0),p=r([f("esri.layers.support.MapImage")],p);const me=p;let w=class extends j{constructor(e){super(e),this.area=0,this.units=null}};r([i({json:{write:!0}})],w.prototype,"area",void 0),r([C(ue)],w.prototype,"units",void 0),w=r([f("esri.rest.support.ArealUnit")],w);const de=w;let G=class extends j{constructor(e){super(e),this.itemId=null,this.url=null}};r([i({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],G.prototype,"itemId",void 0),r([i({type:String,json:{write:!0}})],G.prototype,"url",void 0),G=r([f("esri.rest.support.DataFile")],G);const D=G;let T=class extends j{constructor(t){super(t),this.distance=0,this.units=null}};r([i({json:{write:!0}})],T.prototype,"distance",void 0),r([C(ce)],T.prototype,"units",void 0),T=r([f("esri.rest.support.LinearUnit")],T);const be=T,u="multi-value-",F=new ae({GPArealUnit:"areal-unit",GPBoolean:"boolean",GPComposite:"composite",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",Field:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string",GPValueTable:"value-table","GPMultiValue:GPArealUnit":`${u}areal-unit`,"GPMultiValue:GPBoolean":`${u}boolean`,"GPMultiValue:GPComposite":`${u}composite`,"GPMultiValue:GPDataFile":`${u}data-file`,"GPMultiValue:GPDate":`${u}date`,"GPMultiValue:GPDouble":`${u}double`,"GPMultiValue:GPFeatureRecordSetLayer":`${u}feature-record-set-layer`,"GPMultiValue:Field":`${u}field`,"GPMultiValue:GPLinearUnit":`${u}linear-unit`,"GPMultiValue:GPLong":`${u}long`,"GPMultiValue:GPRasterData":`${u}raster-data`,"GPMultiValue:GPRasterDataLayer":`${u}raster-data-layer`,"GPMultiValue:GPRecordSet":`${u}record-set`,"GPMultiValue:GPString":`${u}string`});let S=class extends j{constructor(t){super(t),this.dataType=null,this.paramName=null,this.value=null}};r([C(F,{ignoreUnknown:!1})],S.prototype,"dataType",void 0),r([i()],S.prototype,"paramName",void 0),r([i()],S.prototype,"value",void 0),S=r([f("esri.rest.support.ParameterValue")],S);const he=S;let J=class extends j{constructor(t){super(t),this.format=null,this.itemId=null,this.url=null}};r([i()],J.prototype,"format",void 0),r([i({json:{read:{source:"itemID"},write:{target:"itemID"}}})],J.prototype,"itemId",void 0),r([i()],J.prototype,"url",void 0),J=r([f("esri.rest.support.RasterData")],J);const fe=J;async function ye(t,e,s,o,a){const n={},l={},c=[];return je(o,c,n),ie(c).then(h=>{const{outSpatialReference:y,processExtent:g,processSpatialReference:d,returnColumnName:v,returnFeatureCollection:O,returnM:z,returnZ:H}=s,{path:K}=$(t);for(const q in n){const[ee,te]=n[q];l[q]=h.slice(ee,te)}const k=y?y.wkid||y:null,L=d?d.wkid||d:null,Q=e==="execute"?{returnColumnName:v||void 0,returnFeatureCollection:O||void 0,returnM:z||void 0,returnZ:H||void 0}:null,X=R({...g?{context:{extent:g,outSR:k,processSR:L}}:{"env:outSR":k,"env:processSR":L},...o,...Q,f:"json"},null,l),Y={...a,query:X};return P(`${K}/${e}`,Y)})}function je(t,e,s){for(const o in t){const a=t[o];if(a&&typeof a=="object"&&a instanceof M){const{features:n}=a;s[o]=[e.length,e.length+n.length],n.forEach(l=>{e.push(l.geometry)})}}}async function U(t,e){switch(t){case"areal-unit":return de.fromJSON(e);case"boolean":case"double":case"long":case"string":case"value-table":return e;case"date":return new Date(e);case"data-file":return D.fromJSON(e);case"linear-unit":return be.fromJSON(e);case"feature-record-set-layer":if("url"in e)return D.fromJSON(e);if("layerDefinition"in e){const s=new(await B(async()=>{const{default:n}=await import("./FeatureLayer-U46cmps3.js");return{default:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135]),import.meta.url)).default,{layerDefinition:o,featureSet:a}=e;return s.read({layerDefinition:o,featureSet:a},{origin:"portal-item"}),s.spatialReference=x.fromJSON(a.spatialReference??o.spatialReference??o.extent.spatialReference),s}return M.fromJSON(e);case"record-set":return"url"in e?D.fromJSON(e):M.fromJSON(e);case"raster-data":case"raster-data-layer":return"mapImage"in e?me.fromJSON(e.mapImage):fe.fromJSON(e);case"field":return ne.fromJSON(e)}}function ge(t){return t.startsWith(u)}function ve(t){return t.replace(u,"")}async function $e(t,e){const s=ve(t),o=s==="composite"?e.map(a=>U(F.fromJSON(a.dataType),a.value)):e.map(a=>U(s,a));return Promise.all(o)}async function A(t){const e=F.fromJSON(t.dataType),{paramName:s}=t,o=ge(e)?await $e(e,t.value):await U(e,t.value);return new he({dataType:e,paramName:s,value:o})}function R(t,e,s){for(const o in t){const a=t[o];Array.isArray(a)?t[o]=JSON.stringify(a.map(n=>R({item:n},!0).item)):a instanceof Date&&(t[o]=a.getTime())}return le(t,e,s)}var N;const Se=se()({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"},{ignoreUnknown:!1}),I=1e3;let b=N=class extends j{constructor(t){super(t),this.jobId=null,this.jobStatus=null,this.messages=null,this.progress=null,this.requestOptions=null,this.sourceUrl=null,this._cancelJobTimer=void 0,this._jobCompletionTimer=void 0}async cancelJob(t){const{jobId:e,sourceUrl:s}=this,{path:o}=$(s),a={...this.requestOptions,...t,query:{f:"json"}},n=`${o}/jobs/${e}/cancel`,{data:l}=await P(n,a),{messages:c,jobStatus:h,progress:y}=N.fromJSON(l);return this.set({messages:c,jobStatus:h,progress:y}),h==="job-cancelled"?this:new Promise((g,d)=>{E(a.signal,()=>{this.clearCancelJobTimer(),d(_())}),this.clearCancelJobTimer();const v=()=>{this._cancelJobTimer||d(_()),this.checkJobStatus(t).then(({jobStatus:O})=>{switch(O){case"job-cancelling":default:this._cancelJobTimer=setTimeout(v,I);break;case"job-deleted":case"job-deleting":case"job-executing":case"job-failed":case"job-new":case"job-submitted":case"job-succeeded":case"job-timed-out":case"job-waiting":d(this);break;case"job-cancelled":g(this)}})};this._cancelJobTimer=setTimeout(v,I)})}destroy(){clearInterval(this._cancelJobTimer),clearInterval(this._jobCompletionTimer)}async checkJobStatus(t){const{path:e}=$(this.sourceUrl),s={...this.requestOptions,...t,query:{f:"json"}},o=`${e}/jobs/${this.jobId}`,{data:a}=await P(o,s),{messages:n,jobStatus:l,progress:c}=N.fromJSON(a);return this.set({messages:n,jobStatus:l,progress:c}),this}async fetchResultData(t,e,s){e=W.from(e||{});const{returnColumnName:o,returnFeatureCollection:a,returnM:n,returnZ:l,outSpatialReference:c}=e,{path:h}=$(this.sourceUrl),y=R({returnColumnName:o||null,returnFeatureCollection:a||null,returnM:n||null,returnZ:l||null,outSR:c,returnType:"data",f:"json"},null),g={...this.requestOptions,...s,query:y},d=`${h}/jobs/${this.jobId}/results/${t}`,{data:v}=await P(d,g);return A(v)}async fetchResultImage(t,e,s){const{path:o}=$(this.sourceUrl),a={...e.toJSON(),f:"json"},n=R(a),l={...this.requestOptions,...s,query:n},c=`${o}/jobs/${this.jobId}/results/${t}`,{data:h}=await P(c,l);return A(h)}async fetchResultMapImageLayer(){const{path:t}=$(this.sourceUrl),e=t.indexOf("/GPServer/"),s=`${t.slice(0,Math.max(0,e))}/MapServer/jobs/${this.jobId}`;return new(await B(async()=>{const{default:o}=await import("./MapImageLayer-Fo-PQgpk.js");return{default:o}},__vite__mapDeps([136,3,10,1,2,9,137,6,7,8,28,13,11,22,14,31,92,18,72,20,49,50,82,138,107,38,32,39,12,40,41,42,122,78,29,23,79,80,139,4,5,15,16,17,19,21,24,25,26,27,30,140,71,47,35,36,48,141,142,143,144,145,146,147,148,149,150,151,152,77,153,81,154,118,119,44,45,46,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,129,128,108,43,100,101,68,69,70,103,104,105,106,109,110,111,112,113,114,89,115,134,155,83,84,85,86,87,88,90,117,120,121,123,124,125,126,156,157,158,132]),import.meta.url)).default({url:s})}async waitForJobCompletion(t={}){const{interval:e=I,signal:s,statusCallback:o}=t;return new Promise((a,n)=>{E(s,()=>{this.clearJobCompletionTimer(),n(_())}),this.clearJobCompletionTimer();const l=()=>{this._jobCompletionTimer||n(_()),this.checkJobStatus().then(({jobStatus:c})=>{switch(c){case"job-succeeded":a(this);break;case"job-executing":case"job-new":case"job-submitted":case"job-waiting":o&&o(this),this._jobCompletionTimer=setTimeout(l,e);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-failed":case"job-timed-out":n(this);break;default:this._jobCompletionTimer=setTimeout(l,e)}}).catch(c=>{n(c)})};this._jobCompletionTimer=setTimeout(l,e)})}clearCancelJobTimer(){clearTimeout(this._cancelJobTimer),this._cancelJobTimer=void 0}clearJobCompletionTimer(){clearTimeout(this._jobCompletionTimer),this._jobCompletionTimer=void 0}};r([i()],b.prototype,"jobId",void 0),r([C(Se,{ignoreUnknown:!1})],b.prototype,"jobStatus",void 0),r([i({type:[pe]})],b.prototype,"messages",void 0),r([i()],b.prototype,"progress",void 0),r([i()],b.prototype,"requestOptions",void 0),r([i({json:{write:!0}})],b.prototype,"sourceUrl",void 0),b=N=r([f("esri.rest.support.JobInfo")],b);const Je=b;async function ke(t,e,s,o){return s=W.from(s||{}),ye(t,"submitJob",s,e??{},o).then(({data:a})=>{const n=Je.fromJSON(a);return n.sourceUrl=t,n})}export{A as O,ye as S,W as l,ke as s};
