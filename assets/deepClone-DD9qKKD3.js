import{S as An,O as kn}from"./Accessor-BmwT4B0c.js";import{a3 as Dn}from"./cast-CsZslgGN.js";import{Q as p,n as g,i as y,Y as z,R as N,z as F,V as On,M as wn,ac as Fn}from"./opacityUtils-Dim20wpZ.js";import{a as x,r as A}from"./executionError-DNkSe-Q-.js";import{t as _}from"./ImmutableArray-BPVd6ESQ.js";import{j as O,b as k,g as Mn}from"./Point-Cz2JYYmX.js";import{y as Jn,P as cn}from"./shared-2m9g3-y2.js";import{p as Rn,l as In}from"./number-QOqKffTG.js";import{r as vn,i as Pn}from"./TimeOnly-CveCl9ie.js";import{w as U}from"./Extent-g5W9hy0j.js";import{j as K,P as B,u as Q,g as jn}from"./Polyline-s-JzsQqo.js";import{f as Yn}from"./jsonUtils-CwFG8yN4.js";import{r as pn,D as mn}from"./Promise-DfET-uns.js";let W=class{};class M{constructor(){}}function hn(n,r,e){if(n instanceof M&&!(n instanceof $)){const a=new $;return a.fn=n,a.parameterEvaluator=e,a.context=r,a}return n}class Rr extends M{constructor(r){super(),this.fn=r}createFunction(r){return(...e)=>this.fn(r,{preparsed:!0,arguments:e})}call(r,e){return this.fn(r,e)}marshalledCall(r,e,a,t){return t(r,e,(s,l,u)=>{u=u.map(c=>c instanceof M&&!(c instanceof $)?hn(c,r,t):c);const m=this.call(a,{args:u});return An(m)?m.then(c=>hn(c,a,t)):m})}}class $ extends M{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(r){return this.fn.createFunction(this.context)}call(r,e){return this.fn.marshalledCall(r,e,this.context,this.parameterEvaluator)}marshalledCall(r,e,a){return this.fn.marshalledCall(r,e,this.context,this.parameterEvaluator)}}let v=class gn extends _{constructor(r,e,a,t,s,l){super(r),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=e,this._hasZ=a,this._hasM=t,this._cacheId=s,this._partId=l}get(r){if(this._lazyPt[r]===void 0){const e=this._elements[r];if(e===void 0)return;const a=new O(e[0],e[1],this._spRef);this._hasZ&&(a.z=e[2]),this._hasM&&(a.m=this._hasZ?e[3]:e[2]),a.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+r.toString(),this._lazyPt[r]=a}return this._lazyPt[r]}equalityTest(r){return r===this||r!==null&&r instanceof gn&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};class X extends _{constructor(r,e,a,t,s){super(r),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=a,this._hasM=t,this._spRef=e,this._cacheId=s}get(r){if(this._lazyPath[r]===void 0){const e=this._elements[r];if(e===void 0)return;this._lazyPath[r]=new v(e,this._spRef,this._hasZ,this._hasM,this._cacheId,r)}return this._lazyPath[r]}equalityTest(r){return r===this||r!==null&&r instanceof X&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class zn{constructor(r){this.value=r}}class Ln{constructor(r){this.value=r}}const b={type:"VOID"},Gn=Symbol("BREAK"),Vn=Symbol("CONTINUE");function J(n,r,e){return r===""||r==null||r===e||r===e?n:n=n.split(r).join(e)}function P(n){return n instanceof M}function nn(n){return n instanceof W}function R(n){return!!y(n)||!!g(n)||!!f(n)||!!h(n)||!!d(n)||!!p(n)||n===null||n===b||typeof n=="number"}function qn(n,r){return n===void 0?r:n}function $n(n){return n==null?"":N(n)||T(n)?"Array":f(n)?"Date":d(n)?"Time":h(n)?"DateOnly":y(n)?"String":p(n)?"Boolean":g(n)?"Number":(n==null?void 0:n.declaredClass)==="esri.arcade.Attachment"?"Attachment":(n==null?void 0:n.declaredClass)==="esri.arcade.Portal"?"Portal":(n==null?void 0:n.declaredClass)==="esri.arcade.Dictionary"?"Dictionary":un(n)?"KnowledgeGraph":n instanceof W?"Module":j(n)?"Feature":n instanceof O?"Point":n instanceof K?"Polygon":n instanceof B?"Polyline":n instanceof Q?"Multipoint":n instanceof U?"Extent":P(n)?"Function":tn(n)?"FeatureSet":sn(n)?"FeatureSetCollection":en(n)?"Voxel":n===b?"":typeof n=="number"&&isNaN(n)?"Number":"Unrecognized Type"}function rn(n){return n instanceof k}function j(n){return(n==null?void 0:n.arcadeDeclaredClass)==="esri.arcade.Feature"}function en(n){return(n==null?void 0:n.arcadeDeclaredClass)==="esri.arcade.Voxel"}function tn(n){return(n==null?void 0:n.declaredRootClass)==="esri.arcade.featureset.support.FeatureSet"}function an(n){return(n==null?void 0:n.declaredClass)==="esri.arcade.Dictionary"}function Hn(n){return an(n)||j(n)||en(n)}function sn(n){return(n==null?void 0:n.declaredRootClass)==="esri.arcade.featureSetCollection"}function un(n){return(n==null?void 0:n.declaredClass)==="esri.rest.knowledgeGraph.KnowledgeGraph"}function T(n){return n instanceof _}function f(n){return n instanceof F}function h(n){return n instanceof Pn}function d(n){return n instanceof vn}function H(n){return n!=null&&typeof n=="object"}function En(n,r,e,a,t){if(n.length<r||n.length>e)throw new x(a,A.WrongNumberOfParameters,t)}function Un(n){return n<0?-Math.round(-n):Math.round(n)}function on(n,r){return isNaN(n)||r==null||r===""?n.toString():(r=J(r,"‰",""),r=J(r,"¤",""),In(n,{pattern:r}))}function G(n,r){return r==null||r===""?n.toISOString(!0):n.toFormat(bn(r),{locale:pn(),numberingSystem:"latn"})}function bn(n,r=!1){n=n.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const a=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const t of n.match(a)||[])switch(t){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"Z":e+="Z";break;case"ZZ":e+="ZZ";break;case"ZZZ":e+="ZZZ";break;case"ZZZZ":e+=r?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":e+=r?"[ZZZZZ]":"ZZZZZ";break;case"S":e+="'S'";break;case"SS":e+="'SS'";break;case"SSS":e+="u";break;case"A":case"a":e+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":e+=t;break;default:t.length>=2&&t.slice(0,1)==="["&&t.slice(-1)==="]"?e+=`'${t.slice(1,-1)}'`:e+=`'${t}'`}return e}function i(n,r,e){switch(e){case">":return n>r;case"<":return n<r;case">=":return n>=r;case"<=":return n<=r}return!1}function Kn(n,r,e){if(n===null){if(r===null||r===b)return i(null,null,e);if(g(r))return i(0,r,e);if(y(r)||p(r))return i(0,o(r),e);if(f(r))return i(0,r.toNumber(),e);if(d(r)||h(r))return i(n,r.toNumber(),e)}if(n===b){if(r===null||r===b)return i(null,null,e);if(g(r))return i(0,r,e);if(y(r)||p(r))return i(0,o(r),e);if(f(r))return i(0,r.toNumber(),e);if(d(r)||h(r))return i(n,r.toNumber(),e)}else if(g(n)){if(g(r))return i(n,r,e);if(p(r))return i(n,o(r),e);if(r===null||r===b)return i(n,0,e);if(y(r))return i(n,o(r),e);if(f(r)||d(r)||h(r))return i(n,r.toNumber(),e)}else if(y(n)){if(y(r))return i(C(n),C(r),e);if(f(r)||d(r)||h(r))return i(o(n),r.toNumber(),e);if(g(r))return i(o(n),r,e);if(r===null||r===b)return i(o(n),0,e);if(p(r))return i(o(n),o(r),e)}else if(f(n)){if(f(r))return n.timeZone!==r.timeZone&&(n.isUnknownTimeZone?n=F.arcadeDateAndZoneToArcadeDate(n,r.timeZone):r.isUnknownTimeZone&&(r=F.arcadeDateAndZoneToArcadeDate(r,n.timeZone))),i(n.toNumber(),r.toNumber(),e);if(r===null||r===b)return i(n.toNumber(),0,e);if(g(r))return i(n.toNumber(),r,e);if(p(r)||y(r))return i(n.toNumber(),o(r),e);if(d(r))throw new x(null,A.CannotCompareDateAndTime,null);if(h(r))return i(n.toNumber(),r.toNumber(),e)}else if(p(n)){if(p(r))return i(n,r,e);if(g(r))return i(o(n),o(r),e);if(f(r)||d(r)||h(r))return i(o(n),r.toNumber(),e);if(r===null||r===b)return i(o(n),0,e);if(y(r))return i(o(n),o(r),e)}else if(h(n)){if(f(r))return i(n.toNumber(),r.toNumber(),e);if(r===null||r===b)return i(n.toNumber(),0,e);if(g(r))return i(n.toNumber(),r,e);if(p(r)||y(r))return i(n.toNumber(),o(r),e);if(d(r))throw new x(null,A.CannotCompareDateAndTime,null);if(h(r))return i(n.toNumber(),r.toNumber(),e)}else if(d(n)){if(f(r))throw new x(null,A.CannotCompareDateAndTime,null);if(r===null||r===b)return i(n.toNumber(),0,e);if(g(r))return i(n.toNumber(),r,e);if(p(r)||y(r))return i(n.toNumber(),o(r),e);if(d(r))return i(n.toNumber(),r.toNumber(),e);if(h(r))throw new x(null,A.CannotCompareDateAndTime,null)}return!!Sn(n,r)&&(e==="<="||e===">=")}function Sn(n,r){if(n===r||n===null&&r===b||r===null&&n===b)return!0;if(f(n)&&f(r)||d(n)&&d(r)||h(n)&&h(r))return n.equals(r);if(n instanceof X||n instanceof v)return n.equalityTest(r);if(n instanceof O&&r instanceof O){const e=n.cache._arcadeCacheId,a=r.cache._arcadeCacheId;if(e!=null)return e===a}return!!(H(n)&&H(r)&&(n._arcadeCacheId===r._arcadeCacheId&&n._arcadeCacheId!==void 0&&n._arcadeCacheId!==null||n._underlyingGraphic===r._underlyingGraphic&&n._underlyingGraphic!==void 0&&n._underlyingGraphic!==null))}function Bn(n,{useNumbersForDates:r}){let e="";for(const a in n){e!==""&&(e+=",");const t=n[a];t==null?e+=JSON.stringify(a)+":null":p(t)||g(t)||y(t)?e+=JSON.stringify(a)+":"+JSON.stringify(t):rn(t)?e+=JSON.stringify(a)+":"+D(t):d(t)||h(t)?e+=`${JSON.stringify(a)}:${JSON.stringify(t.toString())}`:T(t)||Array.isArray(t)?e+=JSON.stringify(a)+":"+D(t,null,r):f(t)?e+=r?JSON.stringify(a)+":"+JSON.stringify(t.getTime()):JSON.stringify(a)+":"+t.stringify():t!==null&&typeof t=="object"&&"castToText"in t&&(e+=JSON.stringify(a)+":"+t.castToText(r))}return"{"+e+"}"}function C(n,r){if(y(n))return n;if(n===null)return"";if(g(n))return on(n,r);if(p(n))return n.toString();if(f(n))return G(n,r);if(d(n)||h(n))return n.toFormat(r);if(n instanceof k)return JSON.stringify(n.toJSON());if(N(n)){const e=[];for(let a=0;a<n.length;a++)e[a]=L(n[a]);return"["+e.join(",")+"]"}if(n instanceof _){const e=[];for(let a=0;a<n.length();a++)e[a]=L(n.get(a));return"["+e.join(",")+"]"}return n!==null&&typeof n=="object"&&"castToText"in n?n.castToText():P(n)?"object, Function":n===b?"":nn(n)?"object, Module":""}function Qn(n){const r=[];if(n instanceof _){for(let e=0;e<n.length();e++)r[e]=o(n.get(e));return r}if(!N(n))return null;for(let e=0;e<n.length;e++)r[e]=o(n[e]);return r}function D(n,r,e=!1){if(y(n))return n;if(n===null)return"";if(g(n))return on(n,r);if(p(n))return n.toString();if(f(n))return G(n,r);if(d(n)||h(n))return n.toFormat(r);if(n instanceof k)return n instanceof U?'{"xmin":'+n.xmin.toString()+',"ymin":'+n.ymin.toString()+","+(n.hasZ?'"zmin":'+n.zmin.toString()+",":"")+(n.hasM?'"mmin":'+n.mmin.toString()+",":"")+'"xmax":'+n.xmax.toString()+',"ymax":'+n.ymax.toString()+","+(n.hasZ?'"zmax":'+n.zmax.toString()+",":"")+(n.hasM?'"mmax":'+n.mmax.toString()+",":"")+'"spatialReference":'+E(n.spatialReference)+"}":E(n.toJSON(),(a,t)=>a.key===t.key?0:a.key==="spatialReference"?1:t.key==="spatialReference"||a.key<t.key?-1:a.key>t.key?1:0);if(N(n)){const a=[];for(let t=0;t<n.length;t++)a[t]=L(n[t],e);return"["+a.join(",")+"]"}if(n instanceof _){const a=[];for(let t=0;t<n.length();t++)a[t]=L(n.get(t),e);return"["+a.join(",")+"]"}return n!==null&&typeof n=="object"&&"castToText"in n?n.castToText(e):P(n)?"object, Function":n===b?"":nn(n)?"object, Module":""}function L(n,r=!1){if(n===null)return"null";if(p(n)||g(n)||y(n))return JSON.stringify(n);if(n instanceof k||n instanceof _||Array.isArray(n))return D(n,null,r);if(f(n))return JSON.stringify(r?n.getTime():G(n,""));if(d(n)||h(n))return JSON.stringify(n.toString());if(n!==null&&typeof n=="object"){if("castToText"in n)return n.castToText(r)}else if(n===b)return"null";return"null"}function o(n,r){return g(n)?n:n===null||n===""?0:f(n)||h(n)||d(n)?NaN:p(n)?n?1:0:N(n)||n===""||n===void 0?NaN:r!==void 0&&y(n)?(r=J(r,"‰",""),r=J(r,"¤",""),Rn(n,{pattern:r})):n===b?0:Number(n)}function Wn(n,r){if(f(n))return n;if(y(n)){const e=Xn(n,r);if(e)return F.dateTimeToArcadeDate(e)}return null}function Xn(n,r){const e=/ (\d\d)/,a=Fn(r);let t=mn.fromISO(n,{zone:a});return t.isValid||e.test(n)&&(n=n.replace(e,"T$1"),t=mn.fromISO(n,{zone:r}),t.isValid)?t:null}function nr(n){return p(n)?n:y(n)?(n=n.toLowerCase())==="true":!!g(n)&&n!==0&&!isNaN(n)}function rr(n,r){const e=JSON.parse(n);return e&&!e.spatialReference&&(e.spatialReference=r),Yn(e)}function er(n,r){return n==null?null:(n.spatialReference!==null&&n.spatialReference!==void 0||(n.spatialReference=r),n)}function tr(n){if(n===null)return null;if(n instanceof O)return n.x==="NaN"||n.x===null||isNaN(n.x)?null:n;if(n instanceof K){if(n.rings.length===0)return null;for(const r of n.rings)if(r.length>0)return n;return null}if(n instanceof B){if(n.paths.length===0)return null;for(const r of n.paths)if(r.length>0)return n;return null}return n instanceof Q?n.points.length===0?null:n:n instanceof U?n.xmin==="NaN"||n.xmin===null||isNaN(n.xmin)?null:n:null}function Nn(n,r){if(!n||!n.domain)return r;let e=null,a=null;if(f(r))e=r.toNumber();else if(h(r))e=r.toString();else if(d(r))e=r.toStorageString();else if(n.field.type==="string"||n.field.type==="esriFieldTypeString")e=C(r);else{if(r==null)return null;if(r==="")return r;e=o(r)}for(let t=0;t<n.domain.codedValues.length;t++){const s=n.domain.codedValues[t];s.code===e&&(a=s)}return a===null?C(r):a.name}function Zn(n,r){if(!n||!n.domain)return r;let e=null;const a=C(r);for(let t=0;t<n.domain.codedValues.length;t++){const s=n.domain.codedValues[t];s.name===a&&(e=s)}return e===null?r:e.code}function V(n,r,e=null,a=null){if(!r||!r.fields)return null;let t,s,l=null;for(let S=0;S<r.fields.length;S++){const Z=r.fields[S];Z.name.toLowerCase()===n.toString().toLowerCase()&&(l=Z)}if(l===null)throw new x(null,A.FieldNotFound,null,{key:n});let u=r.typeIdField,m="id",c=r.types;if(r.subtypeField&&(u=r.subtypeField,m="code",c=r.subtypes??[]),a===null&&e&&u)a=e.hasField(u)?e.field(u):null;else if(u&&a!==null){let S=!1;for(const Z of c||[])if(a===Z[m]){S=!0;break}if(!S){for(const Z of c||[])if(a===Z.name){a=Z[m],S=!0;break}}S||(a=null,e&&u&&(a=e.hasField(u)?e.field(u):null))}return a!=null&&c.some(S=>{var Z;return S[m]===a&&(t=(Z=S.domains)==null?void 0:Z[l.name],t&&t.type==="inherited"&&(t=dn(l.name,r),s=!0),!0)}),s||t||(t=dn(n,r)),{field:l,domain:t}}function dn(n,r){let e;return r.fields.some(a=>(a.name.toLowerCase()===n.toLowerCase()&&(e=a.domain),!!e)),e}function E(n,r){r||(r={}),typeof r=="function"&&(r={cmp:r});const e=typeof r.cycles=="boolean"&&r.cycles,a=r.cmp&&(t=r.cmp,function(l){return function(u,m){const c={key:u,value:l[u]},S={key:m,value:l[m]};return t(c,S)}});var t;const s=[];return function l(u){if(u!=null&&u.toJSON&&typeof u.toJSON=="function"&&(u=u.toJSON()),u===void 0)return;if(typeof u=="number")return isFinite(u)?""+u:"null";if(typeof u!="object")return JSON.stringify(u);let m,c;if(Array.isArray(u)){for(c="[",m=0;m<u.length;m++)m&&(c+=","),c+=l(u[m])||"null";return c+"]"}if(u===null)return"null";if(s.includes(u)){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const S=s.push(u)-1,Z=Object.keys(u).sort(a==null?void 0:a(u));for(c="",m=0;m<Z.length;m++){const ln=Z[m],fn=l(u[ln]);fn&&(c&&(c+=","),c+=JSON.stringify(ln)+":"+fn)}return s.splice(S,1),"{"+c+"}"}(n)}function ar(n){if(n===null)return null;const r=[];for(const e of n)j(e)?r.push(e.geometry()):r.push(e);return r}function w(n,r){if(!(r instanceof O))throw new x(null,A.InvalidParameter,null);n.push(r.hasZ?r.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])}function ir(n,r){if(N(n)||T(n)){let e=!1,a=!1,t=[],s=r;if(N(n)){for(const l of n)w(t,l);t.length>0&&(s=n[0].spatialReference,e=n[0].hasZ,a=n[0].hasM)}else if(n instanceof v)t=n._elements,t.length>0&&(e=n._hasZ,a=n._hasM,s=n.get(0).spatialReference);else{if(!T(n))throw new x(null,A.InvalidParameter,null);for(const l of n.toArray())w(t,l);t.length>0&&(s=n.get(0).spatialReference,e=n.get(0).hasZ===!0,a=n.get(0).hasM===!0)}return t.length===0?null:(jn(t)||(t=t.slice().reverse()),new K({rings:[t],spatialReference:s,hasZ:e,hasM:a}))}return n}function sr(n,r){if(N(n)||T(n)){let e=!1,a=!1,t=[],s=r;if(N(n)){for(const l of n)w(t,l);t.length>0&&(s=n[0].spatialReference,e=n[0].hasZ===!0,a=n[0].hasM===!0)}else if(n instanceof v)t=n._elements,t.length>0&&(e=n._hasZ,a=n._hasM,s=n.get(0).spatialReference);else if(T(n)){for(const l of n.toArray())w(t,l);t.length>0&&(s=n.get(0).spatialReference,e=n.get(0).hasZ===!0,a=n.get(0).hasM===!0)}return t.length===0?null:new B({paths:[t],spatialReference:s,hasZ:e,hasM:a})}return n}function ur(n,r){if(N(n)||T(n)){let e=!1,a=!1,t=[],s=r;if(N(n)){for(const l of n)w(t,l);t.length>0&&(s=n[0].spatialReference,e=n[0].hasZ===!0,a=n[0].hasM===!0)}else if(n instanceof v)t=n._elements,t.length>0&&(e=n._hasZ,a=n._hasM,s=n.get(0).spatialReference);else if(T(n)){for(const l of n.toArray())w(t,l);t.length>0&&(s=n.get(0).spatialReference,e=n.get(0).hasZ===!0,a=n.get(0).hasM===!0)}return t.length===0?null:new Q({points:t,spatialReference:s,hasZ:e,hasM:a})}return n}function or(n,r=!1){const e=[];if(n===null)return e;if(N(n)===!0){for(let a=0;a<n.length;a++){const t=C(n[a]);t===""&&r!==!0||e.push(t)}return e}if(n instanceof _){for(let a=0;a<n.length();a++){const t=C(n.get(a));t===""&&r!==!0||e.push(t)}return e}if(R(n)){const a=C(n);return a===""&&r!==!0||e.push(a),e}return[]}let q=0;function lr(n){return q++,q%100==0?(q=0,new Promise(r=>{setTimeout(()=>{r(n)},0)})):n}function fr(n,r,e){switch(e){case"&":return n&r;case"|":return n|r;case"^":return n^r;case"<<":return n<<r;case">>":return n>>r;case">>>":return n>>>r}}function I(n,r=null){return n==null?null:p(n)||g(n)||y(n)?n:n instanceof k?(r==null?void 0:r.keepGeometryType)===!0?n:n.toJSON():n instanceof _?n.toArray().map(e=>I(e,r)):Array.isArray(n)?n.map(e=>I(e,r)):z(n)?n:f(n)?n.toJSDate():d(n)?n.toString():h(n)?n.toJSDate():n!==null&&typeof n=="object"&&n.castAsJson!==void 0?n.castAsJson(r):null}async function cr(n,r,e,a,t){const s=await Tn(n,r,e);t[a]=s}async function Tn(n,r=null,e=null){if(n instanceof _&&(n=n.toArray()),n==null)return null;if(R(n)||n instanceof k||z(n)||f(n))return I(n,e);if(Array.isArray(n)){const a=[],t=[];for(const s of n)s===null||R(s)||s instanceof k||z(s)||f(s)?t.push(I(s,e)):(t.push(null),a.push(cr(s,r,e,t.length-1,t)));return a.length>0&&await Promise.all(a),t}return n!==null&&typeof n=="object"&&n.castAsJsonAsync!==void 0?n.castAsJsonAsync(r,e):null}function Y(n){return _n(n)?n.parent:n}function _n(n){return n&&"declaredClass"in n&&n.declaredClass==="esri.layers.support.SubtypeSublayer"}function mr(n){return n&&"declaredClass"in n&&n.declaredClass==="esri.layers.SubtypeGroupLayer"}function hr(n,r,e){const a=Y(n.fullSchema());return a===null||!a.fields?null:V(r,a,n,e)}function dr(n){const r=Y(n.fullSchema());return r===null?null:r.fields?r.subtypeField?{subtypeField:r.subtypeField,subtypes:r.subtypes?r.subtypes.map(e=>({name:e.name,code:e.code})):[]}:r.typeIdField?{subtypeField:r.typeIdField,subtypes:r.types?r.types.map(e=>({name:e.name,code:e.id})):[]}:null:null}function yr(n,r,e,a){const t=Y(n.fullSchema());if(t===null||!t.fields)return null;const s=V(r,t,n,a);if(e===void 0)try{e=n.field(r)}catch{return null}return Nn(s,e)}function pr(n,r,e,a){const t=Y(n.fullSchema());if(t===null||!t.fields)return null;if(e===void 0){try{e=n.field(r)}catch{return null}return e}return Zn(V(r,t,n,a),e)}function gr(n){return(n==null?void 0:n.timeZone)??"system"}function br(n){const r=Y(n.fullSchema());if(r===null||!r.fields)return null;const e=[];for(const a of r.fields)e.push(Jn(a));return{objectIdField:r.objectIdField,globalIdField:r.globalIdField??"",geometryType:cn[r.geometryType]===void 0?"":cn[r.geometryType],fields:e}}function Sr(n,r){const e=F.systemTimeZoneCanonicalName;return n==="system"&&(n=e),{version:Cn,engineVersion:Dn,timeZone:n,userTimeZone:e,spatialReference:r instanceof Mn?r.toJSON():r,application:kn.applicationName??"",engine:"web",locale:pn()}}const Cn="1.30",Ir=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:Ln,ReturnResult:zn,absRound:Un,arcadeVersion:Cn,autoCastArrayOfPointsToMultiPoint:ur,autoCastArrayOfPointsToPolygon:ir,autoCastArrayOfPointsToPolyline:sr,autoCastFeatureToGeometry:ar,binaryOperator:fr,breakResult:Gn,castAsJson:I,castAsJsonAsync:Tn,castRecordToText:Bn,continueResult:Vn,defaultExecutingContext:Sr,defaultTimeZone:gr,defaultUndefined:qn,equalityTest:Sn,featureDomainCodeLookup:pr,featureDomainValueLookup:yr,featureFullDomain:hr,featureSchema:br,featureSubtypes:dr,fixNullGeometry:tr,fixSpatialReference:er,formatDate:G,formatNumber:on,getDomain:V,getDomainCode:Zn,getDomainValue:Nn,getType:$n,greaterThanLessThan:Kn,isArray:N,isBoolean:p,isDate:f,isDateOnly:h,isDictionary:an,isDictionaryLike:Hn,isFeature:j,isFeatureSet:tn,isFeatureSetCollection:sn,isFunctionParameter:P,isGeometry:rn,isGraphic:wn,isImmutableArray:T,isInteger:On,isJsDate:z,isKnowledgeGraph:un,isModule:nn,isNumber:g,isObject:H,isSimpleType:R,isString:y,isSubtypeGrouplayer:mr,isSubtypeSublayer:_n,isTime:d,isVoxel:en,multiReplace:J,parseGeometryFromJson:rr,pcCheck:En,stableStringify:E,standardiseDateFormat:bn,tick:lr,toBoolean:nr,toDate:Wn,toNumber:o,toNumberArray:Qn,toString:C,toStringArray:or,toStringExplicit:D,voidOperation:b},Symbol.toStringTag,{value:"Module"}));function vr(n){xn=n}let xn;function yn(n){return n===null?null:f(n)?n.clone():R(n)?n:rn(n)?n.clone():T(n)?n.toArray().map(r=>yn(r)):N(n)?n.map(r=>yn(r)):j(n)?xn.createFromArcadeFeature(n):sn(n)||tn(n)?n:an(n)||(n==null?void 0:n.declaredClass)==="esri.arcade.Attachment"?n.deepClone():((n==null?void 0:n.declaredClass)==="esri.arcade.Portal"||un(n)||n instanceof W||P(n),n)}export{pr as $,er as A,tn as B,_n as C,Zn as D,hr as E,ar as F,P as G,j as H,Ln as I,ir as J,br as K,Vn as L,sr as M,Wn as N,V as O,J as P,sn as Q,ur as R,yn as S,I as T,rn as U,Tn as V,Hn as W,un as X,Gn as Y,nr as Z,zn as _,fr as a,R as a0,v as a1,X as a2,vr as a3,$n as a4,bn as a5,Un as a6,tr as a7,en as a8,Qn as a9,Sr as aa,Ir as ab,o as b,Kn as c,T as d,Rr as e,$ as f,d as g,h,gr as i,or as j,dr as k,yr as l,Sn as m,hn as n,En as o,Nn as p,qn as q,M as r,W as s,f as t,D as u,b as v,an as w,Bn as x,C as y,lr as z};
