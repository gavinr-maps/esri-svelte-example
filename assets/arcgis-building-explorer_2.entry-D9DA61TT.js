import{r as d,c as s,g as m,h as y}from"./index-Bh2oEzTI.js";import{n as u,a as p,b as C,i as b}from"./index-5cc0d3e9-BXwdUzLn.js";import{m as E}from"./useWidget-4dc2787d-C-ZlEsbo.js";import{u as P,l as V}from"./index-ee4c09de-CPW6V7nq.js";import{u as v,r,g as a,a as c,m as l}from"./index-69f02a9e-wRYZXCy2.js";import{p as o,a as w,b as g,i as _,c as D}from"./component-utils-42b12dba-BfugynV_.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.2
 */const L="",M=L,x=E(u),S=class{constructor(t){d(this,t),this.arcgisReady=s(this,"arcgisReady",7),this.arcgisPropertyChange=s(this,"arcgisPropertyChange",7),this.manager=v(this),this.widget=x(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=P()("level","phase","state"),this.autoDestroyDisabled=!1,this.icon=this.widget.icon,this.label=this.widget.label,this.layers=this.widget.layers,this.headingLevel=this.widget.headingLevel,this.level=this.viewModel.level,this.phase=this.viewModel.phase,this.state=this.viewModel.state,this.hideLevels=this.widget.visibleElements.levels,this.hidePhases=this.widget.visibleElements.phases,this.hideDisciplines=this.widget.visibleElements.disciplines,this.position="bottom-left",this.referenceElement=void 0}async destroy(){await this.manager.destroy()}get el(){return m(this)}};S.style=M;const k=".arcgis-scene{padding:0;margin:0;height:100%;width:100%}",I=k,A=l(p),R=l(C),U=class{constructor(t){d(this,t),this.arcgisViewReadyChange=s(this,"arcgisViewReadyChange",7),this.arcgisViewChange=s(this,"arcgisViewChange",7),this.arcgisViewClick=s(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=s(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=s(this,"arcgisViewDrag",7),this.arcgisViewHold=s(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=s(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=s(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=s(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=s(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=s(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=s(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=s(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=s(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=s(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=s(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=s(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=s(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=s(this,"arcgisViewPointerUp",7),this.manager=v(this),this.reactiveUtils=V(b),this._map=A(this,{editConstructorProperties:this._editMapProperties}),this._setChildElement=i=>{this.el.childElem=i},this.autoDestroyDisabled=!1,this.view=r(R(this,{editConstructorProperties:this._editViewProperties})),this.map=this.view.map,this.allLayerViews=this.view.allLayerViews,this.alphaCompositingEnabled=this.view.alphaCompositingEnabled,this.analyses=this.view.analyses,this.basemapView=this.view.basemapView,this.basemap=this._map.basemap,this.camera=a(void 0,{get:()=>this.view.camera,set:(i,e)=>this.ready?(g(e,i)||(this.view.camera=i),this.view.camera):i}),this.cameraFov=a(void 0,{get:i=>{var e;return((e=this.view.camera)==null?void 0:e.fov)??i},set:i=>{var e;return this.ready?(i!=null&&this._mutateCamera(h=>{h.fov=i}),(e=this.view.camera)==null?void 0:e.fov):i}}),this.cameraHeading=a(void 0,{get:i=>{var e;return((e=this.view.camera)==null?void 0:e.heading)??i},set:i=>{var e;return this.ready?(i!=null&&this._mutateCamera(h=>{h.heading=i}),(e=this.view.camera)==null?void 0:e.heading):i}}),this.cameraPosition=a(void 0,{get:i=>{var e;return((e=this.view.camera)==null?void 0:e.position)??i},set:i=>{var h,n;if(!this.ready)return i;const e=w((h=this.view.camera)==null?void 0:h.position,i);return e&&this._mutateCamera(f=>{f.position=e}),(n=this.view.camera)==null?void 0:n.position}}),this.cameraTilt=a(void 0,{get:i=>{var e;return((e=this.view.camera)==null?void 0:e.tilt)??i},set:i=>{var e;return this.ready?(i!=null&&this._mutateCamera(h=>{h.tilt=i}),(e=this.view.camera)==null?void 0:e.tilt):i}}),this.center=a(void 0,{get:i=>this.view.center??i,set:i=>{const e=o(i,this.ready?this.view:void 0);return this.ready?(this.view.center=e,this.view.center):e}}),this.clippingArea=a(this.view.clippingArea,{set:(i,e)=>e!=null&&e.equals(i)?e:i}),this.constraints=this.view.constraints,this.environment=a(this.view.environment,{set:(i,e)=>_(e,i)?i:e}),this.extent=a(void 0,{get:i=>this.view.extent??i,set:(i,e)=>this.view.ready?(i&&!(e!=null&&e.equals(i))&&(this.view.extent=i),this.view.extent):i}),this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.gamepad=a(void 0,{get:()=>this.ready?this.view.input.gamepad:void 0,set:"ignore"}),this.graphics=this.view.graphics,this.ground=this._map.ground,this.groundView=this.view.groundView,this.highlightOptions=this.view.highlightOptions,this.interacting=a(!1,{get:()=>this.view.interacting,set:"ignore"}),this.itemId=a(void 0,{get:i=>{var e;return((e=this._map.portalItem)==null?void 0:e.id)??i},set:i=>(this.ready&&c.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error),i)}),this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.navigating=a(!1,{get:()=>this.view.navigating,set:"ignore"}),this.navigation=this.view.navigation,this.padding=this.view.padding,this.performanceInfo=a(void 0,{get:()=>this.view.performanceInfo,set:"ignore"}),this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.qualityProfile=this.view.qualityProfile,this.ready=this.view.ready,this.resolution=a(void 0,{get:()=>this.view.resolution,set:"ignore"}),this.scale=a(void 0,{get:i=>this.view.scale??i,set:i=>(this.ready&&(this.view.scale=i),i)}),this.spatialReference=a(this.view.spatialReference,{set:(i,e)=>e!=null&&e.equals(i)?e:i}),this.stationary=a(!0,{get:()=>this.view.stationary,set:"ignore"}),this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.toMap=r((...i)=>this.view.toMap(...i)),this.toScreen=r((...i)=>this.view.toScreen(...i)),this.updating=this.view.updating,this.viewingMode=this.view.viewingMode,this.viewpoint=a(void 0,{get:()=>this.view.viewpoint,set:(i,e)=>D(e,i)?i:e}),this.zoom=a(void 0,{get:i=>this.view.zoom??i,set:i=>(this.ready&&(this.view.zoom=i),i)})}async addLayer(t,i){var e;(e=this.map)==null||e.add(t,i)}async addLayers(t,i){var e;(e=this.map)==null||e.addMany(t,i)}async closePopup(){var t;(t=this.view)==null||t.closePopup()}async destroy(){await this.manager.destroy()}async goTo(t,i){var e;return await((e=this.view)==null?void 0:e.goTo(t,i))}async hitTest(t,i){var e;return await((e=this.view)==null?void 0:e.hitTest(t,i))}async openPopup(t){var i;await((i=this.view)==null?void 0:i.openPopup(t))}async takeScreenshot(t){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(t))}async tryFatalErrorRecovery(){var t;(t=this.view)==null||t.tryFatalErrorRecovery()}async whenAnalysisView(t){var i;return await((i=this.view)==null?void 0:i.whenAnalysisView(t))}async whenLayerView(t){var i;return await((i=this.view)==null?void 0:i.whenLayerView(t))}componentDidLoad(){var i;(i=this.view).container??(i.container=this.el.childElem);const{watch:t}=this.reactiveUtils;this.manager.onLifecycle(()=>[t(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),t(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})]),c.reEmitAccessorEvents(this.manager,this.view,this.reactiveUtils,"arcgisView")}render(){return y("div",{key:"9e1393b9ac8da70c9e35a8267d0261689b50e075",class:"arcgis-scene",ref:this._setChildElement})}_editMapProperties(t){this.map&&(this._map=this.map),this.itemId?t.portalItem={id:this.itemId}:this.basemap?this.basemap==="none"&&(t.basemap=void 0,this.basemap=null):t.basemap="topo-vector";const{basemap:i,...e}=t;return i||(t=e),t}_editViewProperties(t){this.view.ui||(t.ui={components:["attribution"]}),t.map??(t.map=this._map);const i=o(this.center,void 0);i&&(t.center=i),this.viewpoint&&(t.viewpoint=this.viewpoint),this.scale!==void 0&&(t.scale=this.scale),this.extent&&(t.extent=this.extent),this.camera&&(t.camera=this.camera);const e=w(void 0,this.cameraPosition);return e&&(t.camera??(t.camera={}),t.camera.position=e),this.cameraHeading!=null&&(t.camera??(t.camera={}),t.camera.heading=this.cameraHeading),this.cameraTilt!=null&&(t.camera??(t.camera={}),t.camera.tilt=this.cameraTilt),this.cameraFov!=null&&(t.camera??(t.camera={}),t.camera.fov=this.cameraFov),this.zoom!==void 0&&(t.zoom=this.zoom),t}_mutateCamera(t){const i=this.view.camera.clone();t(i),g(this.view.camera,i)||(this.view.camera=i)}get el(){return m(this)}};U.style=I;export{S as arcgis_building_explorer,U as arcgis_scene};
