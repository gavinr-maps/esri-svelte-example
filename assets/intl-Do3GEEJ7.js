import{c as k,r as m}from"./Promise-CmQqe-ke.js";import{e as U,s as f,a3 as z}from"./Accessor-BHnuXKD2.js";import{P as F,n as j}from"./cast-BA_-jlhc.js";const C={ar:"ar-u-nu-latn"};let g=new WeakMap,v={};function b(n){const t=n||v;if(!g.has(t)){const e=m(),r=C[m()]||e;g.set(t,new Intl.NumberFormat(r,n))}return g.get(t)}function Z(n={}){const t={};return n.digitSeparator!=null&&(t.useGrouping=n.digitSeparator),n.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=n.places),t}function q(n,t){return Object.is(n,-0)&&(n=0),b(t).format(n)}function Q(n,t=m()){var r,s;if(!n)return null;let e=y.get(t);if(!e){const i=b().formatToParts(12345.6),u=[...b({useGrouping:!1}).format(9876543210)].reverse(),h=new Map(u.map((a,w)=>[a,w])),l=new RegExp(`[${(r=i.find(a=>a.type==="group"))==null?void 0:r.value}]`,"g"),p=new RegExp(`[${(s=i.find(a=>a.type==="decimal"))==null?void 0:s.value}]`),c=new RegExp(`[${u.join("")}]`,"g"),$=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,_=/[-\u2212\u2013\u2014\u2015]/g;e=a=>{if((a=a.trim().replaceAll(l,"").replace(p,".").replace(c,N=>String(h.get(N))).replaceAll($,"").replaceAll(_,"-"))==="")return null;const w=Number(a);return isNaN(w)?null:w},y.set(t,e)}return e(n)}k(()=>{g=new WeakMap,v={}});const y=new Map,x=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,E={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function W(n){return n in E}function R(n){if(W(n)){const t=E[n];return t===!0?n:t}return null}const d=[],o=new Map;function A(n){for(const t of o.keys())M(n.pattern,t)&&o.delete(t)}function P(n){return d.includes(n)||(A(n),d.unshift(n)),U(()=>{const t=d.indexOf(n);t>-1&&(d.splice(t,1),A(n))})}async function V(n){const t=m();o.has(n)||o.set(n,T(n,t));const e=o.get(n);return e&&await D.add(e),e}function S(n){if(!x.test(n))return null;const t=x.exec(n);if(t===null)return null;const[,e,r]=t;return R(e+(r?"-"+r.toUpperCase():""))??R(e)}async function T(n,t){const e=[];for(const r of d)if(M(r.pattern,n))try{return await r.fetchMessageBundle(n,t)}catch(s){e.push(s)}throw e.length?new f("intl:message-bundle-error",`Errors occurred while loading "${n}"`,{errors:e}):new f("intl:no-message-bundle-loader",`No loader found for message bundle "${n}"`)}function M(n,t){return typeof n=="string"?t.startsWith(n):n.test(t)}k(()=>{o.clear()});const D=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(n){return this._increase(),n.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=z())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function O(n,t,e,r){const s=t.exec(e);if(!s)throw new f("esri-intl:invalid-bundle",`Bundle id "${e}" is not compatible with the pattern "${t}"`);const i=s[1]?`${s[1]}/`:"",u=s[2],h=S(r),l=`${i}${u}.json`,p=h?`${i}${u}_${h}.json`:l;let c;try{c=await L(n(p))}catch($){if(p===l)throw new f("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:$});try{c=await L(n(l))}catch(_){throw new f("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:_})}}return c}async function L(n){if(B.fetchBundleAsset!=null)return B.fetchBundleAsset(n);const t=await F(n,{responseType:"text"});return JSON.parse(t.data)}class G{constructor({base:t="",pattern:e,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?i=>new URL(i,new URL(r,window.location.href)).href:r instanceof URL?i=>new URL(i,r).href:r,this.pattern=typeof e=="string"?new RegExp(`^${e}`):e,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,e){return O(this.getAssetUrl,this.matcher,t,e)}}function H(n){return new G(n)}const B={};P(H({pattern:"esri/",location:j}));export{V as f,Z as i,q as l,Q as o,S as p};
