const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Legend-CvGY7aqY.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./jsonMap-DCC6W5ex.js","./jsxFactory-Be5PKa9i.js","./intl-CArXn1et.js","./Promise-CZrWwByK.js","./assets-BNizZMOZ.js","./index-BVncS3aY.js","./index-CjOb8WjV.css","./uuid-fwrPAdZb.js","./featureReductionUtils-Caulfaw_.js","./Color-DDUWtbqR.js","./colorUtils-CS9vdHXB.js","./mathUtils-ClvKsMak.js","./symbols-CfvYGR4J.js","./enumeration--HlxOQ_N.js","./writer-3zufXUNV.js","./fieldUtils-C5R42-PY.js","./geometry-CnaxvJsv.js","./Extent-B4rrMrqp.js","./Point-TlcsOcXV.js","./Polyline-BQFeqYXi.js","./TextSymbol-zZq0BA1M.js","./screenUtils-PfxkaaMN.js","./materialUtils-CQ3JLQ1x.js","./opacityUtils-BT7mQkwC.js","./aaBoundingBox-BGxkJAW0.js","./persistableUrlUtils-Dx61-x4K.js","./collectionUtils-Dm1icNvk.js","./Portal-DCqdz-K4.js","./Clonable-cKbRam6-.js","./EffectView-D2q0Wr_W.js","./parser-BN6zmHl-.js","./utils-D20M4_S8.js","./mat4f32-DcsiF_Rp.js","./mat4-ybYUU6jq.js","./jsonUtils-C4Wp5KpV.js","./ExportImageParameters-ejhot2o-.js","./scaleUtils-C_vWi-B7.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils-_xnIyjYh.js","./layerUtils-BzjQnEdj.js","./pixelRangeUtils-DR2RxTkt.js","./jsonUtils-DsFdmTaK.js","./ClassBreaksRenderer-B2uJHW90.js","./UniqueValueRenderer-Q9ooDuxf.js","./diffUtils--7ofoPN-.js","./colorRamps-BBM5Timv.js","./SizeVariable-Bq7jlw1r.js","./ColorStop-DEfc5Idt.js","./sizeVariableUtils-Cmcuvw-4.js","./visualVariableUtils-CrTsYJ9f.js","./Graphic-Bi5hWHps.js","./PopupTemplate-D8mXPxzU.js","./ActionToggle-C0Z1k2jc.js","./Identifiable-BLvpQbOc.js","./jsonUtils-DtWlwXHP.js","./compilerUtils-BA04t1lN.js","./lengthUtils-vgIBtB6M.js","./jsonUtils-aUmUTP_F.js","./defaults-CIM29kXM.js","./defaultsJSON-GKolV7NZ.js","./styleUtils-C7rrjuqd.js","./LRUCache-ju6LnIBZ.js","./MemCache-C6WUx-5V.js","./Version-_Vxue7Ui.js","./FieldsIndex-DHql50vu.js","./UnknownTimeZone-D0GlcniK.js","./OverrideHelper-0-cH6aQ2.js","./colorUtils-D5nOabzP.js","./vec42-B1mBkh1w.js","./vec4f64-CBQL1T0x.js","./utils-D8D39sLt.js","./quantizationUtils-DFd0XKEL.js","./HeatmapColorStop-7F2_sZ2U.js","./heatmapUtils-C-uT6ZIV.js","./SimpleRenderer-FL1Ywtqd.js","./rendererConversion-CEpE4SFL.js","./enums-BRXbslMp.js","./cimSymbolUtils-Ctf0ZrmH.js","./symbolUtils-DE-py14C.js","./utils-CvMr5svk.js","./mat2df32-orApM5a3.js","./mat2d-DPkeMmgR.js","./webStyleSymbolUtils--o9yKGMN.js","./devEnvironmentUtils-D6qIi8Ky.js","./utils-DTMemtCi.js","./Basemap-CKBB4cRW.js","./loadAll-z9YY33Kx.js","./PortalItem-CaeKabGc.js","./writeUtils-BUKZUL8X.js","./timeUtils-DQR2jUPL.js","./utils-HfpQY-3e.js","./themeUtils-C3zvZbsE.js","./utils-CTGWN8EM.js","./substitute-CNca968n.js","./Heading-DPYpGh42.js","./globalCss-CZa70j6i.js","./accessibleHandler-COYT31Am.js"])))=>i.map(i=>d[i]);
import{e as s}from"./Evented-CXIxDjmW.js";import{u as v,S as O}from"./Accessor-D6mNnsWy.js";import{y as n,b as w,a0 as y,O as P}from"./subclass-BR3PhgZG.js";import{d,P as h,V as b}from"./reactiveUtils-BFQ0BtrB.js";import{s as S}from"./Identifiable-BLvpQbOc.js";import{s as M}from"./jsonMap-DCC6W5ex.js";import{p as A,c as E,a as k}from"./ActionToggle-C0Z1k2jc.js";import{p as V,a as D,s as F,u as f,c as H,o as T}from"./layerListUtils-CMiJTmu0.js";import{_ as x}from"./index-BVncS3aY.js";import{B as $,n as p}from"./jsxFactory-Be5PKa9i.js";import{e as C}from"./widget-KJnvHjQr.js";let o=class extends S($){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([d(()=>this._canCreateLegend,()=>this._createLegend(),h),d(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),h)])}destroy(){this._legend=v(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e==null?void 0:e.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var m;const e=(m=this.listItem)==null?void 0:m.layer;if(!e||e.type==="subtype-sublayer")return null;const i=V(e)?e:null,r=e==null?void 0:e.parent,a=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,u="";return a&&r?{layer:r,title:u,sublayerIds:[a.mapLayerId]}:{layer:e,title:u}}get disabled(){var a;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return p("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:a}=this;return e&&!r&&a?e==="legend"&&i?p("div",{key:"legend-widget"},i.render()):typeof e=="string"?p("div",{innerHTML:e,key:e}):C(e)?p("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?p("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(v(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await x(()=>import("./Legend-CvGY7aqY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102]),import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:C(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};s([n()],o.prototype,"_legend",void 0),s([n()],o.prototype,"_canCreateLegend",null),s([n()],o.prototype,"_legendOptions",null),s([n()],o.prototype,"_legendLayerInfo",null),s([n()],o.prototype,"className",void 0),s([n()],o.prototype,"content",void 0),s([n()],o.prototype,"disabled",null),s([n()],o.prototype,"flowEnabled",void 0),s([n()],o.prototype,"icon",null),s([n()],o.prototype,"image",void 0),s([n()],o.prototype,"listItem",void 0),s([n()],o.prototype,"open",void 0),s([n()],o.prototype,"title",null),s([n()],o.prototype,"visible",void 0),o=s([w("esri.widgets.LayerList.ListItemPanel")],o);const I=o;var c;const W=b.ofType({key:"type",defaultKeyValue:"button",base:A,typeMap:{button:E,toggle:k,slider:D}}),L=b.ofType(W),_="layer",g="child-list-mode",N="hide";let l=c=class extends S(O){constructor(t){super(t),this.actionsSections=new L,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(b.ofType(c)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([d(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),h),d(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),h),d(()=>this.view,t=>this._updateChildrenView(t),h),d(()=>this.panel,t=>this._setListItemOnPanel(t),h)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new I(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=y(this,"layer.layer");return(!t||t&&y(this,"layer.layer.loaded"))&&y(this,"layer.title")||y(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!0}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return F(this.layer)}clone(){return new c({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(a=>!i.some(u=>u.layer===a));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(g),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(g),this.listModeDisabled||this.addHandles(t.toArray().map(e=>d(()=>e.listMode,()=>this._compileChildren(t))),g)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>f(i)!==N);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),_)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||H(i)?new c({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(P).reverse()}_watchLayerProperties(t){if(this.removeHandles(_),this.removeHandles(g),!t)return;if((!this.listModeDisabled&&f(t))==="hide-children")return void this.children.destroyAll();const e=T(t);e&&this.addHandles(d(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},h),_)}};s([n({type:L})],l.prototype,"actionsSections",void 0),s([n()],l.prototype,"actionsOpen",void 0),s([n()],l.prototype,"checkPublishStatusEnabled",void 0),s([n({type:b})],l.prototype,"children",void 0),s([n()],l.prototype,"childrenSortable",void 0),s([n({readOnly:!0})],l.prototype,"connectionStatus",null),s([n({readOnly:!0})],l.prototype,"error",null),s([n()],l.prototype,"hidden",void 0),s([n({readOnly:!0})],l.prototype,"incompatible",null),s([n()],l.prototype,"layer",void 0),s([n({readOnly:!0})],l.prototype,"layerView",null),s([n()],l.prototype,"listItemCreatedFunction",void 0),s([n({nonNullable:!0})],l.prototype,"listModeDisabled",void 0),s([n()],l.prototype,"open",void 0),s([n({type:I})],l.prototype,"panel",void 0),s([M("panel")],l.prototype,"castPanel",null),s([n()],l.prototype,"parent",void 0),s([n({value:!0})],l.prototype,"sortable",null),s([n()],l.prototype,"title",null),s([n({readOnly:!0})],l.prototype,"publishing",null),s([n({readOnly:!0})],l.prototype,"updating",null),s([n()],l.prototype,"view",void 0),s([n()],l.prototype,"visible",null),s([n({readOnly:!0})],l.prototype,"visibleAtCurrentScale",null),s([n({readOnly:!0})],l.prototype,"visibleAtCurrentTimeExtent",null),s([n({readOnly:!0})],l.prototype,"visibilityMode",null),l=c=s([w("esri.widgets.LayerList.ListItem")],l);const Z=l;export{Z as I};
