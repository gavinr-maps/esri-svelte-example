const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chartUtilsAm5-DC-C8JhZ.js","./intl-Dpfm8vPB.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./subclass-BR3PhgZG.js","./Accessor-D6mNnsWy.js","./Evented-CXIxDjmW.js","./assets-C2mb-ea2.js","./index-CeCSsEgo.js","./index-CjOb8WjV.css","./Theme-BPDNd4lz.js","./Tooltip-BU0Xplk2.js","./DefaultTheme-BOVc-zga.js","./calcite-icon-CocWVhPd.js","./icon-DIKjN-ev.js","./jsxFactory-CbAu6VfF.js","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./uuid-fwrPAdZb.js","./dom-Cv0oa6So.js","./observers-EizV_Lvc.js","./chartCommon-CzCnSZA6.js","./ResponsiveTheme-BKJHh_LN.js","./Button-DBSVhNn0.js","./ColorSet-CwDqiT0o.js","./pieChart-PIx4FVtt.js","./Tick-D7OsWsk4.js","./xyChart-fW8Whm1a.js","./LineSeries-B87G_1RS.js","./arcade-BYKMypXa.js","./Graphic-Dc7F67nR.js","./geometry-DpwwkAX1.js","./Extent-DHjqVB-p.js","./Point-DB4Hp4hH.js","./writer-3zufXUNV.js","./Polyline-D97hl-6E.js","./mathUtils-ClvKsMak.js","./PopupTemplate-ByHks6sq.js","./Clonable-cKbRam6-.js","./fieldUtils-CNduWQU9.js","./enumeration--HlxOQ_N.js","./Color-DDUWtbqR.js","./colorUtils-CS9vdHXB.js","./ActionToggle-C0Z1k2jc.js","./Identifiable-BLvpQbOc.js","./symbols-CsUQ5BxR.js","./TextSymbol-gKE-H_J6.js","./screenUtils-PfxkaaMN.js","./materialUtils-CQ3JLQ1x.js","./opacityUtils-BT7mQkwC.js","./aaBoundingBox-rJEWaOSN.js","./persistableUrlUtils-BcifXQ1Z.js","./collectionUtils-Dm1icNvk.js","./Portal-liet8xHC.js","./jsonUtils-Cma_7A64.js","./TimeOnly-cvONhzoK.js","./UnknownTimeZone-D0GlcniK.js","./ImmutableArray-BPVd6ESQ.js","./FeatureLayer-BCmfw45U.js","./ClassBreaksRenderer-DMO3d0Rn.js","./UniqueValueRenderer-dci9bLM8.js","./diffUtils--7ofoPN-.js","./colorRamps-CFlTi-ob.js","./SizeVariable-aYYWlweG.js","./ColorStop-CXfPDZon.js","./sizeVariableUtils-Cmcuvw-4.js","./visualVariableUtils-DzaXbn8H.js","./compilerUtils-BA04t1lN.js","./lengthUtils-D7_DvYH0.js","./jsonUtils-C6dvhNjw.js","./layerUtils-erzwAANv.js","./defaults-DCm7iNI6.js","./defaultsJSON-GKolV7NZ.js","./styleUtils-DQEZjdpw.js","./jsonUtils-CuoSmH2q.js","./LRUCache-ju6LnIBZ.js","./MemCache-C6WUx-5V.js","./Version-_Vxue7Ui.js","./FieldsIndex-IOXc-mnc.js","./OverrideHelper-C4oumxVn.js","./colorUtils-D5nOabzP.js","./vec42-B1mBkh1w.js","./vec4f64-CBQL1T0x.js","./utils-CO7DMJWl.js","./quantizationUtils-CIQDbQFJ.js","./HeatmapColorStop-CgvKf0-E.js","./heatmapUtils-C-uT6ZIV.js","./SimpleRenderer-DvJZ7cyq.js","./MultiOriginJSONSupport-DjAXzJun.js","./layerContainerType-C5CzMsLd.js","./FeatureLayerBase-CD91dIfN.js","./inputs-CnJRqwLx.js","./Field-C8SaaeoI.js","./fieldType-CIG5ey7e.js","./formUtils-Dni92j4V.js","./HeightModelInfo-CSXZysDz.js","./arcgisLayerUrl-Cgl5IQFD.js","./commonProperties-C-F8Nu9F.js","./ElevationInfo-BxYXLfrw.js","./unitConversionUtils-Dl04YuQU.js","./featureLayerUtils-CeNLEyq1.js","./featureQueryAll-CRo1-WqJ.js","./Query-Cx4awVKu.js","./TimeExtent-41gxTbrv.js","./timeUtils-DQR2jUPL.js","./DataLayerSource-6X35yXpo.js","./FullTextSearch-BNIhEccm.js","./AttachmentQuery-Dn4NbT1Z.js","./RelationshipQuery-kHvI2dm7.js","./LayerFloorInfo-BN2blBAm.js","./Relationship-WMN17mIX.js","./serviceCapabilitiesUtils-GL2GsHu0.js","./Layer-C96_yo4i.js","./workers-8Q6jrI18.js","./Queue-DpHko4Yk.js","./editsZScale-BMHD7K6h.js","./queryZScale-B_YkkRy9.js","./projection-A9yUaaTs.js","./projectBuffer-vsa0P_cF.js","./geodesicConstants-XRAvAZCD.js","./FeatureSet-DyOnd9Rj.js","./APIKeyMixin-DpJrW91V.js","./ArcGISService-Dr1J04Ka.js","./BlendLayer-DmvCcS5c.js","./jsonUtils-C4Wp5KpV.js","./parser-BN6zmHl-.js","./utils-D20M4_S8.js","./mat4f32-DcsiF_Rp.js","./mat4-ybYUU6jq.js","./CustomParametersMixin-BStBpako.js","./EditBusLayer-C6pLlK14.js","./FeatureEffectLayer-B3ucpbgh.js","./FeatureEffect-BXMKpemG.js","./FeatureFilter-BzdN7b7E.js","./FeatureReductionLayer-7Q3CJbxJ.js","./FeatureReductionSelection-Do1LXJh7.js","./labelingInfo-C8CHVUWS.js","./labelUtils-Cczy0uDR.js","./MD5-C9MwAd2G.js","./OperationalLayer-B61mRSes.js","./OrderedLayer-CfmzojSk.js","./OrderByInfo-Bn0SWspE.js","./PortalLayer-iKUPhGZB.js","./PortalItem-BuTU9OuN.js","./portalItemUtils-DIZSrm3T.js","./RefreshableLayer-B26jSd3d.js","./ScaleRangeLayer-CKYXLXxK.js","./TemporalLayer-D6vkocFU.js","./TimeInterval-CjSB1odC.js","./TimeInfo-Cq5mDY2W.js","./FeatureTemplate-BOr53vUa.js","./FeatureType-ByEWGsln.js","./fieldProperties-DJEV41A1.js","./versionUtils-ByKR3-oH.js","./styleUtils-BATHgMyw.js","./TopFeaturesQuery-BBItvyOE.js","./popupUtils-fsHWupnf.js","./interfaces-CL2NbQte.js","./calcite-loader-DxqUpD6Z.js","./loader-wfvKSvDR.js","./locale-BUTTOPma.js","./key-D5DPfjW0.js","./calcite-list-C9DJsIWv.js","./interactive-Dtpmn6Ls.js","./resources4-CT6dxwoZ.js","./utils3-Dl40LrI3.js","./loadable-CTFTnu2T.js","./t9n-DfK3dFGw.js","./filter-BHzLPuAd.js","./debounce-C5YDvsuO.js","./input2-ChLBQj0V.js","./form-DcBTx4ZC.js","./label-rdYpV4K5.js","./component-ByvC-PUv.js","./Validation-BBJwLSGg.js","./input-Dt5r39B0.js","./input-message-CKyGNFPw.js","./progress-B-8bmD6j.js","./scrim-tJUFlVOZ.js","./calcite-list-item-D17u9P-_.js","./action-DJPgY7YC.js","./handle-C2OyFwdr.js","./calcite-notice-DAIcfVw0.js","./conditionalSlot-MT4PnZbw.js","./openCloseComponent-v_dlVp47.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./index-CeCSsEgo.js";import{e as o}from"./Evented-CXIxDjmW.js";import"./intl-Dpfm8vPB.js";import{d as P,P as N,v as fe}from"./reactiveUtils-BFQ0BtrB.js";import{y as l,b as O,c as ze,n as Ve,ab as ot,O as at}from"./subclass-BR3PhgZG.js";import{s as ge}from"./jsonMap-DCC6W5ex.js";import{B,n as h,e as K,r as ve,o as Le}from"./jsxFactory-CbAu6VfF.js";import{y as At,I as Ct}from"./Attachments-CFH_3zPg.js";import{e as lt}from"./Heading-ynVMbJ8d.js";import{d as Pe}from"./Graphic-Dc7F67nR.js";import{S as le,z as xt,p as G,u as Et,E as $t,b as Ft}from"./Accessor-D6mNnsWy.js";import{E as _e,v as dt,C as ct,d as q,D as Q,P as Xe,z as Ye,R as Tt,q as Ue,x as pt,Y as Rt,a as Oe,o as ke,r as Lt,i as je,L as St,s as Vt,J as Pt,n as Ot,c as kt,u as Ae,b as Nt,I as Dt}from"./featureUtils-2Q65ejfE.js";import{e as ut,t as Wt}from"./widget-AQdZwE2X.js";import{a as Ht,n as ht,p as zt,d as Xt,I as Yt,e as mt,c as Ut}from"./PopupTemplate-ByHks6sq.js";import{e as we}from"./globalCss-CZa70j6i.js";import{a as jt}from"./uriUtils-BVXxIiB8.js";import{o as Zt}from"./a11yUtils-DwloBVAu.js";import{x as Bt}from"./utils-D7OMUg8s.js";import{U as qt}from"./assets-C2mb-ea2.js";import{p as Qt}from"./fieldUtils-CNduWQU9.js";import"./DataLayerSource-6X35yXpo.js";import{s as Ce}from"./executeQueryJSON-CmP_8PTA.js";import{_ as ft}from"./Point-DB4Hp4hH.js";import"./aaBoundingBox-rJEWaOSN.js";import"./mathUtils-ClvKsMak.js";import"./Extent-DHjqVB-p.js";import"./Polyline-D97hl-6E.js";import"./normalizeUtilsCommon-tgSpcwHH.js";import"./geometry-DpwwkAX1.js";import"./pbf-CmaozfCN.js";import"./FeatureSet-DyOnd9Rj.js";import{m as Jt,b as xe}from"./Query-Cx4awVKu.js";import"./AttachmentInfo-BoDg34HQ.js";import"./AttachmentQuery-Dn4NbT1Z.js";import Kt from"./RelationshipQuery-kHvI2dm7.js";import"./TopFeaturesQuery-BBItvyOE.js";import{r as Gt}from"./themeUtils-C3zvZbsE.js";import{s as Ne}from"./substitute-JuF-yP_g.js";import{e as _t}from"./throttle-jjSnxk80.js";import ei from"./FeatureLayer-BCmfw45U.js";import{F as De}from"./FeatureRelationshipViewModel-uplKJq_H.js";import{s as ti}from"./Identifiable-BLvpQbOc.js";import{o as ii}from"./Promise-CZrWwByK.js";let oe=class extends At{constructor(e){super(e),this.description=null,this.title=null}};o([l()],oe.prototype,"description",void 0),o([l()],oe.prototype,"title",void 0),oe=o([O("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],oe);const We=oe,Ee="esri-feature-element-info",$e={base:Ee,title:`${Ee}__title`,description:`${Ee}__description`};let ee=class extends B{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return h("div",{class:$e.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:e}=this;return e?h(lt,{class:$e.title,innerHTML:e,level:this.headingLevel}):null}_renderDescription(){const{description:e}=this;return e?h("div",{class:$e.description,innerHTML:e,key:"description"}):null}};o([l()],ee.prototype,"description",void 0),o([l()],ee.prototype,"headingLevel",void 0),o([l()],ee.prototype,"title",void 0),ee=o([O("esri.widgets.Feature.support.FeatureElementInfo")],ee);const Ie=ee,ri={base:"esri-feature-attachments"};let X=class extends B{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new Ct,this.headingLevel=2,this.viewModel=new We}initialize(){this._featureElementInfo=new Ie,this.addHandles([P(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),N),P(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,N)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return h("div",{class:ri.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var s;const{description:e,title:i,headingLevel:r}=this;(s=this._featureElementInfo)==null||s.set({description:e,title:i,headingLevel:r})}};o([l({readOnly:!0})],X.prototype,"attachmentsWidget",void 0),o([l()],X.prototype,"description",null),o([l()],X.prototype,"displayType",null),o([l()],X.prototype,"graphic",null),o([l()],X.prototype,"headingLevel",void 0),o([l()],X.prototype,"title",null),o([l({type:We})],X.prototype,"viewModel",void 0),X=o([O("esri.widgets.Feature.FeatureAttachments")],X);const si=X;let Z=class extends le{constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(P(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},N))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(_e({type:"content",value:r,event:{graphic:i}}),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=_e({type:"content",value:e,event:{graphic:i}});this._loadingPromise=r,this.notifyChange("state");const s=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};o([l({readOnly:!0})],Z.prototype,"created",void 0),o([l()],Z.prototype,"creator",void 0),o([l()],Z.prototype,"destroyer",void 0),o([l({type:Pe})],Z.prototype,"graphic",void 0),o([l({readOnly:!0})],Z.prototype,"state",null),Z=o([O("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Z);const ye=Z,Fe="esri-feature-content",Te={base:Fe,loaderContainer:`${Fe}__loader-container`,loader:`${Fe}__loader`};let te=class extends B{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(s=>{dt(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return h("div",{class:Te.base},e==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return h("div",{class:Te.loaderContainer,key:"loader"},h("div",{class:Te.loader}))}_renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?h("div",{afterCreate:this._attachToNode,bind:e,key:e}):ut(e)?h("div",{key:e},!e.destroyed&&e.render()):h("div",{afterCreate:this._addTargetToAnchors,innerHTML:e,key:e}):null}_attachToNode(e){const i=this;e.appendChild(i)}};o([l()],te.prototype,"creator",null),o([l()],te.prototype,"graphic",null),o([l({type:ye})],te.prototype,"viewModel",void 0),te=o([O("esri.widgets.Feature.FeatureContent")],te);const pe=te;let Y=class extends le{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i==null||i.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const n=s.clone();n.label=ct(n,e),r.push(n)}),r}};o([l()],Y.prototype,"attributes",void 0),o([l({type:[Ht]})],Y.prototype,"expressionInfos",void 0),o([l()],Y.prototype,"description",void 0),o([l({type:[ht]})],Y.prototype,"fieldInfos",void 0),o([l({readOnly:!0})],Y.prototype,"formattedFieldInfos",null),o([l()],Y.prototype,"title",void 0),Y=o([O("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Y);const be=Y,de="esri-feature-fields",ce={base:de,fieldHeader:`${de}__field-header`,fieldData:`${de}__field-data`,fieldDataDate:`${de}__field-data--date`};let H=class extends B{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new be,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Ie,this.addHandles(P(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),N))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return h("div",{class:ce.base},(e=this._featureElementInfo)==null?void 0:e.render(),this._renderFields())}_renderFieldInfo(e,i){var p;const{attributes:r}=this.viewModel,s=e.fieldName||"",n=e.label||s,a=r?r[s]==null?"":r[s]:"",c=!!((p=e.format)!=null&&p.dateFormat),d=typeof a=="number"&&!c?this._forceLTR(a):jt(this.messagesURIUtils,a),u={[ce.fieldDataDate]:c};return h("tr",{key:`fields-element-info-row-${s}-${i}`},h("th",{class:ce.fieldHeader,innerHTML:n,key:`fields-element-info-row-header-${s}-${i}`}),h("td",{class:this.classes(ce.fieldData,u),innerHTML:d,key:`fields-element-info-row-data-${s}-${i}`}))}_renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?h("table",{class:we.table,summary:this.messages.fieldsSummary},h("tbody",null,e.map((i,r)=>this._renderFieldInfo(i,r)))):null}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};o([l()],H.prototype,"attributes",null),o([l()],H.prototype,"description",null),o([l()],H.prototype,"expressionInfos",null),o([l()],H.prototype,"fieldInfos",null),o([l()],H.prototype,"title",null),o([l({type:be,nonNullable:!0})],H.prototype,"viewModel",void 0),o([l(),K("esri/widgets/Feature/t9n/Feature")],H.prototype,"messages",void 0),o([l(),K("esri/widgets/support/t9n/uriUtils")],H.prototype,"messagesURIUtils",void 0),H=o([O("esri.widgets.Feature.FeatureFields")],H);const yt=H,ni="esri.widgets.Feature.support.relatedFeatureUtils",Ze=()=>Ve.getLogger(ni),Be=new Map;function ue(t){if(!q(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function oi(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(s=>s.id===parseInt(t,10)&&(i=s,!0)),i}function ai({originRelationship:t,relationships:e,layerId:i}){return e.find(({relatedTableId:r,id:s})=>`${r}`===i&&s===(t==null?void 0:t.id))??null}function li(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function di(t,e){const i=oi(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function ci(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,s=i==null?void 0:i.value;e.relatedFeatures=s?s.features:[];const n=r==null?void 0:r.value;e.relatedStatsFeatures=n?n.features:[]}function pi(t,e,i,r){var n;const s=new Kt;return s.outFields=["*"],s.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),s.objectIds=[t.attributes[i.objectIdField]],s.gdbVersion=i.gdbVersion??null,s.historicMoment=i.historicMoment??null,((n=i.queryRelatedFeatures)==null?void 0:n.call(i,s,r))??Promise.resolve({})}function ui(t,e,i){let r=0;const s=[];for(;r<e.length;)s.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return s.join(" OR ")}function hi(t){return t?ot(t):void 0}function mi(t){return t?ot(t,(e,i)=>JSON.stringify(e.toJSON())===JSON.stringify(i.toJSON())):void 0}async function fi(t,e,i,r){const s=i.layerId.toString(),{layerInfo:n,relation:a,relatedFields:c,outStatistics:d,url:u,sourceSpatialReference:p}=e,m=hi(c),f=mi(d);if(!n||!a)return null;const _=ai({originRelationship:a,relationships:n.relationships,layerId:s});if(_!=null&&_.relationshipTableId&&_.keyFieldInRelationshipTable){const g=(await pi(t,_,i,r))[t.attributes[i.objectIdField]];if(!g)return null;const w=g.features.map(v=>v.attributes[n.objectIdField]);if(f!=null&&f.length&&n.supportsStatistics){const v=new xe;v.where=ui(n.objectIdField,w,1e3),v.outFields=m,v.outStatistics=f,v.sourceSpatialReference=p;const I={features:Promise.resolve(g),statsFeatures:Ce(u,v)};return G(I)}}const y=_==null?void 0:_.keyField;if(y){const g=Qt(wi(n.fields,y)),w=li(t.attributes,a.keyField),v=g?`${y}=${w}`:`${y}='${w}'`,I=i.historicMoment,M=i.gdbVersion,F=Ce(u,new xe({where:v,outFields:m,sourceSpatialReference:p,historicMoment:I,gdbVersion:M}),r),R=f!=null&&f.length&&n.supportsStatistics?Ce(u,new xe({where:v,outFields:m,outStatistics:f,sourceSpatialReference:p}),r):null,D={features:F};return R&&(D.statsFeatures=R),G(D)}return null}function _i(t,e){return qt(t,{query:{f:"json"},signal:e==null?void 0:e.signal})}function yi({relatedInfos:t,layer:e},i){const r={};return t.forEach((s,n)=>{const{relation:a}=s;if(!a){const m=new ze("relation-required","A relation is required on a layer to retrieve related records.");throw Ze().error(m),m}const{relatedTableId:c}=a;if(typeof c!="number"){const m=new ze("A related table ID is required on a layer to retrieve related records.");throw Ze().error(m),m}const d=`${e.url}/${c}`,u=Be.get(d),p=u??_i(d);u||Be.set(d,p),r[n]=p}),xt(G(r),i)}function gi({graphic:t,relatedInfos:e,layer:i},r){const s={};return e.forEach((n,a)=>{n.layerInfo&&(s[a]=fi(t,n,i,r))}),G(s)}function vi({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,s;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const n=new Jt({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(s=t.outStatistics)==null||s.push(n)}}function wi(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const qe={chartAnimation:!0};let E=class extends le{constructor(e){super(e),this.abilities={...qe},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...qe,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},s=this.formattedAttributes??{},n=this.expressionAttributes??{},a=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(c=>{const d=c==null?void 0:c.clone();return d?(d.title=Q({attributes:r,fieldInfoMap:a,globalAttributes:s,expressionAttributes:n,layer:i,text:d.title}),d.caption=Q({attributes:r,fieldInfoMap:a,globalAttributes:s,expressionAttributes:n,layer:i,text:d.caption}),d.altText=Q({attributes:r,fieldInfoMap:a,globalAttributes:s,expressionAttributes:n,layer:i,text:d.altText}),d.type==="image"?d.value?(this._setImageValue({value:d.value,formattedAttributes:s,layer:i}),d.value.sourceURL?d:void 0):void 0:d.type==="pie-chart"||d.type==="line-chart"||d.type==="column-chart"||d.type==="bar-chart"?d.value?(this._setChartValue({value:d.value,chartType:d.type,attributes:r,formattedAttributes:s,layer:i,expressionAttributes:n}),d):void 0:null):null}).filter(at))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:s,layer:n}=e,{linkURL:a,sourceURL:c}=r;if(c){const d=Xe(c,n);r.sourceURL=Ye({formattedAttributes:s,template:d,fieldInfoMap:i})}if(a){const d=Xe(a,n);r.linkURL=Ye({formattedAttributes:s,template:d,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:s,chartType:n,layer:a,expressionAttributes:c}=e,{popupTemplate:d,relatedInfos:u}=this,{fields:p,normalizeField:m}=i,f=a;if(i.fields=Tt(p,f),m&&(i.normalizeField=Ue(m,f)),!p.some(y=>!!(s[y]!=null||q(y)&&(u!=null&&u.size))))return;const _=(d==null?void 0:d.fieldInfos)??[];p.forEach((y,g)=>{var I;const w=(I=i.colors)==null?void 0:I[g];if(q(y))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:_,fieldName:y,formattedAttributes:s,chartType:n,value:i,color:w})]);const v=this._getChartOption({value:i,attributes:r,chartType:n,formattedAttributes:s,expressionAttributes:c,fieldName:y,fieldInfos:_,color:w});i.series.push(v)})}_getRelatedChartInfos(e){var y;const{fieldInfos:i,fieldName:r,formattedAttributes:s,chartType:n,value:a,color:c}=e,d=[],u=ue(r),p=u&&((y=this.relatedInfos)==null?void 0:y.get(u.layerId.toString()));if(!p)return d;const{relatedFeatures:m,relation:f}=p;if(!f||!m)return d;const{cardinality:_}=f;return m.forEach(g=>{const{attributes:w}=g;w&&Object.keys(w).forEach(v=>{v===u.fieldName&&d.push(this._getChartOption({value:a,attributes:w,formattedAttributes:s,fieldName:r,chartType:n,relatedFieldName:v,hasMultipleRelatedFeatures:(m==null?void 0:m.length)>1,fieldInfos:i,color:c}))})}),_==="one-to-many"||_==="many-to-many"?d:[d[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var z;const{value:i,attributes:r,formattedAttributes:s,expressionAttributes:n,fieldName:a,relatedFieldName:c,fieldInfos:d,chartType:u,hasMultipleRelatedFeatures:p,color:m}=e,f=this.layer,_=this.fieldInfoMap??new Map,{normalizeField:y,tooltipField:g}=i,w=y?q(y)?r[ue(y).fieldName]:r[y]:null,v=pt(a)&&n&&n[a]!==void 0?n[a]:c&&r[c]!==void 0?r[c]:r[a]!==void 0?r[a]:s[a],I=new zt({fieldName:a,color:m,value:v===void 0?null:v&&w?v/w:v});if(q(a)){const W=_.get(a.toLowerCase()),ie=g&&_.get(g.toLowerCase()),Me=(W==null?void 0:W.fieldName)??a,re=p&&g?ue(g).fieldName:(ie==null?void 0:ie.fieldName)??g,bt=p&&re?r[re]:s[re]??(W==null?void 0:W.label)??(W==null?void 0:W.fieldName)??c,Mt=p&&c?r[c]:s[Me];return I.tooltip=this._getTooltip({label:bt,value:Mt,chartType:u}),I}const M=Rt(d,a),F=Ue(a,f),R=g&&s[g]!==void 0?s[g]:ct(M||new ht({fieldName:F}),(z=this.popupTemplate)==null?void 0:z.expressionInfos),D=s[F];return I.tooltip=this._getTooltip({label:R,value:D,chartType:u}),I}};o([l()],E.prototype,"abilities",void 0),o([ge("abilities")],E.prototype,"castAbilities",null),o([l()],E.prototype,"activeMediaInfoIndex",void 0),o([l({readOnly:!0})],E.prototype,"activeMediaInfo",null),o([l()],E.prototype,"attributes",void 0),o([l()],E.prototype,"description",void 0),o([l()],E.prototype,"fieldInfoMap",void 0),o([l()],E.prototype,"formattedAttributes",void 0),o([l()],E.prototype,"expressionAttributes",void 0),o([l({readOnly:!0})],E.prototype,"formattedMediaInfos",null),o([l()],E.prototype,"isAggregate",void 0),o([l()],E.prototype,"layer",void 0),o([l({readOnly:!0})],E.prototype,"formattedMediaInfoCount",null),o([l()],E.prototype,"mediaInfos",void 0),o([l()],E.prototype,"popupTemplate",void 0),o([l()],E.prototype,"relatedInfos",void 0),o([l()],E.prototype,"title",void 0),E=o([O("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],E);const J=E,x="esri-feature-media",L={base:x,mediaContainer:`${x}__container`,mediaItemContainer:`${x}__item-container`,mediaItem:`${x}__item`,mediaItemText:`${x}__item-text`,mediaItemTitle:`${x}__item-title`,mediaItemCaption:`${x}__item-caption`,mediaNavigation:`${x}__item-navigation`,mediaPagination:`${x}__pagination`,mediaPaginationText:`${x}__pagination-text`,mediaPrevious:`${x}__previous`,mediaPreviousIconLTR:`${x}__previous-icon`,mediaPreviousIconRTL:`${x}__previous-icon--rtl`,mediaNext:`${x}__next`,mediaNextIconLTR:`${x}__next-icon`,mediaNextIconRTL:`${x}__next-icon--rtl`,mediaChart:`${x}__chart`,mediaPaginationButton:`${x}__pagination-button`,mediaPaginationIcon:`${x}__pagination-icon`,mediaChartRendered:`${x}__chart--rendered`},Re=15,U="category",se="value",Ii="rgba(50, 50, 50, 1)",bi=250,Mi=500,Ai=200;let S=class extends B{constructor(t,e){super(t,e),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new J,this.messages=null,this._disposeChart=i=>{var r;(r=this._chartRootMap.get(i))==null||r.dispose(),this._chartRootMap.delete(i)},this._createChart=async i=>{const{destroyed:r,viewModel:s}=this;if(r||!s||!i)return;const{createRoot:n}=await A(()=>import("./chartUtilsAm5-DC-C8JhZ.js").then(c=>c.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),a=await n(i);this._chartRootMap.set(i,a),this._renderChart({mediaInfo:s.activeMediaInfo,root:a})}}initialize(){this._featureElementInfo=new Ie,this.addHandles([P(()=>{var t,e;return[(t=this.viewModel)==null?void 0:t.activeMediaInfo,(e=this.viewModel)==null?void 0:e.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),N),P(()=>{var t,e;return[(t=this.viewModel)==null?void 0:t.description,(e=this.viewModel)==null?void 0:e.title]},()=>this._setupFeatureElementInfo(),N)])}loadDependencies(){return ve({icon:()=>A(()=>import("./calcite-icon-CocWVhPd.js"),__vite__mapDeps([13,14,15,6,5,4,1,2,3,7,8,9,16,17,18,19,20]),import.meta.url)})}destroy(){var t;this._clearMediaRefreshTimer(),(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return h("div",{bind:this,class:L.base,onkeyup:this._handleMediaKeyup},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:t,activeMediaInfoIndex:e}=this.viewModel,i=this._renderMediaText();return t?h("div",{class:L.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),h("div",{class:L.mediaNavigation},i,t>1?h("div",{class:L.mediaPagination},this._renderMediaPageButton("previous"),h("span",{class:L.mediaPaginationText},Ne(this.messages.pageText,{index:e+1,total:t})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:t}=this.viewModel;if(!t)return null;const e=t&&t.title?h("div",{class:L.mediaItemTitle,innerHTML:t.title,key:"media-title"}):null,i=t&&t.caption?h("div",{class:L.mediaItemCaption,innerHTML:t.caption,key:"media-caption"}):null;return e||i?h("div",{class:L.mediaItemText,key:"media-text"},e,i):null}_renderImageMediaInfo(t){if(!t.value)return null;const{_refreshIntervalInfo:e}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:n,altText:a,title:c,type:d}=t,{sourceURL:u,linkURL:p}=s,m=dt(p??void 0)?"_blank":"_self",f=m==="_blank"?"noreferrer":"",_=n?e:null,y=_?_.timestamp:0,g=_?_.sourceURL:u,w=h("img",{alt:a||c,key:`media-${d}-${i}-${r}-${y}`,src:g??void 0});return(p?h("a",{href:p,rel:f,target:m,title:c},w):null)??w}_renderChartMediaInfo(t){const{activeMediaInfoIndex:e,formattedMediaInfoCount:i}=this.viewModel;return h("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:L.mediaChart,key:`media-${t.type}-${e}-${i}`})}_renderMediaInfoType(){const{activeMediaInfo:t}=this.viewModel;return t?t.type==="image"?this._renderImageMediaInfo(t):t.type.includes("chart")?this._renderChartMediaInfo(t):null:null}_renderMediaInfo(){const{activeMediaInfo:t}=this.viewModel;return t?h("div",{class:L.mediaItemContainer,key:"media-container"},h("div",{class:L.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;const e=t==="previous",i=e?this.messages.previous:this.messages.next,r=e?"chevron-left":"chevron-right",s=e?"media-previous":"media-next",n=e?this._previous:this._next;return h("button",{"aria-label":i,bind:this,class:L.mediaPaginationButton,key:s,onclick:n,tabIndex:0,title:i,type:"button"},h("calcite-icon",{class:L.mediaPaginationIcon,icon:r,scale:"s"}))}_setupFeatureElementInfo(){var i;const{description:t,title:e}=this;(i=this._featureElementInfo)==null||i.set({description:t,title:e})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:t,layer:e}=this.viewModel;return t&&(e!=null&&e.featureReduction)&&"renderer"in e.featureReduction?e.featureReduction.renderer:e==null?void 0:e.renderer}async _getSeriesColors(t){const{colorAm5:e}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),i=new Map;return t.forEach(r=>{r.color&&i.set(r,e(r.color.toCss(!0)))}),i}async _getRendererColors(){const{colorAm5:t}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),e=new Map,i=this._getRenderer(),r="default";if(!i)return e;const s=await Bt(i);return s.delete(r),Array.from(s.values()).every(n=>(n==null?void 0:n.length)===1)&&Array.from(s.keys()).forEach(n=>{var c,d;const a=(d=(c=s.get(n))==null?void 0:c[0])==null?void 0:d.toCss(!0);a&&e.set(n,t(a))}),e}_handleMediaKeyup(t){const{key:e}=t;e==="ArrowLeft"&&(t.stopPropagation(),this.viewModel.previous()),e==="ArrowRight"&&(t.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!Zt()}_getChartAnimationMS(){return this._canAnimateChart()?bi:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?Mi:0}async _renderChart(t){const{root:e,mediaInfo:i}=t,{value:r,type:s}=i,{ResponsiveThemeAm5:n,DarkThemeAm5:a,AnimatedThemeAm5:c,ColorSetAm5:d,ThemeAm5:u,esriChartColorSet:p}=await A(async()=>{const{ResponsiveThemeAm5:M,DarkThemeAm5:F,AnimatedThemeAm5:R,ColorSetAm5:D,ThemeAm5:z,esriChartColorSet:W}=await import("./chartCommon-CzCnSZA6.js");return{ResponsiveThemeAm5:M,DarkThemeAm5:F,AnimatedThemeAm5:R,ColorSetAm5:D,ThemeAm5:z,esriChartColorSet:W}},__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),m=u.new(e);m.rule("ColorSet").set("colors",p),m.rule("ColorSet").set("reuse",!0);const f=[n.new(e),m];Gt()&&f.push(a.new(e)),this._canAnimateChart()&&f.push(c.new(e)),e.setThemes(f);const _=await this._getRendererColors(),y=await this._getSeriesColors(r.series),g=d.new(e,{}),w=y.get(r.series[0]),v=w?{lineSettings:{stroke:w}}:void 0,I=r.series.map((M,F)=>{const R=y.get(M)||_.get(M.fieldName)||g.getIndex(F);return{[U]:M.tooltip,[se]:M.value,columnSettings:{fill:R,stroke:R},...v}}).filter(M=>s!=="pie-chart"||M.value!=null&&M.value>0);s==="pie-chart"?this._createPieChart(t,I):this._createXYChart(t,I)}_getDirection(){return Le(this.container)?"rtl":"ltr"}_isInversed(){return!!Le(this.container)}async _customizeChartTooltip(t,e="horizontal"){var r;const{colorAm5:i}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url);t.setAll({pointerOrientation:e}),(r=t.get("background"))==null||r.setAll({stroke:i(Ii)}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:Ai})}async _createPieChart(t,e){const{TooltipAm5:i}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),{PieChartAm5:r,PieSeriesAm5:s}=await A(async()=>{const{PieChartAm5:y,PieSeriesAm5:g}=await import("./pieChart-PIx4FVtt.js");return{PieChartAm5:y,PieSeriesAm5:g}},__vite__mapDeps([25,6,5,4,26,10,24,12]),import.meta.url),{mediaInfo:n,root:a}=t,{title:c}=n,d=5,u=(n==null?void 0:n.altText)||(n==null?void 0:n.title)||"",p=a.container.children.push(r.new(a,{ariaLabel:u,focusable:!0,paddingBottom:d,paddingTop:d,paddingLeft:d,paddingRight:d})),m=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,f=i.new(a,{labelText:m}),_=p.series.push(s.new(a,{name:c,valueField:se,categoryField:U,tooltip:f}));_.ticks.template.set("forceHidden",!0),_.labels.template.set("forceHidden",!0),_.slices.template.states.create("active",{shiftRadius:d}),this._customizeChartTooltip(f),_.slices.template.setAll({ariaLabel:m,focusable:!0,templateField:"columnSettings"}),_.data.setAll(e),_.appear(this._getChartSeriesAnimationMS()),p.appear(this._getChartAnimationMS()),p.root.dom.classList.toggle(L.mediaChartRendered,!0)}_getMinSeriesValue(t){let e=0;return t.forEach(i=>e=Math.min(i.value,e)),e}async _createColumnChart(t,e,i){const{TooltipAm5:r,ScrollbarAm5:s}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),{CategoryAxisAm5:n,AxisRendererXAm5:a,ValueAxisAm5:c,AxisRendererYAm5:d,ColumnSeriesAm5:u}=await A(async()=>{const{CategoryAxisAm5:M,AxisRendererXAm5:F,ValueAxisAm5:R,AxisRendererYAm5:D,ColumnSeriesAm5:z}=await import("./xyChart-fW8Whm1a.js");return{CategoryAxisAm5:M,AxisRendererXAm5:F,ValueAxisAm5:R,AxisRendererYAm5:D,ColumnSeriesAm5:z}},__vite__mapDeps([27,28,10,6,5,4,24,12,26,23]),import.meta.url),{mediaInfo:p,root:m}=e,{value:f,title:_}=p;t.setAll({wheelX:"panX",wheelY:"zoomX"});const y=t.xAxes.push(n.new(m,{renderer:a.new(m,{inversed:this._isInversed()}),categoryField:U}));y.get("renderer").labels.template.setAll({forceHidden:!0});const g=t.yAxes.push(c.new(m,{renderer:d.new(m,{inside:!1}),min:this._getMinSeriesValue(f.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryX}",v=r.new(m,{labelText:w}),I=t.series.push(u.new(m,{name:_,xAxis:y,yAxis:g,valueYField:se,categoryXField:U,tooltip:v}));this._customizeChartTooltip(v),I.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),f.series.length>Re&&t.set("scrollbarX",s.new(m,{orientation:"horizontal"})),y.data.setAll(i),I.data.setAll(i),I.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createBarChart(t,e,i){const{TooltipAm5:r,ScrollbarAm5:s}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),{CategoryAxisAm5:n,AxisRendererXAm5:a,ValueAxisAm5:c,AxisRendererYAm5:d,ColumnSeriesAm5:u}=await A(async()=>{const{CategoryAxisAm5:M,AxisRendererXAm5:F,ValueAxisAm5:R,AxisRendererYAm5:D,ColumnSeriesAm5:z}=await import("./xyChart-fW8Whm1a.js");return{CategoryAxisAm5:M,AxisRendererXAm5:F,ValueAxisAm5:R,AxisRendererYAm5:D,ColumnSeriesAm5:z}},__vite__mapDeps([27,28,10,6,5,4,24,12,26,23]),import.meta.url),{mediaInfo:p,root:m}=e,{value:f,title:_}=p;t.setAll({wheelX:"panY",wheelY:"zoomY"});const y=t.yAxes.push(n.new(m,{renderer:d.new(m,{inversed:!0}),categoryField:U}));y.get("renderer").labels.template.setAll({forceHidden:!0});const g=t.xAxes.push(c.new(m,{renderer:a.new(m,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(f.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryY}",v=r.new(m,{labelText:w}),I=t.series.push(u.new(m,{name:_,xAxis:g,yAxis:y,valueXField:se,categoryYField:U,tooltip:v}));this._customizeChartTooltip(v,"vertical"),I.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),f.series.length>Re&&t.set("scrollbarY",s.new(m,{orientation:"vertical"})),y.data.setAll(i),I.data.setAll(i),I.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createLineChart(t,e,i){var F,R,D;const{TooltipAm5:r,ScrollbarAm5:s}=await A(()=>import("./chartCommon-CzCnSZA6.js"),__vite__mapDeps([21,10,6,5,4,22,23,11,24]),import.meta.url),{CategoryAxisAm5:n,AxisRendererXAm5:a,ValueAxisAm5:c,AxisRendererYAm5:d,LineSeriesAm5:u}=await A(async()=>{const{CategoryAxisAm5:z,AxisRendererXAm5:W,ValueAxisAm5:ie,AxisRendererYAm5:Me,LineSeriesAm5:re}=await import("./xyChart-fW8Whm1a.js");return{CategoryAxisAm5:z,AxisRendererXAm5:W,ValueAxisAm5:ie,AxisRendererYAm5:Me,LineSeriesAm5:re}},__vite__mapDeps([27,28,10,6,5,4,24,12,26,23]),import.meta.url),{root:p,mediaInfo:m}=e,{value:f,title:_}=m;t.setAll({wheelX:"panX",wheelY:"zoomX"});const y=t.xAxes.push(n.new(p,{renderer:a.new(p,{inversed:this._isInversed()}),categoryField:U}));y.get("renderer").labels.template.setAll({forceHidden:!0});const g=t.yAxes.push(c.new(p,{renderer:d.new(p,{inside:!1}),min:this._getMinSeriesValue(f.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryX}",v=(R=(F=i[0])==null?void 0:F.lineSettings)==null?void 0:R.stroke,I=r.new(p,{getFillFromSprite:!v,labelText:w});v&&((D=I.get("background"))==null||D.setAll({fill:v}));const M=t.series.push(u.new(p,{name:_,xAxis:y,yAxis:g,valueYField:se,categoryXField:U,tooltip:I}));M.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(I,"vertical"),f.series.length>Re&&t.set("scrollbarX",s.new(p,{orientation:"horizontal"})),y.data.setAll(i),M.data.setAll(i),M.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createXYChart(t,e){const{XYChartAm5:i,XYCursorAm5:r}=await A(()=>import("./xyChart-fW8Whm1a.js"),__vite__mapDeps([27,28,10,6,5,4,24,12,26,23]),import.meta.url),{root:s,mediaInfo:n}=t,{type:a}=n,c=(n==null?void 0:n.altText)||(n==null?void 0:n.title)||"",d=s.container.children.push(i.new(s,{ariaLabel:c,focusable:!0,panX:!0,panY:!0}));d.set("cursor",r.new(s,{})),a==="column-chart"&&await this._createColumnChart(d,t,e),a==="bar-chart"&&await this._createBarChart(d,t,e),a==="line-chart"&&await this._createLineChart(d,t,e),d.root.dom.classList.toggle(L.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){const e=Date.now();this._refreshIntervalInfo={timestamp:e,sourceURL:t&&this._getImageSource(t,e)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:t}=this.viewModel;(t==null?void 0:t.type)==="image"&&(t==null?void 0:t.refreshInterval)>0&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){const{refreshInterval:e,value:i}=t,r=6e4*e;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(t,e){const i=t.includes("?")?"&":"?",[r,s=""]=t.split("#");return`${r}${i}timestamp=${e}${s?"#":""}${s}`}};o([l()],S.prototype,"_refreshIntervalInfo",void 0),o([l()],S.prototype,"attributes",null),o([l()],S.prototype,"activeMediaInfoIndex",null),o([l()],S.prototype,"description",null),o([l()],S.prototype,"fieldInfoMap",null),o([l()],S.prototype,"layer",null),o([l()],S.prototype,"mediaInfos",null),o([l()],S.prototype,"popupTemplate",null),o([l()],S.prototype,"relatedInfos",null),o([l()],S.prototype,"title",null),o([l({type:J})],S.prototype,"viewModel",void 0),o([l(),K("esri/widgets/Feature/t9n/Feature")],S.prototype,"messages",void 0),S=o([O("esri.widgets.Feature.FeatureMedia")],S);const gt=S,Ci="esri.widgets.Feature.support.arcadeFeatureUtils",Qe=()=>Ve.getLogger(Ci);function xi(t){return typeof t=="string"?Oe(ke(t)):Array.isArray(t)?Ei(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?$i(t):t}function Ei(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?Oe(ke(e)):e}</li>`).join("")}</ul>`}function $i(t){const e=t.keys().map(i=>{const r=t.field(i);return`<tr><th>${i}</th><td>${typeof r=="string"?Oe(ke(r)):r}</td></tr>`}).join("");return`<table class="${we.table}">${e}</table>`}function vt(){return A(()=>import("./arcade-BYKMypXa.js"),__vite__mapDeps([29,30,6,5,4,31,32,33,3,34,7,8,9,35,36,37,38,16,17,39,1,2,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,18,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157]),import.meta.url)}function Fi(t){return"createQuery"in t&&"queryFeatures"in t}async function Ti({graphic:t,view:e,options:i}){const{isAggregate:r,layer:s}=t;if(!r||!s||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(s);if(!Fi(n))return[];const a=n.createQuery(),c=t.getObjectId();a.aggregateIds=c!=null?[c]:[];const{features:d}=await n.queryFeatures(a,i);return d}function Ri({layer:t,aggregatedFeatures:e,interceptor:i}){const{fields:r,objectIdField:s,geometryType:n,spatialReference:a,displayField:c}=t;return new ei({fields:r,objectIdField:s,geometryType:n,spatialReference:a,displayField:c,interceptor:i,...t.type==="feature"?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null,source:e})}async function wt({expressionInfo:t,arcade:e,interceptor:i,spatialReference:r,map:s,graphic:n,location:a,view:c,options:d}){var M;if(!(t!=null&&t.expression))return null;const{isAggregate:u}=n,p=(n.sourceLayer||n.layer)??void 0,m=u?"feature-reduction-popup":"popup",f=e.createArcadeProfile(m),_=e.createArcadeExecutor(t.expression,f).catch(F=>Qe().error("arcade-executor-error",{error:F,expressionInfo:t})),[y,g]=await Promise.all([Ti({graphic:n,view:c,options:d}),_]);if(!g)return null;const w=m==="feature-reduction-popup"?Ri({layer:p,aggregatedFeatures:y,interceptor:i}):void 0,v={...m==="feature-reduction-popup"?{$aggregatedFeatures:w}:{$datastore:p==null?void 0:p.url,$layer:(p==null?void 0:p.type)==="feature"||(p==null?void 0:p.type)==="subtype-sublayer"||(p==null?void 0:p.type)==="catalog-footprint"||(p==null?void 0:p.type)==="oriented-imagery"?p:(p==null?void 0:p.type)==="scene"&&p.associatedLayer!=null?p.associatedLayer:void 0,$map:s,$userInput:a,$graph:(p==null?void 0:p.type)==="knowledge-graph-sublayer"?(M=p==null?void 0:p.parentCompositeLayer)==null?void 0:M.knowledgeGraph:void 0},$feature:n},I={abortSignal:(d==null?void 0:d.signal)??void 0,interceptor:i??void 0,rawOutput:!0,spatialReference:r??void 0,timeZone:c==null?void 0:c.timeZone};return await g.executeAsync(v,I).catch(F=>Qe().error("arcade-execution-error",{error:F,graphic:n,expressionInfo:t})).finally(()=>w==null?void 0:w.destroy())}async function Li({expressionInfos:t,spatialReference:e,graphic:i,interceptor:r,map:s,view:n,location:a,options:c}){if(!(t!=null&&t.length))return{};const d=await vt(),u={};for(const f of t)u[`expression/${f.name}`]=wt({expressionInfo:f,arcade:d,interceptor:r,spatialReference:e,map:s,graphic:i,location:a,view:n,options:c});const p=await G(u),m={};for(const f in p)m[f]=xi(p[f].value);return m}const Si=1;let k=class extends le{constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var s,n;const i=(s=this.contentElement)==null?void 0:s.type;(n=this.contentElementViewModel)==null||n.destroy();const r=i==="fields"?new be:i==="media"?new J:i==="text"?new ye:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=_t(this._compile,Si,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:s,spatialReference:n,map:a,location:c,view:d,_abortController:u}=this;if(!i||!r)return void this._set("contentElement",null);const p=await vt();if(u!==this._abortController)return;const m=await wt({arcade:p,expressionInfo:i,graphic:r,location:c,interceptor:s,map:a,spatialReference:n,view:d});if(!m||m.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const f=await m.castAsJsonAsync(u==null?void 0:u.signal),_=f==null?void 0:f.type,y=_==="media"?Yt.fromJSON(f):_==="text"?mt.fromJSON(f):_==="fields"?Ut.fromJSON(f):null;this._set("contentElement",y)},this.addHandles([P(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),N),P(()=>[this.contentElement],()=>this._createVM(),N)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:r}=this;return e?"loading":i||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};o([l()],k.prototype,"_abortController",void 0),o([l({type:Xt})],k.prototype,"expressionInfo",void 0),o([l({type:Pe})],k.prototype,"graphic",void 0),o([l({readOnly:!0})],k.prototype,"contentElement",void 0),o([l({readOnly:!0})],k.prototype,"contentElementViewModel",void 0),o([l()],k.prototype,"interceptor",void 0),o([l({type:ft})],k.prototype,"location",void 0),o([l()],k.prototype,"spatialReference",null),o([l({readOnly:!0})],k.prototype,"state",null),o([l()],k.prototype,"map",null),o([l()],k.prototype,"view",void 0),k=o([O("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],k);const He=k,Je="esri-feature",Ke={base:`${Je}-expression`,loadingSpinnerContainer:`${Je}__loading-container`};let he=class extends B{constructor(t,e){super(t,e),this._contentWidget=null,this.viewModel=new He}initialize(){this.addHandles(P(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentElementViewModel},()=>this._setupExpressionWidget(),N))}loadDependencies(){return ve({loader:()=>A(()=>import("./calcite-loader-DxqUpD6Z.js"),__vite__mapDeps([158,159,15,6,5,4,1,2,3,7,8,9,16,17,18,19,160,161,20]),import.meta.url)})}destroy(){this._destroyContentWidget()}render(){var e;const{state:t}=this.viewModel;return h("div",{class:Ke.base},t==="loading"?this._renderLoading():t==="disabled"?null:(e=this._contentWidget)==null?void 0:e.render())}_renderLoading(){return h("div",{class:Ke.loadingSpinnerContainer,key:"loading-container"},h("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:t,contentElement:e}=this.viewModel,i=e==null?void 0:e.type;this._destroyContentWidget();const r=t?i==="fields"?new yt({viewModel:t}):i==="media"?new gt({viewModel:t}):i==="text"?new pe({viewModel:t}):null:null;this._contentWidget=r,this.scheduleRender()}};o([l({type:He})],he.prototype,"viewModel",void 0),he=o([O("esri.widgets.Feature.FeatureExpression")],he);const Vi=he,me="esri-feature",ne=`${me}-relationship`,j={base:ne,listContainer:`${ne}__list`,listItem:`${ne}__list-item`,listItemHidden:`${ne}__list-item--hidden`,listContainerQuerying:`${ne}__list--querying`,featureObserver:`${me}__feature-observer`,stickySpinnerContainer:`${me}__sticky-loading-container`,loadingSpinnerContainer:`${me}__loading-container`},Ge={title:!0,description:!0};let V=class extends B{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new De,this.messages=null,this.messagesCommon=null,this.visibleElements={...Ge},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:s,relatedFeatures:n,featuresPerPage:a,featurePage:c}=this.viewModel;r==="ready"&&s&&n.length>=a*c&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Ie,this.addHandles([P(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),N),P(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),fe(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return ve({icon:()=>A(()=>import("./calcite-icon-CocWVhPd.js"),__vite__mapDeps([13,14,15,6,5,4,1,2,3,7,8,9,16,17,18,19,20]),import.meta.url),list:()=>A(()=>import("./calcite-list-C9DJsIWv.js"),__vite__mapDeps([162,15,6,5,4,1,2,3,7,8,9,16,17,18,19,163,20,164,165,166,167,160,161,168,169,14,170,171,172,173,174,175,176,177,159,178]),import.meta.url),"list-item":()=>A(()=>import("./calcite-list-item-D17u9P-_.js"),__vite__mapDeps([179,15,6,5,4,1,2,3,7,8,9,16,17,18,19,163,160,161,20,167,166,165,164,180,173,14,159,181]),import.meta.url),loader:()=>A(()=>import("./calcite-loader-DxqUpD6Z.js"),__vite__mapDeps([158,159,15,6,5,4,1,2,3,7,8,9,16,17,18,19,160,161,20]),import.meta.url),notice:()=>A(()=>import("./calcite-notice-DAIcfVw0.js"),__vite__mapDeps([182,15,6,5,4,1,2,3,7,8,9,16,17,18,183,20,19,166,160,161,167,184,173,14]),import.meta.url)})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Et(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r,state:s}=this.viewModel;return!e&&!!i&&s==="ready"&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return Ne(e==null?void 0:e.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...Ge,...e}}render(){var i;const{state:e}=this.viewModel;return h("div",{class:this.classes(j.base,we.widget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}_renderStickyLoading(){return this.viewModel.state==="querying"?h("div",{class:j.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return h("calcite-loader",{inline:!0,label:""})}_renderLoading(){return h("div",{class:j.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return h("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=Le(this.container)?"chevron-left":"chevron-right";return h("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderRelatedFeature(e){var n;const{itemDescriptionFieldName:i}=this.viewModel,r=e.title;e.description=i&&((n=e.formattedAttributes)==null?void 0:n.global[i]);const s=e.state==="loading";return h("calcite-list-item",{class:this.classes(j.listItem,{[j.listItemHidden]:s}),description:e.description??"",key:e.uid,label:r,onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this._renderChevronIconNode())}_renderShowAllListItem(){var e;return this.displayShowAllButton?h("calcite-list-item",{description:this.featureCountDescription,key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,onCalciteListItemSelect:()=>this.emit("show-all-records")},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var e;return h("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},h("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}_renderFeatureObserver(){return h("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:j.featureObserver,key:"feature-observer"})}_renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return h("calcite-list",null,e.toArray().map(i=>this._renderRelatedFeature(i)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return h("div",{class:this.classes(j.listContainer,{[j.listContainerQuerying]:i==="querying"}),key:"list-container"},e?this._renderList():i==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var e;return h("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},h("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e==null||e.forEach(r=>{this.addHandles(P(()=>[r.title,r.state],()=>this.scheduleRender(),N),i)}),this.scheduleRender()}_setupFeatureElementInfo(){var n;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,s=i.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:r,title:s,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await $t(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};o([l()],V.prototype,"_relatedFeatureIntersectionObserverNode",void 0),o([l({readOnly:!0})],V.prototype,"displayShowAllButton",null),o([l({readOnly:!0})],V.prototype,"displayListItems",null),o([l()],V.prototype,"description",null),o([l({readOnly:!0})],V.prototype,"featureCountDescription",null),o([l()],V.prototype,"headingLevel",void 0),o([l()],V.prototype,"title",null),o([l({type:De})],V.prototype,"viewModel",void 0),o([l(),K("esri/widgets/Feature/t9n/Feature")],V.prototype,"messages",void 0),o([l(),K("esri/t9n/common")],V.prototype,"messagesCommon",void 0),o([l()],V.prototype,"visibleElements",void 0),o([ge("visibleElements")],V.prototype,"castVisibleElements",null),V=o([O("esri.widgets.Feature.FeatureRelationship")],V);const et=V;let Pi=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var ae;const Oi=1,tt="content-view-models",it="relationship-view-models",rt={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let b=ae=class extends ti(le){constructor(t){super(t),this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=_t(this._graphicChanged,Oi,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...rt},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this.addHandles(P(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),N))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Lt(je(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return St(this.graphic)}castAbilities(t){return{...rt,...t}}get isTable(){var t;return((t=this._sourceLayer)==null?void 0:t.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",(t==null?void 0:t.clone())??null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get timeZone(){var t;return((t=this.view)==null?void 0:t.timeZone)??ii}set timeZone(t){this._overrideIfSome("timeZone",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof J&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof J&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof J&&e.previous()}async updateGeometry(){var a;const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!t||!i)return;const s=(a=t==null?void 0:t.attributes)==null?void 0:a[r];if(s==null)return;const n=[s];if(!t.geometry){const c=await Vt({layer:i,graphic:t,outFields:[],objectIds:n,returnGeometry:!0,spatialReference:e}),d=c==null?void 0:c.geometry;d&&(t.geometry=d)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){Ft(i)||(this._error=i,Ve.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(at):typeof t=="string"?this._compileText(new mt({text:t}),0).text:t}_destroyContentViewModels(){this.removeHandles(it),this.removeHandles(tt),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var s;const i=(s=t==null?void 0:t.graphic)==null?void 0:s.getObjectId(),r=e==null?void 0:e.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:r,spatialReference:s,timeZone:n}=this;e==null||e.filter(Boolean).forEach(a=>{t.some(c=>this._matchesFeature(c,a))||t.add(new ae({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:s,timeZone:n,graphic:a}))}),t.forEach(a=>{(e==null?void 0:e.find(d=>this._matchesFeature(a,d)))||t.remove(a)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:s}=t,n=r==null?void 0:r.type;s&&n&&(n==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,e))),n==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),s.set(this._createMediaVMParams(r,e))),n==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:r,relationshipId:s,title:n,description:a}=t,{_sourceLayer:c,graphic:d,map:u}=this;if(!Pt(c))return;const p=new De({displayCount:i,graphic:d,orderByFields:r,relationshipId:s,layer:c,map:u,...this._compileTitleAndDesc({title:n,description:a})});return this.contentViewModels[e]=p,this.addHandles(fe(()=>p.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(p)),it),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:r,map:s,spatialReference:n,view:a,location:c}=this,d=new He({expressionInfo:i,graphic:r,interceptor:ae.interceptor,map:s,spatialReference:n,view:a,location:c});return this.contentViewModels[e]=d,this.addHandles(P(()=>d.contentElementViewModel,()=>this._setExpressionContentVM(d,e),N),tt),t}_compileAttachments(t,e){const{graphic:i}=this,{description:r,title:s}=t;return this.contentViewModels[e]=new We({graphic:i,...this._compileTitleAndDesc({title:s,description:r})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:r,destroyer:s}=t;return this.contentViewModels[e]=new ye({graphic:i,creator:r,destroyer:s}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:n}=this,a=s==null?void 0:s.attributes,c=this._expressionAttributes,d=n.global;return{title:Q({attributes:a,fieldInfoMap:i,globalAttributes:d,expressionAttributes:c,layer:r,text:t}),description:Q({attributes:a,fieldInfoMap:i,globalAttributes:d,expressionAttributes:c,layer:r,text:e})}}_createFieldsVMParams(t,e){const i=this._effectivePopupTemplate,r=this.formattedAttributes,s={...r==null?void 0:r.global,...r==null?void 0:r.content[e]},n=(t==null?void 0:t.fieldInfos)||(i==null?void 0:i.fieldInfos),a=n==null?void 0:n.filter(({fieldName:p})=>!!p&&(pt(p)||q(p)||s.hasOwnProperty(p))),c=i==null?void 0:i.expressionInfos,{description:d,title:u}=t;return{attributes:s,expressionInfos:c,fieldInfos:a,...this._compileTitleAndDesc({title:u,description:d})}}_compileFields(t,e){const i=t.clone(),r=new be(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:r,_fieldInfoMap:s,_effectivePopupTemplate:n,relatedInfos:a,_sourceLayer:c,_expressionAttributes:d}=this,u=this.formattedAttributes,p=(r==null?void 0:r.attributes)??{},{description:m,mediaInfos:f,title:_}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:p,isAggregate:r==null?void 0:r.isAggregate,layer:c,fieldInfoMap:s,formattedAttributes:{...u==null?void 0:u.global,...u==null?void 0:u.content[e]},expressionAttributes:d,mediaInfos:f,popupTemplate:n,relatedInfos:a,...this._compileTitleAndDesc({title:_,description:m})}}_compileMedia(t,e){const i=t.clone(),r=new J(this._createMediaVMParams(t,e));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[e]=r,i}_createTextVMParams(t){var n;const{graphic:e,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(t&&t.text){const a=(e==null?void 0:e.attributes)??{},c=((n=this.formattedAttributes)==null?void 0:n.global)??{};t.text=Q({attributes:a,fieldInfoMap:i,globalAttributes:c,expressionAttributes:s,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new ye(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i,timeZone:r}=this;if(!t)return;const{lastEditInfoEnabled:s}=t,n=e==null?void 0:e.editFieldsInfo;return s&&n?Ot(n,i==null?void 0:i.attributes,r,e):void 0}_compileTitle(t){var c;const{_fieldInfoMap:e,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,n=(r==null?void 0:r.attributes)??{},a=((c=this.formattedAttributes)==null?void 0:c.global)??{};return Q({attributes:n,fieldInfoMap:e,globalAttributes:a,expressionAttributes:s,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;return e?_e({type:"title",value:t==null?void 0:t.title,event:{graphic:e}}):null}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;return e?_e({type:"content",value:t==null?void 0:t.content,event:{graphic:e}}):null}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s}=this,n=this.map,a=this.view,c=this.spatialReference,d=this.location;if(e!==this._featureAbortController||!r)return;await kt({graphic:r,popupTemplate:s,layer:i,spatialReference:c},t);const{content:{value:u},title:{value:p}}=await G({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:m}}=await G({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:Li({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:c,graphic:r,map:n,interceptor:ae.interceptor,view:a,options:t,location:d})});e===this._featureAbortController&&r&&(this._expressionAttributes=m,this._graphicExpressionAttributes={...r.attributes,...m},this._set("formattedAttributes",this._createFormattedAttributes(u)),this._set("title",this._compileTitle(p)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:n,_sourceLayer:a,_fieldInfoMap:c,_graphicExpressionAttributes:d,timeZone:u}=this;i.content[e]=Ae({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:{...d,...t.attributes},layer:a,fieldInfoMap:c,relatedInfos:n,timeZone:u})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:a,_graphicExpressionAttributes:c,timeZone:d}=this;i.content[e]=Ae({fieldInfos:t.fieldInfos,graphic:r,attributes:{...c,...t.attributes},layer:n,fieldInfoMap:a,relatedInfos:s,timeZone:d})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:n,_graphicExpressionAttributes:a,timeZone:c}=this,d=e==null?void 0:e.fieldInfos,u={global:Ae({fieldInfos:d,graphic:i,attributes:a,layer:s,fieldInfoMap:n,relatedInfos:r,timeZone:c}),content:[]};return Array.isArray(t)&&t.forEach((p,m)=>{p.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:p,contentElementIndex:m,formattedAttributes:u}),p.type==="media"&&this._createMediaFormattedAttributes({contentElement:p,contentElementIndex:m,formattedAttributes:u})}),u}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,je(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const n=(s==null?void 0:s.associatedLayer)!=null?await(s==null?void 0:s.associatedLayer.load(i)):s;if(!n||!t)return;const a=e.filter(u=>!!u.fieldName&&q(u.fieldName));if(!(a!=null&&a.length))return;e.forEach(u=>this._configureRelatedInfo(u,n));const c=await yi({relatedInfos:r,layer:n},i);Object.keys(c).forEach(u=>{var f;const p=r.get(u.toString()),m=(f=c[u])==null?void 0:f.value;p&&m&&(p.layerInfo=m.data)});const d=await gi({graphic:t,relatedInfos:r,layer:n},i);Object.keys(d).forEach(u=>{var p;ci((p=d[u])==null?void 0:p.value,r.get(u.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,r=ue(t.fieldName||"");if(!r)return;const{layerId:s,fieldName:n}=r;if(!s)return;const a=i.get(s.toString())||di(s,e);a&&(vi({relatedInfo:a,fieldName:n,fieldInfo:t}),this.relatedInfos.set(s,a))}};b.interceptor=new Pi(Nt,Dt),o([l()],b.prototype,"_error",void 0),o([l()],b.prototype,"_featureAbortController",void 0),o([l({readOnly:!0})],b.prototype,"_effectivePopupTemplate",null),o([l({readOnly:!0})],b.prototype,"_fieldInfoMap",null),o([l({readOnly:!0})],b.prototype,"_sourceLayer",null),o([l()],b.prototype,"abilities",void 0),o([ge("abilities")],b.prototype,"castAbilities",null),o([l({readOnly:!0})],b.prototype,"content",void 0),o([l({readOnly:!0})],b.prototype,"contentViewModels",void 0),o([l()],b.prototype,"description",void 0),o([l({type:Boolean})],b.prototype,"defaultPopupTemplateEnabled",void 0),o([l({readOnly:!0})],b.prototype,"isTable",null),o([l({readOnly:!0})],b.prototype,"state",null),o([l({readOnly:!0})],b.prototype,"formattedAttributes",void 0),o([l({type:Pe,value:null})],b.prototype,"graphic",null),o([l({readOnly:!0})],b.prototype,"lastEditInfo",void 0),o([l({type:ft})],b.prototype,"location",void 0),o([l({readOnly:!0})],b.prototype,"relatedInfos",void 0),o([l()],b.prototype,"spatialReference",null),o([l()],b.prototype,"timeZone",null),o([l({readOnly:!0})],b.prototype,"title",void 0),o([l()],b.prototype,"map",null),o([l({readOnly:!0})],b.prototype,"waitingForContent",null),o([l()],b.prototype,"view",void 0),b=ae=o([O("esri.widgets.Feature.FeatureViewModel")],b);const It=b,T="esri-feature",C={base:T,container:`${T}__size-container`,title:`${T}__title`,main:`${T}__main-container`,btn:`${T}__button`,icon:`${T}__icon`,content:`${T}__content`,contentNode:`${T}__content-node`,contentNodeText:`${T}__content-node--text`,contentElement:`${T}__content-element`,text:`${T}__text`,lastEditedInfo:`${T}__last-edited-info`,fields:`${T}__fields`,fieldHeader:`${T}__field-header`,fieldData:`${T}__field-data`,fieldDataDate:`${T}__field-data--date`,loadingSpinnerContainer:`${T}__loading-container`},ki=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>ut(i)&&!i.destroyed?h("div",{class:C.contentNode,key:i},i.render()):i instanceof HTMLElement?h("div",{afterCreate:this._attachToNode,bind:i,class:C.contentNode,key:i}):Wt(i)?h("div",{afterCreate:this._attachToNode,bind:i.domNode,class:C.contentNode,key:i}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=o([O("esri.widgets.Feature.support.FeatureContentMixin")],e),e};var Se;const st={title:!0,content:!0,lastEditedInfo:!0},nt="relationship-handles";let $=Se=class extends ki(B){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...st},this.viewModel=new It}initialize(){this.addHandles(P(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),N))}loadDependencies(){return ve({notice:()=>A(()=>import("./calcite-notice-DAIcfVw0.js"),__vite__mapDeps([182,15,6,5,4,1,2,3,7,8,9,16,17,18,183,20,19,166,160,161,167,184,173,14]),import.meta.url),loader:()=>A(()=>import("./calcite-loader-DxqUpD6Z.js"),__vite__mapDeps([158,159,15,6,5,4,1,2,3,7,8,9,16,17,18,19,160,161,20]),import.meta.url)})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...st,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}render(){const{state:t}=this.viewModel,e=h("div",{class:C.container,key:"container"},this._renderTitle(),t==="error"?this._renderError():t==="loading"?this._renderLoading():this._renderContentContainer());return h("div",{class:this.classes(C.base,we.widget)},e)}_renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return h("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},i.title?h("div",{key:"error-title",slot:"title"},t.errorMessage):null,h("div",{key:"error-message",slot:"message"},e.loadingError))}_renderLoading(){return h("div",{class:C.loadingSpinnerContainer,key:"loading-container"},h("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:t}=this;return t.content?h("div",{class:C.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:t,title:e}=this;return t.title?h(lt,{class:C.title,innerHTML:e,level:this.headingLevel}):null}_renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?h("div",{class:C.contentNode,key:`${e}-content-elements`},t.map(this._renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:h("div",{class:this.classes(C.contentNode,C.contentNodeText),key:`${e}-content`},i.render())}return this.renderNodeContent(t)}_renderContentElement(t,e){var r;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((r=i.content)!=null&&r[t.type]))return null;switch(t.type){case"attachments":return this._renderAttachments(e);case"custom":return this._renderCustom(t,e);case"fields":return this._renderFields(e);case"media":return this._renderMedia(e);case"text":return this._renderText(t,e);case"expression":return this._renderExpression(e);case"relationship":return this._renderRelationship(e);default:return null}}_renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:r}=e.viewModel;return i==="loading"||r.length>0?h("div",{class:this.classes(C.contentElement),key:this._buildKey("attachments-element",t)},e.render()):null}_renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?h("div",{class:C.contentElement,key:this._buildKey("relationship-element",t)},e.render()):null}_renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:h("div",{class:C.contentElement,key:this._buildKey("expression-element",t)},e.render())}_renderCustom(t,e){const{creator:i}=t,r=this._contentWidgets[e];return!r||r.destroyed?null:i?h("div",{class:C.contentElement,key:this._buildKey("custom-element",e)},r.render()):null}_renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:h("div",{class:C.contentElement,key:this._buildKey("fields-element",t)},e.render())}_renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:h("div",{class:C.contentElement,key:this._buildKey("media-element",t)},e.render())}_renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:r,user:s}=i,n=i.type==="edit"?s?e.lastEditedByUser:e.lastEdited:s?e.lastCreatedByUser:e.lastCreated,a=Ne(n,{date:r,user:s});return h("div",{class:this.classes(C.lastEditedInfo,C.contentElement),key:"edit-info-element"},a)}_renderText(t,e){const i=t.text,r=this._contentWidgets[e];return!r||r.destroyed?null:i?h("div",{class:this.classes(C.contentElement,C.text),key:this._buildKey("text-element",e)},r.render()):null}_buildKey(t,...e){var i,r;return`${t}__${((r=(i=this.viewModel)==null?void 0:i.graphic)==null?void 0:r.uid)||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(nt),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([fe(()=>t,"select-record",({featureViewModel:r})=>{e&&(r.abilities={relationshipContent:!0},e.push(new Se({flowItems:e,viewModel:r,visibleElements:i})))}),fe(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:r}=t;r.showAllEnabled=!0;const s=new et({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(s),e.push(s)})],nt)}_setupContentWidgets(){var s;this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=(s=this.viewModel)==null?void 0:s.content,{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,a)=>{if(n.type==="attachments"&&(this._contentWidgets[a]=new si({displayType:n.displayType,headingLevel:e.title&&t<6?t+1:t,viewModel:r[a]})),n.type==="fields"&&(this._contentWidgets[a]=new yt({viewModel:r[a]})),n.type==="media"&&(this._contentWidgets[a]=new gt({viewModel:r[a]})),n.type==="text"&&(this._contentWidgets[a]=new pe({viewModel:r[a]})),n.type==="custom"&&(this._contentWidgets[a]=new pe({viewModel:r[a]})),n.type==="expression"&&(this._contentWidgets[a]=new Vi({viewModel:r[a]})),n.type==="relationship"){const c=new et({viewModel:r[a]});this._addFeatureRelationshipHandles(c),this._contentWidgets[a]=c}},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new pe({viewModel:n}))}this.scheduleRender()}};o([l()],$.prototype,"graphic",null),o([l()],$.prototype,"defaultPopupTemplateEnabled",null),o([l()],$.prototype,"flowItems",void 0),o([l()],$.prototype,"headingLevel",void 0),o([l({readOnly:!0})],$.prototype,"isTable",null),o([l()],$.prototype,"icon",null),o([l()],$.prototype,"label",null),o([l(),K("esri/widgets/Feature/t9n/Feature")],$.prototype,"messages",void 0),o([l(),K("esri/t9n/common")],$.prototype,"messagesCommon",void 0),o([l()],$.prototype,"spatialReference",null),o([l()],$.prototype,"timeZone",null),o([l({readOnly:!0})],$.prototype,"title",null),o([l()],$.prototype,"visibleElements",void 0),o([ge("visibleElements")],$.prototype,"castVisibleElements",null),o([l()],$.prototype,"map",null),o([l()],$.prototype,"view",null),o([l({type:It})],$.prototype,"viewModel",void 0),$=Se=o([O("esri.widgets.Feature")],$);const Ni=$,Dr=Object.freeze(Object.defineProperty({__proto__:null,default:Ni},Symbol.toStringTag,{value:"Module"}));export{Dr as F,Ni as W,It as Y,ki as n,C as t};
