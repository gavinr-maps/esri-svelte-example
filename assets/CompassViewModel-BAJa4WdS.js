import{M as h,aw as d,r as o,m as e,a as p,g as l}from"./Accessor-BHnuXKD2.js";import{P as r,d as s}from"./reactiveUtils-BR0C1Kq4.js";import{t as u}from"./GoTo-BsXOAO95.js";function c(){const t=h("mapview-essential-goto-duration");return t==null?t:d(t)}function w(t){var i,n;return((i=t==null?void 0:t.spatialReference)==null?void 0:i.isWebMercator)||((n=t==null?void 0:t.spatialReference)==null?void 0:n.isGeographic)||!1}let a=class extends u(l){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(r)}destroy(){this.view=null}get canShowNorth(){return w(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,i;(t=this.view)!=null&&t.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:c()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?s(()=>t==null?void 0:t.rotation,this._updateForRotation,r):s(()=>t==null?void 0:t.camera,this._updateForCamera,r))}_watchForView(t){this.addHandles(s(()=>this.view,this._updateRotationWatcher,t))}};o([e({readOnly:!0})],a.prototype,"canShowNorth",null),o([e({readOnly:!0})],a.prototype,"orientation",void 0),o([e({readOnly:!0})],a.prototype,"state",null),o([e()],a.prototype,"view",void 0),a=o([p("esri.widgets.Compass.CompassViewModel")],a);const v=a;export{v as p,c as r};
