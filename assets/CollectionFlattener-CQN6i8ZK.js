import{r as n}from"./tslib.es6-B3Jf3DVX.js";import{V as c}from"./Collection-CEdjem1-.js";import{sync as f}from"./reactiveUtils-C5zUhJQJ.js";import{m as l,a as p}from"./subclass-BZA_h8Db.js";import{k as u}from"./Accessor-BLX9ikPh.js";let s=class extends c{constructor(o){super(o),this.getCollections=null}initialize(){this.addHandles(u(()=>this._refresh(),f))}destroy(){this.getCollections=null}_refresh(){const o=this.getCollections!=null?this.getCollections():null;if(o==null)return void this.removeAll();let e=0;for(const r of o)r!=null&&(e=this._processCollection(e,r));this.splice(e,this.length)}_createNewInstance(o){return new c(o)}_processCollection(o,e){if(!e)return o;const r=this.itemFilterFunction??(t=>!!t);for(const t of e)if(t){if(r(t)){const i=this.indexOf(t,o);i>=0?i!==o&&this.reorder(t,o):this.add(t,o),++o}if(this.getChildrenFunction){const i=this.getChildrenFunction(t);if(Array.isArray(i))for(const h of i)o=this._processCollection(o,h);else o=this._processCollection(o,i)}}return o}};n([l()],s.prototype,"getCollections",void 0),n([l()],s.prototype,"getChildrenFunction",void 0),n([l()],s.prototype,"itemFilterFunction",void 0),s=n([p("esri.core.CollectionFlattener")],s);const F=s;export{F as n};
