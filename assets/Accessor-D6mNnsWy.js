import{h as B,L as xt,k as g,ax as h,j as $t,au as $,ay as Gt,az as Ht,a as Wt,aA as p,ao as et,aB as Yt,V as Kt,T as ot,aC as Zt,c as Jt,n as wt,l as Qt,aD as bt,aj as Et,aE as Xt,y as te,b as ee,aF as se,a0 as at,aG as re}from"./subclass-BR3PhgZG.js";const lt=new WeakMap;function ne(e,t,s=!1){const r=`ðŸ›‘ DEPRECATED - ${t}`;if(!s)return void e.warn(r);let n=lt.get(e);n||(n=new Set,lt.set(e,n)),n.has(t)||(n.add(t),e.warn(r))}function ie(e,t,s={}){if(B("esri-deprecation-warnings")){const{moduleName:r}=s;st(e,`Function: ${(r?r+"::":"")+t+"()"}`,s)}}function os(e,t,s={}){if(B("esri-deprecation-warnings")){const{moduleName:r}=s;st(e,`Property: ${(r?r+"::":"")+t}`,s)}}function as(e,t,s={}){B("esri-deprecation-warnings")&&st(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...s})}function st(e,t,s={}){if(B("esri-deprecation-warnings")){const{replacement:r,version:n,see:i,warnOnce:a}=s;let o=t;r&&(o+=`
	ðŸ› ï¸ Replacement: ${r}`),n&&(o+=`
	âš™ï¸ Version: ${n}`),i&&(o+=`
	ðŸ”— See ${i} for more details.`),ne(e,o,a)}}function ls(e){const t=[];return function*(){yield*t;for(const s of e)t.push(s),yield s}}function cs(e,t){for(const s of e)if(s!=null&&t(s))return s}function ct(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let rt=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(s=>{t+=s.length}),t}add(t,s){if(ct(t)){const r=this._getOrCreateGroup(s);for(const n of t)ut(n)&&r.push(n)}else ut(t)&&this._getOrCreateGroup(s).push(t);return this}forEach(t,s){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&s&&r.forEach(s)}}has(t){return this._groups.has(k(t))}remove(t){if(typeof t!="string"&&ct(t)){for(const s of t)this.remove(s);return this}return this.has(t)?(ht(this._getGroup(t)),this._groups.delete(k(t)),this):this}removeAll(){return this._groups.forEach(ht),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const s=[];return this._groups.set(k(t),s),s}_getGroup(t){return this._groups.get(k(t))}};function k(e){return e||"_default_"}function ht(e){for(const t of e)t instanceof rt?t.removeAll():t.remove()}function ut(e){return e!=null&&(!!e.remove||e instanceof rt)}function us(e,t){if(e==null)throw new Error(t??"value is None")}function oe(e){return e==null||e.destroy(),null}function fs(e){return e==null||e.dispose(),null}function ae(e){return e==null||e.remove(),null}function ds(e){return e==null||e.abort(),null}function _s(e){return e==null||e.release(),null}function ps(e,t,s){return e!=null&&t!=null?s!=null?s(e,t):e.equals(t):e===t}function gs(e,t){return e==null?void 0:e[t]}function ms(e,t){let s;return e.some((r,n)=>(s=t(r,n),s!=null)),s??void 0}function le(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function ce(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let j=class G{constructor(t,s,r,n=1,i=0){if(this._ctor=t,this._acquireFunction=s,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(i),this._initialSize=i,this._ctor)for(let a=0;a<i;a++)this._pool[a]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let s;if(G.test.disabled)s=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}s=this._pool.pop()}return this._acquireFunction?this._acquireFunction(s,...t):ce(s)&&s.acquire(...t),s}release(t){t&&!G.test.disabled&&(this._releaseFunction?this._releaseFunction(t):le(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let s=t;s<this._pool.length;++s){const r=this._pool[s];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};j.test={disabled:!1};let he=class{constructor(t,s){this._observers=t,this._observer=s}remove(){xt(this._observers,this._observer)}},ue=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return fe;this._observers==null&&(this._observers=[]);const s=this._observers;let r=!1,n=!1;const i=s.length;for(let a=0;a<i;++a){const o=s[a];if(o.destroyed)n=!0;else if(o===t){r=!0;break}}return r||(s.push(t),n&&this._removeDestroyedObservers()),new he(s,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const s=t.length;let r=0;for(let n=0;n<s;++n){for(;n+r<s&&t[n+r].destroyed;)++r;if(r>0){if(!(n+r<s))break;t[n]=t[n+r]}}t.length=s-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const s of t)s.onCommitted();this._observers=null}}};const fe=g();var u;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(u||(u={}));const $s=u.USER+1;function de(e){switch(e){case"defaults":return u.DEFAULTS;case"service":return u.SERVICE;case"portal-item":return u.PORTAL_ITEM;case"web-scene":return u.WEB_SCENE;case"web-map":return u.WEB_MAP;case"link-chart":return u.LINK_CHART;case"user":return u.USER;default:return null}}function H(e){switch(e){case u.DEFAULTS:return"defaults";case u.SERVICE:return"service";case u.PORTAL_ITEM:return"portal-item";case u.WEB_SCENE:return"web-scene";case u.WEB_MAP:return"web-map";case u.LINK_CHART:return"link-chart";case u.USER:return"user"}}function ws(e){return H(e)}let ft=class extends ue{constructor(t,s){super(),this.propertyName=t,this.metadata=s,this._accessed=null,this._handles=null,this.flags=0,this.flags=h.Dirty|(s.nonNullable?h.NonNullable:0)|(s.hasOwnProperty("value")?h.HasDefaultValue:0)|(s.get===void 0?h.DepTrackingInitialized:0)|(s.dependsOn===void 0?h.AutoTracked:0)}destroy(){this.flags&h.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){$t(this);const s=t.store,r=this.propertyName,n=this.flags,i=s.get(r);if(n&h.Computing||~n&h.Dirty&&s.has(r))return i;this.flags|=h.Computing;const a=t.host;let o;n&h.AutoTracked?o=$(this,this.metadata.get,a):(Gt(a,this),o=this.metadata.get.call(a)),s.set(r,o,u.COMPUTED);const l=s.get(r);return l===i?this.flags&=~h.Dirty:Ht(this.commit,this),this.flags&=~h.Computing,l}onObservableAccessed(t){t!==this&&(this._accessed??(this._accessed=new Set),this._accessed.add(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=h.DepTrackingInitialized,this._accessed!=null&&(this._handles??(this._handles=[]),this._accessed.forEach(t=>{this._handles.push(t.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~h.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let s=0;s<t.length;++s)t[s].remove();t.length=0}}onInvalidated(){~this.flags&h.Overridden&&(this.flags|=h.Dirty);const t=this._observers;if(t&&t.length>0)for(const s of t)s.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const s=t.slice();for(const r of s)r.onCommitted()}}},_e=class At{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const s=new At;return this._values.forEach((r,n)=>{t&&t.has(n)||s.set(n,Wt(r))}),s}get(t){return this._values.get(t)}originOf(){return u.USER}keys(){return[...this._values.keys()]}set(t,s){this._values.set(t,s)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function C(e,t,s){return e!==void 0}function dt(e,t,s,r){return e!==void 0&&(!(s==null&&e.flags&h.NonNullable)||(r.lifecycle,p.INITIALIZING,!1))}let pe=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=p.INITIALIZING,this.store=new _e,this._origin=u.USER;const s=this.host.constructor.__accessorMetadata__;for(const r in s){const n=new ft(r,s[r]);this.propertiesByName.set(r,n)}this.metadata=s}initialize(){this.lifecycle=p.CONSTRUCTING}constructed(){this.lifecycle=p.CONSTRUCTED}destroy(){this.lifecycle=p.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==p.INITIALIZING}get(t){const s=this.propertiesByName.get(t);if(s.metadata.get)return s.getComputed(this);$t(s);const r=this.store;return r.has(t)?r.get(t):s.metadata.value}originOf(t){const s=this.store.originOf(t);if(s===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&h.HasDefaultValue)return"defaults"}return H(s)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const s=this.propertiesByName.get(t);if(C(s))return this.store.has(t)?this.store.get(t):s.metadata.value}internalSet(t,s){const r=this.propertiesByName.get(t);C(r)&&this._internalSet(r,s)}getDependsInfo(t,s,r){const n=this.propertiesByName.get(s);if(!C(n))return"";const i=new Set,a=$({onObservableAccessed:l=>i.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=n.metadata.get)==null?void 0:l.call(t)});let o=`${r}${t.declaredClass.split(".").pop()}.${s}: ${a}
`;if(i.size===0)return o;r+="  ";for(const l of i)l instanceof ft&&(o+=`${r}${l.propertyName}: undefined
`);return o}setAtOrigin(t,s,r){const n=this.propertiesByName.get(t);if(C(n))return this._setAtOrigin(n,s,r)}isOverridden(t){const s=this.propertiesByName.get(t);return s!==void 0&&!!(s.flags&h.Overridden)}clearOverride(t){const s=this.propertiesByName.get(t);s&&s.flags&h.Overridden&&(s.flags&=~h.Overridden,s.notifyChange())}override(t,s){const r=this.propertiesByName.get(t);if(!dt(r,t,s,this))return;const n=r.metadata.cast;if(n){const i=this._cast(n,s),{valid:a,value:o}=i;if(F.release(i),!a)return;s=o}r.flags|=h.Overridden,this._internalSet(r,s)}set(t,s){const r=this.propertiesByName.get(t);if(!dt(r,t,s,this))return;const n=r.metadata.cast;if(n){const a=this._cast(n,s),{valid:o,value:l}=a;if(F.release(a),!o)return;s=l}const i=r.metadata.set;i?i.call(this.host,s):this._internalSet(r,s)}setDefaultOrigin(t){this._origin=de(t)}getDefaultOrigin(){return H(this._origin)}notifyChange(t){const s=this.propertiesByName.get(t);s!==void 0&&s.notifyChange()}invalidate(t){const s=this.propertiesByName.get(t);s!==void 0&&s.invalidate()}commit(t){const s=this.propertiesByName.get(t);s!==void 0&&s.commit()}_internalSet(t,s){const r=this.lifecycle!==p.INITIALIZING?this._origin:u.DEFAULTS;this._setAtOrigin(t,s,r)}_setAtOrigin(t,s,r){const n=this.store,i=t.propertyName;n.has(i,r)&&et(s,n.get(i))&&~t.flags&h.Overridden&&r===n.originOf(i)||(t.invalidate(),n.set(i,s,r),t.commit(),Yt(this.host,t))}_cast(t,s){const r=F.acquire();return r.valid=!0,r.value=s,t&&(r.value=t.call(this.host,s,r)),r}},ge=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const F=new j(ge);let me;function ve(){return me}var _t;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(_t||(_t={}));function ye(e){e.length=0}let St=class{constructor(t=50,s=50){this._pool=new j(Array,void 0,ye,s,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return V.acquire()}static release(t){return V.release(t)}static prune(){V.prune()}};const V=new St(100);let $e=class extends j{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const s=super.acquire(...t);return this._set.delete(s),s}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const N=[];function Tt(e){N.push(e),N.length===1&&queueMicrotask(()=>{const t=N.slice();N.length=0;for(const s of t)s()})}let Ot=class{constructor(t,s=30){this.name=t,this._counter=0,this._samples=new Array(s)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,s)=>t-s)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,s)=>t+s,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var W;(function(e){const t=(i,a,o,l)=>{let f=a,c=a;const _=o>>>1,d=i[f-1];for(;c<=_;){c=f<<1,c<o&&l(i[c-1],i[c])<0&&++c;const b=i[c-1];if(l(b,d)<=0)break;i[f-1]=b,f=c}i[f-1]=d},s=(i,a)=>i<a?-1:i>a?1:0;function r(i,a,o,l){a===void 0&&(a=0),o===void 0&&(o=i.length),l===void 0&&(l=s);for(let c=o>>>1;c>a;c--)t(i,c,o,l);const f=a+1;for(let c=o-1;c>a;c--){const _=i[a];i[a]=i[c],i[c]=_,t(i,f,c,l)}}function*n(i,a,o,l){a===void 0&&(a=0),o===void 0&&(o=i.length),l===void 0&&(l=s);for(let c=o>>>1;c>a;c--)t(i,c,o,l),yield;const f=a+1;for(let c=o-1;c>a;c--){const _=i[a];i[a]=i[c],i[c]=_,t(i,f,c,l),yield}}e.sort=r,e.iterableSort=n})(W||(W={}));const pt=W,we=1.5,be=1.1;let kt=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Kt,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>gt(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const s=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&s.push(n)}return s}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,s){const r=this.data.indexOf(t,s);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let s=t;s<this._length;++s)this.data[s]=this._deallocator(this.data[s]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,s=t.length){for(let r=0;r<s;r++)this.data[this._length++]=t[r]}fill(t,s){for(let r=0;r<s;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,gt(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const s=ot(this.data,t,this.length,this._hint);if(s!==-1)return this.data.splice(s,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(ot(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,s=t.length,r){this.length=Zt(this.data,t,this.length,s,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,s){if(t>=this.length||s>=this.length||t===s)return;const r=this.data[t];this.data[t]=this.data[s],this.data[s]=r}sort(t){pt.sort(this.data,0,this.length,t)}iterableSort(t){return pt.iterableSort(this.data,0,this.length,t)}some(t,s){for(let r=0;r<this.length;++r)if(t.call(s,this.data[r],r,this.data))return!0;return!1}find(t,s){for(let r=0;r<this.length;++r){const n=this.data[r];if(t.call(s,n,r))return n}}filterInPlace(t,s){let r=0;for(let n=0;n<this._length;++n){const i=this.data[n];t.call(s,i,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=i,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,s){const{data:r,length:n}=this;for(let i=0;i<n;++i)t.call(s,r[i],i,r)}forEach(t,s){this.data.slice(0,this.length).forEach(t,s)}map(t,s){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(s,this.data[n],n,this.data);return r}reduce(t,s){let r=s;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const s=this.length,r=this.data;for(let n=0;n<s;++n)if(r[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function gt(e){e.data.length>we*e.length&&(e.data.length=Math.floor(e.length*be))}function Ee(e){return{setTimeout:(t,s)=>{const r=e.setTimeout(t,s);return g(()=>e.clearTimeout(r))}}}const Ae=Ee(globalThis);function Ct(e){return Se(e)||Nt(e)}function Se(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function Nt(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function Dt(e,t,s){if(!Ct(e))throw new TypeError("target is not a Evented or EventTarget object");return Nt(e)?Te(e,t,s):e.on(t,s)}function Te(e,t,s,r){if(Array.isArray(t)){const n=t.slice();for(const i of n)e.addEventListener(i,s,r);return g(()=>{for(const i of n)e.removeEventListener(i,s,r)})}return e.addEventListener(t,s,r),g(()=>e.removeEventListener(t,s,r))}function It(e,t,s){if(!Ct(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,s);const r=Dt(e,t,n=>{r.remove(),s.call(e,n)});return r}function Cs(e,t,s){let r=!1;const n=Dt(e,t,i=>{r||s.call(e,i)});return{resume(){r=!1},pause(){r=!0},remove(){n.remove()}}}function A(e="Aborted"){return new Jt("AbortError",e)}function Rt(e,t="Aborted"){if(qt(e))throw A(t)}function z(e){return e instanceof AbortSignal?e:e==null?void 0:e.signal}function qt(e){const t=z(e);return t!=null&&t.aborted}function Ns(e){if(L(e))throw e}function Ds(e){if(!L(e))throw e}function R(e,t){const s=z(e);if(s!=null){if(!s.aborted)return It(s,"abort",()=>t());t()}}function Is(e,t){const s=z(e);if(s!=null)return Rt(s),It(s,"abort",()=>t(A()))}function Rs(e,t){return z(t)==null?e:new Promise((s,r)=>{let n=R(t,()=>r(A()));const i=()=>{n=ae(n)};e.then(i,i),e.then(s,r)})}function L(e){return(e==null?void 0:e.name)==="AbortError"}async function qs(e){try{return await e}catch(t){if(!L(t))throw t;return}}async function Us(e,t=wt.getLogger("esri")){try{return await e}catch(s){L(s)||t.error(s)}}async function Oe(e){if(!e)return;if(typeof e.forEach!="function"){const s=Object.keys(e),r=s.map(a=>e[a]),n=await Oe(r),i={};return s.map((a,o)=>i[a]=n[o]),i}const t=e;return Promise.allSettled(t).then(s=>Array.from(t,(r,n)=>{const i=s[n];return i.status==="fulfilled"?{promise:r,value:i.value}:{promise:r,error:i.reason}}))}async function Ms(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Ps(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function ke(e,t=void 0,s){const r=new AbortController;return R(s,()=>r.abort()),new Promise((n,i)=>{let a=setTimeout(()=>{a=0,n(t)},e);R(r,()=>{a&&(clearTimeout(a),i(A()))})})}function Bs(e,t){const s=new AbortController,r=setTimeout(()=>s.abort(),t);return R(e,()=>{s.abort(),clearTimeout(r)}),{...e,signal:s.signal}}function Ce(e){return e&&typeof e.then=="function"}function mt(e){return Ce(e)?e:Promise.resolve(e)}function js(e,t=-1){let s,r,n,i,a=null;const o=(...l)=>{if(s){r=l,i&&i.reject(A()),i=Y();const d=i.promise;if(a){const b=a;a=null,b.abort()}return d}if(n=i||Y(),i=null,t>0){const d=new AbortController;s=mt(e(...l,d.signal));const b=s;ke(t).then(()=>{s===b&&(i?d.abort():a=d)})}else s=1,s=mt(e(...l));const f=()=>{const d=r;r=n=s=a=null,d!=null&&o(...d)},c=s,_=n;return c.then(f,f),c.then(_.resolve,_.reject),_.promise};return o}function Y(){let e,t;const s=new Promise((n,i)=>{e=n,t=i}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,i)=>Ae.setTimeout(()=>r.reject(i),n),r.promise=s,r}function zs(e,t){return e.then(t,t)}async function Ls(e){await Promise.resolve(),Rt(e)}function Fs(e){return e}function Vs(e){return 1e3*e}function xs(e){return e}function Gs(e){return .001*e}let Ne=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},De=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},K=0,Z=0;const S={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},J=["prepare","preRender","render","postRender","update","finish"],Q=[],w=new kt;class Ie{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}function Re(){y!=null&&(cancelAnimationFrame(y),y=requestAnimationFrame(nt))}const q={frameTasks:w,willDispatch:!1,clearFrameTasks:Ue,dispatch:Mt,executeFrameTasks:Me,reschedule:Re};function qe(e){const t=new De(e);return Q.push(t),q.willDispatch||(q.willDispatch=!0,Tt(Mt)),t}function Ys(e){const t=new Ne(e);return w.push(t),y==null&&(K=performance.now(),y=requestAnimationFrame(nt)),new Ie(t)}let y=null;function Ue(e=!1){w.forAll(t=>{t.removed=!0}),e&&Ut()}function Ks(e){Z=Math.max(0,e)}function nt(){const e=performance.now();y=null,y=w.length>0?requestAnimationFrame(nt):null,q.executeFrameTasks(e)}function Me(e){const t=e-K;K=e;const s=Z>0?Z:1e3/60,r=Math.max(0,t-s);S.time=e,S.frameDuration=s-r;for(let n=0;n<J.length;n++){const i=performance.now(),a=J[n];w.forAll(o=>{var l;o.paused||o.removed||(n===0&&o.ticks++,o.phases[a]&&(S.elapsedFrameTime=performance.now()-e,S.deltaTime=o.ticks===0?0:t,(l=o.phases[a])==null||l.call(o,S)))}),je[n].record(performance.now()-i)}Ut(),ze.record(performance.now()-e)}const D=new kt;function Ut(){w.forAll(e=>{e.removed&&D.push(e)}),w.removeUnorderedMany(D.data,D.length),D.clear()}function Mt(){for(;Q.length;){const e=Q.shift();e.isActive&&e.callback()}q.willDispatch=!1}function Pe(e=1,t){const s=Y(),r=()=>{qt(t)?s.reject(A()):e===0?s():(--e,Tt(()=>r()))};return r(),s.promise}function Be(e){return Pe(1,e)}async function Zs(){await Be(),await new Promise(e=>requestAnimationFrame(e))}const je=J.map(e=>new Ot(e)),ze=new Ot("total");function Le(e,t){for(const s of e.entries())if(t(s[0]))return!0;return!1}function vt(e,t){if(!t)return e;for(const s of t)s!=null&&e.add(s);return e}function Js(e,t){return t!=null&&e.add(t),e}function Fe(e,t){const s=new Set;return vt(s,e),vt(s,t),s}function Ve(e,t){const s=new Set;for(const r of t)e.has(r)&&s.add(r);return s}function Qs(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const s of e)if(!t.has(s))return!1;return!0}function Xs(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}function xe(e,t){const s=new Set(e);for(const r of t)s.delete(r);return s}function tr(e,t){return xe(Fe(e,t),Ve(e,t))}function er(e){let t;for(t of e);return t}let Ge=0;const sr=0;function x(){return++Ge}let it=class{constructor(t){this._accessed=new Set,this._handles=[],this._observerObject=new He(t),yt.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;yt.unregister(this._observerObject),this._accessed.clear(),(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){this._accessed.add(t)}onTrackingEnd(){const t=this._handles,s=this._observerObject;this._accessed.forEach(r=>{t.push(r.observe(s))}),this._accessed.clear()}clear(){const t=this._handles;for(let s=0;s<t.length;++s)t[s].remove();t.length=0}};class He{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=We}}const yt=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function We(){}let E=!1;const U=[];function Pt(e,t){let s=new it(i),r=null,n=!1;function i(){if(!s||n)return;if(E)return void jt(i);const o=r;s.clear(),E=!0,n=!0,r=$(s,e),n=!1,E=!1,t(r,o),zt()}function a(){s&&(s.destroy(),s=null,r=null)}return n=!0,r=$(s,e),n=!1,g(a)}function Bt(e,t){let s=new it(n),r=null;function n(){t(r,a)}function i(){s&&(s.destroy(),s=null),r=null}function a(){return s?(s.clear(),r=$(s,e),r):null}return a(),g(i)}function nr(e){let t=new it(r),s=!1;function r(){t&&!s&&(E?jt(r):(t.clear(),E=!0,s=!0,$(t,e),s=!1,E=!1,zt()))}function n(){t&&(t.destroy(),t=null)}return s=!0,$(t,e),s=!1,g(n)}function jt(e){U.includes(e)||U.unshift(e)}function zt(){for(;U.length;)U.pop()()}var T;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(T||(T={}));let O=class{constructor(){this.uid=x(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,s,r,n,i){return this.pool.acquire(T.Untracked,t,s,r,n,i,et)}static acquireTracked(t,s,r,n){return this.pool.acquire(T.Tracked,t,s,r,null,null,n)}notify(t,s){this.type===T.Untracked?this.callback.call(this.target,t,s,this.path,this.target):this.callback.call(null,t,s,void 0,void 0)}acquire(t,s,r,n,i,a,o){this.uid=x(),this.removed=!1,this.type=t,this.oldValue=s,this.callback=r,this.getValue=n,this.target=i,this.path=a,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=x(),this.removed=!0}};O.pool=new $e(O);const I=new St,v=new Set;let M;function P(e){v.delete(e),v.add(e),M||(M=qe(Ze))}function Ye(e){if(e.removed)return;const t=e.oldValue,s=e.getValue();e.equals(t,s)||(e.oldValue=s,e.notify(s,t))}function Ke(e){for(const t of v.values())t.target===e&&(t.removed=!0)}function Ze(){let e=10;for(;M&&e--;){M=null;const t=Je(),s=I.acquire();for(const r of t){const n=r.uid;Ye(r),n===r.uid&&r.removed&&s.push(r)}for(const r of v)r.removed&&(s.push(r),v.delete(r));for(const r of s)O.pool.release(r);I.release(s),I.release(t),X.forEach(r=>r())}}function Je(){const e=I.acquire();e.length=v.size;let t=0;for(const s of v)e[t]=s,++t;return v.clear(),e}const X=new Set;function or(e){return X.add(e),g(()=>X.delete(e))}function Qe(e,t,s){let r=bt(e,t,s,(n,i,a)=>{let o,l,f=Bt(()=>Et(n,i),(c,_)=>{var d;((d=n.__accessor__)==null?void 0:d.lifecycle)===p.DESTROYED||o&&o.uid!==l?r.remove():(o||(o=O.acquireUntracked(c,a,_,n,i),l=o.uid),P(o))});return g(()=>{f.remove(),o&&(o.uid!==l||o.removed||(o.removed=!0,P(o)),o=null),r=f=null})});return r}function Xe(e,t,s){const r=bt(e,t,s,(n,i,a)=>{let o=!1;return Pt(()=>Et(n,i),(l,f)=>{n.__accessor__.lifecycle!==p.DESTROYED?o||(o=!0,et(f,l)||a.call(n,l,f,i,n),o=!1):r.remove()})});return r}function ts(e,t,s,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==p.DESTROYED?r?Xe(e,t,s):Qe(e,t,s):g()}function es(e,t,s){let r,n,i=Bt(e,(a,o)=>{r&&r.uid!==n?i.remove():(r||(r=O.acquireTracked(a,t,o,s),n=r.uid),P(r))});return g(()=>{i.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,P(r)),r=null),i=null})}function ss(e,t,s){let r=!1;return Pt(e,(n,i)=>{r||(r=!0,s(i,n)||t(n,i),r=!1)})}function ar(e,t,s=!1,r=Qt){return s?ss(e,t,r):es(e,t,r)}function lr(e){return Le(v,t=>t.oldValue===e)}var Lt,Ft;function rs(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const m=Symbol("Accessor-Handles"),tt=Symbol("Accessor-Initialized");let ns=class Vt{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:s,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const i=this;class a extends i{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}Xt(a.prototype);for(const o in t){const l=t[o];a.prototype[o]=typeof l=="function"?function(...f){const c=this.inherited;let _;this.inherited=function(...d){if(i.prototype[o])return i.prototype[o].apply(this,d)};try{_=l.apply(this,f)}catch(d){throw this.inherited=c,d}return this.inherited=c,_}:t[o]}for(const o in s){const l=rs(s[o]);te(l)(a.prototype,o)}return ee(r)(a)}constructor(...t){var r;if(this[Lt]=null,this[Ft]=!1,this.constructor===Vt)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const s=new pe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:s}),t.length>0&&(s.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,s=t.ctorArgs;t.initialize(),s&&(this.set(s),t.ctorArgs=null),t.constructed(),this.initialize(),this[tt]=!0}initialize(){}[se](){this[m]=oe(this[m])}destroy(){var t;this.destroyed||(Ke(this),this.__accessor__.destroy(),(t=ve())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[tt]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===p.DESTROYED||!1}commitProperty(t){at(this,t)}get(t){return ie(wt.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),at(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,s){return re(this,t,s),this}watch(t,s,r){return ts(this,t,s,r)}addHandles(t,s){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const n of r)n.remove();return}(this[m]??(this[m]=new rt)).add(t,s)}removeHandles(t){var s;(s=this[m])==null||s.remove(t)}removeAllHandles(){var t;(t=this[m])==null||t.removeAll()}removeHandlesReference(t){var s;(s=this[m])==null||s.removeReference(t)}hasHandles(t){var s;return((s=this[m])==null?void 0:s.has(t))===!0}_override(t,s){s===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,s)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,s){s==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,s)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,s){return this.__accessor__.internalSet(t,s),this}};Lt=m,Ft=tt;const cr=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"}));export{Ot as $,de as A,_s as B,ps as C,Ls as D,ke as E,ls as F,cs as G,Fs as H,Le as I,Ms as J,Dt as K,Y as L,H as M,Tt as N,os as O,Ps as P,Ds as Q,ie as R,ns as S,rt as T,Ys as U,Vs as V,xs as W,$s as X,St as Y,Pe as Z,ct as _,Ns as a,mt as a0,ue as a1,ar as a2,Ct as a3,Ae as a4,Fe as a5,gs as a6,Cs as a7,z as a8,Xs as a9,Qs as aa,xe as ab,Ve as ac,$e as ad,or as ae,lr as af,It as ag,ws as ah,Js as ai,vt as aj,zs as ak,it as al,er as am,Be as an,Zs as ao,Bs as ap,tr as aq,Us as ar,Gs as as,sr as at,Ks as au,cr as av,L as b,x as c,j as d,u as e,ae as f,A as g,Ce as h,nr as i,ms as j,st as k,kt as l,R as m,us as n,as as o,Oe as p,ds as q,fs as r,Rt as s,qs as t,oe as u,qe as v,Is as w,js as x,qt as y,Rs as z};
