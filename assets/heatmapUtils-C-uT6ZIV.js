import{e as s}from"./mathUtils-ClvKsMak.js";import{e as l,u as m}from"./screenUtils-PfxkaaMN.js";import{_ as p}from"./vec42-B1mBkh1w.js";import{n as h}from"./vec4f64-CBQL1T0x.js";const u=2.4;function d(r){return l(r*u)}function q(r){return m(r)/u}function y(r,a,t,e){let{color:c,ratio:i}=a,{color:f,ratio:o}=t;o===i&&(o===1?i-=1e-6:o+=1e-6);const n=s((e-i)/(o-i),0,1);p(r,c.toArray(),f.toArray(),n)}function w(r){const t=new Uint8ClampedArray(2048);if(r=r.filter(({ratio:o})=>o>=0&&o<=1).sort((o,n)=>o.ratio-n.ratio).map(({color:o,ratio:n})=>({color:o,ratio:Math.max(n,.001)})),r.length<1)return t;let e=r[0],c=r[0],i=1;const f=h();for(let o=0;o<512;o++){const n=(o+.5)/512;for(;n>c.ratio&&i<r.length;)e=c,c=r[i++];y(f,e,c,n),t.set(f,4*o)}return t}function C(r,a,t){const e=Math.sqrt(r**2+a**2)/t;return e>1?0:3/(Math.PI*t**2)*(1-e**2)**2}function I(r){return typeof r=="function"?r:r?a=>+a[r]:()=>1}export{q as a,u as c,d as e,w as f,C as l,I as u};
