const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WhereClause-BNiy948d.js","./TimeOnly-DOn_Hy89.js","./subclass-BZA_h8Db.js","./UnknownTimeZone-BkowvBs8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./locale-C9TlLpzi.js","./Extent-Bf3YTe7m.js","./tslib.es6-B3Jf3DVX.js","./Point-Cg0-ChZE.js","./Accessor-BLX9ikPh.js","./cast-Bjksrh93.js","./writer-DNAwXnhG.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./mathUtils-C4_ghTv4.js","./arcadeUtils-BE8Aletj.js","./geometry-D964gYQX.js","./Polyline-D9YkgmM_.js","./languageUtils-JGnUBrxZ.js","./ImmutableArray-BPVd6ESQ.js","./shared-OyXfj1UM.js","./Field-ybkHhtnK.js","./enumeration-Ba5njXdz.js","./fieldType-BuzM0UHS.js","./number-CUaGJe2K.js","./jsonUtils-CEfjT-BK.js","./Query-5Xpquc1r.js","./DataLayerSource-BKkswDvG.js","./FullTextSearch-Csd1Hktu.js","./Clonable-D3rtuBWg.js","./TimeExtent-DocT5yPf.js","./timeUtils-8fb_2oAt.js","./deepClone-CWS5qiGp.js","./featureConversionUtils-D14h8iad.js","./aaBoundingBox-BE7cC1jD.js","./OptimizedFeature-6cJ-QFG5.js","./OptimizedGeometry-BF8iz5FO.js","./OptimizedFeatureSet-Blu9Ckm7.js","./FieldsIndex-DpwHKAMX.js","./hash-CcEbRgUF.js","./uuid-fwrPAdZb.js","./Portal-C10FKnaA.js","./Loadable-BabW5Xcc.js","./Promise-B2Hu02L7.js"])))=>i.map(i=>d[i]);
import{b as P,n as $e,z as we,c as Ie}from"./subclass-BZA_h8Db.js";import{z as be,a6 as ve}from"./Accessor-BLX9ikPh.js";import{_ as ee}from"./index-Bh2oEzTI.js";import"./intl-CChhNOV8.js";import{r as _e}from"./mathUtils-C4_ghTv4.js";import{i as ne,D as d,E as M,x as xe,b as Se,k as Te,j as Ae,a as Ee}from"./date-DlqISzcw.js";import{c as Me}from"./locale-C9TlLpzi.js";import"./geometry-D964gYQX.js";import{g as J}from"./Point-Cg0-ChZE.js";async function Oe(e,n){const{WhereClause:t}=await ee(()=>import("./WhereClause-BNiy948d.js").then(r=>r.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url);return t.create(e,{fieldsIndex:n})}function Vn(e,n){return e==="1=1"?n??e:n==="1=1"?e??n:e!=null&&e!==""?n!=null&&n!==""?`(${e}) AND (${n})`:e:n}function Ne(e){return typeof e=="number"}function V(e){return typeof e=="string"||e instanceof String}const De=ne,z={date:null,time:null,timeZoneOffset:null},Ln=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]);var $;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})($||($={}));const Ve=[$.HMS_MS,$.HMS,$.HM,"TT"],E="yyyy-MM-dd",Le=$.HMS,Re="latn",Rn=new Set(["date-only","time-only","timestamp-offset"]),Ue=e=>"valueAsDate"in e;function w(e){return{locale:Me(),numberingSystem:Re,zone:e??De}}function te(e,n){return e===null?null:d.fromMillis(e,w(n))}function Ce(e,n){if(e==null||!V(e)||e===""){if(n){const r=d.local({zone:n});return{date:null,time:null,timeZoneOffset:r.isValid?r.offset.toString():null}}return z}const t=d.fromISO(e,{setZone:!0});return{date:t.toFormat(E,w()),time:t.toFormat($.HMS_MS,w()),timeZoneOffset:t.offset.toString()}}function Un(e,n){if(e==null||!Ne(e)||isNaN(e))return z;const t=te(e,n);return t?{date:t.toFormat(E,w(n)),time:t.toFormat(Le,w(n))}:z}function Cn(e){switch(e.type){case"date":default:return M("short-date-short-time");case"date-only":return M("short-date");case"time-only":return M("short-time");case"timestamp-offset":return{...M("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function Gn(e,n,t){if(!e||n==null)return null;switch(e.type){case"date":return Ae(n,t);case"date-only":return Te(n,t);case"time-only":return Se(n,t);case"timestamp-offset":return xe(n,t);default:return null}}function Zn(e){const{dateComponent:n,defaultTimeZone:t,timeComponent:r,timeZoneComponent:i,oldValue:a}=e;if(!(n!=null&&n.value))return null;const{year:s,month:l,day:o}=d.fromFormat(n.value,E),{hour:m,minute:g,second:u,millisecond:p}=H(r,ne)??d.now(),f=Ce(a,t),y=i!=null&&i.value?parseInt(i.value,10):f.timeZoneOffset!=null?parseInt(f.timeZoneOffset,10):new Date().getTimezoneOffset(),F=Ee.instance(y),h=d.fromObject({year:s,month:l,day:o,hour:m,minute:g,second:u,millisecond:p},{zone:F});return h.isValid?h.toISO({includeOffset:!0}):null}function jn(e){const{dateComponent:n,timeComponent:t,timeZone:r,max:i,min:a,oldValue:s}=e,l=H(n,r);let o=!!e.applyRange;if(!l)return null;let m=null;if((t==null?void 0:t.value)!=null){const u=H(t,r),p=Date.now(),f=i!=null&&i<p?i:p,y=d.fromMillis(f,w(r)),F=l||y,{year:h,month:I,day:b}=F,{hour:R,minute:U,second:v,millisecond:C}=u||y;m=F.set({year:h,month:I,day:b,hour:R,minute:U,second:v,millisecond:C})}else{const u=te(Q({value:s??Date.now(),max:i,min:a}),r),{year:p,month:f,day:y}=l,{hour:F,minute:h,second:I,millisecond:b}=u;o=!0,m=l.set({year:p,month:f,day:y,hour:F,minute:h,second:I,millisecond:b})}if(!m.isValid)return null;const g=m.toMillis();return o?Q({value:g,max:i,min:a}):g}function H(e,n){if((e==null?void 0:e.value)==null||Array.isArray(e.value))return null;let t=null;return t=Ue(e)?d.fromFormat(e.value,E,w(n)):_(e.value),t!=null&&t.isValid?t:null}function Y(e){const{max:n,min:t,value:r}=e;return!isNaN(r)&&!(n!=null&&r>n)&&!(t!=null&&r<t)}function Q(e){const{max:n,min:t,value:r}=e;return n!=null&&t!=null?_e(r,t,n):n!=null&&r>n?n:t!=null&&r<t?t:r}function Ge(e){if(!e)return"";const n=e.split(".").at(0);if(!n||n.length<1)throw new P("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const t=n.split(":"),r=new Array(3);for(let i=0;i<3;i++){const a=t.at(i)??"";r[i]=a.padStart(2,"0")}return r.join(":")}function kn(e,n){switch(n){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return Ge(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function zn(e){return!!e&&typeof e=="object"&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function S(e){if(!e||!V(e))return null;const n=d.fromFormat(e,E);return n.isValid?n:null}function _(e){return e&&V(e)?be(Ve,n=>{const t=d.fromFormat(e,n);return t.isValid?t:null})??null:null}function T(e){if(!e||!V(e))return null;const n=d.fromISO(e);return n.isValid?n:null}function Hn(e){const{type:n,range:t,value:r}=e;if(r==null||!t||r===t.min||r===t.max)return!0;if(n==="date")return Y({value:r,min:t.min,max:t.max});const{rawMax:i,rawMin:a}=t;let s=null,l=null,o=null;switch(n){case"date-only":s=S(i),l=S(a),o=S(r);break;case"time-only":s=_(i),l=_(a),o=_(r);break;case"timestamp-offset":s=T(i),l=T(a),o=T(r)}return!o||Y({value:o.valueOf(),min:l==null?void 0:l.valueOf(),max:s==null?void 0:s.valueOf()})}var x;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(x||(x={}));const Ze=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function je(e){return e!=null&&Ze.has(e.type)}function re(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function ie(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function ae(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function ke(e,n,t){const r=t??(e==null?void 0:e.domain);if(!r)return null;switch(r.type){case"range":{const{min:i,max:a}=le(e,t);if(i!=null&&+n<i||a!=null&&+n>a)return x.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(r.codedValues==null||r.codedValues.every(i=>i==null||i.code!==n))return x.INVALID_CODED_VALUE}return null}function le(e,n){const t=n??(e==null?void 0:e.domain);if(!t||t.type!=="range")return;const r="range"in t?t.range[0]:t.minValue,i="range"in t?t.range[1]:t.maxValue,a=je(e);return re(e)||ae(e)||ie(e)?{...ze(e,i,r),isInteger:a}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:a}}function ze(e,n,t){var r,i,a,s,l,o;return re(e)?{min:(r=S(t))==null?void 0:r.toMillis(),max:(i=S(n))==null?void 0:i.toMillis(),rawMin:t,rawMax:n}:ae(e)?{min:(a=_(t))==null?void 0:a.toMillis(),max:(s=_(n))==null?void 0:s.toMillis(),rawMin:t,rawMax:n}:ie(e)?{min:(l=T(t))==null?void 0:l.toMillis(),max:(o=T(n))==null?void 0:o.toMillis(),rawMin:t,rawMax:n}:{max:null,min:null}}const He=()=>$e.getLogger("esri.support.arcadeOnDemand");let Z;function se(){return Z||(Z=(async()=>{const e=await ee(()=>import("./arcadeUtils-BE8Aletj.js").then(n=>n.i),__vite__mapDeps([17,18,2,7,8,9,10,11,12,13,14,15,5,19,16,20,1,3,4,6,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Z}const Pn=(e,n,t)=>X.create(e,n,t,null,["$feature","$view"],[]),Xn=(e,n,t)=>X.create(e,n,t,null,["$feature","$view"],[]),Bn=(e,n,t,r)=>X.create(e,n,t,r,["$feature","$view"],[]);let X=class oe{constructor(n,t,r,i,a,s,l){this.services=null,this.script=n,this.evaluate=i;const o=Array.isArray(s)?s:s==null?void 0:s.fields;this.fields=o??[],this._syntaxTree=r,this._arcade=t,this._arcadeFeature=a,this._spatialReference=l,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(n,t,r,i,a,s){const{arcade:l,Feature:o,Dictionary:m}=await se(),g=t instanceof J?t:J.fromJSON(t);let u;try{u=l.parseScript(n,s)}catch(c){return He().error(new P("arcade-bad-expression","Failed to parse arcade script",{script:n,error:c})),null}const p=a.reduce((c,G)=>({...c,[G]:null}),{});let f=null;i!=null&&(f=new m(i),f.immutable=!0,p.$config=null);const y=l.scriptUsesGeometryEngine(u),F=y&&l.enableGeometrySupport(),h=l.scriptUsesFeatureSet(u)&&l.enableFeatureSetSupport(),I=l.scriptIsAsync(u),b=I&&l.enableAsyncSupport(),R={vars:p,spatialReference:g,useAsync:!!b};await Promise.all([F,h,b]);const U=new Set;await l.loadDependentModules(U,u,null,I,y);const v=new m;v.immutable=!1,v.setField("scale",0);const C=l.compileScript(u,R),Fe=(c,G)=>{var q;const he=(q=c.$view)==null?void 0:q.timeZone;return"$view"in c&&c.$view&&(v.setField("scale",typeof c.$view=="object"&&"scale"in c.$view?c.$view.scale:void 0),c.$view=v),f&&(c.$config=f),C({vars:c,spatialReference:g,services:G,timeZone:he})};return new oe(n,l,u,Fe,new o,r,g)}repurposeFeature(n){return n.geometry&&!n.geometry.spatialReference&&(n.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(n.geometry,n.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Pe=/^([0-9_])/,Xe=/[^a-z0-9_\u0080-\uffff]+/gi;function Wn(e){return e==null?null:e.trim().replaceAll(Xe,"_").replace(Pe,"F$1")||null}const Be=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],We=["field","normalizationField"];function qn(e,n){if(e!=null&&n!=null){for(const t of Array.isArray(e)?e:[e])if(K(Be,t,n),"visualVariables"in t&&t.visualVariables)for(const r of t.visualVariables)K(We,r,n)}}function K(e,n,t){if(e)for(const r of e){const i=we(r,n),a=i&&typeof i!="function"&&t.get(i);a&&Ie(r,a.name,n)}}function Jn(e,n){var t;if(e!=null&&((t=n==null?void 0:n.fields)!=null&&t.length))if("startField"in e){const r=n.get(e.startField),i=n.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(i==null?void 0:i.name)??null}else{const r=n.get(e.startTimeField),i=n.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(i==null?void 0:i.name)??null}}const j=new Set;function B(e,n){return e&&n?(j.clear(),O(j,e,n),Array.from(j).sort()):[]}function O(e,n,t){var r;if(t)if((r=n==null?void 0:n.fields)!=null&&r.length)if(t.includes("*"))for(const{name:i}of n.fields)e.add(i);else for(const i of t)L(e,n,i);else{if(t.includes("*"))return e.clear(),void e.add("*");for(const i of t)i!=null&&e.add(i)}}function L(e,n,t){if(typeof t=="string")if(n){const r=n.get(t);r&&e.add(r.name)}else e.add(t)}function Yn(e,n){return n==null||e==null?[]:n.includes("*")?(e.fields??[]).map(t=>t.name):n}function Qn(e,n,t=1){if(!n||!e)return[];if(n.includes("*"))return["*"];const r=B(e,n);return r.length/e.fields.length>=t?["*"]:r}async function A(e,n,t){var a;if(!t)return;const{arcadeUtils:r}=await se(),i=r.extractFieldNames(t,(a=n==null?void 0:n.fields)==null?void 0:a.map(s=>s.name));for(const s of i)L(e,n,s)}async function ue(e,n,t){if(t&&t!=="1=1"){const r=await Oe(t,n);if(!r.isStandardized)throw new P("fieldUtils:collectFilterFields","Where clause is not standardized",{where:t});O(e,n,r.fieldNames)}}function Kn({displayField:e,fields:n}){return e||(n!=null&&n.length?k(n,"name-or-title")||k(n,"unique-identifier")||k(n,"type-or-category")||qe(n):null)}function qe(e){for(const n of e){if(!(n!=null&&n.name))continue;const t=n.name.toLowerCase();if(t.includes("name")||t.includes("title"))return n.name}return null}function k(e,n){for(const t of e)if(t!=null&&t.valueType&&t.valueType===n)return t.name;return null}async function et(e,n){var r;if(!n)return;const t=(r=n.elevationInfo)==null?void 0:r.featureExpressionInfo;return t?t.collectRequiredFields(e,n.fieldsIndex):void 0}function Je(e,n,t){t.onStatisticExpression?A(e,n,t.onStatisticExpression.expression):e.add(t.onStatisticField)}async function nt(e,n,t){if(!n||!t||!("fields"in t))return;const r=[],i=t.popupTemplate;r.push(Ye(e,n,i)),t.fields&&r.push(...t.fields.map(async a=>Je(e,n.fieldsIndex,a))),await Promise.all(r)}async function Ye(e,n,t){const r=[];t!=null&&t.expressionInfos&&r.push(...t.expressionInfos.map(a=>A(e,n.fieldsIndex,a.expression)));const i=t==null?void 0:t.content;if(Array.isArray(i))for(const a of i)a.type==="expression"&&a.expressionInfo&&r.push(A(e,n.fieldsIndex,a.expressionInfo.expression));await Promise.all(r)}async function tt(e,n,t){n&&(n.timeInfo&&(t!=null&&t.timeExtent)&&O(e,n.fieldsIndex,[n.timeInfo.startField,n.timeInfo.endField]),n.floorInfo&&O(e,n.fieldsIndex,[n.floorInfo.floorField]),(t==null?void 0:t.where)!=null&&await ue(e,n.fieldsIndex,t.where))}async function rt(e,n,t){n&&t&&await Promise.all(t.map(r=>Qe(e,n,r)))}async function Qe(e,n,t){n&&t&&(t.valueExpression?await A(e,n.fieldsIndex,t.valueExpression):t.field&&L(e,n.fieldsIndex,t.field))}function it(e){return e?B(e.fieldsIndex,ce(e)):[]}function Ke(e){if(!e)return[];const n=e.geometryFieldsInfo;return n?B(e.fieldsIndex,[n.shapeAreaField,n.shapeLengthField]):[]}const en=new Set(["oid","global-id","guid"]),nn=new Set(["oid","global-id"]),tn=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function rn(e){const n=new Set;fe(e).forEach(r=>n.add(r)),Ke(e).forEach(r=>n.add(r.toLowerCase()));const t=e&&"infoFor3D"in e?e.infoFor3D:void 0;return t&&(Object.values(t.assetMapFieldRoles).forEach(r=>n.add(r.toLowerCase())),Object.values(t.transformFieldRoles).forEach(r=>n.add(r.toLowerCase()))),Array.from(n)}function ce(e){if(!e)return[];const n="editFieldsInfo"in e&&e.editFieldsInfo;if(!n)return[];const{creationDateField:t,creatorField:r,editDateField:i,editorField:a}=n;return[t,r,i,a].filter(Boolean)}function fe(e){return ce(e).map(n=>n.toLowerCase())}function at(e,n){var t;return e.editable&&!en.has(e.type)&&!fe(n).includes(((t=e.name)==null?void 0:t.toLowerCase())??"")}function lt(e,n){var r;const t=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((n==null?void 0:n.objectIdField)!=null&&t===n.objectIdField.toLowerCase()||(n==null?void 0:n.globalIdField)!=null&&t===n.globalIdField.toLowerCase()||rn(n).includes(t)||nn.has(e.type)||tn.some(i=>i.test(t)))}async function st(e,n){const{labelingInfo:t,fieldsIndex:r}=n;t!=null&&t.length&&await Promise.all(t.map(i=>an(e,r,i)))}async function an(e,n,t){if(!t)return;const r=t.getLabelExpression(),i=t.where;if(r.type==="arcade")await A(e,n,r.expression);else{const a=r.expression.match(/{[^}]*}/g);a&&a.forEach(s=>{L(e,n,s.slice(1,-1))})}await ue(e,n,i)}function ot(e){const n=e.defaultValue;return n!==void 0&&pe(e,n)?n:e.nullable?null:void 0}function ut(e){const n=typeof e=="string"?{type:e}:e;return gn(n)?255:n.type==="esriFieldTypeDate"||n.type==="date"?8:void 0}function de(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function ln(e){return e===null||de(e)}function sn(e){return e===null||Number.isInteger(e)}function me(e){return e!=null&&typeof e=="string"}function on(e){return e===null||me(e)}function un(){return!0}function pe(e,n){let t;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":t=e.nullable?sn:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":t=e.nullable?ln:de;break;case"string":case"esriFieldTypeString":t=e.nullable?on:me;break;default:t=un}return arguments.length===1?t:t(n)}const cn=["integer","small-integer","big-integer"],fn=["single","double"],dn=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],mn=["esriFieldTypeSingle","esriFieldTypeDouble"],ye=new Set([...cn,...dn]),pn=new Set([...fn,...mn]),yn=ve(ye,pn);function ct(e){return e!=null&&ye.has(e.type)}function ge(e){return e!=null&&yn.has(e.type)}function gn(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function ft(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function dt(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function mt(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function pt(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function yt(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function gt(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function Ft(e,n){return Fn(e,n)===null}var N,D;function ht(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Fn(e,n){return e==null||e.nullable&&n===null?null:ge(e)&&!hn(e.type,Number(n))?N.OUT_OF_RANGE:pe(e,n)?e.domain?ke(e,n):null:D.INVALID_TYPE}function hn(e,n){const t=typeof e=="string"?W(e):e;if(!t)return!1;const r=t.min,i=t.max;return t.isInteger?Number.isInteger(n)&&n>=r&&n<=i:n>=r&&n<=i}function $t(e,n){return le(e,n)||(ge(e)?W(e.type):void 0)}function W(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return $n;case"esriFieldTypeInteger":case"integer":return wn;case"esriFieldTypeBigInteger":case"big-integer":return In;case"esriFieldTypeSingle":case"single":return bn;case"esriFieldTypeDouble":case"double":return vn}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(N||(N={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(D||(D={}));const $n={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},wn={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},In={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},bn={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},vn={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function wt(e,n,t){switch(e){case x.INVALID_CODED_VALUE:return`Value ${t} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case x.VALUE_OUT_OF_RANGE:return`Value ${t} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case D.INVALID_TYPE:return`Value ${t} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case N.OUT_OF_RANGE:{const{min:r,max:i}=W(n.type);return`Value ${t} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${r} to ${i}`}}}function It(e,n){return!_n(e,n,null)}function _n(e,n,t){if(!(n!=null&&n.attributes)||!e){if(t!=null)for(const a of e??[])t.add(a);return!0}const r=new Set(Object.keys(n.attributes));let i=!1;for(const a of e)if(!r.has(a)){if(i=!0,t==null)break;t.add(a)}return i}function bt(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(n=>e.toLowerCase().startsWith(n))}async function vt(e,n){const t=new Set;return e!=null&&e.collectRequiredFields&&await e.collectRequiredFields(t,n),Array.from(t).sort()}function _t(e){const n=e==null?void 0:e.match(/{[^}]+}/g);return n?n.map(t=>t.slice(1,-1).split(":")[0].trim()):[]}export{Ln as $,Fn as A,lt as B,A as C,Xn as D,D as E,dt as F,bt as G,ot as H,B as I,st as J,ut as K,nt as L,tt as M,qn as N,rt as O,E as P,Le as Q,_n as R,ze as S,Ft as T,wt as U,Ne as V,fe as W,ke as X,$t as Y,w as Z,Kn as _,ft as a,zn as a0,kn as a1,Hn as a2,Bn as a3,vt as a4,_t as a5,ct as a6,V as a7,Re as a8,Ce as a9,Un as aa,Ge as ab,Zn as ac,jn as ad,Qn as ae,Rn as af,Y as ag,rn as ah,pt as b,Wn as c,Pn as d,Oe as e,mt as f,Jn as g,it as h,se as i,It as j,Gn as k,Cn as l,le as m,x as n,N as o,ge as p,at as q,Vn as r,ht as s,Yn as t,O as u,et as v,yt as w,gt as x,gn as y,L as z};
