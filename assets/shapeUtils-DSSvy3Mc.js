import{ad as $}from"./Accessor-BmwT4B0c.js";import{u as Z}from"./vec3f64-BLpZdpfb.js";import{m as j}from"./builderUtils-B5Dtey1E.js";import{j as u}from"./Point-Cz2JYYmX.js";import{P as q}from"./Polyline-s-JzsQqo.js";function G(t){let n=0;const a=j(t);for(let s=0;s<t.paths.length;s++){const r=t.paths[s].length;for(let e=0;e<r;e++)e>0&&(n+=t.hasZ?g(t.paths[s][e-1],t.paths[s][e],a):w(t.paths[s][e-1],t.paths[s][e]))}return n}function H(t){const n=t.geometry.clone();return n.paths.map(a=>new q({spatialReference:t.geometry.spatialReference,paths:[a],hasZ:n.hasZ,hasM:n.hasM}))}function I(t){const n=[];for(const a of t.paths)for(let s=1;s<a.length;s++){const r=[[a[s-1].slice(),a[s].slice()]];n.push(new q({paths:r,spatialReference:t.spatialReference,hasZ:t.hasZ,hasM:t.hasM}))}return n}function b(t,n,a){let s=n[0]-t[0],r=n[1]-t[1];const e=Math.sqrt(s*s+r*r);return s/=e,r/=e,s*=a,r*=a,[t[0]+s,t[1]+r]}function k(t,n,a,s){const r=P([n[0]-t[0],n[1]-t[1],n[2]*s-t[2]*s]);return[t[0]+r[0]*a,t[1]+r[1]*a,t[2]+r[2]*a]}function v(t,n,a){const s=w(n[0],n[1]),r=t.x+a*((n[1][0]-n[0][0])/s),e=t.y+a*((n[1][1]-n[0][1])/s),o={};return t.hasM&&(o.m=t.m),new u({x:r,y:e,spatialReference:t.spatialReference,...o})}function z(t,n,a,s){const r=g(n[0],n[1],s),e=t.x+a*((n[1][0]-n[0][0])/r),o=t.y+a*((n[1][1]-n[0][1])/r),c=t.z+a*((n[1][2]-n[0][2])/r),f={};return t.hasM&&(f.m=t.m),new u({x:e,y:o,z:c,spatialReference:t.spatialReference,...f})}function x(t,n,a,s){return t===void 0||n===void 0||t===null||n===null?null:t+(n-t)/a*s}function w(t,n){const a=n[0]-t[0],s=n[1]-t[1];return Math.sqrt(a*a+s*s)}function g(t,n,a){return Math.sqrt((t[0]-n[0])**2+(t[1]-n[1])**2+(t[2]!==void 0&&n[2]!==void 0?(t[2]*a-n[2]*a)**2:0))}function P(t){const n=A(t);return[t[0]/n,t[1]/n,t[2]/n]}function m(t,n,a){const s=n[0],r=n[1],e=[r[0]-s[0],r[1]-s[1]],o=Math.sqrt(e[0]**2+e[1]**2),c=[e[0]/o,e[1]/o];return t.x+=a*c[0],t.y+=a*c[1],t}function J(t,n){let a=0,s=null;const r=t.hasM,e=t.hasZ?3:2;for(const o of t.paths){if(n===0){s=new u({x:o[0][0],y:o[0][1],...r?{m:o[0][e]}:{},spatialReference:t.spatialReference,hasM:r});break}for(let c=0;c<o.length-1;c++){const f=w(o[c],o[c+1]),l=a+f;if(l===n){s=new u({x:o[c+1][0],y:o[c+1][1],...r?{m:o[c+1][e]}:{},spatialReference:t.spatialReference,hasM:r});break}if(l>n){const i=b(o[c],o[c+1],n-a);s=new u({x:i[0],y:i[1],...r?{m:x(o[c][e],o[c+1][e],f,n-a)??void 0}:{},spatialReference:t.spatialReference,hasM:r});break}a+=f}if(s!==null)break}return s}function K(t,n,a){let s=0;const r=t.hasM;for(const e of t.paths){if(n===0)return new u({x:e[0][0],y:e[0][1],z:e[0][2],...r?{m:e[0][3]}:{},hasZ:!0,hasM:r,spatialReference:t.spatialReference});for(let o=0;o<e.length-1;o++){const c=g(e[o],e[o+1],a),f=s+c;if(f===n)return new u({x:e[o+1][0],y:e[o+1][1],z:e[o+1][2],...r?{m:e[o+1][3]}:{},hasZ:!0,hasM:r,spatialReference:t.spatialReference});if(f>n){const l=k(Z(e[o]),Z(e[o+1]),n-s,a);return new u({x:l[0],y:l[1],z:l[2],...r?{m:x(e[o][3],e[o+1][3],c,n-s)??void 0}:{},hasZ:!0,hasM:r,spatialReference:t.spatialReference})}s+=c}}return null}function L(t,n,a){let s=0,r=null;if(n<=0){const i=[t.paths[0][0],t.paths[0][1]];let h=y(t,0,0);return h=v(h,i,n),m(h,i,a)}const e=t.hasM?t.hasZ?3:2:-1;for(const i of t.paths)for(let h=0;h<i.length-1;h++){const R=w(i[h],i[h+1]),M=s+R;if(M===n)return r=new u({x:i[h+1][0],y:i[h+1][1],...t.hasM?{m:i[h+1][e]}:{},spatialReference:t.spatialReference}),a===0?r:m(r,[i[h],i[h+1]],a);if(M>n){const p=b(i[h],i[h+1],n-s);return r=new u({x:p[0],y:p[1],...e>-1?{m:x(i[h][e],i[h+1][e],R,n-s)??void 0}:{},spatialReference:t.spatialReference}),a===0?r:m(r,[i[h],i[h+1]],a)}s+=R}if(s===0)return null;const o=t.paths.length-1,c=t.paths[o].length-1,f=[t.paths[o][c-1],t.paths[o][c]];let l=y(t,o,c);return l=v(l,f,n-s),m(l,f,a)}function N(t,n,a,s){let r=0;if(n<=0){const i=[t.paths[0][0],t.paths[0][1]];let h=y(t,0,0);return h=z(h,i,n,s),m(h,i,a)}const e=t.hasM?t.hasZ?3:2:-1;for(const i of t.paths)for(let h=0;h<i.length-1;h++){const R=g(i[h],i[h+1],s),M=r+R;if(M===n){const p=new u({x:i[h+1][0],y:i[h+1][1],z:i[h+1][2],...t.hasM?{m:i[h+1][e]}:{},hasZ:!0,spatialReference:t.spatialReference});return a===0?p:m(p,[i[h],i[h+1]],a)}if(M>n){const p=k(Z(i[h]),Z(i[h+1]),n-r,s),d=new u({x:p[0],y:p[1],z:p[2],...e>-1?{m:x(i[h][e],i[h+1][e],R,n-r)}:{},hasZ:!0,spatialReference:t.spatialReference});return a===0?d:m(d,[i[h],i[h+1]],a)}r+=R}if(r===0)return null;const o=t.paths.length-1,c=t.paths[o].length-1,f=[t.paths[o][c-1],t.paths[o][c]];let l=y(t,o,c);return l=z(l,f,n-r,s),m(l,f,a)}function O(t,n,a){const s=t.rings[n][a];return new u({spatialReference:t.spatialReference,x:s[0],y:s[1],hasZ:t.hasZ,hasM:t.hasM,z:t.hasZ?s[2]:void 0,m:t.hasM?t.hasZ?s[3]:s[2]:void 0})}function y(t,n,a){const s=t.paths[n][a];return new u({spatialReference:t.spatialReference,x:s[0],y:s[1],hasZ:t.hasZ,hasM:t.hasM,z:t.hasZ?s[2]:void 0,m:t.hasM?t.hasZ?s[3]:s[2]:void 0})}function Q(t){return $(t.at(0),t.at(-1))}function A(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}export{m as M,K as Z,y as d,N as g,I as i,g as m,H as o,G as r,w as u,Q as v,O as w,L as x,J as y};
