const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-ujykA9Eq.js","./index-CjrYEQXz.js","./jsxFactory-CLjKarlq.js","./Accessor-BHnuXKD2.js","./intl-Do3GEEJ7.js","./Promise-CmQqe-ke.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./Evented-DCWccWGU.js","./reactiveUtils-BR0C1Kq4.js","./SimpleObservable-7oieNGD8.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-CJAswmP1.js","./index-cLdK6V3t.js","./ref-Ccn4I0kT.js","./directive-helpers-C0aXnQdc.js","./observers-BdozwIHb.js","./dom--xxYYVQF.js","./index-73bQemcW.js","./index-Df8-0rWt.js","./floating-ui-BkLjHVN3.js","./debounce-DbkufipY.js","./interactive-B8siLByk.js","./key-CZcQa38B.js","./loadable-DOQnSSjG.js","./openCloseComponent-dw_x67D_.js","./dynamicClasses-pKEMtFzB.js","./index-DVEy4f7w.js","./keyed-CdPY5MOf.js","./component-CFGnHAqh.js","./index-DIB7yhJF.js","./resources6-Cs2_VmEC.js","./index-BfAp5_ga.js","./customElement-kBYuBfHB.js","./index-DIp-v4qk.js","./static-g4FJ4v8I.js","./FloatingArrow-D9X-HbKW.js","./useFocusTrap-ENcZoC4L.js","./focusTrapComponent-Br_3Mz8_.js","./index-CCqZjfSZ.js","./array-BbE1dLa5.js","./index-D130RxMY.js","./label-BLne9qNB.js","./index-_kRpNnSd.js","./form-B15gmg4q.js","./index-8a39_cBQ.js","./index-Ch_sYKt7.js","./Validation-O1TFEQW-.js","./index-BtF7Kdcs.js","./index-Wn4pOF_U.js","./index-svtat3zr.js","./live-BIBBLA6F.js","./locale-CXx8I9ox.js","./input-DI9tZAPS.js","./index-DbjTV4Hc.js","./filter-Cs9GmjDF.js","./escapeRegExp-UP7ghjt8.js","./utils-CYuC4O71.js","./index-d5Yy4krW.js","./resources5-SciNIBSe.js","./index-B7QXL93z.js","./GridControls-BYVi6NHs.js","./Color-gncXBiLc.js","./colorUtils-Rxh2V3ai.js","./mathUtils-DV9iOXpW.js","./unitFormatUtils-Dbksq3U5.js","./ByteSizeUnit-BsxeN7wM.js","./Cyclical-CPiNl4ru.js","./quantityUtils-1LswOhxZ.js","./Point-XGrwlf63.js","./writer-B2bQV2uU.js","./globalCss-CZa70j6i.js","./LabeledSwitch-CbCItYC2.js","./projection-B2I9Bzj_.js","./vec3f64-BLpZdpfb.js","./Extent-CBBGeHb-.js","./Polyline-BmuD2-ZN.js","./projectBuffer-DOU0xvVi.js","./geodesicConstants-yASAK_zX.js","./scaleUtils-CfLu-sg1.js","./enumeration-Cr5WIZs4.js","./projectVectorToVector-dS8io47t.js","./projectPointToVector-BS0u8fq6.js","./defaultUnit-CO7iAvsB.js","./getDefaultUnitForView-CuRQcAm0.js","./Portal-CTRRujjZ.js","./TextSymbol-BQ_NW9Xo.js","./screenUtils-_ZIvrt5o.js","./gridUtils-DagZsDOv.js","./geodesicUtils-Bh_GX0Qj.js","./normalizeUtils-XRAPXbWa.js","./normalizeUtilsCommon-D0zPTJCj.js","./jsonUtils-Cu7OBRmN.js","./utils-Cy8wFNQo.js","./utils-CkSELPnj.js","./editingTools-EqwFkCtO.js","./Graphic-CFXUQZlS.js","./Clonable-DvJsj5LF.js","./opacityUtils-CSd4XoR2.js","./ActionToggle-__-l4AdQ.js","./Identifiable-BrT7zvUW.js","./typeUtils-BSg8Y507.js","./collectionUtils-CbaToa73.js","./aaBoundingBox-CeBivBRq.js","./SnappingVisualizer2D-CeuJ0hoo.js","./vec2-maR1OrZI.js","./common-DQOJ18NT.js","./vec2f64-Dy6m9Nrb.js","./enums-BJSSbDkD.js","./RightAngleSnappingHint-CCcBBYgG.js","./timeUtils-D2X862bk.js","./vec32-Dvg_eL9J.js","./Query-DCBIeen2.js","./Field-Cyk7Ur5d.js","./fieldType-L-VlbZqy.js","./FullTextSearch-BWm_kPUE.js","./TimeExtent-J5qnUFx_.js","./InputManager-Bs9UE-jw.js","./Queue-BOnccek2.js","./signal-DSa0yokC.js","./keybindings-DrKrBFID.js","./utils-D02V2_jH.js","./Version-9k2AOv05.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./plane-4dpuo6-e.js","./mat3f64-BBpwCtoL.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./mathUtils-B9R7G-2c.js","./sphere-DQxj5tsv.js","./mat4-Fi6iAz29.js","./mat3-CR8GKnhD.js","./elevationInfoUtils-RSZ4Logn.js","./unitConversionUtils-C4AR5obr.js","./lengthUtils-DjJgJFRg.js","./geometry2dUtils-vtViF5g_.js","./SnappingVisualizer-Cb3uuWOu.js","./PointSnappingHint-CurBFXPo.js","./editPlaneUtils-DCrwtYoD.js","./UpdatingHandles-ptqz1ck8.js","./coordinateFormatter-DRC3YXJ-.js","./GraphicsLayer-Acqd2VFm.js","./GraphicsCollection-CkliHSk1.js","./Layer-C9uQlTBT.js","./ScaleRangeLayer-C59zG_yk.js","./layerContainerType-C5CzMsLd.js","./jsonUtils-TjZmCq6l.js","./utils-DYurMneM.js","./mat4f32-DcsiF_Rp.js","./ElevationInfo-Di4W6v5U.js","./dehydratedFeatureComparison-Bbl7iMhI.js","./createUtils-CfrW4il_.js","./Circle-aC-JFV1q.js","./geometryEngine-CtEcpiHE.js","./geometryEngineBase-yFIvKOkM.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-Dw-Mfo_Y.js","./surfaceCoordinateSystems-DRgCZXAE.js","./memoize-DsJmrG76.js","./ReactiveSet-CoXPgSt3.js","./diffUtils-CMkuJvD2.js","./ViewingMode-Dodu7ZZk.js","./DrawingMode-Cvvf0VVz.js","./EditGeometryOperations-C5kkQVhH.js","./dragEventPipeline-D_Ldto1o.js","./meshVertexSpaceUtils-SW0WEjNN.js","./MeshLocalVertexSpace-C0YDTRex.js","./hydratedFeatures-BVVSs98j.js","./angularMeasurementUtils-lDJJxFDs.js","./SketchLabelOptions-CwtwEofC.js","./SnappingContext-lR2hMWGP.js","./SnappingDragPipelineStep-C7nIAEz_.js","./Scheduler-B_GuBefw.js","./debugFlags-ZrDyTcDc.js","./SnappingOperation-DhUO_0vk.js","./mat2d-D9DBP-jx.js","./mat2df64-CBKYtunK.js","./quat-4pa1e6ds.js","./helpMessageUtils-2XpUG8Xk.js","./helpMessageUtils3d-GWzBuIWZ.js","./SketchTooltipInfo-BnBTvnNx.js","./MeshTransform-CIhaTwDv.js","./axisAngleDegrees-8Sw4vC28.js","./themeUtils-C3zvZbsE.js","./a11yUtils-CSYUX1kC.js","./quantityFormatUtils-9VppKzbq.js","./directionModeIcons-Br5woIHu.js","./automaticAreaMeasurementUtils-BLAXwG3j.js","./geodesicMeasurementUtils-ChQtpZ42.js","./euclideanAreaMeasurementUtils-D8mvS0qj.js","./earcut-Lltz9D9k.js","./triangle-D_E6eTS3.js","./lineSegment-C-CDF7QX.js","./euclideanLengthMeasurementUtils-EupqVlJl.js","./spatialReferenceEllipsoidUtils-DM073JUd.js","./geodesicAreaMeasurementUtils-C07tJXJM.js","./automaticLengthMeasurementUtils-B8fQn4oI.js","./geodesicLengthMeasurementUtils-C8eO8ivV.js","./InteractiveToolBase-DNJTN0p5.js","./interfaces-D6pIddIh.js","./SketchOptions-92Ul6Fzp.js","./boundedPlane-Dyz2ub5d.js","./cimSymbolUtils-azhJhO4Y.js","./utils-B91u8350.js","./defaultCIMValues-DII_GG3u.js","./GraphicManipulator-dZUtye0g.js","./defaults-Dwxdhopq.js","./defaultsJSON-GKolV7NZ.js","./drapedUtils-DFAbG8en.js","./colorUtils-BAowQmkN.js","./drawUtils-BxNz8j4I.js","./hitTestSelectUtils-UXJPjatw.js","./screenUtils-DyhV4TAA.js","./SnappingManager-CF4NflXd.js","./viewUtils-Ce2x26K8.js","./TextOverlayItem-D-lNDrXB.js","./formatUtils-DMCnWBkV.js","./number-BWHn6sm2.js","./substitute-D1XJWgT5.js"])))=>i.map(i=>d[i]);
import{_ as g}from"./index-tefRSezt.js";import{r as l,m as i,a as m,g as C,G as I,s as Y,N as R,aR as Z}from"./Accessor-BHnuXKD2.js";import{l as x}from"./SketchOptions-92Ul6Fzp.js";import{e as ee}from"./directionModeIcons-Br5woIHu.js";import{e as D,O as z,c as H,n,T as te}from"./jsxFactory-CLjKarlq.js";import{e as W}from"./globalCss-CZa70j6i.js";import{r as j,t as q,o as S}from"./LabeledSwitch-CbCItYC2.js";import{V as J,d as F,P as G,a as le}from"./reactiveUtils-BR0C1Kq4.js";import{d as K,p as ie}from"./SnappingManager-CF4NflXd.js";import{d as oe,p as Q}from"./layerListUtils-BIu86t6C.js";import{v as ne}from"./LayerListViewModel-DeGRGHR_.js";import{O as se}from"./ListItem-CRqB-Xtr.js";let u=class extends C{constructor(t){super(t),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new j({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};l([i({type:Boolean,nonNullable:!0})],u.prototype,"enabledToggle",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"featureEnabledToggle",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"gridEnabledToggle",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"header",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"layerList",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"gridControls",void 0),l([i({type:j,nonNullable:!0})],u.prototype,"gridControlsElements",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"layerListToggleLayersButton",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"selfEnabledToggle",void 0),u=l([m("esri.widgets.support.SnappingControls.VisibleElements")],u);const V=u;let w=class extends C{constructor(t){super(t),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};l([i({type:Boolean,nonNullable:!0})],w.prototype,"directionModePicker",void 0),l([i({type:Boolean,nonNullable:!0})],w.prototype,"header",void 0),l([i({type:Boolean,nonNullable:!0})],w.prototype,"labelsToggle",void 0),l([i({type:Boolean,nonNullable:!0})],w.prototype,"tooltipsToggle",void 0),w=l([m("esri.widgets.support.SketchTooltipControls.VisibleElements")],w);const U=w,O="esri-sketch-tooltip-controls",B={base:O,block:`${O}__block`,blockContent:`${O}__block-content`,hintIcon:`${O}__hint-icon`,radioButtonLabelWrapper:`${O}__radio-button-label-wrapper`};let L=class extends z{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new U,this.sketchOptions=new x,this.viewType=void 0,this._onTooltipsEnabledChange=o=>{this.sketchOptions.tooltips.enabled=o},this._onLabelsEnabledChange=o=>{this.sketchOptions.labels.enabled=o},this._onDirectionModeChange=o=>{this.sketchOptions.values.directionMode=o.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([H({block:()=>g(()=>import("./index-ujykA9Eq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]),import.meta.url),label:()=>g(()=>import("./index-D130RxMY.js"),__vite__mapDeps([44,2,3,4,5,6,7,8,9,10,11,12,13,45,20,14]),import.meta.url),icon:()=>g(()=>import("./index-73bQemcW.js").then(e=>e.i),__vite__mapDeps([21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19]),import.meta.url),"radio-button":()=>g(()=>import("./index-_kRpNnSd.js"),__vite__mapDeps([46,2,3,4,5,6,7,8,9,10,11,12,13,17,18,43,20,14,47,25,45,27]),import.meta.url),"radio-button-group":()=>g(()=>import("./index-8a39_cBQ.js"),__vite__mapDeps([48,21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19,49,27,50]),import.meta.url)}),q()])}render(){const{label:e,visibleElements:t}=this,o=this._renderContent();return n("div",{"aria-label":e,class:this.classes(B.base,W.widget)},o?n("calcite-block",{class:B.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},n("div",{class:B.blockContent,key:"content"},o)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,o=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(I);return o.length===0?null:o}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return n(S,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return n(S,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:o}=t.values;return n("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,n("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:o,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",o,e.directionModeRelative),this._renderDirectionModeOption("absolute",o,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,o){return n("calcite-label",{key:e,layout:"inline",scale:"s"},n("calcite-radio-button",{checked:e===t,scale:"s",value:e}),n("div",{class:B.radioButtonLabelWrapper,key:"label-wrapper"},n("calcite-icon",{icon:ee[e],scale:"s"}),o))}};l([i()],L.prototype,"label",null),l([i({type:U,nonNullable:!0})],L.prototype,"visibleElements",void 0),l([i(),D("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],L.prototype,"messages",void 0),l([i({nonNullable:!0,type:x})],L.prototype,"sketchOptions",void 0),l([i({type:String})],L.prototype,"viewType",void 0),L=l([m("esri.widgets.support.SketchTooltipControls")],L);const Te=L,A=e=>ae(e)||re(e),ae=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},re=e=>{const t=oe(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(const o of e[t])if(A(o))return!0}return!1},$=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(o=>$(o,t)!==!1)&&"children");var P;let v=P=class extends se{constructor(e){super(e),this.children=new J,this.parent=null}get enabled(){const{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,o=!1;for(const s of e){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?t=!0:s.enabled==="disabled"&&(o=!0),o&&t)return"indeterminate"}return o?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>{var t;return[(t=e.layer)==null?void 0:t.id,...e.childLayerIds]})}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(o=>o.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(A);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>Q(t)?new P({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(I).reverse()}};l([i()],v.prototype,"enabled",null),l([i()],v.prototype,"children",void 0),l([i()],v.prototype,"childLayerIds",null),l([i()],v.prototype,"featureSource",null),l([i({constructOnly:!0})],v.prototype,"getFeatureSnappingSources",void 0),l([i()],v.prototype,"parent",void 0),v=P=l([m("esri.widgets.support.SnappingControls.SnappingListItem")],v);let f=class extends ne{constructor(){super(...arguments),this.featureSnappingSources=new J}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var t;return!((t=e.children)!=null&&t.length)})}_compileList(){var s,a;const e=(a=(s=this.view)==null?void 0:s.map)==null?void 0:a.layers;if(!e)return;const t=e.filter(A);this._watchLayersListMode(t);const o=this._getViewableLayers(t);o!=null&&o.length?(this._createNewItems(o),this._removeItems(o),this._sortItems(o)):this._removeAllItems()}_createListItem(e){return new v({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};l([i()],f.prototype,"featureSnappingSources",void 0),l([i()],f.prototype,"operationalItems",void 0),l([i()],f.prototype,"operationalItemsFlat",null),l([i()],f.prototype,"selectableItems",null),f=l([m("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],f);let _=class extends C{constructor(e){super(e),this.layerListViewModel=new f,this.snappingOptions=new K,this.view=null}initialize(){this.addHandles([F(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},G),F(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:t})=>{e.featureSnappingSources=t},G)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>t.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>!t.enabled)}get layersEnabledCount(){var e,t;return((t=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:t.filter(o=>o.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e==null||e.forEach(o=>t?this.enableSnappingForLayer(o):this.disableSnappingForLayer(o))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:t})=>{const o=t==null?void 0:t.id;e?this.enableSnappingForLayer(o):this.disableSnappingForLayer(o)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)Q(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){var s;const t=(s=this.layerListViewModel.operationalItemsFlat.find(a=>{var r;return((r=a.layer)==null?void 0:r.id)===e}))==null?void 0:s.layer;if(!t)throw new Y("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const o=new ie({layer:t});return this.snappingOptions.featureSources.add(o),o}};l([i()],_.prototype,"allLayersEnabled",null),l([i()],_.prototype,"allLayersDisabled",null),l([i({constructOnly:!0})],_.prototype,"layerListViewModel",void 0),l([i()],_.prototype,"layersEnabledCount",null),l([i({type:K,nonNullable:!0})],_.prototype,"snappingOptions",void 0),l([i()],_.prototype,"state",null),l([i()],_.prototype,"view",void 0),_=l([m("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],_);const pe=_,y="esri-snapping-controls",b={base:y,container:`${y}__container`,item:`${y}__item`,toggleBlock:`${y}__toggle-block`,layerListBlock:`${y}__layer-list-block`,layerList:`${y}__layer-list`,layerListFilter:`${y}__layer-list__filter`,layerListButton:`${y}__layer-list__button`,layerListItem:`${y}__layer-list__item`,layerListGroup:`${y}__layer-list__group`,nestedContainer:`${y}__nested-container`};let p=class extends z{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new V,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._gridEnabledSwitchChange=r=>{this.snappingOptions.gridEnabled=r,r&&this._startLoadGrid()},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),te(r.target)};const{snappingOptions:o,view:s,viewModel:a}=e;this.viewModel=a??(this._defaultViewModel=new pe({snappingOptions:o,view:s}))}normalizeCtorArgs(e){const{snappingOptions:t,view:o,viewModel:s,...a}=e;return a}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=R(this._defaultViewModel))}loadDependencies(){return Promise.all([H({block:()=>g(()=>import("./index-ujykA9Eq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]),import.meta.url),button:()=>g(()=>import("./index-BtF7Kdcs.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,21,20,19,17,18,38,47,25,45,27,32]),import.meta.url),input:()=>g(()=>import("./index-Wn4pOF_U.js"),__vite__mapDeps([52,21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19,49,53,54,18,31,17,38,47,25,26,45,27,55,32,50,15,56]),import.meta.url),list:()=>g(()=>import("./index-DbjTV4Hc.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,31,21,49,53,52,54,38,47,25,26,45,27,55,32,50,56,58,59,24,60]),import.meta.url),"list-item":()=>g(()=>import("./index-d5Yy4krW.js"),__vite__mapDeps([61,21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19,22,17,18,23,24,25,26,27,28,29,1,15,30,31,32,33,34,35,36,60,62]),import.meta.url),checkbox:()=>g(()=>import("./index-B7QXL93z.js"),__vite__mapDeps([63,2,3,4,5,6,7,8,9,10,11,12,13,17,18,20,14,47,25,26,45,27]),import.meta.url),loader:()=>g(()=>import("./index-CjrYEQXz.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)}),q()])}initialize(){this.addHandles(F(()=>{var e;return((e=this.view)==null?void 0:e.type)==="2d"&&!!this.view.grid},e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=R(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return n("div",{"aria-label":e,class:this.classes(b.base,W.widget)},n("div",{class:b.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,o=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(t==null?void 0:t.type)==="2d"?this._renderGridEnabledToggle():null].filter(I),s=[e.enabledToggle?this._renderEnabledToggle():null,o.length>0?n("div",{class:b.nestedContainer},o):null].filter(I);return s.length===0?null:n("calcite-block",{class:b.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",label:this.label,open:!0},s)}_renderEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){var T;if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,o=t.layerListViewModel.operationalItems.length>9?n("calcite-input",{class:b.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:({currentTarget:{value:h}})=>{this._layerListFilter=h===""?null:new RegExp(h,"i")}}):null,s=this._secondaryElementsDisabled,a=this.layerListOpen&&!s,r=(T=t.layerListViewModel.operationalItems)==null?void 0:T.find(h=>!!h.children.length);return n("calcite-block",{class:b.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:a,onCalciteBlockToggle:h=>this.layerListOpen=h.currentTarget.open},o,this._renderToggleLayersButton(),n("calcite-list",{class:b.layerList,displayMode:r?"nested":"flat",label:e==null?void 0:e.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){var M;const{view:e,visibleElements:t,snappingManager:o,snappingOptions:s,_openAndReady:a}=this,{gridEnabled:r,enabled:T}=s;(a||(e==null?void 0:e.type)==="2d"&&e.grid)&&this._startLoadGrid();const h=(M=this._gridLoadTask)==null?void 0:M.value,k=h&&(e==null?void 0:e.type)==="2d"&&n(h,{snappingManager:o,snappingOptions:s,view:e,visibleElements:t.gridControlsElements});return n("calcite-block",{class:b.layerListBlock,collapsible:!0,disabled:!r||!T,heading:this.messages.gridOptionsHeading,key:"grid-block",open:a,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},k??n("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=le(async()=>(await g(async()=>{const{default:t}=await import("./GridControls-BYVi6NHs.js");return{default:t}},__vite__mapDeps([64,7,8,3,65,66,67,4,5,6,9,11,10,12,68,69,70,71,72,73,2,13,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222]),import.meta.url)).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(o=>{switch(t?$(o,t):null){case"children":{const s=o.children.filter(a=>$(a,t)!==!1);return this._renderLayerListItemGroup(o,s)}case"self":case null:return this._renderLayerListItemOrGroup(o);case!1:return $(o.parent,t)==="self"?this._renderLayerListItemOrGroup(o):null}}).toArray().filter(I)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,o=e?t.disableAllLayers:t.enableAllLayers;return n("calcite-button",{appearance:"transparent",class:b.layerListButton,label:o,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},o)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,o=e.title||t,s=()=>{var a;this.viewModel.toggleSnappingForLayers([(a=e.layer)==null?void 0:a.id],e.enabled!=="enabled")};return n("calcite-list-item",{class:b.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:o,onCalciteListItemSelect:a=>{a.stopPropagation(),s()}},n("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:s}))}_renderLayerListItemGroup(e,t){const{messages:o}=this,{children:s,title:a}=e,r=a||o.untitledLayer,T=a&&a!==""?a:Z(),h=!!(t!=null&&t.length),k=t??s,M=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")},X=k==null?void 0:k.find(N=>!!N.children.length);return n("calcite-list-item",{class:b.layerListGroup,key:T,label:r,open:h,onCalciteListItemSelect:N=>{N.stopPropagation(),M()}},n("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:M}),n("calcite-list",{displayMode:X?"nested":"flat",label:o==null?void 0:o.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(k)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};l([i()],p.prototype,"_defaultViewModel",void 0),l([i()],p.prototype,"_layerListFilter",void 0),l([i()],p.prototype,"_gridLoadTask",void 0),l([i()],p.prototype,"_openAndReady",null),l([i()],p.prototype,"label",null),l([i({type:Boolean,nonNullable:!0})],p.prototype,"layerListOpen",void 0),l([i({type:Boolean,nonNullable:!0})],p.prototype,"gridOptionsOpen",void 0),l([i(),D("esri/widgets/support/SnappingControls/t9n/SnappingControls")],p.prototype,"messages",void 0),l([i(),D("esri/t9n/common")],p.prototype,"messagesCommon",void 0),l([i()],p.prototype,"snappingOptions",null),l([i()],p.prototype,"snappingManager",void 0),l([i()],p.prototype,"view",null),l([i()],p.prototype,"viewModel",null),l([i({type:V,nonNullable:!0})],p.prototype,"visibleElements",void 0),l([i()],p.prototype,"_enabledToggleDisabled",null),l([i()],p.prototype,"_secondaryElementsDisabled",null),p=l([m("esri.widgets.support.SnappingControls")],p);const ke=p;let c=class extends C{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};l([i({type:Boolean,nonNullable:!0})],c.prototype,"point",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"polyline",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"polygon",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"rectangle",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"circle",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"multipoint",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"mesh",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"freehandPolyline",void 0),l([i({type:Boolean,nonNullable:!0})],c.prototype,"freehandPolygon",void 0),c=l([m("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],c);let E=class extends C{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};l([i({nonNullable:!0})],E.prototype,"rectangle-selection",void 0),l([i({nonNullable:!0})],E.prototype,"lasso-selection",void 0),l([i({nonNullable:!0})],E.prototype,"custom-selection",void 0),E=l([m("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],E);let d=class extends C{constructor(e){super(e),this.createTools=new c,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new E,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new V,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};l([i({type:c,nonNullable:!0})],d.prototype,"createTools",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"directionModePicker",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"duplicateButton",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"deleteButton",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"selectionCountLabel",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"labelsToggle",void 0),l([i({type:E,nonNullable:!0})],d.prototype,"selectionTools",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"settingsMenu",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"snappingControls",void 0),l([i({type:V,nonNullable:!0})],d.prototype,"snappingControlsElements",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"tooltipsToggle",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"undoRedoMenu",void 0),d=l([m("esri.widgets.Sketch.VisibleElements")],d);export{ke as f,Te as k,U as l,V as n,d as p,c as s};
