import{a as l,r as p}from"./executionError-HS8X1L-B.js";import{n as d}from"./TimeOnly-yGYcAQQJ.js";import{F as O,o as J,U as o,y as f,B as u}from"./deepClone-DC5Ed1NQ.js";import{u as c,l as w}from"./SpatialFilter-CYuTxFd5.js";import{a as s}from"./operatorsWorkerConnection-Cx2N5ggJ.js";import"./Accessor-BHnuXKD2.js";import"./opacityUtils-CSd4XoR2.js";import"./index-tefRSezt.js";import"./Promise-CmQqe-ke.js";import"./cast-BA_-jlhc.js";import"./JSONSupport-CGdeqxpk.js";import"./Point-XGrwlf63.js";import"./writer-B2bQV2uU.js";import"./Extent-CBBGeHb-.js";import"./ImmutableArray-BPVd6ESQ.js";import"./shared-M7rSkUll.js";import"./Field-Cyk7Ur5d.js";import"./enumeration-Cr5WIZs4.js";import"./fieldType-L-VlbZqy.js";import"./number-BWHn6sm2.js";import"./Polyline-BmuD2-ZN.js";import"./mathUtils-DV9iOXpW.js";import"./jsonUtils-Cu7OBRmN.js";import"./arcade-CrJG569S.js";import"./featureConversionUtils-DpmsPUmt.js";import"./aaBoundingBox-CeBivBRq.js";import"./OptimizedFeature-DcMLlxvB.js";import"./memoryEstimations-5gFNwkKK.js";import"./OptimizedGeometry-7IxBWtHr.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./FieldsIndex-DFdVonga.js";import"./timeZoneUtils-COos5xIr.js";import"./WhereClause-diW5rNp6.js";import"./unitConversion-BDsSPToO.js";import"./hash-CcEbRgUF.js";import"./uuid-Cl5lrJ4c.js";import"./Portal-CTRRujjZ.js";import"./workers-D8Q3pEzK.js";import"./Queue-BOnccek2.js";import"./SimpleObservable-7oieNGD8.js";import"./intl-Do3GEEJ7.js";function a(i){return async(e,n,t)=>{if(J(t,2,2,e,n),(t=O(t))[0]===null&&t[1]===null)return!1;if(u(t[0])){if(o(t[1]))return new w({parentfeatureset:t[0],relation:i,relationGeom:t[1]});if(t[1]===null)return new c({parentfeatureset:t[0]});throw new l(e,p.InvalidParameter,n)}if(o(t[0])){if(o(t[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":{const m=d(t[0]),r=d(t[1]);return m!=null&&r!=null&&s("intersects",[m.toJSON(),r.toJSON()])}case"esriSpatialRelIntersects":return s("intersects",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelContains":return s("contains",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelOverlaps":return s("overlaps",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelWithin":return s("within",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelTouches":return s("touches",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelCrosses":return s("crosses",[t[0].toJSON(),t[1].toJSON()])}throw new l(e,p.InvalidParameter,n)}if(u(t[1]))return new w({parentfeatureset:t[1],relation:i,relationGeom:t[0]});if(t[1]===null)return!1;throw new l(e,p.InvalidParameter,n)}if(t[0]===null){if(u(t[1]))return new c({parentfeatureset:t[1]});if(o(t[1])||t[1]===null)return!1}throw new l(e,p.InvalidParameter,n)}}function ot(i){i.mode==="async"&&(i.functions.intersects=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelIntersects"))},i.functions.envelopeintersects=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelEnvelopeIntersects"))},i.signatures.push({name:"envelopeintersects",min:2,max:2}),i.functions.contains=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelContains"))},i.functions.overlaps=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelOverlaps"))},i.functions.within=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelWithin"))},i.functions.touches=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelTouches"))},i.functions.crosses=function(e,n){return i.standardFunctionAsync(e,n,a("esriSpatialRelCrosses"))},i.functions.relate=function(e,n){return i.standardFunctionAsync(e,n,async(t,m,r)=>{if(r=O(r),J(r,3,3,e,n),o(r[0])&&o(r[1]))return s("relate",[r[0].toJSON(),r[1].toJSON(),f(r[2])]);if(o(r[0])&&r[1]===null||o(r[1])&&r[0]===null)return!1;if(u(r[0])&&r[1]===null)return new c({parentfeatureset:r[0]});if(u(r[1])&&r[0]===null)return new c({parentfeatureset:r[1]});if(u(r[0])&&o(r[1]))return r[0].relate(r[1],f(r[2]));if(u(r[1])&&o(r[0]))return r[1].relate(r[0],f(r[2]));if(r[0]===null&&r[1]===null)return!1;throw new l(e,p.InvalidParameter,n)})})}export{ot as registerFunctions};
