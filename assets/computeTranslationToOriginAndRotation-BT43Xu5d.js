import{s as p}from"./mathUtils-DV9iOXpW.js";import{s as N,q as O,o as S}from"./mat4-Fi6iAz29.js";import{n as a}from"./vec3f64-BLpZdpfb.js";import{F as M,N as r,L as _}from"./projectBuffer-DOU0xvVi.js";import{c as P}from"./Point-XGrwlf63.js";function R(s,c,t){const C=Math.sin(s),f=Math.cos(s),u=Math.sin(c),o=Math.cos(c),n=t;return n[0]=-C,n[4]=-u*f,n[8]=o*f,n[12]=0,n[1]=f,n[5]=-u*C,n[9]=o*C,n[13]=0,n[2]=0,n[6]=o,n[10]=u,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1,n}function T(s,c,t){return R(s,c,t),N(t,t),t}function h(s,c,t,C){const f=M(s,C);if(f==null)return!1;const u=f.source.spatialReferenceId,o=f.dest.spatialReferenceId;if(u===o&&!l(o)&&(u!==r.UNKNOWN||P(s,C)))return O(t,c),!0;if(l(o)){const E=_[u][r.LON_LAT],L=_[r.LON_LAT][o];return E!=null&&L!=null&&(E(c,0,i,0),L(i,0,e,0),R(A*i[0],A*i[1],t),t[12]=e[0],t[13]=e[1],t[14]=e[2],!0)}const n=l(u);if((o===r.WEB_MERCATOR||o===r.PLATE_CARREE||o===r.WGS84||o===r.CGCS2000)&&(u===r.WGS84||n||u===r.WEB_MERCATOR||u===r.CGCS2000)){const E=_[u][r.LON_LAT],L=_[r.LON_LAT][o];return E!=null&&L!=null&&(E(c,0,i,0),L(i,0,e,0),n?T(A*i[0],A*i[1],t):S(t),t[12]=e[0],t[13]=e[1],t[14]=e[2],!0)}return!1}function l(s){return s===r.SPHERICAL_ECEF||s===r.SPHERICAL_MARS_PCPF||s===r.SPHERICAL_MOON_PCPF||s===r.WGS84_ECEF}const A=p(1),i=a(),e=a();export{h as m,R as n};
