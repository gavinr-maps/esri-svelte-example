import{o as st,c as z,A as x,s as X,g as V,u as F,_ as k,E as Lt,P as mt}from"./vec32-Dvg_eL9J.js";import{r as b,t as Mt,n as G}from"./vec3f32-nZdmKIgz.js";import{n as U,t as gt,r as dt}from"./vec3f64-BLpZdpfb.js";import{t as bt}from"./aaBoundingBox-Dw3yBk2f.js";import{n as q,f as v,b as At}from"./FloatArray-BQXWSSJh.js";import{o as Et,w as yt}from"./Indices-D8XWalpO.js";import{M as Ut,l as xt,x as Ct}from"./plane-CpXmOyqq.js";import{k as Ft}from"./sphere-Cin5efBj.js";import{t as T}from"./Attribute-DGhdp5lO.js";import{e as Nt}from"./Material-C_-mgXN8.js";import{s as Y}from"./InterleavedLayout-_dYEAUNK.js";import{e as y}from"./VertexAttribute-Cq4MnHjR.js";var wt;(function(c){function o(s,h){const f=s[h],e=s[h+1],u=s[h+2];return Math.sqrt(f*f+e*e+u*u)}function n(s,h){const f=s[h],e=s[h+1],u=s[h+2],w=1/Math.sqrt(f*f+e*e+u*u);s[h]*=w,s[h+1]*=w,s[h+2]*=w}function t(s,h,f){s[h]*=f,s[h+1]*=f,s[h+2]*=f}function r(s,h,f,e,u,w=h){(u=u||s)[w]=s[h]+f[e],u[w+1]=s[h+1]+f[e+1],u[w+2]=s[h+2]+f[e+2]}function O(s,h,f,e,u,w=h){(u=u||s)[w]=s[h]-f[e],u[w+1]=s[h+1]-f[e+1],u[w+2]=s[h+2]-f[e+2]}c.length=o,c.normalize=n,c.scale=t,c.add=r,c.subtract=O})(wt||(wt={}));const Z=wt,ct=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],vt=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],Vt=[0,0,1,0,1,1,0,1],Gt=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Pt=new Array(36);for(let c=0;c<6;c++)for(let o=0;o<6;o++)Pt[6*c+o]=c;const B=new Array(36);for(let c=0;c<6;c++)B[6*c]=0,B[6*c+1]=1,B[6*c+2]=2,B[6*c+3]=2,B[6*c+4]=3,B[6*c+5]=0;function u0(c,o){Array.isArray(o)||(o=[o,o,o]);const n=new Array(24);for(let t=0;t<8;t++)n[3*t]=ct[t][0]*o[0],n[3*t+1]=ct[t][1]*o[1],n[3*t+2]=ct[t][2]*o[2];return new v(c,[[y.POSITION,new T(n,Gt,3,!0)],[y.NORMAL,new T(vt,Pt,3)],[y.UV0,new T(Vt,B,2)]])}const at=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],qt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],zt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],Dt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function h0(c,o){Array.isArray(o)||(o=[o,o,o]);const n=new Array(18);for(let t=0;t<6;t++)n[3*t]=at[t][0]*o[0],n[3*t+1]=at[t][1]*o[1],n[3*t+2]=at[t][2]*o[2];return new v(c,[[y.POSITION,new T(n,zt,3,!0)],[y.NORMAL,new T(qt,Dt,3)]])}const tt=b(-.5,0,-.5),et=b(.5,0,-.5),nt=b(0,0,.5),rt=b(0,.5,0),_=G(),H=G(),K=G(),Q=G(),W=G();z(_,tt,rt),z(H,tt,et),k(K,_,H),x(K,K),z(_,et,rt),z(H,et,nt),k(Q,_,H),x(Q,Q),z(_,nt,rt),z(H,nt,tt),k(W,_,H),x(W,W);const ft=[tt,et,nt,rt],jt=[0,-1,0,K[0],K[1],K[2],Q[0],Q[1],Q[2],W[0],W[1],W[2]],kt=[0,1,2,3,1,0,3,2,1,3,0,2],Bt=[0,0,0,1,1,1,2,2,2,3,3,3];function l0(c,o){Array.isArray(o)||(o=[o,o,o]);const n=new Array(12);for(let t=0;t<4;t++)n[3*t]=ft[t][0]*o[0],n[3*t+1]=ft[t][1]*o[1],n[3*t+2]=ft[t][2]*o[2];return new v(c,[[y.POSITION,new T(n,kt,3,!0)],[y.NORMAL,new T(jt,Bt,3)]])}function c0(c,o,n,t,r={uv:!0}){const O=-Math.PI,s=2*Math.PI,h=-Math.PI/2,f=Math.PI,e=Math.max(3,Math.floor(n)),u=Math.max(2,Math.floor(t)),w=(e+1)*(u+1),m=q(3*w),P=q(3*w),N=q(2*w),A=[];let a=0;for(let i=0;i<=u;i++){const d=[],l=i/u,S=h+l*f,R=Math.cos(S);for(let E=0;E<=e;E++){const D=E/e,p=O+D*s,C=Math.cos(p)*R,L=Math.sin(S),$=-Math.sin(p)*R;m[3*a]=C*o,m[3*a+1]=L*o,m[3*a+2]=$*o,P[3*a]=C,P[3*a+1]=L,P[3*a+2]=$,N[2*a]=D,N[2*a+1]=l,d.push(a),++a}A.push(d)}const M=new Array;for(let i=0;i<u;i++)for(let d=0;d<e;d++){const l=A[i][d],S=A[i][d+1],R=A[i+1][d+1],E=A[i+1][d];i===0?(M.push(l),M.push(R),M.push(E)):i===u-1?(M.push(l),M.push(S),M.push(R)):(M.push(l),M.push(S),M.push(R),M.push(R),M.push(E),M.push(l))}const g=[[y.POSITION,new T(m,M,3,!0)],[y.NORMAL,new T(P,M,3,!0)]];return r.uv&&g.push([y.UV0,new T(N,M,2,!0)]),r.offset&&(g[0][0]=y.OFFSET,g.push([y.POSITION,new T(Float64Array.from(r.offset),yt(M.length),3,!0)])),new v(c,g)}function a0(c,o,n,t){const r=Zt(o,n,t);return new v(c,r)}function Zt(c,o,n){const t=c;let r,O;if(n)r=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],O=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const e=t*(1+Math.sqrt(5))/2;r=[-t,e,0,t,e,0,-t,-e,0,t,-e,0,0,-t,e,0,t,e,0,-t,-e,0,t,-e,e,0,-t,e,0,t,-e,0,-t,-e,0,t],O=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let e=0;e<r.length;e+=3)Z.scale(r,e,c/Z.length(r,e));let s={};function h(e,u){e>u&&([e,u]=[u,e]);const w=e.toString()+"."+u.toString();if(s[w])return s[w];let m=r.length;return r.length+=3,Z.add(r,3*e,r,3*u,r,m),Z.scale(r,m,c/Z.length(r,m)),m/=3,s[w]=m,m}for(let e=0;e<o;e++){const u=O.length,w=new Array(4*u);for(let m=0;m<u;m+=3){const P=O[m],N=O[m+1],A=O[m+2],a=h(P,N),M=h(N,A),g=h(A,P),i=4*m;w[i]=P,w[i+1]=a,w[i+2]=g,w[i+3]=N,w[i+4]=M,w[i+5]=a,w[i+6]=A,w[i+7]=g,w[i+8]=M,w[i+9]=a,w[i+10]=M,w[i+11]=g}O=w,s={}}const f=At(r);for(let e=0;e<f.length;e+=3)Z.normalize(f,e);return[[y.POSITION,new T(At(r),O,3,!0)],[y.NORMAL,new T(f,O,3,!0)]]}function f0(c,o={}){const{normal:n,position:t,color:r,rotation:O,size:s,centerOffsetAndDistance:h,uvs:f,featureAttribute:e,objectAndLayerIdColor:u=null}=o,w=t?gt(t):U(),m=n?gt(n):dt(0,0,1),P=r?[255*r[0],255*r[1],255*r[2],r.length>3?255*r[3]:255]:[255,255,255,255],N=s!=null&&s.length===2?s:[1,1],A=O!=null?[O]:[0],a=yt(1),M=[[y.POSITION,new T(w,a,3,!0)],[y.NORMAL,new T(m,a,3,!0)],[y.COLOR,new T(P,a,4,!0)],[y.SIZE,new T(N,a,2)],[y.ROTATION,new T(A,a,1,!0)]];if(f&&M.push([y.UV0,new T(f,a,f.length)]),h!=null){const g=[h[0],h[1],h[2],h[3]];M.push([y.CENTEROFFSETANDDISTANCE,new T(g,a,4)])}if(e){const g=[e[0],e[1],e[2],e[3]];M.push([y.FEATUREATTRIBUTE,new T(g,a,4)])}return new v(c,M,null,Nt.Point,u)}const _t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function i0(c,o=_t){const n=new Array(12);for(let e=0;e<4;e++)for(let u=0;u<3;u++)n[3*e+u]=o[e][u];const t=[0,1,2,2,3,0],r=[0,0,1],O=[0,0,0,0,0,0],s=[0,0,1,0,1,1,0,1],h=[255,255,255,255],f=[[y.POSITION,new T(n,t,3,!0)],[y.NORMAL,new T(r,O,3,!0)],[y.UV0,new T(s,t,2,!0)],[y.COLOR,new T(h,O,4,!0)]];return new v(c,f)}function Ht(c,o,n,t,r=!0,O=!0){let s=0;const h=o,f=c;let e=b(0,s,0),u=b(0,s+f,0),w=b(0,-1,0),m=b(0,1,0);t&&(s=f,u=b(0,0,0),e=b(0,s,0),w=b(0,1,0),m=b(0,-1,0));const P=[u,e],N=[w,m],A=n+2,a=Math.sqrt(f*f+h*h);if(t)for(let l=n-1;l>=0;l--){const S=l*(2*Math.PI/n),R=b(Math.cos(S)*h,s,Math.sin(S)*h);P.push(R);const E=b(f*Math.cos(S)/a,-h/a,f*Math.sin(S)/a);N.push(E)}else for(let l=0;l<n;l++){const S=l*(2*Math.PI/n),R=b(Math.cos(S)*h,s,Math.sin(S)*h);P.push(R);const E=b(f*Math.cos(S)/a,h/a,f*Math.sin(S)/a);N.push(E)}const M=new Array,g=new Array;if(r){for(let l=3;l<P.length;l++)M.push(1),M.push(l-1),M.push(l),g.push(0),g.push(0),g.push(0);M.push(P.length-1),M.push(2),M.push(1),g.push(0),g.push(0),g.push(0)}if(O){for(let l=3;l<P.length;l++)M.push(l),M.push(l-1),M.push(0),g.push(l),g.push(l-1),g.push(1);M.push(0),M.push(2),M.push(P.length-1),g.push(1),g.push(2),g.push(N.length-1)}const i=q(3*A);for(let l=0;l<A;l++)i[3*l]=P[l][0],i[3*l+1]=P[l][1],i[3*l+2]=P[l][2];const d=q(3*A);for(let l=0;l<A;l++)d[3*l]=N[l][0],d[3*l+1]=N[l][1],d[3*l+2]=N[l][2];return[[y.POSITION,new T(i,M,3,!0)],[y.NORMAL,new T(d,g,3,!0)]]}function w0(c,o,n,t,r,O=!0,s=!0){return new v(c,Ht(o,n,t,r,O,s))}function O0(c,o,n,t,r,O,s){const h=r?Mt(r):b(1,0,0),f=O?Mt(O):b(0,0,0);s??(s=!0);const e=G();x(e,h);const u=G();V(u,e,Math.abs(o));const w=G();V(w,u,-.5),F(w,w,f);const m=b(0,1,0);Math.abs(1-mt(e,m))<.2&&st(m,0,0,1);const P=G();k(P,e,m),x(P,P),k(m,P,e);const N=2*t+(s?2:0),A=t+(s?2:0),a=q(3*N),M=q(3*A),g=q(2*N),i=new Array(3*t*(s?4:2)),d=new Array(3*t*(s?4:2));s&&(a[3*(N-2)]=w[0],a[3*(N-2)+1]=w[1],a[3*(N-2)+2]=w[2],g[2*(N-2)]=0,g[2*(N-2)+1]=0,a[3*(N-1)]=a[3*(N-2)]+u[0],a[3*(N-1)+1]=a[3*(N-2)+1]+u[1],a[3*(N-1)+2]=a[3*(N-2)+2]+u[2],g[2*(N-1)]=1,g[2*(N-1)+1]=1,M[3*(A-2)]=-e[0],M[3*(A-2)+1]=-e[1],M[3*(A-2)+2]=-e[2],M[3*(A-1)]=e[0],M[3*(A-1)+1]=e[1],M[3*(A-1)+2]=e[2]);const l=(p,C,L)=>{i[p]=C,d[p]=L};let S=0;const R=G(),E=G();for(let p=0;p<t;p++){const C=p*(2*Math.PI/t);V(R,m,Math.sin(C)),V(E,P,Math.cos(C)),F(R,R,E),M[3*p]=R[0],M[3*p+1]=R[1],M[3*p+2]=R[2],V(R,R,n),F(R,R,w),a[3*p]=R[0],a[3*p+1]=R[1],a[3*p+2]=R[2],g[2*p]=p/t,g[2*p+1]=0,a[3*(p+t)]=a[3*p]+u[0],a[3*(p+t)+1]=a[3*p+1]+u[1],a[3*(p+t)+2]=a[3*p+2]+u[2],g[2*(p+t)]=p/t,g[2*p+1]=1;const L=(p+1)%t;l(S++,p,p),l(S++,p+t,p),l(S++,L,L),l(S++,L,L),l(S++,p+t,p),l(S++,L+t,L)}if(s){for(let p=0;p<t;p++){const C=(p+1)%t;l(S++,N-2,A-2),l(S++,p,A-2),l(S++,C,A-2)}for(let p=0;p<t;p++){const C=(p+1)%t;l(S++,p+t,A-1),l(S++,N-1,A-1),l(S++,C+t,A-1)}}const D=[[y.POSITION,new T(a,i,3,!0)],[y.NORMAL,new T(M,d,3,!0)],[y.UV0,new T(g,i,2,!0)]];return new v(c,D)}function M0(c,o,n,t,r,O){t=t||10,r=r==null||r,Y(o.length>1);const s=[[0,0,0]],h=[],f=[];for(let e=0;e<t;e++){h.push([0,-e-1,-(e+1)%t-1]);const u=e/t*2*Math.PI;f.push([Math.cos(u)*n,Math.sin(u)*n])}return Jt(c,f,o,s,h,r,O)}function Jt(c,o,n,t,r,O,s=b(0,0,0)){const h=o.length,f=q(n.length*h*3+(6*t.length||0)),e=q(n.length*h*3+(t?6:0)),u=new Array,w=new Array;let m=0,P=0;const N=U(),A=U(),a=U(),M=U(),g=U(),i=U(),d=U(),l=U(),S=U(),R=U(),E=U(),D=U(),p=U(),C=Ut();st(S,0,1,0),z(A,n[1],n[0]),x(A,A),O?(F(l,n[0],s),x(a,l)):st(a,0,0,1),pt(A,a,S,S,g,a,It),X(M,a),X(D,g);for(let I=0;I<t.length;I++)V(i,g,t[I][0]),V(l,a,t[I][2]),F(i,i,l),F(i,i,n[0]),f[m++]=i[0],f[m++]=i[1],f[m++]=i[2];e[P++]=-A[0],e[P++]=-A[1],e[P++]=-A[2];for(let I=0;I<r.length;I++)u.push(r[I][0]>0?r[I][0]:-r[I][0]-1+t.length),u.push(r[I][1]>0?r[I][1]:-r[I][1]-1+t.length),u.push(r[I][2]>0?r[I][2]:-r[I][2]-1+t.length),w.push(0),w.push(0),w.push(0);let L=t.length;const $=t.length-1;for(let I=0;I<n.length;I++){let Ot=!1;I>0&&(X(N,A),I<n.length-1?(z(A,n[I+1],n[I]),x(A,A)):Ot=!0,F(R,N,A),x(R,R),F(E,n[I-1],M),xt(n[I],R,C),Ct(C,Ft(E,N),l)?(z(l,l,n[I]),x(a,l),k(g,R,a),x(g,g)):pt(R,M,D,S,g,a,It),X(M,a),X(D,g)),O&&(F(l,n[I],s),x(p,l));for(let j=0;j<h;j++)if(V(i,g,o[j][0]),V(l,a,o[j][1]),F(i,i,l),x(d,i),e[P++]=d[0],e[P++]=d[1],e[P++]=d[2],F(i,i,n[I]),f[m++]=i[0],f[m++]=i[1],f[m++]=i[2],!Ot){const ht=(j+1)%h;u.push(L+j),u.push(L+h+j),u.push(L+ht),u.push(L+ht),u.push(L+h+j),u.push(L+h+ht);for(let lt=0;lt<6;lt++){const Rt=u.length-6;w.push(u[Rt+lt]-$)}}L+=h}const Tt=n[n.length-1];for(let I=0;I<t.length;I++)V(i,g,t[I][0]),V(l,a,t[I][1]),F(i,i,l),F(i,i,Tt),f[m++]=i[0],f[m++]=i[1],f[m++]=i[2];const ot=P/3;e[P++]=A[0],e[P++]=A[1],e[P++]=A[2];const ut=L-h;for(let I=0;I<r.length;I++)u.push(r[I][0]>=0?L+r[I][0]:-r[I][0]-1+ut),u.push(r[I][2]>=0?L+r[I][2]:-r[I][2]-1+ut),u.push(r[I][1]>=0?L+r[I][1]:-r[I][1]-1+ut),w.push(ot),w.push(ot),w.push(ot);const St=[[y.POSITION,new T(f,u,3,!0)],[y.NORMAL,new T(e,w,3,!0)]];return new v(c,St)}function g0(c,o,n,t){Y(o.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Y(o[0].length===3,"createPolylineGeometry(): malformed vertex"),Y(n==null||n.length===o.length,"createPolylineGeometry: need same number of points and normals"),Y(n==null||n[0].length===3,"createPolylineGeometry(): malformed normal");const r=bt(3*o.length),O=new Array(2*(o.length-1));let s=0,h=0;for(let e=0;e<o.length;e++){for(let u=0;u<3;u++)r[s++]=o[e][u];e>0&&(O[h++]=e-1,O[h++]=e)}const f=[[y.POSITION,new T(r,O,3,!0)]];if(n){const e=q(3*n.length);let u=0;for(let w=0;w<o.length;w++)for(let m=0;m<3;m++)e[u++]=n[w][m];f.push([y.NORMAL,new T(e,O,3,!0)])}return t&&f.push([y.COLOR,new T(t,Et(t.length/4),4)]),new v(c,f,null,Nt.Line)}function A0(c,o,n,t,r,O=0){const s=new Array(18),h=[[-n,O,r/2],[t,O,r/2],[0,o+O,r/2],[-n,O,-r/2],[t,O,-r/2],[0,o+O,-r/2]],f=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let e=0;e<6;e++)s[3*e]=h[e][0],s[3*e+1]=h[e][1],s[3*e+2]=h[e][2];return new v(c,[[y.POSITION,new T(s,f,3,!0)]])}function p0(c,o){const n=c.getMutableAttribute(y.POSITION).data;for(let t=0;t<n.length;t+=3){const r=n[t],O=n[t+1],s=n[t+2];st(J,r,O,s),Lt(J,J,o),n[t]=J[0],n[t+1]=J[1],n[t+2]=J[2]}}function I0(c,o=c){const n=c.attributes,t=n.get(y.POSITION).data,r=n.get(y.NORMAL).data;if(r){const O=o.getMutableAttribute(y.NORMAL).data;for(let s=0;s<r.length;s+=3){const h=r[s+1];O[s+1]=-r[s+2],O[s+2]=h}}if(t){const O=o.getMutableAttribute(y.POSITION).data;for(let s=0;s<t.length;s+=3){const h=t[s+1];O[s+1]=-t[s+2],O[s+2]=h}}}function it(c,o,n,t,r){return!(Math.abs(mt(o,c))>r)&&(k(n,c,o),x(n,n),k(t,n,c),x(t,t),!0)}function pt(c,o,n,t,r,O,s){return it(c,o,r,O,s)||it(c,n,r,O,s)||it(c,t,r,O,s)}const It=.99619469809,J=U();export{h0 as B,u0 as F,pt as M,p0 as O,w0 as a,Ht as c,l0 as e,O0 as f,A0 as g,Jt as i,f0 as l,I0 as m,c0 as o,M0 as p,Zt as r,a0 as s,i0 as u,g0 as w};
