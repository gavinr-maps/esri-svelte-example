const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./geometryEngineAsync-Bu-rYQUP.js","./geometry-D964gYQX.js","./subclass-BZA_h8Db.js","./Extent-Bf3YTe7m.js","./tslib.es6-B3Jf3DVX.js","./Point-Cg0-ChZE.js","./Accessor-BLX9ikPh.js","./cast-Bjksrh93.js","./writer-DNAwXnhG.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./jsonMap-0cxwUWs2.js","./Polyline-D9YkgmM_.js","./mathUtils-C4_ghTv4.js","./workers-D4HfeYKj.js","./Queue-yu3bZ02p.js","./SimpleObservable-KocWTzVy.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./jsonUtils-CEfjT-BK.js","./ElevationProfileView2D-CBMoLWnc.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./Evented-BHRw9x22.js","./shared-B3wH2qpO.js","./HoveredPoints-C_ozFE_B.js","./AnchorElementViewModel-DhGwA7fN.js","./projection-B971H0Re.js","./vec3f64-BLpZdpfb.js","./projectBuffer-Bs7GwaPY.js","./geodesicConstants-DWQLYX7F.js","./layerViewUtils-DhFEu8Rd.js","./memoize-DsJmrG76.js","./jsxFactory-CJa39Fro.js","./Promise-B2Hu02L7.js","./uuid-fwrPAdZb.js","./Graphic-DsxsIjhH.js","./PopupTemplate-BHMhS05j.js","./Clonable-D3rtuBWg.js","./fieldUtils-tmQlKvWo.js","./enumeration-Ba5njXdz.js","./Color-BCS62Hs5.js","./colorUtils-0bJDPow9.js","./ActionToggle-iT4slXc7.js","./Identifiable-B1UbsKNt.js","./symbols-CNimns--.js","./TextSymbol-D8QO_KUV.js","./screenUtils-_ZIvrt5o.js","./materialUtils-DarhapKC.js","./opacityUtils-C68Tlu6_.js","./aaBoundingBox-BE7cC1jD.js","./persistableUrlUtils-fa1mAujs.js","./collectionUtils-D_lHIu88.js","./Portal-C10FKnaA.js","./Loadable-BabW5Xcc.js","./ByteSizeUnit-BsxeN7wM.js","./LRUCache-B_PHMSGm.js","./MemCache-Dx1v3xLC.js","./ElevationQueryTileCache-D4sXpJpw.js","./projectVectorToVector-G2uWGoIb.js","./projectPointToVector-GINIbYMz.js","./LayerConstants-B33OP6sh.js","./layerUtils-BrNoooE9.js","./Material-_xx7OZxD.js","./interfaces-DDtDqZYj.js","./VertexAttribute-Cq4MnHjR.js","./boundedPlane-EV1sS2Ke.js","./sphere-C77djCO6.js","./mat4-GpOFENPA.js","./common-DQOJ18NT.js","./vec32-Dvg_eL9J.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./mat3-BRl2i9Bz.js","./mat3f64-BBpwCtoL.js","./plane-IENfwZlB.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./vec2f64-miziP1SN.js","./mathUtils-BG-eq9fO.js","./lineSegment-D7sKPPYf.js","./ViewingMode-Dodu7ZZk.js","./ElevationProvider-C95wyCKc.js","./dehydratedFeatureUtils-B--Sgpdi.js","./intersectorUtils-BK9EUwUf.js","./verticalOffsetUtils-BDQLpfho.js","./orientedBoundingBox-DOAJUK5g.js","./quat-4pa1e6ds.js","./spatialReferenceEllipsoidUtils-DBE_OFra.js","./computeTranslationToOriginAndRotation-Q27G6TBL.js","./intersectorUtilsConversions-D_fcRVdX.js","./Intersector-wXoCuQ8W.js","./Intersector-BQ92CPLA.js","./defaultUnit-_T4IY-sW.js","./getDefaultUnitForView-Ce2vZZap.js","./throttle-jjSnxk80.js","./elevationInfoUtils-BC_66_Fg.js","./unitConversionUtils-BMfW9yAe.js","./lengthUtils-DL1-FDQQ.js","./vec2-maR1OrZI.js","./geodesicUtils-FCYOaNwu.js","./QueueProcessor-DZiVr5XH.js","./ReactiveMap-6CfRGOlR.js","./signal-D4lghLjV.js","./Scheduler-CJu5awNf.js","./debugFlags-BF6Z0j0F.js","./traversalUtils-DmE6QkgJ.js","./Ground-CAIVlzbd.js","./compilerUtils-Dw3R0f-Z.js","./loadAll-B6mYSptb.js","./ElevationQuery-C0bbwpsV.js","./ElevationSamplerData-DF8Bl6I9.js","./ElevationTile-F2xXmLtF.js","./TileKey-DZd6gJy7.js","./GraphicsLayer-i3FeUJ_n.js","./GraphicsCollection-FfahqxsR.js","./Layer-CVt7Hb5J.js","./TimeExtent-DocT5yPf.js","./timeUtils-8fb_2oAt.js","./BlendLayer-CXM4n_Ge.js","./jsonUtils-CSnQD004.js","./parser-CTsgEym6.js","./utils-93yNk4Xc.js","./mat4f32-DcsiF_Rp.js","./ScaleRangeLayer-Bb8Ig1Hz.js","./ElevationInfo-CA5m_tHv.js","./InputManager-Ba9xzDpe.js","./SketchViewModel-BKa9ySXO.js","./isSupportedObject-6I_Nw0mS.js","./SketchLabelOptions-DDQnGNSN.js","./angularMeasurementUtils-7e2vxqzG.js","./Cyclical-oTUX3aX7.js","./quantityUtils-D0GB2dMc.js","./layerUtils-BS1Di3Pm.js","./keybindings-DoOdil3D.js","./SnappingManager-BJPyuu7J.js","./Query-5Xpquc1r.js","./DataLayerSource-BKkswDvG.js","./Field-ybkHhtnK.js","./fieldType-BuzM0UHS.js","./FullTextSearch-Csd1Hktu.js","./utils-BpB3MnW1.js","./Version-BSlAgupz.js","./geometry2dUtils-DdyQE7AQ.js","./viewUtils-DrPohWV3.js","./hitTestSelectUtils-UXJPjatw.js","./screenUtils-WcqhHU65.js","./unitFormatUtils-CZ2bRlFg.js","./UnitSelect-Bx5aDsPO.js","./globalCss-CZa70j6i.js","./ElevationProfileView3D-CKuyZY5c.js","./settings-BHWvAK7h.js","./colorUtils-aL8wj-8G.js","./ExtendedLineVisualElement-BaVIzd5h.js","./frustum-CQrOepbv.js","./EngineVisualElement-DAbK0X3b.js","./RibbonLine.glsl-BZu1FDpE.js","./hydratedFeatures-DBKLr8hT.js","./Texture-Fac_8AOC.js","./BindType-BmZEZMMh.js","./Util-BIfApRF5.js","./Texture-Begq2x5n.js","./enums-D9v74xTE.js","./renderState-DQLu6AJX.js","./Matrix3DrawUniform-CiBFaSz6.js","./ShaderTechniqueConfiguration-CBbn2DCi.js","./Indices-DflDlU4Z.js","./triangle-PTGDC_xJ.js","./AlphaCutoff-UcccL64p.js","./requestImageUtils-DgMiQwsm.js","./sdfPrimitives-CUWZbMRe.js","./vec3f32-nZdmKIgz.js","./doublePrecisionUtils-B0owpBza.js","./floatRGBA-CfH_2xsy.js","./Octree-C8d4sqjv.js","./InterleavedLayout-e-di2fxs.js","./BufferView-_QDXRCew.js","./Float4DrawUniform-N58YDhuZ.js","./MergedRenderer-Dli9s1X5.js","./VertexArrayObject-lPxPk5E-.js","./NestedMap-GuqgquCN.js","./glUtil-D0YUa0ow.js","./VertexElementDescriptor-BOD-G50G.js","./VisualElement-Bz1W-x8t.js","./LaserlineVisualElement-CUgS0u0n.js","./Blit-B-VutIER.js","./BufferObject-BVi1lwBq.js","./OverlayCompositing.glsl-CiE3Tt8y.js","./axisAngleDegrees-Ci2HA7Jo.js","./weather-eV4wTXCK.js","./HighlightDefaults-D4ckYWWJ.js","./lineStippleUtils-C89mzWlO.js","./OutlineVisualElement-JiMQm3sc.js","./line-CML3g7Ng.js","./line-DxZlo8wx.js","./triangulationUtils-DWWEtF_0.js","./earcut-Lltz9D9k.js","./deduplicate-DIJK2kGw.js","./GraphicState-Ch3zkYKf.js","./calcite-icon-Cu0W9dtm.js","./icon-BQO9J86c.js","./dom-D_AJDzAj.js","./observers-D2xgmA06.js","./calcite-action-Bys6x4p_.js","./action-D0Er9Ef6.js","./interactive-y84HQRWL.js","./loadable-DM18hPdE.js","./locale-A4FuYD8q.js","./key-D63ExP77.js","./component-6CIDVndn.js","./t9n-D0ry3MEw.js","./loader-C-zIPscB.js","./calcite-checkbox-B8olv0Y9.js","./form-BZPQ5PUM.js","./label-DEe8AW1C.js","./calcite-label-B1FxWqaL.js","./calcite-tooltip-rE_jVYtd.js","./floating-ui-Bma_zPVt.js","./debounce-BOqmhDXu.js","./openCloseComponent-CmOrfBN-.js","./FloatingArrow-BBdsG5MP.js","./calcite-popover-5MaBc2pF.js","./popover-Q5ruM4hh.js","./focusTrapComponent-BSUg_DLj.js","./Heading-D7P0OjYI.js","./calcite-button-D_Agetwz.js","./button-9P4PM9SO.js","./calcite-loader-DP4PIFO8.js","./chartUtils-ClMOAwP3.js","./ResponsiveTheme-Davkijyt.js","./Theme-CClEG6aO.js","./chartUtilsAm5-SdAMhygp.js","./Tooltip-CbvbKhee.js","./DefaultTheme-DgyNOTWV.js","./themeUtils-C3zvZbsE.js","./LineSeries-CHF2Cw04.js","./ColorSet-m18wwIVg.js","./Tick-CpbeWzTs.js","./Button-CkcQ3mkT.js"])))=>i.map(i=>d[i]);
import{_ as x}from"./index-Bh2oEzTI.js";import{r as o}from"./tslib.es6-B3Jf3DVX.js";import{d as Te}from"./asyncUtils-CWX51uTe.js";import{s as se,I as Lt,c as Ut,U as Vt,b as me,p as At,e as ce,j as ze,a6 as Bt,q as B,D as je,Y as zt,u as Nt}from"./Accessor-BLX9ikPh.js";import{t as F}from"./memoize-DsJmrG76.js";import{watch as I,syncAndInitial as ie,sync as dt,on as De,when as Gt,initial as Qe}from"./reactiveUtils-C5zUhJQJ.js";import{O as qe,a8 as qt,m as r,a as R,t as _e,aE as vt,e as ke,n as Ye}from"./subclass-BZA_h8Db.js";import{e as Ce,B as Se,r as Oe,n as v,s as Re,o as Zt}from"./jsxFactory-CJa39Fro.js";import{d as mt}from"./Graphic-DsxsIjhH.js";import{E as Ht}from"./ByteSizeUnit-BsxeN7wM.js";import{V as Ne}from"./Collection-CEdjem1-.js";import{n as Ft}from"./collectionUtils-D_lHIu88.js";import{e as Wt}from"./LRUCache-B_PHMSGm.js";import{I as Le,z as he,g as _t,W as ue,d as jt,j as Qt,i as Yt,ar as Kt,aq as Xt,ab as Ke}from"./Point-Cg0-ChZE.js";import{R as Xe,t as Jt}from"./ElevationQueryTileCache-D4sXpJpw.js";import{e as ei}from"./defaultUnit-_T4IY-sW.js";import{e as ft}from"./throttle-jjSnxk80.js";import{h as ti,f as ii,a as gt}from"./elevationInfoUtils-BC_66_Fg.js";import{r as ni}from"./vec4f64-o2zAXfmz.js";import{p as si}from"./Material-_xx7OZxD.js";import{x as oi,o as yt}from"./mathUtils-C4_ghTv4.js";import{m as ri,_ as li}from"./vec2-maR1OrZI.js";import{I as ai,o as ci}from"./vec32-Dvg_eL9J.js";import{d as Ze,u as ui,X as hi}from"./Polyline-D9YkgmM_.js";import{N as Je,K as Ge}from"./projection-B971H0Re.js";import{R as pi,y as di,q as vi,j as bt}from"./geodesicUtils-FCYOaNwu.js";import{_ as mi}from"./QueueProcessor-DZiVr5XH.js";import{g as _i}from"./Scheduler-CJu5awNf.js";import{n as fi}from"./traversalUtils-DmE6QkgJ.js";import{l as Q}from"./Color-BCS62Hs5.js";import{o as gi}from"./Evented-BHRw9x22.js";import{n as yi}from"./uuid-fwrPAdZb.js";import{b as bi}from"./Ground-CAIVlzbd.js";import{GeometryDescriptor as wt}from"./ElevationQuery-C0bbwpsV.js";import{n as et}from"./vec3f64-BLpZdpfb.js";import{b as wi,S as Ci}from"./sphere-C77djCO6.js";import{T as Si}from"./dehydratedFeatureUtils-B--Sgpdi.js";import{e as Pi}from"./intersectorUtils-BK9EUwUf.js";import{m as Ei}from"./intersectorUtilsConversions-D_fcRVdX.js";import $i from"./GraphicsLayer-i3FeUJ_n.js";import{d as ki}from"./symbols-CNimns--.js";import{d as xi}from"./TextSymbol-D8QO_KUV.js";import{_ as Ii}from"./InputManager-Ba9xzDpe.js";import{c as Ri}from"./SketchViewModel-BKa9ySXO.js";import{s as Mi}from"./intl-CChhNOV8.js";import{g as tt,w as it}from"./unitFormatUtils-CZ2bRlFg.js";import{n as Di}from"./UnitSelect-Bx5aDsPO.js";import{e as Ve}from"./globalCss-CZa70j6i.js";const k="esri-elevation-profile",E={base:`${k}`,portrait:`${k}--portrait`,refined:`${k}--refined`,mainContainer:`${k}__main-container`,promptContainer:`${k}__prompt-container`,header:`${k}__header`,zoomOutButton:`${k}__zoom-out-button`,clearButton:`${k}__clear-button`,actionButton:`${k}__action-button`,sketchButton:`${k}__sketch-button`,sketchCancelButton:`${k}__sketch-cancel-button`,sketchDoneButton:`${k}__sketch-done-button`,selectButton:`${k}__select-button`,selectCancelButton:`${k}__select-cancel-button`,chartContainer:`${k}__chart-container`,chartSpinner:`${k}__chart-spinner`,chartSpinnerVisible:`${k}__chart-spinner--visible`,chartSpinnerSmall:`${k}__chart-spinner--small`,footer:`${k}__footer`},Ti={base:"esri-elevation-profile-legend"},X="esri-elevation-profile-legend-item",J={base:X,disabled:`${X}--disabled`,expanded:`${X}--expanded`,colorIndicator:`${X}__color-indicator`,header:`${X}__header`,content:`${X}__content`,collapseToggle:`${X}__collapse-toggle`,label:`${X}__label`,checkbox:`${X}__checkbox`},ye="esri-elevation-profile-statistics",be={base:ye,statistic:`${ye}__statistic`,statisticLabel:`${ye}__statistic__label`,statisticValue:`${ye}__statistic__value`,slopeValue:`${ye}__slope-value`},xe="esri-elevation-profile-settings",Ie={base:`${xe}`,popoverContent:`${xe}__popover-content`,uniformChartScalingLabel:`${xe}__uniform-scaling-label`,uniformChartScalingCheckbox:`${xe}__uniform-scaling-checkbox`};var O,$;(function(e){e.Disabled="disabled",e.Ready="ready",e.Creating="creating",e.Created="created",e.Selecting="selecting",e.Selected="selected"})(O||(O={})),function(e){e.NoValidInput="no-valid-input",e.NoVisibleProfiles="no-visible-profiles",e.InvalidGeometry="invalid-geometry",e.TooComplex="too-complex",e.InvalidElevationInfo="invalid-elevation-info",e.UnknownError="unknown-error",e.RefinedButNoChartData="refined-but-no-chart-data",e.None="none"}($||($={}));let Ct={noDataValue:-5e5,defaultQueryOptions:()=>({noDataValue:Ct.noDataValue,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0}),updateThrottleMillis:100,delayAfterPreviewMillis:500,defaultDemResolution:Le(10,"centimeters","meters"),densificationMaxSamples:3e3,largeChartSamples:1e4,maxTotalSamples:1e5,maxChartRatio:300,minSlopeSampleDistance:10,formatPrecision:1,portraitModePixelBreakpoint:400,profileLinesStyle3D:{width:3,falloff:0,innerWidth:0,innerColor:ni(0,0,0,0),renderOccluded:si.Opaque},profileLines3DUpdateThrottleMillis:100,hoveredPointsStyle:{size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"}};function N(){return Ct}const Oi=" â€• ",Li={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null},St="ProfileGenerationError";var z;(function(e){e.TooComplex="too-complex",e.InvalidGeometry="invalid-geometry",e.InvalidElevationInfo="invalid-elevation-info",e.ElevationQueryError="elevation-query-error"})(z||(z={}));let ve=class extends Error{constructor(t){super("profile could not be generated",{cause:t}),this.type=St}};function Ui(e){return e.type===St}async function Vi(e,t,i,n,s,l,c){let a,u,p;const h=e.spatialReference,d=h.isGeographic||h.isWebMercator;let m=0;if(!d){const{planarLength:S}=await x(()=>import("./geometryEngineAsync-Bu-rYQUP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url);se(c),m=await S(e,"meters"),se(c)}const f=1/he(n),C=s.geodesicDistanceThreshold??1/0;if(d||m>=C){await Je([{source:h,dest:n},{source:h,dest:_t.WGS84}],c);const S=ji(e);a=pi([S],"meters")[0];const _=nt(a,s);if(rt(e,a,_)>l)throw new ve(z.TooComplex);const w=st(S,t,i);({densifiedPath:u,distances:p}=Ni(w,_,f)),u=Ge(u,n)}else{await Je([{source:h,dest:n}],c),a=m;const S=nt(a,s);if(rt(e,a,S)>l)throw new ve(z.TooComplex);const _=st(e,t,i);({densifiedPath:u,distances:p}=zi(_,S,f)),se(c),u=Ge(u,n)}return{densifiedPath:u,pathLength:a*f,distances:p}}function nt(e,t){const i=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,i)}function st(e,t,i){if(t==null)return ot(e);const n=e.spatialReference,s=t.mode,l=ti(t,n);let c=null;switch(i.type){case"2d":c=Ai(e,s,l);break;case"3d":c=Bi(e,s,l,i)}return c==null?ot(e):new Ze({hasZ:!0,hasM:!1,spatialReference:n,paths:Pt(e.paths,c)})}function Ai({hasZ:e},t,i){return t==="absolute-height"?e?([n,s,l])=>[n,s,l+i]:([n,s])=>[n,s,i]:null}function Bi({spatialReference:e,hasZ:t},i,n,{elevationProvider:s}){const l=(c,a,u,p)=>(s==null?void 0:s.getElevation(c,a,u,e,p))??0;switch(i){case"on-the-ground":return([c,a])=>[c,a,l(c,a,0,"ground")];case"absolute-height":return t?([c,a,u])=>[c,a,u+n]:([c,a])=>[c,a,n];case"relative-to-ground":return t?([c,a,u])=>[c,a,u+l(c,a,u,"ground")+n]:([c,a])=>[c,a,l(c,a,0,"ground")+n];case"relative-to-scene":return t?([c,a,u])=>[c,a,u+l(c,a,u,"scene")+n]:([c,a])=>[c,a,l(c,a,0,"scene")+n];default:return null}}function ot(e){return e.hasZ?new Ze({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:Pt(e.paths,([t,i])=>[t,i])}):e}function Pt(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s){const l=e[s],c=l.length,a=new Array(l.length);n[s]=a;for(let u=0;u<c;++u)a[u]=t(l[u])}return n}function He(e){return Pe(e)&&e.paths.length>0&&e.paths.every(t=>t.length>=2)}function Pe(e){return e!=null&&e.type==="polyline"}function Et(e,t,i,n,s){const{spatialReference:l,hasZ:c}=e,a={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:l,metersPerSR:he(l)},u=[],p=[];let h=0;for(let d=0;d<e.paths.length;++d){const m=e.paths[d],f=new Array,C=new Array;let S=0;for(let _=1;_<m.length;++_){const w=m[_-1],M=m[_],G=n(a,w,M);let V;for(V=S;V<G.distance&&!oi(V,G.distance);V+=t)f.push(s(G,V)),C.push((h+V)*i);S=V-G.distance,h+=G.distance,f.push(M),C.push(h*i)}u[d]=f,p[d]=C}return{densifiedPath:new Ze({spatialReference:l,hasZ:c,paths:u}),distances:p}}function zi(e,t,i){const{hasZ:n}=e;return Et(e,t,i,qi,n?Wi:Fi)}function Ni(e,t,i){const{hasZ:n}=e;return Et(e,t,i,Gi,n?Hi:Zi)}function Gi(e,t,i){return e.distance=0,vi(e,t,i,e.spatialReference),e.from=t,e.to=i,e}function qi(e,t,i){return e.from=t,e.to=i,e.distance=ri(i,t)*e.metersPerSR,e}function Zi({from:e,azimuth:t,spatialReference:i},n){return bt([0,0],e,t,n,i)}function Hi({from:e,to:t,azimuth:i,distance:n,spatialReference:s},l){const c=l/n,a=[0,0,yt(e[2],t[2],c)];return bt(a,e,i,l,s),a}function Fi({from:e,to:t,distance:i},n){return li([0,0],e,t,n/i)}function Wi({from:e,to:t,distance:i},n){return ai([0,0,0],e,t,n/i)}function ji(e){return di(e.spatialReference)?e:Ge(e,_t.WGS84)}function $t(e){return e.paths.reduce((t,i)=>t+i.length,0)}function rt(e,t,i){return $t(e)+Math.floor(t/i)+Math.max(0,e.paths.reduce(n=>1+n,0)-1)}function Qi(e,t){const i=e.length;if(i===0)return null;const n=e[0],s=n.sampledZ;let l=s,c=s,a=0,u=0,p=null,h=null,d=s??0,m=0,f=0,C=s!=null?1:0,S=0,_=0;const w=he(t),M=ue(t),G=N().minSlopeSampleDistance/w,V=2*G,pe=new lt,W=new lt,Ue=()=>{Ot(),pe.copy(W),W.reset()},We=(q,fe)=>{Ue(),q>0&&q-pe.start<=V&&(q=pe.start+G),W.restart(q,fe)},Ot=()=>{if(pe.isHole||W.isHole)return;const q=W.avgElevation-pe.avgElevation,fe=W.start-pe.start,ge=q*M,Y=fe*w,K=Le(Math.atan2(ge,Y),"radians","degrees");K>0?(m+=K,p=ne(p,K),S++):K<0&&(f-=K,h=ne(h,-K),_++)};n.sampledZ!=null&&We(n.distance,n.sampledZ);for(let q=1;q<i;++q){const fe=e[q-1],ge=e[q],Y=ge.sampledZ;if(Y==null){W.isHole||Ue();continue}C++,d+=Y,l=Fe(l,Y),c=ne(c,Y),W.isHole||ge.distance-W.start>=G?We(ge.distance,Y):W.insert(Y);const K=fe.sampledZ;if(K!=null){const $e=Y-K;$e>0?a+=$e:$e<0&&(u-=$e)}}return Ue(),C===0?null:{maxDistance:e[i-1].distance,minElevation:l,maxElevation:c,avgElevation:C===0?null:d/C,elevationGain:a,elevationLoss:u,maxPositiveSlope:p,maxNegativeSlope:h,avgPositiveSlope:S===0?null:m/S,avgNegativeSlope:_===0?null:f/_}}function Yi(e){const t=e.filter(qe),i=t.length;if(i===0)return null;const n=t[0];if(i===1)return n;let s=n.maxDistance,l=n.minElevation,c=n.maxElevation,a=n.maxPositiveSlope,u=n.maxNegativeSlope;for(let p=1;p<t.length;++p){const h=t[p];s=ne(s,h.maxDistance),l=Fe(l,h.minElevation),c=ne(c,h.maxElevation),a=ne(a,h.maxPositiveSlope),u=ne(u,h.maxNegativeSlope)}return{maxDistance:s,minElevation:l,maxElevation:c,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:a,maxNegativeSlope:u,avgPositiveSlope:null,avgNegativeSlope:null}}function Ki(e){let t=null,i=null,n=null;for(const s of e){if(s==null)continue;const{statistics:l,spatialReference:c}=s;if(l==null)continue;const a=he(c);t=ne(t,Ae(l.maxDistance,a));const u=ue(c);n=Fe(n,Ae(l.minElevation,u)),i=ne(i,Ae(l.maxElevation,u))}return{minDistance:0,maxDistance:t??0,minElevation:n??0,maxElevation:i??0}}function Fe(e,t){return t==null?e:e!=null?Math.min(e,t):t}function ne(e,t){return t==null?e:e!=null?Math.max(e,t):t}function Ae(e,t){return e!=null&&t!=null?e*t:null}let lt=class{constructor(){this._start=0,this._totalElevation=0,this._sampleCount=0}get avgElevation(){return this._totalElevation/this._sampleCount}get isHole(){return this._sampleCount===0}get start(){return this._start}copy(t){this._start=t._start,this._sampleCount=t._sampleCount,this._totalElevation=t._totalElevation}reset(){this._start=0,this._sampleCount=0,this._totalElevation=0}restart(t,i){this._start=t,this._sampleCount=1,this._totalElevation=i}insert(t){++this._sampleCount,this._totalElevation+=t}};async function*Xi(e,t){const{view:i,geometry:n,elevationInfo:s,providers:l,options:c}=e,a=i.spatialReference;if(!a||n==null||!He(n))throw new ve(z.InvalidGeometry);const u=l.length;if(u===0)return null;const p=Math.round(c.maxTotalSamples/u);if($t(n)>p)throw new ve(z.TooComplex);const h=await Vi(n,s,i,a,c,p,t);let d=0;const m=new Array(u),f=new Array(u);for(let _=0;_<u;_++){const w=on(h);m[_]=w,d+=w.samples.length;const M={...e,provider:l[_],result:w,densificationResult:h};f[_]=Ji(M,t)[Symbol.iterator]()}if(d>c.maxTotalSamples)throw new ve(z.TooComplex);const C=await Promise.all(f.map(_=>{const w=_.next();return w.done===!0?Promise.resolve(null):w.value}));se(t);for(let _=0;_<u;_++)m[_]=C[_];yield m,await Lt(e.delayAfterPreview??N().delayAfterPreviewMillis,null,t.signal);const S=[];try{let _;do{_=!1;for(let w=0;w<u;w++){const M=f[w].next();M.done===!1&&(S.push({resultPromise:M.value,index:w}),_=!0)}}while(_)}finally{f.forEach(_=>{var w;return(w=_.return)==null?void 0:w.call(_)})}for(const{resultPromise:_,index:w}of S)m[w]=await _,se(t),yield m;for(const _ of m)_!=null&&(_.progress=1);yield m}function*Ji(e,t){const{densificationResult:i}=e,n={...e,abortOptions:t,densificationResult:i},s=fi(0,n.result.samples.length),l=s.slice(0,n.provider.numSamplesForPreview);yield at(n,l,!0);const c=qt(s,n.provider.numSamplesPerChunk);for(const a of c)yield at(n,a,!1)}async function at({densificationResult:e,result:t,provider:i,queue:n,abortOptions:s,cache:l},c,a){const{densifiedPath:u,pathLength:p}=e,h=t.spatialReference,{samples:d}=t,m=[];for(let f=0;f<c.length;f++){const C=d[c[f]];m[f]=C.coordinate}try{return await n.push({geometry:new ui({spatialReference:h,points:m,hasZ:u.hasZ}),provider:i,indices:c,preview:a,result:t,queryOptions:{...N().defaultQueryOptions(),minDemResolution:Math.round(a?p/i.numSamplesForPreview:p/d.length),cache:l}},s),{...t}}catch(f){return Ut(f)?null:Li}}function en(e){return new mi({priority:_i.ELEVATION_PROFILE,concurrency:1,scheduler:e,process:async t=>{se(t.queryOptions);try{await tn(t)}catch(i){Vt(i)}}})}async function tn({geometry:e,provider:t,indices:i,preview:n,result:s,queryOptions:l}){if(i.length===0)return;const c=(await an(t,e,l)).geometry,{hasZ:a,points:u}=c,p=l.noDataValue,{samples:h}=s;for(let d=0;d<i.length;d++){const m=h[i[d]];if(m.isHole)continue;const f=a?u[d][2]:null;f===null||f===p?m.sampledZ=null:(s.hasZ=!0,m.sampledZ=f),m.sampled=!0}nn(h),s.progress=n?0:s.progress+i.length/h.length,s.statistics=Qi(s.samples,s.spatialReference)}function nn(e){const t=e.length-1;let i=0;for(let n=1;n<=t;n++)(e[n].sampled||n===t)&&(sn(e,i,n),i=n)}function sn(e,t,i){if(i-t==1)return;const n=e[t],s=n.sampledZ,l=e[i],c=l.sampledZ;if(s==null||c==null){for(let p=t+1;p<i;p++)e[p].sampledZ=null;return}const a=n.distance,u=l.distance-a;for(let p=t+1;p<i;p++){const h=e[p],d=(h.distance-a)/u;h.sampledZ=yt(s,c,d)}}function on({densifiedPath:e,distances:t}){const i=e.spatialReference,n=jt(i),s=e.paths,l=s.length,c=[];let a=null,u=0;for(let p=0;p<l;p++){const h=s[p],d=h.length,m=t[p];for(let f=0;f<d;f++){const C=h[f],S=m[f];n&&(C[0]=hi(C[0],n.valid[0],n.valid[1])),a&&f===0&&rn(c,a,C,u,S),c.push(ln(C,S)),a=C,u=S}}return{progress:0,samples:c,hasZ:!1,statistics:null,spatialReference:i}}function rn(e,t,i,n,s){e.push(ct(t,n)),e.push(ct(i,s))}function ln(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!1,isHole:!1}}function ct(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!0,isHole:!0}}async function an(e,t,i){try{return await e.queryElevation(t,i)}catch{throw new ve(z.ElevationQueryError)}}function cn(e,t,i){if(!e||e.length===0)return;const n=e.length-1,s=e[0];if(t<=i(s))return s;const l=e[n];if(t>=i(l))return l;let c=0,a=0,u=n;for(;c<u;){a=c+Math.floor((u-c)/2);const p=e[a],h=i(p);if(h===t)return p;if(t<h){if(a>0){const d=e[a-1],m=i(d);if(t>m)return t-m>=h-t?p:d}u=a}else{if(a<n){const d=e[a+1],m=i(d);if(t<m)return t-h>=m-t?d:p}c=a+1}}return e[a]}const ut=Symbol("line-change");let oe=class extends me{constructor(t){super(t),this._updateTask=null,this._paramsPerProfile=new Map,this._getUpdateParametersMemoized=F((i,n,s)=>({stationary:i,visibleProfiles:n,generationParameters:s})),this._getGenerationParametersMemoized=F((i,n,s,l,c,a,u)=>Pe(n)&&He(n)&&l!=null?{view:i,geometry:n,elevationInfo:s,options:a,queue:l,cache:c,slicePlane:u}:null),this._getElevationInfoMemoized=F((i,n)=>({mode:i,offset:n})),this._getOptionsMemoized=F((i,n,s)=>{const{densificationMaxSamples:l,maxTotalSamples:c}=N();return{geodesicDistanceThreshold:i,samplingDistance:n,densificationMaxSamples:Math.round(l/s),maxTotalSamples:c}}),this._updateThrottled=ft(i=>ze(this._update(i)),N().updateThrottleMillis)}initialize(){const t=this.viewModel;this.addHandles([I(()=>({visible:t.visible,profiles:t.profiles.toArray()}),({visible:i,profiles:n})=>{this._abortUpdate(),this._paramsPerProfile.clear(),this.removeHandles(ut),i&&n.length!==0&&this.addHandles([...n.map(s=>_e([s.attach(this.viewModel),s.on("change",()=>{this._invalidateProfile(s)})])),I(()=>this._updateParameters,this._updateThrottled,ie),this._updateThrottled],ut)},ie)])}destroy(){this._paramsPerProfile.clear()}get _updateParameters(){const{viewModel:t}=this,i=t.view;return this._getUpdateParametersMemoized(i==null||i.stationary,this.viewModel.visibleProfiles,this._generationParameters)}get _generationParameters(){const{view:t,input:i,queue:n,tileCache:s}=this.viewModel;return t!=null&&t.ready?this._getGenerationParametersMemoized(t,i==null?void 0:i.geometry,this._elevationInfo,n,s,this._options,t.type==="3d"?t.slicePlane:null):null}get _elevationInfo(){const t=this.viewModel.input,i=t?ii(t)?null:gt(t):null;return i!=null?this._getElevationInfoMemoized(i.mode,i.offset):null}get _options(){const t=this.viewModel,i=t.visibleProfiles.length;let n=t.minDemResolution??N().defaultDemResolution;return n=parseFloat(n.toFixed(2)),this._getOptionsMemoized(t.geodesicDistanceThreshold,n,i)}async _update({stationary:t,visibleProfiles:i,generationParameters:n}){this._abortUpdate(),t&&(n!=null?this._updateTask=Te(async s=>{this.viewModel.error=null;const l=i.filter(a=>!this._isProfileValid(a,n)),c=Xi({...n,providers:l},{signal:s});try{for await(const a of c){se(s),this._clearInvalidResults(n);for(let u=0;u<l.length;u++)l[u].result=a[u]}for(const a of l)this._paramsPerProfile.set(a,n)}catch(a){At(a),this._abortUpdate(),this.viewModel.error=a,l.forEach(u=>{u.result=null})}}):this._clearResults())}_abortUpdate(){this._updateTask=ce(this._updateTask)}_isProfileValid(t,i){return this._paramsPerProfile.has(t)&&this._paramsPerProfile.get(t)===i}_invalidateProfile(t){this._paramsPerProfile.delete(t),this._updateThrottled(this._updateParameters)}_clearInvalidResults(t){for(const i of this.viewModel.profiles.items)this._isProfileValid(i,t)||(i.result=null,this._paramsPerProfile.delete(i))}_clearResults(){for(const t of this.viewModel.profiles.items)t.result=null,this._paramsPerProfile.delete(t)}};o([r({nonNullable:!0})],oe.prototype,"viewModel",void 0),o([r()],oe.prototype,"_updateParameters",null),o([r()],oe.prototype,"_generationParameters",null),o([r()],oe.prototype,"_elevationInfo",null),o([r()],oe.prototype,"_options",null),oe=o([R("esri.widgets.ElevationProfile.ElevationProfileController")],oe);function un(e,t){if(e==null||t==null)return null;const{samples:i,spatialReference:n}=e,{distance:s,elevation:l}=t,c=he(n),a=ue(n),u=i.length,p=new Array(u);for(let h=0;h<u;++h){const d=i[h],m=d.sampledZ,f=d.coordinate;p[h]={x:f[0],y:f[1],z:m,distance:kt(d.distance,c,s),elevation:de(m,a,l)}}return p}function hn(e,t){if(e==null||t==null||e.statistics==null||e.spatialReference==null)return null;const{distance:i,elevation:n}=t,{statistics:s,spatialReference:l}=e,c=he(l),a=ue(l);return{maxDistance:kt(s.maxDistance,c,i),minElevation:de(s.minElevation,a,n),maxElevation:de(s.maxElevation,a,n),avgElevation:de(s.avgElevation,a,n),elevationGain:de(s.elevationGain,a,n),elevationLoss:de(s.elevationLoss,a,n),maxPositiveSlope:s.maxPositiveSlope,maxNegativeSlope:s.maxNegativeSlope,avgPositiveSlope:s.avgPositiveSlope,avgNegativeSlope:s.avgNegativeSlope}}function kt(e,t,i){return e==null?null:Le(e*t,"meters",i)}function de(e,t,i){return e==null?null:Le(e*t,"meters",i)}let P=class extends gi.EventedAccessor{constructor(t){super(t),this.type=null,this.id=yi(),this.title=null,this.color=new Q("#000000"),this.visible=!0,this._getSamplesMemoized=F((i,n)=>un(i,n)),this._getStatisticsMemoized=F((i,n)=>hn(i,n)),this.viewVisualizationEnabled=!0,this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0,this._viewModel=null}get progress(){return this.result!=null&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){var i;const t=(i=this._viewModel)==null?void 0:i.hoveredChartPosition;return t!=null?this._getPoint(t):null}get available(){return!0}get hasZ(){const t=this.result;return t!=null&&t.hasZ}get minDemResolution(){return N().defaultDemResolution}queryElevation(){throw new Error("not implemented")}attach(t){return this._viewModel=t,_e([I(()=>t.effectiveUnits,i=>{this.effectiveUnits=i},ie),I(()=>[t.input],()=>this._onChange(),dt)])}toggleVisibility(t){this.visible=t===void 0?!this.visible:t}_onChange(){this.emit("change")}_getPoint(t){const{samples:i,result:n}=this;if(i==null||n==null)return null;const s=i.length;if(s===0)return null;const l=i[s-1].distance,c=cn(i,t*l,h=>h.distance);if(c==null)return null;const{x:a,y:u,z:p}=c;return p==null?null:new Qt({x:a,y:u,z:p,spatialReference:n.spatialReference})}};o([r({nonNullable:!0})],P.prototype,"id",void 0),o([r({nonNullable:!0})],P.prototype,"title",void 0),o([r({type:Q,nonNullable:!0})],P.prototype,"color",void 0),o([r({nonNullable:!0})],P.prototype,"visible",void 0),o([r({readOnly:!0})],P.prototype,"progress",null),o([r({readOnly:!0})],P.prototype,"samples",null),o([r({readOnly:!0})],P.prototype,"statistics",null),o([r()],P.prototype,"hoveredPoint",null),o([r()],P.prototype,"viewVisualizationEnabled",void 0),o([r()],P.prototype,"available",null),o([r()],P.prototype,"result",void 0),o([r()],P.prototype,"effectiveUnits",void 0),o([r()],P.prototype,"numSamplesForPreview",void 0),o([r()],P.prototype,"numSamplesPerChunk",void 0),o([r()],P.prototype,"chartFillEnabled",void 0),o([r()],P.prototype,"chartStrokeWidth",void 0),o([r()],P.prototype,"chartStrokeOffsetY",void 0),o([r({readOnly:!0})],P.prototype,"hasZ",null),o([r({readOnly:!0})],P.prototype,"minDemResolution",null),o([r()],P.prototype,"_viewModel",void 0),P=o([R("esri.widgets.ElevationProfile.ElevationProfileLine")],P);const Ee=P;function xt(e){var n;if(e==null)return null;if(e instanceof bi)return It(e);const t=e.tileInfo;if(t==null)return null;const i=(n=t.lods)==null?void 0:n.at(-1);return i==null?null:i.resolution*he(t.spatialReference)}function It(e){if(e==null)return null;const t=e.layers.items.map(pn).filter(qe);return vt(t)??null}function pn(e){return e&&"tileInfo"in e?xt(e):null}let j=class extends Ee{constructor(t){super(t),this.type="ground",this.color=new Q("#ff7f00"),this.viewVisualizationEnabled=!0,this.numSamplesForPreview=50,this.numSamplesPerChunk=1e3,this._getQueryElevationDependencies=F((i,n)=>({ground:i,groundLayers:n}))}get available(){const t=this._ground;return t!=null&&t.layers.some(i=>i.visible)}get minDemResolution(){return It(this._ground)}get _queryElevationDependencies(){return this._getQueryElevationDependencies(this._ground,this._groundLayers)}get _ground(){var t,i,n;return(n=(i=(t=this._viewModel)==null?void 0:t.view)==null?void 0:i.map)==null?void 0:n.ground}get _groundLayers(){var t,i;return((i=(t=this._ground)==null?void 0:t.layers)==null?void 0:i.toArray())??[]}async queryElevation(t,i){const n=this._queryElevationDependencies;if(n==null)throw new Error("ElevationProfileLineGround: no dependencies");const{ground:s}=n;if(s==null)throw new Error("No ground configured in the view");const l=await s.queryElevation(t,i),c=ue(t.spatialReference),a=ue(s.layers.at(0).spatialReference);if(c!==a){const u=l.geometry;u.points=u.points.map(([p,h,d])=>[p,h,d===i.noDataValue?d:d*a/c])}return l}attach(t){return _e([super.attach(t),I(()=>this._queryElevationDependencies,()=>this._onChange())])}};o([r({type:Q,nonNullable:!0})],j.prototype,"color",void 0),o([r()],j.prototype,"viewVisualizationEnabled",void 0),o([r()],j.prototype,"available",null),o([r({readOnly:!0})],j.prototype,"minDemResolution",null),o([r()],j.prototype,"_queryElevationDependencies",null),o([r()],j.prototype,"_ground",null),o([r()],j.prototype,"_groundLayers",null),j=o([R("esri.widgets.ElevationProfile.ElevationProfileLineGround")],j);const Rt=j;let ee=class extends Ee{constructor(t){super(t),this.type="input",this.color=new Q("#00c8c8"),this.viewVisualizationEnabled=!1,this.numSamplesForPreview=50,this.numSamplesPerChunk=500,this.chartFillEnabled=!1,this.chartStrokeOffsetY=-1,this._getQueryElevationDependencies=F((i,n,s,l,c)=>i?{elevationInfo:i,visibleLayers:n,view:s,stationary:l,spatialReference:c}:null)}get queryElevationDependencies(){var i;const t=(i=this._viewModel)==null?void 0:i.view;return t==null?null:this._getQueryElevationDependencies(this._elevationInfo,this._visibleLayers,t,t.stationary,t.spatialReference)}get available(){var t;return!((t=this._viewModel)!=null&&t.inputIsSketched)}get _elevationInfo(){var i;const t=(i=this._viewModel)==null?void 0:i.input;return t?gt(t):null}get _visibleLayers(){var t,i,n,s;return((s=(n=(i=(t=this._viewModel)==null?void 0:t.view)==null?void 0:i.map)==null?void 0:n.allLayers)==null?void 0:s.filter(l=>l.visible).toArray())??[]}async queryElevation(t,{noDataValue:i,signal:n}){const s=this.queryElevationDependencies;if(s==null)throw new Error("ElevationProfileLineInput: no dependencies");const{view:l,elevationInfo:c,spatialReference:a}=s;if(c.mode==="on-the-ground"&&l.type==="3d"&&a){const u=await wt.fromGeometry(t).project(a,n);if(!u)return{geometry:t,noDataValue:i};const p=l.elevationProvider;return u.coordinates.forEach(h=>{h.z=p.getElevation(h.x,h.y,0,a,"ground")??0}),{geometry:u.export(),noDataValue:i}}return{geometry:t,noDataValue:i}}attach(t){const i=()=>this._onChange();return _e([super.attach(t),I(()=>this.queryElevationDependencies,i),De(()=>t.elevationProvider,"elevation-change",i,{onListenerAdd:i,onListenerRemove:i})])}};o([r({type:Q,nonNullable:!0})],ee.prototype,"color",void 0),o([r()],ee.prototype,"viewVisualizationEnabled",void 0),o([r()],ee.prototype,"queryElevationDependencies",null),o([r()],ee.prototype,"available",null),o([r()],ee.prototype,"_elevationInfo",null),o([r()],ee.prototype,"_visibleLayers",null),ee=o([R("esri.widgets.ElevationProfile.ElevationProfileLineInput")],ee);const dn=ee;let re=class extends Ee{constructor(t){super(t),this.type="query",this.color=new Q("#db334a"),this.viewVisualizationEnabled=!0,this.source=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=500}get minDemResolution(){return xt(this.source)}get available(){const t=this.source;return!!t&&(t.visible==null||t.visible)&&(t.layers==null||t.layers.some(i=>i.visible))}queryElevation(t,i){if(!this.source)throw new Error("No source configured for the elevation profile line");return this.source.queryElevation(t,i)}attach(t){return _e([super.attach(t),I(()=>this.source,()=>this._onChange(),dt)])}};o([r({type:Q,nonNullable:!0})],re.prototype,"color",void 0),o([r()],re.prototype,"viewVisualizationEnabled",void 0),o([r()],re.prototype,"source",void 0),o([r({readOnly:!0})],re.prototype,"minDemResolution",null),o([r()],re.prototype,"available",null),re=o([R("esri.widgets.ElevationProfile.ElevationProfileLineQuery")],re);const vn=re,mn=2e5;let D=class extends Ee{constructor(e){super(e),this.type="view",this.color=new Q("#cf4ccf"),this.viewVisualizationEnabled=!0,this.include=null,this.exclude=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=25,this._getQueryElevationDependencies=F((t,i,n,s,l,c,a)=>({inputGraphicUid:t!=null?Mt(t):null,visibleLayers:i,maxIntersectionDistance:n,intersectOptions:s,view:l,stationary:c,spatialReference:a})),this._vecA=et(),this._vecB=et(),this._ray=wi()}get minDemResolution(){var i,n,s;const e=(i=this._viewModel)==null?void 0:i.view;if(e==null||e.type!=="3d")return null;const t=(s=(n=e.pointsOfInterest)==null?void 0:n.focus)==null?void 0:s.worldUnitsPerContentPixel;return t==null?null:t*ue(e.spatialReference)}get queryElevationDependencies(){var t;const e=this._view;return e?this._getQueryElevationDependencies((t=this._viewModel)==null?void 0:t.input,this._visibleLayers,this._maxIntersectionDistance,this._intersectOptions,e,e.stationary,e.spatialReference):null}get _visibleLayers(){var e,t,i;return((i=(t=(e=this._view)==null?void 0:e.map)==null?void 0:t.allLayers)==null?void 0:i.filter(n=>n.visible).toArray())??[]}get _intersectOptions(){const e=this._view;if(e==null||e.destroyed)return{};const t=Xe(e,{include:this.include,exclude:this.exclude}),i=Xe(e,{exclude:this._pointCloudLayers});return t.exclude=Bt(t.exclude,i.exclude),t}get _pointCloudLayers(){const e=this._view;return e==null?[]:e.allLayerViews.toArray().filter(t=>{var i;return((i=t.layer)==null?void 0:i.type)==="point-cloud"}).map(t=>t.layer)}get _view(){var t;const e=(t=this._viewModel)==null?void 0:t.view;return e!=null&&e.type==="3d"?e:null}get _maxIntersectionDistance(){const e=this._view;return e!=null&&e.renderCoordsHelper?Yt(e.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}get _intersector(){const e=this._view;if(e==null)return null;const t=Si(e.state.viewingMode),i=t.options;return i.hud=!1,i.invisibleTerrain=!1,i.backfacesTerrain=!1,i.selectionMode=!1,i.store=Pi.ALL,t}async queryElevation(e,{noDataValue:t,signal:i}){const n=this.queryElevationDependencies;if(n==null)throw new Error("ElevationProfileLineInput: no dependencies");const s=this._intersector;if(s==null)throw new Error("ElevationProfileLineInput: no view");const{intersectOptions:l,view:c,spatialReference:a}=n,u=c.renderCoordsHelper,p=c.sceneIntersectionHelper,h=this._vecA,d=this._vecA,m=this._vecB,f=this._ray;if(!a)return{geometry:e,noDataValue:t};const C=await wt.fromGeometry(e).project(a,i);if(!C)return{geometry:e,noDataValue:t};const S=C.coordinates,_=S.length;for(let w=0;w<_;++w){const M=S[w];ci(m,M.x,M.y,M.z??0),u.toRenderCoords(m,a,m),u.setAltitude(h,mn,m);const G=Ci(h,m,f);p.computeIntersection(G,s,l,!0);const V=_n(n,s.results.all);V?(V.getIntersectionPoint(d),u.fromRenderCoords(d,d,a),M.z=d[2]):M.z=t}return{geometry:C.export(),noDataValue:t}}attach(e){const t=()=>this._onChange();return _e([super.attach(e),I(()=>this.queryElevationDependencies,t),De(()=>e.elevationProvider,"elevation-change",t,{onListenerAdd:t,onListenerRemove:t})])}};function _n({view:e,inputGraphicUid:t,maxIntersectionDistance:i},n){for(const s of n){if(s.distanceInRenderSpace!=null&&s.distanceInRenderSpace>i)continue;const l=Ei(s,e);if(l==null||Mt(l)!==t)return s}return null}function Mt(e){if(e.layer&&"objectIdField"in e.layer){const t=e.attributes[e.layer.objectIdField];if(t)return`o-${e.layer.id}-${t}`}return`u-${e.uid}`}o([r({type:Q,nonNullable:!0})],D.prototype,"color",void 0),o([r()],D.prototype,"viewVisualizationEnabled",void 0),o([r()],D.prototype,"include",void 0),o([r()],D.prototype,"exclude",void 0),o([r({readOnly:!0})],D.prototype,"minDemResolution",null),o([r()],D.prototype,"queryElevationDependencies",null),o([r()],D.prototype,"_visibleLayers",null),o([r()],D.prototype,"_intersectOptions",null),o([r()],D.prototype,"_pointCloudLayers",null),o([r()],D.prototype,"_view",null),o([r()],D.prototype,"_maxIntersectionDistance",null),o([r()],D.prototype,"_intersector",null),D=o([R("esri.widgets.ElevationProfile.ElevationProfileLineView")],D);const fn=D,gn={base:Ee,key:"type",typeMap:{ground:Rt,input:dn,query:vn,view:fn},errorContext:"elevation-profile-line"},yn=Ne.ofType(gn);var b,U;function bn(e){return e==="2d"?new ki({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[0,0,0,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[255,255,255,255]}]}}}):new xi({color:[0,0,0,0]})}(function(e){e.Ready="ready",e.Creating="creating",e.Reshaping="reshaping",e.ReshapingDisabled="reshaping-disabled",e.Selecting="selecting",e.Selected="selected"})(b||(b={})),function(e){e.View="view",e.Main="main",e.Interaction="interaction"}(U||(U={}));let L=class extends me{constructor(e){super(e),this.state=b.Ready,this._pendingStartOptions=null,this._previousInputInfo=null,this._shouldRemoveLastPoint=!1,this._sketchedGraphics=new WeakSet,this._creationToolPromise=null,this._updateToolPromise=null,this._updateDisabled=!1}initialize(){this.addHandles(I(()=>({view:this.tool.viewModel.view,visible:this.tool.visible}),({view:e,visible:t})=>{e!=null&&t?this._attach(e):this._detach()},ie),U.View)}destroy(){this._detach()}get canStopCreating(){const e=this._geometry,t=this._shouldRemoveLastPoint?3:2;return Pe(e)&&e.paths.length>0&&e.paths[0].length>=t}get _input(){return this.tool.viewModel.input}set _input(e){this.tool.viewModel.input=e}get _geometry(){var e;return(e=this._input)==null?void 0:e.geometry}get _visibleAndEditable(){return this.tool.visible&&this.tool.editable}get _view(){return this.tool.viewModel.view}get test(){}start(e={mode:"sketch"}){if(!this.tool.editable)return;const t=this._view;if(t!=null&&t.ready)switch(this._pendingStartOptions=null,this._stopInteraction(),this._previousInputInfo==null&&this._storePreviousInput(this._input),this._setSketchedGraphic(null),e.mode){case"sketch":this._set("state",b.Creating),this._startCreationInteraction();break;case"select":this._set("state",b.Selecting),this._startSelectionInteraction()}else this._pendingStartOptions=e}stop(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._clearPreviousInput()}cancel(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._restorePreviousInput()}clear(){this._stopInteractionAndUpdate(),this._set("state",b.Ready),this._clearPreviousInput(),this._input=null,this._pendingStartOptions=null}isSketchedGraphic(e){return e!=null&&this._sketchedGraphics.has(e)}_attach(e){this._detach();const t={mode:e.type==="3d"?"relative-to-ground":"on-the-ground",offset:null};this._graphicsLayer=new $i({listMode:"hide",internal:!0,elevationInfo:t});const i=bn(e.type);this._sketchVM=new Ri({layer:this._graphicsLayer,view:e,defaultCreateOptions:{mode:"click",hasZ:!1},updateOnGraphicClick:!1,defaultUpdateOptions:{reshapeOptions:{shapeOperation:"none"},enableRotation:!1,enableScaling:!1,enableMoveAllGraphics:!1,enableZ:!1,multipleSelectionEnabled:!1,toggleToolOnClick:!1,tool:"reshape"},polylineSymbol:i,activeLineSymbol:i}),this.addHandles([Gt(()=>e.ready,()=>{const n=this._pendingStartOptions;n&&this.start(n)},ie),I(()=>[this._input,this._visibleAndEditable],()=>this._update(),ie),I(()=>({map:e.map,graphicsLayer:this._graphicsLayer}),({map:n,graphicsLayer:s})=>{n!=null&&s!=null&&n.add(s),this._update()},ie)],U.Main)}_detach(){var i;this.removeHandles(U.Main),this._sketchVM=B(this._sketchVM),this._creationToolPromise=null,this._updateToolPromise=null;const e=(i=this._view)==null?void 0:i.map,t=this._graphicsLayer;e!=null&&t!=null&&e.remove(t),this._graphicsLayer=B(this._graphicsLayer),this._shouldRemoveLastPoint=!1,this._set("state",b.Ready)}_startCreationInteraction(){this._stopInteractionAndUpdate();const e=this._view,t=this._sketchVM;if(e==null||t==null)return;this._shouldRemoveLastPoint=!1;const i=t.on("create",s=>{var c;const l=s.graphic;switch(s.state){case"complete":this._shouldRemoveLastPoint=!1,this._setSketchedGraphic(l),this._stopInteractionAndUpdate(),this._clearPreviousInput();break;case"cancel":this.cancel();break;case"active":this._setSketchedGraphic(l),((c=s.toolEventInfo)==null?void 0:c.type)==="cursor-update"&&(this._shouldRemoveLastPoint=!0);break;case"start":this._setSketchedGraphic(l)}}),n=()=>{var c;i.remove();const s=this.canStopCreating,l=(c=this._geometry)==null?void 0:c.clone();t.cancel(),this._creationToolPromise=null,l!=null&&s?this._shouldRemoveLastPoint&&this._setSketchedGraphic(new mt({geometry:wn(l)})):this._input=null};this.removeHandles(U.Interaction),this.addHandles(ke(n),U.Interaction),this._creationToolPromise=ze(t.create("polyline"))}_startReshapeInteraction(){this._stopInteraction();const e=this._view,t=this._sketchVM;if(e==null||t==null)return;const i=t.on("update",l=>{const c=l.graphics[0];switch(l.state){case"complete":this._setSketchedGraphic(c),this._stopInteractionAndUpdate(),this._clearPreviousInput();break;case"active":case"start":this._setSketchedGraphic(c)}}),n=()=>{i.remove(),t.cancel(),this._updateToolPromise=null};this.removeHandles(U.Interaction),this.addHandles(ke(n),U.Interaction);const s=this._input;s&&(s.visible=!0,this._updateToolPromise=ze(t.update(s,{tool:"reshape"})))}_startSelectionInteraction(){this._stopInteraction();const e=this._view;if(e==null)return;const t=e.cursor,i=ke(()=>e.cursor=t);e.cursor="crosshair",e.closePopup();let n=null;const s=ke(()=>ce(n)),l=e.on("immediate-click",a=>{a.async(async()=>{ce(n),n=Te(async u=>{const{results:p}=await e.hitTest(a);se(u);const h=p.filter(d=>d.type==="graphic").map(d=>d.graphic).find(d=>d.geometry!=null&&d.geometry.type==="polyline");h&&(a.preventDefault(),a.stopPropagation(),this._input=h,this._clearPreviousInput(),this._stopInteractionAndUpdate())}),await n.promise})},Ii.TOOL),c=e.on("key-down",a=>{a.key==="Escape"&&this.cancel()});this.removeHandles(U.Interaction),this.addHandles([l,c,s,i],U.Interaction),e.ready&&e.focus()}_stopInteraction(){this.removeHandles(U.Interaction)}_stopInteractionAndUpdate(){this.hasHandles(U.Interaction)&&(this._updateDisabled=!0,this._stopInteraction(),this._updateDisabled=!1,this._triggerUpdate())}_triggerUpdate(){this._set("state",b.Ready),this._update()}_update(){if(this._updateDisabled)return;const e=this.state;if(e!==b.Selecting){if(this._visibleAndEditable){if(e===b.Creating||e===b.Reshaping&&this.isSketchedGraphic(this._input))return}else this.cancel();this._set("state",this._getNextState()),this._updateVisuals()}else this.stop()}_getNextState(){return this._input==null?b.Ready:this.isSketchedGraphic(this._input)?this.state===b.Creating?b.Creating:this._visibleAndEditable?b.Reshaping:b.ReshapingDisabled:b.Selected}_updateVisuals(){switch(this.state){case b.Creating:break;case b.Reshaping:this._startReshapeInteraction();break;case b.ReshapingDisabled:{this._stopInteractionAndUpdate();const e=this._input;e!=null&&this.isSketchedGraphic(e)&&(e.visible=!1);break}case b.Ready:case b.Selected:this._stopInteractionAndUpdate();case b.Selecting:}this._updateSketchedGraphic()}_storePreviousInput(e){this._previousInputInfo={graphic:e}}_restorePreviousInput(){const e=this._previousInputInfo;e!=null&&(this._clearPreviousInput(),this._input=e.graphic,this._triggerUpdate())}_clearPreviousInput(){this._previousInputInfo=null}_updateSketchedGraphic(){const e=this._graphicsLayer;if(e==null)return;const t=e.graphics,i=this._input;if(i==null||!this.isSketchedGraphic(i))return void t.removeAll();if(t.indexOf(i)===-1)t.removeAll(),t.add(i);else if(t.length!==1){const n=t.filter(s=>s!==i);t.removeMany(n)}}_setSketchedGraphic(e){e!=null&&this._sketchedGraphics.add(e),this._input=e,this._updateSketchedGraphic()}};function wn(e){if(Pe(e)){const t=e.clone();return t.paths=[t.paths[0].slice(0,-1)],t}return e}o([r({nonNullable:!0})],L.prototype,"state",void 0),o([r({nonNullable:!0})],L.prototype,"tool",void 0),o([r()],L.prototype,"canStopCreating",null),o([r()],L.prototype,"_graphicsLayer",void 0),o([r()],L.prototype,"_sketchVM",void 0),o([r()],L.prototype,"_input",null),o([r()],L.prototype,"_geometry",null),o([r()],L.prototype,"_visibleAndEditable",null),o([r()],L.prototype,"_view",null),o([r()],L.prototype,"_shouldRemoveLastPoint",void 0),L=o([R("esri.widgets.ElevationProfile.ElevationProfileInteraction")],L);let Me=class extends me{constructor(t){super(t),this._implementation=null,this._loadingTask=null}initialize(){this.addHandles(I(()=>{var t;return{tool:this.tool,view:this.tool.viewModel.view,visible:this.tool.visible&&!!((t=this.tool.viewModel.view)!=null&&t.ready)}},({tool:t,view:i,visible:n})=>{i!=null&&n?this._show(i,t):this._hide()},ie))}destroy(){this._hide()}_show(t,i){this._loadingTask=ce(this._loadingTask),this._loadingTask=Te(async n=>{if(t.type==="2d"){const s=x(()=>import("./ElevationProfileView2D-CBMoLWnc.js"),__vite__mapDeps([23,6,2,24,25,4,26,27,28,17,29,30,31,10,11,32,5,7,8,9,12,3,13,14,33,34,35,36,37,18,19,20,21,38,39,40,1,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,22,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,16,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153]),import.meta.url),l=(await je(s,n)).ElevationProfileView2D;this._implementation=new l(t,i)}else if(t.type==="3d"){const s=x(()=>import("./ElevationProfileView3D-CKuyZY5c.js"),__vite__mapDeps([154,6,2,24,25,4,26,27,28,17,29,30,31,10,11,32,5,7,8,9,12,3,13,14,33,34,100,101,102,155,45,46,156,75,73,76,157,74,158,71,72,77,78,79,80,81,82,83,84,159,48,160,93,87,85,88,70,89,90,91,92,86,69,161,1,40,41,42,43,18,19,20,21,44,47,49,50,51,52,53,54,55,56,57,58,38,22,63,64,67,68,162,163,164,165,166,167,168,112,103,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,107,192,193,194,95,108,109,195,196,129,197,198,199,200,201,202,35,99,36,37,39,59,60,61,62,65,66,94,96,97,98,104,105,16,106,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153]),import.meta.url),l=(await je(s,n)).ElevationProfileView3D;this._implementation=new l(t,i)}})}_hide(){this._loadingTask=ce(this._loadingTask),this._implementation=B(this._implementation)}};o([r()],Me.prototype,"tool",void 0),Me=o([R("esri.widgets.ElevationProfile.support.ElevationProfileView")],Me);let te=class extends me{constructor(e){super(e),this.editable=!0,this.visible=!0,this.highlightEnabled=!0}initialize(){this.view=new Me({tool:this}),this.interaction=new L({tool:this})}destroy(){this.interaction.destroy(),this.view.destroy()}get state(){var t;switch((t=this.interaction)==null?void 0:t.state){case b.Ready:return O.Ready;case b.Creating:return O.Creating;case b.Selecting:return O.Selecting;case b.Selected:return O.Selected;case b.Reshaping:case b.ReshapingDisabled:return O.Created}}};o([r({nonNullable:!0})],te.prototype,"viewModel",void 0),o([r()],te.prototype,"view",void 0),o([r()],te.prototype,"interaction",void 0),o([r()],te.prototype,"editable",void 0),o([r()],te.prototype,"visible",void 0),o([r()],te.prototype,"highlightEnabled",void 0),te=o([R("esri.widgets.ElevationProfile.ElevationProfileTool")],te);let g=class extends me{constructor(t){super(t),this.view=null,this.input=null,this._getEffectiveUnitsMemoized=F((i,n)=>({distance:i,elevation:n})),this.hoveredChartPosition=null,this.uniformChartScaling=!1,this.defaultUnit=null,this.queue=null,this._currentTileCache=null,this.error=null,this._defaultProfileLineGround=new Rt,this._userUnitOptions=null,this._userUnit=null,t!=null&&t.profiles||(this.profiles=new Ne([this._defaultProfileLineGround]))}initialize(){this.addHandles(I(()=>this.view,t=>{var s;if(t==null)return void Ye.getLogger(this).warnOnce("no view. Widget will be disabled until a view is provided.");this.removeHandles(ht);const i=t.type==="3d"?t.resourceController:void 0;(s=this.queue)==null||s.destroy(),this.queue=en(i==null?void 0:i.scheduler);const n=i==null?void 0:i.addUpdatingObject(this);n&&this.addHandles(n,ht)},ie)),this.tool=new te({viewModel:this}),this._controller=new oe({viewModel:this})}destroy(){this._defaultProfileLineGround=B(this._defaultProfileLineGround),this._controller=B(this._controller),this._currentTileCache=B(this._currentTileCache),this.tool=B(this.tool),this.queue=B(this.queue)}get profiles(){return this._get("profiles")}set profiles(t){const i=this._get("profiles"),n=t??new Ne;this._set("profiles",Ft(n,i))}get state(){const t=this.view;return t!=null&&t.ready?this.tool.state:O.Disabled}get progress(){let t=0,i=0;for(const n of this.visibleProfiles)t++,i+=n.progress;return t>0?i/t:0}set unitOptions(t){this._userUnitOptions=t,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))}get unitOptions(){return this._filteredOrAllUnits(this._userUnitOptions)}set unit(t){this._userUnit=t?this._findSelectableUnit(t,this._userUnit):null,this.notifyChange("unit")}get unit(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)}get effectiveUnits(){const t=Ki(this.visibleProfiles.map(s=>s.result)),i=Kt(t.maxDistance,"meters",this.unit),n=Xt(t.maxElevation,"meters",this.unit);return this._getEffectiveUnitsMemoized(i,n)}get geodesicDistanceThreshold(){return this._get("geodesicDistanceThreshold")}set geodesicDistanceThreshold(t){zt(Ye.getLogger(this),"geodesicDistanceThreshold",{version:"4.29",warnOnce:!0}),this._set("geodesicDistanceThreshold",t)}get highlightEnabled(){return this.tool.highlightEnabled}set highlightEnabled(t){this.tool.highlightEnabled=t}get hasVertices(){var i;const t=(i=this.input)==null?void 0:i.geometry;return Pe(t)&&t.paths.reduce((n,s)=>n+s.length,0)>0}get hoveredPoints(){return this.input!=null&&this.visible&&this.tool.editable?this.visibleProfiles.map(t=>{const i=t.hoveredPoint;return i!=null?{hoveredPoint:i,color:t.color}:null}).filter(qe):[]}get statistics(){return Yi(this.visibleProfiles.map(t=>t.statistics))}get chartData(){if(this.input==null)return null;const{effectiveUnits:t,progress:i,statistics:n,visibleProfiles:s,uniformChartScaling:l}=this,c=s.filter(a=>a.hasZ).map(a=>({id:a.id,type:a.type,title:a.title,color:a.color,samples:a.samples,progress:a.progress,chartFillEnabled:a.chartFillEnabled,chartStrokeWidth:a.chartStrokeWidth,chartStrokeOffsetY:a.chartStrokeOffsetY,viewVisualizationEnabled:a.viewVisualizationEnabled}));return c.length===0?null:{lines:c,effectiveUnits:t,statistics:n,refined:i===1,dynamicElevationRange:s.some(a=>a.type==="view"),uniformScaling:l}}get visibleProfiles(){return this.profiles.toArray().filter(t=>t.available&&t.visible)}get minDemResolutions(){const t=[];for(const{minDemResolution:i}of this.visibleProfiles)i!=null&&t.push(i);return t}get minDemResolution(){return vt(this.minDemResolutions)}get errorState(){var i;const t=(i=this.input)==null?void 0:i.geometry;if(!He(t))return $.NoValidInput;if(this.error!=null){if(Ui(this.error))switch(this.error.cause){case z.TooComplex:return $.TooComplex;case z.InvalidGeometry:return $.InvalidGeometry;case z.InvalidElevationInfo:return $.InvalidElevationInfo;case z.ElevationQueryError:return $.NoValidInput}return $.UnknownError}return this.visibleProfiles.length===0?$.NoVisibleProfiles:this.chartData==null&&this.progress===1?$.RefinedButNoChartData:$.None}get tileCache(){var i;this._currentTileCache=B(this._currentTileCache);const t=this.view;if(t!=null&&(t==null?void 0:t.type)==="3d"){const n=(i=t.basemapTerrain)==null?void 0:i.elevationQueryCache;if(n!=null)return n}return this._currentTileCache==null&&(this._currentTileCache=new Jt(new Wt(20*Ht.MEGABYTES))),this._currentTileCache}get visible(){return this.tool.visible}set visible(t){this.tool.visible=t}get selectAvailable(){var t,i,n,s;for(const l of((i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers)??[])if(l.type==="graphics"&&!l.internal&&l.graphics.some(c=>{var a;return((a=c.geometry)==null?void 0:a.type)==="polyline"})||"geometryType"in l&&l.geometryType==="polyline")return!0;return!!((s=(n=this.view)==null?void 0:n.graphics)!=null&&s.some(l=>{var c;return((c=l.geometry)==null?void 0:c.type)==="polyline"}))}get inputIsSketched(){return this.tool.interaction.isSketchedGraphic(this.input)}get elevationProvider(){const t=this.view;return t!=null&&t.type==="3d"?t.elevationProvider:null}get updating(){var n;const{progress:t}=this,i=!!((n=this.queue)!=null&&n.updating);return t>0&&t<1||i}start(t){this.tool.interaction.start(t)}stop(){this.tool.interaction.stop()}cancel(){this.tool.interaction.cancel()}clear(){this.tool.interaction.clear()}_findSelectableUnit(t,i){const n=this.unitOptions;return t!=null&&n.includes(t)?t:i?this._findSelectableUnit(i):n[0]}_filteredOrAllUnits(t){const i=(t??[]).filter(n=>Ke.includes(n));return i.length===0?Ke.slice():i}};o([r()],g.prototype,"view",void 0),o([r({type:mt})],g.prototype,"input",void 0),o([r({type:yn,nonNullable:!0})],g.prototype,"profiles",null),o([r({readOnly:!0})],g.prototype,"state",null),o([r({readOnly:!0})],g.prototype,"progress",null),o([r()],g.prototype,"unitOptions",null),o([r()],g.prototype,"unit",null),o([r({readOnly:!0})],g.prototype,"effectiveUnits",null),o([r()],g.prototype,"geodesicDistanceThreshold",null),o([r()],g.prototype,"hoveredChartPosition",void 0),o([r()],g.prototype,"uniformChartScaling",void 0),o([r()],g.prototype,"highlightEnabled",null),o([r({readOnly:!0})],g.prototype,"hoveredPoints",null),o([r({readOnly:!0})],g.prototype,"statistics",null),o([r()],g.prototype,"chartData",null),o([r()],g.prototype,"visibleProfiles",null),o([r()],g.prototype,"minDemResolutions",null),o([r({readOnly:!0})],g.prototype,"minDemResolution",null),o([r({readOnly:!0})],g.prototype,"errorState",null),o([r(ei)],g.prototype,"defaultUnit",void 0),o([r()],g.prototype,"queue",void 0),o([r()],g.prototype,"tileCache",null),o([r()],g.prototype,"tool",void 0),o([r()],g.prototype,"visible",null),o([r()],g.prototype,"error",void 0),o([r()],g.prototype,"selectAvailable",null),o([r()],g.prototype,"inputIsSketched",null),o([r()],g.prototype,"elevationProvider",null),o([r()],g.prototype,"updating",null),o([r()],g.prototype,"_defaultProfileLineGround",void 0),o([r()],g.prototype,"_userUnitOptions",void 0),o([r()],g.prototype,"_controller",void 0),o([r()],g.prototype,"_userUnit",void 0),g=o([R("esri.widgets.ElevationProfile.ElevationProfileViewModel")],g);const ht=Symbol("updating-object"),Dt=g;let Z=class extends me{constructor(){super(...arguments),this.legend=!0,this.chart=!0,this.clearButton=!0,this.settingsButton=!0,this.sketchButton=!0,this.selectButton=!0,this.unitSelector=!0,this.uniformChartScalingToggle=!0}};o([r()],Z.prototype,"legend",void 0),o([r()],Z.prototype,"chart",void 0),o([r()],Z.prototype,"clearButton",void 0),o([r()],Z.prototype,"settingsButton",void 0),o([r()],Z.prototype,"sketchButton",void 0),o([r()],Z.prototype,"selectButton",void 0),o([r()],Z.prototype,"unitSelector",void 0),o([r()],Z.prototype,"uniformChartScalingToggle",void 0),Z=o([R("esri.widgets.ElevationProfile.ElevationProfileVisibleElements")],Z);const Tt=Z,Cn=100;let le=class extends Se{constructor(e,t){super(e,t),this._updateLayout=i=>{const n=i.parentElement,s=i.style.display;n==null||n.removeChild(i),document.body.appendChild(i),i.style.display="block";let l=80;for(const c of i.childNodes)c instanceof HTMLElement&&(l=Math.max(l,c.offsetWidth));document.body.removeChild(i),n==null||n.appendChild(i),i.style.display=s,i.style.setProperty("--max-width",`${l}px`)},this._updateLayoutThrottled=ft(this._updateLayout,Cn)}loadDependencies(){return Oe({icon:()=>x(()=>import("./calcite-icon-Cu0W9dtm.js"),__vite__mapDeps([203,204,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,206]),import.meta.url)})}initialize(){this.addHandles(this._updateLayoutThrottled)}render(){return v("div",{afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled,bind:this,class:be.base},this._renderStatistics())}_renderStatistics(){var t;const e=(t=this._messages)==null?void 0:t.statistics;return e?[this._renderDistanceStatistic("maxDistance",e.maxDistance),this._renderElevationStatistic("elevationGain",e.gain),this._renderElevationStatistic("elevationLoss",e.loss),this._renderElevationStatistic("minElevation",e.minElevation),this._renderElevationStatistic("maxElevation",e.maxElevation),this._renderElevationStatistic("avgElevation",e.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",e.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",e.avgSlope)]:[]}_renderDistanceStatistic(e,t){const i=N().formatPrecision,n=this._renderValue(e,s=>{const l=this.effectiveUnits.distance;return tt(this._messagesUnits,s,l,i)});return this._renderStatistic(t,n)}_renderElevationStatistic(e,t){const i=N().formatPrecision,n=this._renderValue(e,s=>{const l=this.effectiveUnits.elevation;return tt(this._messagesUnits,s,l,i)});return this._renderStatistic(t,n)}_renderSlopeStatistic(e,t,i){const n=N().formatPrecision,s=v("div",{class:be.slopeValue,key:"slope-up"},v("calcite-icon",{icon:"arrow-up",scale:"s"}),this._renderValue(e,l=>it(l,"degrees","geographic","geographic",n)),v("calcite-icon",{icon:"arrow-down",scale:"s"}),this._renderValue(t,l=>it(l,"degrees","geographic","geographic",n)));return this._renderStatistic(i,s)}_renderStatistic(e,t){return v("div",{class:be.statistic},v("label",{class:be.statisticLabel},e),v("div",{class:be.statisticValue},t))}_renderValue(e,t){const i=this.line,n=i.progress===1?i.statistics:null,s=n==null?void 0:n[e];return s!=null?t(s):Oi}};o([r()],le.prototype,"effectiveUnits",void 0),o([r()],le.prototype,"line",void 0),o([r(),Ce("esri/widgets/ElevationProfile/t9n/ElevationProfile")],le.prototype,"_messages",void 0),o([r(),Ce("esri/core/t9n/Units")],le.prototype,"_messagesUnits",void 0),le=o([R("esri.widgets.ElevationProfile.components.Statistics")],le);function pt(e,{profiles:t}){const i=e.title;if(i!=null)return i;switch(e.type){case"ground":return t.ground;case"input":return t.input;case"query":return t.query;case"view":return t.view;default:return""}}let H=class extends Se{constructor(e,t){super(e,t),this.checkboxVisible=!0,this.expanded=!1}loadDependencies(){return Oe({action:()=>x(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([207,208,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,209,210,211,212,206,213,214,204,215]),import.meta.url),checkbox:()=>x(()=>import("./calcite-checkbox-B8olv0Y9.js"),__vite__mapDeps([216,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,217,209,212,218,213,210]),import.meta.url),label:()=>x(()=>import("./calcite-label-B1FxWqaL.js"),__vite__mapDeps([219,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,218,205,213]),import.meta.url),tooltip:()=>x(()=>import("./calcite-tooltip-rE_jVYtd.js"),__vite__mapDeps([220,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,221,222,223,224]),import.meta.url)})}initialize(){this._statistics=new le(this._statisticsProps),this.addHandles(I(()=>this._statisticsProps,e=>this._statistics.set(e)))}destroy(){this._statistics=B(this._statistics)}render(){const e=this.expanded;return v("div",{class:this.classes(J.base,{[J.disabled]:this.disabled,[J.expanded]:e}),key:this},this._renderColorIndicator(),v("div",{class:J.header,key:"header"},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),e?v("div",{class:J.content,key:"content"},this._statistics.render()):null)}get disabled(){return!this.line.available}get _statisticsProps(){return{line:this.line,effectiveUnits:this.effectiveUnits}}_renderColorIndicator(){return v("div",{class:J.colorIndicator,key:"color-indicator",styles:{backgroundColor:this.line.color.toCss()}})}_renderCollapseToggleButton(){const{expanded:e,messages:t}=this,i=e?t.hideDetails:t.showDetails;return v("calcite-action",{appearance:"transparent",bind:this,class:J.collapseToggle,"data-testid":"legend-toggle",icon:e?"chevron-up":"chevron-down",key:"collapse-toggle",onclick:this._onCollapseToggleClick,scale:"s",text:i,title:i})}_onCollapseToggleClick(){this.onExpandedToggle()}_renderLabelWithCheckbox(){const{line:e,checkboxVisible:t,disabled:i,messages:n}=this,s=`label-${e.id}`;return v("calcite-label",{class:J.label,disabled:i,key:s,layout:"inline"},t?this._renderCheckbox(e.id):null,pt(e,n))}_renderCheckbox(e){const{disabled:t,line:i,messages:n}=this,s=i.visible,l=`${e}-checkbox`,c=s?n.hideProfile:n.showProfile,a=Mi(c,{name:pt(i,n)});return v(Re,null,v("calcite-checkbox",{checked:s,class:J.checkbox,disabled:t,id:l,key:"checkbox",onCalciteCheckboxChange:()=>i.toggleVisibility()}),v("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:l},a))}};o([r()],H.prototype,"checkboxVisible",void 0),o([r()],H.prototype,"disabled",null),o([r({nonNullable:!0})],H.prototype,"effectiveUnits",void 0),o([r()],H.prototype,"expanded",void 0),o([r({nonNullable:!0})],H.prototype,"line",void 0),o([r()],H.prototype,"messages",void 0),o([r()],H.prototype,"onExpandedToggle",void 0),o([r()],H.prototype,"_statistics",void 0),H=o([R("esri.widgets.ElevationProfile.components.LegendItem")],H);let ae=class extends Se{constructor(){super(...arguments),this._expandedLine=null}render(){const{profiles:e,messages:t,effectiveUnits:i,_expandedLine:n}=this;return v("div",{class:Ti.base},e.map(s=>v(H,{checkboxVisible:e.length>1,effectiveUnits:i,expanded:s===n,line:s,messages:t,onExpandedToggle:()=>this._onExpandedToggle(s)})))}_onExpandedToggle(e){this._expandedLine=e===this._expandedLine?null:e}};o([r()],ae.prototype,"effectiveUnits",void 0),o([r()],ae.prototype,"messages",void 0),o([r()],ae.prototype,"profiles",void 0),o([r()],ae.prototype,"_expandedLine",void 0),ae=o([R("esri.widgets.ElevationProfile.components.Legend")],ae);let A=class extends Se{constructor(){super(...arguments),this.messages=null,this._popover=null,this._popoverIsOpen=!1,this._onPopoverAfterCreate=e=>{this._popover=e},this._onUniformChartScalingChange=e=>{this.onUniformChartScalingChange(e.target.checked)}}loadDependencies(){return Oe({action:()=>x(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([207,208,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,209,210,211,212,206,213,214,204,215]),import.meta.url),checkbox:()=>x(()=>import("./calcite-checkbox-B8olv0Y9.js"),__vite__mapDeps([216,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,217,209,212,218,213,210]),import.meta.url),label:()=>x(()=>import("./calcite-label-B1FxWqaL.js"),__vite__mapDeps([219,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,218,205,213]),import.meta.url),popover:()=>x(()=>import("./calcite-popover-5MaBc2pF.js"),__vite__mapDeps([225,226,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,221,205,222,227,223,228,211,212,206,214,210,224,213,208,209,204,215]),import.meta.url),tooltip:()=>x(()=>import("./calcite-tooltip-rE_jVYtd.js"),__vite__mapDeps([220,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,221,222,223,224]),import.meta.url)})}initialize(){const e=()=>this._popover;this.addHandles([De(e,"calcitePopoverOpen",()=>this._popoverIsOpen=!0),De(e,"calcitePopoverClose",()=>this._popoverIsOpen=!1)])}render(){const{id:e,messages:t,visibleElements:i}=this,{unitSelector:n,uniformChartScalingToggle:s}=i;if(!t||!n&&!s)return v("div",{key:`${e}-empty`});const l=`${e}__action`,c=this._popoverIsOpen?t.hideSettings:t.showSettings;return v("div",{class:Ie.base,key:this},v("calcite-popover",{afterCreate:this._onPopoverAfterCreate,autoClose:!0,label:c,overlayPositioning:"fixed",placement:"bottom-end",referenceElement:l},this._renderPopoverContent()),v("calcite-action",{appearance:"transparent","data-testid":"settings-button",icon:"gear",id:l,scale:"s",text:c,title:c}))}_renderPopoverContent(){const{unitSelector:e,uniformChartScalingToggle:t}=this.visibleElements;return v("div",{class:Ie.popoverContent},e?this._renderUnitSelector():null,t?this._renderUniformChartScalingToggle():null)}_renderUnitSelector(){const{messages:e}=this;return v(Di,{key:"unit-selector-label",options:this.unitOptions,selectLabel:(e==null?void 0:e.unitSelectLabel)??"",value:this.unit,onChange:this.onUnitChange})}_renderUniformChartScalingToggle(){const{messages:e}=this,t=this.uniformChartScaling,i=`${this.id}__uniform-chart-scaling-toggle`,n=(e==null?void 0:e[t?"uniformChartScalingDisable":"uniformChartScalingEnable"])??"";return v("calcite-label",{class:Ie.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},v("calcite-checkbox",{checked:t,class:Ie.uniformChartScalingCheckbox,id:i,onCalciteCheckboxChange:this._onUniformChartScalingChange}),v("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:i},n),e==null?void 0:e.uniformChartScalingLabel)}};o([r()],A.prototype,"messages",void 0),o([r()],A.prototype,"onUniformChartScalingChange",void 0),o([r()],A.prototype,"onUnitChange",void 0),o([r()],A.prototype,"uniformChartScaling",void 0),o([r()],A.prototype,"unit",void 0),o([r()],A.prototype,"unitOptions",void 0),o([r()],A.prototype,"visibleElements",void 0),o([r()],A.prototype,"_popover",void 0),o([r()],A.prototype,"_popoverIsOpen",void 0),A=o([R("esri.widgets.ElevationProfile.components.SettingsButton")],A);var T;(function(e){e.Sketch="sketch",e.SketchCancel="sketch-cancel",e.SketchDone="sketch-done",e.Select="select",e.SelectCancel="select-cancel"})(T||(T={}));const we=[{type:T.Select},{type:T.Sketch}],Sn={[$.None]:null,[$.NoValidInput]:"noProfile",[$.NoVisibleProfiles]:"noProfile",[$.RefinedButNoChartData]:"noProfile",[$.TooComplex]:"tooComplex",[$.UnknownError]:"unknown",[$.InvalidGeometry]:"invalidGeometry",[$.InvalidElevationInfo]:"invalidElevationInfo"},Be=Symbol("resize-observer-handle");let y=class extends Se{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new Tt,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this._contentWrapper=null,this._chartContainer=null,this._chart=null,this._chartInitTask=null,this._chartIsRefined=!1,this._width=0,this._zoomOutButtonVisible=!1,this._getChartUpdateParamsMemoized=F((i,n,s,l)=>({chart:i,data:n,stationary:s,messages:l})),this._onZoomOutButtonClick=()=>{var i;(i=this._chart)==null||i.zoomOut()},this._onClearButtonClick=()=>{this.viewModel.clear()},e!=null&&e.viewModel||(this._defaultViewModel=new Dt({view:e==null?void 0:e.view}),this.viewModel=this._defaultViewModel)}loadDependencies(){return Oe({action:()=>x(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([207,208,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,209,210,211,212,206,213,214,204,215]),import.meta.url),button:()=>x(()=>import("./calcite-button-D_Agetwz.js"),__vite__mapDeps([229,230,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,217,205,209,218,213,210,211,212,206,214,204,215]),import.meta.url),loader:()=>x(()=>import("./calcite-loader-DP4PIFO8.js"),__vite__mapDeps([231,215,37,4,18,19,12,2,20,21,6,9,10,11,27,38,24,25,26,28,17,39,7,205,211,212,206]),import.meta.url)})}postInitialize(){this.addHandles([I(()=>({container:this._chartContainer,width:this._width}),({container:e,width:t})=>{this._destroyChart(),e!=null&&t>0&&this._initializeChart(e)},Qe),I(()=>this._chartUpdateParams,()=>this._updateChart(this._chartUpdateParams),Qe)])}destroy(){this._destroyChart(),this._defaultViewModel!=null&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get input(){return this.viewModel.input}set input(e){this.viewModel.input=e}get profiles(){return this.viewModel.profiles}set profiles(e){this.viewModel.profiles=e}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(e){this.viewModel.unitOptions=e}get unit(){return this.viewModel.unit}set unit(e){this.viewModel.unit=e}get geodesicDistanceThreshold(){return this.viewModel.geodesicDistanceThreshold}set geodesicDistanceThreshold(e){this.viewModel.geodesicDistanceThreshold=e}get icon(){return"altitude"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get _portrait(){return this._width<N().portraitModePixelBreakpoint}get _selectButtonVisible(){return this.visibleElements.selectButton===!0&&this.viewModel.selectAvailable}get _chartUpdateParams(){const e=this.view;return this._getChartUpdateParamsMemoized(this._chart,this.viewModel.chartData,e==null||e.stationary,this._chartMessages)}get _chartMessages(){return{...this.messagesUnits,...this.messages}}get _profilesArray(){return this.profiles.toArray()}render(){const{viewModel:e,visible:t}=this;return v("div",{"aria-label":this.messages.widgetLabel,class:this.classes({[E.base]:t,[Ve.widget]:t,[Ve.panel]:t,[Ve.widgetDisabled]:t&&e.state==="disabled",[E.portrait]:this._portrait,[E.refined]:e.progress===1}),key:this},v("div",{afterCreate:this._onContentWrapperUpdate,afterRemoved:this._onContentWrapperRemoved,afterUpdate:this._onContentWrapperUpdate,bind:this,key:"content-wrapper"},t?this._renderContentForState():null))}_renderContentForState(){switch(this.viewModel.state){case O.Ready:return this._renderContentForReadyState();case O.Selecting:return this._renderContentForSelectingState();case O.Creating:return this._renderContentForCreatingState();case O.Selected:return this._renderContentForSelectedState();case O.Created:return this._renderContentForCreatedState();case O.Disabled:return this._renderContentForReadyState()}}_renderContentForReadyState(){var l;const{messages:e,visibleElements:t,_selectButtonVisible:i}=this,{sketchButton:n}=t;let s;return s=n&&i?e.readyPrompt:n?e.readyPromptCreateOnly:i?e.readyPromptSelectOnly:(l=e.errors)==null?void 0:l.noProfile,this._renderContent({prompt:s,chart:!1,actions:we})}_renderContentForSelectingState(){const{view:e}=this;if(e==null)return null;const t=this.messages[`selectingPrompt-${e.type}`];return this._renderContent({prompt:t,chart:!1,actions:[{type:T.SelectCancel}]})}_renderContentForCreatingState(){const{view:e,viewModel:t}=this;if(e==null)return null;const i=t.hasVertices?[{type:T.SketchCancel},{type:T.SketchDone,disabled:!t.tool.interaction.canStopCreating}]:[{type:T.Select},{type:T.Sketch,disabled:!0}];if(t.errorState===$.NoValidInput){const s=this.messages[`creatingPrompt-${e.type}`];return this._renderContent({chart:!1,actions:i,prompt:s})}const n=this._getErrorMessage();return n?this._renderContent({chart:!1,actions:i,prompt:n}):this._renderContent({chart:!0,actions:i})}_renderContentForSelectedState(){const e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:we,prompt:e}):this._renderContent({chart:!0,actions:we})}_renderContentForCreatedState(){const e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:we,prompt:e}):this._renderContent({chart:!0,actions:we})}_getErrorMessage(){var t,i;const e=Sn[this.viewModel.errorState];return e?(i=(t=this.messages)==null?void 0:t.errors)==null?void 0:i[e]:null}_renderContent(e){const t=e.prompt!=null?this._renderPrompt(e.prompt):e.chart&&this._renderChart(),{viewModel:i}=this,n=i.input!=null;return v(Re,null,v("header",{class:E.header,key:"header"},this._zoomOutButtonVisible?this._renderZoomOutButton():null,this.visibleElements.clearButton&&n?this._renderClearButton():null,this.visibleElements.settingsButton?v(A,{messages:this.messages,uniformChartScaling:i.uniformChartScaling,unit:i.unit,unitOptions:i.unitOptions,visibleElements:this.visibleElements,onUniformChartScalingChange:s=>i.uniformChartScaling=s,onUnitChange:s=>i.unit=s}):null),v("div",{class:E.mainContainer,key:"main-container"},t),this.visibleElements.legend?v(ae,{effectiveUnits:i.effectiveUnits,messages:this.messages,profiles:this._profilesArray}):null,this._renderActions(e))}_renderZoomOutButton(){const e=this.messages.zoomOut;return v("calcite-action",{appearance:"transparent",class:E.zoomOutButton,"data-testid":"zoom-out-button",icon:"magnifying-glass-minus",key:"zoom-out",onclick:this._onZoomOutButtonClick,scale:"s",text:e,title:e})}_renderClearButton(){const e=this.messages.clearProfile;return v("calcite-action",{appearance:"transparent",class:E.clearButton,"data-testid":"clear-button",icon:"trash",key:"clear-profile",onclick:this._onClearButtonClick,scale:"s",text:e,title:e})}_renderPrompt(e){return[v("div",{bind:this,class:E.promptContainer,key:"prompt-container"},v("p",null,e))]}_renderChart(){if(!this.visibleElements.chart)return v("div",{class:E.chartContainer,key:"empty-chart-container"});const{chartData:e,progress:t}=this.viewModel,i=this._chartIsRefined||this._canRenderChart(),n=e!=null&&t<1;return i?v(Re,null,this._renderSpinner({size:i?"small":"large",visible:n}),v("div",{afterCreate:this._onChartContainerUpdate,afterRemoved:this._onChartContainerRemoved,afterUpdate:this._onChartContainerUpdate,bind:this,class:E.chartContainer,key:"chart-container"})):v(Re,null,this._renderSpinner({size:"large",visible:n}),v("div",{class:E.chartContainer,key:"chart-container-empty"}))}_renderSpinner(e){const t=e.size==="small",i=e.visible??!0;return v("calcite-loader",{class:this.classes(E.chartSpinner,t&&E.chartSpinnerSmall,i&&E.chartSpinnerVisible),inline:t,key:"spinner",label:"",scale:"s"})}_canRenderChart(){const e=this.viewModel.chartData;if(e==null)return!1;if(!this.viewModel.inputIsSketched)return e.refined;let t=0;for(const{samples:i}of e.lines)t+=i!=null?i.length:0;return e.refined||t<=N().largeChartSamples}_renderActions({actions:e}){const t=e.map(i=>{switch(i.type){case T.Sketch:return this.visibleElements.sketchButton&&this._renderAction({action:i,className:E.sketchButton,label:this.messages.sketchButtonLabel,onClick:this._onSketchButtonClick,primary:!0});case T.SketchCancel:return this.visibleElements.sketchButton&&this._renderAction({action:i,onClick:this._onCancelButtonClick,className:E.sketchCancelButton,label:this.messagesCommon.cancel,primary:!1});case T.SketchDone:return this.visibleElements.sketchButton&&this._renderAction({action:i,onClick:this._onDoneButtonClick,className:E.sketchDoneButton,label:this.messagesCommon.done,primary:!0});case T.Select:return this._selectButtonVisible&&this._renderAction({action:i,onClick:this._onSelectButtonClick,className:E.selectButton,label:this.messages.selectButtonLabel,primary:!1});case T.SelectCancel:return this._selectButtonVisible&&this._renderAction({action:i,onClick:this._onCancelButtonClick,className:E.selectCancelButton,label:this.messagesCommon.cancel,primary:!1})}}).filter(Boolean);return t.length?v("footer",{class:E.footer,key:"footer"},t):null}_renderAction({action:e,className:t,label:i,onClick:n,primary:s}){return v("calcite-button",{appearance:s?"solid":"outline-fill",bind:this,class:this.classes(E.actionButton,t),disabled:e.disabled,key:`action-${e.type}`,onclick:n},i)}_onSketchButtonClick(){this.viewModel.start({mode:"sketch"})}_onSelectButtonClick(){this.viewModel.start({mode:"select"})}_onCancelButtonClick(){this.viewModel.cancel()}_onDoneButtonClick(){this.viewModel.stop()}_onContentWrapperUpdate(e){e!==this._contentWrapper&&(this._contentWrapper=e,this.removeHandles(Be),this.addHandles(Zt(e,t=>{this._width=t.contentRect.width}),Be))}_onContentWrapperRemoved(){this.removeHandles(Be),this._contentWrapper=null}_updateChart(e){const{data:t,chart:i,messages:n,stationary:s}=e;i!=null&&n!=null&&s&&this._canRenderChart()&&(i.update(e),this._chartIsRefined=t!=null&&t.refined)}_onChartContainerUpdate(e){this._chartContainer=e}_onChartContainerRemoved(){this._chartContainer=null}_initializeChart(e){ce(this._chartInitTask),this._chartInitTask=Te(async t=>{const{createChart:i}=await x(()=>import("./chartUtils-ClMOAwP3.js"),__vite__mapDeps([232,233,234,4,18,19,12,2,20,21,6,9,10,11,107,17,151,59,135,14,136,5,7,8,73,235,236,237,37,27,38,24,25,26,28,39,238,239,240,241,242,36,40,1,3,13,41,42,43,44,45,46,47,48,49,50,51,52,53,32,54,55,56,57,58,22,60,61,62,63,33,34,64,31,65,66,67,68,69,70,71,72,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,16,106,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,137,138,139,140,141,142,143,144,145,146,147,148,149,150,152,153]),import.meta.url);se(t);const n=await i({container:e,abortOptions:{signal:t},onRangeChange:(s,l)=>{this._zoomOutButtonVisible=s!==1||l!==1},onCursorPositionChange:s=>{this.viewModel.hoveredChartPosition=s}});if(t.aborted)throw B(n),Nt();this._chart=n,this._updateChart(this._chartUpdateParams)})}_destroyChart(){this._chartInitTask=ce(this._chartInitTask),this._chart=B(this._chart),this._chartIsRefined=!1}};o([r({type:Dt})],y.prototype,"viewModel",void 0),o([r()],y.prototype,"view",null),o([r()],y.prototype,"input",null),o([r()],y.prototype,"profiles",null),o([r()],y.prototype,"unitOptions",null),o([r()],y.prototype,"unit",null),o([r()],y.prototype,"geodesicDistanceThreshold",null),o([r({type:Tt,nonNullable:!0})],y.prototype,"visibleElements",void 0),o([r()],y.prototype,"icon",null),o([r()],y.prototype,"label",null),o([r()],y.prototype,"visible",null),o([r(),Ce("esri/widgets/ElevationProfile/t9n/ElevationProfile")],y.prototype,"messages",void 0),o([r(),Ce("esri/t9n/common")],y.prototype,"messagesCommon",void 0),o([r(),Ce("esri/core/t9n/Units")],y.prototype,"messagesUnits",void 0),o([r()],y.prototype,"_contentWrapper",void 0),o([r()],y.prototype,"_chartContainer",void 0),o([r()],y.prototype,"_chart",void 0),o([r()],y.prototype,"_chartInitTask",void 0),o([r()],y.prototype,"_chartIsRefined",void 0),o([r()],y.prototype,"_width",void 0),o([r()],y.prototype,"_portrait",null),o([r()],y.prototype,"_zoomOutButtonVisible",void 0),o([r()],y.prototype,"_selectButtonVisible",null),o([r()],y.prototype,"_chartUpdateParams",null),o([r()],y.prototype,"_chartMessages",null),o([r()],y.prototype,"_profilesArray",null),y=o([R("esri.widgets.ElevationProfile")],y);const Pn=y,xs=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"}));export{xs as E,cn as T,pt as e,N as r,Oi as s,O as t};
