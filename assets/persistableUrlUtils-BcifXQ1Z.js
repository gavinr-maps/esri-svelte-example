import{_ as v,G as g,Y as p,K as w,a as O,T as d,A as m,F as S,t as u,r as U,C as K}from"./assets-C2mb-ea2.js";function x(t,r){var e;const o=(e=r==null?void 0:r.url)==null?void 0:e.path;if(t&&o&&(t=v(t,o,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){const n=g(t,r.portalItem.itemUrl);n!=null&&b.test(n)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(n).path)}return(t=f(t,r==null?void 0:r.portal))&&l.test(t)?y(t):t}function I(t,r,o=c.YES){var n,s;if((t=t&&l.test(t)?P(t):t)==null)return t;!p(t)&&(r!=null&&r.blockedRelativeUrls)&&r.blockedRelativeUrls.push(t);let e=v(t);if(r){const a=((n=r.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=r.url)==null?void 0:s.path);if(a){const i=f(a,r.portal),h=f(e,r.portal);e=g(h,i,i),e!=null&&e!==h&&e!==t&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(e)}}return e=R(e,r==null?void 0:r.portal),p(e)&&(e=w(e)),r!=null&&r.resources&&(r!=null&&r.portalItem)&&!p(e)&&!O(e)&&o===c.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(e),compress:!1}),e}function F(t,r,o){return x(t,o)}function N(t,r,o,e){const n=I(t,e);n!==void 0&&(r[o]=n)}const l=/\/items\/([^/]+)\/resources\/(.*)/,b=/^\.\/resources\//;function C(t){const r=(t==null?void 0:t.match(l))??null;return(r==null?void 0:r[1])??null}function Y(t){const r=(t==null?void 0:t.match(l))??null;if(r==null)return null;const o=r[2],e=o.lastIndexOf("/");if(e===-1){const{path:a,extension:i}=d(o);return{prefix:null,filename:a,extension:i}}const{path:n,extension:s}=d(o.slice(e+1));return{prefix:o.slice(0,e),filename:n,extension:s}}function R(t,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?m(t,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):t}function f(t,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return t;const o=`${r.urlKey}.${r.customBaseUrl}`,e=K();return S(e,`${e.scheme}://${o}`)?m(t,r.portalHostname,o):m(t,o,r.portalHostname)}function y(t){if(!t)return t||null;let r=t;return r&&u&&!u.findCredential(r)&&(r=U(r),r=r.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),r=r.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),r=r.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),r}function P(t){if(!t)return t||null;let r=t;return r=r.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),r=r.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),r=r.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),r&&u&&!u.findCredential(r)&&(r=U(r)),r}var c;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(c||(c={}));const q=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return c},ensureMainOnlineDomain:R,fromCDNUrl:P,fromJSON:x,itemIdFromResourceUrl:C,prefixAndFilenameFromResourceUrl:Y,read:F,toCDNUrl:y,toJSON:I,write:N},Symbol.toStringTag,{value:"Module"}));export{q as P,y as R,C as U,F as f,Y as g,N as h,I as m,x as p,R as x,c as y};
