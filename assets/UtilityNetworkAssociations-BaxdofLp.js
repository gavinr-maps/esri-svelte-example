const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-dropdown-6UfWTtac.js","./jsxFactory-CbAu6VfF.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./intl-Dpfm8vPB.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./assets-C2mb-ea2.js","./index-CeCSsEgo.js","./index-CjOb8WjV.css","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./uuid-fwrPAdZb.js","./dom-Cv0oa6So.js","./floating-ui-BiOoil4s.js","./debounce-C5YDvsuO.js","./interactive-Dtpmn6Ls.js","./key-D5DPfjW0.js","./loadable-CTFTnu2T.js","./observers-EizV_Lvc.js","./openCloseComponent-v_dlVp47.js","./calcite-dropdown-group-DN7H-FJ1.js","./resources3-B__tPmNQ.js","./calcite-dropdown-item-bgAR1XTv.js","./component-ByvC-PUv.js","./icon-DIKjN-ev.js","./calcite-input-EEDQOvVg.js","./input2-ChLBQj0V.js","./form-DcBTx4ZC.js","./label-rdYpV4K5.js","./locale-BUTTOPma.js","./t9n-DfK3dFGw.js","./Validation-BBJwLSGg.js","./input-Dt5r39B0.js","./input-message-CKyGNFPw.js","./progress-B-8bmD6j.js","./calcite-input-number-BIZxexRy.js","./input-number-DObqjck3.js","./calcite-label-CI84R5fD.js","./calcite-switch-BZCweZXi.js","./switch-DnlX0u9j.js","./calcite-action-DqS7UojZ.js","./action-DJPgY7YC.js","./loader-wfvKSvDR.js","./calcite-block-MHbn6ZJN.js","./conditionalSlot-MT4PnZbw.js","./Heading-Dn_ijr3J.js","./action-menu-CBohuqGX.js","./array-DofFqflK.js","./popover-Cj0_nbSv.js","./focusTrapComponent-C9GPb5g8.js","./FloatingArrow-HmzV7w9c.js","./handle-C2OyFwdr.js","./scrim-tJUFlVOZ.js","./calcite-block-section-OEvs1lC0.js","./calcite-icon-CocWVhPd.js","./calcite-notice-DAIcfVw0.js","./calcite-panel-CuNJxdVc.js","./panel-B3delCVt.js","./calcite-slider-DLeNc_DB.js","./math-DqfKmoY3.js","./calcite-tooltip-HeRO_zdX.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./index-CeCSsEgo.js";import{e as s}from"./Evented-CXIxDjmW.js";import{V as U,d as b}from"./reactiveUtils-BFQ0BtrB.js";import{y as o,b as L,n as M,c as I}from"./subclass-BR3PhgZG.js";import{e as f,B as G,n as e,r as V}from"./jsxFactory-CbAu6VfF.js";import{n as N}from"./assets-C2mb-ea2.js";import{u as B}from"./Color-DDUWtbqR.js";import{d as k,u as g}from"./TextSymbol-gKE-H_J6.js";import{S as $}from"./Accessor-D6mNnsWy.js";import{d as T}from"./Graphic-Dc7F67nR.js";import"./intl-Dpfm8vPB.js";import{h as H}from"./UpdatingHandles-CMtXpTiG.js";import W from"./GraphicsLayer-D2NeCfd2.js";import{e as P}from"./layerUtils-BS1Di3Pm.js";import{e as F,h as z}from"./Promise-CZrWwByK.js";import"./shared-B3wH2qpO.js";import"./uuid-fwrPAdZb.js";import"./jsonMap-DCC6W5ex.js";import"./colorUtils-CS9vdHXB.js";import"./mathUtils-ClvKsMak.js";import"./enumeration--HlxOQ_N.js";import"./screenUtils-PfxkaaMN.js";import"./writer-3zufXUNV.js";import"./geometry-DpwwkAX1.js";import"./Extent-DHjqVB-p.js";import"./Point-DB4Hp4hH.js";import"./Polyline-D97hl-6E.js";import"./PopupTemplate-ByHks6sq.js";import"./Clonable-cKbRam6-.js";import"./fieldUtils-CNduWQU9.js";import"./ActionToggle-C0Z1k2jc.js";import"./Identifiable-BLvpQbOc.js";import"./symbols-CsUQ5BxR.js";import"./materialUtils-CQ3JLQ1x.js";import"./opacityUtils-BT7mQkwC.js";import"./aaBoundingBox-rJEWaOSN.js";import"./persistableUrlUtils-BcifXQ1Z.js";import"./collectionUtils-Dm1icNvk.js";import"./Portal-liet8xHC.js";import"./jsonUtils-Cma_7A64.js";import"./GraphicsCollection-nEq2FD1R.js";import"./Layer-C96_yo4i.js";import"./TimeExtent-41gxTbrv.js";import"./timeUtils-DQR2jUPL.js";import"./BlendLayer-DmvCcS5c.js";import"./jsonUtils-C4Wp5KpV.js";import"./parser-BN6zmHl-.js";import"./utils-D20M4_S8.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-ybYUU6jq.js";import"./ScaleRangeLayer-CKYXLXxK.js";import"./ElevationInfo-BxYXLfrw.js";import"./unitConversionUtils-Dl04YuQU.js";import"./lengthUtils-D7_DvYH0.js";let _=class extends ${constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};s([o({type:Boolean,nonNullable:!0})],_.prototype,"arrowsToggle",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"capSelect",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"colorPicker",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"stylePicker",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"widthInput",void 0),_=s([L("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],_);const E=_,y="esri-un-associations",v={divControlsSymbolPicker:`${y}__div-controls-symbol-picker`,dropdown:`${y}__dropdown`,dropdownItemLineCap:`${y}__dropdown-item-line-cap`,dropdownItemLinePattern:`${y}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${y}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${y}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${y}__dropdown-trigger`,labelAndToggle:`${y}__label-and-toggle`};let S=class extends G{constructor(i,n){super(i,n),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new k,this.messages=null,this.showArrows=!1,this.visibleElements=new E,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:i,lineColor:n,lineStyle:a,lineWidth:l,showArrows:r}},visibleElements:d}=this,m=this.lineSymbol;return e("div",{class:v.divControlsSymbolPicker},d.arrowsToggle?this._renderToggle(r,this.showArrows,m,"marker"):void 0,d.capSelect?this._renderLineStylePicker(i,this._lineCapTypes,m,"cap"):void 0,d.colorPicker&&m.color?this._renderColorPicker(n,m.color.toHex(),m,"color"):void 0,d.stylePicker?this._renderLineStylePicker(a,this._lineStyleTypes,m,"style"):void 0,d.widthInput?this._renderNumberInput(l,m.width.toString(),m,"width"):void 0)}loadDependencies(){return V({dropdown:()=>A(()=>import("./calcite-dropdown-6UfWTtac.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]),import.meta.url),"dropdown-group":()=>A(()=>import("./calcite-dropdown-group-DN7H-FJ1.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12,13,20,23]),import.meta.url),"dropdown-item":()=>A(()=>import("./calcite-dropdown-item-bgAR1XTv.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,19,25,17,23,26,20]),import.meta.url),input:()=>A(()=>import("./calcite-input-EEDQOvVg.js"),__vite__mapDeps([27,28,1,2,3,4,5,6,7,8,9,10,11,12,13,14,29,17,18,30,25,19,31,20,32,33,34,26,35,36]),import.meta.url),"input-number":()=>A(()=>import("./calcite-input-number-BIZxexRy.js"),__vite__mapDeps([37,38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,29,17,18,30,25,19,31,20,32,33,34,26,35,36]),import.meta.url),label:()=>A(()=>import("./calcite-label-CI84R5fD.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,8,9,10,11,12,13,30,14,25]),import.meta.url),switch:()=>A(()=>import("./calcite-switch-BZCweZXi.js"),__vite__mapDeps([40,41,1,2,3,4,5,6,7,8,9,10,11,12,13,14,29,17,18,30,25,19]),import.meta.url)})}_afterComponentCreate(i){"value"in i&&i.value!=null&&"setNumberValue"in i&&i.setNumberValue({committing:!1,value:i.value,origin:"direct"})}_renderColorPicker(i,n,a,l){return e("calcite-label",{scale:"s"},i,e("calcite-input",{scale:"s",type:"color",value:n,onCalciteInputInput:r=>{const d=r.target;a.set(l,new B(d.value))}}))}_renderLineStylePicker(i,n,a,l){const r=l==="style",d="esri/widgets/UtilityNetworkAssociations/assets/img";function m(p,x){return e("calcite-dropdown-item",{label:p,selected:a[x]===p},e("div",{class:r?v.dropdownItemLinePattern:v.dropdownItemLineCap,style:`background-image:url(${N(`${d}/line-${r?"patterns":"caps"}/${p}.png`)})`}))}return e("calcite-label",{scale:"s"},i,e("calcite-dropdown",{class:v.dropdown,onCalciteDropdownSelect:p=>{const x=p.target;a.set(l,x.selectedItems[0].label)}},e("div",{class:v.dropdownTrigger,role:"button",slot:"trigger"},e("div",{class:r?v.dropdownSelectedItemLinePattern:v.dropdownSelectedItemLineCap,style:`background-image:url(${N(`${d}/line-${r?"patterns":"caps"}/${a[l]}.png`)})`})),e("calcite-dropdown-group",null,n.map(p=>m(p,l)))))}_renderNumberInput(i,n,a,l){return e("calcite-label",{scale:"s"},i,e("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:n,onCalciteInputNumberChange:r=>{const d=r.target;a.set(l,d.value)}}))}_renderToggle(i,n,a,l){return e("div",{class:v.labelAndToggle},e("calcite-label",{scale:"s"},i),e("calcite-switch",{bind:this,checked:n,onCalciteSwitchChange:r=>{r.target.checked?a.set(l,new g({style:"arrow"})):a.set(l,null)}}))}};s([o()],S.prototype,"lineSymbol",void 0),s([o(),f("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],S.prototype,"messages",void 0),s([o()],S.prototype,"showArrows",void 0),s([o({type:E,nonNullable:!0})],S.prototype,"visibleElements",void 0),S=s([L("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],S);const R=S;let u=class extends ${constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new H,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new k({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new U,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new k({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await z("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then(()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([b(()=>[this.view,this.utilityNetwork],async()=>{var d,m;const{loadErrors:i,messages:{info:{noUtilityNetwork:n,noView:a}}}=this;this._initialValidationsFinished=!1,i.removeAll();let l=!1,r=!1;this.removeAssociations(),((d=this.utilityNetwork)==null?void 0:d.type)!=="utility"?(this.loadErrors.push(n),M.getLogger(this).error(new I("utilityNetworkAssociations:missing-property",n))):(this.utilityNetwork.loaded||await this.utilityNetwork.load(),l=!0),((m=this.view)==null?void 0:m.type)!=="2d"?(this.loadErrors.push(a),M.getLogger(this).error(new I("utilityNetworkAssociations:missing-property",a))):(P(this.view,this._internalGraphicsLayerConnectivity),P(this.view,this._internalGraphicsLayerStructuralAttachment),r=!0),l&&r&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0},{initial:!0}),b(()=>{var i;return[(i=this.view)==null?void 0:i.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]},async()=>{var i;(i=this.view)!=null&&i.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()}),b(()=>[this.showArrowsConnectivity],()=>{const i=this.connectivityAssociationsLineSymbol.clone();i.marker=null,this.showArrowsConnectivity&&(i.marker=new g({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const n of this._internalGraphicsLayerConnectivity.graphics)n.symbol=i}),b(()=>[this.showArrowsStructuralAttachment],()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();i.marker=null,this.showArrowsStructuralAttachment&&(i.marker=new g({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const n of this._internalGraphicsLayerStructuralAttachment.graphics)n.symbol=i}),b(()=>{const{cap:i,color:n,style:a,width:l,marker:r}=this.connectivityAssociationsLineSymbol;return[i,n,a,l,r]},()=>{const i=this.connectivityAssociationsLineSymbol.clone();for(const n of this._internalGraphicsLayerConnectivity.graphics)n.symbol=i;this.showArrowsConnectivity=!1,i.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,i.marker=new g({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),b(()=>{const{cap:i,color:n,style:a,width:l,marker:r}=this.structuralAttachmentAssociationsLineSymbol;return[i,n,a,l,r]},()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();for(const n of this._internalGraphicsLayerStructuralAttachment.graphics)n.symbol=i;this.showArrowsStructuralAttachment=!1,i.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,i.marker=new g({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),F(t)])})}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":this.executionError!==""?"warning":this._initialValidationsFinished?"ready":"loading"}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){var a,l;const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:i}},utilityNetwork:n}=this;this._set("executionError",""),this._updatingHandles.addPromise(n==null?void 0:n.synthesizeAssociationGeometries({returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations,extent:(a=this.view)==null?void 0:a.extent,outSpatialReference:(l=this.utilityNetwork)==null?void 0:l.spatialReference.clone(),maxGeometryCount:this.maxAllowableAssociations}).then(r=>{let d=[],m=[];return r!=null&&r.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",t)):(r==null?void 0:r.associations.length)===0?(this.removeAssociations(),void this._set("executionError",i)):void(r&&(d=r==null?void 0:r.associations.filter(({associationType:p})=>p==="connectivity").map(p=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new g({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new T({geometry:p.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol}))),m=r.associations.filter(({associationType:p})=>p==="attachment").map(p=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new g({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new T({geometry:p.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol}))),this._internalGraphicsLayerConnectivity.removeAll(),d.length>0&&this._internalGraphicsLayerConnectivity.addMany(d),this._internalGraphicsLayerStructuralAttachment.removeAll(),m.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(m)))},({message:r})=>{this._set("executionError",r)}))}_createInternalGraphicsLayer(t){return new W({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&((t=this.view)!=null&&t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};s([o()],u.prototype,"_initialValidationsFinished",void 0),s([o()],u.prototype,"autoRefreshAssociations",void 0),s([o({type:k,nonNullable:!0})],u.prototype,"connectivityAssociationsLineSymbol",void 0),s([o({readOnly:!0})],u.prototype,"executionError",void 0),s([o({type:Boolean,value:!0})],u.prototype,"includeConnectivityAssociations",null),s([o({type:Boolean,value:!0})],u.prototype,"includeStructuralAttachmentAssociations",null),s([o()],u.prototype,"loadErrors",void 0),s([o()],u.prototype,"maxAllowableAssociations",void 0),s([o()],u.prototype,"messages",void 0),s([o()],u.prototype,"showAssociationsEnabled",void 0),s([o()],u.prototype,"showArrowsConnectivity",void 0),s([o()],u.prototype,"showArrowsStructuralAttachment",void 0),s([o({readOnly:!0})],u.prototype,"state",null),s([o({type:k,nonNullable:!0})],u.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),s([o()],u.prototype,"utilityNetwork",null),s([o()],u.prototype,"view",null),u=s([L("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],u);const D=u;let C=class extends ${constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=null,this.structuralAttachmentAssociationsSettings=null}};s([o({type:Boolean,nonNullable:!0})],C.prototype,"maxAllowableAssociationsSlider",void 0),s([o({type:E,nonNullable:!0})],C.prototype,"connectivityAssociationsSettings",void 0),s([o({type:E,nonNullable:!0})],C.prototype,"structuralAttachmentAssociationsSettings",void 0),C=s([L("esri.widgets.UtilityNetworkAssociations.VisibleElements")],C);const O=C,w="esri-un-associations",h={action:`${w}__action`,actionRefresh:`${w}__action-refresh`,blockContent:`${w}__block-content`,blockSectionSettings:`${w}__block-section-settings`,divControlsMain:`${w}__div-controls-main`,label:`${w}__label`,labelAndSlider:`${w}__label-and-slider`,labelAndToggle:`${w}__label-and-toggle`,slider:`${w}__slider`,statusIconContainer:`${w}__status-icon-container`,statusIconWarning:`${w}__status-icon-warning`,switch:`${w}__switch`,switchContainer:`${w}__switch-container`,widgetContainer:`${w}__widget-container`};let c=class extends G{constructor(t,i){super(t,i),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new D,this.visibleElements=new O}initialize(){this.addHandles([b(()=>{var t;return[(t=this.view)==null?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]},()=>{this.autoRefreshAssociations===!0&&(this.showAssociationsEnabled===!0?this.viewModel.showAssociations():this.viewModel.removeAssociations())})])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return e("div",{class:h.widgetContainer},e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return V({action:()=>A(()=>import("./calcite-action-DqS7UojZ.js"),__vite__mapDeps([42,43,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,19,31,18,20,25,32,26,44]),import.meta.url),block:()=>A(()=>import("./calcite-block-MHbn6ZJN.js"),__vite__mapDeps([45,1,2,3,4,5,6,7,8,9,10,11,12,13,46,20,14,17,31,18,32,47,19,21,43,25,26,44,48,49,50,15,16,51,52,53,54]),import.meta.url),"block-section":()=>A(()=>import("./calcite-block-section-OEvs1lC0.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,8,9,10,11,12,13,14,18,31,20,32,19,26,41,29,17,30,25]),import.meta.url),icon:()=>A(()=>import("./calcite-icon-CocWVhPd.js"),__vite__mapDeps([56,26,1,2,3,4,5,6,7,8,9,10,11,12,13,14,20]),import.meta.url),label:()=>A(()=>import("./calcite-label-CI84R5fD.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,8,9,10,11,12,13,30,14,25]),import.meta.url),notice:()=>A(()=>import("./calcite-notice-DAIcfVw0.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,8,9,10,11,12,13,46,20,14,19,31,18,32,21,25,26]),import.meta.url),panel:()=>A(()=>import("./calcite-panel-CuNJxdVc.js"),__vite__mapDeps([58,59,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,19,20,48,49,18,43,31,25,32,26,44,50,15,16,51,21,47,52,54]),import.meta.url),slider:()=>A(()=>import("./calcite-slider-DLeNc_DB.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,8,9,10,11,12,13,14,29,17,18,30,25,19,31,20,61]),import.meta.url),switch:()=>A(()=>import("./calcite-switch-BZCweZXi.js"),__vite__mapDeps([40,41,1,2,3,4,5,6,7,8,9,10,11,12,13,14,29,17,18,30,25,19]),import.meta.url),tooltip:()=>A(()=>import("./calcite-tooltip-HeRO_zdX.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,21,52]),import.meta.url)})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.target.checked}_getLoadErrorMessagesAsNotices(t,i){return e("calcite-notice",{closable:!1,key:`error-notice-${i}`,kind:"warning",open:!0,scale:"s"},e("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.target.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:i}}=this;i!=="ready"&&i!=="warning"||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(R,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:i}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return e("div",{class:h.labelAndToggle,key:"connectivityAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderContent(){const{viewModel:{loadErrors:t,state:i}}=this;return i==="disabled"?e("div",{class:h.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):e("calcite-panel",{disabled:i==="loading"},e("div",{class:h.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,i,n){return e("div",{key:t,slot:"control"},e("calcite-action",{id:i,loading:!0,text:n}),e("calcite-tooltip",{referenceElement:i},e("span",null,n)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:i}}=this;if(i)return e("div",{class:h.labelAndSlider},e("calcite-label",{class:h.label},t),e("calcite-slider",{bind:this,class:h.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:i},viewModel:{state:n}}=this,a=`${this.id}-refresh-action`;if(n!=="disabled")return e("div",{class:h.actionRefresh,slot:"control"},e("calcite-action",{bind:this,class:h.action,icon:"refresh-f",id:a,loading:n==="loading",onclick:this._refreshAssociations,text:t}),e("calcite-tooltip",{referenceElement:a},e("span",null,n==="loading"?i:t)))}_renderSettingsPane(){const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:i,connectivityAssociationsSettings:n,structuralAttachmentAssociationsSettings:a}}=this;if(i||n||a)return e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderMaxAllowableAssociationsSlider(),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:i},viewModel:{state:n}}=this,a=`${this.id}-show-associations-switch`;if(n!=="disabled")return n==="loading"?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,i):e("div",{class:h.switchContainer,key:"switchDiv",slot:"control"},e("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:h.switch,id:a,onCalciteSwitchChange:this._showAssociationsSwitchChange}),e("calcite-tooltip",{referenceElement:a},e("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:i,state:n}}=this;switch(n){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,i);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(R,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:i}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return e("div",{class:h.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_showAssociationsSwitchChange(t){const{viewModel:i}=this;this.showAssociationsEnabled=t.target.checked,this._associationsOptionsEnabled=t.target.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.target.checked}_renderWarningIcon(t,i,n){return n?e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}),e("calcite-tooltip",{referenceElement:i},e("span",null,n))):e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}))}};s([o()],c.prototype,"autoRefreshAssociations",null),s([o()],c.prototype,"connectivityAssociationsLineSymbol",null),s([o()],c.prototype,"icon",null),s([o()],c.prototype,"includeConnectivityAssociations",null),s([o()],c.prototype,"includeStructuralAttachmentAssociations",null),s([o()],c.prototype,"label",null),s([o()],c.prototype,"maxAllowableAssociations",null),s([o()],c.prototype,"maxAllowableAssociationsSliderMax",null),s([o()],c.prototype,"maxAllowableAssociationsSliderMin",null),s([o()],c.prototype,"maxAllowableAssociationsSliderStep",null),s([o(),f("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],c.prototype,"messages",void 0),s([o(),f("esri/t9n/common")],c.prototype,"messagesCommon",void 0),s([o()],c.prototype,"showArrowsConnectivity",null),s([o()],c.prototype,"showArrowsStructuralAttachment",null),s([o()],c.prototype,"showAssociationsEnabled",null),s([o()],c.prototype,"structuralAttachmentAssociationsLineSymbol",null),s([o()],c.prototype,"utilityNetwork",null),s([o()],c.prototype,"view",null),s([o({type:D})],c.prototype,"viewModel",void 0),s([o({type:O,nonNullable:!0})],c.prototype,"visibleElements",void 0),c=s([L("esri.widgets.UtilityNetworkAssociations")],c);const jt=c;export{jt as default};
