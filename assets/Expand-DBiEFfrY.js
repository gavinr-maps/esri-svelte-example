const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-button-D_QRw8fR.js","./button-CT5wDIjk.js","./jsxFactory-CbAu6VfF.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./intl-Dpfm8vPB.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./assets-C2mb-ea2.js","./index-CeCSsEgo.js","./index-CjOb8WjV.css","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./uuid-fwrPAdZb.js","./form-DcBTx4ZC.js","./dom-Cv0oa6So.js","./interactive-Dtpmn6Ls.js","./label-rdYpV4K5.js","./component-ByvC-PUv.js","./loadable-CTFTnu2T.js","./locale-BUTTOPma.js","./key-D5DPfjW0.js","./observers-EizV_Lvc.js","./t9n-DfK3dFGw.js","./icon-DIKjN-ev.js","./loader-wfvKSvDR.js","./calcite-icon-CocWVhPd.js","./calcite-panel-CuNJxdVc.js","./panel-B3delCVt.js","./action-menu-CBohuqGX.js","./array-DofFqflK.js","./action-DJPgY7YC.js","./popover-Cj0_nbSv.js","./floating-ui-BiOoil4s.js","./debounce-C5YDvsuO.js","./focusTrapComponent-C9GPb5g8.js","./openCloseComponent-v_dlVp47.js","./Heading-Dn_ijr3J.js","./FloatingArrow-HmzV7w9c.js","./scrim-tJUFlVOZ.js","./calcite-popover-DJJrGp-P.js","./calcite-sheet-BN8d4qT4.js"])))=>i.map(i=>d[i]);
import{_ as h}from"./index-CeCSsEgo.js";import{e as n}from"./Evented-CXIxDjmW.js";import{y as i,b as y}from"./subclass-BR3PhgZG.js";import{e as u,B as E,r as b,n as a}from"./jsxFactory-CbAu6VfF.js";import{S as f}from"./Accessor-D6mNnsWy.js";import{v as T,p as v,U as M}from"./reactiveUtils-BFQ0BtrB.js";import{e as g}from"./globalCss-CZa70j6i.js";import{e as _,t as $}from"./widget-AQdZwE2X.js";import"./intl-Dpfm8vPB.js";import"./Promise-CZrWwByK.js";import"./jsonMap-DCC6W5ex.js";import"./assets-C2mb-ea2.js";import"./uuid-fwrPAdZb.js";import"./shared-B3wH2qpO.js";let c=class extends f{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(T(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var s;const t=!!e;this._set("expanded",t);const o=(s=this.view)==null?void 0:s.ui;o&&o.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&v(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?v(()=>{var t;return(t=this.view)==null?void 0:t.stationary},()=>{var t;return(t=this._viewpointHandle)==null?void 0:t.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:t,view:o}=this;if(!o||!t)return;const s=M(()=>o.type==="3d"?o.camera:o.viewpoint,()=>this._collapse());this.addHandles(s,e),this._viewpointHandle=s}_collapse(){this.expanded=!1}};n([i({value:!1})],c.prototype,"autoCollapse",null),n([i({value:!1})],c.prototype,"expanded",null),n([i()],c.prototype,"group",void 0),n([i({readOnly:!0})],c.prototype,"state",null),n([i({value:null})],c.prototype,"view",null),c=n([y("esri.widgets.Expand.ExpandViewModel")],c);const x=c,p="esri-expand",r={base:p,toggle:`${p}__toggle`,popoverContent:`${p}__popover-content`,panel:`${p}__panel`,panelContent:`${p}__panel-content`,sheet:`${p}__sheet`,panelIconNumber:`${p}__panel-icon-number`,contentContainer:`${p}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${p}__icon--expanded`,iconNumber:`${p}__icon-number`,content:`${p}__content`,contentExpanded:`${p}__content--expanded`},m="chevrons-left",w="chevrons-right";let l=class extends E{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new x,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=o=>{o.target===this._popoverEl&&(this.viewModel.expanded=o.target.open)},this._handleSheetClose=o=>{this.viewModel.expanded=o.target.open},this._handlePanelClose=o=>{this.viewModel.expanded=!o.target.closed},this._handleKeyDown=o=>{this.viewModel.expanded&&o.key==="Escape"&&!this._willCloseOnEsc(o)&&o.preventDefault()},this._storeToggleButtonEl=o=>{this._toggleButtonEl=o},this._storePopoverEl=o=>{this._popoverEl=o}}loadDependencies(){return b({button:()=>h(()=>import("./calcite-button-D_QRw8fR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),icon:()=>h(()=>import("./calcite-icon-CocWVhPd.js"),__vite__mapDeps([27,25,2,3,4,5,6,7,8,9,10,11,12,13,14,16,23]),import.meta.url),panel:()=>h(()=>import("./calcite-panel-CuNJxdVc.js"),__vite__mapDeps([28,29,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17,20,23,30,31,22,32,21,19,24,25,26,33,34,35,36,37,38,39,40]),import.meta.url),popover:()=>h(()=>import("./calcite-popover-DJJrGp-P.js"),__vite__mapDeps([41,33,2,3,4,5,6,7,8,9,10,11,12,13,14,34,16,35,36,37,38,21,22,23,24,20,39,19,32,17,25,26]),import.meta.url),sheet:()=>h(()=>import("./calcite-sheet-BN8d4qT4.js"),__vite__mapDeps([42,2,3,4,5,6,7,8,9,10,11,12,13,14,16,36,20,23,37,26,21,22,40,24]),import.meta.url)})}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:o,expandTooltip:s}=this;return(e?o||(t==null?void 0:t.collapse):s||(t==null?void 0:t.expand))??""}get _displaySheet(){var e;switch(this.mode){case"drawer":return!0;case"auto":return((e=this.viewModel.view)==null?void 0:e.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return w}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return _(this.content)?this.content.icon:m}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){var e;return(_(this.content)?this.content.label:null)??((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleButtonEl:t,viewModel:{expanded:o},label:s,placement:d}=this;return a("div",{class:this.classes(r.base,g.widget)},this._renderToggle(),e?a("calcite-sheet",{class:r.sheet,heightScale:"l",label:s,onkeydown:this._handleKeyDown,open:o,position:"block-end",onCalciteSheetClose:this._handleSheetClose},a("calcite-panel",{class:r.panel,closable:!0,closed:!o,heading:s,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},a("div",{class:r.panelContent},this._renderContent()))):t?a("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:s,onkeydown:this._handleKeyDown,open:o,overlayPositioning:"fixed",placement:d??this._getPlacement(),referenceElement:t,onCalcitePopoverClose:this._handlePopoverClose},a("div",{class:r.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:t}=this,o=e&&t?t.ui.getPosition(e):null;if(!o||o==="manual")return"auto";const[s,d]=o.split("-");return`${d==="right"?"left":"right"}-${s==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:t}=this;return typeof t=="function"?t(e):t}_renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?a("span",{class:r.iconNumber,key:"expand__icon-number"},t):null}_renderToggleButton(){const{expanded:e,expandTitle:t,expandIcon:o,collapseIcon:s}=this,d=e?s:o,C=d===m||d===w;return a("calcite-button",{afterCreate:this._storeToggleButtonEl,afterUpdate:this._storeToggleButtonEl,class:g.widgetButton,kind:"neutral",label:t,onclick:this.toggle,scale:"s",title:t},d?a("calcite-icon",{class:this.classes(r.icon,C&&r.iconFlip),icon:d,scale:"s"}):null)}_renderToggle(){return a("div",{class:r.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?a("div",{class:r.contentContainer,innerHTML:e,key:"content__string"}):_(e)?a("div",{class:r.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?a("div",{afterCreate:this._attachToNode,bind:e,class:r.contentContainer,key:"content__html-element"}):$(e)?a("div",{afterCreate:this._attachToNode,bind:e.domNode,class:r.contentContainer,key:"content__node"}):null}_attachToNode(e){const t=this;e.appendChild(t)}};n([i({readOnly:!0})],l.prototype,"expandTitle",null),n([i()],l.prototype,"_toggleButtonEl",void 0),n([i()],l.prototype,"_displaySheet",null),n([i()],l.prototype,"autoCollapse",null),n([i()],l.prototype,"closeOnEsc",void 0),n([i()],l.prototype,"collapseIcon",null),n([i()],l.prototype,"collapseTooltip",void 0),n([i()],l.prototype,"content",void 0),n([i()],l.prototype,"expanded",null),n([i()],l.prototype,"expandIcon",null),n([i()],l.prototype,"expandTooltip",void 0),n([i()],l.prototype,"group",null),n([i()],l.prototype,"icon",null),n([i()],l.prototype,"iconNumber",void 0),n([i()],l.prototype,"label",null),n([i(),u("esri/widgets/Expand/t9n/Expand")],l.prototype,"messages",void 0),n([i(),u("esri/t9n/common")],l.prototype,"messagesCommon",void 0),n([i()],l.prototype,"mode",void 0),n([i()],l.prototype,"placement",void 0),n([i()],l.prototype,"view",null),n([i({type:x})],l.prototype,"viewModel",void 0),l=n([y("esri.widgets.Expand")],l);const U=l;export{U as default};
