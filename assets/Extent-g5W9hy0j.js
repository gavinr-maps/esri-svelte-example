import{d as U,r as f,m as y,a as V}from"./Accessor-BmwT4B0c.js";import{b as X,g as E,j as Y,ah as k,E as q,k as A,c as ee,L as J}from"./Point-Cz2JYYmX.js";const T=[0,0];function F(e,t){return t!=null&&p(e,t.x,t.y,t.z)}function pe(e,t){var i;if(!((i=t.points)!=null&&i.length))return!1;for(const s of t.points)if(!I(e,s))return!1;return!0}function te(e,t){const{xmin:i,ymin:s,zmin:n,xmax:r,ymax:a,zmax:h}=t;return e.hasZ&&t.hasZ?p(e,i,s,n)&&p(e,i,a,n)&&p(e,r,a,n)&&p(e,r,s,n)&&p(e,i,s,h)&&p(e,i,a,h)&&p(e,r,a,h)&&p(e,r,s,h):p(e,i,s)&&p(e,i,a)&&p(e,r,a)&&p(e,r,s)}function I(e,t){return p(e,t[0],t[1])}function ie(e,t){return p(e,t[0],t[1],t[2])}function p(e,t,i,s){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function ze(e,t){return T[1]=t.y,T[0]=t.x,ne(e,T)}function ne(e,t){return H(e.rings,t)}function H(e,t){if(!e)return!1;if(se(e))return B(!1,e,t);let i=!1;for(let s=0,n=e.length;s<n;s++)i=B(i,e[s],t);return i}function se(e){return!Array.isArray(e[0][0])}function B(e,t,i){const[s,n]=i;let r=e,a=0;for(let h=0,m=t.length;h<m;h++){a++,a===m&&(a=0);const[x,o]=t[h],[c,d]=t[a];(o<n&&d>=n||d<n&&o>=n)&&x+(n-o)/(d-o)*(c-x)<s&&(r=!r)}return r}function re(e,t){return F(e,t)}function ae(e,t){const i=e.hasZ&&t.hasZ;let s,n,r;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(r=t.zmin,e.zmax<r)return!1}else if(r=e.zmin,t.zmax<r)return!1}return!0}function me(e,t){const{points:i,hasZ:s}=t,n=s?ie:I;for(const r of i)if(n(e,r))return!0;return!1}const Z=[0,0],$=[0,0],j=[0,0],N=[0,0],he=[Z,$,j,N],K=[[j,Z],[Z,$],[$,N],[N,j]];function oe(e,t){return xe(e,t.rings)}function xe(e,t){Z[0]=e.xmin,Z[1]=e.ymax,$[0]=e.xmax,$[1]=e.ymax,j[0]=e.xmin,j[1]=e.ymin,N[0]=e.xmax,N[1]=e.ymin;for(const i of he)if(H(t,i))return!0;for(const i of t){if(!i.length)continue;let s=i[0];if(I(e,s))return!0;for(let n=1;n<i.length;n++){const r=i[n];if(I(e,r)||Q(s,r,K))return!0;s=r}}return!1}function le(e,t){Z[0]=e.xmin,Z[1]=e.ymax,$[0]=e.xmax,$[1]=e.ymax,j[0]=e.xmin,j[1]=e.ymin,N[0]=e.xmax,N[1]=e.ymin;const i=t.paths;for(const s of i){if(!i.length)continue;let n=s[0];if(I(e,n))return!0;for(let r=1;r<s.length;r++){const a=s[r];if(I(e,a)||Q(n,a,K))return!0;n=a}}return!1}const u=[0,0];function de(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const r=i[n],a=i[n+1];for(let h=t+1;h<e.length;h++)for(let m=0;m<e[h].length-1;m++){const x=e[h][m],o=e[h][m+1];if(L(r,a,x,o,u)&&!(u[0]===r[0]&&u[1]===r[1]||u[0]===x[0]&&u[1]===x[1]||u[0]===a[0]&&u[1]===a[1]||u[0]===o[0]&&u[1]===o[1]))return!0}}const s=i.length;if(!(s<=4))for(let n=0;n<s-3;n++){let r=s-1;n===0&&(r=s-2);const a=i[n],h=i[n+1];for(let m=n+2;m<r;m++){const x=i[m],o=i[m+1];if(L(a,h,x,o,u)&&!(u[0]===a[0]&&u[1]===a[1]||u[0]===x[0]&&u[1]===x[1]||u[0]===h[0]&&u[1]===h[1]||u[0]===o[0]&&u[1]===o[1]))return!0}}}return!1}function Q(e,t,i){for(let s=0;s<i.length;s++)if(L(e,t,i[s][0],i[s][1]))return!0;return!1}function L(e,t,i,s,n){const[r,a]=e,[h,m]=t,[x,o]=i,[c,d]=s,M=c-x,g=r-x,w=h-r,b=d-o,O=a-o,_=m-a,P=b*w-M*_;if(P===0)return!1;const R=(M*O-b*g)/P,G=(w*O-_*g)/P;return R>=0&&R<=1&&G>=0&&G<=1&&(n&&(n[0]=r+R*(h-r),n[1]=a+R*(m-a)),!0)}function ue(e){switch(e){case"esriGeometryEnvelope":case"extent":return ae;case"esriGeometryMultipoint":case"multipoint":return me;case"esriGeometryPoint":case"point":return re;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return oe;case"esriGeometryPolyline":case"polyline":return le}}var z;function fe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function v(e,t,i){return t==null?i:i==null?t:e(t,i)}let l=z=class extends X{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,s,n){return fe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?E.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:s,spatialReference:n??E.WGS84}}static fromPoint(e){return new z({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Y({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new z;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&k(t,i)&&(e=t.isWebMercator?q(e):A(e,!0)),e.type==="point"?F(this,e):e.type==="extent"&&te(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&k(t,i)&&(e=t.isWebMercator?q(e):A(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,s=this.height*t;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!ee(t,i)&&k(t,i)&&(e=t.isWebMercator?q(e):A(e,!0)),ue(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=v(Math.min,this.zmin,e.zmin),this.zmax=v(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=v(Math.min,this.mmin,e.mmin),this.mmax=v(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=v(Math.max,this.zmin,e.zmin),this.zmax=v(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=v(Math.max,this.mmin,e.mmin),this.mmax=v(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=J(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?A(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=D(s.x,e).x),this.spatialReference=new E(U((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,s]=e.valid,n=this.xmin,r=this.xmax;return n>=i&&n<=s&&r>=i&&r<=s||(t=this.center),t}_normalize(e,t,i){const s=this.spatialReference;if(!s)return this;const n=i??J(s);if(n==null)return this;const r=this._getParts(n).map(m=>m.extent);if(r.length<2)return r[0]||this;if(r.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return r;let a=!0,h=!0;return r.forEach(m=>{m.hasZ||(a=!1),m.hasM||(h=!1)}),{rings:r.map(m=>{const x=[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]];if(a){const o=(m.zmax-m.zmin)/2;for(let c=0;c<x.length;c++)x[c].push(o)}if(h){const o=(m.mmax-m.mmin)/2;for(let c=0;c<x.length;c++)x[c].push(o)}return x}),hasZ:a,hasM:h,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:r,spatialReference:a}=this,h=this.width,m=this.xmin,x=this.xmax;let o;e=e||J(a);const[c,d]=e.valid;o=D(this.xmin,e);const M=o.x,g=o.frameId;o=D(this.xmax,e);const w=o.x,b=o.frameId,O=M===w&&h>0;if(h>2*d){const _=new z(m<x?M:w,n,d,r,a),P=new z(c,n,m<x?w:M,r,a),R=new z(0,n,d,r,a),G=new z(c,n,0,r,a),C=[],S=[];_.contains(R)&&C.push(g),_.contains(G)&&S.push(g),P.contains(R)&&C.push(b),P.contains(G)&&S.push(b);for(let W=g+1;W<b;W++)C.push(W),S.push(W);t.push({extent:_,frameIds:[g]},{extent:P,frameIds:[b]},{extent:R,frameIds:C},{extent:G,frameIds:S})}else M>w||O?t.push({extent:new z(M,n,d,r,a),frameIds:[g]},{extent:new z(c,n,w,r,a),frameIds:[b]}):t.push({extent:new z(M,n,w,r,a),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,s=this.hasM;if(i||s){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),s&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let r=0;r<t.length;r++)t[r].extent.set(n)}return t}};function D(e,t){const[i,s]=t.valid,n=2*s;let r,a=0;return e>s?(r=Math.ceil(Math.abs(e-s)/n),e-=r*n,a=r):e<i&&(r=Math.ceil(Math.abs(e-i)/n),e+=r*n,a=-r),{x:e,frameId:a}}f([y({readOnly:!0})],l.prototype,"cache",null),f([y({readOnly:!0})],l.prototype,"center",null),f([y({readOnly:!0})],l.prototype,"extent",null),f([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],l.prototype,"hasM",null),f([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],l.prototype,"hasZ",null),f([y({readOnly:!0})],l.prototype,"height",null),f([y({readOnly:!0})],l.prototype,"width",null),f([y({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],l.prototype,"xmin",void 0),f([y({type:Number,json:{write:!0}})],l.prototype,"ymin",void 0),f([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],l.prototype,"mmin",void 0),f([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],l.prototype,"zmin",void 0),f([y({type:Number,json:{write:!0}})],l.prototype,"xmax",void 0),f([y({type:Number,json:{write:!0}})],l.prototype,"ymax",void 0),f([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],l.prototype,"mmax",void 0),f([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],l.prototype,"zmax",void 0),l=z=f([V("esri.geometry.Extent")],l),l.prototype.toJSON.isDefaultToJSON=!0;const Me=l;export{L as G,ue as P,H as a,p as b,ie as e,ze as f,I as i,ae as o,de as p,pe as r,F as t,Me as w,oe as x};
