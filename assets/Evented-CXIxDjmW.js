import{S as d}from"./Accessor-D6mNnsWy.js";import{E as _,k as E,b as m}from"./subclass-BR3PhgZG.js";function p(u,i,n,s){var e,r=arguments.length,t=r<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(u,i,n,s);else for(var o=u.length-1;o>=0;o--)(e=u[o])&&(t=(r<3?e(t):r>3?e(i,n,t):e(i,n))||t);return r>3&&t&&Object.defineProperty(i,n,t),t}function y(u,i){return function(n,s){i(n,s,u)}}function M(u,i,n,s){function e(r){return r instanceof n?r:new n(function(t){t(r)})}return new(n||(n=Promise))(function(r,t){function o(c){try{a(s.next(c))}catch(h){t(h)}}function l(c){try{a(s.throw(c))}catch(h){t(h)}}function a(c){c.done?r(c.value):e(c.value).then(o,l)}a((s=s.apply(u,[])).next())})}class f{constructor(){this._emitter=new f.EventEmitter(this)}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}}(function(u){class i{constructor(e=null){this._target=e,this._listenersMap=null}clear(){var e;(e=this._listenersMap)==null||e.clear(),this._listenersMap=null}destroy(){this.clear()}emit(e,r){var a;let t=(a=this._listenersMap)==null?void 0:a.get(e);if(!t)return!1;const o=this._target||this;let l=!1;for(const c of t.slice()){const h="deref"in c?c.deref():c;h?h==null||h.call(o,r):l=!0}return l&&(t=t.filter(c=>!("deref"in c)||c.deref()!=null),this._listenersMap.set(e,t)),t.length>0}on(e,r){if(Array.isArray(e)){const o=e.map(l=>this.on(l,r));return _(o)}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const t=this._listenersMap.get(e)||[];return t.push(r),this._listenersMap.set(e,t),E(()=>{var a;const o=(a=this._listenersMap)==null?void 0:a.get(e),l=(o==null?void 0:o.indexOf(r))??-1;l>=0&&o.splice(l,1)})}once(e,r){const t=this.on(e,o=>{t.remove();const l="deref"in r?r.deref():r;l==null||l.call(null,o)});return t}hasEventListener(e){var t;const r=(t=this._listenersMap)==null?void 0:t.get(e);return r!=null&&r.length>0}}u.EventEmitter=i,u.EventedMixin=s=>{let e=class extends s{constructor(){super(...arguments),this._emitter=new i}destroy(){this._emitter.clear()}emit(r,t){return this._emitter.emit(r,t)}on(r,t){return this._emitter.on(r,t)}once(r,t){return this._emitter.once(r,t)}hasEventListener(r){return this._emitter.hasEventListener(r)}};return e=p([m("esri.core.Evented")],e),e};let n=class extends d{constructor(){super(...arguments),this._emitter=new f.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,e){return this._emitter.emit(s,e)}on(s,e){return this._emitter.on(s,e)}once(s,e){return this._emitter.once(s,e)}hasEventListener(s){return this._emitter.hasEventListener(s)}};n=p([m("esri.core.Evented.EventedAccessor")],n),u.EventedAccessor=n})(f||(f={}));const w=f;export{p as e,M as n,w as o,y as t};
