import{S as I}from"./subclass-BZA_h8Db.js";import{l as nt,b as it}from"./mathUtils-C4_ghTv4.js";import{p as rt}from"./mat4-GpOFENPA.js";import{s as j,c as g,P as _,u as d,g as $,_ as S,A as q,R as ot,o as p,r as M,p as U,E as et,j as st,v as ct,I as ut,q as at}from"./vec32-Dvg_eL9J.js";import{t as L,n as h}from"./vec3f64-BLpZdpfb.js";import{L as V,a as C}from"./vec42-YcqnINSP.js";import{n as X,r as Y}from"./vec4f64-o2zAXfmz.js";import{e as ft}from"./common-DQOJ18NT.js";import{n as b}from"./Polyline-D9YkgmM_.js";import{T as ht}from"./Accessor-BLX9ikPh.js";import{r as mt,s as gt}from"./mat3-BRl2i9Bz.js";import{e as lt}from"./mat3f64-BBpwCtoL.js";import{c as f,a as $t,b as dt}from"./plane-IENfwZlB.js";class Mt{constructor(i){this._allocator=i,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&ht(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const i=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*z);this._items.length=Math.min(i,this._items.length),this._itemsPtr=0}_grow(){for(let i=0;i<Math.max(8,Math.min(this._items.length,z));i++)this._items.push(this._allocator())}}const z=1024;function x(t){return t?Z(L(t.origin),L(t.direction)):Z(h(),h())}function Z(t,i){return{origin:t,direction:i}}function en(t,i){return I(t.origin,i.origin)&&I(t.direction,i.direction)}function sn(t,i){const n=bt.get();return n.origin=t,n.direction=i,n}function cn(t,i=x()){return pt(t.origin,t.direction,i)}function _t(t,i,n=x()){return j(n.origin,t),g(n.direction,i,t),n}function pt(t,i,n=x()){return j(n.origin,t),j(n.direction,i),n}function un(t,i){const n=S(f.get(),q(f.get(),t.direction),g(f.get(),i,t.origin));return _(n,n)}function Pt(t,i,n){const r=_(t.direction,g(n,i,t.origin));return d(n,t.origin,$(n,t.direction,r)),n}function an(t,i,n,r){const o=t.origin,e=i.origin,s=t.direction,c=i.direction,u=_(q(R,s),q(B,c));if(Math.abs(u)>=1)return null;const a=S(R,s,c),m=ot(y,e,o),v=mt(F,s[0],s[1],s[2],-c[0],-c[1],-c[2],a[0],a[1],a[2]),l=gt(F,v);if(l==null)return[n,r];const W=_(p(R,l[0],l[3],l[6]),m),tt=_(p(B,l[1],l[4],l[7]),m);return d(n,o,$(y,s,W)),d(r,e,$(y,c,tt)),[n,r]}const bt=new Mt(()=>x()),y=h(),R=h(),B=h(),F=lt();function N(t,i){const n=M(t),r=nt(t[2]/n),o=Math.atan2(t[1]/n,t[0]/n);return p(i,n,r,o),i}const St=T();function T(){return X()}const qt=V,wt=V;function D(t,i){return C(i,t)}function xt(t,i){return Y(t[0],t[1],t[2],i)}function At(t){return t}function vt(t){t[0]=t[1]=t[2]=t[3]=0}function yt(t,i){return t[0]=t[1]=t[2]=0,t[3]=i,t}function P(t){return t[3]}function Rt(t){return t}function Et(t,i,n,r){return Y(t,i,n,r)}function jt(t,i,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+i,n}function Ct(t,i,n){return t!==n&&D(t,n),n}function Ot(t,i){return i}function A(t,i,n){if(i==null||!G(t,i,w))return!1;let{t0:r,t1:o}=w;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(n){const{origin:e,direction:s}=i;n[0]=e[0]+s[0]*r,n[1]=e[1]+s[1]*r,n[2]=e[2]+s[2]*r}return!0}function Tt(t,i,n){const r=_t(i,n);if(!G(t,r,w))return[];const{origin:o,direction:e}=r,{t0:s,t1:c}=w,u=a=>{const m=h();return at(m,o,e,a),k(t,m,m)};return Math.abs(s-c)<ft()?[u(s)]:[u(s),u(c)]}const w={t0:0,t1:0};function G(t,i,n){const{origin:r,direction:o}=i,e=kt;e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(s===0)return!1;const c=2*(o[0]*e[0]+o[1]*e[1]+o[2]*e[2]),u=c*c-4*s*(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return n.t0=(-c-a)/(2*s),n.t1=(-c+a)/(2*s),!0}const kt=h();function It(t,i){return A(t,i,null)}function Lt(t,i,n){if(A(t,i,n))return n;const r=H(t,i,f.get());return d(n,i.origin,$(f.get(),i.direction,U(i.origin,r)/M(i.direction))),n}function H(t,i,n){const r=f.get(),o=$t.get();S(r,i.origin,i.direction);const e=P(t);S(n,r,i.origin),$(n,n,1/M(n)*e);const s=J(t,i.origin),c=dt(i.origin,n);return rt(o,c+s,r),et(n,n,o),n}function zt(t,i,n,r){const o=P(t),e=o*o,s=i+.5*Math.PI,c=n*n+e-2*Math.cos(s)*n*o,u=Math.sqrt(c),a=c-e;if(a<=0)return .5;const m=Math.sqrt(a),v=Math.acos(m/u)-Math.asin(o/(u/Math.sin(s)));return Math.min(1,(v+.5*r)/r)}function Zt(t,i,n){return A(t,i,n)?n:(Pt(i,t,n),k(t,n,n))}function k(t,i,n){const r=g(f.get(),i,t),o=$(f.get(),r,t[3]/M(r));return d(n,o,t)}function Bt(t,i){const n=g(f.get(),i,t),r=st(n),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))}function J(t,i){const n=g(f.get(),i,t),r=M(n),o=P(t),e=o+Math.abs(o-r);return it(o/e)}const E=h();function K(t,i,n,r){const o=g(E,i,t);switch(n){case b.X:{const e=N(o,E)[2];return p(r,-Math.sin(e),Math.cos(e),0)}case b.Y:{const e=N(o,E),s=e[1],c=e[2],u=Math.sin(s);return p(r,-u*Math.cos(c),-u*Math.sin(c),Math.cos(s))}case b.Z:return q(r,o);default:return}}function Q(t,i){const n=g(O,i,t);return M(n)-t[3]}function Ft(t,i,n,r){const o=Q(t,i),e=K(t,i,b.Z,O),s=$(O,e,n-o);return d(r,i,s)}function Nt(t,i){const n=ct(t,i),r=P(t);return n<=r*r}function Ut(t,i,n=X()){const r=U(t,i),o=t[3],e=i[3];return r+e<o?(C(n,t),n):r+o<e?(C(n,i),n):(ut(n,t,i,(r+e-o)/(2*r)),n[3]=(r+o+e)/2,n)}const O=h(),Vt=T(),fn=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:St,altitudeAt:Q,angleToSilhouette:J,axisAt:K,cameraFrustumCoverage:zt,clear:vt,closestPoint:Zt,closestPointOnSilhouette:H,containsPoint:Nt,copy:D,create:T,distanceToSilhouette:Bt,elevate:jt,equals:wt,exactEquals:qt,fromCenterAndRadius:xt,fromRadius:yt,fromValues:Et,getCenter:Rt,getExtent:Ot,getRadius:P,intersectLine:Tt,intersectRay:A,intersectRayClosestSilhouette:Lt,intersectsRay:It,projectPoint:k,setAltitudeAt:Ft,setExtent:Ct,tmpSphere:Vt,union:Ut,wrap:At},Symbol.toStringTag,{value:"Module"}));export{k as $,St as C,T as E,A as F,It as H,Tt as I,H as K,yt as L,an as M,P as N,xt as O,zt as Q,_t as S,At as T,Rt as U,Et as V,qt as _,D as a,x as b,Ut as c,fn as f,Nt as i,sn as k,pt as q,Mt as s,Bt as t,Vt as u,cn as v,un as w,en as x};
