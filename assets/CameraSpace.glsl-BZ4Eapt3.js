import{o as n}from"./vec2-maR1OrZI.js";import{n as a}from"./vec2f64-Dy6m9Nrb.js";import{s as r}from"./vec42-YcqnINSP.js";import{n as i}from"./vec4f64-o2zAXfmz.js";import{o as c,a as m}from"./FloatArray-BCfeX8wo.js";import{n as p}from"./glsl-BH37Aalp.js";function $(t){t.fragment.uniforms.add(new c("projInfo",o=>d(o.camera))),t.fragment.uniforms.add(new m("zScale",o=>l(o.camera))),t.fragment.code.add(p`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}function d(t){const o=t.projectionMatrix;return o[11]===0?r(e,2/(t.fullWidth*o[0]),2/(t.fullHeight*o[5]),(1+o[12])/o[0],(1+o[13])/o[5]):r(e,-2/(t.fullWidth*o[0]),-2/(t.fullHeight*o[5]),(1-o[8])/o[0],(1-o[9])/o[5])}const e=i();function l(t){return t.projectionMatrix[11]===0?n(f,0,1):n(f,1,0)}const f=a();export{$ as f};
