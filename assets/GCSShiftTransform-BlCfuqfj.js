import{r as a,m as u,a as g}from"./Accessor-BHnuXKD2.js";import{r as P}from"./enumeration-Cr5WIZs4.js";import{o as S,r as R}from"./writer-B2bQV2uU.js";import{w as j}from"./Extent-CBBGeHb-.js";import{j as X}from"./Point-XGrwlf63.js";import{S as z}from"./JSONSupport-CGdeqxpk.js";let x=class extends z{get affectsPixelSize(){return!1}forwardTransform(e){return e}inverseTransform(e){return e}};a([u()],x.prototype,"affectsPixelSize",null),a([u({json:{write:!0}})],x.prototype,"spatialReference",void 0),x=a([g("esri.layers.support.rasterTransforms.BaseRasterTransform")],x);const Y=x;var C;function v(e,o,i){const{x:t,y:r}=o;if(i<2)return{x:e[0]+t*e[2]+r*e[4],y:e[1]+t*e[3]+r*e[5]};if(i===2){const p=t*t,T=r*r,O=t*r;return{x:e[0]+t*e[2]+r*e[4]+p*e[6]+O*e[8]+T*e[10],y:e[1]+t*e[3]+r*e[5]+p*e[7]+O*e[9]+T*e[11]}}const n=t*t,l=r*r,m=t*r,s=n*t,h=n*r,y=t*l,f=r*l;return{x:e[0]+t*e[2]+r*e[4]+n*e[6]+m*e[8]+l*e[10]+s*e[12]+h*e[14]+y*e[16]+f*e[18],y:e[1]+t*e[3]+r*e[5]+n*e[7]+m*e[9]+l*e[11]+s*e[13]+h*e[15]+y*e[17]+f*e[19]}}function $(e,o,i){const{xmin:t,ymin:r,xmax:n,ymax:l,spatialReference:m}=o;let s=[];if(i<2)s.push({x:t,y:l}),s.push({x:n,y:l}),s.push({x:t,y:r}),s.push({x:n,y:r});else{let f=10;for(let p=0;p<f;p++)s.push({x:t,y:r+(l-r)*p/(f-1)}),s.push({x:n,y:r+(l-r)*p/(f-1)});f=8;for(let p=1;p<=f;p++)s.push({x:t+(n-t)*p/f,y:r}),s.push({x:t+(n-t)*p/f,y:l})}s=s.map(f=>v(e,f,i));const h=s.map(f=>f.x),y=s.map(f=>f.y);return new j({xmin:Math.min.apply(null,h),xmax:Math.max.apply(null,h),ymin:Math.min.apply(null,y),ymax:Math.max.apply(null,y),spatialReference:m})}function F(e){const[o,i,t,r,n,l]=e,m=t*l-n*r,s=n*r-t*l;return[(n*i-o*l)/m,(t*i-o*r)/s,l/m,r/s,-n/m,-t/s]}let c=C=class extends Y{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(e,o){const{coeffX:i,coeffY:t}=o;if(!(i!=null&&i.length)||!(t!=null&&t.length)||i.length!==t.length)return null;const r=[];for(let n=0;n<i.length;n++)r.push(i[n]),r.push(t[n]);return r}writeForwardCoefficients(e,o,i){const t=[],r=[];for(let n=0;n<(e==null?void 0:e.length);n++)n%2==0?t.push(e[n]):r.push(e[n]);o.coeffX=t,o.coeffY=r}get inverseCoefficients(){let e=this._get("inverseCoefficients");const o=this._get("forwardCoefficients");return!e&&o&&this.polynomialOrder<2&&(e=F(o)),e}set inverseCoefficients(e){this._set("inverseCoefficients",e)}readInverseCoefficients(e,o){const{inverseCoeffX:i,inverseCoeffY:t}=o;if(!(i!=null&&i.length)||!(t!=null&&t.length)||i.length!==t.length)return null;const r=[];for(let n=0;n<i.length;n++)r.push(i[n]),r.push(t[n]);return r}writeInverseCoefficients(e,o,i){const t=[],r=[];for(let n=0;n<(e==null?void 0:e.length);n++)n%2==0?t.push(e[n]):r.push(e[n]);o.inverseCoeffX=t,o.inverseCoeffY=r}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(e){if(e.type==="point"){const o=v(this.forwardCoefficients,e,this.polynomialOrder);return new X({x:o.x,y:o.y,spatialReference:e.spatialReference})}return $(this.forwardCoefficients,e,this.polynomialOrder)}inverseTransform(e){if(e.type==="point"){const o=v(this.inverseCoefficients,e,this.polynomialOrder);return new X({x:o.x,y:o.y,spatialReference:e.spatialReference})}return $(this.inverseCoefficients,e,this.polynomialOrder)}clone(){return new C({polynomialOrder:this.polynomialOrder,forwardCoefficients:this.forwardCoefficients?[...this.forwardCoefficients]:null,inverseCoefficients:this.inverseCoefficients?[...this.inverseCoefficients]:null})}};a([u({json:{write:!0}})],c.prototype,"polynomialOrder",void 0),a([u()],c.prototype,"forwardCoefficients",void 0),a([S("forwardCoefficients",["coeffX","coeffY"])],c.prototype,"readForwardCoefficients",null),a([R("forwardCoefficients")],c.prototype,"writeForwardCoefficients",null),a([u({json:{write:!0}})],c.prototype,"inverseCoefficients",null),a([S("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],c.prototype,"readInverseCoefficients",null),a([R("inverseCoefficients")],c.prototype,"writeInverseCoefficients",null),a([u()],c.prototype,"affectsPixelSize",null),a([P({PolynomialXform:"polynomial"})],c.prototype,"type",void 0),c=C=a([g("esri.layers.support.rasterTransforms.PolynomialTransform")],c);const k=c;var w;let d=w=class extends Y{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(e){return(e=e.clone()).type==="point"?(e.x>180+this.tolerance&&(e.x-=360),e):(e.xmin>=180-this.tolerance?(e.xmax-=360,e.xmin-=360):e.xmax>180+this.tolerance&&(e.xmin=-180,e.xmax=180),e)}inverseTransform(e){return(e=e.clone()).type==="point"?(e.x<-this.tolerance&&(e.x+=360),e):(e.xmin<-this.tolerance&&(e.xmin+=360,e.xmax+=360),e)}clone(){return new w({tolerance:this.tolerance})}};a([P({GCSShiftXform:"gcs-shift"})],d.prototype,"type",void 0),a([u()],d.prototype,"tolerance",void 0),d=w=a([g("esri.layers.support.rasterTransforms.GCSShiftTransform")],d);const q=d;export{Y as a,q as c,k as y};
