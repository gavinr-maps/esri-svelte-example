const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-button-BbY9lAf2.js","./button-D5KuIed_.js","./jsxFactory-Be5PKa9i.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./intl-CArXn1et.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./assets-BNizZMOZ.js","./index-BVncS3aY.js","./index-CjOb8WjV.css","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./uuid-fwrPAdZb.js","./form-BOCdnUd9.js","./dom-BkQ_hHOr.js","./interactive-QOqfpSSx.js","./label-1rGx7O4B.js","./component-ByvC-PUv.js","./loadable-Bgtgv1lm.js","./locale-BvYy6Wxh.js","./key-D5DPfjW0.js","./observers-DSkGD1TQ.js","./t9n-Atzq4sOi.js","./icon-D6t4qKDg.js","./loader-ew3V3w9x.js","./calcite-icon-DtUarwQp.js","./calcite-scrim-CYwFbyZL.js","./scrim-fRLdjgt6.js"])))=>i.map(i=>d[i]);
import{_ as h}from"./index-BVncS3aY.js";import{e as a}from"./Evented-CXIxDjmW.js";import{y as s,b as R}from"./subclass-BR3PhgZG.js";import{s as $}from"./jsonMap-DCC6W5ex.js";import{b as v,m as T,U as E,O as k}from"./basemapUtils-fcYt_ePc.js";import{e as L,B as P,r as M,n as r}from"./jsxFactory-Be5PKa9i.js";import{S as I}from"./Accessor-D6mNnsWy.js";import{d as O,P as C,w as V}from"./reactiveUtils-BFQ0BtrB.js";import{_ as j,J as A,W as D}from"./projection-tSh-0UvX.js";import{G as y}from"./Point-TlcsOcXV.js";import{e as B}from"./globalCss-CZa70j6i.js";import"./Basemap-CKBB4cRW.js";import"./assets-BNizZMOZ.js";import"./collectionUtils-Dm1icNvk.js";import"./Portal-DCqdz-K4.js";import"./Promise-CZrWwByK.js";import"./writer-3zufXUNV.js";import"./Extent-B4rrMrqp.js";import"./loadAll-z9YY33Kx.js";import"./PortalItem-CaeKabGc.js";import"./persistableUrlUtils-Dx61-x4K.js";import"./writeUtils-BUKZUL8X.js";import"./layerUtils-BzjQnEdj.js";import"./utils-D20M4_S8.js";import"./colorUtils-CS9vdHXB.js";import"./screenUtils-PfxkaaMN.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-ybYUU6jq.js";import"./mathUtils-ClvKsMak.js";import"./intl-CArXn1et.js";import"./uuid-fwrPAdZb.js";import"./shared-B3wH2qpO.js";import"./Polyline-BQFeqYXi.js";import"./projectBuffer-iyGwL2dv.js";import"./geodesicConstants-kj1AtlGg.js";let l=class extends I{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=v("hybrid",this._basemapCache),this.view=null}initialize(){O(()=>this.nextBasemap,e=>{e&&!e.loaded&&e.load().catch(()=>{})},C)}destroy(){this.view=null,T(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return E(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){var e,i;return v(((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(e){return v(e,this._basemapCache)}get state(){const{view:e}=this;if(!(e!=null&&e.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:i}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&i!=null&&!e.spatialReference.equals(i)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:i,state:u,view:p}=this;if(!p||u==="disabled"||u==="incompatible-next-basemap")return;const c=this._viewSpatialReferenceLocked;if(!c){if(await V(()=>!this._nextBasemapSpatialReferenceTask.updating),i!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:d}=this._nextBasemapSpatialReferenceTask;if(d==null||y(p.spatialReference,d)||j()||A(p.spatialReference,d)||(this._loadingProjectionEngine=!0,await D(),this._loadingProjectionEngine=!1),i!==this.nextBasemap||e!==this.activeBasemap)return}p.map.basemap=i,c||this._nextBasemapSpatialReferenceTask.spatialReference==null||y(p.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(p.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return k(e)}};a([s()],l.prototype,"_loadingProjectionEngine",void 0),a([s({readOnly:!0})],l.prototype,"_nextBasemapSpatialReferenceTask",null),a([s({readOnly:!0})],l.prototype,"_viewSpatialReferenceLocked",null),a([s({readOnly:!0})],l.prototype,"activeBasemap",null),a([s()],l.prototype,"nextBasemap",void 0),a([$("nextBasemap")],l.prototype,"castNextBasemap",null),a([s({readOnly:!0})],l.prototype,"state",null),a([s()],l.prototype,"view",void 0),a([s()],l.prototype,"toggle",null),l=a([R("esri.widgets.BasemapToggle.BasemapToggleViewModel")],l);const S=l,m="esri-basemap-toggle",g="esri-basemap-thumbnail",n={base:m,secondaryBasemapImage:`${m}__image--secondary`,container:`${g} ${m}__container`,image:`${g}__image ${m}__image`,imageLoading:`${m}__image--loading`,overlay:`${g}__overlay ${m}__image-overlay`,title:`${g}__title ${m}__title`,overlayScrim:`${g}__overlay-scrim`};function w(t){const e=k(t);return e?{backgroundImage:"url("+e+")"}:{backgroundImage:""}}const x={title:!1};let o=class extends P{constructor(t,e){super(t,e),this.messages=null,this.viewModel=new S,this.visibleElements={...x},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return M({button:()=>h(()=>import("./calcite-button-BbY9lAf2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),icon:()=>h(()=>import("./calcite-icon-DtUarwQp.js"),__vite__mapDeps([27,25,2,3,4,5,6,7,8,9,10,11,12,13,14,16,23]),import.meta.url),scrim:()=>h(()=>import("./calcite-scrim-CYwFbyZL.js"),__vite__mapDeps([28,29,2,3,4,5,6,7,8,9,10,11,12,13,14,21,16,22,23,24,26]),import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(t){this.viewModel.nextBasemap=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...x,...t}}render(){const t=this.viewModel,e=t.state==="disabled"?null:t.activeBasemap,i=t.state==="disabled"?null:t.nextBasemap,u=t.state==="loading",p=t.state==="incompatible-next-basemap",c=(i==null?void 0:i.title)??"",d=i&&i.loadStatus!=="loaded";let _;const b=this.visibleElements.title&&c,f=p;return(b||f)&&(_=r("div",{class:n.overlay,key:"overlay"},b?r("span",{class:n.title,title:c},c):null,f?r("calcite-scrim",{class:n.overlayScrim,title:this.messages.incompatibleSpatialReference},r("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),r("div",{class:this.classes(n.base,B.widget)},r("calcite-button",{appearance:"transparent","data-basemap-id":i?i.id:"",disabled:p,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},r("div",{class:this.classes(n.container,n.secondaryBasemapImage)},r("div",{class:n.image,styles:w(e)})),r("div",{class:n.container},r("div",{class:this.classes(n.image,d?n.imageLoading:null),styles:w(i)},d||u?r("calcite-scrim",null,r("span",{"aria-hidden":"true",class:B.loaderAnimation,role:"presentation"})):null),_)))}};a([s({readOnly:!0})],o.prototype,"activeBasemap",null),a([s()],o.prototype,"icon",null),a([s()],o.prototype,"label",null),a([s(),L("esri/widgets/BasemapToggle/t9n/BasemapToggle")],o.prototype,"messages",void 0),a([s()],o.prototype,"nextBasemap",null),a([s()],o.prototype,"view",null),a([s({type:S})],o.prototype,"viewModel",void 0),a([s()],o.prototype,"visibleElements",void 0),a([$("visibleElements")],o.prototype,"castVisibleElements",null),o=a([R("esri.widgets.BasemapToggle")],o);const we=o;export{we as default};
