import{O as l,s as m}from"./Accessor-BHnuXKD2.js";import{C as p}from"./Portal-CTRRujjZ.js";import{m as s,n as c}from"./project-BoEABhcm.js";import"./index-tefRSezt.js";import"./cast-BA_-jlhc.js";import"./JSONSupport-CGdeqxpk.js";import"./Promise-CmQqe-ke.js";import"./writer-B2bQV2uU.js";import"./Extent-CBBGeHb-.js";import"./Point-XGrwlf63.js";import"./jsonUtils-Cu7OBRmN.js";import"./Polyline-BmuD2-ZN.js";import"./mathUtils-DV9iOXpW.js";import"./utils-Cy8wFNQo.js";import"./utils-CkSELPnj.js";async function f(r=null,a){var i,o;if(l.geometryServiceUrl)return l.geometryServiceUrl;if(!r)throw new m("internal:geometry-service-url-not-configured");let e;e="portal"in r?r.portal||p.getDefault():r,await e.load({signal:a});const t=(o=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:o.url;if(!t)throw new m("internal:geometry-service-url-not-configured");return t}async function x(r,a,e=null,t){const i=await f(e,t),o=new s({geometries:[r],outSpatialReference:a}),n=await c(i,o,{signal:t});if(n&&Array.isArray(n)&&n.length===1)return n[0];throw new m("internal:geometry-service-projection-failed")}export{f as getGeometryServiceURL,x as projectGeometry};
