import{B as u,s as c}from"./Accessor-BmwT4B0c.js";import{B as p,H as l,D as d,C as f}from"./quantizationUtils-DgFbqZi7.js";import"./Extent-g5W9hy0j.js";import"./Point-Cz2JYYmX.js";import"./cast-CsZslgGN.js";import"./index-4eY77cms.js";import"./JSONSupport-DcrLLGjL.js";import"./writer-DKgfqj4X.js";import"./Polyline-s-JzsQqo.js";import"./mathUtils-Cfq9PL9W.js";function L(o,r,e,n,t){if(o==null)return null;const a=o.references("geometry")&&t?g(r,n,t):r,s=o.repurposeFeature(a);try{return o.evaluate({...e,$feature:s},o.services)}catch(m){return u.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",m),null}}const i=new Map;function g(o,r,e){const{transform:n,hasZ:t,hasM:a}=e;i.has(r)||i.set(r,y(r));const s=i.get(r)(o.geometry,n,t,a);return{...o,geometry:s}}function y(o){const r={};switch(o){case"esriGeometryPoint":return(e,n,t,a)=>f(n,r,e,t,a);case"esriGeometryPolygon":return(e,n,t,a)=>d(n,r,e,t,a);case"esriGeometryPolyline":return(e,n,t,a)=>l(n,r,e,t,a);case"esriGeometryMultipoint":return(e,n,t,a)=>p(n,r,e,t,a);default:return u.getLogger("esri.views.2d.support.arcadeOnDemand").error(new c("mapview-arcade",`Unable to handle geometryType: ${o}`)),e=>e}}export{L as default};
