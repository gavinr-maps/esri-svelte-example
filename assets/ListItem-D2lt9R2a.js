const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Legend-CdDaYek5.js","./tslib.es6-B3Jf3DVX.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Accessor-BLX9ikPh.js","./subclass-BZA_h8Db.js","./Collection-CEdjem1-.js","./Evented-BHRw9x22.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./cast-Bjksrh93.js","./jsxFactory-CJa39Fro.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./Promise-B2Hu02L7.js","./uuid-fwrPAdZb.js","./featureReductionUtils-Caulfaw_.js","./Color-BCS62Hs5.js","./colorUtils-0bJDPow9.js","./mathUtils-C4_ghTv4.js","./symbols-CNimns--.js","./enumeration-Ba5njXdz.js","./writer-DNAwXnhG.js","./fieldUtils-tmQlKvWo.js","./geometry-D964gYQX.js","./Extent-Bf3YTe7m.js","./Point-Cg0-ChZE.js","./Polyline-D9YkgmM_.js","./TextSymbol-D8QO_KUV.js","./screenUtils-_ZIvrt5o.js","./materialUtils-DarhapKC.js","./opacityUtils-C68Tlu6_.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-BE7cC1jD.js","./persistableUrlUtils-fa1mAujs.js","./collectionUtils-D_lHIu88.js","./Portal-C10FKnaA.js","./Loadable-BabW5Xcc.js","./Clonable-D3rtuBWg.js","./EffectView-DC4OeDwG.js","./parser-CTsgEym6.js","./utils-93yNk4Xc.js","./mat4f32-DcsiF_Rp.js","./mat4-GpOFENPA.js","./common-DQOJ18NT.js","./jsonUtils-CSnQD004.js","./ExportImageParameters-D2m0BUqR.js","./scaleUtils-D_Nw3nhM.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils-DEyYrAdA.js","./layerUtils-BrNoooE9.js","./pixelRangeUtils-DHjFxYEg.js","./jsonUtils-DxpLMo6d.js","./ClassBreaksRenderer-BuHwSyVK.js","./UniqueValueRenderer-BQtAHUSo.js","./diffUtils-BP7jmOAy.js","./colorRamps-pKd7I5WZ.js","./SizeVariable-936USOrb.js","./sizeVariableUtils-Cmcuvw-4.js","./visualVariableUtils-DX1kS9Se.js","./Graphic-DsxsIjhH.js","./PopupTemplate-BHMhS05j.js","./ActionToggle-iT4slXc7.js","./Identifiable-B1UbsKNt.js","./jsonUtils-CEfjT-BK.js","./compilerUtils-Dw3R0f-Z.js","./lengthUtils-DL1-FDQQ.js","./ColorStop-Dk3U5tCk.js","./jsonUtils-Ds2Sqto-.js","./defaults-DZ1kfMRx.js","./defaultsJSON-GKolV7NZ.js","./RendererLegendOptions-B-4se3aU.js","./styleUtils-BYTm14n3.js","./LRUCache-B_PHMSGm.js","./MemCache-Dx1v3xLC.js","./Version-BSlAgupz.js","./FieldsIndex-DpwHKAMX.js","./UnknownTimeZone-BkowvBs8.js","./OverrideHelper-ti072FkP.js","./colorUtils-aL8wj-8G.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./utils-D2PLyMFF.js","./enums-CmIX1y88.js","./quantizationUtils-uj_P09aO.js","./HeatmapColorStop-BJc5nbwr.js","./heatmapUtils-Dwiv9IEa.js","./SimpleRenderer-BV2L9G_n.js","./rendererConversion-CcWsy4Z5.js","./cimSymbolUtils-DXvZxabN.js","./symbolUtils-_AKSLEsP.js","./utils-Ce7L3imC.js","./mat2df32-orApM5a3.js","./mat2d-D9DBP-jx.js","./webStyleSymbolUtils-CwdsUGtV.js","./devEnvironmentUtils-CnNDiFMM.js","./utils-D3iwntXt.js","./Basemap-DVYOaWHz.js","./loadAll-B6mYSptb.js","./PortalItem-DzgXrpyc.js","./writeUtils-Dz7BsE1e.js","./timeUtils-8fb_2oAt.js","./utils-BwQ00KBJ.js","./themeUtils-C3zvZbsE.js","./utils-CfVnGNTZ.js","./Heading-C-odFCu-.js","./globalCss-CZa70j6i.js","./accessibleHandler-hWbBTR_7.js"])))=>i.map(i=>d[i]);
import{r as s}from"./tslib.es6-B3Jf3DVX.js";import{q as m,b as L}from"./Accessor-BLX9ikPh.js";import{m as n,a as C,a4 as y,O}from"./subclass-BZA_h8Db.js";import{V as b}from"./Collection-CEdjem1-.js";import{s as w}from"./Identifiable-B1UbsKNt.js";import{watch as a,initial as d}from"./reactiveUtils-C5zUhJQJ.js";import{s as P}from"./cast-Bjksrh93.js";import{p as M,c as A,a as E}from"./ActionToggle-iT4slXc7.js";import{v as k,a as V,f as D,b as F,u as v,y as H,s as T}from"./layerListUtils-Cb_jjipP.js";import{_ as x}from"./index-Bh2oEzTI.js";import{B as W,n as h}from"./jsxFactory-CJa39Fro.js";import{e as f}from"./widget-DwhGPDuv.js";let r=class extends w(W){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([a(()=>this._canCreateLegend,()=>this._createLegend(),d),a(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),d)])}destroy(){this._legend=m(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e==null?void 0:e.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){var u;const e=(u=this.listItem)==null?void 0:u.layer;if(!e||e.type==="subtype-sublayer")return null;const t=k(e)?e:null,i=e==null?void 0:e.parent,o=i!=null&&"type"in i&&i.type==="map-image"?t==null?void 0:t.source:null,c="";return o&&i?{layer:i,title:c,sublayerIds:[o.mapLayerId]}:{layer:e,title:c}}get disabled(){var o;const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!((o=t.activeLayerInfos)!=null&&o.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return h("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:o}=this;return e&&!i&&o?e==="legend"&&t?h("div",{key:"legend-widget"},t.render()):typeof e=="string"?h("div",{innerHTML:e,key:e}):f(e)?h("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?h("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e):null}async _createLegend(){if(m(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await x(()=>import("./Legend-CdDaYek5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113]),import.meta.url),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:f(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};s([n()],r.prototype,"_legend",void 0),s([n()],r.prototype,"_canCreateLegend",null),s([n()],r.prototype,"_legendOptions",null),s([n()],r.prototype,"_legendLayerInfo",null),s([n()],r.prototype,"className",void 0),s([n()],r.prototype,"content",void 0),s([n()],r.prototype,"disabled",null),s([n()],r.prototype,"flowEnabled",void 0),s([n()],r.prototype,"icon",null),s([n()],r.prototype,"image",void 0),s([n()],r.prototype,"listItem",void 0),s([n()],r.prototype,"open",void 0),s([n()],r.prototype,"title",null),s([n()],r.prototype,"visible",void 0),r=s([C("esri.widgets.LayerList.ListItemPanel")],r);const I=r;var p;const N=b.ofType({key:"type",defaultKeyValue:"button",base:M,typeMap:{button:A,toggle:E,slider:V}}),S=b.ofType(N),_="layer",g="child-list-mode",z="hide";let l=p=class extends w(L){constructor(e){super(e),this.actionsSections=new S,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(b.ofType(p)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([a(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),d),a(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),d),a(()=>this.view,e=>this._updateChildrenView(e),d),a(()=>this.panel,e=>this._setListItemOnPanel(e),d)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(o=>o.layer===i)??null}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new I(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=y(this,"layer.layer");return(!e||e&&y(this,"layer.layer.loaded"))&&y(this,"layer.title")||y(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:o}=this;return!o&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return(e=this.layer)==null?void 0:e.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!D(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return F(this.layer)}clone(){return new p({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,o=e.filter(c=>!i.some(u=>u.layer===c));i.addMany(this._createChildItems(o,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(o=>!e.includes(o.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(g),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(g),this.listModeDisabled||this.addHandles(e.toArray().map(t=>a(()=>t.listMode,()=>this._compileChildren(e))),g)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(i=>v(i)!==z);t!=null&&t.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),_)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.map(i=>t||H(i)?new p({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(O).reverse()}_watchLayerProperties(e){if(this.removeHandles(_),this.removeHandles(g),!e)return;if((!this.listModeDisabled&&v(e))==="hide-children")return void this.children.destroyAll();const t=T(e);t&&this.addHandles(a(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},d),_)}};s([n({type:S})],l.prototype,"actionsSections",void 0),s([n()],l.prototype,"actionsOpen",void 0),s([n()],l.prototype,"checkPublishStatusEnabled",void 0),s([n({type:b})],l.prototype,"children",void 0),s([n()],l.prototype,"childrenSortable",void 0),s([n({readOnly:!0})],l.prototype,"connectionStatus",null),s([n({readOnly:!0})],l.prototype,"error",null),s([n()],l.prototype,"hidden",void 0),s([n({readOnly:!0})],l.prototype,"incompatible",null),s([n()],l.prototype,"layer",void 0),s([n({readOnly:!0})],l.prototype,"layerView",null),s([n()],l.prototype,"listItemCreatedFunction",void 0),s([n({nonNullable:!0})],l.prototype,"listModeDisabled",void 0),s([n()],l.prototype,"open",void 0),s([n({type:I})],l.prototype,"panel",void 0),s([P("panel")],l.prototype,"castPanel",null),s([n()],l.prototype,"parent",void 0),s([n({value:!0})],l.prototype,"sortable",null),s([n()],l.prototype,"title",null),s([n({readOnly:!0})],l.prototype,"publishing",null),s([n({readOnly:!0})],l.prototype,"updating",null),s([n()],l.prototype,"view",void 0),s([n()],l.prototype,"visible",null),s([n({readOnly:!0})],l.prototype,"visibleAtCurrentScale",null),s([n({readOnly:!0})],l.prototype,"visibleAtCurrentTimeExtent",null),s([n({readOnly:!0})],l.prototype,"visibilityMode",null),l=p=s([C("esri.widgets.LayerList.ListItem")],l);const Z=l;export{Z as j};
