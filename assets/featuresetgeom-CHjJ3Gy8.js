import{k as R,i as y,d as f,K as s,a as p,r as u}from"./languageUtils-JGnUBrxZ.js";import{s as d}from"./TimeOnly-DOn_Hy89.js";import{u as l,f as w}from"./SpatialFilter-v6dSAig4.js";import{n as a}from"./Point-Cg0-ChZE.js";import{relate as F,crosses as I,touches as A,within as P,overlaps as g,contains as C,intersects as h}from"./geometryEngineAsync-Bu-rYQUP.js";import"./subclass-BZA_h8Db.js";import"./assets-C43MgM-v.js";import"./index-Bh2oEzTI.js";import"./tslib.es6-B3Jf3DVX.js";import"./Accessor-BLX9ikPh.js";import"./ImmutableArray-BPVd6ESQ.js";import"./shared-OyXfj1UM.js";import"./Extent-Bf3YTe7m.js";import"./Field-ybkHhtnK.js";import"./jsonMap-0cxwUWs2.js";import"./enumeration-Ba5njXdz.js";import"./writer-DNAwXnhG.js";import"./fieldType-BuzM0UHS.js";import"./date-DlqISzcw.js";import"./locale-C9TlLpzi.js";import"./number-CUaGJe2K.js";import"./Polyline-D9YkgmM_.js";import"./mathUtils-C4_ghTv4.js";import"./jsonUtils-CEfjT-BK.js";import"./Query-5Xpquc1r.js";import"./geometry-D964gYQX.js";import"./cast-Bjksrh93.js";import"./DataLayerSource-BKkswDvG.js";import"./FullTextSearch-Csd1Hktu.js";import"./Clonable-D3rtuBWg.js";import"./TimeExtent-DocT5yPf.js";import"./timeUtils-8fb_2oAt.js";import"./UnknownTimeZone-BkowvBs8.js";import"./arcadeUtils-BE8Aletj.js";import"./deepClone-CWS5qiGp.js";import"./featureConversionUtils-D14h8iad.js";import"./aaBoundingBox-BE7cC1jD.js";import"./OptimizedFeature-6cJ-QFG5.js";import"./OptimizedGeometry-BF8iz5FO.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./FieldsIndex-DpwHKAMX.js";import"./fieldUtils-tmQlKvWo.js";import"./intl-CChhNOV8.js";import"./messages-OmQvZhAg.js";import"./hash-CcEbRgUF.js";import"./uuid-fwrPAdZb.js";import"./Portal-C10FKnaA.js";import"./Loadable-BabW5Xcc.js";import"./Promise-B2Hu02L7.js";import"./WhereClause-BNiy948d.js";import"./workers-D4HfeYKj.js";import"./Queue-yu3bZ02p.js";import"./SimpleObservable-KocWTzVy.js";function c(n){return n instanceof a}function o(n,e,i,m){return m(n,e,async(S,t,r)=>{if(r.length<2)throw new p(n,u.WrongNumberOfParameters,e);if((r=R(r))[0]===null&&r[1]===null)return!1;if(s(r[0])){if(r[1]instanceof a)return new w({parentfeatureset:r[0],relation:i,relationGeom:r[1]});if(r[1]===null)return new l({parentfeatureset:r[0]});throw new p(n,u.InvalidParameter,e)}if(c(r[0])){if(c(r[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":return h(d(r[0]),d(r[1]));case"esriSpatialRelIntersects":return h(r[0],r[1]);case"esriSpatialRelContains":return C(r[0],r[1]);case"esriSpatialRelOverlaps":return g(r[0],r[1]);case"esriSpatialRelWithin":return P(r[0],r[1]);case"esriSpatialRelTouches":return A(r[0],r[1]);case"esriSpatialRelCrosses":return I(r[0],r[1])}throw new p(n,u.InvalidParameter,e)}if(s(r[1]))return new w({parentfeatureset:r[1],relation:i,relationGeom:r[0]});if(r[1]===null)return!1;throw new p(n,u.InvalidParameter,e)}if(r[0]===null){if(s(r[1]))return new l({parentfeatureset:r[1]});if(r[1]instanceof a||r[1]===null)return!1}throw new p(n,u.InvalidParameter,e)})}function Cr(n){n.mode==="async"&&(n.functions.intersects=function(e,i){return o(e,i,"esriSpatialRelIntersects",n.standardFunctionAsync)},n.functions.envelopeintersects=function(e,i){return o(e,i,"esriSpatialRelEnvelopeIntersects",n.standardFunctionAsync)},n.signatures.push({name:"envelopeintersects",min:2,max:2}),n.functions.contains=function(e,i){return o(e,i,"esriSpatialRelContains",n.standardFunctionAsync)},n.functions.overlaps=function(e,i){return o(e,i,"esriSpatialRelOverlaps",n.standardFunctionAsync)},n.functions.within=function(e,i){return o(e,i,"esriSpatialRelWithin",n.standardFunctionAsync)},n.functions.touches=function(e,i){return o(e,i,"esriSpatialRelTouches",n.standardFunctionAsync)},n.functions.crosses=function(e,i){return o(e,i,"esriSpatialRelCrosses",n.standardFunctionAsync)},n.functions.relate=function(e,i){return n.standardFunctionAsync(e,i,async(m,S,t)=>{if(t=R(t),y(t,3,3,e,i),c(t[0])&&c(t[1]))return F(t[0],t[1],f(t[2]));if(t[0]instanceof a&&t[1]===null||t[1]instanceof a&&t[0]===null)return!1;if(s(t[0])&&t[1]===null)return new l({parentfeatureset:t[0]});if(s(t[1])&&t[0]===null)return new l({parentfeatureset:t[1]});if(s(t[0])&&t[1]instanceof a)return t[0].relate(t[1],f(t[2]));if(s(t[1])&&t[0]instanceof a)return t[1].relate(t[0],f(t[2]));if(t[0]===null&&t[1]===null)return!1;throw new p(e,u.InvalidParameter,i)})})}export{Cr as registerFunctions};
