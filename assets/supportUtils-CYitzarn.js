const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./lclayout-jnpuPyOe.js","./_commonjsHelpers-DCkdB7M8.js"])))=>i.map(i=>d[i]);
import{d as ct,b as F}from"./Graphic-CFXUQZlS.js";import{s as ut}from"./Accessor-BHnuXKD2.js";import{j as mt}from"./Point-XGrwlf63.js";import{P as yt,j as pt}from"./Polyline-BmuD2-ZN.js";import{h as dt}from"./GraphicsLayer-Acqd2VFm.js";import"./Extent-CBBGeHb-.js";import"./aaBoundingBox-CeBivBRq.js";import"./mathUtils-DV9iOXpW.js";import{_ as ft}from"./index-tefRSezt.js";import{n as ht,i as ot}from"./cast-BA_-jlhc.js";import{F as nt}from"./knowledgeGraphService-BDS0AlFK.js";import{p as at}from"./GraphQueryStreaming-DnnY4k6p.js";import{S as gt,m as bt}from"./TextSymbol-BQ_NW9Xo.js";let U,n=null;function kt(){return U||(U=ft(()=>import("./lclayout-jnpuPyOe.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.l).then(({default:t})=>t({locateFile:r=>ht(`esri/libs/linkchartlayout/${r}`)})).then(t=>{Et(t)}),U)}function Et(t){n=t}var O,v,D,w;(function(t){t[t.None=0]="None",t[t.IsMovable=1]="IsMovable",t[t.IsGeographic=2]="IsGeographic",t[t.IsRoot=4]="IsRoot",t[t.IsOld=8]="IsOld"})(O||(O={})),function(t){t[t.Success=0]="Success",t[t.Error=1]="Error",t[t.Canceled=2]="Canceled"}(v||(v={})),function(t){t[t.Regular=0]="Regular",t[t.Curved=1]="Curved",t[t.Recursive=2]="Recursive"}(D||(D={})),function(t){t[t.right=0]="right",t[t.left=1]="left",t[t.top=2]="top",t[t.bottom=3]="bottom"}(w||(w={}));const V={none:0,"start-only":1,"start-and-end":2};function Ct(t){const r={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...(t==null?void 0:t.toJSON())??{},eventsTicksVisualization:(t==null?void 0:t.eventsTicksVisualization)??"start-and-end"};return{...r,timeDirection:{value:w[r.timeDirection]??w.right},eventsTicksVisualization:{value:V[r.eventsTicksVisualization]??V["start-and-end"]}}}function L(t,r,l,u,p,c){const s=l.length,e=p.length,m=Float64Array.BYTES_PER_ELEMENT,y=Uint32Array.BYTES_PER_ELEMENT,a=Uint8Array.BYTES_PER_ELEMENT,o=16,i=o+s*(a+2*m)+e*(2*y),f=n._malloc(i);try{const d=f+o-f%o,b=d+s*m,E=b+s*m,C=E+e*y,g=C+e*y,$=()=>[n.HEAPF64.subarray(d>>3,(d>>3)+s),n.HEAPF64.subarray(b>>3,(b>>3)+s),n.HEAPU32.subarray(E>>2,(E>>2)+e),n.HEAPU32.subarray(C>>2,(C>>2)+e),n.HEAPU8.subarray(g,g+s)],[N,A,h,T,P]=$();N.set(l),A.set(u),h.set(p),T.set(c),P.set(r);const _=t(s,g,d,b,e,E,C);let R=null,M=null;if(_.value===v.Success){const k=n.getLayoutLinksTypes(),B=n.getLayoutLinksVerticesEndIndices(),H=n.getLayoutLinksVertices(),G=n.countLayoutLinksVertices();!e||k&&B?G&&!H?_.value=v.Error:(R={types:new Uint8Array(n.HEAPU8.subarray(k,k+e)),vertexEndIndex:new Uint32Array(n.HEAPU32.subarray(B>>2,(B>>2)+e)),vertices:new Float64Array(n.HEAPF64.subarray(H>>3,(H>>3)+2*G))},M=n.getAuxiliaryGraphicElements()):_.value=v.Error}const[x,I,S,lt,st]=$();return l.set(x),u.set(I),p.set(S),c.set(lt),r.set(st),{status:_.value,links:R,graphics:M}}finally{n._free(f),n.cleanupLayout()}}const j=2,W=1,Y=-1;var q,Q,Z,J,K,X,tt,et,rt;(function(t){function r(){return n.getMinIdealEdgeLength()}function l(u,p,c,s,e,m,y=j,a=W,o=Y){return L((i,f,d,b,E,C,g)=>n.applyForceDirectedLayout(u,i,f,d,b,E,C,g,y,a,o),p,c,s,e,m)}t.getMinIdealEdgeLength=r,t.apply=l})(q||(q={})),function(t){function r(l,u,p,c,s,e,m=j,y=W,a=Y){return L((o,i,f,d,b,E,C)=>n.applyCommunityLayout(l,o,i,f,d,b,E,C,m,y,a),u,p,c,s,e)}t.apply=r}(Q||(Q={})),function(t){function r(l,u,p,c,s,e){return L((m,y,a,o,i,f,d)=>n.applySimpleLayout(l,m,y,a,o,i,f,d),u,p,c,s,e)}t.apply=r}(Z||(Z={})),function(t){function r(l,u,p,c,s,e){return L((m,y,a,o,i,f,d)=>n.applyHierarchicalLayout(l,m,y,a,o,i,f,d),u,p,c,s,e)}t.apply=r}(J||(J={})),function(t){function r(l,u,p,c,s,e){return L((m,y,a,o,i,f,d)=>n.applyRadialTreeLayout(l,m,y,a,o,i,f,d),u,p,c,s,e)}t.apply=r}(K||(K={})),function(t){function r(l,u,p,c,s,e){return L((m,y,a,o,i,f,d)=>n.applySmartTreeLayout(l,m,y,a,o,i,f,d),u,p,c,s,e)}t.apply=r}(X||(X={})),function(t){function r(l,u,p,c,s,e,m,y,a,o,i,f){return L((d,b,E,C,g,$,N)=>{if(s.length!==d)return{value:v.Error};if(e.length!==d)return{value:v.Error};if(a.length!==g)return{value:v.Error};if(o.length!==g)return{value:v.Error};const A=Float64Array.BYTES_PER_ELEMENT,h=16,T=n._malloc(h+d*A),P=n._malloc(h+d*A),_=n._malloc(h+g*A),R=n._malloc(h+g*A),M=T+h-T%h,x=P+h-P%h,I=_+h-_%h,S=R+h-R%h;try{return n.HEAPF64.subarray(M>>3,(M>>3)+d).set(s),n.HEAPF64.subarray(x>>3,(x>>3)+d).set(e),n.HEAPF64.subarray(I>>3,(I>>3)+g).set(a),n.HEAPF64.subarray(S>>3,(S>>3)+g).set(o),n.applyChronologicalLayout(l,d,b,E,C,M,x,g,$,N,I,S,i,Ct(f))}finally{n._free(T),n._free(P),n._free(_),n._free(R)}},u,p,c,m,y)}t.apply=r}(tt||(tt={})),function(t){t[t.Undirected=0]="Undirected",t[t.Directed=1]="Directed",t[t.Reversed=2]="Reversed"}(et||(et={})),function(t){t[t.ByCC_Raw=0]="ByCC_Raw",t[t.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",t[t.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(rt||(rt={}));const Bt=ot()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"}),Ht=ot()({absoluteValue:"absolute-value",multiplier:"multiplier"}),Ft=["basic-grid","chronological-mono-timeline","chronological-multi-timeline","geographic-organic-standard","hierarchical-bottom-to-top","hierarchical-top-to-bottom","organic-community","organic-fusiform","organic-leaf-circle","organic-standard","radial-node-centric","radial-root-centric","tree-bottom-to-top","tree-left-to-right","tree-right-to-left","tree-top-to-bottom"],vt=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);function it(t,r){var u,p;const l=new Map;if((u=r.dataModel)!=null&&u.relationshipTypes)for(const c of r.dataModel.relationshipTypes)c.name&&l.set(c.name,[]);for(const c of t)l.has(c.typeName)&&((p=l.get(c.typeName))==null||p.push(c.id));return l}async function Ut(t,r,l){const u=[],p=it(t,r),c={},s=[];for(const[a,o]of p){if(o.length<1)continue;const i=`${a}_ids`;c[i]=o,s.push(`MATCH (n)-[r:${a}]->(m) WHERE id(r) in $${i} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(s.length===0)return[];const e=s.join(" UNION "),m=new at({openCypherQuery:e,bindParameters:c}),y=(await nt(r,m,l==null?void 0:l.requestOptions)).resultRowsStream.getReader();for(;;){const{done:a,value:o}=await y.read();if(a)break;for(const i of o)u.push({id:i[0],typeName:i[1]}),u.push({id:i[2],typeName:i[3]})}return u}async function zt(t,r,l){const u=new Map,p=it(t,r),c={},s=[];for(const[a,o]of p){if(o.length<1)continue;const i=`${a}_ids`;c[i]=o,s.push(`MATCH (n)-[r:${a}]->(m) WHERE id(r) in $${i} RETURN id(r), id(n), id(m)`)}if(s.length===0)return u;const e=s.join(" UNION "),m=new at({openCypherQuery:e,bindParameters:c}),y=(await nt(r,m,l==null?void 0:l.requestOptions)).resultRowsStream.getReader();for(;;){const{done:a,value:o}=await y.read();if(a)break;for(const i of o)u.set(i[0],[i[1],i[2]])}return u}const z="ESRI__ChronologicalLayoutOverlay",Gt=()=>z,Ot=t=>{var u,p,c,s;const r=[],l={type:"CIMGeometricEffectCut",beginCut:3,endCut:3};for(const e of((u=t.chronologicalAuxiliaryGraphics)==null?void 0:u.lines)??[]){const m={type:"CIMSolidStroke",enable:!0,width:e.width,color:[e.color.r,e.color.g,e.color.b,Math.round(e.color.a/100*255)],effects:e.dashPattern.length>0?[{type:"CIMGeometricEffectDashes",dashTemplate:e.dashPattern,lineDashEnding:"NoConstraint"},l]:[l]},y={type:"CIMVectorMarker",enable:!0,size:10,frame:{xmin:-5,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[-2.06,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:[e.color.r,e.color.g,e.color.b,Math.round(e.color.a/100*255)]}]}}],markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineEnd",offsetAlongLine:0}},a=new ct({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:e.arrowheadSizeAtEnd?[m,y]:[m]}}});for(const o of e.elements){const i=new yt({paths:[[[o.origin.x,o.origin.y],[o.destination.x,o.destination.y]]]});r.push(new F({geometry:i,symbol:a}))}}for(const e of((p=t.chronologicalAuxiliaryGraphics)==null?void 0:p.polygons)??[]){const m=new gt({color:[e.color.r,e.color.g,e.color.b,e.color.a/100],style:"solid",outline:null});for(const y of e.elements){const a=new pt({rings:[y.points.map(o=>[o.x,o.y])]});r.push(new F({geometry:a,symbol:m}))}}for(const e of((c=t.chronologicalAuxiliaryGraphics)==null?void 0:c.texts)??[]){let m="middle",y="center";switch((s=e.direction)==null?void 0:s.value){case w.left:y="right";break;case w.right:y="left";break;case w.bottom:m="bottom"}for(const a of e.elements){const o=new bt({color:[e.color.r,e.color.g,e.color.b,e.color.a/100],text:a.str,font:{size:e.height,weight:"bold"},verticalAlignment:m,horizontalAlignment:y}),i=new mt({x:a.anchor.x,y:a.anchor.y});r.push(new F({geometry:i,symbol:o}))}}return new dt({graphics:r,listMode:"hide",title:z,id:z})},Dt=t=>vt.get(t)??"radial-root-centric";function Vt(t){if(!t.spatialReference.isWGS84)throw new ut("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return t.clone().normalize().map(r=>[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]])}export{Q as A,Dt as C,J as P,Vt as S,K as _,kt as a,Z as b,Bt as c,zt as d,Ft as e,Ut as g,X as h,O as i,tt as m,v as o,Ht as r,D as u,q as v,Gt as w,Ot as x};
