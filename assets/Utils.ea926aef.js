var t=Object.defineProperty,e=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,a=(t,e)=>{for(var r in e||(e={}))s.call(e,r)&&i(t,r,e[r]);if(n)for(var r of n(e))o.call(e,r)&&i(t,r,e[r]);return t};import{bp as c,m as u,w as E}from"./vendor.d0a39f0f.js";import"./Texture.6f578e52.js";const f=new Float32Array(1);function l(t){return[255&t,(65280&t)>>>8,(16711680&t)>>>16,(4278190080&t)>>>24]}function A(t,e){return 65535&t|e<<16}function I(t,e,r,n){return 255&t|(255&e)<<8|(255&r)<<16|n<<24}var h,L,T,O,d,S,_,w;new Uint32Array(f.buffer),(w=h||(h={}))[w.FILL=0]="FILL",w[w.LINE=1]="LINE",w[w.MARKER=2]="MARKER",w[w.TEXT=3]="TEXT",w[w.LABEL=4]="LABEL",function(t){t[t.SUCCEEDED=0]="SUCCEEDED",t[t.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(L||(L={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(T||(T={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(O||(O={})),function(t){t[t.NONE=0]="NONE",t[t.OPACITY=1]="OPACITY",t[t.COLOR=2]="COLOR",t[t.ROTATION=4]="ROTATION",t[t.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",t[t.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",t[t.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",t[t.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(d||(d={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(S||(S={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(_||(_={}));class p{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(t,e,r,n,s,o,i,a,c){this.color=t,this.haloColor=e,this.haloSize=r,this.size=n,this.angle=s,this.offsetX=o,this.offsetY=i,this.hAnchor=a,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}p.pool=new c(p);const N=u.getLogger("esri.views.2d.engine.webgl.Utils"),y="geometry",R=[{name:y,strideInBytes:36,divisor:0}],U=[{name:y,strideInBytes:12,divisor:0}],v=[{name:y,strideInBytes:40,divisor:0}],C=[{name:y,strideInBytes:36,divisor:0}],m=[{name:y,strideInBytes:36,divisor:0}];function P(t){const e={};for(const r of t)e[r.name]=r.strideInBytes;return e}const b=P([{name:y,strideInBytes:36,divisor:0}]),M=P(R),g=P(U),B=P(v),F=P(C),D=P(m);function G(t,e){switch(t){case h.MARKER:return b;case h.FILL:return e?g:M;case h.LINE:return B;case h.TEXT:return F;case h.LABEL:return D}}const H=[y],X=[y],Y=[y],Z=[y],z=[y];function j(t){switch(t){case h.MARKER:return H;case h.FILL:return X;case h.LINE:return Y;case h.TEXT:return Z;case h.LABEL:return z}}function x(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function K(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}}function $(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function V(t){return null!=t}function q(t){return"number"==typeof t}function W(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2;default:return N.error(new E("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}}function k(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return N.error(new E("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}}function J(t){switch(t){case"opacity":return O.OPACITY;case"color":return O.COLOR;case"rotation":return O.ROTATION;case"size":return O.SIZE;default:return N.error(`Cannot interpret unknown vv: ${t}`),null}}function Q(t,e,r,n,s,o,i){for(const c in o){const e=o[c].stride,n=x(e),i=o[c].data,a=r[c].data,u=e*s.vertexCount/n,E=e*t/n,f=e*s.vertexFrom/n;for(let t=0;t<u;++t)a[t+E]=i[t+f]}const a=s.indexCount;for(let c=0;c<a;++c)n[c+e]=i[c+s.indexFrom]-s.vertexFrom+t}const tt={[y]:35044};function et(t,e){const r=[];for(let n=0;n<5;++n){const s=j(n),o={};for(const t of s)o[t]={data:e(n,t)};r.push({data:t(n),buffers:o})}return r}function rt(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function nt(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void N.error(new E("webgl-utils",`Unable to handle type ${t}`))}}function st(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void N.error(new E("webgl-utils",`Unable to handle type ${t}`))}}const ot=t=>{const e=new Map;for(const r in t)for(const n of t[r])e.set(n.name,n.location);return e},it=t=>{const e={};for(const r in t){const n=t[r];e[r]=n.length?n[0].stride:0}return e},at=new Map,ct=(t,n)=>{if(!at.has(t)){const s=function(t){const n={};for(const s in t){const o=t[s];let i=0;n[s]=o.map((t=>{const n=(s=a({},t),o={normalized:t.normalized||!1,divisor:t.divisor||0,offset:i,stride:0},e(s,r(o)));var s,o;return i+=t.count*rt(t.type),n})),n[s].forEach((t=>t.stride=i))}return n}(n),o={strides:it(s),bufferLayouts:s,attributes:ot(n)};at.set(t,o)}return at.get(t)};function ut(t){t(h.FILL),t(h.LINE),t(h.MARKER),t(h.TEXT),t(h.LABEL)}export{d as A,x as C,et as D,h as E,nt as G,st as H,T as I,q as K,l as M,V as N,_ as O,W as P,K as R,k as S,G as T,J as X,Q as _,$ as a,S as b,A as m,tt as q,ut as r,ct as t,I as w};
