const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-icon-Cu0W9dtm.js","./icon-BQO9J86c.js","./jsxFactory-CJa39Fro.js","./tslib.es6-B3Jf3DVX.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./subclass-BZA_h8Db.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./Accessor-BLX9ikPh.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./Evented-BHRw9x22.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./dom-D_AJDzAj.js","./observers-D2xgmA06.js","./calcite-label-B1FxWqaL.js","./label-DEe8AW1C.js","./component-6CIDVndn.js","./calcite-switch-CkUGVtze.js","./switch-Drd7BD6R.js","./form-BZPQ5PUM.js","./interactive-y84HQRWL.js","./key-D63ExP77.js","./loadable-DM18hPdE.js","./calcite-tooltip-rE_jVYtd.js","./floating-ui-Bma_zPVt.js","./debounce-BOqmhDXu.js","./openCloseComponent-CmOrfBN-.js","./FloatingArrow-BBdsG5MP.js","./calcite-block-M0XyV5ob.js","./conditionalSlot-R5D9krYS.js","./locale-A4FuYD8q.js","./t9n-D0ry3MEw.js","./Heading-D7P0OjYI.js","./action-D0Er9Ef6.js","./loader-C-zIPscB.js","./action-menu-C6uYzPu-.js","./array-BMcQdnYi.js","./popover-Q5ruM4hh.js","./focusTrapComponent-BSUg_DLj.js","./handle-Ct1HP3bl.js","./scrim-DPa2aeKh.js","./calcite-radio-button-C1tLzCtg.js","./calcite-radio-button-group-D-kr_xkz.js","./Validation-Bz9yoU6e.js","./input-message-CWvsvdFk.js","./calcite-button-D_Agetwz.js","./button-9P4PM9SO.js","./calcite-input-DAafN6Cc.js","./input2-BReyTnf4.js","./input-j1u1wOBY.js","./progress-BXyickl_.js","./calcite-list-C4jOVpC-.js","./resources4-DXHY1U7R.js","./utils3-BrU6GrkI.js","./filter-yN6-jZOU.js","./calcite-list-item-vbKS6alm.js","./calcite-checkbox-B8olv0Y9.js","./calcite-loader-DP4PIFO8.js","./GridControls-DTz2yj1S.js","./Color-BCS62Hs5.js","./colorUtils-0bJDPow9.js","./mathUtils-C4_ghTv4.js","./unitFormatUtils-CZ2bRlFg.js","./ByteSizeUnit-BsxeN7wM.js","./Cyclical-oTUX3aX7.js","./quantityUtils-D0GB2dMc.js","./Point-Cg0-ChZE.js","./writer-DNAwXnhG.js","./globalCss-CZa70j6i.js","./geometry-D964gYQX.js","./Extent-Bf3YTe7m.js","./Polyline-D9YkgmM_.js","./symbols-CNimns--.js","./enumeration-Ba5njXdz.js","./fieldUtils-tmQlKvWo.js","./TextSymbol-D8QO_KUV.js","./screenUtils-_ZIvrt5o.js","./materialUtils-DarhapKC.js","./opacityUtils-C68Tlu6_.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-BE7cC1jD.js","./persistableUrlUtils-fa1mAujs.js","./collectionUtils-D_lHIu88.js","./Portal-C10FKnaA.js","./Loadable-BabW5Xcc.js","./Clonable-D3rtuBWg.js","./projection-B971H0Re.js","./projectBuffer-Bs7GwaPY.js","./geodesicConstants-DWQLYX7F.js","./scaleUtils-D_Nw3nhM.js","./projectVectorToVector-G2uWGoIb.js","./projectPointToVector-GINIbYMz.js","./defaultUnit-_T4IY-sW.js","./getDefaultUnitForView-Ce2vZZap.js","./gridUtils-BX6Ojh6T.js","./geodesicUtils-FCYOaNwu.js","./normalizeUtils-EVmAQ-ak.js","./normalizeUtilsCommon-dT81xWiM.js","./jsonUtils-CEfjT-BK.js","./utils-6jMaHUrH.js","./utils-Bema0iXE.js","./editingTools-DCvBiyJu.js","./Graphic-DsxsIjhH.js","./PopupTemplate-BHMhS05j.js","./ActionToggle-iT4slXc7.js","./Identifiable-B1UbsKNt.js","./SnappingVisualizer2D-Br8KvMdL.js","./vec2-maR1OrZI.js","./common-DQOJ18NT.js","./vec2f64-miziP1SN.js","./enums-CmIX1y88.js","./SnappingManager-BJPyuu7J.js","./elevationInfoUtils-BC_66_Fg.js","./unitConversionUtils-BMfW9yAe.js","./lengthUtils-DL1-FDQQ.js","./timeUtils-8fb_2oAt.js","./vec32-Dvg_eL9J.js","./Query-5Xpquc1r.js","./DataLayerSource-BKkswDvG.js","./Field-ybkHhtnK.js","./fieldType-BuzM0UHS.js","./FullTextSearch-Csd1Hktu.js","./TimeExtent-DocT5yPf.js","./InputManager-Ba9xzDpe.js","./Queue-yu3bZ02p.js","./signal-D4lghLjV.js","./keybindings-DoOdil3D.js","./utils-BpB3MnW1.js","./Version-BSlAgupz.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./plane-IENfwZlB.js","./mat3f64-BBpwCtoL.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./mathUtils-BG-eq9fO.js","./sphere-C77djCO6.js","./mat4-GpOFENPA.js","./mat3-BRl2i9Bz.js","./geometry2dUtils-DdyQE7AQ.js","./viewUtils-DrPohWV3.js","./SnappingVisualizer-BtjTdiTG.js","./PointSnappingHint-D7X20mlb.js","./editPlaneUtils-DJAUpVXQ.js","./UpdatingHandles-GfwcIh5z.js","./coordinateFormatter-Bqv90CKy.js","./GraphicsLayer-i3FeUJ_n.js","./GraphicsCollection-FfahqxsR.js","./Layer-CVt7Hb5J.js","./BlendLayer-CXM4n_Ge.js","./jsonUtils-CSnQD004.js","./parser-CTsgEym6.js","./utils-93yNk4Xc.js","./mat4f32-DcsiF_Rp.js","./ScaleRangeLayer-Bb8Ig1Hz.js","./ElevationInfo-CA5m_tHv.js","./dehydratedFeatureComparison-06VFTqH5.js","./createUtils-ibzYx0GK.js","./Circle-BInHZHdw.js","./geometryEngine-DGiYLHJy.js","./geometryEngineBase-yFIvKOkM.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-C9rxSL4a.js","./surfaceCoordinateSystems-DhFxihAh.js","./memoize-DsJmrG76.js","./ReactiveSet-BU2iaegS.js","./diffUtils-BP7jmOAy.js","./ViewingMode-Dodu7ZZk.js","./EditGeometryOperations-Cl8Sbfxr.js","./compilerUtils-Dw3R0f-Z.js","./InteractiveToolBase-vg6J8uyT.js","./meshVertexSpaceUtils-CXzOFlTI.js","./MeshLocalVertexSpace-LEHwMUnu.js","./hydratedFeatures-DBKLr8hT.js","./interfaces-D6pIddIh.js","./angularMeasurementUtils-7e2vxqzG.js","./SketchLabelOptions-DDQnGNSN.js","./SnappingContext-lR2hMWGP.js","./SnappingDragPipelineStep-rzVcndp8.js","./Scheduler-CJu5awNf.js","./debugFlags-BF6Z0j0F.js","./SnappingOperation-CaI4DIP4.js","./mat2d-D9DBP-jx.js","./mat2df64-CBKYtunK.js","./quat-4pa1e6ds.js","./helpMessageUtils-M95XMmyR.js","./helpMessageUtils3d-TaLw0ElD.js","./SketchTooltipInfo-BA57LzDt.js","./MeshTransform-D2t3aEmK.js","./axisAngleDegrees-Ci2HA7Jo.js","./themeUtils-C3zvZbsE.js","./a11yUtils-cyWndM8Q.js","./quantityFormatUtils-CX8UdSzC.js","./spatialReferenceEllipsoidUtils-DBE_OFra.js","./directionModeIcons-Br5woIHu.js","./automaticAreaMeasurementUtils-12dUsEmf.js","./geodesicMeasurementUtils-Bt9h4589.js","./euclideanAreaMeasurementUtils-CfO9bFtV.js","./earcut-Lltz9D9k.js","./triangle-PTGDC_xJ.js","./lineSegment-D7sKPPYf.js","./geodesicAreaMeasurementUtils-BILXFcc4.js","./automaticLengthMeasurementUtils-BXgXm1JY.js","./geodesicLengthMeasurementUtils-he3vjGJN.js","./isSupportedObject-6I_Nw0mS.js","./boundedPlane-EV1sS2Ke.js","./cimSymbolUtils-DXvZxabN.js","./utils-D2PLyMFF.js","./GraphicManipulator-Dc-QfW2U.js","./defaults-DZ1kfMRx.js","./defaultsJSON-GKolV7NZ.js","./drapedUtils-HWKOCxgF.js","./colorUtils-aL8wj-8G.js","./drawUtils-D0InE6Wy.js","./hitTestSelectUtils-UXJPjatw.js","./screenUtils-WcqhHU65.js","./TextOverlayItem-zxgmE06K.js","./formatUtils-C08vjXVT.js","./number-CUaGJe2K.js","./layerListUtils-Cb_jjipP.js","./LayerListViewModel-C5g5Lp46.js","./utils-BQBvadb7.js","./ListItem-D2lt9R2a.js","./widget-DwhGPDuv.js"])))=>i.map(i=>d[i]);
import{_ as p}from"./index-Bh2oEzTI.js";import{r as l}from"./tslib.es6-B3Jf3DVX.js";import{m as n,a as v,O as C,b as U}from"./subclass-BZA_h8Db.js";import{l as G}from"./isSupportedObject-6I_Nw0mS.js";import{e as X}from"./directionModeIcons-Br5woIHu.js";import{r as F,n as o,s as Y,e as V,B as x,w as Z}from"./jsxFactory-CJa39Fro.js";import{e as W}from"./globalCss-CZa70j6i.js";import{b as B,q as A,a as ee}from"./Accessor-BLX9ikPh.js";import{d as te}from"./asyncUtils-CWX51uTe.js";import{watch as N,initial as R}from"./reactiveUtils-C5zUhJQJ.js";import{t as z,u as ie}from"./SnappingManager-BJPyuu7J.js";import{s as le,y as H}from"./layerListUtils-Cb_jjipP.js";import{V as j}from"./Collection-CEdjem1-.js";import{v as ne}from"./LayerListViewModel-C5g5Lp46.js";import{j as oe}from"./ListItem-D2lt9R2a.js";let c=class extends B{constructor(t){super(t),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};l([n({type:Boolean,nonNullable:!0})],c.prototype,"colorSelection",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"dynamicScaleToggle",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"gridEnabledToggle",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"numericInputs",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"gridSnapEnabledToggle",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"lineIntervalInput",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"outOfScaleWarning",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"placementButtons",void 0),l([n({type:Boolean,nonNullable:!0})],c.prototype,"rotateWithMapToggle",void 0),c=l([v("esri.widgets.support.GridControls.VisibleElements")],c);const q=c;let g=class extends B{constructor(t){super(t),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new q({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};l([n({type:Boolean,nonNullable:!0})],g.prototype,"enabledToggle",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"featureEnabledToggle",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"gridEnabledToggle",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"header",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"layerList",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"gridControls",void 0),l([n({type:q,nonNullable:!0})],g.prototype,"gridControlsElements",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"layerListToggleLayersButton",void 0),l([n({type:Boolean,nonNullable:!0})],g.prototype,"selfEnabledToggle",void 0),g=l([v("esri.widgets.support.SnappingControls.VisibleElements")],g);const K=g,J=()=>F({icon:()=>p(()=>import("./calcite-icon-Cu0W9dtm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),label:()=>p(()=>import("./calcite-label-B1FxWqaL.js"),__vite__mapDeps([25,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,26,23,27]),import.meta.url),switch:()=>p(()=>import("./calcite-switch-CkUGVtze.js"),__vite__mapDeps([28,29,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,30,31,32,26,27,33]),import.meta.url),tooltip:()=>p(()=>import("./calcite-tooltip-rE_jVYtd.js"),__vite__mapDeps([34,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,35,36,37,38]),import.meta.url)}),T="esri-labeled-switch",S={label:`${T}__label`,labelContent:`${T}__label-content`,iconInfo:`${T}__icon_info`,iconWarning:`${T}__icon_warning`,tooltip:`${T}__tooltip`};function k({checked:e,disabled:t,hint:i,key:s,label:a,onChange:d,hintIcon:b,hintKind:f}){return o("calcite-label",{class:S.label,disabled:t,key:s,layout:"inline-space-between",scale:"s"},o("div",{class:S.labelContent,key:"label-content"},i?o(Y,null,o("div",null,a),o("calcite-icon",{class:f!=="warning"?S.iconInfo:S.iconWarning,icon:b??"information",id:s,scale:"s",tabIndex:0}),o("calcite-tooltip",{class:S.tooltip,referenceElement:s},i)):a),o("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:E=>d(E.target.checked)}))}let L=class extends B{constructor(t){super(t),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};l([n({type:Boolean,nonNullable:!0})],L.prototype,"directionModePicker",void 0),l([n({type:Boolean,nonNullable:!0})],L.prototype,"header",void 0),l([n({type:Boolean,nonNullable:!0})],L.prototype,"labelsToggle",void 0),l([n({type:Boolean,nonNullable:!0})],L.prototype,"tooltipsToggle",void 0),L=l([v("esri.widgets.support.SketchTooltipControls.VisibleElements")],L);const Q=L,O="esri-sketch-tooltip-controls",I={base:O,block:`${O}__block`,blockContent:`${O}__block-content`,hintIcon:`${O}__hint-icon`,radioButtonLabelWrapper:`${O}__radio-button-label-wrapper`};let m=class extends x{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new Q,this.sketchOptions=new G,this.viewType=void 0,this._onTooltipsEnabledChange=i=>{this.sketchOptions.tooltips.enabled=i},this._onLabelsEnabledChange=i=>{this.sketchOptions.labels.enabled=i},this._onDirectionModeChange=i=>{this.sketchOptions.values.directionMode=i.target.selectedItem.value}}loadDependencies(){return Promise.all([F({block:()=>p(()=>import("./calcite-block-M0XyV5ob.js"),__vite__mapDeps([39,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,40,24,23,31,41,32,42,43,33,37,35,36,44,27,1,45,46,47,48,49,38,50,51]),import.meta.url),label:()=>p(()=>import("./calcite-label-B1FxWqaL.js"),__vite__mapDeps([25,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,26,23,27]),import.meta.url),icon:()=>p(()=>import("./calcite-icon-Cu0W9dtm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),"radio-button":()=>p(()=>import("./calcite-radio-button-C1tLzCtg.js"),__vite__mapDeps([52,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,47,23,30,31,26,27,33]),import.meta.url),"radio-button-group":()=>p(()=>import("./calcite-radio-button-group-D-kr_xkz.js"),__vite__mapDeps([53,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,24,23,33,54,1,55]),import.meta.url)}),J()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return o("div",{"aria-label":e,class:this.classes(I.base,W.widget)},i?o("calcite-block",{class:I.block,heading:t.header?this.label:"",key:"content-block",open:!0},o("div",{class:I.blockContent,key:"content"},i)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(C);return i.length===0?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return o(k,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return o(k,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return o("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,o("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return o("calcite-label",{key:e,layout:"inline",scale:"s"},o("calcite-radio-button",{checked:e===t,scale:"s",value:e}),o("div",{class:I.radioButtonLabelWrapper,key:"label-wrapper"},o("calcite-icon",{icon:X[e],scale:"s"}),i))}};l([n()],m.prototype,"label",null),l([n({type:Q,nonNullable:!0})],m.prototype,"visibleElements",void 0),l([n(),V("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],m.prototype,"messages",void 0),l([n({nonNullable:!0,type:G})],m.prototype,"sketchOptions",void 0),l([n({type:String})],m.prototype,"viewType",void 0),m=l([v("esri.widgets.support.SketchTooltipControls")],m);const Oe=m,P=e=>se(e)||ae(e),se=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},ae=e=>{const t=le(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(const i of e[t])if(P(i))return!0}return!1},$=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(i=>$(i,t)!==!1)&&"children");var D;let _=D=class extends oe{constructor(e){super(e),this.children=new j,this.parent=null}get enabled(){const{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,i=!1;for(const s of e){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?t=!0:s.enabled==="disabled"&&(i=!0),i&&t)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>[e.layer.id,...e.childLayerIds])}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(i=>i.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(P);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>H(t)?new D({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(C).reverse()}};l([n()],_.prototype,"enabled",null),l([n()],_.prototype,"children",void 0),l([n()],_.prototype,"childLayerIds",null),l([n()],_.prototype,"featureSource",null),l([n({constructOnly:!0})],_.prototype,"getFeatureSnappingSources",void 0),l([n()],_.prototype,"parent",void 0),_=D=l([v("esri.widgets.support.SnappingControls.SnappingListItem")],_);let w=class extends ne{constructor(){super(...arguments),this.featureSnappingSources=new j}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var t;return!((t=e.children)!=null&&t.length)})}_compileList(){var s,a;const e=(a=(s=this.view)==null?void 0:s.map)==null?void 0:a.layers;if(!e)return;const t=e.filter(P);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new _({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};l([n()],w.prototype,"featureSnappingSources",void 0),l([n()],w.prototype,"operationalItems",void 0),l([n()],w.prototype,"operationalItemsFlat",null),l([n()],w.prototype,"selectableItems",null),w=l([v("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],w);let y=class extends B{constructor(e){super(e),this.layerListViewModel=new w,this.snappingOptions=new z,this.view=null}initialize(){this.addHandles([N(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},R),N(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:t})=>{e.featureSnappingSources=t},R)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>t.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>!t.enabled)}get layersEnabledCount(){var e,t;return((t=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:t.filter(i=>i.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e==null||e.forEach(i=>t?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:t}})=>{e?this.enableSnappingForLayer(t):this.disableSnappingForLayer(t)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)H(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){var s;const t=(s=this.layerListViewModel.operationalItemsFlat.find(a=>a.layer.id===e))==null?void 0:s.layer;if(!t)throw new U("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const i=new ie({layer:t});return this.snappingOptions.featureSources.add(i),i}};l([n()],y.prototype,"allLayersEnabled",null),l([n()],y.prototype,"allLayersDisabled",null),l([n({constructOnly:!0})],y.prototype,"layerListViewModel",void 0),l([n()],y.prototype,"layersEnabledCount",null),l([n({type:z,nonNullable:!0})],y.prototype,"snappingOptions",void 0),l([n()],y.prototype,"state",null),l([n()],y.prototype,"view",void 0),y=l([v("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],y);const re=y,u="esri-snapping-controls",h={base:u,container:`${u}__container`,item:`${u}__item`,toggleBlock:`${u}__toggle-block`,layerListBlock:`${u}__layer-list-block`,layerList:`${u}__layer-list`,layerListFilter:`${u}__layer-list__filter`,layerListButton:`${u}__layer-list__button`,layerListItem:`${u}__layer-list__item`,layerListGroup:`${u}__layer-list__group`,nestedContainer:`${u}__nested-container`};let r=class extends x{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new K,this._enableSnappingSwitchChange=d=>{this.snappingOptions.enabled=d},this._featureEnabledSwitchChange=d=>{this.snappingOptions.featureEnabled=d},this._gridEnabledSwitchChange=d=>{this.snappingOptions.gridEnabled=d,d&&this._startLoadGrid()},this._selfEnabledSwitchChange=d=>{this.snappingOptions.selfEnabled=d},this._onToggleLayersButtonClick=d=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),Z(d.target)};const{snappingOptions:i,view:s,viewModel:a}=e;this.viewModel=a??(this._defaultViewModel=new re({snappingOptions:i,view:s}))}normalizeCtorArgs(e){const{snappingOptions:t,view:i,viewModel:s,...a}=e;return a}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=A(this._defaultViewModel))}loadDependencies(){return Promise.all([F({block:()=>p(()=>import("./calcite-block-M0XyV5ob.js"),__vite__mapDeps([39,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,40,24,23,31,41,32,42,43,33,37,35,36,44,27,1,45,46,47,48,49,38,50,51]),import.meta.url),button:()=>p(()=>import("./calcite-button-D_Agetwz.js"),__vite__mapDeps([56,57,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30,23,31,26,27,33,41,32,24,42,1,45]),import.meta.url),input:()=>p(()=>import("./calcite-input-DAafN6Cc.js"),__vite__mapDeps([58,59,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,30,31,32,26,27,33,41,24,42,54,60,1,55,61]),import.meta.url),list:()=>p(()=>import("./calcite-list-C4jOVpC-.js"),__vite__mapDeps([62,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,31,24,63,64,33,42,41,32,65,36,1,59,30,26,27,54,60,55,61,45,51]),import.meta.url),"list-item":()=>p(()=>import("./calcite-list-item-vbKS6alm.js"),__vite__mapDeps([66,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,31,41,32,24,42,33,64,63,44,27,1,45,50]),import.meta.url),checkbox:()=>p(()=>import("./calcite-checkbox-B8olv0Y9.js"),__vite__mapDeps([67,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,30,31,32,26,27,33]),import.meta.url),loader:()=>p(()=>import("./calcite-loader-DP4PIFO8.js"),__vite__mapDeps([68,45,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,41,32,24]),import.meta.url)}),J()])}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=A(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return o("div",{"aria-label":e,class:this.classes(h.base,W.widget)},o("div",{class:h.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,i=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(t==null?void 0:t.type)==="2d"?this._renderGridEnabledToggle():null].filter(C),s=[e.enabledToggle?this._renderEnabledToggle():null,i.length>0?o("div",{class:h.nestedContainer},i):null].filter(C);return s.length===0?null:o("calcite-block",{class:h.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},s)}_renderEnabledToggle(){return o(k,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return o(k,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return o(k,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return o(k,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,i=({target:{value:b}})=>{this._layerListFilter=b===""?null:new RegExp(b,"i")},s=t.layerListViewModel.operationalItems.length>9?o("calcite-input",{class:h.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:i}):null,a=this._secondaryElementsDisabled,d=this.layerListOpen&&!a;return o("calcite-block",{class:h.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:d,onCalciteBlockToggle:b=>this.layerListOpen=b.target.open},s,this._renderToggleLayersButton(),o("calcite-list",{class:h.layerList,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){var M;const{view:e,visibleElements:t,snappingManager:i,snappingOptions:s,_openAndReady:a}=this,{gridEnabled:d,enabled:b}=s;a&&this._startLoadGrid();const f=(M=this._gridLoadTask)==null?void 0:M.value,E=f&&(e==null?void 0:e.type)==="2d"&&o(f,{snappingManager:i,snappingOptions:s,view:e,visibleElements:t.gridControlsElements});return o("calcite-block",{class:h.layerListBlock,collapsible:!0,disabled:!d||!b,heading:this.messages.gridOptionsHeading,key:"grid-block",open:a,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},E??o("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=te(async()=>(await p(async()=>{const{default:t}=await import("./GridControls-DTz2yj1S.js");return{default:t}},__vite__mapDeps([69,12,13,3,70,71,72,7,4,5,6,8,9,10,11,16,17,18,14,19,20,73,74,75,76,77,22,78,2,15,21,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234]),import.meta.url)).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(i=>{switch(t?$(i,t):null){case"children":{const s=i.children.filter(a=>$(a,t)!==!1);return this._renderLayerListItemGroup(i,s)}case"self":case null:return this._renderLayerListItemOrGroup(i);case!1:return $(i.parent,t)==="self"?this._renderLayerListItemOrGroup(i):null}}).toArray().filter(C)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,i=e?t.disableAllLayers:t.enableAllLayers;return o("calcite-button",{appearance:"transparent",class:h.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,i=e.title||t,s=()=>{this.viewModel.toggleSnappingForLayers([e.layer.id],e.enabled!=="enabled")};return o("calcite-list-item",{class:h.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:i,onCalciteListItemSelect:a=>{a.stopPropagation(),s()}},o("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:s}))}_renderLayerListItemGroup(e,t){const{children:i,title:s}=e,a=s||this.messages.untitledLayer,d=s&&s!==""?s:ee(),b=!!(t!=null&&t.length),f=t??i,E=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")};return o("calcite-list-item",{class:h.layerListGroup,key:d,label:a,open:b,onCalciteListItemSelect:M=>{M.stopPropagation(),E()}},o("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:E}),o("calcite-list",null,this._renderLayerListItemCollection(f)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};l([n()],r.prototype,"_defaultViewModel",void 0),l([n()],r.prototype,"_layerListFilter",void 0),l([n()],r.prototype,"_gridLoadTask",void 0),l([n()],r.prototype,"_openAndReady",null),l([n()],r.prototype,"label",null),l([n({type:Boolean,nonNullable:!0})],r.prototype,"layerListOpen",void 0),l([n({type:Boolean,nonNullable:!0})],r.prototype,"gridOptionsOpen",void 0),l([n(),V("esri/widgets/support/SnappingControls/t9n/SnappingControls")],r.prototype,"messages",void 0),l([n(),V("esri/t9n/common")],r.prototype,"messagesCommon",void 0),l([n()],r.prototype,"snappingOptions",null),l([n()],r.prototype,"snappingManager",void 0),l([n()],r.prototype,"view",null),l([n()],r.prototype,"viewModel",null),l([n({type:K,nonNullable:!0})],r.prototype,"visibleElements",void 0),l([n()],r.prototype,"_enabledToggleDisabled",null),l([n()],r.prototype,"_secondaryElementsDisabled",null),r=l([v("esri.widgets.support.SnappingControls")],r);const Ce=r;export{J as c,Oe as k,k as l,K as n,q as r,Ce as v};
