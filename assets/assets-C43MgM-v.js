const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./request-DduCY7-d.js","./subclass-BZA_h8Db.js","./IdentityManager-SGXUjqjl.js","./tslib.es6-B3Jf3DVX.js","./Evented-BHRw9x22.js","./Accessor-BLX9ikPh.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./jsxFactory-CJa39Fro.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./themeUtils-C3zvZbsE.js"])))=>i.map(i=>d[i]);
import{g as $e,d as B,as as K,at as He,au as Fe,av as le,aw as Oe,ax as W,a4 as be,b as T,n as Y,S as Be,a as ve,h as g,O as Je,j as b}from"./subclass-BZA_h8Db.js";import{_ as qe}from"./index-Bh2oEzTI.js";import{r as xe}from"./tslib.es6-B3Jf3DVX.js";import{d as x,aj as ze,E as Me,b as We,i as Se,m as Ge,c as Ke,u as Ce}from"./Accessor-BLX9ikPh.js";let Ve=class Te{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Te;return this._values.forEach((n,s)=>{t&&t.has(s)||r.set(s,$e(n.value),n.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const n=this._values.get(t);return r==null||(n==null?void 0:n.origin)===r?n==null?void 0:n.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??x.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(n=>{var s;return((s=this._values.get(n))==null?void 0:s.origin)===t})}set(t,r,n){if((n=this._normalizeOrigin(n))===x.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>n)return}this._values.set(t,new Qe(r,n))}delete(t,r){var n;(r=this._normalizeOrigin(r))!=null&&((n=this._values.get(t))==null?void 0:n.origin)!==r||this._values.delete(t)}has(t,r){var n;return(r=this._normalizeOrigin(r))!=null?((n=this._values.get(t))==null?void 0:n.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},n)=>t(r,n))}_normalizeOrigin(t){if(t!=null)return t===x.DEFAULTS?t:x.USER}},Qe=class{constructor(t,r){this.value=t,this.origin=r}};function Xe(e,t,r){t.keys().forEach(s=>{r.set(s,t.get(s),x.DEFAULTS)});const n=e.metadata;Object.keys(n).forEach(s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),x.DEFAULTS)})}function Ye(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const n=e.read.source;if(typeof n=="string"){if(n===t||n.includes(".")&&n.indexOf(t)===0&&le(n,r))return!0}else for(const s of n)if(s===t||s.includes(".")&&s.indexOf(t)===0&&le(s,r))return!0;return!1}function Ze(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function et(e,t,r,n,s){let o=K(t[r],s);Ze(o)&&(e[r]=!0);for(const a of Object.getOwnPropertyNames(t))o=K(t[a],s),Ye(o,r,n)&&(e[a]=!0)}function tt(e,t,r,n){const s=r.metadata,o=Fe(s[t],n),a=o==null?void 0:o.default;if(a===void 0)return;const i=typeof a=="function"?a.call(e,t,n):a;i!==void 0&&r.set(t,i)}const Ee={origin:"service"};function rt(e,t,r=Ee){if(!t||typeof t!="object")return;const n=B(e),s=n.metadata,o={};for(const a of Object.getOwnPropertyNames(t))et(o,s,a,t,r);n.setDefaultOrigin(r.origin);for(const a of Object.getOwnPropertyNames(o)){const i=K(s[a],r).read,l=i==null?void 0:i.source;let u;u=l&&typeof l=="string"?He(t,l):t[a],i!=null&&i.reader&&(u=i.reader.call(e,u,t,r)),u!==void 0&&n.set(a,u)}if(!r||!r.ignoreDefaults){n.setDefaultOrigin("defaults");for(const a of Object.getOwnPropertyNames(s))o[a]||tt(e,a,n,r)}n.setDefaultOrigin("user")}function fr(e,t,r,n=Ee){var o;const s={...n,messages:[]};r(s),(o=s.messages)==null||o.forEach(a=>{a.type!=="warning"||e.loaded?n!=null&&n.messages&&n.messages.push(a):e.loadWarnings.push(a)})}function nt(e,t,r,n,s){var a,i;const o={};return(i=(a=t.write)==null?void 0:a.writer)==null||i.call(e,n,o,r,s),o}function Ue(e,t,r,n,s,o){if(!(n!=null&&n.write))return!1;const a=be(e,r);if(!s&&n.write.overridePolicy){const i=n.write.overridePolicy.call(e,a,r,o??void 0);i!==void 0&&(s=i)}if(s||(s=n.write),!s||s.enabled===!1||s.layerContainerTypes&&(o!=null&&o.layerContainerType)&&!s.layerContainerTypes.includes(o.layerContainerType))return!1;if((a===null&&!s.allowNull&&!s.writerEnsuresNonNull||a===void 0)&&s.isRequired){const i=new T("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return i&&(o!=null&&o.messages)?o.messages.push(i):i&&!o&&Y.getLogger("esri.core.accessorSupport.write").error(i.name,i.message),!1}return!(a===void 0||a===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===x.DEFAULTS)&&st(e,r,o,n,a)||!s.ignoreOrigin&&(o!=null&&o.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Me(o.origin))}function st(e,t,r,n,s){const o=n.default;if(o===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(s);if(typeof o=="function"){if(Array.isArray(s)){const a=o.call(e,t,r??void 0);return Be(a,s)}return!1}return o===s}function dr(e,t,r,n){const s=B(e),o=s.metadata,a=Oe(o[t],n);return!!a&&Ue(e,s,t,a,r,n)}function ot(e,t,r){var o,a;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return W(t,e.toJSON(r));const n=B(e),s=n.metadata;for(const i in s){const l=Oe(s[i],r);if(!Ue(e,n,i,l,void 0,r))continue;const u=be(e,i),c=nt(e,l,l.write&&typeof l.write.target=="string"?l.write.target:i,u,r);Object.keys(c).length>0&&(t=W(t,c),(a=(o=r==null?void 0:r.resources)==null?void 0:o.pendingOperations)!=null&&a.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>W(t,c,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:i,oldOrigin:ze(n.store.originOf(i)),newOrigin:r.origin}))}return t}const at=e=>{let t=class extends e{constructor(...r){super(...r);const n=B(this),s=n.store,o=new Ve;n.store=o,Xe(n,s,o)}read(r,n){rt(this,r,n)}write(r,n){return ot(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return it.call(this,r,n)}};return t=xe([ve("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function it(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function ue(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let ce=class extends at(We){};ce=xe([ve("esri.core.JSONSupport")],ce);const lt=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ut={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function fe(e){const t=e==null?void 0:e.match(lt);if(!t)return null;const[,r,n,s]=t;if(!r)return null;let o=null,a=null,i=null;const{devext:l,qaext:u,www:c}=ut;if(n)if(o=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:i}=l);break;case"qa":({customBaseUrl:a,portalHostname:i}=u);break;default:return null}else({customBaseUrl:a,portalHostname:i}=c);else switch(r.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:i}=l);break;case"qaext":({customBaseUrl:a,portalHostname:i}=u);break;case"www":({customBaseUrl:a,portalHostname:i}=c);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:i,urlKey:o}}function ct(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function pr(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):n.test(e)&&(e=e.replace(n,"https://qaext.arcgis.com")),e}function ft(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}function dt(e){const t=new Uint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return btoa(r)}const ht=()=>Y.getLogger("esri.core.urlUtils"),U=g.request,de="esri/config: esriConfig.request.proxyUrl is not set.",Le=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ke=/^\s*http:/i,pt=/^\s*https:/i,mt=/^\s*file:/i,gt=/:\d+$/,yt=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,wt=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),$t=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");class C{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(wt);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match($t),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const R={},Ot=new C(g.applicationUrl);let h=Ot;const bt=vt();let Z=bt;const Ae=()=>h,mr=()=>Z;function vt(){const e=h.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${h.scheme}://${h.host}${h.port!=null?`:${h.port}`:""}`}${t}`}function S(e){if(!e)return null;const t={path:null,query:null},r=new C(e),n=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,n),t.query=ee(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function ee(e){const t=e.split("&"),r={};for(const n of t){if(!n)continue;const s=n.indexOf("=");let o,a;s<0?(o=decodeURIComponent(n),a=""):(o=decodeURIComponent(n.slice(0,s)),a=decodeURIComponent(n.slice(s+1)));let i=r[o];typeof i=="string"&&(i=r[o]=[i]),Array.isArray(i)?i.push(a):r[o]=a}return r}function A(e,t){return e?Object.keys(e).map(r=>{const n=e[r];if(n==null)return"";const s=encodeURIComponent(r)+"=",o=t==null?void 0:t[r];return o?s+encodeURIComponent(o(n)):Array.isArray(n)?n.map(a=>ue(a)?s+encodeURIComponent(JSON.stringify(a)):s+encodeURIComponent(a)).join("&"):ue(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n)}).filter(r=>r).join("&"):""}function Pe(e=!1){let t,r=U.proxyUrl;if(typeof e=="string"){t=Et(e);const n=J(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw ht().warn(de),new T("urlUtils:proxy-not-set",de);return t&&V()&&(r=ie(r)),S(r)}function gr(e,t=!1){const r=J(e);let n,s;if(r){const o=te(r.proxyUrl);n=o.path,s=o.query?ee(o.query):null}else if(t){const o=Pe(e);n=o.path,s=o.query}if(n){const o=S(e);e=n+"?"+o.path;const a=A({...s,...o.query});a&&(e=`${e}?${a}`)}return e}const L={path:"",query:""};function te(e){const t=e.indexOf("?");return t!==-1?(L.path=e.slice(0,t),L.query=e.slice(t+1)):(L.path=e,L.query=null),L}function _e(e){return e=(e=I(e=Pt(e=te(e).path),!0)).toLowerCase()}function qt(e){const t={proxyUrl:e.proxyUrl,urlPrefix:_e(e.urlPrefix)},r=U.proxyRules,n=t.urlPrefix;let s=r.length;for(let o=0;o<r.length;o++){const a=r[o].urlPrefix;if(n.indexOf(a)===0){if(n.length===a.length)return-1;s=o;break}a.indexOf(n)===0&&(s=o+1)}return r.splice(s,0,t),s}function J(e){const t=U.proxyRules,r=_e(e);for(let n=0;n<t.length;n++)if(r.indexOf(t[n].urlPrefix)===0)return t[n]}function yr(e,t){if(!e||!t)return!1;e=j(e),t=j(t);const r=fe(e),n=fe(t);return r!=null&&n!=null?r.portalHostname===n.portalHostname:r==null&&n==null&&P(e,t,!0)}function wr(e,t){return e=j(e),t=j(t),I(e)===I(t)}function j(e){const t=(e=k(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function he(e,t=U.interceptors){const r=n=>n==null||n instanceof RegExp&&n.test(e)||typeof n=="string"&&e.startsWith(n);if(t){for(const n of t)if(Array.isArray(n.urls)){if(n.urls.some(r))return n}else if(r(n.urls))return n}return null}function P(e,t,r=!1){if(!e||!t)return!1;const n=Q(e),s=Q(t);return!(!r&&n.scheme!==s.scheme)&&n.host!=null&&s.host!=null&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function re(e){if(typeof e=="string"){if(!_(e))return!0;e=Q(e)}if(P(e,h))return!0;const t=U.trustedServers||[];for(let r=0;r<t.length;r++){const n=xt(t[r]);for(let s=0;s<n.length;s++)if(P(e,n[s]))return!0}return!1}function xt(e){return R[e]||(ae(e)||v(e)?R[e]=[new C(ne(e))]:R[e]=[new C(`http://${e}`),new C(`https://${e}`)]),R[e]}function ne(e,t=Z,r){return v(e)?r!=null&&r.preserveProtocolRelative?e:h.scheme==="http"&&h.authority===$(e).slice(2)?`http:${e}`:`https:${e}`:ae(e)?e:Ne(e[0]==="/"?At(t):t,e)}function $r(e,t=Z,r){if(e==null||!_(e))return e;const n=k(e),s=n.toLowerCase(),o=k(t).toLowerCase().replace(/\/+$/,""),a=r?k(r).toLowerCase().replace(/\/+$/,""):null;if(a&&o.indexOf(a)!==0)return e;const i=(y,f,d)=>(d=y.indexOf(f,d))===-1?y.length:d;let l=i(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===o.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=i(s,"/",l+1);if(u===-1||a&&u<a.length)return e;e=n.slice(u);const c=o.slice(u-1).replaceAll(/[^/]+/g,"").length;if(c>0)for(let y=0;y<c;y++)e=`../${e}`;else e=`./${e}`;return e}function k(e){return e=Rt(e=Nt(e=_t(e=ne(e=e.trim()))))}function Ne(...e){const t=e.filter(Je);if(!(t!=null&&t.length))return;const r=[];if(_(t[0])){const s=t[0],o=s.indexOf("//");o!==-1&&(r.push(s.slice(0,o+1)),Lt(t[0])&&(r[0]+="/"),t[0]=s.slice(o+2))}else t[0][0]==="/"&&r.push("");const n=t.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<n.length;s++){const o=n[s];o===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!o&&s===n.length-1||o&&(o!=="."||r.length===0))&&r.push(o)}return r.join("/")}function $(e,t=!1){if(e==null||se(e)||oe(e))return null;let r=e.indexOf("://");if(r===-1&&v(e))r=2;else{if(r===-1)return null;r+=3}const n=e.indexOf("/",r);return n!==-1&&(e=e.slice(0,n)),t&&(e=I(e,!0)),e}function _(e){return v(e)||ae(e)}function se(e){return e!=null&&e.slice(0,5)==="blob:"}function oe(e){return e!=null&&e.slice(0,5)==="data:"}function St(e){const t=D(e);return t!=null&&t.isBase64?ft(t.data):null}function Or(e){return dt(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Ct=/^data:(.*?)(;base64)?,(.*)$/;function D(e){const t=e.match(Ct);if(!t)return null;const[,r,n,s]=t;return{mediaType:r,isBase64:!!n,data:s}}function br(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function vr(e){return(await fetch(e)).blob()}function qr(e){const t=St(e);if(!t)return null;const r=D(e);return new Blob([t],{type:r.mediaType})}function xr(e,t){Tt(e,t)}function Tt(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const n=URL.createObjectURL(e);return r.download=t,r.href=n,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),!0}function v(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function ae(e){return e!=null&&Le.test(e)}function Et(e){return e!=null&&pt.test(e)||h.scheme==="https"&&v(e)}function Ut(e){return e!=null&&ke.test(e)||h.scheme==="http"&&v(e)}function Lt(e){return e!=null&&mt.test(e)}function ie(e){return v(e)?`https:${e}`:e.replace(ke,"https:")}function kt(){return h.scheme==="http"}function V(){return h.scheme==="https"}function I(e,t=!1){return v(e)?e.slice(2):(e=e.replace(Le,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function At(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Sr(e){let t=0;if(_(e)){const n=e.indexOf("//");n!==-1&&(t=n+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function Cr(e,t){if(!e)return"";const r=S(e).path.replace(/\/+$/,""),n=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return n;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return n.replace(s,"")}function Pt(e){return e.endsWith("/")?e:`${e}/`}function Tr(e){return e.replace(/\/+$/,"")}function _t(e){if(/^https?:\/\//i.test(e)){const t=te(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Nt(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Rt(e){const t=U.httpsDomains;if(!Ut(e))return e;const r=e.indexOf("/",7);let n;if(n=r===-1?e:e.slice(0,r),n=n.toLowerCase().slice(7),gt.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return kt()&&n===h.authority&&!yt.test(e)||(V()&&n===h.authority||t&&t.some(s=>n===s||n.endsWith(`.${s}`))||V()&&!J(e))&&(e=ie(e)),e}function Er(e,t,r){if(!(t&&r&&e&&_(e)))return e;const n=e.indexOf("//"),s=e.indexOf("/",n+2),o=e.indexOf(":",n+2),a=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(n+2,a).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(a)}`}function Q(e){return typeof e=="string"?new C(ne(e)):(e.scheme||(e.scheme=h.scheme),e)}function Ur(e){return Dt.test(e)}function Lr(e,t){const r=S(e),n=Object.keys(r.query||{});return n.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),r.path}function jt(e,t,r){const n=S(e),s=n.query||{};return s[t]=String(r),`${n.path}?${A(s)}`}function G(e,t){if(!t)return e;const r=S(e),n=r.query||{};for(const[o,a]of Object.entries(t))a!=null&&(n[o]=a);const s=A(n);return s?`${r.path}?${s}`:r.path}function kr(e){if(e==null)return null;const t=e.match(Re);return t?t[2]:null}function Ar(e){if(e==null)return null;const t=e.match(Re);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Pr(e){return typeof e=="string"?D(e)??{data:e}:new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(D(n.result)),n.onerror=s=>r(s)})}const Re=/([^.]*)\.([^/]*)$/,Dt=/(^data:image\/svg|\.svg$)/i;Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const It="4.31";let p,Ht=It;Ht="4.31.0";function _r(e){p=e}function Nr(e){const t=p==null?void 0:p.findCredential(e);return t!=null&&t.token?jt(e,"token",t.token):e}b("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),b("host-webworker");const Ft=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Bt(e){const t=$(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Ft.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Jt(e,t){return!(!t&&!g.apiKey||!Bt(e))}function zt(e,t,r=!1,n){return new Promise((s,o)=>{if(Se(n))return void o(pe());let a=()=>{u(),o(new Error(`Unable to load ${t}`))},i=()=>{const c=e;u(),s(c)},l=()=>{if(!e)return;const c=e;u(),c.src="",o(pe())};const u=()=>{b("esri-image-decode")||(e.removeEventListener("error",a),e.removeEventListener("load",i)),a=null,i=null,e=null,n!=null&&n.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};n!=null&&n.addEventListener("abort",l),b("esri-image-decode")?e.decode().then(i,a):(e.addEventListener("error",a),e.addEventListener("load",i))})}function pe(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const je="Timeout exceeded";function Mt(){return new Error(je)}function Rr(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===je}function Wt(e){g.request.crossOriginNoCorsDomains||(g.request.crossOriginNoCorsDomains={});const t=g.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[$(r)??""]=0:(t[$("http://"+r)??""]=0,t[$("https://"+r)??""]=0)}function Gt(e){const t=g.request.crossOriginNoCorsDomains;if(t){let r=$(e);if(r)return r=r.toLowerCase(),!P(r,Ae())&&t[r]<Date.now()-36e5}return!1}async function Kt(e){var s;const t=S(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=g.request.crossOriginNoCorsDomains,n=$(e);r&&n&&(r[n.toLowerCase()]=Date.now())}async function w(e,t){var f;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=ee(t.query.toString().replaceAll("+"," ")));const r=oe(e),n=se(e);n||r||(e=k(e));const s={url:e,requestOptions:{...t}},o=d=>({data:d,getAllHeaders:E,getHeader:E,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),a=he(e,m.internalInterceptors);if(a){const d=await ge(a,s);if(d!=null)return o(d)}let i=he(e);if(i){const d=await ge(i,s);if(d!=null)return o(d);i.after||i.error||(i=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(b("host-webworker")||b("host-node")))throw O("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw O("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||n)throw O("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Zt(),H)return H.execute(e,t);const l=new AbortController,u=Ge(t,()=>l.abort()),c={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:i,params:s,redoRequest:!1,useIdentity:m.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},y=await nr(c).finally(()=>u==null?void 0:u.remove());return(f=i==null?void 0:i.after)==null||f.call(i,y),y}let H;const m=g.request,De="FormData"in globalThis,Vt=new Set([499,498,403,401]),Qt=new Set(["COM_0056","COM_0057","SB_0008"]),Xt=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],E=()=>null,F=Symbol();function Yt(e){const t=$(e);t&&!w._corsServers.includes(t)&&w._corsServers.push(t)}function me(e){const t=$(e);return!t||t.endsWith(".arcgis.com")||w._corsServers.includes(t)||re(t)}function O(e,t,r,n){let s="Error";const o={url:r.url,requestOptions:r.requestOptions,getAllHeaders:E,getHeader:E,ssl:!1};if(t instanceof T)return t.details?(t.details=$e(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=o,t;if(t){const a=n&&(()=>Array.from(n.headers)),i=n&&(c=>n.headers.get(c)),l=n==null?void 0:n.status,u=t.message;u&&(s=u),a&&i&&(o.getAllHeaders=a,o.getHeader=i),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=F in t?t[F]:t}return Ke(t)?Ce():new T(e,s,o)}async function Zt(){b("host-webworker")&&!H&&(H=await qe(()=>import("./request-DduCY7-d.js"),__vite__mapDeps([0,1]),import.meta.url))}async function X(){p||await qe(()=>import("./IdentityManager-SGXUjqjl.js"),__vite__mapDeps([2,3,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url)}async function er(e){var i;const t=e.params.url,r=e.params.requestOptions,n=e.controller.signal,s=r.body;let o=null,a=null;if(De&&"HTMLFormElement"in globalThis&&(s instanceof FormData?o=s:s instanceof HTMLFormElement&&(o=new FormData(s))),typeof s=="string"&&(a=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:m.priority,redirect:"follow",signal:n},(o||a)&&(e.fetchOptions.body=o||a),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(i=r.query)!=null&&i.token||o!=null&&o.get("token")),!e.hasToken&&Jt(t)&&(r.query||(r.query={}),r.query.token=g.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Ie(t)&&!Se(n)){let l;r.authMode==="immediate"?(await X(),l=await p.getCredential(t,{signal:n}),e.credential=l):r.authMode==="no-prompt"?(await X(),l=await p.getCredential(t,{prompt:!1,signal:n}).catch(()=>{}),e.credential=l):p&&(l=p.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function Ie(e){return Xt.some(t=>t.test(e))}async function tr(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions??{},s=se(t)||oe(t),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:m.timeout;let i=!1;if(!s){e.useSSL&&(t=ie(t));let f={...r.query};e.credentialToken&&(f.token=e.credentialToken);let d=A(f);b("esri-url-encodes-apostrophe")&&(d=d.replaceAll("'","%27"));const z=t.length+1+d.length;let M;i=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||z>m.maxUrlLength;const N=r.useProxy||!!J(t);if(N){const q=Pe(t);M=q.path,!i&&M.length+1+z>m.maxUrlLength&&(i=!0),q.query&&(f={...q.query,...f})}if(n.method==="HEAD"&&(i||N)){if(i)throw z>m.maxUrlLength?O("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):O("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(N)throw O("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(i?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=G(t,f):(n.body=A(f),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=G(t,f),N&&(e.useProxy=!0,t=`${M}?${t}`),f.token&&De&&n.body instanceof FormData&&!ct(t)&&n.body.set("token",f.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!P(t,Ae())){if(re(t))e.withCredentials=!0;else if(p){const q=p.findServerInfo(t);q!=null&&q.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(n.credentials="include",Gt(t)&&await Kt(i?G(t,f):t))}let l,u,c=0,y=!1;a>0&&(c=setTimeout(()=>{y=!0,e.controller.abort()},a));try{if(r.responseType==="native-request-init")u=n,u.url=t,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||i||rr(r.headers)||!s&&!e.useProxy&&m.proxyUrl&&!me(t)){if(w._beforeFetch&&await w._beforeFetch(t,n),l=await fetch(t,n),w._afterFetch&&await w._afterFetch(l),e.useProxy||Yt(t),r.responseType==="native")u=l;else if(n.method!=="HEAD")if(l.ok){switch(o){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=ye(u,"application/xml");break;case"document":u=ye(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[o==="blob"?"size":"byteLength"]<=750)try{const d=await new Response(u).json();d.error&&(u=d)}catch{}}o==="image"&&u instanceof Blob&&(u=await we(URL.createObjectURL(u),e,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await we(t,e)}catch(f){if(f.name==="AbortError")throw y?Mt():Ce("Request canceled");if(!(!l&&f instanceof TypeError&&m.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||me(t))throw f;e.redoRequest=!0,qt({proxyUrl:m.proxyUrl,urlPrefix:$(t)??""})}finally{c&&clearTimeout(c)}return[l,u]}async function ge(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(s){r=O("request:interceptor",s,t)}if((n instanceof Error||n instanceof T)&&(r=O("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}function rr(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function ye(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function nr(e){var o,a;let t,r;await er(e);try{do[t,r]=await tr(e);while(!await sr(e,t,r))}catch(i){const l=O("request:server",i,e.params,t);throw l.details.ssl=e.useSSL,(o=e.interceptor)!=null&&o.error&&e.interceptor.error(l),l}const n=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!e.hasToken&&!e.credentialToken&&((a=r.user)!=null&&a.username)&&!re(n)){const i=$(n,!0);i&&m.trustedServers.push(i)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Wt(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&p){const i=p.findServerInfo(s.server);let l=i==null?void 0:i.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=p.findCredential(l,s.userId);u&&p._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):E,getHeader:t?i=>t.headers.get(i):E,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function sr(e,t,r){var u;if(e.redoRequest)return e.redoRequest=!1,!1;const n=e.params.requestOptions;if(!t||n.responseType==="native"||n.responseType==="native-request-init")return!0;let s,o;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[F]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[F]=r,s;let a,i=null;s&&(o=Number(s.code),i=s.hasOwnProperty("subcode")?Number(s.subcode):null,a=s.messageCode,a=a==null?void 0:a.toUpperCase());const l=n.authMode;if(o===403&&(i===4||(u=s.message)!=null&&u.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||o===498)&&o!==void 0&&Vt.has(o)&&!Ie(e.params.url)&&(o!==403||(!a||!Qt.has(a))&&(i==null||i===2&&e.credentialToken))){await X();try{const c=await p.getCredential(e.params.url,{error:O("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=c,e.credentialToken=c.token,e.useSSL=e.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=c}}if(s)throw s;return!0}function we(e,t,r=!1){const n=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=m.priority,s.src=e,zt(s,e,r,n)}w._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],w._beforeFetch=void 0,w._afterFetch=void 0;function jr(e,t){return w(or(e),t)}function or(e){if(!g.assetsPath)throw Y.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new T("assets:path-not-set","config.assetsPath is not set");return Ne(g.assetsPath,e)}export{ie as $,Er as A,rt as B,Ae as C,ot as D,G as E,P as F,$r as G,kr as H,S as I,St as J,k as K,Or as L,ct as M,wr as N,J as O,_r as P,qr as Q,Sr as R,Lr as S,Ar as T,w as U,Ne as V,yr as W,$ as X,_ as Y,se as Z,ne as _,ue as a,mr as a0,fe as a1,Rr as a2,Ht as a3,he as a4,jt as a5,zt as a6,lt as a7,Ur as a8,br as a9,xr as aa,jr as ab,ft as b,or as c,Pr as d,Et as e,ce as f,gr as g,dr as h,p as i,Tr as j,fr as k,Nr as l,It as m,Jt as n,D as o,ee as p,Cr as q,pr as r,vr as s,oe as t,at as u,A as v,Pt as w,C as x,v as y,Xe as z};
