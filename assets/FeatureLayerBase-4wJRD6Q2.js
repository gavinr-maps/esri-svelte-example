import{bb as v,d as e,y as t,ds as g,f as h,aU as m,h8 as x,h9 as T,aY as j,bc as E,aZ as a,aS as O,aV as F,aF as D,ge as R,V as I,ay as b,gg as M,s as U,gh as $}from"./index-B1qcMJFy.js";import{f as A,a as B,S as C,T as Q,d as V}from"./commonProperties-DknRhH4V.js";import{f as k,U as Z,R as G,M as N,C as P}from"./featureLayerUtils-CSLwh38G.js";import{p as z}from"./LayerFloorInfo-B7VXM-7y.js";import{a as J}from"./serviceCapabilitiesUtils-BdZiBH1m.js";let u=class extends v(m){constructor(i){super(i),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([t()],u.prototype,"creatorField",void 0),e([t()],u.prototype,"creationDateField",void 0),e([t()],u.prototype,"editorField",void 0),e([t()],u.prototype,"editDateField",void 0),e([t()],u.prototype,"realm",void 0),e([t(g("dateFieldsTimeReference",!0))],u.prototype,"timeZone",void 0),u=e([h("esri.layers.support.EditFieldsInfo")],u);const L=u;let d=class extends v(m){constructor(i){super(i)}};e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"name",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"fields",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"isAscending",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"indexType",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"isUnique",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"description",void 0),d=e([h("esri.layers.support.FeatureIndex")],d);let c=class extends v(m){constructor(i){super(i),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([t({type:String,json:{read:{source:"shapeAreaFieldName"}}})],c.prototype,"shapeAreaField",void 0),e([t({type:String,json:{read:{source:"shapeLengthFieldName"}}})],c.prototype,"shapeLengthField",void 0),e([t({type:String,json:{read:n=>x.read(n)||T.read(n)}})],c.prototype,"units",void 0),c=e([h("esri.layers.support.GeometryFieldsInfo")],c);const H=c,S=new j({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),w=new j({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let p=class extends v(m){constructor(n){super(n),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};e([t({json:{read:S.read,write:S.write}})],p.prototype,"cardinality",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"composite",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"id",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"keyField",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"keyFieldInRelationshipTable",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"name",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"relatedTableId",void 0),e([t({json:{read:!0,write:!0}})],p.prototype,"relationshipTableId",void 0),e([t({json:{read:w.read,write:w.write}})],p.prototype,"role",void 0),p=e([h("esri.layers.support.Relationship")],p);const q=p;let y=class extends v(m){constructor(n){super(n),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(n){if(!n)return null;const i={};for(const r of Object.keys(n))i[r]=E(n[r]);return i}writeDomains(n,i){var o;if(!n)return;const r={};for(const s of Object.keys(n))n[s]&&(r[s]=(o=n[s])==null?void 0:o.toJSON());i.domains=r}};e([t({type:Number,json:{write:!0}})],y.prototype,"code",void 0),e([t({type:Object,json:{write:!0}})],y.prototype,"defaultValues",void 0),e([t({json:{write:!0}})],y.prototype,"domains",void 0),e([a("domains")],y.prototype,"readDomains",null),e([O("domains")],y.prototype,"writeDomains",null),e([t({type:String,json:{write:!0}})],y.prototype,"name",void 0),y=e([h("esri.layers.support.Subtype")],y);const W=y,re=n=>{let i=class extends n{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(I.ofType(d)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=b.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:o,operations:s,editing:l}=r;if(!o.supportsQueryByOthers||!o.supportsQueryByAnonymous||s.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}return this.userHasUpdateItemPrivileges?Z(this)?"load":this.hasUpdateItemRestrictions?r.operations.supportsQuery?"editing":"load":null:this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions?"editing":null}readCapabilitiesFromService(r,o){return J(o,this.url)}readEditingInfo(r,o){const{editingInfo:s}=o;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){var f;const r=this.capabilities;if(!r)return null;const o=F(r),{operations:s,editing:l}=o;return(f=this.sourceJSON)!=null&&f.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),o):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=l.supportsDeleteByOthers=l.supportsGeometryUpdate=l.supportsUpdateByOthers=!0,o):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=l.supportsGeometryUpdate=!0),o)}readGlobalIdFieldFromService(r,o){return G(o)}get hasFullEditingRestrictions(){var l;const r=this.capabilities;if(!r||(l=this.sourceJSON)!=null&&l.isMultiServicesView)return!1;const{operations:o,editing:s}=r;return o.supportsEditing&&!(o.supportsAdd&&o.supportsDelete&&o.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var l;const r=this.capabilities;if(!r)return!1;const{operations:o,editing:s}=r;return(l=this.sourceJSON)!=null&&l.isMultiServicesView?!o.supportsQuery:!(o.supportsAdd&&o.supportsDelete&&o.supportsEditing&&o.supportsQuery&&o.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,o){return o.type==="Table"}readMaxScale(r,o){return o.effectiveMaxScale||r||0}readMinScale(r,o){return o.effectiveMinScale||r||0}readObjectIdFieldFromService(r,o){return N(o)}readServiceDefinitionExpression(r,o){return o.definitionQuery||o.definitionExpression}set url(r){const o=M({layer:this,url:r,nonStandardUrlAllowed:!0,logger:U.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}writeUrl(r,o,s,l){$(this,r,null,o,l)}readVersion(r,o){return P(o)}};return e([t({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),e([t({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),e([t({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),e([a("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),e([t(g("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),e([t({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),e([t({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),e([t({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),e([t({readOnly:!0,type:L})],i.prototype,"editFieldsInfo",void 0),e([t({readOnly:!0})],i.prototype,"editingInfo",void 0),e([a("editingInfo")],i.prototype,"readEditingInfo",null),e([t({readOnly:!0})],i.prototype,"effectiveCapabilities",null),e([t((()=>{const r=F(A),o=r.json.origins;return o["web-map"]={read:!1,write:!1},o["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),e([t({type:z,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:B}}}}})],i.prototype,"floorInfo",void 0),e([t({type:D,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),e([t()],i.prototype,"gdbVersion",void 0),e([t({readOnly:!0,type:H,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),e([t({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:k.read}}}})],i.prototype,"geometryType",void 0),e([t({type:String})],i.prototype,"globalIdField",void 0),e([a("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),e([t({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),e([t({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),e([t({readOnly:!0,type:R})],i.prototype,"heightModelInfo",void 0),e([t({type:Date})],i.prototype,"historicMoment",void 0),e([t({type:I.ofType(d),readOnly:!0})],i.prototype,"indexes",void 0),e([t({readOnly:!0})],i.prototype,"isTable",void 0),e([a("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),e([t({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),e([t(C)],i.prototype,"maxScale",void 0),e([a("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),e([t(Q)],i.prototype,"minScale",void 0),e([a("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),e([t({type:String})],i.prototype,"objectIdField",void 0),e([a("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),e([t(g("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),e([t({type:[q],readOnly:!0})],i.prototype,"relationships",void 0),e([t({type:Boolean})],i.prototype,"returnM",void 0),e([t({type:Boolean})],i.prototype,"returnZ",void 0),e([t({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),e([t({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),e([a("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),e([t({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),e([t()],i.prototype,"sourceJSON",void 0),e([t({type:b,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),e([t({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),e([t({type:[W],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),e([t({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),e([t(V)],i.prototype,"url",null),e([O("url")],i.prototype,"writeUrl",null),e([t({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),e([a("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),i=e([h("esri.layers.mixins.FeatureLayerBase")],i),i};export{re as D};
