const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./request-B7tfvYKq.js","./Accessor-BmwT4B0c.js","./IdentityManager-f7YrxTTI.js","./Evented-Dw4_VOGn.js","./index-4eY77cms.js","./index-Cx51aysm.css","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./jsxFactory-Cnml7uXM.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./themeUtils-C3zvZbsE.js","./substitute-CvdjmBYq.js","./JSONSupport-DcrLLGjL.js","./QueueProcessor-BzFcKfHF.js","./Queue-BQesTh_6.js","./ReactiveMap-BHFEHYMj.js","./signal-CySMLEX9.js"])))=>i.map(i=>d[i]);
import{_ as Ye,O as y,G as Qe,s as E,B as Se,M as O,H as te,a4 as Xe,c as Ze,a6 as re,E as et,o as tt,L as rt,aa as Ce}from"./Accessor-BmwT4B0c.js";import{_ as ne}from"./index-4eY77cms.js";import{S as he}from"./JSONSupport-DcrLLGjL.js";let nt=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=st(t),this.apiValues=de(this._apiToJSON),this.jsonValues=de(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,o)=>{const i=this.toJSON(n);i!==void 0&&Ye(o,i,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function st(e){const t={};for(const r in e)t[e[r]]=r;return t}function de(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function vr(){return function(e,t){return new nt(e,{ignoreUnknown:!0,...t})}}const ot=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,at={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function me(e){const t=e==null?void 0:e.match(ot);if(!t)return null;const[,r,n,s]=t;if(!r)return null;let o=null,i=null,a=null;const{devext:l,qaext:u,www:c}=at;if(n)if(o=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:i,portalHostname:a}=l);break;case"qa":({customBaseUrl:i,portalHostname:a}=u);break;default:return null}else({customBaseUrl:i,portalHostname:a}=c);else switch(r.toLowerCase()){case"devext":({customBaseUrl:i,portalHostname:a}=l);break;case"qaext":({customBaseUrl:i,portalHostname:a}=u);break;case"www":({customBaseUrl:i,portalHostname:a}=c);break;default:return null}return{customBaseUrl:i,isPortal:!1,portalHostname:a,urlKey:o}}function it(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Ue(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):n.test(e)&&(e=e.replace(n,"https://qaext.arcgis.com")),e}function lt(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}function ut(e){const t=new Uint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return btoa(r)}const ct=()=>Se.getLogger("esri.core.urlUtils"),R=y.request,ge="esri/config: esriConfig.request.proxyUrl is not set.",ke=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Le=/^\s*http:/i,ft=/^\s*https:/i,pt=/^\s*file:/i,ht=/:\d+$/,dt=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,mt=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),gt=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let U=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(mt);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(gt),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const N={},yt=new U(y.applicationUrl);let h=yt;const wt=$t();let se=wt;const oe=()=>h,Or=()=>se;function $t(){const e=h.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${h.scheme}://${h.host}${h.port!=null?`:${h.port}`:""}`}${t}`}function x(e){if(!e)return null;const t={path:null,query:null},r=new U(e),n=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,n),t.query=ae(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function ae(e){const t=e.split("&"),r={};for(const n of t){if(!n)continue;const s=n.indexOf("=");let o,i;s<0?(o=decodeURIComponent(n),i=""):(o=decodeURIComponent(n.slice(0,s)),i=decodeURIComponent(n.slice(s+1)));let a=r[o];typeof a=="string"&&(a=r[o]=[a]),Array.isArray(a)?a.push(i):r[o]=i}return r}function I(e,t){return e?Object.keys(e).map(r=>{const n=e[r];if(n==null)return"";const s=encodeURIComponent(r)+"=";return Array.isArray(n)?n.map(o=>he.isSerializable(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):he.isSerializable(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n)}).filter(r=>r).join("&"):""}function Te(e=!1){let t,r=R.proxyUrl;if(typeof e=="string"){t=St(e);const n=J(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw ct().warn(ge),new E("urlUtils:proxy-not-set",ge);return t&&G()&&(r=pe(r)),x(r)}function xr(e,t=!1){const r=J(e);let n,s;if(r){const o=ie(r.proxyUrl);n=o.path,s=o.query?ae(o.query):null}else if(t){const o=Te(e);n=o.path,s=o.query}if(n){const o=x(e);e=n+"?"+o.path;const i=I({...s,...o.query});i&&(e=`${e}?${i}`)}return e}const _={path:"",query:""};function ie(e){const t=e.indexOf("?");return t!==-1?(_.path=e.slice(0,t),_.query=e.slice(t+1)):(_.path=e,_.query=null),_}function Re(e){return e=(e=B(e=Tt(e=ie(e).path),!0)).toLowerCase()}function vt(e){const t={proxyUrl:e.proxyUrl,urlPrefix:Re(e.urlPrefix)},r=R.proxyRules,n=t.urlPrefix;let s=r.length;for(let o=0;o<r.length;o++){const i=r[o].urlPrefix;if(n.indexOf(i)===0){if(n.length===i.length)return-1;s=o;break}i.indexOf(n)===0&&(s=o+1)}return r.splice(s,0,t),s}function J(e){const t=R.proxyRules,r=Re(e);for(let n=0;n<t.length;n++)if(r.indexOf(t[n].urlPrefix)===0)return t[n]}function qr(e,t){if(!e||!t)return!1;e=D(e),t=D(t);const r=me(e),n=me(t);return r!=null&&n!=null?r.portalHostname===n.portalHostname:r==null&&n==null&&L(e,t,!0)}function Sr(e,t){return e=D(e),t=D(t),B(e)===B(t)}function D(e){const t=(e=k(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function ye(e,t=R.interceptors){const r=n=>n==null||n instanceof RegExp&&n.test(e)||typeof n=="string"&&e.startsWith(n);if(t){for(const n of t)if(Array.isArray(n.urls)){if(n.urls.some(r))return n}else if(r(n.urls))return n}return null}function L(e,t,r=!1){if(!e||!t)return!1;const n=Q(e),s=Q(t);return!(!r&&n.scheme!==s.scheme)&&n.host!=null&&s.host!=null&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function le(e){if(typeof e=="string"){if(!q(e))return!0;e=Q(e)}if(L(e,h))return!0;const t=R.trustedServers||[];for(let r=0;r<t.length;r++){const n=bt(t[r]);for(let s=0;s<n.length;s++)if(L(e,n[s]))return!0}return!1}function bt(e){return N[e]||(fe(e)||S(e)?N[e]=[new U(P(e))]:N[e]=[new U(`http://${e}`),new U(`https://${e}`)]),N[e]}function P(e,t=se,r){return S(e)?r!=null&&r.preserveProtocolRelative?e:h.scheme==="http"&&h.authority===m(e).slice(2)?`http:${e}`:`https:${e}`:fe(e)?e:ue(e[0]==="/"?Lt(t):t,e)}function Pe(e,t=se,r){if(e==null||!q(e))return e;const n=k(e),s=n.toLowerCase(),o=k(t).toLowerCase().replace(/\/+$/,""),i=r?k(r).toLowerCase().replace(/\/+$/,""):null;if(i&&o.indexOf(i)!==0)return e;const a=(b,f,d)=>(d=b.indexOf(f,d))===-1?b.length:d;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===o.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(u===-1||i&&u<i.length)return e;e=n.slice(u);const c=o.slice(u-1).replaceAll(/[^/]+/g,"").length;if(c>0)for(let b=0;b<c;b++)e=`../${e}`;else e=`./${e}`;return e}function k(e){return e=_t(e=Pt(e=Rt(e=P(e=e.trim()))))}function ue(...e){const t=e.filter(Qe);if(!(t!=null&&t.length))return;const r=[];if(q(t[0])){const s=t[0],o=s.indexOf("//");o!==-1&&(r.push(s.slice(0,o+1)),Ut(t[0])&&(r[0]+="/"),t[0]=s.slice(o+2))}else t[0][0]==="/"&&r.push("");const n=t.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<n.length;s++){const o=n[s];o===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!o&&s===n.length-1||o&&(o!=="."||r.length===0))&&r.push(o)}return r.join("/")}function m(e,t=!1){if(e==null||ce(e)||z(e))return null;let r=e.indexOf("://");if(r===-1&&S(e))r=2;else{if(r===-1)return null;r+=3}const n=e.indexOf("/",r);return n!==-1&&(e=e.slice(0,n)),t&&(e=B(e,!0)),e}function q(e){return S(e)||fe(e)}function ce(e){return e!=null&&e.slice(0,5)==="blob:"}function z(e){return e!=null&&e.slice(0,5)==="data:"}function Ot(e){const t=H(e);return t!=null&&t.isBase64?lt(t.data):null}function Cr(e){return ut(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const xt=/^data:(.*?)(;base64)?,(.*)$/;function H(e){const t=e.match(xt);if(!t)return null;const[,r,n,s]=t;return{mediaType:r,isBase64:!!n,data:s}}function Ur(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function kr(e){return(await fetch(e)).blob()}function Lr(e){const t=Ot(e);if(!t)return null;const r=H(e);return new Blob([t],{type:r.mediaType})}function Tr(e,t){qt(e,t)}function qt(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const n=URL.createObjectURL(e);return r.download=t,r.href=n,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),!0}function S(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function fe(e){return e!=null&&ke.test(e)}function St(e){return e!=null&&ft.test(e)||h.scheme==="https"&&S(e)}function Ct(e){return e!=null&&Le.test(e)||h.scheme==="http"&&S(e)}function Ut(e){return e!=null&&pt.test(e)}function pe(e){return S(e)?`https:${e}`:e.replace(Le,"https:")}function kt(){return h.scheme==="http"}function G(){return h.scheme==="https"}function B(e,t=!1){return S(e)?e.slice(2):(e=e.replace(ke,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Lt(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Rr(e){let t=0;if(q(e)){const n=e.indexOf("//");n!==-1&&(t=n+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function Pr(e,t){if(!e)return"";const r=x(e).path.replace(/\/+$/,""),n=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return n;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return n.replace(s,"")}function Tt(e){return e.endsWith("/")?e:`${e}/`}function _e(e){return e.replace(/\/+$/,"")}function Rt(e){if(/^https?:\/\//i.test(e)){const t=ie(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Pt(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function _t(e){const t=R.httpsDomains;if(!Ct(e))return e;const r=e.indexOf("/",7);let n;if(n=r===-1?e:e.slice(0,r),n=n.toLowerCase().slice(7),ht.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return kt()&&n===h.authority&&!dt.test(e)||(G()&&n===h.authority||t&&t.some(s=>n===s||n.endsWith(`.${s}`))||G()&&!J(e))&&(e=pe(e)),e}function Y(e,t,r){if(!(t&&r&&e&&q(e)))return e;const n=e.indexOf("//"),s=e.indexOf("/",n+2),o=e.indexOf(":",n+2),i=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(n+2,i).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(i)}`}function Q(e){return typeof e=="string"?new U(P(e)):(e.scheme||(e.scheme=h.scheme),e)}function _r(e){return It.test(e)}function Ee(e,t){const r=x(e),n=Object.keys(r.query||{});return n.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),r.path}function Et(e,t,r){const n=x(e),s=n.query||{};return s[t]=String(r),`${n.path}?${I(s)}`}function V(e,t){if(!t)return e;const r=x(e),n=r.query||{};for(const[o,i]of Object.entries(t))i!=null&&(n[o]=i);const s=I(n);return s?`${r.path}?${s}`:r.path}function Er(e){if(e==null)return null;const t=e.match(Ie);return t?t[2]:null}function we(e){if(e==null)return null;const t=e.match(Ie);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Ir(e){return typeof e=="string"?H(e)??{data:e}:new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(H(n.result)),n.onerror=s=>r(s)})}const Ie=/([^.]*)\.([^/]*)$/,It=/(^data:image\/svg|\.svg$)/i;Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const At="4.32";let p,jt=At;jt="4.32.9";function Ar(e){p=e}function jr(e){const t=p==null?void 0:p.findCredential(e);return t!=null&&t.token?Et(e,"token",t.token):e}O("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),O("host-webworker");function Ae(e,t){var n;const r=(n=t==null?void 0:t.url)==null?void 0:n.path;if(e&&r&&(e=P(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=Pe(e,t.portalItem.itemUrl);s!=null&&Dt.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=X(e,t==null?void 0:t.portal))&&W.test(e)?He(e):e}function je(e,t,r=A.YES){var s,o;if((e=e&&W.test(e)?Be(e):e)==null)return e;!q(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let n=P(e);if(t){const i=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((o=t.url)==null?void 0:o.path);if(i){const a=X(i,t.portal),l=X(n,t.portal);n=Pe(l,a,a),n!=null&&n!==l&&n!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=De(n,t==null?void 0:t.portal),q(n)&&(n=k(n)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!q(n)&&!z(n)&&r===A.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n),compress:!1}),n}function Nt(e,t,r){return Ae(e,r)}function Ne(e,t,r,n){const s=je(e,n);s!==void 0&&(t[r]=s)}const W=/\/items\/([^/]+)\/resources\/(.*)/,Dt=/^\.\/resources\//;function Ht(e){const t=(e==null?void 0:e.match(W))??null;return(t==null?void 0:t[1])??null}function Bt(e){const t=(e==null?void 0:e.match(W))??null;if(t==null)return null;const r=t[2],n=r.lastIndexOf("/");if(n===-1){const{path:i,extension:a}=we(r);return{prefix:null,filename:i,extension:a}}const{path:s,extension:o}=we(r.slice(n+1));return{prefix:r.slice(0,n),filename:s,extension:o}}function De(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Y(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function X(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,n=oe();return L(n,`${n.scheme}://${r}`)?Y(e,t.portalHostname,r):Y(e,r,t.portalHostname)}function He(e){if(!e)return e||null;let t=e;return t&&p&&!p.findCredential(t)&&(t=Ue(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Be(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&p&&!p.findCredential(t)&&(t=Ue(t)),t}var A;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(A||(A={}));const Nr=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return A},ensureMainOnlineDomain:De,fromCDNUrl:Be,fromJSON:Ae,itemIdFromResourceUrl:Ht,prefixAndFilenameFromResourceUrl:Bt,read:Nt,toCDNUrl:He,toJSON:je,write:Ne},Symbol.toStringTag,{value:"Module"})),Fe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Me=Object.values(Fe),Je=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Me.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Ft=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Me.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Mt=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Dr(e){return Je.test(e)}function ze(e){if(e==null)return null;const t=x(e),r=(t==null?void 0:t.path.match(Je))||(t==null?void 0:t.path.match(Ft));if(!r)return null;const[,n,s,o,i]=r,a=s.indexOf("/");return{title:We(a!==-1?s.slice(a+1):s),serverType:Fe[o.toLowerCase()],sublayer:i!=null&&i!==""?parseInt(i,10):null,url:{path:n}}}function Jt(e){const t=x(e).path.match(Mt);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function We(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Hr(e,t){const r=[];if(e){const n=ze(e);n!=null&&n.title&&r.push(n.title)}if(t){const n=We(t);r.push(n)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function $e(e){let t=m(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function Br(e,t){return e&&_e(Ee(e,t))}function Fr(e){let{url:t}=e;if(!t)return{url:t};t=Ee(t,e.logger);const r=x(t),n=ze(r.path);let s;if(n!=null)n.sublayer!=null&&e.layer.layerId==null&&(s=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const o=Jt(r.path);o!=null&&(t=o.serviceUrl,s=o.sublayerId)}return{url:_e(t),layerId:s}}function Mr(e,t,r,n,s){Ne(t,n,"url",s),n.url&&e.layerId!=null&&(n.url=ue(n.url,r,e.layerId.toString()))}function Jr(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),n=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return r&&(n||s||o)}function zr(e){var n;if(!e)return!1;const t=new U(P(e)),r=(n=t.authority)==null?void 0:n.toLowerCase();return r==="server.arcgisonline.com"||r==="services.arcgisonline.com"}const zt=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Wt(e){const t=m(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!zt.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Kt(e,t){return!(!t&&!y.apiKey||!Wt(e))}function Vt(e,t,r=!1,n){return new Promise((s,o)=>{if(te(n))return void o(ve());let i=()=>{u(),o(new Error(`Unable to load ${t}`))},a=()=>{const c=e;u(),s(c)},l=()=>{if(!e)return;const c=e;u(),c.src="",o(ve())};const u=()=>{O("esri-image-decode")||(e.removeEventListener("error",i),e.removeEventListener("load",a)),i=null,a=null,e=null,n!=null&&n.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};n!=null&&n.addEventListener("abort",l),O("esri-image-decode")?e.decode().then(a,i):(e.addEventListener("error",i),e.addEventListener("load",a))})}function ve(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const Ke="Timeout exceeded";function Gt(){return new Error(Ke)}function Wr(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===Ke}function Yt(e){y.request.crossOriginNoCorsDomains||(y.request.crossOriginNoCorsDomains={});const t=y.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[m(r)??""]=0:(t[m("http://"+r)??""]=0,t[m("https://"+r)??""]=0)}function Qt(e){const t=y.request.crossOriginNoCorsDomains;if(t){let r=m(e);if(r)return r=r.toLowerCase(),!L(r,oe())&&t[r]<Date.now()-36e5}return!1}async function Xt(e){var s;const t=x(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=y.request.crossOriginNoCorsDomains,n=m(e);r&&n&&(r[n.toLowerCase()]=Date.now())}async function $(e,t){var d;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=ae(t.query.toString().replaceAll("+"," ")));const r=z(e),n=ce(e);n||r||(e=k(e));const s={url:e,requestOptions:{...t}},o=w=>({data:w,getAllHeaders:T,getHeader:T,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),i=ye(e,g.internalInterceptors);if(i){const w=await Oe(i,s);if(w!=null)return o(w)}let a=ye(e);if(a){const w=await Oe(a,s);if(w!=null)return o(w);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(O("host-webworker")||O("host-node")))throw v("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw v("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||n)throw v("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await nr(),F)return F.execute(e,t);const l=new AbortController,u=Xe(t,()=>l.abort()),c={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:g.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},b=t.useRequestQueue?lr(c):ee(c),f=await b.finally(()=>u==null?void 0:u.remove());return(d=a==null?void 0:a.after)==null||d.call(a,f),f}let F;const g=y.request,Ve="FormData"in globalThis,Zt=new Set([499,498,403,401]),er=new Set(["COM_0056","COM_0057","SB_0008"]),tr=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],T=()=>null,M=Symbol();function rr(e){const t=m(e);t&&!$._corsServers.includes(t)&&$._corsServers.push(t)}function be(e){const t=m(e);return!t||t.endsWith(".arcgis.com")||$._corsServers.includes(t)||le(t)}function v(e,t,r,n){let s="Error";const o={url:r.url,requestOptions:r.requestOptions,getAllHeaders:T,getHeader:T,ssl:!1};if(t instanceof E)return t.details?(t.details=Ze(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=o,t;if(t){const i=n&&(()=>Array.from(n.headers)),a=n&&(c=>n.headers.get(c)),l=n==null?void 0:n.status,u=t.message;u&&(s=u),i&&a&&(o.getAllHeaders=i,o.getHeader=a),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=M in t?t[M]:t}return et(t)?re():new E(e,s,o)}async function nr(){O("host-webworker")&&!F&&(F=await ne(()=>import("./request-B7tfvYKq.js"),__vite__mapDeps([0,1]),import.meta.url))}async function Z(){p||await ne(()=>import("./IdentityManager-f7YrxTTI.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)}async function sr(e){var a;const t=e.params.url,r=e.params.requestOptions,n=e.controller.signal,s=r.body;let o=null,i=null;if(Ve&&"HTMLFormElement"in globalThis&&(s instanceof FormData?o=s:s instanceof HTMLFormElement&&(o=new FormData(s))),typeof s=="string"&&(i=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:g.priority,redirect:"follow",signal:n},(o||i)&&(e.fetchOptions.body=o||i),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||o!=null&&o.get("token")),!e.hasToken&&Kt(t)&&(r.query||(r.query={}),r.query.token=y.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Ge(t)&&!te(n)){let l;r.authMode==="immediate"?(await Z(),l=await p.getCredential(t,{signal:n}),e.credential=l):r.authMode==="no-prompt"?(await Z(),l=await p.getCredential(t,{prompt:!1,signal:n}).catch(()=>{}),e.credential=l):p&&(l=p.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function Ge(e){return tr.some(t=>t.test(e))}async function or(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions??{},s=ce(t)||z(t),o=r.responseType||"json",i=s?0:r.timeout!=null?r.timeout:g.timeout;let a=!1;if(!s){e.useSSL&&(t=pe(t));let f={...r.query};e.credentialToken&&(f.token=e.credentialToken);let d=I(f);O("esri-url-encodes-apostrophe")&&(d=d.replaceAll("'","%27"));const w=t.length+1+d.length;let K;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||w>g.maxUrlLength;const j=r.useProxy||!!J(t);if(j){const C=Te(t);K=C.path,!a&&K.length+1+w>g.maxUrlLength&&(a=!0),C.query&&(f={...C.query,...f})}if(n.method==="HEAD"&&(a||j)){if(a)throw w>g.maxUrlLength?v("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):v("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(j)throw v("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=V(t,f):(n.body=I(f),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=V(t,f),j&&(e.useProxy=!0,t=`${K}?${t}`),f.token&&Ve&&n.body instanceof FormData&&!it(t)&&n.body.set("token",f.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!L(t,oe())){if(le(t))e.withCredentials=!0;else if(p){const C=p.findServerInfo(t);C!=null&&C.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(n.credentials="include",Qt(t)&&await Xt(a?V(t,f):t))}let l,u,c=0,b=!1;i>0&&(c=setTimeout(()=>{b=!0,e.controller.abort()},i));try{if(r.responseType==="native-request-init")u=n,u.url=t,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||a||ar(r.headers)||!s&&!e.useProxy&&g.proxyUrl&&!be(t)){if($._beforeFetch&&await $._beforeFetch(t,n),l=await fetch(t,n),$._afterFetch&&await $._afterFetch(l),e.useProxy||rr(t),r.responseType==="native")u=l;else if(n.method!=="HEAD")if(l.ok){switch(o){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=xe(u,"application/xml");break;case"document":u=xe(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[o==="blob"?"size":"byteLength"]<=750)try{const d=await new Response(u).json();d.error&&(u=d)}catch{}}o==="image"&&u instanceof Blob&&(u=await qe(URL.createObjectURL(u),e,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await qe(t,e)}catch(f){if(f.name==="AbortError")throw b?Gt():re("Request canceled");if(!(!l&&f instanceof TypeError&&g.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||be(t))throw f;e.redoRequest=!0,vt({proxyUrl:g.proxyUrl,urlPrefix:m(t)??""})}finally{c&&clearTimeout(c)}return[l,u]}async function Oe(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(s){r=v("request:interceptor",s,t)}if((n instanceof Error||n instanceof E)&&(r=v("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}function ar(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function xe(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}$._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],$._beforeFetch=void 0,$._afterFetch=void 0;const ir=new Map;async function lr(e){const t=cr(e.params.url);if(!t)return ee(e);const{QueueProcessor:r}=await ne(()=>import("./QueueProcessor-BzFcKfHF.js"),__vite__mapDeps([15,1,16,10,17,18]),import.meta.url);return tt(ir,t.origin,()=>{const s=t.isHosted?O("request-queue-concurrency-hosted"):O("request-queue-concurrency-non-hosted");return new r({concurrency:s,process:o=>{if(te(o.params.requestOptions))throw v("",re("Request canceled"),o.params);return ee(o)}})}).push(e)}async function ee(e){var o,i;let t,r;await sr(e);try{do[t,r]=await or(e);while(!await ur(e,t,r))}catch(a){const l=v("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(o=e.interceptor)!=null&&o.error&&e.interceptor.error(l),l}const n=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!e.hasToken&&!e.credentialToken&&((i=r.user)!=null&&i.username)&&!le(n)){const a=m(n,!0);a&&g.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Yt(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&p){const a=p.findServerInfo(s.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=p.findCredential(l,s.userId);u&&p._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):T,getHeader:t?a=>t.headers.get(a):T,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function ur(e,t,r){var u;if(e.redoRequest)return e.redoRequest=!1,!1;const n=e.params.requestOptions;if(!t||n.responseType==="native"||n.responseType==="native-request-init")return!0;let s,o;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[M]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[M]=r,s;let i,a=null;s&&(o=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,i=s.messageCode,i=i==null?void 0:i.toUpperCase());const l=n.authMode;if(o===403&&(a===4||(u=s.message)!=null&&u.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||o===498)&&o!==void 0&&Zt.has(o)&&!Ge(e.params.url)&&(o!==403||(!i||!er.has(i))&&(a==null||a===2&&e.credentialToken))){await Z();try{const c=await p.getCredential(e.params.url,{error:v("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=c,e.credentialToken=c.token,e.useSSL=e.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=c}}if(s)throw s;return!0}function qe(e,t,r=!1){const n=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=g.priority,s.src=e,Vt(s,e,r,n)}function cr(e){let t,r;return typeof e=="string"?(t=m(e,!0),r=$e(e)):(t=e.origin,r=$e(e.toString())),t==null?null:{origin:t,isHosted:r}}function Kr(e,t){return $(fr(e),t)}function fr(e){if(!y.assetsPath)throw Se.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new E("assets:path-not-set","config.assetsPath is not set");return ue(y.assetsPath,e)}const pr=Object.prototype.toString;function hr(e){const t="__accessorMetadata__"in e?rt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return dr.apply(this,r)}}function dr(e,t,r,n){Ce(e,t).cast=n}function mr(e){return(t,r)=>{Ce(t,e).cast=t[r]}}function Vr(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&pr.call(e[0])==="[object Function]"?hr(e[0]):e.length===1&&typeof e[0]=="string"?mr(e[0]):void 0}export{pe as $,z as A,zr as B,Mr as C,Pr as D,V as E,Dr as F,St as G,L as H,x as I,Sr as J,k as K,Jt as L,xr as M,jr as N,S as O,$ as P,Tt as Q,Rr as R,Fr as S,qr as T,Ht as U,ue as V,Pe as W,He as X,q as Y,ce as Z,P as _,Vr as a,Ue as a0,Jr as a1,ae as a2,At as a3,_e as a4,Et as a5,Cr as a6,it as a7,J as a8,Ar as a9,Wr as aa,Lr as ab,Or as ac,me as ad,De as ae,jt as af,ye as ag,Vt as ah,ot as ai,_r as aj,Ur as ak,Tr as al,Kr as am,Kt as b,Ir as c,ze as d,H as e,Nr as f,$e as g,Ne as h,vr as i,je as j,A as k,Nt as l,We as m,fr as n,nt as o,Ae as p,Bt as q,kr as r,p as s,lt as t,Ot as u,I as v,Hr as w,U as x,Br as y,Er as z};
