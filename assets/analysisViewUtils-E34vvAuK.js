import{d as c}from"./asyncUtils-CWX51uTe.js";import{m as s,l as r}from"./Accessor-BLX9ikPh.js";import{whenOnce as v,watch as u,syncAndInitial as w}from"./reactiveUtils-C5zUhJQJ.js";function $(t,n){t.interactive=!0;const{tool:i,view:o}=t;o.activeTool=i;let a=s(n,()=>{o.activeTool===i&&(o.activeTool=null)});return c(async l=>{await v(()=>i==null||!i.active,l),a=r(a)},n)}function T(t,n){return u(()=>t.interactive,()=>f(t,n),w)}function f(t,n){t.interactive?m(t,n):e(t)}function m(t,n){e(t);const{view:i,analysis:o}=t,a=new n({view:i,analysis:o,analysisViewData:t});return t.tool=a,i.tools.add(a),a}function e(t){const{view:n,tool:i}=t;i!=null&&(n.tools.remove(i),t.tool=null)}export{T as a,$ as l,e as v};
