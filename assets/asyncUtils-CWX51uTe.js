import{r as n}from"./tslib.es6-B3Jf3DVX.js";import{b as h,e as c,m as _,l as m,y as p,p as f}from"./Accessor-BLX9ikPh.js";import{m as s,a as b}from"./subclass-BZA_h8Db.js";function w(t,r,l){return p(t.map((e,a)=>r.apply(l,[e,a])))}async function C(t,r,l){return(await p(t.map((e,a)=>r.apply(l,[e,a])))).map(e=>e.value)}function i(t){return{ok:!0,value:t}}function u(t){return{ok:!1,error:t}}function y(t){return t!=null&&t.ok===!0?t.value:null}function d(t){return t!=null&&t.ok===!1?t.error:null}async function g(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return i(await t)}catch(r){return u(r)}}async function H(t){try{return i(await t)}catch(r){return f(r),u(r)}}function x(t){if(t.ok===!0)return t.value;throw t.error}function A(t,r){return new o(t,r)}let o=class extends h{get value(){return y(this._result)}get error(){return d(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=c(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:l}=this._abortController;this.promise=t(l),this.promise.then(e=>{this._result=i(e),this._cleanup()},e=>{this._result=u(e),this._cleanup()}),this._abortHandle=_(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=m(this._abortHandle),this._abortController=null}};n([s()],o.prototype,"value",null),n([s()],o.prototype,"error",null),n([s()],o.prototype,"finished",null),n([s()],o.prototype,"promise",void 0),n([s()],o.prototype,"_result",void 0),o=n([b("esri.core.asyncUtils.ReactiveTask")],o);export{g as _,w as a,H as b,A as d,C as p,x as y};
