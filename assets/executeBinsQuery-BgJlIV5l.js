import{f as u}from"./utils-6jMaHUrH.js";import{I as s,U as f,V as y}from"./assets-C43MgM-v.js";import{p as c}from"./jsonUtils-CEfjT-BK.js";import{R as S}from"./normalizeUtils-EVmAQ-ak.js";import{a5 as n,s as l}from"./Point-Cg0-ChZE.js";import{t as R}from"./query-Dw-gv3BA.js";import g from"./BinsQuery-fCHZZVnc.js";import{d}from"./FeatureSet-BHEkYP03.js";import"./subclass-BZA_h8Db.js";import"./index-Bh2oEzTI.js";import"./tslib.es6-B3Jf3DVX.js";import"./Accessor-BLX9ikPh.js";import"./Extent-Bf3YTe7m.js";import"./Polyline-D9YkgmM_.js";import"./writer-DNAwXnhG.js";import"./mathUtils-C4_ghTv4.js";import"./normalizeUtilsCommon-dT81xWiM.js";import"./geometry-D964gYQX.js";import"./jsonMap-0cxwUWs2.js";import"./utils-Bema0iXE.js";import"./cast-Bjksrh93.js";import"./pbfQueryUtils-B0fU-MiS.js";import"./pbf-BtDZ1BpD.js";import"./OptimizedGeometry-BF8iz5FO.js";import"./OptimizedFeature-6cJ-QFG5.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./queryZScale-w66xFVGx.js";import"./projection-B971H0Re.js";import"./SimpleObservable-KocWTzVy.js";import"./vec3f64-BLpZdpfb.js";import"./projectBuffer-Bs7GwaPY.js";import"./geodesicConstants-DWQLYX7F.js";import"./Clonable-D3rtuBWg.js";import"./enumeration-Ba5njXdz.js";import"./queryUtils-O-WFKoZd.js";import"./json-Wa8cmqdu.js";import"./Query-5Xpquc1r.js";import"./DataLayerSource-BKkswDvG.js";import"./Field-ybkHhtnK.js";import"./fieldType-BuzM0UHS.js";import"./FullTextSearch-Csd1Hktu.js";import"./TimeExtent-DocT5yPf.js";import"./timeUtils-8fb_2oAt.js";import"./date-DlqISzcw.js";import"./locale-C9TlLpzi.js";import"./Graphic-DsxsIjhH.js";import"./PopupTemplate-BHMhS05j.js";import"./Collection-CEdjem1-.js";import"./Evented-BHRw9x22.js";import"./shared-B3wH2qpO.js";import"./fieldUtils-tmQlKvWo.js";import"./intl-CChhNOV8.js";import"./messages-OmQvZhAg.js";import"./Color-BCS62Hs5.js";import"./colorUtils-0bJDPow9.js";import"./ActionToggle-iT4slXc7.js";import"./Identifiable-B1UbsKNt.js";import"./symbols-CNimns--.js";import"./TextSymbol-D8QO_KUV.js";import"./screenUtils-_ZIvrt5o.js";import"./materialUtils-DarhapKC.js";import"./opacityUtils-C68Tlu6_.js";import"./aaBoundingBox-BE7cC1jD.js";import"./persistableUrlUtils-fa1mAujs.js";import"./collectionUtils-D_lHIu88.js";import"./Portal-C10FKnaA.js";import"./Loadable-BabW5Xcc.js";import"./Promise-B2Hu02L7.js";import"./reactiveUtils-C5zUhJQJ.js";import"./asyncUtils-CWX51uTe.js";function J(o){const r=o.geometry,i=o.toJSON(),t=i;let p,m,e;return r!=null&&(m=r.spatialReference,e=n(m),t.geometryType=c(r),t.geometry=JSON.stringify(r),t.inSR=e),i.outSR?(t.outSR=n(i.outSR),p=o.outSpatialReference):r&&(t.outSR=t.inSR,p=m),t.bin&&(t.bin=JSON.stringify(t.bin)),t.quantizationParameters&&(t.quantizationParameters=JSON.stringify(t.quantizationParameters)),t.outStatistics&&(t.outStatistics=JSON.stringify(t.outStatistics)),t.outTimeReference&&(t.outTimeReference=JSON.stringify(t.outTimeReference)),o.defaultSpatialReference&&l(m,p)&&(t.defaultSR=t.inSR,delete t.inSR,delete t.outSR),t}async function N(o,r,i){return O(o,r,i)}async function O(o,r,i={}){const t=typeof o=="string"?s(o):o,p=r.geometry?[r.geometry]:[],m=await S(p,null,{signal:i.signal}),e=m==null?void 0:m[0];e!=null&&((r=r.clone()).geometry=e);const a=R({...t.query,f:"json",...J(r)});return f(y(t.path,"queryBins"),{...i,query:{...a,...i.query}})}async function vt(o,r,i){const{data:t}=await N(u(o),g.from(r),i);return d.fromJSON(t)}export{vt as executeBinsQuery};
