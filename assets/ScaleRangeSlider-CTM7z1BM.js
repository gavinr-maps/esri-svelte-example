const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-button-D_QRw8fR.js","./button-CT5wDIjk.js","./jsxFactory-CbAu6VfF.js","./Evented-CXIxDjmW.js","./Accessor-D6mNnsWy.js","./subclass-BR3PhgZG.js","./intl-Dpfm8vPB.js","./Promise-CZrWwByK.js","./jsonMap-DCC6W5ex.js","./assets-C2mb-ea2.js","./index-CeCSsEgo.js","./index-CjOb8WjV.css","./reactiveUtils-BFQ0BtrB.js","./shared-B3wH2qpO.js","./uuid-fwrPAdZb.js","./form-DcBTx4ZC.js","./dom-Cv0oa6So.js","./interactive-Dtpmn6Ls.js","./label-rdYpV4K5.js","./component-ByvC-PUv.js","./loadable-CTFTnu2T.js","./locale-BUTTOPma.js","./key-D5DPfjW0.js","./observers-EizV_Lvc.js","./t9n-DfK3dFGw.js","./icon-DIKjN-ev.js","./loader-wfvKSvDR.js","./calcite-dropdown-6UfWTtac.js","./floating-ui-BiOoil4s.js","./debounce-C5YDvsuO.js","./openCloseComponent-v_dlVp47.js","./calcite-dropdown-group-DN7H-FJ1.js","./resources3-B__tPmNQ.js","./calcite-dropdown-item-bgAR1XTv.js","./calcite-icon-CocWVhPd.js","./calcite-input-number-BIZxexRy.js","./input-number-DObqjck3.js","./Validation-BBJwLSGg.js","./input-Dt5r39B0.js","./input-message-CKyGNFPw.js","./progress-B-8bmD6j.js","./calcite-label-CI84R5fD.js","./calcite-popover-DJJrGp-P.js","./popover-Cj0_nbSv.js","./focusTrapComponent-C9GPb5g8.js","./Heading-Dn_ijr3J.js","./FloatingArrow-HmzV7w9c.js","./action-DJPgY7YC.js"])))=>i.map(i=>d[i]);
import{_}from"./index-CeCSsEgo.js";import{e as s}from"./Evented-CXIxDjmW.js";import{l as D}from"./intl-Dpfm8vPB.js";import{S as O,K as $,u as N}from"./Accessor-D6mNnsWy.js";import{d as x,P as T,p as z}from"./reactiveUtils-BFQ0BtrB.js";import{y as r,b as I}from"./subclass-BR3PhgZG.js";import{s as B}from"./jsonMap-DCC6W5ex.js";import{l as j,A as F}from"./Slider-BfZ3cb-N.js";import{e as J,B as q,r as H,n as d,s as U}from"./jsxFactory-CbAu6VfF.js";import{n as W}from"./assets-C2mb-ea2.js";import{d as K}from"./Promise-CZrWwByK.js";import{e as V}from"./globalCss-CZa70j6i.js";import{s as G}from"./substitute-JuF-yP_g.js";import"./shared-B3wH2qpO.js";import"./uuid-fwrPAdZb.js";const v="esri-scale-range-slider",b=`${v}__scale-menu`,p={base:v,segmentElementActive:`${v}__segment-active`,scaleIndicatorWrapper:`${v}__scale-indicator-wrapper`,scaleIndicator:`${v}__scale-indicator`,scaleIndicatorIcon:`${v}__scale-indicator-icon`,scaleIndicatorContainer:`${v}__scale-indicator-container`,scaleMenuContainer:`${b}-container`,scaleMenuSeparator:`${b}-separator`,scaleMenuToggle:`${b}-toggle`,scaleMenuSubLabel:`${b}-sublabel`,scalePreview:`${v}__scale-preview`,scalePreviewThumbnail:`${v}__scale-preview-thumbnail`},Q="en-wo",X=K().substr(0,2);var l;(function(e){e.ar="ar",e.bg="bg",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es="es",e.et="et",e.fi="fi",e.fr="fr",e.is="is",e.it="it",e.ja="ja",e.ko="ko",e.lt="lt",e.lv="lv",e.nl="nl",e.nn="nn",e.pl="pl",e.pt="pt",e.ro="ro",e.ru="ru",e.sk="sk",e.sv="sv",e.th="th",e.zh="zh"})(l||(l={}));const Y={ae:l.en,ar:l.es,at:l.de,au:l.en,be:l.nl,bg:l.bg,bo:l.es,br:l.pt,ca:l.en,ch:l.de,ci:l.fr,cl:l.es,cn:l.zh,co:l.es,cr:l.es,cz:l.cs,de:l.de,dk:l.da,ee:l.et,eg:l.en,es:l.es,fi:l.fi,fr:l.fr,gb:l.en,gl:l.da,gr:l.el,gt:l.es,hk:l.en,id:l.en,ie:l.en,il:l.en,in:l.en,iq:l.ar,is:l.is,it:l.it,jp:l.ja,ke:l.en,kr:l.ko,kw:l.ar,li:l.de,lt:l.lt,lu:l.en,lv:l.lv,ma:l.fr,mg:l.fr,ml:l.fr,mo:l.en,mx:l.es,my:l.en,ni:l.es,nl:l.nl,no:l.nn,nz:l.en,pe:l.es,pl:l.pl,pr:l.es,pt:l.pt,ro:l.ro,ru:l.ru,rw:l.en,se:l.sv,sg:l.en,sk:l.sk,sr:l.nl,sv:l.es,th:l.th,tn:l.fr,tw:l.zh,us:l.en,ve:l.es,vi:l.en,wo:l.en,za:l.en},E=new Set(["ar-iq","ar-kw","bg-bg","cs-cz","da-dk","da-gl","de-at","de-ch","de-de","de-li","el-gr","en-ae","en-au","en-ca","en-eg","en-gb","en-hk","en-id","en-ie","en-il","en-in","en-iq","en-ke","en-lu","en-mo","en-my","en-nz","en-rw","en-sg","en-us","en-vi","en-wo","en-za","es-ar","es-bo","es-cl","es-co","es-cr","es-es","es-gt","es-mx","es-ni","es-pe","es-pr","es-sv","es-ve","et-ee","fi-fi","fr-ci","fr-fr","fr-ma","fr-mg","fr-ml","fr-tn","is-is","it-it","ja-jp","ko-kr","lt-lt","lv-lv","nl-be","nl-nl","nl-sr","nn-no","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sv-se","th-th","zh-cn","zh-tw"]);function Z(e){return e.toLowerCase()}function ee(e){return`url(${W(`esri/widgets/ScaleRangeSlider/images/scalePreview/${e}.jpg`)})`}function ie(e){e=Z(e);const i=`${X}-${e}`,t=`${Y[e]}-${e}`;return ee(E.has(i)?i:E.has(t)?t:Q)}function te(e){if(!(e<0||e>=5*5))return`-${128*(e%5)}px -${128*Math.floor(e/5)}px`}var M;const k=147914382,ae=[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"stateProvince",minScale:3999999},{id:"statesProvinces",minScale:6999999},{id:"countriesSmall",minScale:14999999},{id:"countriesBig",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:k}];function L(e,i){const t=ae,a=t.length,n=[];let c,m=e;e=e>=0?e:0,i=i>0?i:t[a-1].minScale;for(let h=0;h<a;h++){const S=Math.min(t[h].minScale,i);c=Math.min(S,i),e<=S&&m<i&&n.push({id:t[h].id,maxScale:Math.max(m,e),minScale:c}),m=c+1}return n.reverse(),le(n)}function le(e){if(e.length===0)return e;const[i]=e,t=e[e.length-1];return i.minScale===i.maxScale&&(e.shift(),i.minScale+=1),t.minScale===t.maxScale&&(e.pop(),t.maxScale-=1),e}let g=M=class extends O{constructor(){super(...arguments),this.ranges=[]}static fromScaleRange({maxScale:e,minScale:i}){return new M({ranges:L(e,i)})}static async fromLayer(e){var a;await e.when();const i="tileInfo"in e?(a=e.tileInfo)==null?void 0:a.lods:void 0;let t;return i?t=L(i[i.length-1].scale,i[0].scale):t=L(0,0),new M({ranges:t})}get firstRange(){return this.ranges[0]}get lastRange(){const e=this.ranges;return e[e.length-1]}get length(){return this.ranges.length}get maxScale(){return this.lastRange.maxScale}get minScale(){return this.firstRange.minScale}isMinScaleEdge(e){const{firstRange:i}=this,t=i.minScale,a=M.RecommendedScales[i.id]||i.maxScale;return e<=t&&e>=a}isMaxScaleEdge(e){const{lastRange:i}=this,t=i.maxScale;return e<=(M.RecommendedScales[i.id]||i.minScale)&&e>=t}findScaleRange(e){const i=this.ranges;let t;if(e>=i[0].maxScale)return i[0];if(e<=i[i.length-1].minScale)return i[i.length-1];for(let a=0;a<i.length;a++){const n=i[a];if(e>=n.maxScale&&e<=n.minScale){t=n;break}}return t}findScaleRangeByIndex(e){return this.ranges[this._clampScaleRangeIndex(e)]}scaleToRangeIndex(e){return this.ranges.indexOf(this.findScaleRange(e))}clampScale(e){return Math.min(this.minScale,Math.max(this.maxScale,e))}clampMinScale(e){return e===0?this.minScale:this.clampScale(e)}clampMaxScale(e){return this.clampScale(e)}contains(e){const i=this.ranges;let t=!1;for(let a=0;a<i.length;a++){const{maxScale:n,minScale:c}=i[a];if(e>=n&&e<=c){t=!0;break}}return t}_clampScaleRangeIndex(e){if(e<=0)return 0;const t=this.ranges.length-1;return e>t?t:Math.floor(e)}};g.RecommendedScales=Object.freeze({world:k,continent:5e7,countriesBig:25e6,countriesSmall:12e6,statesProvinces:6e6,stateProvince:3e6,counties:15e5,county:75e4,metropolitanArea:32e4,cities:16e4,city:8e4,town:4e4,neighborhood:2e4,streets:1e4,street:5e3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100}),s([r()],g.prototype,"firstRange",null),s([r()],g.prototype,"lastRange",null),s([r()],g.prototype,"length",null),s([r()],g.prototype,"maxScale",null),s([r()],g.prototype,"minScale",null),s([r({constructOnly:!0})],g.prototype,"ranges",void 0),g=M=s([I("esri.widgets.ScaleRangeSlider.ScaleRanges")],g);const y=g;let u=class extends O{constructor(e){super(e),this.layer=null,this.mode="range",this.scaleRanges=y.fromScaleRange({minScale:0,maxScale:0}),this.sliderViewModel=(()=>{const{max:i}=this._getSliderIndexRange(this.scaleRanges.length-1);return new j({precision:10,min:0,max:i,values:[0,i]})})()}initialize(){this.addHandles([x(()=>this.layer,e=>e==null?void 0:e.load().catch(()=>{})),x(()=>this.mode,e=>{var i,t;e==="range"&&((i=this.sliderViewModel.values)==null?void 0:i.length)===1?this.sliderViewModel.values=[this.sliderViewModel.min,this.sliderViewModel.values[0]]:((t=this.sliderViewModel.values)==null?void 0:t.length)===2&&(e==="min-scale-only"?this.sliderViewModel.values=[this.sliderViewModel.values[0]]:e==="max-scale-only"&&(this.sliderViewModel.values=[this.sliderViewModel.values[1]]))}),x(()=>{var e,i;return{loaded:(e=this.layer)==null?void 0:e.loaded,ready:(i=this.view)==null?void 0:i.ready}},({loaded:e,ready:i})=>{if(!e||!i)return;if(this._hasTiledLayer()){const a=this._getLayerResampling()?void 0:this.mapScaleToSlider(this._getTiledLayerMaxScale()),n=this.mapScaleToSlider(this._getTiledLayerMinScale());this.sliderViewModel.effectiveMax=a,this.sliderViewModel.effectiveMin=n}else{const a=this.layer&&"maxScaleRange"in this.layer?this.layer.maxScaleRange:null,{minScale:n=0,maxScale:c=0}=a??{};this.sliderViewModel.effectiveMax=c===0?void 0:this.mapScaleToSlider(c),this.sliderViewModel.effectiveMin=n===0?void 0:this.mapScaleToSlider(n)}const t=this.layer;t&&"minScale"in t&&"maxScale"in t?(this.minScale=t.minScale,this.maxScale=t.maxScale):(this.minScale=void 0,this.maxScale=void 0)},T)])}get effectiveMaxScale(){return this.maxScale===0?this.maxScaleLimit:this.maxScale}get effectiveMinScale(){return this.minScale===0?this.minScaleLimit:this.minScale}get effectiveMaxScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.effectiveMax??this.sliderViewModel.max)}get effectiveMinScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.effectiveMin??this.sliderViewModel.min)}get maxScale(){return this._getScale("max")}set maxScale(e){this._setMaxScaleOnSlider(e)}get maxScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.max)}set maxScaleLimit(e){this._setSliderRange({maxScale:e,minScale:this.minScaleLimit})}get minScale(){return this._getScale("min")}set minScale(e){this._setMinScaleOnSlider(e)}get minScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.min)}set minScaleLimit(e){this._setSliderRange({maxScale:this.maxScaleLimit,minScale:e})}get state(){const{view:e,layer:i}=this;return!e&&!i||!e&&(i!=null&&i.loaded)||!i&&(e!=null&&e.ready)||e&&e.ready&&(i!=null&&i.loaded)?"ready":"disabled"}set view(e){this._set("view",e)}mapScaleToSlider(e){const i=this.scaleRanges.scaleToRangeIndex(e),t=this.scaleRanges.findScaleRangeByIndex(i),{maxScale:a,minScale:n}=t,{max:c,min:m}=this._getSliderIndexRange(i);return this._mapToRange(e,n,a,m,c)}mapSliderToScale(e){const i=this.scaleRanges.findScaleRangeByIndex(e),{maxScale:t,minScale:a}=i,{max:n,min:c}=this._getSliderIndexRange(e);return this._mapToRange(e,c,n,a,t)}_setSliderRange(e){this.scaleRanges=y.fromScaleRange(e);const{max:i}=this._getSliderIndexRange(this.scaleRanges.length-1);this.sliderViewModel.max=i,this.sliderViewModel.min=0,this.notifyChange("maxScaleLimit"),this.notifyChange("minScaleLimit")}_getSliderIndexRange(e){const i=Math.floor(e);return{min:i,max:i+.99999}}_mapToRange(e,i,t,a,n){return a+(e-i)*(n-a)/(t-i)}_getSliderValue(e){const{min:i,max:t,values:a}=this.sliderViewModel,[n,c]=a;switch(this.mode){case"max-scale-only":return e==="min"?i:n;case"min-scale-only":return e==="min"?n:t;default:return e==="min"?n??i:c??t}}_getScale(e){const i=this.mapSliderToScale(this._getSliderValue(e));return this._normalizeScale(e,i)}_setMaxScaleOnSlider(e){const{scaleRanges:i,sliderViewModel:t}=this;if(e!==void 0){const a=this.mapScaleToSlider(this._constrainMaxScaleToLayer(i.clampMaxScale(e)));switch(this.mode){case"range":t.values=[t.values[0],a];break;case"max-scale-only":t.values=[a]}}}_setMinScaleOnSlider(e){const{scaleRanges:i,sliderViewModel:t}=this;if(e!==void 0){const a=this.mapScaleToSlider(this._constrainMinScaleToLayer(i.clampMinScale(e)));switch(this.mode){case"range":t.values=[a,t.values[1]];break;case"min-scale-only":t.values=[a]}}}_constrainMinScaleToLayer(e){const{scaleRanges:i}=this;if(this._hasTiledLayer()){const{firstRange:t}=i,a=this._getTiledLayerMinScale();e=this._mapToRange(e,t.maxScale,t.minScale,0,1)>.85||e>a?a:e}return e}_constrainMaxScaleToLayer(e){if(this._hasTiledLayer()&&!this._getLayerResampling()){const i=this._getTiledLayerMaxScale();e=e<i?i:e}return e}_normalizeScale(e,i){const t=e==="max"?"maxScale":"minScale",a=this._hasTiledLayer()?e==="min"?this._getTiledLayerMinScale():this._getTiledLayerMaxScale():this.scaleRanges[t],n=this._hasTiledLayer()?e==="min"?this._getTiledLayerRealMinScale():this._getTiledLayerRealMaxScale():a,c=1e-6,m=i===0||n===i||Math.abs(n-i)<=c;return Number((m?0:i).toFixed(6))}_getLayerLODS(){var e,i,t,a;return!((e=this.layer)!=null&&e.loaded)||!("tileInfo"in this.layer)||((i=this.layer)==null?void 0:i.type)==="imagery-tile"&&((t=this.layer.raster)==null?void 0:t.tileType)==="Raster"?null:(a=this.layer.tileInfo)==null?void 0:a.lods}_getLayerResampling(){var e;return!!((e=this.layer)!=null&&e.loaded)&&(!("resampling"in this.layer)||this.layer.resampling)}_getTiledLayerMinScale(){const e=this._getLayerLODS();return this.scaleRanges.clampMinScale(e[0].scale)}_getTiledLayerMaxScale(){const e=this._getLayerLODS();return e[e.length-1].scale}_getTiledLayerRealMinScale(){var a,n;const e=this._getLayerLODS(),i=this.layer,t=i&&"sourceJSON"in i?((n=(a=i.sourceJSON)==null?void 0:a.tileInfo)==null?void 0:n.lods)??e:e;return this.scaleRanges.clampMinScale(t[0].scale)}_getTiledLayerRealMaxScale(){var a,n;const e=this._getLayerLODS(),i=this.layer,t=i&&"sourceJSON"in i?((n=(a=i.sourceJSON)==null?void 0:a.tileInfo)==null?void 0:n.lods)??e:e;return t[t.length-1].scale}_hasTiledLayer(){return!!this._getLayerLODS()}};s([r({readOnly:!0})],u.prototype,"effectiveMaxScale",null),s([r({readOnly:!0})],u.prototype,"effectiveMinScale",null),s([r()],u.prototype,"effectiveMaxScaleLimit",null),s([r()],u.prototype,"effectiveMinScaleLimit",null),s([r()],u.prototype,"layer",void 0),s([r()],u.prototype,"maxScale",null),s([r()],u.prototype,"maxScaleLimit",null),s([r()],u.prototype,"mode",void 0),s([r()],u.prototype,"minScale",null),s([r()],u.prototype,"minScaleLimit",null),s([r()],u.prototype,"scaleRanges",void 0),s([r()],u.prototype,"sliderViewModel",void 0),s([r({readOnly:!0})],u.prototype,"state",null),s([r()],u.prototype,"view",null),u=s([I("esri.widgets.ScaleRangeSlider.ScaleRangeSliderViewModel")],u);const ne=u,R={preview:!0,scaleMenus:{maxScaleMenu:!0,minScaleMenu:!0}},se={maximumFractionDigits:0},C="1:",re=16;let o=class extends q{constructor(e,i){super(e,i),this._activeMenu=null,this._activeThumb=null,this._customInput=null,this._maxThumbNode=null,this._minThumbNode=null,this._previewAutoCloseTimeoutId=void 0,this._previewPopover=null,this._slider=new F({thumbCreatedFunction:(t,a,n)=>{t===0?this._minThumbNode=n:t===1&&(this._maxThumbNode=n),this.addHandles([$(n,"mouseenter",()=>{this._activeThumb=t,this.scheduleRender()}),$(n,"mouseleave",()=>{this._previewAutoCloseTimeoutId||(this._activeThumb=null,this.scheduleRender())})])}}),this.disabled=!1,this.messages=null,this.region="US",this.viewModel=new ne,this.visibleElements=R,this._afterInputNumberCreate=t=>{"value"in t&&t.value!=null&&"setNumberValue"in t&&t.setNumberValue({committing:!1,value:t.value,origin:"direct"}),this._customInput=t},this._handleCustomScaleInputChange=(t,a)=>{const{viewModel:{scaleRanges:n}}=this,c=Number.parseFloat(a.value);Number.isNaN(c)?a.value=t:this._setScale(n.clampScale(c))}}loadDependencies(){return H({button:()=>_(()=>import("./calcite-button-D_QRw8fR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),dropdown:()=>_(()=>import("./calcite-dropdown-6UfWTtac.js"),__vite__mapDeps([27,2,3,4,5,6,7,8,9,10,11,12,13,14,16,28,29,17,22,20,23,30]),import.meta.url),"dropdown-group":()=>_(()=>import("./calcite-dropdown-group-DN7H-FJ1.js"),__vite__mapDeps([31,2,3,4,5,6,7,8,9,10,11,12,13,14,23,32]),import.meta.url),"dropdown-item":()=>_(()=>import("./calcite-dropdown-item-bgAR1XTv.js"),__vite__mapDeps([33,2,3,4,5,6,7,8,9,10,11,12,13,14,16,20,19,17,32,25,23]),import.meta.url),icon:()=>_(()=>import("./calcite-icon-CocWVhPd.js"),__vite__mapDeps([34,25,2,3,4,5,6,7,8,9,10,11,12,13,14,16,23]),import.meta.url),"input-number":()=>_(()=>import("./calcite-input-number-BIZxexRy.js"),__vite__mapDeps([35,36,2,3,4,5,6,7,8,9,10,11,12,13,14,16,15,17,22,18,19,20,21,23,24,37,38,25,39,40]),import.meta.url),label:()=>_(()=>import("./calcite-label-CI84R5fD.js"),__vite__mapDeps([41,2,3,4,5,6,7,8,9,10,11,12,13,14,18,16,19]),import.meta.url),popover:()=>_(()=>import("./calcite-popover-DJJrGp-P.js"),__vite__mapDeps([42,43,2,3,4,5,6,7,8,9,10,11,12,13,14,28,16,29,44,30,45,21,22,23,24,20,46,19,47,17,25,26]),import.meta.url)})}initialize(){this.addHandles([x(()=>this.viewModel,e=>this._slider.viewModel=(e==null?void 0:e.sliderViewModel)??null,T),x(()=>this._interactive,e=>{this._slider.disabled=!e,e||this._setActiveMenu(null)},T),this._slider.on("thumb-drag",({index:e})=>{this._activeThumb=e,clearTimeout(this._previewAutoCloseTimeoutId);const i=250;this._previewAutoCloseTimeoutId=setTimeout(()=>{this._previewAutoCloseTimeoutId=void 0,this._activeThumb=null},i)}),z(()=>{var e;return((e=this.view)==null?void 0:e.stationary)===!0},()=>this.scheduleRender())])}destroy(){this._slider=N(this._slider)}get _maxScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return e===!0||typeof e!="boolean"&&e.maxScaleMenu}get _minScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return e===!0||typeof e!="boolean"&&e.minScaleMenu}get _interactive(){var e;return((e=this.viewModel)==null?void 0:e.state)!=="disabled"&&!this.disabled}get effectiveMaxScale(){return this.viewModel.effectiveMaxScale}get effectiveMinScale(){return this.viewModel.effectiveMinScale}get effectiveMaxScaleLimit(){return this.viewModel.effectiveMaxScaleLimit}get effectiveMinScaleLimit(){return this.viewModel.effectiveMinScaleLimit}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get maxScale(){return this.viewModel.maxScale}set maxScale(e){this.viewModel.maxScale=e}get maxScaleLimit(){return this.viewModel.maxScaleLimit}set maxScaleLimit(e){this.viewModel.maxScaleLimit=e}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}get minScale(){return this.viewModel.minScale}set minScale(e){this.viewModel.minScale=e}get minScaleLimit(){return this.viewModel.minScaleLimit}set minScaleLimit(e){this.viewModel.minScaleLimit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...R,...e,scaleMenus:typeof(e==null?void 0:e.scaleMenus)=="boolean"?e.scaleMenus:{...R.scaleMenus,...e==null?void 0:e.scaleMenus}}}formatScale(e){return`${C}${D(e,se)}`}render(){const{_interactive:e,_slider:i,label:t,view:a,viewModel:{state:n}}=this,c=this._getLabel("min"),m=this._getLabel("max"),{segmentElements:h}=i,S=h.at(this.mode==="min-scale-only"?-1:-2);return S&&S.classList.add(p.segmentElementActive),d("div",{"aria-label":t,class:this.classes(p.base,V.widget,e?null:V.disabled)},d("div",{class:p.scaleIndicatorWrapper,dir:"ltr"},n==="ready"&&a?this._renderCurrentScaleIndicator():null,i.render(),this._renderPreviewPopover()),d("div",{class:p.scaleMenuContainer},this._minScaleMenuEnabled&&c?this._renderScaleMenuToggle("min",c):null,d("div",{class:p.scaleMenuSeparator}),this._maxScaleMenuEnabled&&m?this._renderScaleMenuToggle("max",m):null))}_renderPreviewPopover(){const{_activeThumb:e}=this,i=e!=null&&this.visibleElements.preview,t=i?e===0?this._minThumbNode:this._maxThumbNode:"";return d("calcite-popover",{afterCreate:U,afterUpdate:()=>{var a;return(a=this._previewPopover)==null?void 0:a.reposition()},bind:this,"data-node-ref":"_previewPopover",label:this.messages.preview,offsetDistance:re,open:i,overlayPositioning:"fixed",placement:"top",referenceElement:t,triggerDisabled:!0},this._renderScalePreview())}_renderScalePreview(){const{_activeThumb:e,_slider:i,region:t,viewModel:{scaleRanges:a}}=this,n=e===0||this.mode!=="range"?i.values[0]:i.values[1],c=Object.keys(y.RecommendedScales).indexOf(a.findScaleRangeByIndex(n).id),m={backgroundImage:ie(t),backgroundPosition:te(c)};return d("div",{class:p.scalePreview},d("div",{class:p.scalePreviewThumbnail,styles:m}))}_getLabel(e){const{_slider:i,messages:t,mode:a,viewModel:{scaleRanges:n}}=this,[c,m]=i.values,h=e==="min"||a!=="range"?c:m,S=t.scaleRangeLabels[n.findScaleRangeByIndex(h).id];switch(a){case"range":return S;case"max-scale-only":return e==="min"?null:S;case"min-scale-only":return e==="min"?S:null}}_renderScaleMenuToggle(e,i){const{_activeMenu:t,_interactive:a}=this,n=t===e;return[d("calcite-dropdown",{closeOnSelectDisabled:!0,"data-type":e,open:n,overlayPositioning:"fixed",placement:e==="max"?"bottom-end":"bottom-start",scale:"s",onCalciteDropdownClose:({target:c})=>{this._activeMenu===e&&this._setActiveMenu(null),c.setFocus()},onCalciteDropdownOpen:()=>this._setActiveMenu(e)},d("calcite-button",{appearance:n?"outline":"transparent","aria-pressed":n.toString(),class:p.scaleMenuToggle,disabled:!a,iconEnd:"chevron-down",scale:"s",slot:"trigger"},i),n&&e==="max"?this._renderMaxScaleMenu():null,n&&e==="min"?this._renderMinScaleMenu():null)]}_renderMinScaleMenu(){const{effectiveMaxScale:e,effectiveMinScaleLimit:i,view:t,viewModel:{scaleRanges:a}}=this,n=t?t.scale:void 0;return this._renderScaleMenu({type:"min",min:i,max:a.findScaleRange(e).minScale,viewScale:n})}_renderMaxScaleMenu(){const{effectiveMinScale:e,effectiveMaxScaleLimit:i,view:t,viewModel:{scaleRanges:a}}=this,n=t?t.scale:void 0;return this._renderScaleMenu({type:"max",min:a.findScaleRange(e).maxScale,max:i,viewScale:n})}_renderScaleMenu({viewScale:e,min:i,max:t,type:a}){const{effectiveMaxScale:n,effectiveMinScale:c,messages:m}=this,h=a==="max"?n:c,S=y.fromScaleRange({minScale:i,maxScale:t}),P=this.messages.featuredScaleLabels,w=y.RecommendedScales,A=Object.keys(w).filter(f=>S.contains(w[f])).map(f=>this._renderScaleMenuItem({scaleLabel:P[f],scaleValue:w[f],isSelected:h===w[f],valueVisible:f!=="world"}));return d("calcite-dropdown-group",{key:`${this.id}__scale-menu--${a}`},this._renderCustomScaleValue({currentScale:h}),e!=null?this._renderScaleMenuItem({scaleValue:e,scaleLabel:m.featuredScaleLabels.current,isSelected:h===e,valueVisible:!0}):null,A)}_renderCustomScaleValue({currentScale:e}){const{messages:i}=this,t=Math.round(e).toString();return d("calcite-dropdown-item",{afterCreate:a=>{a.setFocus()},key:"custom-scale",label:i.featuredScaleLabels.custom,onCalciteDropdownItemSelect:()=>{var a;(a=this._customInput)==null||a.setFocus()}},d("calcite-label",{scale:"s"},d("span",null,i.featuredScaleLabels.custom),d("calcite-input-number",{afterCreate:this._afterInputNumberCreate,groupSeparator:!0,inputMode:"numeric",max:y.RecommendedScales.world,min:0,numberButtonType:"none",placeholder:i.customScaleInputTooltip,prefixText:C,scale:"s",step:1,value:t,onCalciteInputNumberChange:({target:a})=>this._handleCustomScaleInputChange(t,a)})))}_renderScaleMenuItem(e){const{scaleValue:i,scaleLabel:t,valueVisible:a,isSelected:n}=e;return d("calcite-dropdown-item",{key:t,label:t,selected:n,onCalciteDropdownItemSelect:this._setScale.bind(this,i)},t,a?d("div",{class:p.scaleMenuSubLabel},this.formatScale(i)):void 0)}_renderCurrentScaleIndicator(){const{_slider:e,messages:i,view:t,viewModel:{scaleRanges:a}}=this,n=a.clampScale(t.scale),c=this.viewModel.mapScaleToSlider(n),m=c/e.max,h=i.scaleRangeLabels[a.findScaleRangeByIndex(c).id],S=G(i.currentScaleTooltip,{scaleLabel:h});return d("div",{class:p.scaleIndicatorContainer,key:"scale-indicator"},d("div",{"aria-label":S,class:p.scaleIndicator,styles:{left:100*m+"%"},title:S},this.renderCurrentScaleIndicatorIcon()))}renderCurrentScaleIndicatorIcon(){return d("calcite-icon",{class:p.scaleIndicatorIcon,icon:"caret-up",scale:"s"})}_setScale(e){this._activeMenu==="max"?this.maxScale=Math.min(e,this.effectiveMinScale-1):this.minScale=Math.max(e,this.effectiveMaxScale+1),this._setActiveMenu(null)}_setActiveMenu(e){this._activeMenu=e}};s([r()],o.prototype,"_activeMenu",void 0),s([r()],o.prototype,"_activeThumb",void 0),s([r()],o.prototype,"_customInput",void 0),s([r()],o.prototype,"_maxScaleMenuEnabled",null),s([r()],o.prototype,"_minScaleMenuEnabled",null),s([r()],o.prototype,"_slider",void 0),s([r({readOnly:!0})],o.prototype,"_interactive",null),s([r()],o.prototype,"disabled",void 0),s([r()],o.prototype,"effectiveMaxScale",null),s([r()],o.prototype,"effectiveMinScale",null),s([r()],o.prototype,"effectiveMaxScaleLimit",null),s([r()],o.prototype,"effectiveMinScaleLimit",null),s([r()],o.prototype,"icon",null),s([r()],o.prototype,"label",null),s([r()],o.prototype,"layer",null),s([r()],o.prototype,"maxScale",null),s([r()],o.prototype,"maxScaleLimit",null),s([r(),J("esri/widgets/ScaleRangeSlider/t9n/ScaleRangeSlider")],o.prototype,"messages",void 0),s([r()],o.prototype,"mode",null),s([r()],o.prototype,"minScale",null),s([r()],o.prototype,"minScaleLimit",null),s([r()],o.prototype,"region",void 0),s([r()],o.prototype,"view",null),s([r()],o.prototype,"viewModel",void 0),s([r()],o.prototype,"visibleElements",void 0),s([B("visibleElements")],o.prototype,"castVisibleElements",null),o=s([I("esri.widgets.ScaleRangeSlider")],o);const we=o;export{we as default};
