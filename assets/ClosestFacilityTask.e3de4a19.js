var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(r,t,i)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,n=(e,r)=>{for(var t in r||(r={}))s.call(r,t)&&o(e,t,r[t]);if(i)for(var t of i(r))a.call(r,t)&&o(e,t,r[t]);return e},l=(e,i)=>r(e,t(i));import{ab as p,ac as u,al as c,cM as y,cK as f,b9 as d,cN as m,ad as B,cu as b,cO as g,b8 as v,r as h,cP as P,cQ as O,L as R,cR as j}from"./vendor.d0a39f0f.js";import{y as S,a as w,u as N,d as A,c as F,p as k,o as C}from"./networkService.19b36319.js";import"./GPMessage.f41196e5.js";function J(e){return g.fromJSON(e).features.map((e=>e.geometry))}let x=class extends b{constructor(e){super(e),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(e){return J(e)}readIncidents(e){return J(e)}readPointBarriers(e,r){return J(r.barriers)}readPolylineBarriers(e){return J(e)}readPolygonBarriers(e){return J(e)}readRoutes(e){return(r=e).features.map((e=>{const t=v.fromJSON(r.spatialReference),i=m.fromJSON(e);return h(i.geometry)&&(i.geometry.spatialReference=t),i}));var r}};p([u({type:[S]})],x.prototype,"directions",void 0),p([u({type:[c]})],x.prototype,"facilities",void 0),p([y("facilities")],x.prototype,"readFacilities",null),p([u({type:[c]})],x.prototype,"incidents",void 0),p([y("incidents")],x.prototype,"readIncidents",null),p([u({type:[w]})],x.prototype,"messages",void 0),p([u({type:[c]})],x.prototype,"pointBarriers",void 0),p([y("pointBarriers",["barriers"])],x.prototype,"readPointBarriers",null),p([u({type:[f]})],x.prototype,"polylineBarriers",void 0),p([y("polylineBarriers")],x.prototype,"readPolylineBarriers",null),p([u({type:[d]})],x.prototype,"polygonBarriers",void 0),p([y("polygonBarriers")],x.prototype,"readPolygonBarriers",null),p([u({type:[m]})],x.prototype,"routes",void 0),p([y("routes")],x.prototype,"readRoutes",null),x=p([B("esri.rest.support.ClosestFacilitySolveResult")],x);var I=x;const M=C({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});let T=class extends j{constructor(e){super(e),this.url=null}solve(e,r){return async function(e,r,t){const i=[],s=[],a={},o={},p=P(e),{path:u}=p;r.incidents&&r.incidents.features&&N(r.incidents.features,s,"incidents.features",a),r.facilities&&r.facilities.features&&N(r.facilities.features,s,"facilities.features",a),r.pointBarriers&&r.pointBarriers.features&&N(r.pointBarriers.features,s,"pointBarriers.features",a),r.polylineBarriers&&r.polylineBarriers.features&&N(r.polylineBarriers.features,s,"polylineBarriers.features",a),r.polygonBarriers&&r.polygonBarriers.features&&N(r.polygonBarriers.features,s,"polygonBarriers.features",a);const c=await O(s);for(const n in a){const e=a[n];i.push(n),o[n]=c.slice(e[0],e[1])}if(A(o,i)){let e=null;try{e=await F(u,r.apiKey,t)}catch{}e&&!e.hasZ&&k(o,i)}for(const n in o)o[n].forEach(((e,t)=>{r.get(n)[t].geometry=e}));const y=l(n({},t),{query:l(n(n({},p.query),M.toQueryParams(r)),{f:"json"})}),{data:f}=await R(`${u}/solveClosestFacility`,y);return I.fromJSON(f)}(this.url,e,r)}};p([u()],T.prototype,"url",void 0),T=p([B("esri.tasks.ClosestFacilityTask")],T);var q=T;export{q as default};
