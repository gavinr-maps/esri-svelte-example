import{aC as nt,ad as L}from"./Accessor-BHnuXKD2.js";import{l as it,b as rt}from"./mathUtils-DV9iOXpW.js";import{p as ot}from"./mat4-Fi6iAz29.js";import{s as E,c as g,_ as q,A as S,P as _,u as $,g as d,R as et,o as p,r as M,p as U,E as st,j as ct,v as ut,I as at,q as ft}from"./vec32-Dvg_eL9J.js";import{t as T,n as h}from"./vec3f64-BLpZdpfb.js";import{L as V,a as j}from"./vec42-YcqnINSP.js";import{n as X,r as Y}from"./vec4f64-o2zAXfmz.js";import{e as ht}from"./common-DQOJ18NT.js";import{n as b}from"./Polyline-BmuD2-ZN.js";import{r as mt,s as gt}from"./mat3-CR8GKnhD.js";import{e as lt}from"./mat3f64-BBpwCtoL.js";import{c as f,a as dt,b as $t}from"./plane-4dpuo6-e.js";class Mt{constructor(i){this._allocator=i,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&nt(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const i=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*z);this._items.length=Math.min(i,this._items.length),this._itemsPtr=0}_grow(){for(let i=0;i<Math.max(8,Math.min(this._items.length,z));i++)this._items.push(this._allocator())}}const z=1024;function x(t){return t?Z(T(t.origin),T(t.direction)):Z(h(),h())}function Z(t,i){return{origin:t,direction:i}}function on(t,i){return L(t.origin,i.origin)&&L(t.direction,i.direction)}function en(t,i){const n=bt.get();return n.origin=t,n.direction=i,n}function sn(t,i=x()){return pt(t.origin,t.direction,i)}function _t(t,i,n=x()){return E(n.origin,t),g(n.direction,i,t),n}function pt(t,i,n=x()){return E(n.origin,t),E(n.direction,i),n}function cn(t,i){const n=q(f.get(),S(f.get(),t.direction),g(f.get(),i,t.origin));return _(n,n)}function Pt(t,i,n){const r=_(t.direction,g(n,i,t.origin));return $(n,t.origin,d(n,t.direction,r)),n}function un(t,i,n,r){const o=t.origin,e=i.origin,s=t.direction,c=i.direction,u=_(S(R,s),S(B,c));if(Math.abs(u)>=1)return null;const a=q(R,s,c),m=et(y,e,o),v=mt(F,s[0],s[1],s[2],-c[0],-c[1],-c[2],a[0],a[1],a[2]),l=gt(F,v);if(l==null)return[n,r];const W=_(p(R,l[0],l[3],l[6]),m),tt=_(p(B,l[1],l[4],l[7]),m);return $(n,o,d(y,s,W)),$(r,e,d(y,c,tt)),[n,r]}const bt=new Mt(()=>x()),y=h(),R=h(),B=h(),F=lt();function N(t,i){const n=M(t),r=it(t[2]/n),o=Math.atan2(t[1]/n,t[0]/n);return p(i,n,r,o),i}const qt=k();function k(){return X()}const St=V,wt=V;function D(t,i){return j(i,t)}function xt(t,i){return Y(t[0],t[1],t[2],i)}function At(t){return t}function vt(t){t[0]=t[1]=t[2]=t[3]=0}function yt(t,i){return t[0]=t[1]=t[2]=0,t[3]=i,t}function P(t){return t[3]}function Rt(t){return t}function Ct(t,i,n,r){return Y(t,i,n,r)}function Et(t,i,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+i,n}function jt(t,i,n){return t!==n&&D(t,n),n}function Ot(t,i){return i}function A(t,i,n){if(i==null||!G(t,i,w))return!1;let{t0:r,t1:o}=w;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(n){const{origin:e,direction:s}=i;n[0]=e[0]+s[0]*r,n[1]=e[1]+s[1]*r,n[2]=e[2]+s[2]*r}return!0}function kt(t,i,n){const r=_t(i,n);if(!G(t,r,w))return[];const{origin:o,direction:e}=r,{t0:s,t1:c}=w,u=a=>{const m=h();return ft(m,o,e,a),I(t,m,m)};return Math.abs(s-c)<ht()?[u(s)]:[u(s),u(c)]}const w={t0:0,t1:0};function G(t,i,n){const{origin:r,direction:o}=i,e=It;e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(s===0)return!1;const c=2*(o[0]*e[0]+o[1]*e[1]+o[2]*e[2]),u=c*c-4*s*(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return n.t0=(-c-a)/(2*s),n.t1=(-c+a)/(2*s),!0}const It=h();function Lt(t,i){return A(t,i,null)}function Tt(t,i,n){if(A(t,i,n))return n;const r=H(t,i,f.get());return $(n,i.origin,d(f.get(),i.direction,U(i.origin,r)/M(i.direction))),n}function H(t,i,n){const r=f.get(),o=dt.get();q(r,i.origin,i.direction);const e=P(t);q(n,r,i.origin),d(n,n,1/M(n)*e);const s=J(t,i.origin),c=$t(i.origin,n);return ot(o,c+s,r),st(n,n,o),n}function zt(t,i,n,r){const o=P(t),e=o*o,s=i+.5*Math.PI,c=n*n+e-2*Math.cos(s)*n*o,u=Math.sqrt(c),a=c-e;if(a<=0)return .5;const m=Math.sqrt(a),v=Math.acos(m/u)-Math.asin(o/(u/Math.sin(s)));return Math.min(1,(v+.5*r)/r)}function Zt(t,i,n){return A(t,i,n)?n:(Pt(i,t,n),I(t,n,n))}function I(t,i,n){const r=g(f.get(),i,t),o=d(f.get(),r,t[3]/M(r));return $(n,o,t)}function Bt(t,i){const n=g(f.get(),i,t),r=ct(n),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))}function J(t,i){const n=g(f.get(),i,t),r=M(n),o=P(t),e=o+Math.abs(o-r);return rt(o/e)}const C=h();function K(t,i,n,r){const o=g(C,i,t);switch(n){case b.X:{const e=N(o,C)[2];return p(r,-Math.sin(e),Math.cos(e),0)}case b.Y:{const e=N(o,C),s=e[1],c=e[2],u=Math.sin(s);return p(r,-u*Math.cos(c),-u*Math.sin(c),Math.cos(s))}case b.Z:return S(r,o);default:return}}function Q(t,i){const n=g(O,i,t);return M(n)-t[3]}function Ft(t,i,n,r){const o=Q(t,i),e=K(t,i,b.Z,O),s=d(O,e,n-o);return $(r,i,s)}function Nt(t,i){const n=ut(t,i),r=P(t);return n<=r*r}function Ut(t,i,n=X()){const r=U(t,i),o=t[3],e=i[3];return r+e<o?(j(n,t),n):r+o<e?(j(n,i),n):(at(n,t,i,(r+e-o)/(2*r)),n[3]=(r+o+e)/2,n)}const O=h(),Vt=k(),an=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:qt,altitudeAt:Q,angleToSilhouette:J,axisAt:K,cameraFrustumCoverage:zt,clear:vt,closestPoint:Zt,closestPointOnSilhouette:H,containsPoint:Nt,copy:D,create:k,distanceToSilhouette:Bt,elevate:Et,equals:wt,exactEquals:St,fromCenterAndRadius:xt,fromRadius:yt,fromValues:Ct,getCenter:Rt,getExtent:Ot,getRadius:P,intersectLine:kt,intersectRay:A,intersectRayClosestSilhouette:Tt,intersectsRay:Lt,projectPoint:I,setAltitudeAt:Ft,setExtent:jt,tmpSphere:Vt,union:Ut,wrap:At},Symbol.toStringTag,{value:"Module"}));export{I as $,qt as C,k as E,A as F,Lt as H,kt as I,H as K,yt as L,un as M,P as N,xt as O,zt as Q,_t as S,At as T,Rt as U,Ct as V,St as _,D as a,x as b,Ut as c,an as f,Nt as i,en as k,pt as q,Mt as s,Bt as t,Vt as u,sn as v,cn as w,on as x};
