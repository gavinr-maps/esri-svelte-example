import{S as An,O as kn}from"./Accessor-BHnuXKD2.js";import{a2 as Dn}from"./cast-BA_-jlhc.js";import{R as N,Q as p,M as On,V as wn,Y as z,n as g,i as y,z as F,ac as Fn}from"./opacityUtils-CSd4XoR2.js";import{a as x,r as A}from"./executionError-HS8X1L-B.js";import{t as _}from"./ImmutableArray-BPVd6ESQ.js";import{j as O,b as k,g as Mn}from"./Point-XGrwlf63.js";import{y as Jn,P as cn}from"./shared-M7rSkUll.js";import{l as Rn,p as In}from"./number-BWHn6sm2.js";import{i as vn,r as Pn}from"./TimeOnly-yGYcAQQJ.js";import{w as U}from"./Extent-CBBGeHb-.js";import{j as K,P as B,u as Q,g as jn}from"./Polyline-BmuD2-ZN.js";import{f as Yn}from"./jsonUtils-Cu7OBRmN.js";import{r as pn,D as mn}from"./Promise-CmQqe-ke.js";let W=class{};class M{constructor(){}}function hn(n,r,t){if(n instanceof M&&!(n instanceof $)){const a=new $;return a.fn=n,a.parameterEvaluator=t,a.context=r,a}return n}class Rr extends M{constructor(r){super(),this.fn=r}createFunction(r){return(...t)=>this.fn(r,{preparsed:!0,arguments:t})}call(r,t){return this.fn(r,t)}marshalledCall(r,t,a,e){return e(r,t,(s,l,o)=>{o=o.map(c=>c instanceof M&&!(c instanceof $)?hn(c,r,e):c);const m=this.call(a,{args:o});return An(m)?m.then(c=>hn(c,a,e)):m})}}class $ extends M{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(r){return this.fn.createFunction(this.context)}call(r,t){return this.fn.marshalledCall(r,t,this.context,this.parameterEvaluator)}marshalledCall(r,t,a){return this.fn.marshalledCall(r,t,this.context,this.parameterEvaluator)}}let v=class gn extends _{constructor(r,t,a,e,s,l){super(r),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=t,this._hasZ=a,this._hasM=e,this._cacheId=s,this._partId=l}get(r){if(this._lazyPt[r]===void 0){const t=this._elements[r];if(t===void 0)return;const a=new O(t[0],t[1],this._spRef);this._hasZ&&(a.z=t[2]),this._hasM&&(a.m=this._hasZ?t[3]:t[2]),a.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+r.toString(),this._lazyPt[r]=a}return this._lazyPt[r]}equalityTest(r){return r===this||r!==null&&r instanceof gn&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};class X extends _{constructor(r,t,a,e,s){super(r),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=a,this._hasM=e,this._spRef=t,this._cacheId=s}get(r){if(this._lazyPath[r]===void 0){const t=this._elements[r];if(t===void 0)return;this._lazyPath[r]=new v(t,this._spRef,this._hasZ,this._hasM,this._cacheId,r)}return this._lazyPath[r]}equalityTest(r){return r===this||r!==null&&r instanceof X&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class zn{constructor(r){this.value=r}}class Ln{constructor(r){this.value=r}}const b={type:"VOID"},Gn=Symbol("BREAK"),Vn=Symbol("CONTINUE");function J(n,r,t){return r===""||r==null||r===t||r===t?n:n=n.split(r).join(t)}function P(n){return n instanceof M}function nn(n){return n instanceof W}function R(n){return!!y(n)||!!g(n)||!!f(n)||!!h(n)||!!d(n)||!!p(n)||n===null||n===b||typeof n=="number"}function qn(n,r){return n===void 0?r:n}function $n(n){return n==null?"":N(n)||T(n)?"Array":f(n)?"Date":d(n)?"Time":h(n)?"DateOnly":y(n)?"String":p(n)?"Boolean":g(n)?"Number":(n==null?void 0:n.declaredClass)==="esri.arcade.Attachment"?"Attachment":(n==null?void 0:n.declaredClass)==="esri.arcade.Portal"?"Portal":(n==null?void 0:n.declaredClass)==="esri.arcade.Dictionary"?"Dictionary":on(n)?"KnowledgeGraph":n instanceof W?"Module":j(n)?"Feature":n instanceof O?"Point":n instanceof K?"Polygon":n instanceof B?"Polyline":n instanceof Q?"Multipoint":n instanceof U?"Extent":P(n)?"Function":en(n)?"FeatureSet":sn(n)?"FeatureSetCollection":tn(n)?"Voxel":n===b?"":typeof n=="number"&&isNaN(n)?"Number":"Unrecognized Type"}function rn(n){return n instanceof k}function j(n){return(n==null?void 0:n.arcadeDeclaredClass)==="esri.arcade.Feature"}function tn(n){return(n==null?void 0:n.arcadeDeclaredClass)==="esri.arcade.Voxel"}function en(n){return(n==null?void 0:n.declaredRootClass)==="esri.arcade.featureset.support.FeatureSet"}function an(n){return(n==null?void 0:n.declaredClass)==="esri.arcade.Dictionary"}function Hn(n){return an(n)||j(n)||tn(n)}function sn(n){return(n==null?void 0:n.declaredRootClass)==="esri.arcade.featureSetCollection"}function on(n){return(n==null?void 0:n.declaredClass)==="esri.rest.knowledgeGraph.KnowledgeGraph"}function T(n){return n instanceof _}function f(n){return n instanceof F}function h(n){return n instanceof vn}function d(n){return n instanceof Pn}function H(n){return n!=null&&typeof n=="object"}function En(n,r,t,a,e){if(n.length<r||n.length>t)throw new x(a,A.WrongNumberOfParameters,e)}function Un(n){return n<0?-Math.round(-n):Math.round(n)}function un(n,r){return isNaN(n)||r==null||r===""?n.toString():(r=J(r,"‰",""),r=J(r,"¤",""),Rn(n,{pattern:r}))}function G(n,r){return r==null||r===""?n.toISOString(!0):n.toFormat(bn(r),{locale:pn(),numberingSystem:"latn"})}function bn(n,r=!1){n=n.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const a=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const e of n.match(a)||[])switch(e){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="Z";break;case"ZZ":t+="ZZ";break;case"ZZZ":t+="ZZZ";break;case"ZZZZ":t+=r?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":t+=r?"[ZZZZZ]":"ZZZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=e;break;default:e.length>=2&&e.slice(0,1)==="["&&e.slice(-1)==="]"?t+=`'${e.slice(1,-1)}'`:t+=`'${e}'`}return t}function i(n,r,t){switch(t){case">":return n>r;case"<":return n<r;case">=":return n>=r;case"<=":return n<=r}return!1}function Kn(n,r,t){if(n===null){if(r===null||r===b)return i(null,null,t);if(g(r))return i(0,r,t);if(y(r)||p(r))return i(0,u(r),t);if(f(r))return i(0,r.toNumber(),t);if(d(r)||h(r))return i(n,r.toNumber(),t)}if(n===b){if(r===null||r===b)return i(null,null,t);if(g(r))return i(0,r,t);if(y(r)||p(r))return i(0,u(r),t);if(f(r))return i(0,r.toNumber(),t);if(d(r)||h(r))return i(n,r.toNumber(),t)}else if(g(n)){if(g(r))return i(n,r,t);if(p(r))return i(n,u(r),t);if(r===null||r===b)return i(n,0,t);if(y(r))return i(n,u(r),t);if(f(r)||d(r)||h(r))return i(n,r.toNumber(),t)}else if(y(n)){if(y(r))return i(C(n),C(r),t);if(f(r)||d(r)||h(r))return i(u(n),r.toNumber(),t);if(g(r))return i(u(n),r,t);if(r===null||r===b)return i(u(n),0,t);if(p(r))return i(u(n),u(r),t)}else if(f(n)){if(f(r))return n.timeZone!==r.timeZone&&(n.isUnknownTimeZone?n=F.arcadeDateAndZoneToArcadeDate(n,r.timeZone):r.isUnknownTimeZone&&(r=F.arcadeDateAndZoneToArcadeDate(r,n.timeZone))),i(n.toNumber(),r.toNumber(),t);if(r===null||r===b)return i(n.toNumber(),0,t);if(g(r))return i(n.toNumber(),r,t);if(p(r)||y(r))return i(n.toNumber(),u(r),t);if(d(r))throw new x(null,A.CannotCompareDateAndTime,null);if(h(r))return i(n.toNumber(),r.toNumber(),t)}else if(p(n)){if(p(r))return i(n,r,t);if(g(r))return i(u(n),u(r),t);if(f(r)||d(r)||h(r))return i(u(n),r.toNumber(),t);if(r===null||r===b)return i(u(n),0,t);if(y(r))return i(u(n),u(r),t)}else if(h(n)){if(f(r))return i(n.toNumber(),r.toNumber(),t);if(r===null||r===b)return i(n.toNumber(),0,t);if(g(r))return i(n.toNumber(),r,t);if(p(r)||y(r))return i(n.toNumber(),u(r),t);if(d(r))throw new x(null,A.CannotCompareDateAndTime,null);if(h(r))return i(n.toNumber(),r.toNumber(),t)}else if(d(n)){if(f(r))throw new x(null,A.CannotCompareDateAndTime,null);if(r===null||r===b)return i(n.toNumber(),0,t);if(g(r))return i(n.toNumber(),r,t);if(p(r)||y(r))return i(n.toNumber(),u(r),t);if(d(r))return i(n.toNumber(),r.toNumber(),t);if(h(r))throw new x(null,A.CannotCompareDateAndTime,null)}return!!Sn(n,r)&&(t==="<="||t===">=")}function Sn(n,r){if(n===r||n===null&&r===b||r===null&&n===b)return!0;if(f(n)&&f(r)||d(n)&&d(r)||h(n)&&h(r))return n.equals(r);if(n instanceof X||n instanceof v)return n.equalityTest(r);if(n instanceof O&&r instanceof O){const t=n.cache._arcadeCacheId,a=r.cache._arcadeCacheId;if(t!=null)return t===a}return!!(H(n)&&H(r)&&(n._arcadeCacheId===r._arcadeCacheId&&n._arcadeCacheId!==void 0&&n._arcadeCacheId!==null||n._underlyingGraphic===r._underlyingGraphic&&n._underlyingGraphic!==void 0&&n._underlyingGraphic!==null))}function Bn(n,{useNumbersForDates:r}){let t="";for(const a in n){t!==""&&(t+=",");const e=n[a];e==null?t+=JSON.stringify(a)+":null":p(e)||g(e)||y(e)?t+=JSON.stringify(a)+":"+JSON.stringify(e):rn(e)?t+=JSON.stringify(a)+":"+D(e):d(e)||h(e)?t+=`${JSON.stringify(a)}:${JSON.stringify(e.toString())}`:T(e)||Array.isArray(e)?t+=JSON.stringify(a)+":"+D(e,null,r):f(e)?t+=r?JSON.stringify(a)+":"+JSON.stringify(e.getTime()):JSON.stringify(a)+":"+e.stringify():e!==null&&typeof e=="object"&&"castToText"in e&&(t+=JSON.stringify(a)+":"+e.castToText(r))}return"{"+t+"}"}function C(n,r){if(y(n))return n;if(n===null)return"";if(g(n))return un(n,r);if(p(n))return n.toString();if(f(n))return G(n,r);if(d(n)||h(n))return n.toFormat(r);if(n instanceof k)return JSON.stringify(n.toJSON());if(N(n)){const t=[];for(let a=0;a<n.length;a++)t[a]=L(n[a]);return"["+t.join(",")+"]"}if(n instanceof _){const t=[];for(let a=0;a<n.length();a++)t[a]=L(n.get(a));return"["+t.join(",")+"]"}return n!==null&&typeof n=="object"&&"castToText"in n?n.castToText():P(n)?"object, Function":n===b?"":nn(n)?"object, Module":""}function Qn(n){const r=[];if(n instanceof _){for(let t=0;t<n.length();t++)r[t]=u(n.get(t));return r}if(!N(n))return null;for(let t=0;t<n.length;t++)r[t]=u(n[t]);return r}function D(n,r,t=!1){if(y(n))return n;if(n===null)return"";if(g(n))return un(n,r);if(p(n))return n.toString();if(f(n))return G(n,r);if(d(n)||h(n))return n.toFormat(r);if(n instanceof k)return n instanceof U?'{"xmin":'+n.xmin.toString()+',"ymin":'+n.ymin.toString()+","+(n.hasZ?'"zmin":'+n.zmin.toString()+",":"")+(n.hasM?'"mmin":'+n.mmin.toString()+",":"")+'"xmax":'+n.xmax.toString()+',"ymax":'+n.ymax.toString()+","+(n.hasZ?'"zmax":'+n.zmax.toString()+",":"")+(n.hasM?'"mmax":'+n.mmax.toString()+",":"")+'"spatialReference":'+E(n.spatialReference)+"}":E(n.toJSON(),(a,e)=>a.key===e.key?0:a.key==="spatialReference"?1:e.key==="spatialReference"||a.key<e.key?-1:a.key>e.key?1:0);if(N(n)){const a=[];for(let e=0;e<n.length;e++)a[e]=L(n[e],t);return"["+a.join(",")+"]"}if(n instanceof _){const a=[];for(let e=0;e<n.length();e++)a[e]=L(n.get(e),t);return"["+a.join(",")+"]"}return n!==null&&typeof n=="object"&&"castToText"in n?n.castToText(t):P(n)?"object, Function":n===b?"":nn(n)?"object, Module":""}function L(n,r=!1){if(n===null)return"null";if(p(n)||g(n)||y(n))return JSON.stringify(n);if(n instanceof k||n instanceof _||Array.isArray(n))return D(n,null,r);if(f(n))return JSON.stringify(r?n.getTime():G(n,""));if(d(n)||h(n))return JSON.stringify(n.toString());if(n!==null&&typeof n=="object"){if("castToText"in n)return n.castToText(r)}else if(n===b)return"null";return"null"}function u(n,r){return g(n)?n:n===null||n===""?0:f(n)||h(n)||d(n)?NaN:p(n)?n?1:0:N(n)||n===""||n===void 0?NaN:r!==void 0&&y(n)?(r=J(r,"‰",""),r=J(r,"¤",""),In(n,{pattern:r})):n===b?0:Number(n)}function Wn(n,r){if(f(n))return n;if(y(n)){const t=Xn(n,r);if(t)return F.dateTimeToArcadeDate(t)}return null}function Xn(n,r){const t=/ (\d\d)/,a=Fn(r);let e=mn.fromISO(n,{zone:a});return e.isValid||t.test(n)&&(n=n.replace(t,"T$1"),e=mn.fromISO(n,{zone:r}),e.isValid)?e:null}function nr(n){return p(n)?n:y(n)?(n=n.toLowerCase())==="true":!!g(n)&&n!==0&&!isNaN(n)}function rr(n,r){const t=JSON.parse(n);return t&&!t.spatialReference&&(t.spatialReference=r),Yn(t)}function tr(n,r){return n==null?null:(n.spatialReference!==null&&n.spatialReference!==void 0||(n.spatialReference=r),n)}function er(n){if(n===null)return null;if(n instanceof O)return n.x==="NaN"||n.x===null||isNaN(n.x)?null:n;if(n instanceof K){if(n.rings.length===0)return null;for(const r of n.rings)if(r.length>0)return n;return null}if(n instanceof B){if(n.paths.length===0)return null;for(const r of n.paths)if(r.length>0)return n;return null}return n instanceof Q?n.points.length===0?null:n:n instanceof U?n.xmin==="NaN"||n.xmin===null||isNaN(n.xmin)?null:n:null}function Nn(n,r){if(!n||!n.domain)return r;let t=null,a=null;if(f(r))t=r.toNumber();else if(h(r))t=r.toString();else if(d(r))t=r.toStorageString();else if(n.field.type==="string"||n.field.type==="esriFieldTypeString")t=C(r);else{if(r==null)return null;if(r==="")return r;t=u(r)}for(let e=0;e<n.domain.codedValues.length;e++){const s=n.domain.codedValues[e];s.code===t&&(a=s)}return a===null?C(r):a.name}function Zn(n,r){if(!n||!n.domain)return r;let t=null;const a=C(r);for(let e=0;e<n.domain.codedValues.length;e++){const s=n.domain.codedValues[e];s.name===a&&(t=s)}return t===null?r:t.code}function V(n,r,t=null,a=null){if(!r||!r.fields)return null;let e,s,l=null;for(let S=0;S<r.fields.length;S++){const Z=r.fields[S];Z.name.toLowerCase()===n.toString().toLowerCase()&&(l=Z)}if(l===null)throw new x(null,A.FieldNotFound,null,{key:n});let o=r.typeIdField,m="id",c=r.types;if(r.subtypeField&&(o=r.subtypeField,m="code",c=r.subtypes??[]),a===null&&t&&o)a=t.hasField(o)?t.field(o):null;else if(o&&a!==null){let S=!1;for(const Z of c||[])if(a===Z[m]){S=!0;break}if(!S){for(const Z of c||[])if(a===Z.name){a=Z[m],S=!0;break}}S||(a=null,t&&o&&(a=t.hasField(o)?t.field(o):null))}return a!=null&&c.some(S=>{var Z;return S[m]===a&&(e=(Z=S.domains)==null?void 0:Z[l.name],e&&e.type==="inherited"&&(e=dn(l.name,r),s=!0),!0)}),s||e||(e=dn(n,r)),{field:l,domain:e}}function dn(n,r){let t;return r.fields.some(a=>(a.name.toLowerCase()===n.toLowerCase()&&(t=a.domain),!!t)),t}function E(n,r){r||(r={}),typeof r=="function"&&(r={cmp:r});const t=typeof r.cycles=="boolean"&&r.cycles,a=r.cmp&&(e=r.cmp,function(l){return function(o,m){const c={key:o,value:l[o]},S={key:m,value:l[m]};return e(c,S)}});var e;const s=[];return function l(o){if(o!=null&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o===void 0)return;if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);let m,c;if(Array.isArray(o)){for(c="[",m=0;m<o.length;m++)m&&(c+=","),c+=l(o[m])||"null";return c+"]"}if(o===null)return"null";if(s.includes(o)){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const S=s.push(o)-1,Z=Object.keys(o).sort(a==null?void 0:a(o));for(c="",m=0;m<Z.length;m++){const ln=Z[m],fn=l(o[ln]);fn&&(c&&(c+=","),c+=JSON.stringify(ln)+":"+fn)}return s.splice(S,1),"{"+c+"}"}(n)}function ar(n){if(n===null)return null;const r=[];for(const t of n)j(t)?r.push(t.geometry()):r.push(t);return r}function w(n,r){if(!(r instanceof O))throw new x(null,A.InvalidParameter,null);n.push(r.hasZ?r.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])}function ir(n,r){if(N(n)||T(n)){let t=!1,a=!1,e=[],s=r;if(N(n)){for(const l of n)w(e,l);e.length>0&&(s=n[0].spatialReference,t=n[0].hasZ,a=n[0].hasM)}else if(n instanceof v)e=n._elements,e.length>0&&(t=n._hasZ,a=n._hasM,s=n.get(0).spatialReference);else{if(!T(n))throw new x(null,A.InvalidParameter,null);for(const l of n.toArray())w(e,l);e.length>0&&(s=n.get(0).spatialReference,t=n.get(0).hasZ===!0,a=n.get(0).hasM===!0)}return e.length===0?null:(jn(e)||(e=e.slice().reverse()),new K({rings:[e],spatialReference:s,hasZ:t,hasM:a}))}return n}function sr(n,r){if(N(n)||T(n)){let t=!1,a=!1,e=[],s=r;if(N(n)){for(const l of n)w(e,l);e.length>0&&(s=n[0].spatialReference,t=n[0].hasZ===!0,a=n[0].hasM===!0)}else if(n instanceof v)e=n._elements,e.length>0&&(t=n._hasZ,a=n._hasM,s=n.get(0).spatialReference);else if(T(n)){for(const l of n.toArray())w(e,l);e.length>0&&(s=n.get(0).spatialReference,t=n.get(0).hasZ===!0,a=n.get(0).hasM===!0)}return e.length===0?null:new B({paths:[e],spatialReference:s,hasZ:t,hasM:a})}return n}function or(n,r){if(N(n)||T(n)){let t=!1,a=!1,e=[],s=r;if(N(n)){for(const l of n)w(e,l);e.length>0&&(s=n[0].spatialReference,t=n[0].hasZ===!0,a=n[0].hasM===!0)}else if(n instanceof v)e=n._elements,e.length>0&&(t=n._hasZ,a=n._hasM,s=n.get(0).spatialReference);else if(T(n)){for(const l of n.toArray())w(e,l);e.length>0&&(s=n.get(0).spatialReference,t=n.get(0).hasZ===!0,a=n.get(0).hasM===!0)}return e.length===0?null:new Q({points:e,spatialReference:s,hasZ:t,hasM:a})}return n}function ur(n,r=!1){const t=[];if(n===null)return t;if(N(n)===!0){for(let a=0;a<n.length;a++){const e=C(n[a]);e===""&&r!==!0||t.push(e)}return t}if(n instanceof _){for(let a=0;a<n.length();a++){const e=C(n.get(a));e===""&&r!==!0||t.push(e)}return t}if(R(n)){const a=C(n);return a===""&&r!==!0||t.push(a),t}return[]}let q=0;function lr(n){return q++,q%100==0?(q=0,new Promise(r=>{setTimeout(()=>{r(n)},0)})):n}function fr(n,r,t){switch(t){case"&":return n&r;case"|":return n|r;case"^":return n^r;case"<<":return n<<r;case">>":return n>>r;case">>>":return n>>>r}}function I(n,r=null){return n==null?null:p(n)||g(n)||y(n)?n:n instanceof k?(r==null?void 0:r.keepGeometryType)===!0?n:n.toJSON():n instanceof _?n.toArray().map(t=>I(t,r)):Array.isArray(n)?n.map(t=>I(t,r)):z(n)?n:f(n)?n.toJSDate():d(n)?n.toString():h(n)?n.toJSDate():n!==null&&typeof n=="object"&&n.castAsJson!==void 0?n.castAsJson(r):null}async function cr(n,r,t,a,e){const s=await Tn(n,r,t);e[a]=s}async function Tn(n,r=null,t=null){if(n instanceof _&&(n=n.toArray()),n==null)return null;if(R(n)||n instanceof k||z(n)||f(n))return I(n,t);if(Array.isArray(n)){const a=[],e=[];for(const s of n)s===null||R(s)||s instanceof k||z(s)||f(s)?e.push(I(s,t)):(e.push(null),a.push(cr(s,r,t,e.length-1,e)));return a.length>0&&await Promise.all(a),e}return n!==null&&typeof n=="object"&&n.castAsJsonAsync!==void 0?n.castAsJsonAsync(r,t):null}function Y(n){return _n(n)?n.parent:n}function _n(n){return n&&"declaredClass"in n&&n.declaredClass==="esri.layers.support.SubtypeSublayer"}function mr(n){return n&&"declaredClass"in n&&n.declaredClass==="esri.layers.SubtypeGroupLayer"}function hr(n,r,t){const a=Y(n.fullSchema());return a===null||!a.fields?null:V(r,a,n,t)}function dr(n){const r=Y(n.fullSchema());return r===null?null:r.fields?r.subtypeField?{subtypeField:r.subtypeField,subtypes:r.subtypes?r.subtypes.map(t=>({name:t.name,code:t.code})):[]}:r.typeIdField?{subtypeField:r.typeIdField,subtypes:r.types?r.types.map(t=>({name:t.name,code:t.id})):[]}:null:null}function yr(n,r,t,a){const e=Y(n.fullSchema());if(e===null||!e.fields)return null;const s=V(r,e,n,a);if(t===void 0)try{t=n.field(r)}catch{return null}return Nn(s,t)}function pr(n,r,t,a){const e=Y(n.fullSchema());if(e===null||!e.fields)return null;if(t===void 0){try{t=n.field(r)}catch{return null}return t}return Zn(V(r,e,n,a),t)}function gr(n){return(n==null?void 0:n.timeZone)??"system"}function br(n){const r=Y(n.fullSchema());if(r===null||!r.fields)return null;const t=[];for(const a of r.fields)t.push(Jn(a));return{objectIdField:r.objectIdField,globalIdField:r.globalIdField??"",geometryType:cn[r.geometryType]===void 0?"":cn[r.geometryType],fields:t}}function Sr(n,r){const t=F.systemTimeZoneCanonicalName;return n==="system"&&(n=t),{version:Cn,engineVersion:Dn,timeZone:n,userTimeZone:t,spatialReference:r instanceof Mn?r.toJSON():r,application:kn.applicationName??"",engine:"web",locale:pn()}}const Cn="1.30",Ir=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:Ln,ReturnResult:zn,absRound:Un,arcadeVersion:Cn,autoCastArrayOfPointsToMultiPoint:or,autoCastArrayOfPointsToPolygon:ir,autoCastArrayOfPointsToPolyline:sr,autoCastFeatureToGeometry:ar,binaryOperator:fr,breakResult:Gn,castAsJson:I,castAsJsonAsync:Tn,castRecordToText:Bn,continueResult:Vn,defaultExecutingContext:Sr,defaultTimeZone:gr,defaultUndefined:qn,equalityTest:Sn,featureDomainCodeLookup:pr,featureDomainValueLookup:yr,featureFullDomain:hr,featureSchema:br,featureSubtypes:dr,fixNullGeometry:er,fixSpatialReference:tr,formatDate:G,formatNumber:un,getDomain:V,getDomainCode:Zn,getDomainValue:Nn,getType:$n,greaterThanLessThan:Kn,isArray:N,isBoolean:p,isDate:f,isDateOnly:h,isDictionary:an,isDictionaryLike:Hn,isFeature:j,isFeatureSet:en,isFeatureSetCollection:sn,isFunctionParameter:P,isGeometry:rn,isGraphic:On,isImmutableArray:T,isInteger:wn,isJsDate:z,isKnowledgeGraph:on,isModule:nn,isNumber:g,isObject:H,isSimpleType:R,isString:y,isSubtypeGrouplayer:mr,isSubtypeSublayer:_n,isTime:d,isVoxel:tn,multiReplace:J,parseGeometryFromJson:rr,pcCheck:En,stableStringify:E,standardiseDateFormat:bn,tick:lr,toBoolean:nr,toDate:Wn,toNumber:u,toNumberArray:Qn,toString:C,toStringArray:ur,toStringExplicit:D,voidOperation:b},Symbol.toStringTag,{value:"Module"}));function vr(n){xn=n}let xn;function yn(n){return n===null?null:f(n)?n.clone():R(n)?n:rn(n)?n.clone():T(n)?n.toArray().map(r=>yn(r)):N(n)?n.map(r=>yn(r)):j(n)?xn.createFromArcadeFeature(n):sn(n)||en(n)?n:an(n)||(n==null?void 0:n.declaredClass)==="esri.arcade.Attachment"?n.deepClone():((n==null?void 0:n.declaredClass)==="esri.arcade.Portal"||on(n)||n instanceof W||P(n),n)}export{pr as $,tr as A,en as B,_n as C,Zn as D,hr as E,ar as F,P as G,j as H,Ln as I,ir as J,br as K,Vn as L,sr as M,Wn as N,V as O,J as P,sn as Q,or as R,yn as S,I as T,rn as U,Tn as V,Hn as W,on as X,Gn as Y,nr as Z,zn as _,T as a,R as a0,v as a1,X as a2,vr as a3,$n as a4,bn as a5,Un as a6,er as a7,tn as a8,Qn as a9,Sr as aa,Ir as ab,u as b,Kn as c,fr as d,Rr as e,$ as f,d as g,h,gr as i,ur as j,dr as k,yr as l,Sn as m,hn as n,En as o,Nn as p,qn as q,M as r,W as s,f as t,D as u,b as v,an as w,Bn as x,C as y,lr as z};
