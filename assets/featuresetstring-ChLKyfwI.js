import{C as y}from"./arcade-BXELiP5l.js";import{a as o,r as c}from"./executionError-DNkSe-Q-.js";import{o as d,H as m,E as b,y as p,B as u,O as f,k as T,i as v,l as A,p as g,$ as x,D,q as F,u as O,K as V}from"./deepClone-DD9qKKD3.js";import{b as l}from"./shared-2m9g3-y2.js";import"./index-4eY77cms.js";import"./opacityUtils-Dim20wpZ.js";import"./Accessor-BmwT4B0c.js";import"./Promise-DfET-uns.js";import"./cast-CsZslgGN.js";import"./JSONSupport-DcrLLGjL.js";import"./Point-Cz2JYYmX.js";import"./writer-DKgfqj4X.js";import"./ImmutableArray-BPVd6ESQ.js";import"./jsonUtils-CwFG8yN4.js";import"./Extent-g5W9hy0j.js";import"./Polyline-s-JzsQqo.js";import"./mathUtils-Cfq9PL9W.js";import"./TimeOnly-CveCl9ie.js";import"./featureConversionUtils-CvnFcmH_.js";import"./aaBoundingBox-Dw3yBk2f.js";import"./OptimizedFeature-P2towpqD.js";import"./memoryEstimations-Bcyf-mHz.js";import"./OptimizedGeometry-BJqUA4Pi.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./FieldsIndex-FW1AMU67.js";import"./timeZoneUtils-DxzjpEBb.js";import"./WhereClause-xGR0ztic.js";import"./unitConversion-DvIVg62C.js";import"./number-QOqKffTG.js";import"./hash-CcEbRgUF.js";import"./uuid-Cl5lrJ4c.js";import"./Portal-CmmHxpLg.js";import"./Field-BDG0QV_T.js";import"./enumeration-DpvDkLNI.js";import"./fieldType-CBeoJWlv.js";function w(r,n){return r&&r.domain?r.domain.type==="coded-value"||r.domain.type==="codedValue"?y.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:l[r.field.type],codedValues:r.domain.codedValues.map(e=>({name:e.name,code:e.code}))},v(n)):y.convertObjectToArcadeDictionary({type:"range",name:r.domain.name,dataType:l[r.field.type],min:r.domain.minValue,max:r.domain.maxValue},v(n)):null}function dt(r){r.mode==="async"&&(r.functions.domain=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,2,3,n,e),m(t[0]))return w(b(t[0],p(t[1]),t[2]===void 0?void 0:t[2]),n);if(u(t[0]))return await t[0]._ensureLoaded(),w(f(p(t[1]),t[0],null,t[2]===void 0?void 0:t[2]),n);throw new o(n,c.InvalidParameter,e)})},r.functions.subtypes=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,1,1,n,e),m(t[0])){const a=T(t[0]);return a?y.convertObjectToArcadeDictionary(a,v(n)):null}if(u(t[0])){await t[0]._ensureLoaded();const a=t[0].subtypeMetaData();return a?y.convertObjectToArcadeDictionary(a,v(n)):null}throw new o(n,c.InvalidParameter,e)})},r.functions.domainname=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,2,4,n,e),m(t[0]))return A(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(u(t[0])){await t[0]._ensureLoaded();const a=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return g(a,t[2])}throw new o(n,c.InvalidParameter,e)})},r.signatures.push({name:"domainname",min:2,max:4}),r.functions.domaincode=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,2,4,n,e),m(t[0]))return x(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(u(t[0])){await t[0]._ensureLoaded();const a=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return D(a,t[2])}throw new o(n,c.InvalidParameter,e)})},r.signatures.push({name:"domaincode",min:2,max:4}),r.functions.text=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,1,2,n,e),u(t[0])){const a=F(t[1],"");if(a==="")return t[0].castToText();if(a.toLowerCase()==="schema")return t[0].convertToText("schema",i.abortSignal);if(a.toLowerCase()==="featureset")return t[0].convertToText("featureset",i.abortSignal);throw new o(n,c.InvalidParameter,e)}return O(t[0],t[1])})},r.functions.gdbversion=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,1,1,n,e),m(t[0]))return t[0].gdbVersion();if(u(t[0]))return(await t[0].load()).gdbVersion;throw new o(n,c.InvalidParameter,e)})},r.functions.schema=function(n,e){return r.standardFunctionAsync(n,e,async(i,s,t)=>{if(d(t,1,1,n,e),u(t[0]))return await t[0].load(),y.convertObjectToArcadeDictionary(t[0].schema(),v(n));if(m(t[0])){const a=V(t[0]);return a?y.convertObjectToArcadeDictionary(a,v(n)):null}throw new o(n,c.InvalidParameter,e)})})}export{dt as registerFunctions};
