import{i as m,L as y,u,c as w,n as f,x as $,s as b,b as g,a as _,p as M,G as E,w as v}from"./index-tefRSezt.js";import{p as d}from"./reactiveUtils-BR0C1Kq4.js";import{s as x}from"./useT9n-B0I3cNlQ.js";import{r as C}from"./signal-DSa0yokC.js";import{p as r}from"./component-utils-DWY0IMHC.js";import{e as P}from"./globalCss-CyPh17x2.js";import"./Accessor-BHnuXKD2.js";import"./Evented-DCWccWGU.js";import"./SimpleObservable-7oieNGD8.js";function R(s,t){return C(s,t)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const D=s=>A(s);class k extends E{constructor(t){super(t),this._view$=R(void 0),this._viewDestroyHandle=void 0,this._arcgisReadyEmitted=!1;const{el:e}=t,a=e.view;this.setProvisionalExports(void 0),Object.defineProperty(e,"view",{get:()=>this._view$.value,set:i=>{if(this.exports===i)return;const n=e.view;this._view$.value=i,this.exports=i,this.component.requestUpdate("view",n),!this._arcgisReadyEmitted&&i!=null&&(this._arcgisReadyEmitted=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),t!==e&&Object.defineProperty(t,"view",{get:()=>e.view,set:i=>{e.view=i}}),queueMicrotask(()=>{a&&(e.view=a)})}hostConnected(){this._viewDestroyHandle??(this._viewDestroyHandle=d(()=>{var t;return(t=this._view$.value)==null?void 0:t.destroyed},()=>{var t,e;return void((e=(t=this.component).destroy)==null?void 0:e.call(t).catch(console.error))},{sync:!0})),this.component.manager.loadedCalled&&r(this.component)}hostLoad(){this.component.manager.destroyed||this._watchMetaProperties()}hostLoaded(){var a;const{el:t}=this.component,e=((a=t.shadowRoot)==null?void 0:a.firstElementChild)??t.firstElementChild??void 0;t.childElem=e??t.childElem,t.isConnected&&r(this.component)}hostDisconnected(){var t,e;typeof this.component.el.childElem=="object"&&((e=(t=this._view$.value)==null?void 0:t.ui)==null||e.remove(this.component.el.childElem))}hostDestroy(){var t;(t=this._viewDestroyHandle)==null||t.remove()}_watchMetaProperties(){v(this.component,"position",t=>{this.component.el.childElem!=null&&typeof t=="string"&&r(this.component)}),v(this.component,"referenceElement",()=>r(this.component))}}const A=M(k),N="arcgis-navigation-toggle",j={base:N},H=m`@layer{.arcgis-navigation-toggle{display:flex;inline-size:fit-content;block-size:fit-content}}`,l={pan:"move",rotate:"rotate"},o=class o extends y{constructor(){super(...arguments),this.view=D(this),this._messages=x(),this.autoDestroyDisabled=!1,this.icon=l.pan,this.layout="vertical",this.navigationMode="pan",this.position="top-left",this.state="disabled",this.arcgisPropertyChange=u()("layout","state"),this.arcgisReady=w()}async destroy(){await this.manager.destroy()}async toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}load(){this.manager.onLifecycle(()=>[d(()=>{var t,e;return(e=(t=this.view)==null?void 0:t.navigation)==null?void 0:e.actionMap},()=>this._updateNavigationActionMap()),d(()=>{const{view:t}=this;return t!=null&&t.ready&&(t==null?void 0:t.type)==="3d"?"ready":"disabled"},t=>{this.state=t},{sync:!0,initial:!0})])}willUpdate(t){t.has("navigationMode")&&this._updateNavigationActionMap()}_onPanClick(){this.navigationMode="pan"}_onRotateClick(){this.navigationMode="rotate"}_updateNavigationActionMap(){var a,i;const t=(i=(a=this.view)==null?void 0:a.navigation)==null?void 0:i.actionMap;if(!t)return;const e=this.navigationMode==="pan";t.dragPrimary=e?"pan":"rotate",t.dragSecondary=e?"rotate":"pan"}render(){const{_messages:t,navigationMode:e,state:a}=this,i=t.pan??"",n=t.rotate??"",c=a==="disabled",p=e==="pan";return $`<calcite-action-bar class=${b({[j.base]:!0,[P.disabled]:c})} expand-disabled .layout=${this.layout} scale=s><calcite-action .active=${p} appearance=solid data-testid=navigation-toggle-pan .disabled=${c} .icon=${l.pan} @click=${this._onPanClick} scale=s .text=${i} title=${i??g}></calcite-action><calcite-action .active=${!p} appearance=solid data-testid=navigation-toggle-rotate .disabled=${c} .icon=${l.rotate} @click=${this._onRotateClick} scale=s .text=${n} title=${n??g}></calcite-action></calcite-action-bar>`}};o.properties={autoDestroyDisabled:5,icon:3,label:1,layout:3,navigationMode:3,position:1,referenceElement:1,state:3},o.shadowRootOptions=f,o.styles=H;let h=o;_("arcgis-navigation-toggle",h);export{h as ArcgisNavigationToggle};
