import{f,U as v}from"./assets-C2mb-ea2.js";import{y as m,b as y,c}from"./subclass-BR3PhgZG.js";import{f as l,i as d,s as j}from"./utils-D61i9O7E.js";import{r as N}from"./serverVersionUtils-D13-2X18.js";import{e as i}from"./Evented-CXIxDjmW.js";import"./index-CeCSsEgo.js";import"./Accessor-D6mNnsWy.js";let r=class extends f{constructor(s){super(s),this.moment=null,this.success=!1}};i([m({type:Date,json:{type:Number,write:{writer:(s,t)=>{t.moment=s?s.getTime():null}}}})],r.prototype,"moment",void 0),i([m({type:Boolean,json:{write:!0}})],r.prototype,"success",void 0),r=i([y("esri.rest.versionManagement.gdbVersion.support.PostResult")],r);const S=r,n=new Map;async function A(s,t,o,u){n.has(s)||await N(n,s);const e=n.get(s);if(((e==null?void 0:e.serverVersion)??0)<=11.1)throw new c("post:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!t)throw new c("post:missing-guid","guid for version is missing");const p=l(s),a=o.toJSON();o.rows&&(a.rows=JSON.stringify(o.rows));const w=d(p.query,{query:j({...a,f:"json"}),...u,method:"post"});t.startsWith("{")&&(t=t.slice(1,-1));const g=`${p.path}/versions/${t}/post`,{data:h}=await v(g,w);return S.fromJSON(h)}export{A as post,n as serverVersionCacheMap};
