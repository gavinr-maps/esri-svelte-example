import{i as H,L as R,u as V,c as E,n as O,x as u,s as _,d as x,e as P,b as U,a as k}from"./index-tefRSezt.js";import{r as c,m as p,a as K,g as S}from"./Accessor-BHnuXKD2.js";import{V as b,d as $,P as L}from"./reactiveUtils-BR0C1Kq4.js";import{p as m}from"./ClipRect-XfrmCbGe.js";import{s as T}from"./useT9n-B0I3cNlQ.js";import{u as N}from"./useViewModel-BxErfUSG.js";import{e as D}from"./globalCss-CyPh17x2.js";import{i as M}from"./legacyIcon-COdSjLjS.js";import"./Evented-DCWccWGU.js";import"./SimpleObservable-7oieNGD8.js";import"./JSONSupport-CGdeqxpk.js";import"./index-BkKcLxWB.js";import"./component-utils-DWY0IMHC.js";function B(t,i){const e=10**i;return Math.round(t*e)/e}const f={left:0,right:0,top:0,bottom:0};let l=class extends S{constructor(t){super(t),this._leadingClips=new Map,this._trailingClips=new Map,this.direction="horizontal",this.leadingLayers=new b,this.max=100,this.min=0,this.precision=4,this.step=.5,this.stepMultiplier=10,this.trailingLayers=new b,this.view=null}initialize(){this.addHandles([$(()=>{var t;return[this.view,(t=this.view)==null?void 0:t.ready,this.position,this.direction]},()=>this._clipLayers(),L),$(()=>this.leadingLayers.toArray(),()=>this._clipLeadingLayers(),L),$(()=>this.trailingLayers.toArray(),()=>this._clipTrailingLayers(),L)])}destroy(){this._removeExistingClips()}get position(){return 25}set position(t){const{precision:i,min:e,max:r}=this;this._set("position",B(Math.max(Math.min(t,r),e),i))}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}_clipLayers(){this._clipLeadingLayers(),this._clipTrailingLayers()}_clipLeadingLayers(){this._removeClips("leading");const{leadingLayers:t}=this;t.forEach(i=>this._clipLayer({layer:i,type:"leading"}))}_clipTrailingLayers(){this._removeClips("trailing");const{trailingLayers:t}=this;t.forEach(i=>this._clipLayer({layer:i,type:"trailing"}))}async _getLayerView(t){const{view:i}=this;if(!t||!i)return null;const e=await i.whenLayerView(t);return"clips"in e?e:null}_getVerticalClipRect(t){const{position:i}=this;return t==="leading"?new m({...f,bottom:100-i+"%"}):t==="trailing"?new m({...f,top:`${i}%`}):null}_getHorizontalClipRect(t){const{position:i}=this;return t==="leading"?new m({...f,right:100-i+"%"}):t==="trailing"?new m({...f,left:`${i}%`}):null}_getClipRect(t){const{direction:i}=this;return i==="vertical"?this._getVerticalClipRect(t):i==="horizontal"?this._getHorizontalClipRect(t):null}async _clipLayer(t){const{_leadingClips:i,_trailingClips:e}=this,{layer:r,type:a}=t,s=a==="trailing"?e:a==="leading"?i:null,o=await this._getLayerView(r);if(!(o&&"clips"in o&&s&&o.hasOwnProperty("clips")))return;const d=s.get(o);d&&o.clips.remove(d);const n=this._getClipRect(a);n&&(s.set(o,n),o.clips.add(n))}_removeClips(t){const{_leadingClips:i,_trailingClips:e}=this,r=t==="trailing"?e:t==="leading"?i:null;r&&(r.forEach((a,s)=>{s&&s.hasOwnProperty("clips")&&s.clips.remove(a)}),r.clear())}_removeExistingClips(){this._removeClips("leading"),this._removeClips("trailing")}};c([p()],l.prototype,"direction",void 0),c([p({type:b,nonNullable:!0})],l.prototype,"leadingLayers",void 0),c([p({readOnly:!0})],l.prototype,"max",void 0),c([p({readOnly:!0})],l.prototype,"min",void 0),c([p()],l.prototype,"position",null),c([p()],l.prototype,"precision",void 0),c([p({readOnly:!0})],l.prototype,"state",null),c([p()],l.prototype,"step",void 0),c([p()],l.prototype,"stepMultiplier",void 0),c([p({type:b,nonNullable:!0})],l.prototype,"trailingLayers",void 0),c([p()],l.prototype,"view",void 0),l=c([K("esri.widgets.Swipe.SwipeViewModel")],l);const I=l;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const X=H`@layer{arcgis-swipe,.arcgis-swipe{position:absolute;margin:0;background:transparent!important;padding:0;width:100%;height:100%;overflow:hidden;user-select:none}.arcgis-swipe,.arcgis-ui .arcgis-swipe{pointer-events:none!important}.arcgis-swipe__container{position:absolute;z-index:1;margin:0;outline:0;border:0;padding:0;overflow:hidden;pointer-events:auto;touch-action:none;outline-color:transparent}.arcgis-swipe--horizontal .arcgis-swipe__container{margin-left:calc(var(--calcite-spacing-xxxl) / 2 * -1);cursor:col-resize;height:100%}.arcgis-swipe--vertical .arcgis-swipe__container{margin-top:calc(var(--calcite-spacing-xxxl) / 2 * -1);cursor:row-resize;width:100%}.arcgis-swipe--disabled .arcgis-swipe__container{cursor:default;pointer-events:none}.arcgis-swipe__divider{position:absolute;background-color:var(--calcite-color-background)}.arcgis-swipe--horizontal .arcgis-swipe__divider{top:0;left:calc(var(--calcite-spacing-xxxl) / 2);margin-left:calc(var(--calcite-border-width-lg) * .5 * -1);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);width:var(--calcite-border-width-lg);height:100%}.arcgis-swipe--vertical .arcgis-swipe__divider{top:calc(var(--calcite-spacing-xxxl) / 2);left:0;margin-top:calc(var(--calcite-border-width-lg) * .5 * -1);border-top:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);width:100%;height:var(--calcite-border-width-lg)}.arcgis-swipe__handle{display:flex;position:relative;align-items:center;justify-content:center;border:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);border-radius:var(--calcite-corner-radius-round);background-color:var(--calcite-color-background);width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);color:var(--calcite-color-border-input)}.arcgis-swipe__handle--hidden{visibility:hidden}.arcgis-swipe--vertical .arcgis-swipe__handle{rotate:90deg}.arcgis-swipe__handle-icon{position:relative;z-index:2}.arcgis-swipe--horizontal .arcgis-swipe__handle{top:calc(50% - calc(var(--calcite-spacing-xxxl) / 2))}.arcgis-swipe--vertical .arcgis-swipe__handle{left:calc(50% - calc(var(--calcite-spacing-xxxl) / 2))}.arcgis-swipe__container:focus .arcgis-swipe__handle,.arcgis-swipe__container:focus .arcgis-swipe__divider{outline:inset 2px var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)))}.arcgis-swipe__container:focus .arcgis-swipe__handle{outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}}`,w="arcgis-swipe",h={base:w,baseDisabled:`${w}--disabled`,vertical:`${w}--vertical`,horizontal:`${w}--horizontal`,container:`${w}__container`,divider:`${w}__divider`,handle:`${w}__handle`,handleHidden:`${w}__handle--hidden`,handleIcon:`${w}__handle-icon`},Y=N(I),y=class y extends R{constructor(){super(...arguments),this._container=null,this._swiping=!1,this.messages=T({}),this._pointerOffset=0,this.viewModel=Y(this),this._onContainerPointerDown=i=>{i.preventDefault();const{_container:e}=this;e&&document.activeElement!==this.el&&e.focus(),this._swiping=!0,this._calculatePointerOffset(i)},this.autoDestroyDisabled=!1,this.direction=this.viewModel.direction,this.disabled=!1,this.hideDivider=!1,this.hideHandle=!1,this.icon="compare",this.label=this.messages.componentLabel,this.leadingLayers=this.viewModel.leadingLayers,this.position="manual",this.swipePosition=this.viewModel.position,this.state=this.viewModel.state,this.trailingLayers=this.viewModel.trailingLayers,this.arcgisPropertyChange=V()("state"),this.arcgisReady=E()}async destroy(){await this.manager.destroy()}loaded(){this.listenOn(document,"pointermove",this._onContainerPointerMove),this.listenOn(document,"pointerup",this._onContainerPointerUp)}_calculatePointerOffset(i){const{direction:e}=this,r=i.target,a=(e==="vertical"?r.clientHeight:r.clientWidth)/2,s=r.getBoundingClientRect(),o=i.clientX-s.left,d=i.clientY-s.top;this._pointerOffset=e==="vertical"?d-a:o-a}_onContainerPointerUp(i){this._swiping&&(i.preventDefault(),this._swiping=!1)}_onContainerPointerMove(i){if(!this._swiping)return;i.preventDefault();const{_pointerOffset:e,el:r,direction:a}=this,{clientX:s,clientY:o}=i,{top:d,left:n,width:g,height:v}=r.getBoundingClientRect(),z=a==="vertical"?v:g,A=(a==="vertical"?o-d-e:s-n-e)/z*100;this.swipePosition=A}_getKeyPosition(i){const{key:e}=i,{swipePosition:r}=this,{max:a,min:s,step:o,stepMultiplier:d,direction:n}=this.viewModel,g=o*d;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].includes(e)&&(i.preventDefault(),i.stopPropagation()),n==="vertical"?e==="ArrowDown"||e==="ArrowRight":e==="ArrowUp"||e==="ArrowRight"){const v=i.shiftKey?g:o;return r+v}if(n==="vertical"?e==="ArrowUp"||e==="ArrowLeft":e==="ArrowDown"||e==="ArrowLeft"){const v=i.shiftKey?g:o;return r-v}return e==="Home"?s:e==="End"?a:(n==="vertical"?e==="PageDown":e==="PageUp")?r+g:(n==="vertical"?e==="PageUp":e==="PageDown")?r-g:null}_onContainerKeyDown(i){const e=this._getKeyPosition(i);typeof e=="number"&&(this.swipePosition=e)}render(){const{state:i,direction:e}=this.viewModel,r=i==="disabled"||this.disabled,a={[D.disabled]:r,[h.baseDisabled]:r,[h.vertical]:e==="vertical",[h.horizontal]:e==="horizontal"};return u`<div class=${_(x(h.base,D.widget,a))}>${i==="disabled"?null:this._renderContainer()}</div>`}_renderHandle(){const{direction:i}=this.viewModel,{hideHandle:e}=this,r={[M.dragHorizontal]:i==="vertical",[M.dragVertical]:i==="horizontal"},a=x(h.handle,!!e&&h.handleHidden);return u`<div class=${_(a)} role=presentation><span aria-hidden=true class=${_(x(h.handleIcon,r))}></span></div>`}_renderDivider(){return this.hideDivider?null:u`<div class=${_(h.divider)} role=presentation></div>`}_renderContent(){return[this._renderDivider(),this._renderHandle()]}_renderContainer(){const{disabled:i,viewModel:e}=this,{max:r,min:a,direction:s,position:o}=e,d=this.label??this.messages.dragLabel??"",n=`${o}%`,g={top:s==="vertical"?n:void 0,left:s==="vertical"?void 0:n},v=this._renderContent();return i?u`<div class=${_(h.container)} role=presentation style=${P(g)}>${v}</div>`:u`<div @pointerdown=${this._onContainerPointerDown} .ariaLabel=${d} .ariaOrientation=${s} .ariaValueMax=${`${r}`} .ariaValueMin=${`${a}`} .ariaValueNow=${`${o}`} .ariaValueText=${n} class=${_(h.container)} @keydown=${this._onContainerKeyDown} role=slider style=${P(g)} tabindex=0 title=${d??U} touch-action=none>${v}</div>`}};y.properties={autoDestroyDisabled:5,direction:3,disabled:7,hideDivider:7,hideHandle:7,icon:3,label:1,leadingLayers:0,messageOverrides:0,position:3,swipePosition:9,referenceElement:1,state:3,trailingLayers:0},y.shadowRootOptions=O,y.styles=X;let C=y;k("arcgis-swipe",C);export{C as ArcgisSwipe};
