const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-73bQemcW.js","./jsxFactory-CLjKarlq.js","./Accessor-BHnuXKD2.js","./intl-Do3GEEJ7.js","./Promise-CmQqe-ke.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./Evented-DCWccWGU.js","./reactiveUtils-BR0C1Kq4.js","./SimpleObservable-7oieNGD8.js","./uuid-Cl5lrJ4c.js","./dom--xxYYVQF.js","./guid-ejniuQmw.js","./observers-BdozwIHb.js","./index-Wn4pOF_U.js","./index-Ch_sYKt7.js","./index-svtat3zr.js","./live-BIBBLA6F.js","./directive-helpers-C0aXnQdc.js","./keyed-CdPY5MOf.js","./ref-Ccn4I0kT.js","./static-g4FJ4v8I.js","./form-B15gmg4q.js","./interactive-B8siLByk.js","./key-CZcQa38B.js","./label-BLne9qNB.js","./loadable-DOQnSSjG.js","./locale-CXx8I9ox.js","./component-CFGnHAqh.js","./Validation-O1TFEQW-.js","./useT9n-CJAswmP1.js","./input-DI9tZAPS.js","./index-CjrYEQXz.js","./index-nrWOrFCt.js","./resources4-Crg87oFz.js","./openCloseComponent-dw_x67D_.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./index-tefRSezt.js";import{r as i,m as n,a as v}from"./Accessor-BHnuXKD2.js";import{l as h}from"./intl-Do3GEEJ7.js";import{s as g}from"./ReactiveMap-Dwhwbx9R.js";import{d as _}from"./reactiveUtils-BR0C1Kq4.js";import{e as p,O as y,c as f,n as s}from"./jsxFactory-CLjKarlq.js";import{_ as m}from"./FeatureRelationshipViewModel-D-pAIuUr.js";import{s as b}from"./substitute-D1XJWgT5.js";const u="esri-utility-network-association-list",l={featureObserver:`${u}__feature-observer`,filterContainer:`${u}__filter-container`,limitNoticeContainer:`${u}__limit-notice-container`,loadingContainer:`${u}__loading-container`};let o=class extends y{constructor(t,e){super(t,e),this._isFeatureCountNoticeOpen=!0,this._observer=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._observerNode=null,this.featuresPerPage=50,this.filterText="",this.headingLevel=5,this.maxFeatureCount=1e3,this.messagesFeature=null,this.messagesCommon=null,this.selectedLayer=null,this.tooltipReferenceMap=new g,this.viewModel=new m}initialize(){this.setUpObserver()}loadDependencies(){return f({icon:()=>c(()=>import("./index-73bQemcW.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url),input:()=>c(()=>import("./index-Wn4pOF_U.js"),__vite__mapDeps([16,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]),import.meta.url),loader:()=>c(()=>import("./index-CjrYEQXz.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,8,9,10,11,12,14,32]),import.meta.url),notice:()=>c(()=>import("./index-nrWOrFCt.js"),__vite__mapDeps([35,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,22,20,28,36,37,30,32]),import.meta.url)})}destroy(){this.tooltipReferenceMap.clear()}get associatedFeatureCount(){const t=this.viewModel.associationViewModels,e=this.selectedLayer?t.get(this.selectedLayer):null;return e?e.length:0}set currentFeaturePage(t){const{featuresPerPage:e,associatedFeatureCount:r}=this,a=Math.ceil(r/e)||1,d=Math.max(Math.min(t,a),1);this._set("currentFeaturePage",d)}get currentFeaturePage(){return this._get("currentFeaturePage")??1}get endIndex(){const{currentFeaturePage:t,featuresPerPage:e,maxFeatureCount:r}=this;return Math.min(t*e,r)}renderConnectivityIcon(t,e){const{tooltipReferenceMap:r}=this;let a;switch(t){case"junction-edge-from-connectivity":a="connection-end-left";break;case"junction-edge-to-connectivity":a="connection-end-right";break;case"junction-edge-midspan-connectivity":a="connection-middle";break;default:a="connection-to-connection"}return s("calcite-icon",{afterCreate:d=>r.set(e,d),afterRemoved:()=>r.delete(e),icon:a,scale:"s",slot:"content-start"})}renderFeatureCountWarning(){const{associatedFeatureCount:t,maxFeatureCount:e,messagesFeature:r}=this;return t>e?s("calcite-notice",{class:this._isFeatureCountNoticeOpen?l.limitNoticeContainer:void 0,closable:!0,icon:"information",kind:"info",open:!0,scale:"s",width:"full",onCalciteNoticeBeforeOpen:()=>this._isFeatureCountNoticeOpen=!0,onCalciteNoticeClose:()=>this._isFeatureCountNoticeOpen=!1},s("div",{slot:"title"},r.associationsLimitNoticeTitle),s("div",{slot:"message"},b(r.associationsLimitNoticeMessage,{number:e}))):null}renderFeatureObserver(){return s("div",{afterCreate:this._onObserverCreate,bind:this,class:l.featureObserver,key:"feature-observer"})}renderFilter(){return s("div",{class:l.filterContainer,key:"filter"},s("calcite-input",{icon:"search",placeholder:this.messagesFeature.associationFilterPlaceholder,type:"search",onCalciteInputInput:t=>{this.filterText=t.currentTarget.value.trim().toLowerCase(),this.currentFeaturePage=1}}))}renderLoading(){return s("div",{class:l.loadingContainer,key:"loading-container"},this.renderLoadingIcon())}renderLoadingIcon(){return s("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}getConnectivityTooltip(t){const{messagesFeature:e}=this;switch(t){case"connectivity":case"junction-junction-connectivity":return e.associationsJunctionJunction;case"junction-edge-from-connectivity":return e.associationsJunctionEdgeFrom;case"junction-edge-midspan-connectivity":return e.associationsJunctionEdgeMidspan;case"junction-edge-to-connectivity":return e.associationsJunctionEdgeTo;default:return""}}setUpObserver(){this.addHandles(_(()=>this._observerNode,()=>this._onObserverChange()))}_increaseFeaturePage(){this.currentFeaturePage++}async _onObserverChange(){this._observerNode&&this._observer.unobserve(this._observerNode);const{state:t,showAllEnabled:e}=this.viewModel;this._observerNode&&t==="ready"&&e&&this._observer.observe(this._observerNode)}_onObserverCreate(t){this._observerNode=t}};i([n()],o.prototype,"_observer",void 0),i([n()],o.prototype,"_observerNode",void 0),i([n()],o.prototype,"associatedFeatureCount",null),i([n()],o.prototype,"currentFeaturePage",null),i([n()],o.prototype,"endIndex",null),i([n()],o.prototype,"featuresPerPage",void 0),i([n()],o.prototype,"filterText",void 0),i([n()],o.prototype,"headingLevel",void 0),i([n()],o.prototype,"maxFeatureCount",void 0),i([n(),p("esri/widgets/Feature/t9n/Feature")],o.prototype,"messagesFeature",void 0),i([n(),p("esri/t9n/common")],o.prototype,"messagesCommon",void 0),i([n()],o.prototype,"selectedLayer",void 0),i([n()],o.prototype,"tooltipReferenceMap",void 0),i([n({type:m})],o.prototype,"viewModel",void 0),o=i([v("esri.widgets.support.UtilityNetworkAssociations.UtilityNetworkAssociationList")],o);const j=o;function x(t){const{percentAlong:e}=t;return e==null?"":h(e,{style:"percent",maximumFractionDigits:2})}function I(t){const{associationType:e}=t;return e==="connectivity"||e==="junction-junction-connectivity"||e==="junction-edge-from-connectivity"||e==="junction-edge-midspan-connectivity"||e==="junction-edge-to-connectivity"}function T(t){return t.associationType==="junction-edge-midspan-connectivity"}export{T as a,x as b,j as h,I as n};
