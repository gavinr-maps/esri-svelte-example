const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./webStyleSymbolUtils-C6Yokq8v.js","./devEnvironmentUtils-CnNDiFMM.js","./Accessor-BmwT4B0c.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Portal-CmmHxpLg.js","./Promise-DfET-uns.js","./writer-DKgfqj4X.js","./Extent-g5W9hy0j.js","./Point-Cz2JYYmX.js","./jsonUtils-B-voMz-i.js","./layerUtils-B__v9OBu.js","./TextSymbol-BLIQ6RKX.js","./Color-VJEMvW-n.js","./colorUtils-Rxh2V3ai.js","./mathUtils-Cfq9PL9W.js","./enumeration-DpvDkLNI.js","./screenUtils-_ZIvrt5o.js","./reactiveUtils-XM7cS2OP.js","./Evented-Dw4_VOGn.js","./SimpleObservable-CvOkykwM.js","./defaults-FkBa0ybj.js","./defaultsJSON-GKolV7NZ.js","./styleUtils-ColFrJ-Z.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./Clonable-Z-AWS-16.js","./opacityUtils-Dim20wpZ.js","./ActionToggle-D7439N1A.js","./Identifiable-BHVfzH03.js","./jsonUtils-CwFG8yN4.js","./Polyline-s-JzsQqo.js","./typeUtils-B6WBEKDM.js","./collectionUtils-CTT-51g7.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-Dw3yBk2f.js"])))=>i.map(i=>d[i]);
import{r,m as o,a as l,c as a,$ as x,g as Qe,bb as eo,S as Bo,B as de,ar as Jo,U as Hr,a2 as Gr,s as Wo,D as Vo,W as Ho,aR as Go,c0 as Ko}from"./Accessor-BmwT4B0c.js";import{a as D}from"./Clonable-Z-AWS-16.js";import{V as d,v as Yo,C as Xo,p as Kr}from"./reactiveUtils-XM7cS2OP.js";import{S as y}from"./JSONSupport-DcrLLGjL.js";import{o as to,i as gt,a as ro,p as _r,A as oo,j as so,Y as Fr,K as io,ak as no,h as vt,l as lo,J as Qo,e as Zo,V as es}from"./cast-CsZslgGN.js";import{r as O,o as Q}from"./writer-DKgfqj4X.js";import{a5 as ts,_ as ao,X as rs,ad as os,r as ss}from"./opacityUtils-Dim20wpZ.js";import{r as c}from"./enumeration-DpvDkLNI.js";import{Y as is}from"./Promise-DfET-uns.js";import{h as b}from"./Color-VJEMvW-n.js";import{a as ns,c as ls,p as as}from"./ActionToggle-D7439N1A.js";import{f as po}from"./jsonUtils-CwFG8yN4.js";import{l as ps}from"./typeUtils-B6WBEKDM.js";import{n as N,e as us,b as ys,a as uo,c as cs,f as ds,p as hs,g as ms,h as fs,m as $t,y as xt,d as Cr,S as Mr}from"./TextSymbol-BLIQ6RKX.js";import{n as bs,t as ws}from"./collectionUtils-CTT-51g7.js";import{C as St}from"./Portal-CmmHxpLg.js";import{o as M,e as Se}from"./screenUtils-_ZIvrt5o.js";import{t as yo,r as vs}from"./vec3f64-BLpZdpfb.js";import{a as Rr}from"./aaBoundingBox-Dw3yBk2f.js";import{_ as gs}from"./index-4eY77cms.js";let ot=class extends y{constructor(t){super(t),this.type=null}};r([o({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],ot.prototype,"type",void 0),ot=r([l("esri.popup.content.Content")],ot);const B=ot,rt=new to({asc:"ascending",desc:"descending"});let Ne=class extends D.ClonableMixin(y){constructor(t){super(t),this.field=null,this.order="ascending"}};r([o({type:String,json:{write:!0}})],Ne.prototype,"field",void 0),r([o({type:rt.apiValues,json:{type:rt.jsonValues,read:rt.read,write:rt.write}})],Ne.prototype,"order",void 0),Ne=r([l("esri.popup.support.AttachmentsOrderByInfo")],Ne);const $s=Ne;let J=class extends D.ClonableMixin(B){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};r([o({type:String,json:{write:!0}})],J.prototype,"description",void 0),r([o({type:["auto","preview","list"],json:{write:!0}})],J.prototype,"displayType",void 0),r([o({type:[$s],json:{write:!0}})],J.prototype,"orderByFields",void 0),r([o({type:String,json:{write:!0}})],J.prototype,"title",void 0),r([o({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],J.prototype,"type",void 0),J=r([l("esri.popup.content.AttachmentsContent")],J);const He=J;var Rt;let ee=Rt=class extends B{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Rt({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?a(this.outFields):null})}};r([o()],ee.prototype,"creator",void 0),r([o()],ee.prototype,"destroyer",void 0),r([o()],ee.prototype,"outFields",void 0),r([o({type:["custom"],readOnly:!0})],ee.prototype,"type",void 0),ee=Rt=r([l("esri.popup.content.CustomContent")],ee);const xs=ee;var Tt;let me=Tt=class extends y{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Tt({title:this.title,expression:this.expression})}};r([o({type:String,json:{write:!0}})],me.prototype,"title",void 0),r([o({type:String,json:{write:!0}})],me.prototype,"expression",void 0),r([o({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],me.prototype,"returnType",void 0),me=Tt=r([l("esri.popup.ElementExpressionInfo")],me);const Ss=me;var zt;let Le=zt=class extends B{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new zt({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};r([o({type:Ss,json:{write:!0}})],Le.prototype,"expressionInfo",void 0),r([o({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Le.prototype,"type",void 0),Le=zt=r([l("esri.popup.content.ExpressionContent")],Le);const jt=Le;let fe=class extends D.ClonableMixin(y){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};r([c(is)],fe.prototype,"dateFormat",void 0),r([o({type:Boolean,json:{write:!0}})],fe.prototype,"digitSeparator",void 0),r([o({type:x,json:{write:!0}})],fe.prototype,"places",void 0),fe=r([l("esri.popup.support.FieldInfoFormat")],fe);const js=fe;var kt;let L=kt=class extends y{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new kt({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};r([o({type:String,json:{write:!0}})],L.prototype,"fieldName",void 0),r([o({type:js,json:{write:!0}})],L.prototype,"format",void 0),r([o({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],L.prototype,"isEditable",void 0),r([o({type:String,json:{write:!0}})],L.prototype,"label",void 0),r([c(new to({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],L.prototype,"stringFieldOption",void 0),r([o({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],L.prototype,"statisticType",void 0),r([o({type:String,json:{write:!0}})],L.prototype,"tooltip",void 0),r([o({type:Boolean,json:{write:!0}})],L.prototype,"visible",void 0),L=kt=r([l("esri.popup.FieldInfo")],L);const co=L;var At;let q=At=class extends B{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(s=>s.toJSON())}clone(){return new At(a({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};r([o({type:Object,json:{write:!0}})],q.prototype,"attributes",void 0),r([o({type:String,json:{write:!0}})],q.prototype,"description",void 0),r([o({type:[co]})],q.prototype,"fieldInfos",void 0),r([O("fieldInfos")],q.prototype,"writeFieldInfos",null),r([o({type:String,json:{write:!0}})],q.prototype,"title",void 0),r([o({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],q.prototype,"type",void 0),q=At=r([l("esri.popup.content.FieldsContent")],q);const Ge=q;let te=class extends y{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};r([o({type:String,json:{write:!0}})],te.prototype,"altText",void 0),r([o({type:String,json:{write:!0}})],te.prototype,"caption",void 0),r([o({type:String,json:{write:!0}})],te.prototype,"title",void 0),r([o({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],te.prototype,"type",void 0),te=r([l("esri.popup.content.mixins.MediaInfo")],te);const Tr=te;var Dt;let re=Dt=class extends Qe{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new Dt({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};r([o()],re.prototype,"color",void 0),r([o()],re.prototype,"fieldName",void 0),r([o()],re.prototype,"tooltip",void 0),r([o()],re.prototype,"value",void 0),re=Dt=r([l("esri.popup.content.support.ChartMediaInfoValueSeries")],re);const Os=re;var Pt;let W=Pt=class extends y{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Pt({colors:a(this.colors),fields:a(this.fields),normalizeField:this.normalizeField,series:a(this.series),tooltipField:this.tooltipField})}};r([o({type:[b],json:{type:[[x]],write:!0}})],W.prototype,"colors",void 0),r([o({type:[String],json:{write:{isRequired:!0}}})],W.prototype,"fields",void 0),r([o({type:String,json:{write:!0}})],W.prototype,"normalizeField",void 0),r([o({type:[Os],json:{read:!1}})],W.prototype,"series",void 0),r([o({type:String,json:{write:!0}})],W.prototype,"tooltipField",void 0),W=Pt=r([l("esri.popup.content.support.ChartMediaInfoValue")],W);const Ns=W;let Ie=class extends Tr{constructor(t){super(t),this.type=null,this.value=void 0}};r([o({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ie.prototype,"type",void 0),r([o({type:Ns,json:{write:{isRequired:!0}}})],Ie.prototype,"value",void 0),Ie=r([l("esri.popup.content.mixins.ChartMediaInfo")],Ie);const Ot=Ie,Nt=gt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var qt;let st=qt=class extends Ot{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new qt({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};r([o({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],st.prototype,"type",void 0),st=qt=r([l("esri.popup.content.BarChartMediaInfo")],st);const ho=st;var Et;let it=Et=class extends Ot{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new Et({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};r([o({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],it.prototype,"type",void 0),it=Et=r([l("esri.popup.content.ColumnChartMediaInfo")],it);const mo=it;var Ut;let _e=Ut=class extends y{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Ut({linkURL:this.linkURL,sourceURL:this.sourceURL})}};r([o({type:String,json:{write:!0}})],_e.prototype,"linkURL",void 0),r([o({type:String,json:{write:{isRequired:!0}}})],_e.prototype,"sourceURL",void 0),_e=Ut=r([l("esri.popup.content.support.ImageMediaInfoValue")],_e);const Ls=_e;var Bt;let be=Bt=class extends Tr{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new Bt({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};r([o({type:Number,json:{write:!0}})],be.prototype,"refreshInterval",void 0),r([o({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],be.prototype,"type",void 0),r([o({type:Ls,json:{write:{isRequired:!0}}})],be.prototype,"value",void 0),be=Bt=r([l("esri.popup.content.ImageMediaInfo")],be);const fo=be;var Jt;let nt=Jt=class extends Ot{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new Jt({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};r([o({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],nt.prototype,"type",void 0),nt=Jt=r([l("esri.popup.content.LineChartMediaInfo")],nt);const bo=nt;var Wt;let lt=Wt=class extends Ot{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new Wt({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};r([o({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],lt.prototype,"type",void 0),lt=Wt=r([l("esri.popup.content.PieChartMediaInfo")],lt);const wo=lt,Vt={base:Tr,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":ho,"column-chart":mo,"line-chart":bo,"pie-chart":wo,image:fo}};var Ht;let I=Ht=class extends B{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?fo.fromJSON(t):t.type==="barchart"?ho.fromJSON(t):t.type==="columnchart"?mo.fromJSON(t):t.type==="linechart"?bo.fromJSON(t):t.type==="piechart"?wo.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(s=>s.toJSON())}clone(){return new Ht(a({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};r([o()],I.prototype,"activeMediaInfoIndex",void 0),r([o({type:Object,json:{write:!0}})],I.prototype,"attributes",void 0),r([o({type:String,json:{write:!0}})],I.prototype,"description",void 0),r([o({types:[Vt]})],I.prototype,"mediaInfos",void 0),r([Q("mediaInfos")],I.prototype,"readMediaInfos",null),r([O("mediaInfos")],I.prototype,"writeMediaInfos",null),r([o({type:String,json:{write:!0}})],I.prototype,"title",void 0),r([o({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],I.prototype,"type",void 0),I=Ht=r([l("esri.popup.content.MediaContent")],I);const Ke=I;var Gt;let Fe=Gt=class extends y{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Gt({field:this.field,order:this.order})}};r([o({type:String,json:{write:!0}})],Fe.prototype,"field",void 0),r([o({type:["asc","desc"],json:{write:!0}})],Fe.prototype,"order",void 0),Fe=Gt=r([l("esri.popup.support.RelatedRecordsInfoFieldOrder")],Fe);const vo=Fe;let T=class extends D.ClonableMixin(B){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};r([o({type:String,json:{write:!0}})],T.prototype,"description",void 0),r([o({type:Number,json:{type:x,write:!0}})],T.prototype,"displayCount",void 0),r([o({type:["list"],json:{write:{isRequired:!0}}})],T.prototype,"displayType",void 0),r([o({type:[vo],json:{write:!0}})],T.prototype,"orderByFields",void 0),r([o({type:Number,json:{type:x,write:{isRequired:!0}}})],T.prototype,"relationshipId",void 0),r([o({type:String,json:{write:!0}})],T.prototype,"title",void 0),r([o({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],T.prototype,"type",void 0),T=r([l("esri.popup.content.RelationshipContent")],T);const Ye=T;var Kt;let Ce=Kt=class extends B{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Kt({text:this.text})}};r([o({type:String,json:{write:!0}})],Ce.prototype,"text",void 0),r([o({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ce.prototype,"type",void 0),Ce=Kt=r([l("esri.popup.content.TextContent")],Ce);const Xe=Ce;let E=class extends D.ClonableMixin(y){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};r([o({type:String,json:{write:!0}})],E.prototype,"title",void 0),r([o({type:String,json:{write:!0}})],E.prototype,"description",void 0),r([o({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],E.prototype,"type",void 0),r([o({type:Number,json:{type:x,write:!0}})],E.prototype,"associatedNetworkSourceId",void 0),r([o({type:Number,json:{type:x,write:!0}})],E.prototype,"associatedAssetGroup",void 0),r([o({type:Number,json:{type:x,write:!0}})],E.prototype,"associatedAssetType",void 0),E=r([l("esri.popup.support.UtilityNetworkAssociationType")],E);const Is=E;let V=class extends D.ClonableMixin(B){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};r([o({type:String,json:{write:!0}})],V.prototype,"description",void 0),r([o({type:Number,json:{type:x,write:!0}})],V.prototype,"displayCount",void 0),r([o({type:String,json:{write:!0}})],V.prototype,"title",void 0),r([o({type:[Is],json:{write:!0}})],V.prototype,"associationTypes",void 0),r([c({utilityNetworkAssociations:"utility-network-associations"})],V.prototype,"type",void 0),V=r([l("esri.popup.content.UtilityNetworkAssociationsContent")],V);const zr=V,_s={base:null,key:"type",typeMap:{attachment:He,media:Ke,text:Xe,expression:jt,field:Ge,relationship:Ye,utilityNetworkAssociations:zr}},Fs={base:null,key:"type",typeMap:{attachment:He,media:Ke,text:Xe,expression:jt,field:Ge,relationship:Ye}};var Yt;let oe=Yt=class extends y{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Yt({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};r([o({type:String,json:{write:!0}})],oe.prototype,"name",void 0),r([o({type:String,json:{write:!0}})],oe.prototype,"title",void 0),r([o({type:String,json:{write:!0}})],oe.prototype,"expression",void 0),r([o({type:["string","number"],json:{write:!0}})],oe.prototype,"returnType",void 0),oe=Yt=r([l("esri.popup.ExpressionInfo")],oe);const Cs=oe;var Xt;let Me=Xt=class extends y{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Xt({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};r([o({type:Boolean,json:{write:!0}})],Me.prototype,"returnTopmostRaster",void 0),r([o({type:Boolean,json:{write:!0}})],Me.prototype,"showNoDataRecords",void 0),Me=Xt=r([l("esri.popup.LayerOptions")],Me);const Ms=Me;var Qt;let Re=Qt=class extends y{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Qt({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?a(this.orderByFields):null})}};r([o({type:Boolean,json:{write:!0}})],Re.prototype,"showRelatedRecords",void 0),r([o({type:[vo],json:{write:!0}})],Re.prototype,"orderByFields",void 0),Re=Qt=r([l("esri.popup.RelatedRecordsInfo")],Re);const Yr=Re,Oe="relationships/",Xr="expression/",Rs=d.ofType({key:"type",defaultKeyValue:"button",base:as,typeMap:{button:ls,toggle:ns}}),Ts={base:B,key:"type",typeMap:{media:Ke,custom:xs,text:Xe,attachments:He,fields:Ge,expression:jt,relationship:Ye,utilityNetworkAssociations:zr}},go=new Set(["attachments","fields","media","text","expression","relationship"]),zs=new Set([...go,"utility-network-associations"]);let m=class extends D.ClonableMixin(y){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>eo(Ts,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Bo(e)?e:(de.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:s}=t;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,s):this._readPopupInfo(t)}writeWebSceneContent(e,t,s,i){this._writePopupTemplateContent(e,t,i)}writeWebMapContent(e,t,s,i){this._writePopupTemplateContent(e,t,i)}writeFieldInfos(e,t,s,i){const{content:n}=this,p=Array.isArray(n)?n:null;if(e){const u=p?p.filter(h=>h.type==="fields"):[],S=u.length&&u.every(h=>{var R;return(R=h.fieldInfos)==null?void 0:R.length});t.fieldInfos=e.filter(Boolean).map(h=>{const R=h.toJSON(i);return S&&(R.visible=!1),R})}if(p)for(const u of p)u.type==="fields"&&this._writeFieldsContent(u,t)}writeLayerOptions(e,t,s,i){t[s]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...s,...this._getContentExpressionInfos(this.content,s)]),ts(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writePopupTemplateContent(e,t,s){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(i=>(s==null?void 0:s.origin)==="web-scene"?go.has(i.type):zs.has(i.type)).map(i=>i==null?void 0:i.toJSON(s)),t.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(t):i.type==="media"?this._writeMediaContent(i,t):i.type==="text"?this._writeTextContent(i,t):i.type==="relationship"&&this._writeRelationshipContent(i,t)})):t.description=e}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const s=a(e.fieldInfos);Array.isArray(t.fieldInfos)?s.forEach(i=>{const n=t.fieldInfos.find(p=>{var u,S;return((u=p.fieldName)==null?void 0:u.toLowerCase())===((S=i.fieldName)==null?void 0:S.toLowerCase())});n?n.visible=!0:t.fieldInfos.push(i)}):t.fieldInfos=s}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){var n,p;const s=((n=e.orderByFields)==null?void 0:n.map(u=>this._toFieldOrderJSON(u,e.relationshipId)))||[],i=[...((p=t.relatedRecordsInfo)==null?void 0:p.orderByFields)||[],...s];t.relatedRecordsInfo={showRelatedRecords:!0,...(i==null?void 0:i.length)&&{orderByFields:i}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const s=a(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...s]:t.mediaInfos=s}_readPopupInfoElements(e,t,s){const i={description:!1,mediaInfos:!1};return s.map(n=>n.type==="media"?(n.mediaInfos||!t||i.mediaInfos||(n.mediaInfos=t,i.mediaInfos=!0),Ke.fromJSON(n)):n.type==="text"?(n.text||!e||i.description||(n.text=e,i.description=!0),Xe.fromJSON(n)):n.type==="attachments"?He.fromJSON(n):n.type==="fields"?Ge.fromJSON(n):n.type==="expression"?jt.fromJSON(n):n.type==="relationship"?Ye.fromJSON(n):n.type==="utilityNetworkAssociations"?zr.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:s}=e;if(!(t!=null&&t.startsWith(Oe)))return null;const i=t.replace(Oe,"").split("/");if(i.length!==2)return null;const n=parseInt(i[0],10),p=i[1];return!Number.isNaN(n)&&p?Ye.fromJSON({relationshipId:n,orderByFields:[{field:p,order:s}]}):null}_toFieldOrderJSON(e,t){const{order:s,field:i}=e;return{field:`${Oe}${t}/${i}`,order:s}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:s,relatedRecordsInfo:i={showRelatedRecords:!1}}){const n=[];e?n.push(new Xe({text:e})):n.push(new Ge),Array.isArray(t)&&t.length&&n.push(Ke.fromJSON({mediaInfos:t})),s&&n.push(He.fromJSON({displayType:"auto"}));const{showRelatedRecords:p,orderByFields:u}=i;return p&&(u!=null&&u.length)&&u.forEach(S=>{const h=this._toRelationshipContent(S);h&&n.push(h)}),n.length?n:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(t==="media"){const s=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...s.reduce((i,n)=>[...i,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):t==="relationship"||t==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:t,title:s,value:i}=e,n=i||{},{fields:p,normalizeField:u,tooltipField:S,sourceURL:h,linkURL:R}=n,Mt=[...this._extractFieldNames(s),...this._extractFieldNames(t),...this._extractFieldNames(h),...this._extractFieldNames(R),...p??[]];return u&&Mt.push(u),S&&Mt.push(S),Mt}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((s,i)=>[...s,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,s)=>[...t,...this._getContentElementFields(s)],[]):[]}async _collectExpressionInfoFields(e,t,s){s&&await Promise.all(s.map(i=>ao(e,t,i.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:t,visible:s})=>!(s!==void 0&&!s||!t||t.startsWith(Oe)||t.startsWith(Xr))).map(t=>t.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((t,s)=>[...t,...this._getActionFields(s)],[]):[]}_getActionFields(e){const{className:t,title:s,type:i}=e,n=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return rs(e).filter(t=>!(t.indexOf(Oe)===0||t.indexOf(Xr)===0))}};r([o({type:Rs})],m.prototype,"actions",void 0),r([o()],m.prototype,"content",void 0),r([ro("content")],m.prototype,"castContent",null),r([Q("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],m.prototype,"readContent",null),r([O("web-scene","content",{popupElements:{type:d.ofType(Fs)},showAttachments:{type:Boolean},mediaInfos:{type:d.ofType(Vt)},description:{type:String},relatedRecordsInfo:{type:Yr}})],m.prototype,"writeWebSceneContent",null),r([O("content",{popupElements:{type:d.ofType(_s)},showAttachments:{type:Boolean},mediaInfos:{type:d.ofType(Vt)},description:{type:String},relatedRecordsInfo:{type:Yr}})],m.prototype,"writeWebMapContent",null),r([o({type:[Cs],json:{write:!0}})],m.prototype,"expressionInfos",void 0),r([o({type:[co]})],m.prototype,"fieldInfos",void 0),r([O("fieldInfos")],m.prototype,"writeFieldInfos",null),r([o({type:Ms})],m.prototype,"layerOptions",void 0),r([O("layerOptions")],m.prototype,"writeLayerOptions",null),r([o({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],m.prototype,"lastEditInfoEnabled",void 0),r([o()],m.prototype,"outFields",void 0),r([o()],m.prototype,"overwriteActions",void 0),r([o()],m.prototype,"returnGeometry",void 0),r([o({json:{type:String}})],m.prototype,"title",void 0),r([O("title")],m.prototype,"writeTitle",null),m=r([l("esri.PopupTemplate")],m);const ks=m;var Zt;let H=Zt=class extends N{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var s;if(((s=this.data)==null?void 0:s.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const n=i.map(p=>{const u=p.valueExpressionInfo;return u?ao(e,t,u.expression):null});await Promise.all(n)}}}clone(){return new Zt({data:a(this.data)})}hash(){return Jo(JSON.stringify(this.data)).toString()}};r([o({json:{write:!1}})],H.prototype,"color",void 0),r([o({json:{write:!0}})],H.prototype,"data",void 0),r([Q("data",["symbol"])],H.prototype,"readData",null),r([O("data",{})],H.prototype,"writeData",null),r([c({CIMSymbolReference:"cim"},{readOnly:!0})],H.prototype,"type",void 0),H=Zt=r([l("esri.symbols.CIMSymbol")],H);const he=H;let we=class extends y{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,s,i){t||(s[i]=t)}};r([o({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],we.prototype,"enabled",void 0),r([O("enabled")],we.prototype,"writeEnabled",null),r([o({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],we.prototype,"type",void 0),we=r([l("esri.symbols.Symbol3DLayer")],we);const P=we;function As(e,t){const s=t.transparency!=null?ss(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new b([i[0]||0,i[1]||0,i[2]||0,s]):null}function Ds(e,t){t.color=e.toJSON().slice(0,3);const s=os(e.a);s!==0&&(t.transparency=s)}function Z(e){return{type:b,nonNullable:e==null?void 0:e.nonNullable,json:{type:[x],default:null,read:{source:["color","transparency"],reader:As},write:{target:{color:{type:[x],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:x}},writer:Ds}}}}const A={type:Number,cast:M,json:{write:!0}};let se=class extends y{constructor(t){super(t),this.color=new b([0,0,0,1]),this.extensionLength=0,this.size=Se(1)}clone(){}cloneProperties(){return{color:a(this.color),size:this.size,extensionLength:this.extensionLength}}};r([o({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],se.prototype,"type",void 0),r([o(Z({colorRequiredOnWrite:!0}))],se.prototype,"color",void 0),r([o({...A,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],se.prototype,"extensionLength",void 0),r([o(A)],se.prototype,"size",void 0),se=r([l("esri.symbols.edges.Edges3D")],se);const kr=se;var er;let at=er=class extends kr{constructor(e){super(e),this.type="sketch"}clone(){return new er(this.cloneProperties())}};r([c({sketch:"sketch"},{readOnly:!0})],at.prototype,"type",void 0),at=er=r([l("esri.symbols.edges.SketchEdges3D")],at);const Ps=at;var tr;let pt=tr=class extends kr{constructor(e){super(e),this.type="solid"}clone(){return new tr(this.cloneProperties())}};r([c({solid:"solid"},{readOnly:!0})],pt.prototype,"type",void 0),pt=tr=r([l("esri.symbols.edges.SolidEdges3D")],pt);const qs=pt,$o={types:{key:"type",base:kr,typeMap:{solid:qs,sketch:Ps}},json:{write:!0}};var rr;let $=rr=class extends y{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?yo(this.emissiveFactor):null};return new rr(e)}};r([o(Z())],$.prototype,"color",void 0),r([o({type:[Number],json:{write:!1}})],$.prototype,"emissiveFactor",void 0),$=rr=r([l("esri.symbols.support.Symbol3DMaterial")],$);var or;let G=or=class extends P{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new or({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};r([c({Extrude:"extrude"},{readOnly:!0})],G.prototype,"type",void 0),r([o({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],G.prototype,"size",void 0),r([o({type:$,json:{write:!0}})],G.prototype,"material",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],G.prototype,"castShadows",void 0),r([o($o)],G.prototype,"edges",void 0),G=or=r([l("esri.symbols.ExtrudeSymbol3DLayer")],G);const xo=G;let ut=class extends y{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};r([o({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ut.prototype,"type",void 0),ut=r([l("esri.symbols.patterns.LinePattern3D")],ut);const So=ut,Es=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var sr;const Us=gt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Te=sr=class extends So{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new sr(e)}};r([o({type:["style"],json:{write:{isRequired:!0}}})],Te.prototype,"type",void 0),r([c(Us),o({type:Es,json:{write:{isRequired:!0}}})],Te.prototype,"style",void 0),Te=sr=r([l("esri.symbols.patterns.LineStylePattern3D")],Te);const Ar=Te;let yt=class extends y{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};r([o({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yt.prototype,"type",void 0),yt=r([l("esri.symbols.patterns.Pattern3D")],yt);const jo=yt,Bs=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var ir;let ze=ir=class extends jo{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new ir({style:this.style})}};r([o({type:["style"],json:{write:{isRequired:!0}}})],ze.prototype,"type",void 0),r([o({type:Bs,json:{read:!0,write:{isRequired:!0}}})],ze.prototype,"style",void 0),ze=ir=r([l("esri.symbols.patterns.StylePattern3D")],ze);const Oo=ze,Js={types:{key:"type",base:jo,typeMap:{style:Oo}},json:{write:!0}},No={types:{key:"type",base:So,typeMap:{style:Ar}},json:{write:!0}},Be=new b("white"),Ws=new b([255,255,255,0]);function Vs(e){return e.r===0&&e.g===0&&e.b===0}var nr;let Je=nr=class extends ${constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?yo(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new nr(e)}};r([c({multiply:"multiply",replace:"replace",tint:"tint"})],Je.prototype,"colorMixMode",void 0),Je=nr=r([l("esri.symbols.support.Symbol3DFillMaterial")],Je);function Bi(e,{isPrimitive:t,width:s,depth:i,height:n}){const p=t?10:1;if(s==null&&n==null&&i==null)return[p*e[0],p*e[1],p*e[2]];const u=vs(s,i,n);let S;for(let h=0;h<3;h++){const R=u[h];if(R!=null){S=R/e[h];break}}for(let h=0;h<3;h++)u[h]==null&&(u[h]=e[h]*S);return u}const Hs=Rr(-.5,-.5,-.5,.5,.5,.5),Gs=Rr(-.5,-.5,0,.5,.5,1),Ks=Rr(-.5,-.5,0,.5,.5,.5);function Ji(e){switch(e){case"sphere":case"cube":case"diamond":return Hs;case"cylinder":case"cone":case"inverted-cone":return Gs;case"tetrahedron":return Ks;default:return}}const Dr=["butt","square","round"],Ys=[...Dr,"none"],Lo=["miter","bevel","round"];var lr;let ie=lr=class extends y{constructor(e){super(e),this.color=new b([0,0,0,1]),this.size=Se(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new lr(e)}};r([o(Z({colorRequiredOnWrite:!0}))],ie.prototype,"color",void 0),r([o({...A,json:{write:{isRequired:!0}}})],ie.prototype,"size",void 0),r([o(No)],ie.prototype,"pattern",void 0),r([o({type:Dr,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ie.prototype,"patternCap",void 0),ie=lr=r([l("esri.symbols.support.Symbol3DOutline")],ie);var ct;let U=ct=class extends P{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new ct(e)}static fromSimpleFillSymbol(e){var i,n,p;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Ar({style:e.outline.style}):null,s={size:((i=e.outline)==null?void 0:i.width)??0,color:(((n=e.outline)==null?void 0:n.color)??Be).clone(),pattern:t};return t&&((p=e.outline)!=null&&p.cap)&&(s.patternCap=e.outline.cap),new ct({material:new Je({color:(e.color??Ws).clone()}),pattern:e.style&&e.style!=="solid"?new Oo({style:e.style}):null,outline:s})}};r([c({Fill:"fill"},{readOnly:!0})],U.prototype,"type",void 0),r([o({type:Je,json:{write:!0}})],U.prototype,"material",void 0),r([o(Js)],U.prototype,"pattern",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],U.prototype,"castShadows",void 0),r([o({type:ie,json:{write:!0}})],U.prototype,"outline",void 0),r([o($o)],U.prototype,"edges",void 0),U=ct=r([l("esri.symbols.FillSymbol3DLayer")],U);const Ze=U;var ar;const Xs=gt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ne=ar=class extends y{constructor(e){super(e)}readHref(e,t,s){return e?_r(e,s):t.dataURI}writeHref(e,t,s,i){e&&(oo(e)?t.dataURI=e:(t.href=so(e,i),Fr(t.href)&&(t.href=io(t.href))))}clone(){return new ar({href:this.href,primitive:this.primitive})}};r([o({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ne.prototype,"href",void 0),r([Q("href")],ne.prototype,"readHref",null),r([O("href",{href:{type:String},dataURI:{type:String}})],ne.prototype,"writeHref",null),r([c(Xs)],ne.prototype,"primitive",void 0),ne=ar=r([l("esri.symbols.support.IconSymbol3DLayerResource")],ne);const Wi="circle";var pr;let $e=pr=class extends Qe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new pr({x:this.x,y:this.y})}};r([o({type:Number})],$e.prototype,"x",void 0),r([o({type:Number})],$e.prototype,"y",void 0),$e=pr=r([l("esri.symbols.support.Symbol3DAnchorPosition2D")],$e);var ur;let ke=ur=class extends y{constructor(e){super(e),this.color=new b([0,0,0,1]),this.size=Se(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new ur(e)}};r([o(Z({colorRequiredOnWrite:!0}))],ke.prototype,"color",void 0),r([o({...A,json:{write:{isRequired:!0}}})],ke.prototype,"size",void 0),ke=ur=r([l("esri.symbols.support.Symbol3DIconOutline")],ke);var ve;const Io="esri.symbols.IconSymbol3DLayer";let _=ve=class extends P{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new ve({anchor:this.anchor,anchorPosition:a(this.anchorPosition),enabled:this.enabled,material:a(this.material),outline:a(this.outline),resource:a(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Be,s=Qr(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Be).clone()}:null;return new ve({size:e.size,angle:e.angle,resource:{primitive:Zs(e.style)},material:{color:t},outline:i,anchor:s?"relative":void 0,anchorPosition:s})}static fromPictureMarkerSymbol(e){const t=!e.color||Vs(e.color)?Be:e.color,s=Qr(e);return new ve({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:s?"relative":void 0,anchorPosition:s})}static fromCIMSymbol(e){return new ve({resource:{href:no({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};r([o({type:$,json:{write:!0}})],_.prototype,"material",void 0),r([o({type:ne,json:{write:!0}})],_.prototype,"resource",void 0),r([c({Icon:"icon"},{readOnly:!0})],_.prototype,"type",void 0),r([o({...A,json:{write:{isRequired:!0}}})],_.prototype,"size",void 0),r([c({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],_.prototype,"anchor",void 0),r([o({type:$e,json:{type:[Number],read:{reader:e=>new $e({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],_.prototype,"anchorPosition",void 0),r([o({type:ke,json:{write:!0}})],_.prototype,"outline",void 0),r([o({type:Number,json:{write:!0,default:0}})],_.prototype,"angle",void 0),_=ve=r([l(Io)],_);const ce=_;function Qr(e){const t="width"in e?e.width:e.size,s="height"in e?e.height:e.size,i=Zr(e.xoffset),n=Zr(e.yoffset);return(i||n)&&t&&s?{x:-i/t,y:n/s}:null}function Zr(e){return isFinite(e)?e:0}const Qs={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Zs(e){return Qs[e]||(de.getLogger(Io).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let le=class extends D.ClonableMixin(y){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};r([o({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],le.prototype,"type",void 0),r([o({type:us,json:{default:"begin-end",write:!0}})],le.prototype,"placement",void 0),r([o({type:ys,json:{default:"arrow",write:!0}})],le.prototype,"style",void 0),r([o({type:b,json:{type:[x],default:null,write:!0}})],le.prototype,"color",void 0),le=r([l("esri.symbols.LineStyleMarker3D")],le);const yr=le;var dt;let z=dt=class extends P{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Se(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new dt(e)}static fromSimpleLineSymbol(e){var s;const t={enabled:!0,size:e.width??Se(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Ar({style:e.style}):null,material:new $({color:(e.color||Be).clone()}),marker:e.marker?new yr({placement:e.marker.placement,style:e.marker.style,color:((s=e.marker.color)==null?void 0:s.clone())??null}):null};return new dt(t)}};r([o({type:$,json:{write:!0}})],z.prototype,"material",void 0),r([c({Line:"line"},{readOnly:!0})],z.prototype,"type",void 0),r([o({type:Lo,json:{write:!0,default:"miter"}})],z.prototype,"join",void 0),r([o({type:Dr,json:{write:!0,default:"butt"}})],z.prototype,"cap",void 0),r([o({...A,json:{write:{isRequired:!0}}})],z.prototype,"size",void 0),r([o(No)],z.prototype,"pattern",void 0),r([o({types:{key:"type",base:yr,typeMap:{style:yr}},json:{write:!0}})],z.prototype,"marker",void 0),z=dt=r([l("esri.symbols.LineSymbol3DLayer")],z);const et=z;var cr;const ei=gt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Ae=cr=class extends y{clone(){return new cr({href:this.href,primitive:this.primitive})}};r([o({type:String,json:{read:lo,write:vt}})],Ae.prototype,"href",void 0),r([c(ei)],Ae.prototype,"primitive",void 0),Ae=cr=r([l("esri.symbols.support.ObjectSymbol3DLayerResource")],Ae);const Hi="sphere";var dr;let ye=dr=class extends Qe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new dr({x:this.x,y:this.y,z:this.z})}};r([o({type:Number})],ye.prototype,"x",void 0),r([o({type:Number})],ye.prototype,"y",void 0),r([o({type:Number})],ye.prototype,"z",void 0),ye=dr=r([l("esri.symbols.support.Symbol3DAnchorPosition3D")],ye);var hr;let f=hr=class extends P{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,s;return new hr({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(s=this.resource)==null?void 0:s.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};r([o({type:$,json:{write:!0}})],f.prototype,"material",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],f.prototype,"castShadows",void 0),r([o({type:Ae,json:{write:!0}})],f.prototype,"resource",void 0),r([c({Object:"object"},{readOnly:!0})],f.prototype,"type",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"width",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"height",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"depth",void 0),r([c({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],f.prototype,"anchor",void 0),r([o({type:ye,json:{type:[Number],read:{reader:e=>new ye({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],f.prototype,"anchorPosition",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"heading",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"tilt",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"roll",void 0),r([o({readOnly:!0})],f.prototype,"isPrimitive",null),f=hr=r([l("esri.symbols.ObjectSymbol3DLayer")],f);const Pr=f;var mr;let w=mr=class extends P{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new mr({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};r([o({type:$,json:{write:!0}})],w.prototype,"material",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],w.prototype,"castShadows",void 0),r([c({Path:"path"},{readOnly:!0})],w.prototype,"type",void 0),r([o({type:["circle","quad"],json:{write:!0,default:"circle"}})],w.prototype,"profile",void 0),r([o({type:Lo,json:{write:!0,default:"miter"}})],w.prototype,"join",void 0),r([o({type:Ys,json:{write:!0,default:"butt"}})],w.prototype,"cap",void 0),r([o({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],w.prototype,"width",void 0),r([Q("width",["width","size","height"])],w.prototype,"readWidth",null),r([o({type:Number,json:{write:!0}})],w.prototype,"height",void 0),r([Q("height",["height","size","width"])],w.prototype,"readHeight",null),r([o({type:["center","bottom","top"],json:{write:!0,default:"center"}})],w.prototype,"anchor",void 0),r([o({type:["heading","all"],json:{write:!0,default:"all"}})],w.prototype,"profileRotation",void 0),w=mr=r([l("esri.symbols.PathSymbol3DLayer")],w);const qr=w;var fr;let xe=fr=class extends y{constructor(){super(...arguments),this.color=new b([0,0,0,1]),this.size=0}clone(){const e={color:a(this.color),size:this.size};return new fr(e)}};r([o(Z())],xe.prototype,"color",void 0),r([o(A)],xe.prototype,"size",void 0),xe=fr=r([l("esri.symbols.support.Symbol3DHalo")],xe);let We=class extends D.ClonableMixin(y){constructor(t){super(t),this.color=null}};r([o(Z())],We.prototype,"color",void 0),We=r([l("esri.symbols.support.Symbol3DTextBackground")],We);var ht;let v=ht=class extends P{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,s,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new ht({enabled:this.enabled,font:this.font&&a(this.font),halo:this.halo&&a(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:a(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new ht({font:e.font!=null?e.font.clone():new uo,halo:ti(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new $({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new We({color:e.backgroundColor.clone()}):null})}};function ti(e,t){return e&&t!=null&&t>0?new xe({color:a(e),size:t}):null}r([o({type:uo,json:{write:!0}})],v.prototype,"font",null),r([O("font")],v.prototype,"writeFont",null),r([o({type:xe,json:{write:!0}})],v.prototype,"halo",void 0),r([o({...cs,json:{default:"center",write:!0}})],v.prototype,"horizontalAlignment",void 0),r([o({...ds,json:{default:1,write:!0}})],v.prototype,"lineHeight",void 0),r([o({type:$,json:{write:!0}})],v.prototype,"material",void 0),r([o({type:We,json:{write:!0}})],v.prototype,"background",void 0),r([o(A)],v.prototype,"size",null),r([o({type:String,json:{write:!0}})],v.prototype,"text",void 0),r([c({Text:"text"},{readOnly:!0})],v.prototype,"type",void 0),r([o({...hs,json:{default:"baseline",write:!0}})],v.prototype,"verticalAlignment",void 0),v=ht=r([l("esri.symbols.TextSymbol3DLayer")],v);const je=v;var br;let K=br=class extends P{constructor(e){super(e),this.color=wr.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new br({color:a(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};r([o({type:b,nonNullable:!0,json:{type:[x],write:(e,t,s)=>t[s]=e.toArray(b.AlphaMode.UNLESS_OPAQUE),default:()=>wr.clone(),defaultEquals:e=>e.toCss(!0)===wr.toCss(!0)}})],K.prototype,"color",void 0),r([c({Water:"water"},{readOnly:!0})],K.prototype,"type",void 0),r([o({type:["small","medium","large"],json:{write:!0,default:"medium"}})],K.prototype,"waterbodySize",void 0),r([o({type:Number,json:{write:!0,default:null}})],K.prototype,"waveDirection",void 0),r([o({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],K.prototype,"waveStrength",void 0),K=br=r([l("esri.symbols.WaterSymbol3DLayer")],K);const _o=K,wr=new b([0,119,190]);var vr;let ae=vr=class extends Qe{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new vr({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};r([o({type:String})],ae.prototype,"name",void 0),r([o({type:String})],ae.prototype,"styleUrl",void 0),r([o({type:String})],ae.prototype,"styleName",void 0),r([o({type:St})],ae.prototype,"portal",void 0),ae=vr=r([l("esri.symbols.support.StyleOrigin")],ae);const gr=ae;var $r;let Ve=$r=class extends Qe{constructor(){super(...arguments),this.url=""}clone(){return new $r({url:this.url})}};r([o({type:String})],Ve.prototype,"url",void 0),Ve=$r=r([l("esri.symbols.support.Thumbnail")],Ve);const Fo={icon:ce,object:Pr,line:et,path:qr,fill:Ze,extrude:xo,text:je,water:_o},ri=d.ofType({base:P,key:"type",typeMap:Fo,errorContext:"symbol-layer"});let k=class extends N{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const s=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=s==null?void 0:s.type,n=i||d;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&de.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){bs(t,this._get("symbolLayers"))}readStyleOrigin(t,s,i){if(t.styleUrl&&t.name){const n=_r(t.styleUrl,i);return new gr({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new gr({portal:(i==null?void 0:i.portal)||St.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new Hr("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,s,i,n){if(t.styleUrl&&t.name){let p=so(t.styleUrl,n);Fr(p)&&(p=io(p)),s.styleOrigin={styleUrl:p,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!Qo(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Hr("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):s.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof P||t&&Fo[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};r([o({json:{read:!1,write:!1}})],k.prototype,"color",null),r([o({type:ri,nonNullable:!0,json:{write:!0}}),ro(ws)],k.prototype,"symbolLayers",null),r([o({type:gr})],k.prototype,"styleOrigin",void 0),r([Q("styleOrigin")],k.prototype,"readStyleOrigin",null),r([O("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k.prototype,"writeStyleOrigin",null),r([o({type:Ve,json:{read:!1}})],k.prototype,"thumbnail",void 0),r([o({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k.prototype,"type",void 0),k=r([l("esri.symbols.Symbol3D")],k);const tt=k;let De=class extends y{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};r([o({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],De.prototype,"type",void 0),r([o({readOnly:!0})],De.prototype,"visible",void 0),De=r([l("esri.symbols.callouts.Callout3D")],De);const Co=De;var xr;let mt=xr=class extends y{constructor(e){super(e),this.color=new b("white")}clone(){return new xr({color:a(this.color)})}};r([o(Z({colorRequiredOnWrite:!0}))],mt.prototype,"color",void 0),mt=xr=r([l("esri.symbols.callouts.LineCallout3DBorder")],mt);const oi=mt;var Sr;let Y=Sr=class extends Co{constructor(e){super(e),this.type="line",this.color=new b([0,0,0,1]),this.size=Se(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Sr({color:a(this.color),size:this.size,border:a(this.border)})}};r([c({line:"line"})],Y.prototype,"type",void 0),r([o(Z({colorRequiredOnWrite:!0}))],Y.prototype,"color",void 0),r([o({...A,json:{write:{isRequired:!0}}})],Y.prototype,"size",void 0),r([o({type:oi,json:{write:!0}})],Y.prototype,"border",void 0),r([o({readOnly:!0})],Y.prototype,"visible",null),Y=Sr=r([l("esri.symbols.callouts.LineCallout3D")],Y);const Mo=Y;function Er(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Ro(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!Er(e)}function Yi(e){return e.type==="point-3d"||e.type==="label-3d"}function Xi(e){return e.horizontalAlignment==="center"}const To={types:{key:"type",base:Co,typeMap:{line:Mo}},json:{write:!0}};var jr;let ge=jr=class extends y{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new jr({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};r([o({...A,json:{write:{isRequired:!0}}})],ge.prototype,"screenLength",void 0),r([o({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ge.prototype,"minWorldLength",void 0),r([o({type:Number,json:{write:!0}})],ge.prototype,"maxWorldLength",void 0),ge=jr=r([l("esri.symbols.support.Symbol3DVerticalOffset")],ge);const Ur=ge;var ft;const zo=d.ofType({base:null,key:"type",typeMap:{text:je}});let X=ft=class extends tt{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new zo,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Ro(this)}hasVisibleVerticalOffset(){return Er(this)}clone(){return new ft({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail),callout:a(this.callout),verticalOffset:a(this.verticalOffset)})}static fromTextSymbol(e){return new ft({symbolLayers:new d([je.fromTextSymbol(e)])})}};r([o({type:Ur,json:{write:!0}})],X.prototype,"verticalOffset",void 0),r([o(To)],X.prototype,"callout",void 0),r([o({json:{read:!1,write:!1}})],X.prototype,"styleOrigin",void 0),r([o({type:zo})],X.prototype,"symbolLayers",void 0),r([c({LabelSymbol3D:"label-3d"},{readOnly:!0})],X.prototype,"type",void 0),X=ft=r([l("esri.symbols.LabelSymbol3D")],X);const Br=X;var bt;const ko=d.ofType({base:null,key:"type",typeMap:{line:et,path:qr}}),si=d.ofType({base:null,key:"type",typeMap:{line:et,path:qr}});let Pe=bt=class extends tt{constructor(e){super(e),this.symbolLayers=new ko,this.type="line-3d"}clone(){return new bt({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromSimpleLineSymbol(e){return new bt({symbolLayers:new d([et.fromSimpleLineSymbol(e)])})}};r([o({type:ko,json:{type:si}})],Pe.prototype,"symbolLayers",void 0),r([c({LineSymbol3D:"line-3d"},{readOnly:!0})],Pe.prototype,"type",void 0),Pe=bt=r([l("esri.symbols.LineSymbol3D")],Pe);const Lt=Pe;var wt;const Ao=d.ofType({base:null,key:"type",typeMap:{fill:Ze}});let qe=wt=class extends tt{constructor(e){super(e),this.symbolLayers=new Ao,this.type="mesh-3d"}clone(){return new wt({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromSimpleFillSymbol(e){return new wt({symbolLayers:new d([Ze.fromSimpleFillSymbol(e)])})}};r([o({type:Ao})],qe.prototype,"symbolLayers",void 0),r([c({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],qe.prototype,"type",void 0),qe=wt=r([l("esri.symbols.MeshSymbol3D")],qe);const Jr=qe;function ii(e,t,s){return t.imageData?no({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Do(t.url,s)}function Do(e,t){if(!Fr(e)){const s=li(t);if(s)return es(s,"images",e)}return _r(e,t)}function ni(e,t,s,i){if(oo(e)){const n=Zo(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,s&&s.imageData===t.imageData&&s.url&&vt(s.url,t,"url",i)}else vt(e,t,"url",i)}const Po={json:{read:{source:["imageData","url"],reader:ii},write:{writer(e,t,s,i){ni(e,t,this.source,i)}}}},qo={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,s){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=Do(t.url,s)),i}}}};function li(e){var n,p;if(!e)return null;const{origin:t,layer:s}=e;if(t!=="service"&&t!=="portal-item")return null;const i=s==null?void 0:s.type;return i==="feature"||i==="stream"?(n=s.parsedUrl)==null?void 0:n.path:i==="map-image"||i==="tile"?(p=e.url)==null?void 0:p.path:null}var Or;let j=Or=class extends ms{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,s,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),s!=null&&(n.width=M(s)),i!=null&&(n.height=M(i)),n}clone(){const e=new Or({color:a(this.color),height:this.height,outline:a(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",a(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};r([c({esriPFS:"picture-fill"},{readOnly:!0})],j.prototype,"type",void 0),r([o(Po)],j.prototype,"url",void 0),r([o({type:Number,json:{write:!0}})],j.prototype,"xscale",void 0),r([o({type:Number,json:{write:!0}})],j.prototype,"yscale",void 0),r([o({type:Number,cast:M,json:{write:!0}})],j.prototype,"width",void 0),r([o({type:Number,cast:M,json:{write:!0}})],j.prototype,"height",void 0),r([o({type:Number,cast:M,json:{write:!0}})],j.prototype,"xoffset",void 0),r([o({type:Number,cast:M,json:{write:!0}})],j.prototype,"yoffset",void 0),r([o(qo)],j.prototype,"source",void 0),j=Or=r([l("esri.symbols.PictureFillSymbol")],j);const Wr=j;var Nr;let F=Nr=class extends fs{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=M(t)),s!=null&&(i.height=M(s)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new Nr({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",a(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};r([o({json:{write:!1}})],F.prototype,"color",void 0),r([c({esriPMS:"picture-marker"},{readOnly:!0})],F.prototype,"type",void 0),r([o(Po)],F.prototype,"url",void 0),r([o(qo)],F.prototype,"source",void 0),r([o({type:Number,cast:M,json:{write:!0}})],F.prototype,"height",void 0),r([Q("height",["height","size"])],F.prototype,"readHeight",null),r([o({type:Number,cast:M,json:{write:!0}})],F.prototype,"width",void 0),r([o({json:{write:!1}})],F.prototype,"size",void 0),F=Nr=r([l("esri.symbols.PictureMarkerSymbol")],F);const It=F;var pe;const Eo=d.ofType({base:null,key:"type",typeMap:{icon:ce,object:Pr,text:je}});let ue=pe=class extends tt{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Eo,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Ro(this)}hasVisibleVerticalOffset(){return Er(this)}clone(){return new pe({verticalOffset:a(this.verticalOffset),callout:a(this.callout),styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new pe({symbolLayers:new d([ce.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new pe({symbolLayers:new d([ce.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,n;if(((n=(i=e.data)==null?void 0:i.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const s=e.data.symbol;return new pe(s!=null&&s.callout?{symbolLayers:new d([ce.fromCIMSymbol(e)]),callout:new Mo({size:.5,color:new b([0,0,0])}),verticalOffset:new Ur({screenLength:40})}:{symbolLayers:new d([ce.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new pe({symbolLayers:new d([je.fromTextSymbol(e)])})}};r([o({type:Ur,json:{write:!0}})],ue.prototype,"verticalOffset",void 0),r([o(To)],ue.prototype,"callout",void 0),r([o({type:Eo,json:{origins:{"web-scene":{write:!0}}}})],ue.prototype,"symbolLayers",void 0),r([c({PointSymbol3D:"point-3d"},{readOnly:!0})],ue.prototype,"type",void 0),ue=pe=r([l("esri.symbols.PointSymbol3D")],ue);const _t=ue;var Ee;const Uo=d.ofType({base:null,key:"type",typeMap:{extrude:xo,fill:Ze,icon:ce,line:et,object:Pr,text:je,water:_o}});let Ue=Ee=class extends tt{constructor(e){super(e),this.symbolLayers=new Uo,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Gr(de.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Gr(de.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Yo(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Xo))}clone(){return new Ee({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromJSON(e){var s;const t=new Ee;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(s=e.symbolLayers)!=null&&s[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Ee({symbolLayers:new d([Ze.fromSimpleFillSymbol(e)])})}};r([o({type:Uo,json:{write:!0}})],Ue.prototype,"symbolLayers",void 0),r([c({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ue.prototype,"type",void 0),Ue=Ee=r([l("esri.symbols.PolygonSymbol3D")],Ue);const Ft=Ue;var Lr;let C=Lr=class extends N{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:St.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new Lr({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new Wo("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,s=t?this._fetchCacheKey:null;if(t!=null){const u=s&&t.get(s);if(u)return u.clone()}const{resolveWebStyleSymbol:i}=await gs(()=>import("./webStyleSymbolUtils-C6Yokq8v.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url);Vo(e);const n=i(this,{portal:this.portal},e);n.catch(u=>{de.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",u)});const p=await n;return t!=null&&t.set(s,p.clone()),p}};r([o({json:{write:!1}})],C.prototype,"color",void 0),r([o({type:String,json:{write:!0}})],C.prototype,"styleName",void 0),r([o({type:St,json:{write:!1}})],C.prototype,"portal",void 0),r([o({type:String,json:{read:lo,write:vt}})],C.prototype,"styleUrl",void 0),r([o({type:Ve,json:{read:!1}})],C.prototype,"thumbnail",void 0),r([o({type:String,json:{write:!0}})],C.prototype,"name",void 0),r([c({styleSymbolReference:"web-style"},{readOnly:!0})],C.prototype,"type",void 0),r([o()],C.prototype,"_fetchCacheKey",null),C=Lr=r([l("esri.symbols.WebStyleSymbol")],C);const Ct=C;function Qi(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Zi(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Vr={base:N,key:"type",typeMap:{"simple-fill":Mr,"picture-fill":Wr,"picture-marker":It,"simple-line":Cr,"simple-marker":xt,text:$t,"label-3d":Br,"line-3d":Lt,"mesh-3d":Jr,"point-3d":_t,"polygon-3d":Ft,"web-style":Ct,cim:he},errorContext:"symbol"},en={base:N,key:"type",typeMap:{"picture-marker":It,"simple-marker":xt,"point-3d":_t,cim:he},errorContext:"symbol"},tn={base:N,key:"type",typeMap:{"simple-line":Cr,"line-3d":Lt,cim:he},errorContext:"symbol"},rn={base:N,key:"type",typeMap:{"simple-fill":Mr,"picture-fill":Wr,"polygon-3d":Ft,cim:he},errorContext:"symbol"},on={base:N,key:"type",typeMap:{"picture-marker":It,"simple-marker":xt,text:$t,"web-style":Ct,cim:he},errorContext:"symbol"},sn=Ho({types:Vr}),nn={base:N,key:"type",typeMap:{"simple-fill":Mr,"picture-fill":Wr,"picture-marker":It,"simple-line":Cr,"simple-marker":xt,text:$t,"line-3d":Lt,"mesh-3d":Jr,"point-3d":_t,"polygon-3d":Ft,"web-style":Ct,cim:he},errorContext:"symbol"},ln={base:N,key:"type",typeMap:{text:$t,"label-3d":Br},errorContext:"symbol"},an={base:N,key:"type",typeMap:{"line-3d":Lt,"mesh-3d":Jr,"point-3d":_t,"polygon-3d":Ft,"web-style":Ct,cim:he},errorContext:"symbol"},pn={base:N,key:"type",typeMap:{"label-3d":Br},errorContext:"symbol"},un=eo(Vr);var Ir;function ai(e){if(!e)return null;const t={};for(const s in e){const i=po(e[s]);i&&(t[s]=i)}return Object.keys(t).length!==0?t:null}function pi(e){if(e==null)return null;const t={};for(const s in e){const i=e[s];i&&(t[s]=i.toJSON())}return Object.keys(t).length!==0?t:null}let g=Ir=class extends D.ClonableMixin(y){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Go(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Ko(de.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new Ir({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const s of[t,this.sourceLayer,this.layer])if(s){if("popupTemplate"in s&&s.popupTemplate)return s.popupTemplate;if(e&&"defaultPopupTemplate"in s&&s.defaultPopupTemplate!=null)return s.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const s=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",s,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:pi(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:y.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const s={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",s,s,e.action)}}_notifyLayer(e,t,s,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:s};e==="origin-transform"&&(n.action=i),e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Kr(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Kr(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};r([o({value:null,json:{read:ai}})],g.prototype,"aggregateGeometries",null),r([o({value:null})],g.prototype,"attributes",null),r([o({value:null,types:ps,json:{read:po}})],g.prototype,"geometry",null),r([o({type:Boolean})],g.prototype,"isAggregate",void 0),r([o({clonable:"reference"})],g.prototype,"layer",void 0),r([o({clonable:"reference"})],g.prototype,"origin",void 0),r([o({type:ks})],g.prototype,"popupTemplate",void 0),r([o({clonable:"reference"})],g.prototype,"sourceLayer",void 0),r([o({value:null,types:Vr})],g.prototype,"symbol",null),r([o({clonable:!1,json:{read:!1,write:!1}})],g.prototype,"_version",void 0),r([o({type:Boolean,value:!0})],g.prototype,"visible",null),g=Ir=r([l("esri.Graphic")],g);const yn=g;export{Pr as $,Ct as A,Br as B,sn as C,nn as D,Vr as E,Hi as F,Wi as G,on as H,Cs as I,zr as J,$o as K,an as L,en as M,Os as N,Ke as O,ln as P,Xe as Q,Ss as R,Zi as S,pn as T,Bi as U,tn as V,rn as W,vo as X,Is as Y,ce as Z,qr as _,Ge as a,Xi as a0,Yi as a1,$e as a2,Z as a3,yn as b,He as c,he as d,Ve as e,It as f,Ji as g,Mo as h,gr as i,oi as j,$s as k,un as l,js as m,co as n,Qi as o,Ur as p,ks as q,$ as r,Ft as s,Lt as t,Jr as u,Ze as v,_t as w,et as x,qs as y,je as z};
