const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-action-group-Dp-CUDEe.js","./action-group-BJ76kEtf.js","./jsxFactory-CJa39Fro.js","./tslib.es6-B3Jf3DVX.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./subclass-BZA_h8Db.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./Accessor-BLX9ikPh.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./Evented-BHRw9x22.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./conditionalSlot-R5D9krYS.js","./observers-D2xgmA06.js","./loadable-DM18hPdE.js","./locale-A4FuYD8q.js","./dom-D_AJDzAj.js","./key-D63ExP77.js","./t9n-D0ry3MEw.js","./action-menu-C6uYzPu-.js","./array-BMcQdnYi.js","./action-D0Er9Ef6.js","./interactive-y84HQRWL.js","./component-6CIDVndn.js","./icon-BQO9J86c.js","./loader-C-zIPscB.js","./popover-Q5ruM4hh.js","./floating-ui-Bma_zPVt.js","./debounce-BOqmhDXu.js","./focusTrapComponent-BSUg_DLj.js","./openCloseComponent-CmOrfBN-.js","./Heading-D7P0OjYI.js","./FloatingArrow-BBdsG5MP.js","./calcite-action-menu-U0ATVHAe.js","./calcite-action-Bys6x4p_.js","./calcite-icon-Cu0W9dtm.js","./calcite-list-item-vbKS6alm.js","./utils3-BrU6GrkI.js","./resources4-DXHY1U7R.js","./handle-Ct1HP3bl.js","./calcite-list-C4jOVpC-.js","./filter-yN6-jZOU.js","./input2-BReyTnf4.js","./form-BZPQ5PUM.js","./label-DEe8AW1C.js","./Validation-Bz9yoU6e.js","./input-j1u1wOBY.js","./input-message-CWvsvdFk.js","./progress-BXyickl_.js","./scrim-DPa2aeKh.js","./calcite-notice-DSp0z_Oh.js","./resources2-DjkgwdyM.js"])))=>i.map(i=>d[i]);
import{_ as y}from"./index-Bh2oEzTI.js";import{r as o}from"./tslib.es6-B3Jf3DVX.js";import{m as s,a as f}from"./subclass-BZA_h8Db.js";import{a as E}from"./catalogUtils-DyGHPM81.js";import{t as T,n as L}from"./actionUtils-ClPpuZ4c.js";import{B as S,r as M,n as l,w as D}from"./jsxFactory-CJa39Fro.js";import{r as O,N as k,l as P,d as x,q as $,M as R,t as U}from"./layerListUtils-Cb_jjipP.js";var _;let n=_=class extends S{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=t=>{this.item.actionsOpen=t.target.open},this._setTooltipReference=t=>{var i;(i=this.onTooltipReferenceChange)==null||i.call(this,this.item.layer.uid,t)},this._removeTooltipReference=()=>{var t;(t=this.onTooltipReferenceChange)==null||t.call(this,this.item.layer.uid,null)}}loadDependencies(){return M({"action-group":()=>y(()=>import("./calcite-action-group-Dp-CUDEe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]),import.meta.url),"action-menu":()=>y(()=>import("./calcite-action-menu-U0ATVHAe.js"),__vite__mapDeps([44,30,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,27,28,25,32,33,26,24,34,29,35,36,37,38,39,40,41,42,43]),import.meta.url),action:()=>y(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([45,32,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,27,33,25,26,28,24,34,29,35,36]),import.meta.url),icon:()=>y(()=>import("./calcite-icon-Cu0W9dtm.js"),__vite__mapDeps([46,35,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,27,24]),import.meta.url),"list-item":()=>y(()=>import("./calcite-list-item-vbKS6alm.js"),__vite__mapDeps([47,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,27,33,26,28,24,29,25,48,49,32,34,35,36,50]),import.meta.url),list:()=>y(()=>import("./calcite-list-C4jOVpC-.js"),__vite__mapDeps([51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,27,33,24,49,48,25,29,26,28,52,39,35,53,54,55,34,56,57,58,59,36,60]),import.meta.url),notice:()=>y(()=>import("./calcite-notice-DSp0z_Oh.js"),__vite__mapDeps([61,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,27,25,26,28,29,62,41,34,35]),import.meta.url)})}render(){var I,C;const e=this.parentTitles??[],{_title:t,item:i,activeItem:a,selectedDragItemLayerUid:c,selectionMode:p,selectedItems:d,messages:r,parent:u,css:m}=this,g="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in r&&!i.visibleAtCurrentTimeExtent?`${t} (${r.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in r&&!i.visibleAtCurrentScale?`${t} (${r.layerInvisibleAtScale})`:t,A="parent"in i&&((C=(I=i.parent)==null?void 0:I.layer)==null?void 0:C.type)==="catalog",{layer:b}=i,v="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return l("calcite-list-item",{afterCreate:h=>this._focusSelectedDragEl(h,i),afterUpdate:h=>this._focusSelectedDragEl(h,i),class:this.classes(m.item,"itemActive"in m&&{[m.itemActive]:a===i}),"data-item":i,"data-layer-id":b.id,dragDisabled:!i.sortable||A,dragSelected:b.uid===c,id:b.uid,key:`list-item-${b.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in i&&i.open,selected:p!=="none"&&d.includes(i),title:g,unavailable:v,value:b.uid,onCalciteListItemDragHandleChange:h=>this._handleCalciteListItemDragHandleChange(h,i),onCalciteListItemSelect:h=>"visible"in i&&this._handleCalciteListItemSelect(h,i,u),onCalciteListItemToggle:h=>"open"in i&&this._handleCalciteListItemToggle(h,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,l("div",{class:this.classes(m.itemContent,"itemInvisible"in m&&{[m.itemInvisible]:v}),slot:"content"},t),this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:i,css:a}=this;if(!i.statusIndicators)return null;const{publishing:c}=e,p="updating"in e&&e.updating&&!t,d="connectionStatus"in e?e.connectionStatus:void 0,r=!!d;return l("calcite-icon",{class:this.classes(a.statusIndicator,{[a.publishing]:c},"updating"in a&&{[a.updating]:p},"connectionStatus"in a&&{[a.connectionStatus]:r},"connectionStatusConnected"in a&&{[a.connectionStatusConnected]:r&&d==="connected"}),icon:O({connectionStatus:d,publishing:c}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:i}=this,{layer:a}=e,c="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,p="temporaryTableIndicators"in t&&t.temporaryTableIndicators,d="persistenceEnabled"in a&&(E(a)||!a.persistenceEnabled);return(c||p)&&d?l("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"actions-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:i,visibilityAppearance:a,css:c}=this;if(!("visible"in e&&"layerVisibility"in i&&"visibleToggle"in c&&a))return null;const{visible:p}=e,d=t==null?void 0:t.visibilityMode;if(d==="inherited")return null;const r=U({visible:p,exclusive:d==="exclusive",visibilityAppearance:a}),u=a==="checkbox",m=i.layerVisibility;return l("calcite-action",{appearance:"transparent",class:c.visibleToggle,icon:u?r:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:u?"actions-start":"actions-end",text:m,title:m},u?null:l("calcite-icon",{class:this.classes({[c.visibleIcon]:d!=="exclusive"&&p}),icon:r,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:l("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:t,title:i,disabled:a}=e;return l("calcite-action",{active:t,appearance:"transparent",disabled:a,icon:T(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,i=t.options;return l("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},l("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>l("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(t=>this._renderAction({action:t,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){var i;const{css:e}=this,t=((i=this.item.layer)==null?void 0:i.type)==="catalog-footprint";return"itemCatalogIcon"in e&&t?l("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){var i;const{css:e}=this,t=((i=this.item.layer)==null?void 0:i.type)==="catalog-dynamic-group";return"itemCatalogIcon"in e&&t?l("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:i}=this;if(!("visible"in t))return;const{layer:a}=t,c=(a==null?void 0:a.type)==="catalog-dynamic-group";return"catalogLayerList"in i&&i.catalogLayerList&&c?l("calcite-action",{appearance:"transparent",disabled:!a.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:i,listModeDisabled:a,selectionMode:c}=this;if(!("visible"in t))return;const p=[...this.parentTitles??[],t.title],{children:d,layer:r}=t,u=(r==null?void 0:r.type)!=="catalog-dynamic-group"&&k(t),m=!a&&P(r);return u||!m&&!u&&e&&(r==null?void 0:r.type)==="group"?l("calcite-list",{canPull:g=>!!this.canMove&&this.canMove(g,"pull"),canPut:g=>!!this.canMove&&this.canMove(g,"put"),"data-item":t,"data-layer-type":i,dragEnabled:!!e&&t.childrenSortable&&x(t),group:`${i}-${r.uid}`,key:`child-list-${r.uid}`,selectionAppearance:"border",selectionMode:c},d==null?void 0:d.filter(g=>!g.hidden).toArray().map(g=>this._renderItem(g,t,p)),this._renderedTablesItem):null}get _hasTables(){var i,a;const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&!!((i=t.tables)!=null&&i.length);case"map-image":case"tile":return e.includes(t.type)&&!!((a=t.subtables)!=null&&a.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:i}=this,{layer:a}=e;return"itemTableIcon"in i&&"visible"in e&&"tables"in t&&this._hasTables?l("calcite-list-item",{class:i.item,"data-layer-id":a.id,dragDisabled:!0,key:`list-item-table-list-tables-${a.uid}`,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},l("div",{class:i.itemContent,slot:"content"},t.tables),l("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),l("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:i}=this;return e.error?l("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},l("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},l("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?l("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},l("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},l("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:$(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(t=>t.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,t)=>e+t.length,0)}_renderAction(e){const{item:t}=this,{action:i,textEnabled:a}=e;if(!i)return null;const{active:c,disabled:p,title:d,type:r,indicator:u}=i;return l("calcite-action",{active:r==="toggle"&&i.value,appearance:"transparent",disabled:p,icon:T(i),indicator:u,key:`action-${i.uid}`,loading:c,onclick:()=>this._triggerAction(t,i),scale:"s",slot:a?void 0:"actions-end",text:d??"",textEnabled:a,title:d??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(e){const{css:t}=this,{className:i,icon:a}=e;if(a)return null;const c="image"in e?e.image:void 0,p={[t.itemActionIcon]:!!i,[t.itemActionImage]:!!c};return i&&(p[i]=!0),c||i?l("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,p),key:"icon",styles:L(c)}):null}_renderItem(e,t,i=[]){return l(_,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var t;e&&((t=this.onCatalogOpen)==null||t.call(this,e))}_focusSelectedDragEl(e,t){this.selectedDragItemLayerUid===t.layer.uid&&D(e)}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_handleCalciteListItemDragHandleChange(e,t){var a;e.stopPropagation();const i=e.target.dragSelected;(a=this.onSelectedDragItemLayerUidChange)==null||a.call(this,i?t.layer.uid:null)}_handleCalciteListItemSelect(e,t,i){R(e.target)===t&&this.selectionMode==="none"&&(i==null?void 0:i.visibilityMode)!=="inherited"&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){if(!e)return;(t==null?void 0:t.visibilityMode)==="exclusive"&&e.visible||(e.visible=!e.visible)}};n.vnodeSelector="calcite-list-item",o([s()],n.prototype,"activeItem",void 0),o([s()],n.prototype,"canMove",void 0),o([s()],n.prototype,"css",void 0),o([s()],n.prototype,"dragEnabled",void 0),o([s()],n.prototype,"item",void 0),o([s()],n.prototype,"layerTablesEnabled",void 0),o([s()],n.prototype,"listModeDisabled",void 0),o([s()],n.prototype,"messages",void 0),o([s()],n.prototype,"messagesCommon",void 0),o([s()],n.prototype,"onAction",void 0),o([s()],n.prototype,"onPanelOpen",void 0),o([s()],n.prototype,"onCatalogOpen",void 0),o([s()],n.prototype,"onTablesOpen",void 0),o([s()],n.prototype,"onSelectedDragItemLayerUidChange",void 0),o([s()],n.prototype,"onTooltipReferenceChange",void 0),o([s()],n.prototype,"parent",void 0),o([s()],n.prototype,"parentTitles",void 0),o([s()],n.prototype,"rootGroupUid",void 0),o([s()],n.prototype,"selectionMode",void 0),o([s()],n.prototype,"selectedItems",void 0),o([s()],n.prototype,"selectedDragItemLayerUid",void 0),o([s()],n.prototype,"visibleElements",void 0),o([s()],n.prototype,"visibilityAppearance",void 0),o([s()],n.prototype,"_title",null),o([s()],n.prototype,"_renderedItemStatus",null),o([s()],n.prototype,"_renderedItemTemporaryIcon",null),o([s()],n.prototype,"_renderedItemToggle",null),o([s()],n.prototype,"_renderedPanel",null),o([s()],n.prototype,"_renderedPanelAction",null),o([s()],n.prototype,"_renderedActions",null),o([s()],n.prototype,"_renderedActionMenu",null),o([s()],n.prototype,"_renderedActionMenuContent",null),o([s()],n.prototype,"_renderedCatalogFootprintIcon",null),o([s()],n.prototype,"_renderedCatalogDynamicIcon",null),o([s()],n.prototype,"_renderedCatalogSelectNode",null),o([s()],n.prototype,"_renderedChildList",null),o([s()],n.prototype,"_hasTables",null),o([s()],n.prototype,"_renderedTablesItem",null),o([s()],n.prototype,"_renderedItemMessage",null),o([s()],n.prototype,"_singleAction",null),o([s()],n.prototype,"_filteredSections",null),o([s()],n.prototype,"_actionsCount",null),n=_=o([f("esri.widgets.LayerList.LayerListItem")],n);const q=n;export{q as _};
