import{m}from"./index-ee4c09de-CPW6V7nq.js";import{a as p}from"./index-Bh2oEzTI.js";import{p as d,A as w,a as f,w as h}from"./index-69f02a9e-wRYZXCy2.js";import{e as i}from"./component-utils-42b12dba-BfugynV_.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.2
 */const D=m(p),V=(n,e)=>(t,o)=>u(t,n,o);class y extends w{hostConnected(){this.component.manager.loadedCalled&&i(this.component)}async hostLoad(){await super.hostLoad(),!this.component.manager.destroyed&&(this._watchMetaProperties(),f.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"viewModel"))}hostLoaded(){var r;const{el:e}=this.component,t=((r=e.shadowRoot)==null?void 0:r.firstElementChild)??e.firstElementChild??void 0;e.childElem=t??e.childElem;let o=!1;const c=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view,set:a=>{const l=this.component.el.view,s=a;this._instance.view=s,this._instance.map=s==null?void 0:s.map,this._watchViewDestroy(),this.component.requestUpdate("view",l),a&&!o&&(o=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),c&&(this._instance.view=c),this.component.el.isConnected&&(i(this.component),this._watchViewDestroy())}hostDisconnected(){var e,t;typeof this.component.el.childElem=="object"&&((t=(e=this.component.el.view)==null?void 0:e.ui)==null||t.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){h(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&i(this.component)}),h(this.component,"referenceElement",()=>i(this.component))}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var t;return((t=this.component.el.view)==null?void 0:t.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}}const u=d(y);export{V as m,D as u};
