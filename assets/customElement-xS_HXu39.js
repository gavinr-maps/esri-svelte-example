const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Df8-0rWt.js","./jsxFactory-CLjKarlq.js","./Accessor-BHnuXKD2.js","./intl-Do3GEEJ7.js","./Promise-CmQqe-ke.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./Evented-DCWccWGU.js","./reactiveUtils-BR0C1Kq4.js","./SimpleObservable-7oieNGD8.js","./uuid-Cl5lrJ4c.js","./ref-Ccn4I0kT.js","./directive-helpers-C0aXnQdc.js","./dom--xxYYVQF.js","./guid-ejniuQmw.js","./floating-ui-BkLjHVN3.js","./debounce-DbkufipY.js","./interactive-B8siLByk.js","./key-CZcQa38B.js","./loadable-DOQnSSjG.js","./observers-BdozwIHb.js","./openCloseComponent-dw_x67D_.js","./dynamicClasses-pKEMtFzB.js","./index-BfAp5_ga.js","./resources6-Cs2_VmEC.js","./index-DIB7yhJF.js","./index-73bQemcW.js","./component-CFGnHAqh.js","./index-Wn4pOF_U.js","./index-Ch_sYKt7.js","./index-svtat3zr.js","./live-BIBBLA6F.js","./keyed-CdPY5MOf.js","./static-g4FJ4v8I.js","./form-B15gmg4q.js","./label-BLne9qNB.js","./locale-CXx8I9ox.js","./Validation-O1TFEQW-.js","./useT9n-CJAswmP1.js","./input-DI9tZAPS.js","./index-BGRynF8w.js","./index-D130RxMY.js","./index-Bej-0mbI.js","./index-DVEy4f7w.js","./index-CjrYEQXz.js","./index-ujykA9Eq.js","./index-cLdK6V3t.js","./customElement-kBYuBfHB.js","./index-DIp-v4qk.js","./FloatingArrow-D9X-HbKW.js","./useFocusTrap-ENcZoC4L.js","./focusTrapComponent-Br_3Mz8_.js","./index-CCqZjfSZ.js","./array-BbE1dLa5.js","./index-BFYOU3WJ.js","./index-Bb6Bx1n-.js","./index-BnH8ZLT5.js","./core-zHisM37C.js","./filter-Cs9GmjDF.js","./escapeRegExp-UP7ghjt8.js","./utils3-CmcdYP7V.js","./index-GVt5zfuo.js","./text-CbTMlb2o.js","./index-nrWOrFCt.js","./resources4-Crg87oFz.js","./index-DSiQ4rVy.js","./index-DsrvUplP.js","./math-BpAtBkbz.js","./index-DqW6JA5s.js"])))=>i.map(i=>d[i]);
import{_ as w,L as z,c as q,n as j,a as J}from"./index-tefRSezt.js";import{r as o,m as a,a as N,g as V,B as D,s as $}from"./Accessor-BHnuXKD2.js";import{V as K,d as S,P as Q,v as X}from"./reactiveUtils-BR0C1Kq4.js";import{e as P,O as W,n as e,c as B}from"./jsxFactory-CLjKarlq.js";import{n as R}from"./cast-BA_-jlhc.js";import{h as Y}from"./Color-gncXBiLc.js";import{d as I,u as k}from"./TextSymbol-BQ_NW9Xo.js";import{b as G}from"./Graphic-CFXUQZlS.js";import{f as Z}from"./intl-Do3GEEJ7.js";import{h as tt}from"./UpdatingHandles-ptqz1ck8.js";import{h as it}from"./GraphicsLayer-Acqd2VFm.js";import{e as O}from"./layerUtils-BS1Di3Pm.js";import{h as st}from"./Promise-CmQqe-ke.js";import{P as et}from"./useWidget-Dlf3SkC7.js";import"./Evented-DCWccWGU.js";import"./SimpleObservable-7oieNGD8.js";import"./uuid-Cl5lrJ4c.js";import"./JSONSupport-CGdeqxpk.js";import"./colorUtils-Rxh2V3ai.js";import"./mathUtils-DV9iOXpW.js";import"./enumeration-Cr5WIZs4.js";import"./screenUtils-_ZIvrt5o.js";import"./writer-B2bQV2uU.js";import"./Clonable-DvJsj5LF.js";import"./opacityUtils-CSd4XoR2.js";import"./Point-XGrwlf63.js";import"./ActionToggle-__-l4AdQ.js";import"./Identifiable-BrT7zvUW.js";import"./jsonUtils-Cu7OBRmN.js";import"./Extent-CBBGeHb-.js";import"./Polyline-BmuD2-ZN.js";import"./typeUtils-BSg8Y507.js";import"./collectionUtils-CbaToa73.js";import"./Portal-CTRRujjZ.js";import"./vec3f64-BLpZdpfb.js";import"./aaBoundingBox-CeBivBRq.js";import"./GraphicsCollection-CkliHSk1.js";import"./Layer-C9uQlTBT.js";import"./TimeExtent-J5qnUFx_.js";import"./timeUtils-D2X862bk.js";import"./ScaleRangeLayer-C59zG_yk.js";import"./layerContainerType-C5CzMsLd.js";import"./jsonUtils-TjZmCq6l.js";import"./utils-DYurMneM.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-Fi6iAz29.js";import"./common-DQOJ18NT.js";import"./ElevationInfo-Di4W6v5U.js";import"./unitConversionUtils-C4AR5obr.js";import"./lengthUtils-DjJgJFRg.js";import"./index-BkKcLxWB.js";import"./component-utils-DWY0IMHC.js";let b=class extends V{constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};o([a({type:Boolean,nonNullable:!0})],b.prototype,"arrowsToggle",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"capSelect",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"colorPicker",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"stylePicker",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"widthInput",void 0),b=o([N("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],b);const f=b,g="esri-un-associations",v={divControlsSymbolPicker:`${g}__div-controls-symbol-picker`,dropdown:`${g}__dropdown`,dropdownItemLineCap:`${g}__dropdown-item-line-cap`,dropdownItemLinePattern:`${g}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${g}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${g}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${g}__dropdown-trigger`,labelAndToggle:`${g}__label-and-toggle`};let E=class extends W{constructor(i,s){super(i,s),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new I,this.messages=null,this.showArrows=!1,this.visibleElements=new f,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:i,lineColor:s,lineStyle:n,lineWidth:c,showArrows:l}},visibleElements:r}=this,u=this.lineSymbol;return e("div",{class:v.divControlsSymbolPicker},r.arrowsToggle?this._renderToggle(l,this.showArrows,u,"marker"):void 0,r.capSelect?this._renderLineStylePicker(i,this._lineCapTypes,u,"cap"):void 0,r.colorPicker&&u.color?this._renderColorPicker(s,u.color.toHex(),u,"color"):void 0,r.stylePicker?this._renderLineStylePicker(n,this._lineStyleTypes,u,"style"):void 0,r.widthInput?this._renderNumberInput(c,u.width.toString(),u,"width"):void 0)}loadDependencies(){return B({dropdown:()=>w(()=>import("./index-Df8-0rWt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),"dropdown-group":()=>w(()=>import("./index-BfAp5_ga.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,22,26]),import.meta.url),"dropdown-item":()=>w(()=>import("./index-DIB7yhJF.js"),__vite__mapDeps([27,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,13,14,21,29,19,26]),import.meta.url),input:()=>w(()=>import("./index-Wn4pOF_U.js"),__vite__mapDeps([30,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,32,33,14,34,13,35,36,19,20,37,21,38,29,39,40,41]),import.meta.url),"input-number":()=>w(()=>import("./index-BGRynF8w.js"),__vite__mapDeps([42,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,32,33,14,34,13,36,19,20,37,21,38,29,39,41,40]),import.meta.url),label:()=>w(()=>import("./index-D130RxMY.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,9,10,11,12,37,15,16]),import.meta.url),switch:()=>w(()=>import("./index-Bej-0mbI.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,36,19,20,37,21]),import.meta.url)})}_afterComponentCreate(i){"value"in i&&i.value!=null&&"setNumberValue"in i&&i.setNumberValue({committing:!1,value:i.value,origin:"direct"})}_renderColorPicker(i,s,n,c){return e("calcite-label",{scale:"s"},i,e("calcite-input",{scale:"s",type:"color",value:s,onCalciteInputInput:l=>{const r=l.currentTarget;n.set(c,new Y(r.value))}}))}_renderLineStylePicker(i,s,n,c){const l=c==="style",r="esri/widgets/UtilityNetworkAssociations/assets/img";function u(y,d){return e("calcite-dropdown-item",{label:y,selected:n[d]===y},e("div",{class:l?v.dropdownItemLinePattern:v.dropdownItemLineCap,style:`background-image:url(${R(`${r}/line-${l?"patterns":"caps"}/${y}.png`)})`}))}return e("calcite-label",{scale:"s"},i,e("calcite-dropdown",{class:v.dropdown,onCalciteDropdownSelect:y=>{const d=y.currentTarget;n.set(c,d.selectedItems[0].label)}},e("div",{class:v.dropdownTrigger,role:"button",slot:"trigger"},e("div",{class:l?v.dropdownSelectedItemLinePattern:v.dropdownSelectedItemLineCap,style:`background-image:url(${R(`${r}/line-${l?"patterns":"caps"}/${n[c]}.png`)})`})),e("calcite-dropdown-group",null,s.map(y=>u(y,c)))))}_renderNumberInput(i,s,n,c){return e("calcite-label",{scale:"s"},i,e("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:s,onCalciteInputNumberChange:l=>{const r=l.currentTarget;n.set(c,r.value)}}))}_renderToggle(i,s,n,c){return e("div",{class:v.labelAndToggle},e("calcite-label",{scale:"s"},i),e("calcite-switch",{bind:this,checked:s,onCalciteSwitchChange:l=>{l.currentTarget.checked?n.set(c,new k({style:"arrow"})):n.set(c,null)}}))}};o([a()],E.prototype,"lineSymbol",void 0),o([a(),P("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],E.prototype,"messages",void 0),o([a()],E.prototype,"showArrows",void 0),o([a({type:f,nonNullable:!0})],E.prototype,"visibleElements",void 0),E=o([N("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],E);const U=E,ot={noAssociationTypeSpecified:-2147208504};let A=class extends V{constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new tt,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new I({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new K,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new I({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await Z("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then(()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([S(()=>[this.view,this.utilityNetwork],async()=>{var r,u;const{loadErrors:i,messages:{info:{noUtilityNetwork:s,noView:n}}}=this;this._initialValidationsFinished=!1,i.removeAll();let c=!1,l=!1;this.removeAssociations(),((r=this.view)==null?void 0:r.type)==="2d"?(O(this.view,this._internalGraphicsLayerConnectivity),O(this.view,this._internalGraphicsLayerStructuralAttachment),c=!0):(this.loadErrors.push(n),D.getLogger(this).error(new $("utilityNetworkAssociations:missing-property",n))),((u=this.utilityNetwork)==null?void 0:u.type)==="utility"?l=!0:(this.loadErrors.push(s),D.getLogger(this).error(new $("utilityNetworkAssociations:missing-property",s))),c&&l&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0},{initial:!0}),S(()=>{var i;return[(i=this.view)==null?void 0:i.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]},async()=>{var i;(i=this.view)!=null&&i.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()}),S(()=>[this.showArrowsConnectivity],()=>{const i=this.connectivityAssociationsLineSymbol.clone();i.marker=null,this.showArrowsConnectivity&&(i.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const s of this._internalGraphicsLayerConnectivity.graphics)s.symbol=i}),S(()=>[this.showArrowsStructuralAttachment],()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();i.marker=null,this.showArrowsStructuralAttachment&&(i.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const s of this._internalGraphicsLayerStructuralAttachment.graphics)s.symbol=i}),S(()=>{const{cap:i,color:s,style:n,width:c,marker:l}=this.connectivityAssociationsLineSymbol;return[i,s,n,c,l]},()=>{const i=this.connectivityAssociationsLineSymbol.clone();for(const s of this._internalGraphicsLayerConnectivity.graphics)s.symbol=i;this.showArrowsConnectivity=!1,i.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,i.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),S(()=>{const{cap:i,color:s,style:n,width:c,marker:l}=this.structuralAttachmentAssociationsLineSymbol;return[i,s,n,c,l]},()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();for(const s of this._internalGraphicsLayerStructuralAttachment.graphics)s.symbol=i;this.showArrowsStructuralAttachment=!1,i.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,i.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),st(t)])})}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":this.executionError!==""?"warning":this._initialValidationsFinished?"ready":"loading"}get utilityNetwork(){return this.utilityNetwork}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}get view(){return this.view}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){var l,r,u,y;const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:i,noAssociationTypeSpecified:s}},utilityNetwork:n}=this;this._set("executionError","");const c={extent:(l=this.view)==null?void 0:l.extent,gdbVersion:(r=this.utilityNetwork)==null?void 0:r.gdbVersion,maxGeometryCount:this.maxAllowableAssociations,moment:(u=this.utilityNetwork)==null?void 0:u.historicMoment,outSpatialReference:(y=this.view)==null?void 0:y.spatialReference.clone(),returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations};this._updatingHandles.addPromise(n==null?void 0:n.synthesizeAssociationGeometries(c).then(d=>{let _=[],x=[];return d!=null&&d.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",t)):(d==null?void 0:d.associations.length)===0?(this.removeAssociations(),void this._set("executionError",i)):void(d&&(_=d==null?void 0:d.associations.filter(({associationType:C})=>C==="connectivity").map(C=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new G({geometry:C.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol}))),x=d.associations.filter(({associationType:C})=>C==="attachment").map(C=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new G({geometry:C.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol}))),this._internalGraphicsLayerConnectivity.removeAll(),_.length>0&&this._internalGraphicsLayerConnectivity.addMany(_),this._internalGraphicsLayerStructuralAttachment.removeAll(),x.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(x)))},d=>{var x;let _="Error: "+d;d instanceof $&&((x=d.details)!=null&&x.raw)&&(d.details.raw.extendedCode===ot.noAssociationTypeSpecified?_=s:_=d.details.message),this._set("executionError",_)}))}_createInternalGraphicsLayer(t){return new it({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&((t=this.view)!=null&&t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};o([a()],A.prototype,"_initialValidationsFinished",void 0),o([a()],A.prototype,"autoRefreshAssociations",void 0),o([a({type:I,nonNullable:!0})],A.prototype,"connectivityAssociationsLineSymbol",void 0),o([a({readOnly:!0})],A.prototype,"executionError",void 0),o([a({type:Boolean,value:!0})],A.prototype,"includeConnectivityAssociations",null),o([a({type:Boolean,value:!0})],A.prototype,"includeStructuralAttachmentAssociations",null),o([a()],A.prototype,"loadErrors",void 0),o([a()],A.prototype,"maxAllowableAssociations",void 0),o([a()],A.prototype,"messages",void 0),o([a()],A.prototype,"showAssociationsEnabled",void 0),o([a()],A.prototype,"showArrowsConnectivity",void 0),o([a()],A.prototype,"showArrowsStructuralAttachment",void 0),o([a({readOnly:!0})],A.prototype,"state",null),o([a({type:I,nonNullable:!0})],A.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),o([a()],A.prototype,"utilityNetwork",null),o([a()],A.prototype,"view",null),A=o([N("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],A);const H=A;let L=class extends V{constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=new f,this.structuralAttachmentAssociationsSettings=new f}};o([a({type:Boolean,nonNullable:!0})],L.prototype,"maxAllowableAssociationsSlider",void 0),o([a({type:f,nonNullable:!0})],L.prototype,"connectivityAssociationsSettings",void 0),o([a({type:f,nonNullable:!0})],L.prototype,"structuralAttachmentAssociationsSettings",void 0),L=o([N("esri.widgets.UtilityNetworkAssociations.VisibleElements")],L);const F=L,p="esri-un-associations",h={action:`${p}__action`,actionRefresh:`${p}__action-refresh`,blockContent:`${p}__block-content`,blockSectionSettings:`${p}__block-section-settings`,combobox:`${p}__combobox`,comboboxItem:`${p}__combobox-item`,divControlsMain:`${p}__div-controls-main`,label:`${p}__label`,labelAndCombobox:`${p}__label-and-combobox`,labelAndSlider:`${p}__label-and-slider`,labelAndToggle:`${p}__label-and-toggle`,panel:`${p}__panel`,slider:`${p}__slider`,statusIconContainer:`${p}__status-icon-container`,statusIconWarning:`${p}__status-icon-warning`,switch:`${p}__switch`,switchContainer:`${p}__switch-container`,widgetContainer:`${p}__widget-container`};let m=class extends W{constructor(t,i){super(t,i),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new H,this.visibleElements=new F}initialize(){this.addHandles([S(()=>{var t;return[(t=this.view)==null?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]},()=>{this.autoRefreshAssociations===!0&&(this.showAssociationsEnabled===!0?this.viewModel.showAssociations():this.viewModel.removeAssociations())}),S(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.utilityNetworks},t=>{t==null||t.items.forEach(async(i,s)=>{i.loaded||await i.load(),s===0&&(this.utilityNetwork=i)})},Q),X(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.utilityNetworks},"change",t=>{const i=t.target;t.added.forEach(async s=>{s.loaded||await s.load()}),t.removed.some(s=>{var n;return s.layerUrl===((n=this.utilityNetwork)==null?void 0:n.layerUrl)})&&(this.utilityNetwork=null),this.utilityNetwork=i.length?i.getItemAt(0):null})])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return e("div",{class:h.widgetContainer},e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return B({action:()=>w(()=>import("./index-DVEy4f7w.js"),__vite__mapDeps([45,46,1,2,3,4,5,6,7,8,9,10,11,12,16,40,28,15,22,34,14,13,19,21,29]),import.meta.url),block:()=>w(()=>import("./index-ujykA9Eq.js"),__vite__mapDeps([47,46,1,2,3,4,5,6,7,8,9,10,11,12,16,40,48,13,14,22,15,28,0,17,18,19,20,21,23,24,45,34,29,27,26,25,49,50,35,51,52,53,54,55]),import.meta.url),"block-section":()=>w(()=>import("./index-BFYOU3WJ.js"),__vite__mapDeps([56,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,44,13,14,36,19,20,37,21,34,40]),import.meta.url),icon:()=>w(()=>import("./index-73bQemcW.js").then(t=>t.i),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22]),import.meta.url),combobox:()=>w(()=>import("./index-Bb6Bx1n-.js"),__vite__mapDeps([57,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,58,13,14,21,19,20,29,40,34,33,59,60,61,18,17,36,37,23,39,62]),import.meta.url),"combobox-item":()=>w(()=>import("./index-GVt5zfuo.js"),__vite__mapDeps([63,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,34,14,19,62,29,64]),import.meta.url),label:()=>w(()=>import("./index-D130RxMY.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,9,10,11,12,37,15,16]),import.meta.url),notice:()=>w(()=>import("./index-nrWOrFCt.js"),__vite__mapDeps([65,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,13,14,21,66,23,29,40]),import.meta.url),panel:()=>w(()=>import("./index-DSiQ4rVy.js").then(t=>t.i),__vite__mapDeps([67,46,1,2,3,4,5,6,7,8,9,10,11,12,16,40,28,15,22,45,34,14,13,19,21,29,50,17,18,23,35,51,52,53,20,54,55,48]),import.meta.url),slider:()=>w(()=>import("./index-DsrvUplP.js"),__vite__mapDeps([68,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,13,14,34,39,36,19,20,37,21,38,69,40]),import.meta.url),switch:()=>w(()=>import("./index-Bej-0mbI.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,36,19,20,37,21]),import.meta.url),tooltip:()=>w(()=>import("./index-DqW6JA5s.js"),__vite__mapDeps([70,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,15,16,18,23,51,34]),import.meta.url)})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.currentTarget.checked}_getLoadErrorMessagesAsNotices(t,i){return e("calcite-notice",{closable:!1,key:`error-notice-${i}`,kind:"warning",open:!0,scale:"s"},e("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.currentTarget.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:i}}=this;i!=="ready"&&i!=="warning"||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(U,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:i}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return e("div",{class:h.labelAndToggle,key:"connectivityAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderComboboxItem({heading:t,value:i,selected:s}){return e("calcite-combobox-item",{class:h.comboboxItem,heading:t,selected:s,textLabel:t,value:i})}_renderContent(){const{viewModel:{loadErrors:t,state:i}}=this;return i==="disabled"?e("div",{class:h.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):e("calcite-panel",{class:h.panel,disabled:i==="loading"},e("div",{class:h.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,i,s){return e("div",{key:t,slot:"control"},e("calcite-action",{id:i,loading:!0,text:s}),e("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:i},e("span",null,s)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:i}}=this;if(i)return e("div",{class:h.labelAndSlider,key:"maxAllowableAssociationsSliderDiv"},e("calcite-label",{class:h.label},t),e("calcite-slider",{bind:this,class:h.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:i},viewModel:{state:s}}=this,n=`${this.id}-refresh-action`;if(s!=="disabled")return e("div",{class:h.actionRefresh,slot:"control"},e("calcite-action",{bind:this,class:h.action,icon:"refresh-f",id:n,loading:s==="loading",onclick:this._refreshAssociations,text:t}),e("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:n},e("span",null,s==="loading"?i:t)))}_renderSettingsPane(){var l,r;const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:i,connectivityAssociationsSettings:s,structuralAttachmentAssociationsSettings:n}}=this,c=(r=((l=this.view)==null?void 0:l.map).utilityNetworks)==null?void 0:r.items;if((c==null?void 0:c.length)!==1||i||s||n)return e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},e("div",{class:h.divControlsMain},this._renderUtilityNetworkSettings(),this._renderMaxAllowableAssociationsSlider()),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:i},viewModel:{state:s}}=this,n=`${this.id}-show-associations-switch`;if(s!=="disabled")return s==="loading"?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,i):e("div",{class:h.switchContainer,key:"switchDiv",slot:"control"},e("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:h.switch,id:n,onCalciteSwitchChange:this._showAssociationsSwitchChange}),e("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:n},e("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:i,state:s}}=this;switch(s){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,i);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(U,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:i}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return e("div",{class:h.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_renderUtilityNetworkSettings(){var n,c;const{messages:{input:{utilityNetwork:t}}}=this,i=(c=((n=this.view)==null?void 0:n.map).utilityNetworks)==null?void 0:c.items;if((i==null?void 0:i.length)===1)return null;const s=i==null?void 0:i.map(l=>{var d;const r=l.title,u=l.layerUrl,y=l.layerUrl===((d=this.utilityNetwork)==null?void 0:d.layerUrl);return this._renderComboboxItem({heading:r,value:u,selected:y})});return e("div",{class:h.labelAndCombobox,key:"utilityNetworkComboboxDiv"},e("calcite-label",{class:h.label},t),e("calcite-combobox",{class:h.combobox,clearDisabled:!0,label:"",maxItems:3,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:l=>{const r=i==null?void 0:i.find(u=>u.layerUrl===l.currentTarget.value);this.utilityNetwork=r}},s))}_showAssociationsSwitchChange({currentTarget:t}){const{viewModel:i}=this;this.showAssociationsEnabled=t.checked,this._associationsOptionsEnabled=t.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.currentTarget.checked}_renderWarningIcon(t,i,s){return s?e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}),e("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:i},e("span",null,s))):e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}))}};o([a()],m.prototype,"autoRefreshAssociations",null),o([a()],m.prototype,"connectivityAssociationsLineSymbol",null),o([a()],m.prototype,"icon",null),o([a()],m.prototype,"includeConnectivityAssociations",null),o([a()],m.prototype,"includeStructuralAttachmentAssociations",null),o([a()],m.prototype,"label",null),o([a()],m.prototype,"maxAllowableAssociations",null),o([a()],m.prototype,"maxAllowableAssociationsSliderMax",null),o([a()],m.prototype,"maxAllowableAssociationsSliderMin",null),o([a()],m.prototype,"maxAllowableAssociationsSliderStep",null),o([a(),P("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],m.prototype,"messages",void 0),o([a(),P("esri/t9n/common")],m.prototype,"messagesCommon",void 0),o([a()],m.prototype,"showArrowsConnectivity",null),o([a()],m.prototype,"showArrowsStructuralAttachment",null),o([a()],m.prototype,"showAssociationsEnabled",null),o([a()],m.prototype,"structuralAttachmentAssociationsLineSymbol",null),o([a()],m.prototype,"utilityNetwork",null),o([a()],m.prototype,"view",null),o([a({type:H})],m.prototype,"viewModel",void 0),o([a({type:F,nonNullable:!0})],m.prototype,"visibleElements",void 0),m=o([N("esri.widgets.UtilityNetworkAssociations")],m);const nt=m;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const at=et(nt),M=class M extends z{constructor(){super(...arguments),this.widget=at(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.autoRefreshAssociationsDisabled=this.widget.autoRefreshAssociations,this.connectivityAssociationsLineSymbol=this.widget.connectivityAssociationsLineSymbol,this.includeConnectivityAssociationsDisabled=this.widget.includeConnectivityAssociations,this.includeStructuralAttachmentAssociationsDisabled=this.widget.includeStructuralAttachmentAssociations,this.maxAllowableAssociations=this.widget.maxAllowableAssociations,this.maxAllowableAssociationsSliderMax=this.widget.maxAllowableAssociationsSliderMax,this.maxAllowableAssociationsSliderMin=this.widget.maxAllowableAssociationsSliderMin,this.maxAllowableAssociationsSliderStep=this.widget.maxAllowableAssociationsSliderStep,this.position="bottom-left",this.showArrowsConnectivity=this.widget.showArrowsConnectivity,this.showArrowsStructuralAttachment=this.widget.showArrowsStructuralAttachment,this.showAssociationsEnabled=this.widget.showAssociationsEnabled,this.structuralAttachmentAssociationsLineSymbol=this.widget.structuralAttachmentAssociationsLineSymbol,this.utilityNetwork=this.widget.utilityNetwork,this.showConnectivityAssociationsSettingsArrowsToggle=this.widget.visibleElements.connectivityAssociationsSettings.arrowsToggle,this.visibleElementsConnectivityAssociationsSettingsArrowsToggle=!1,this.showConnectivityAssociationsSettingsCapSelect=this.widget.visibleElements.connectivityAssociationsSettings.capSelect,this.visibleElementsConnectivityAssociationsSettingsCapSelect=!1,this.hideConnectivityAssociationsSettingsColorPicker=this.widget.visibleElements.connectivityAssociationsSettings.colorPicker,this.visibleElementsConnectivityAssociationsSettingsColorPicker=!0,this.hideConnectivityAssociationsSettingsStylePicker=this.widget.visibleElements.connectivityAssociationsSettings.stylePicker,this.visibleElementsConnectivityAssociationsSettingsStylePicker=!0,this.hideConnectivityAssociationsSettingsWidthInput=this.widget.visibleElements.connectivityAssociationsSettings.widthInput,this.visibleElementsConnectivityAssociationsSettingsWidthInput=!0,this.showMaxAllowableAssociationsSlider=this.widget.visibleElements.maxAllowableAssociationsSlider,this.visibleElementsMaxAllowableAssociationsSlider=!1,this.showStructuralAttachmentAssociationsSettingsArrowsToggle=this.widget.visibleElements.structuralAttachmentAssociationsSettings.arrowsToggle,this.visibleElementsStructuralAttachmentAssociationsSettingsArrowsToggle=!1,this.showStructuralAttachmentAssociationsSettingsCapSelect=this.widget.visibleElements.structuralAttachmentAssociationsSettings.capSelect,this.visibleElementsStructuralAttachmentAssociationsSettingsCapSelect=!1,this.hideStructuralAttachmentAssociationsSettingsColorPicker=this.widget.visibleElements.structuralAttachmentAssociationsSettings.colorPicker,this.visibleElementsStructuralAttachmentAssociationsSettingsColorPicker=!0,this.hideStructuralAttachmentAssociationsSettingsStylePicker=this.widget.visibleElements.structuralAttachmentAssociationsSettings.stylePicker,this.visibleElementsStructuralAttachmentAssociationsSettingsStylePicker=!0,this.hideStructuralAttachmentAssociationsSettingsWidthInput=this.widget.visibleElements.structuralAttachmentAssociationsSettings.widthInput,this.visibleElementsStructuralAttachmentAssociationsSettingsWidthInput=!0,this.icon=this.widget.icon,this.label=this.widget.label,this.arcgisReady=q()}async destroy(){await this.manager.destroy()}async load(){var i,s;if((i=this.el.view)!=null&&i.map&&this.el.view.map.portalItem){await this.el.view.map.load();const n=(s=this.el.view.map.utilityNetworks)==null?void 0:s.getItemAt(0);await(n==null?void 0:n.load()),this.utilityNetwork=n}}willUpdate(i){this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsArrowsToggle"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsCapSelect"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsColorPicker"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsStylePicker"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsWidthInput"),this._handleVisibilityChange(i,"MaxAllowableAssociationsSlider"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsArrowsToggle"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsCapSelect"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsStylePicker"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsWidthInput")}_handleVisibilityChange(i,s){const n=`show${s}`,c=`hide${s}`,l=`visibleElements${s}`,r=this;i.has(n)?r[l]=!!r[n]:i.has(c)?r[l]=!r[c]:i.has(l)&&(console.warn(`${this.el.tagName.toLowerCase()}: The property ${l} is deprecated. Use ${n in r?n:c} instead.`),n in r?r[n]=!!r[l]:c in r&&(r[c]=!r[l]))}};M.properties={autoDestroyDisabled:5,autoRefreshAssociationsDisabled:5,connectivityAssociationsLineSymbol:0,includeConnectivityAssociationsDisabled:5,includeStructuralAttachmentAssociationsDisabled:5,maxAllowableAssociations:9,maxAllowableAssociationsSliderMax:9,maxAllowableAssociationsSliderMin:9,maxAllowableAssociationsSliderStep:9,position:1,referenceElement:1,showArrowsConnectivity:5,showArrowsStructuralAttachment:5,showAssociationsEnabled:5,structuralAttachmentAssociationsLineSymbol:0,utilityNetwork:0,showConnectivityAssociationsSettingsArrowsToggle:5,visibleElementsConnectivityAssociationsSettingsArrowsToggle:5,showConnectivityAssociationsSettingsCapSelect:5,visibleElementsConnectivityAssociationsSettingsCapSelect:5,hideConnectivityAssociationsSettingsColorPicker:5,visibleElementsConnectivityAssociationsSettingsColorPicker:5,hideConnectivityAssociationsSettingsStylePicker:5,visibleElementsConnectivityAssociationsSettingsStylePicker:5,hideConnectivityAssociationsSettingsWidthInput:5,visibleElementsConnectivityAssociationsSettingsWidthInput:5,showMaxAllowableAssociationsSlider:5,visibleElementsMaxAllowableAssociationsSlider:5,showStructuralAttachmentAssociationsSettingsArrowsToggle:5,visibleElementsStructuralAttachmentAssociationsSettingsArrowsToggle:5,showStructuralAttachmentAssociationsSettingsCapSelect:5,visibleElementsStructuralAttachmentAssociationsSettingsCapSelect:5,hideStructuralAttachmentAssociationsSettingsColorPicker:5,visibleElementsStructuralAttachmentAssociationsSettingsColorPicker:5,hideStructuralAttachmentAssociationsSettingsStylePicker:5,visibleElementsStructuralAttachmentAssociationsSettingsStylePicker:5,hideStructuralAttachmentAssociationsSettingsWidthInput:5,visibleElementsStructuralAttachmentAssociationsSettingsWidthInput:5,icon:1,label:1},M.shadowRootOptions=j;let T=M;J("arcgis-utility-network-associations",T);export{T as ArcgisUtilityNetworkAssociations};
