const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BPm91e5Z.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DwIhxbHs.js","./dom-DEluURzl.js","./observers-Co4E8E8j.js","./keyed-CU1C-h1n.js","./directive-helpers-DaBykg1t.js","./ref-D9wHsL_T.js","./interactive-DTzfFku4.js","./loadable-XBvaWFYY.js","./component-CBVlbUuE.js","./index-C6d66FVb.js","./index-DyXGQ9Xl.js","./index-DVGzfobf.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./key-CZcQa38B.js","./openCloseComponent-nqWrSaIH.js","./dynamicClasses-pKEMtFzB.js","./index-C7Sgjfzm.js","./resources6-Cs2_VmEC.js","./index-XCNLEnDV.js","./customElement-_nG5icNK.js","./index-DMeQur4V.js","./static-DLD4WjLv.js","./FloatingArrow-BZRr6Zld.js","./useFocusTrap-COeL24Kx.js","./focusTrapComponent-D1wJZ4RD.js","./index-DK5B8inx.js","./array-BbE1dLa5.js","./index--OBudxYA.js","./label-CHHpnzD0.js","./index-pyEU_klK.js","./index-fFnlo_g2.js","./index-DWeq-ojO.js","./live-D7NQ-TrC.js","./form-BzoUrXC7.js","./locale-CXx8I9ox.js","./Validation-BYp9DS84.js","./input-DI9tZAPS.js","./index-jjUP6Yam.js","./index-CMdCteX_.js","./index-Z5_W1-0F.js","./index-C6rrpqn6.js","./index-BCDLx0rN.js","./filter-D4A4y0z5.js","./escapeRegExp-CdLjXKbf.js","./utils-Dtivty39.js","./index-CV25o1as.js","./resources4-Crg87oFz.js","./index-Bts9-rBr.js","./CatalogLayerList-DIBSl3Wj.js","./Identifiable-BHVfzH03.js","./ReactiveMap-BHFEHYMj.js","./ListItem-DomCK2qd.js","./ActionToggle-D7439N1A.js","./layerListUtils-BIu86t6C.js","./widget-GKEQ1p1m.js","./LayerListItem-F6gOcfEF.js","./catalogUtils-CGCu8hgu.js","./actionUtils-CtQI3q6p.js","./substitute-CvdjmBYq.js","./globalCss-vQlnDsEX.js","./listUtils-vswmtyNy.js","./vmEvent-D4Ubqkbq.js","./TableList-EPNRr6_L.js"])))=>i.map(i=>d[i]);
import{_ as v,L as te,u as ie,c as se,n as re,i as ae,a as le}from"./index-4eY77cms.js";import{r as oe}from"./index-C5b9dHRB.js";import{r,m as a,a as U,g as ne}from"./Accessor-BmwT4B0c.js";import{V as R,d as I,P as B,v as de,A as ce}from"./reactiveUtils-XM7cS2OP.js";import{n as he}from"./Identifiable-BHVfzH03.js";import{s as me}from"./ReactiveMap-BHFEHYMj.js";import{O as pe,c as ue,n as p,T as D,e as j}from"./jsxFactory-Cnml7uXM.js";import{i as ye}from"./Evented-Dw4_VOGn.js";import{O as G}from"./ListItem-DomCK2qd.js";import{m as J,u as _e,i as be,N as w,q as K,s as ge,v as fe,h as Le,f as Q}from"./layerListUtils-BIu86t6C.js";import{I as ve}from"./LayerListItem-F6gOcfEF.js";import{e as $}from"./globalCss-vQlnDsEX.js";import{n as Ie}from"./Heading-BcR6CGTM.js";import{t as we}from"./listUtils-vswmtyNy.js";import{e as Ee}from"./vmEvent-D4Ubqkbq.js";import{P as Fe}from"./useWidget-BajufX8l.js";import"./SimpleObservable-CvOkykwM.js";import"./intl-Duiy0OzY.js";import"./Promise-DfET-uns.js";import"./cast-CsZslgGN.js";import"./JSONSupport-DcrLLGjL.js";import"./uuid-Cl5lrJ4c.js";import"./ActionToggle-D7439N1A.js";import"./widget-GKEQ1p1m.js";import"./catalogUtils-CGCu8hgu.js";import"./actionUtils-CtQI3q6p.js";import"./substitute-CvdjmBYq.js";import"./mathUtils-Cfq9PL9W.js";import"./component-utils-D0ciaaZ_.js";const _={view:"view",basemap:"basemap",baseLayers:"base-layers",referenceLayers:"reference-layers",baseLayersListMode:"reference-layers-list-mode",referenceLayersListMode:"base-layers-list-mode",baseLayerViews:"base-layer-views",referenceLayerViews:"reference-layer-views",children:"children"},Te="hide",N=R.ofType(G);let f=class extends ye.EventedAccessor{constructor(e){super(e),this.baseItems=new N,this.baseListItemCreatedFunction=null,this.checkPublishStatusEnabled=!1,this.listModeDisabled=!1,this.referenceListItemCreatedFunction=null,this.referenceItems=new N,this.view=null,this._compileBaseList=this._compileBaseList.bind(this),this._compileReferenceList=this._compileReferenceList.bind(this)}initialize(){this.addHandles([I(()=>{var e,t,i,s;return[(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap,((i=this.view)==null?void 0:i.ready)===!0,(s=this.view)==null?void 0:s.basemapView]},()=>this._watchBasemapLayers(),B),I(()=>[this.baseListItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._baseListItemCreatedFunctionChanged()),I(()=>[this.referenceListItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._referenceListItemCreatedFunctionChanged())],_.view)}destroy(){this.view=null,this._removeAllBaseItems(),this._removeAllReferenceItems()}get basemapTitle(){var e,t,i;return((i=(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)==null?void 0:i.title)??null}set basemapTitle(e){this._override("basemapTitle",e)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":this.view?"loading":"disabled"}get totalBaseItems(){return this.baseItems.flatten(e=>e.children).length}get totalReferenceItems(){return this.referenceItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem({targetItem:e,fromParentItem:t,toParentItem:i,from:s,to:l,newIndex:n}){var V,A;const d=e==null?void 0:e.layer;if(!d||d.type==="subtype-sublayer"||d.type==="sublayer")return;const c=(A=(V=this.view)==null?void 0:V.map)==null?void 0:A.basemap,h=c==null?void 0:c.baseLayers,y=c==null?void 0:c.referenceLayers,L=t?J(t):s==="base"?h:y,u=i?J(i):l==="base"?h:y;if(!L||!u)return;const{baseItems:C,referenceItems:F}=this,m=s==="base"?C:F,M=l==="base"?C:F,x=(t==null?void 0:t.children)||m,k=(i==null?void 0:i.children)||M,P=u.length-n;e.parent=i||null,x.remove(e),L.remove(d),k.includes(e)||k.add(e,P),u.includes(d)||u.add(d,P),this._compileLists()}_createItemChangeHandles({items:e,key:t,callback:i}){this.removeHandles(t),i(),e&&this.addHandles(e.on("change",()=>i()),t)}_createListItem({layer:e,type:t}){const{view:i,baseListItemCreatedFunction:s,referenceListItemCreatedFunction:l,checkPublishStatusEnabled:n,listModeDisabled:d}=this;return new G({layer:e,checkPublishStatusEnabled:n,listItemCreatedFunction:t==="base"?s:l,listModeDisabled:d,view:i})}_watchLayersListMode({layers:e,key:t,callback:i}){this.removeHandles(t),e&&!this.listModeDisabled&&this.addHandles(I(()=>e.filter(s=>"listMode"in s).map(s=>s.listMode).toArray(),()=>i()),t)}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>_e(t)!==Te):void 0}_compileListItems({layers:e,items:t,key:i,type:s,callback:l}){this._watchLayersListMode({layers:e,key:i,callback:l});const n=this._getViewableLayers(e);n!=null&&n.length?(this._createNewItems({type:s,items:t,layers:n}),this._removeItems({items:t,layers:n}),this._sortItems(t,n)):s==="base"?this._removeAllBaseItems():this._removeAllReferenceItems()}_compileReferenceList(){var i,s,l;const{referenceItems:e}=this,t=(l=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap)==null?void 0:l.referenceLayers;this._compileListItems({type:"reference",layers:t,items:e,key:_.referenceLayersListMode,callback:this._compileReferenceList})}_compileBaseList(){var i,s,l;const{baseItems:e}=this,t=(l=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap)==null?void 0:l.baseLayers;this._compileListItems({type:"base",layers:t,items:e,key:_.baseLayersListMode,callback:this._compileBaseList})}_compileLists(){this._compileReferenceList(),this._compileBaseList()}_createNewItems({items:e,layers:t,type:i}){t==null||t.forEach(s=>{e.some(l=>l.layer===s)||e.add(this._createListItem({type:i,layer:s}))})}_removeItems({items:e,layers:t}){e&&e.forEach(i=>{if(!i)return;(t==null?void 0:t.some(l=>i.layer===l))||(this.removeHandles(`${_.children}-${i.uid}`),e.remove(i),i.destroy())})}_sortItems(e,t){e&&t&&e.sort((i,s)=>{const l=t.indexOf(i.layer),n=t.indexOf(s.layer);return l>n?-1:l<n?1:0})}_removeAllBaseItems(){this.baseItems.drain(e=>{this.removeHandles(`${_.children}-${e.uid}`),e.destroy()})}_removeAllReferenceItems(){this.referenceItems.drain(e=>{this.removeHandles(`${_.children}-${e.uid}`),e.destroy()})}_baseListItemCreatedFunctionChanged(){this._removeAllBaseItems(),this._compileLists()}_referenceListItemCreatedFunctionChanged(){this._removeAllReferenceItems(),this._compileLists()}_watchBasemapLayers(){const{view:e}=this;if(this.removeHandles([_.baseLayers,_.referenceLayers,_.basemap,_.baseLayerViews,_.referenceLayerViews]),!(e!=null&&e.ready))return this._removeAllBaseItems(),void this._removeAllReferenceItems();this._compileLists(),this.addHandles([I(()=>{var t,i,s;return(s=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap)==null?void 0:s.baseLayers},t=>this._createItemChangeHandles({items:t,key:_.baseLayers,callback:this._compileBaseList}),B),I(()=>{var t,i,s;return(s=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap)==null?void 0:s.referenceLayers},t=>this._createItemChangeHandles({items:t,key:_.referenceLayers,callback:this._compileReferenceList}),B),I(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.basemapView)==null?void 0:i.baseLayerViews},t=>this._createItemChangeHandles({items:t,key:_.baseLayerViews,callback:this._compileBaseList}),B),I(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.basemapView)==null?void 0:i.referenceLayerViews},t=>this._createItemChangeHandles({items:t,key:_.referenceLayerViews,callback:this._compileReferenceList}),B)],_.basemap)}};r([a({type:N,readOnly:!0})],f.prototype,"baseItems",void 0),r([a()],f.prototype,"basemapTitle",null),r([a()],f.prototype,"baseListItemCreatedFunction",void 0),r([a()],f.prototype,"checkPublishStatusEnabled",void 0),r([a({nonNullable:!0})],f.prototype,"listModeDisabled",void 0),r([a()],f.prototype,"referenceListItemCreatedFunction",void 0),r([a({type:N,readOnly:!0})],f.prototype,"referenceItems",void 0),r([a({readOnly:!0})],f.prototype,"state",null),r([a()],f.prototype,"totalBaseItems",null),r([a()],f.prototype,"totalReferenceItems",null),r([a()],f.prototype,"view",void 0),f=r([U("esri.widgets.BasemapLayerList.BasemapLayerListViewModel")],f);const Y=f;let b=class extends ne{constructor(){super(...arguments),this.baseLayers=!0,this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.editTitleButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!0,this.referenceLayers=!0,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};r([a({type:Boolean,nonNullable:!0})],b.prototype,"baseLayers",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"catalogLayerList",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"closeButton",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"collapseButton",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"editTitleButton",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"errors",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"filter",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"flow",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"heading",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"referenceLayers",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"statusIndicators",void 0),r([a({type:Boolean,nonNullable:!0})],b.prototype,"temporaryLayerIndicators",void 0),b=r([U("esri.widgets.BasemapLayerList.BasemapLayerListVisibleElements")],b);const Z=b,g="esri-basemap-layer-list",E=`${g}__item`,T={base:g,actionMenu:`${g}__action-menu`,actionGroup:`${g}__action-group`,filterNoResults:`${g}__filter-no-results`,item:E,itemActive:`${E}--active`,itemContentBottom:`${E}-content-bottom`,itemMessage:`${E}-message`,itemActionIcon:`${E}-action-icon`,itemActionImage:`${E}-action-image`,itemTableIcon:`${E}-table-icon`,itemTemporaryIcon:`${E}-temporary-icon`,itemCatalogIcon:`${E}-catalog-icon`,statusIndicator:`${g}__status-indicator`,editingForm:`${g}__editing-form`,publishing:`${g}__publishing`,updating:`${g}__updating`,editing:`${g}__editing`,connectionStatus:`${g}__connection-status`,connectionStatusConnected:`${g}__connection-status--connected`,visibleToggle:`${g}__visible-toggle`,visibleIcon:`${g}__visible-icon`,section:`${g}__section`},ee=R.ofType(G),W="nested",Ce=".*\\S+.*",S="data-basemap-layer-type";let o=class extends he.IdentifiableMixin(pe){constructor(e,t){super(e,t),this._baseListEl=null,this._referenceListEl=null,this._activeItem=null,this._tooltipReferenceMap=new Map,this._editTitleInput=null,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._focusEditingFlowItem=!1,this._layerListMap=new me,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`basemap-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.editingTitle=!1,this.filterPlaceholder="",this.baseFilterPredicate=null,this.baseFilterText="",this.referenceFilterPredicate=null,this.referenceFilterText="",this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new R(["knowledge-graph"]),this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minFilterItems=be,this.openedLayers=new R,this.openedLayerLists=new R,this.tableList=null,this.selectedItems=new ee,this.selectionMode="none",this.tileOptions=null,this.viewModel=new Y,this.visibilityAppearance="default",this.visibleElements=new Z,this._canMove=({dragEl:i,fromEl:s,toEl:l},n)=>{var A,q,z;const d=n==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,c=w(i);if(!(c!=null&&c.sortable))return!1;const h=w(s),y=K(s),L=w(l),u=K(l),C=!!y&&!!u&&y===u,F={selected:c,from:h,to:L},m=s.group,M=l.group,x=((A=h==null?void 0:h.layer)==null?void 0:A.type)??"",k=((q=L==null?void 0:L.layer)==null?void 0:q.type)??"",P=new Set(["map-image","catalog","knowledge-graph"]);return m&&M&&typeof d=="function"?d.call(null,F):C&&!P.has(x)&&!P.has(k)&&((z=c==null?void 0:c.layer)==null?void 0:z.type)!=="sublayer"},this._onSelectedDragItemLayerUidChange=i=>{this._selectedDragItemLayerUid=i},this._onTriggerAction=(i,s)=>{this.triggerAction(i,s)},this._onTooltipReferenceChange=(i,s)=>{s?this._tooltipReferenceMap.set(i,s):this._tooltipReferenceMap.delete(i)},this._onTablesOpen=i=>{var s;this.openedLayers.push(i.layer),this._focusLayerFlowItem=(s=i.layer)==null?void 0:s.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onCatalogOpen=i=>{var s,l;this.openedLayers.push((s=i.layer)==null?void 0:s.parent),this._focusLayerFlowItem=(l=i.layer)==null?void 0:l.uid},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=i=>{if(this.visibilityAppearance!=="default")return;const s=Array.from(i.composedPath()).find(l=>{var n;return(n=l.classList)==null?void 0:n.contains(T.item)});this._activeItem=w(s)},this._onCalciteListOrderChange=i=>{const{_lastDragDetail:s}=this,{toEl:l,fromEl:n,dragEl:d,newIndex:c}=i;if(!n||!l||(s==null?void 0:s.newIndex)===c&&(s==null?void 0:s.dragEl)===d&&(s==null?void 0:s.toEl)===l&&(s==null?void 0:s.fromEl)===n)return;this._lastDragDetail=i,this._selectedDragItemLayerUid=d.value;const h=n,y=l;if(h!==y)this._moveLayerFromChildList({toEl:y,fromEl:h,dragEl:d,newIndex:c});else{const L=Array.from(n.children).filter(u=>u==null?void 0:u.matches("calcite-list-item")).map(u=>u.value);this._sortLayers(h,L)}}}initialize(){this.addHandles([de(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),B),I(()=>[this.viewModel.referenceItems.toArray(),this.viewModel.baseItems.toArray()],()=>ge(this.selectedItems),ce),I(()=>[this.baseFilterPredicate,this._baseListEl],()=>Q(this._baseListEl,this.baseFilterPredicate)),I(()=>[this.referenceFilterPredicate,this._referenceListEl],()=>Q(this._referenceListEl,this.referenceFilterPredicate))])}loadDependencies(){return ue({action:()=>v(()=>import("./index-BPm91e5Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),block:()=>v(()=>import("./index-C6d66FVb.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,26,21,20,18,17,16,27,28,29,22,30,23,31,32,0,19,24,33,34,35,36,37,38,39,40,41,42,43]),import.meta.url),label:()=>v(()=>import("./index--OBudxYA.js"),__vite__mapDeps([44,2,3,4,5,6,7,8,9,10,11,12,13,45,17,14]),import.meta.url),input:()=>v(()=>import("./index-pyEU_klK.js"),__vite__mapDeps([46,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,47,48,49,20,19,21,38,50,22,30,45,23,51,24,52,15,53]),import.meta.url),button:()=>v(()=>import("./index-jjUP6Yam.js"),__vite__mapDeps([54,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,21,20,38,50,22,45,23,24]),import.meta.url),flow:()=>v(()=>import("./index-CMdCteX_.js"),__vite__mapDeps([55,2,3,4,5,6,7,8,9,10,11,12,13,21,20,18,23,17,14]),import.meta.url),"flow-item":()=>v(()=>import("./index-Z5_W1-0F.js"),__vite__mapDeps([56,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,0,19,20,21,22,23,24,37,28,29,31,38,39,40,41,30,42,43,26,57]),import.meta.url),list:()=>v(()=>import("./index-BCDLx0rN.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,26,21,20,18,17,19,16,47,48,46,49,38,50,22,30,45,23,51,24,52,53,59,60,29,61]),import.meta.url),notice:()=>v(()=>import("./index-CV25o1as.js"),__vite__mapDeps([62,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,21,20,23,63,31,24,15]),import.meta.url),tooltip:()=>v(()=>import("./index-Bts9-rBr.js"),__vite__mapDeps([64,2,3,4,5,6,7,8,9,10,11,12,13,21,20,28,17,14,29,31,39,19]),import.meta.url)})}destroy(){this._tooltipReferenceMap.clear(),this._destroyOpenedLayerLists()}get _visibleBaseItems(){var e;return(e=this.baseItems)==null?void 0:e.filter(t=>!t.hidden&&(this.visibleElements.errors||!t.error))}get _visibleReferenceItems(){var e;return(e=this.referenceItems)==null?void 0:e.filter(t=>!t.hidden&&(this.visibleElements.errors||!t.error))}get _openedPanelItems(){return this._visibleReferenceItems.concat(this._visibleBaseItems).flatten(e=>e.children).filter(({hidden:e,panel:t})=>!e&&(t==null?void 0:t.open)&&!t.disabled&&t.flowEnabled)}get _totalBaseItems(){return this.viewModel.baseItems.flatten(e=>e.children.filter(t=>{var i;return((i=t.layer)==null?void 0:i.type)!=="catalog-dynamic-group"})).length}get _totalReferenceItems(){return this.viewModel.referenceItems.flatten(e=>e.children.filter(t=>{var i;return((i=t.layer)==null?void 0:i.type)!=="catalog-dynamic-group"})).length}get _baseFilterEnabled(){return this._totalBaseItems>=this.minFilterItems&&this.visibleElements.filter}get _referenceFilterEnabled(){return this._totalReferenceItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map((t,i)=>this._renderLayerFlowItem(t,i===e.length-1))}get basemapTitle(){return this.viewModel.basemapTitle}set basemapTitle(e){this.viewModel.basemapTitle=e}get baseListItemCreatedFunction(){return this.viewModel.baseListItemCreatedFunction}set baseListItemCreatedFunction(e){this.viewModel.baseListItemCreatedFunction=e}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get referenceListItemCreatedFunction(){return this.viewModel.referenceListItemCreatedFunction}set referenceListItemCreatedFunction(e){this.viewModel.referenceListItemCreatedFunction=e}get baseItems(){return this.viewModel.baseItems}get referenceItems(){return this.viewModel.referenceItems}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const{state:e}=this.viewModel,t={[$.hidden]:e==="loading",[$.disabled]:e==="disabled"};return p("div",{class:this.classes(T.base,$.widget,$.panel,t)},this._renderItems())}async _createCatalogLayerList(e){const{default:t}=await v(()=>import("./CatalogLayerList-DIBSl3Wj.js"),__vite__mapDeps([65,7,8,3,11,10,12,66,67,2,4,5,6,9,13,68,69,70,71,72,73,74,75,76,77,78]),import.meta.url),{headingLevel:i,catalogOptions:s,view:l,filterPlaceholder:n,minFilterItems:d,selectionMode:c,visibilityAppearance:h,_onCatalogOpen:y,_onTablesOpen:L,layerTablesEnabled:u}=this;return new t({headingLevel:i,view:l,filterPlaceholder:n,minFilterItems:d,selectionMode:c,visibilityAppearance:h,...s,catalogLayer:e,layerTablesEnabled:u,onCatalogOpen:y,onTablesOpen:L})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:t}=await v(()=>import("./TableList-EPNRr6_L.js"),__vite__mapDeps([79,7,8,3,11,10,12,66,2,4,5,6,9,13,72,73,74,75,70,76,77,78,69,71]),import.meta.url),{headingLevel:i,selectionMode:s,dragEnabled:l}=this;return new t({headingLevel:i,selectionMode:s,dragEnabled:l,...this._getTableListParams(e)})}async _createFlowList(e,t){const{_layerListMap:i}=this,s=i.get(e);if(s)return s;const l=e.type==="catalog"?await this._createCatalogLayerList(e):await this._createTableList(e);return t.aborted||i.set(e,l),l}async _handleOpenedLayersChange(){var c;const{_layerListMap:e,openedLayers:t,openedLayerLists:i}=this;(c=this._openedLayersController)==null||c.abort();const s=new AbortController,{signal:l}=s;this._openedLayersController=s,e.forEach((h,y)=>{t.includes(y)||(h.destroy(),e.delete(y))});const n=await Promise.all(t.map(h=>this._createFlowList(h,l)));if(l.aborted)return;i.removeAll(),i.addMany(n);const d=i.at(-1);d?"catalogLayer"in d?(this._set("catalogLayerList",d),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",d)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){var t,i;return e?p("calcite-tooltip",{key:`tooltip-${(t=e.layer)==null?void 0:t.uid}`,overlayPositioning:"fixed",referenceElement:this._tooltipReferenceMap.get((i=e.layer)==null?void 0:i.uid)},this.messages.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){var t;return e.incompatible?this._renderItemTooltip(e):(t=e.children)==null?void 0:t.filter(i=>!i.hidden).toArray().map(i=>this._renderItemTooltipNodes(i))}_renderItemTooltips(){var e;return(e=this._visibleReferenceItems.concat(this._visibleBaseItems))==null?void 0:e.toArray().map(t=>this._renderItemTooltipNodes(t))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,D(e))}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:t}=this;return e.toArray().map(({title:i,panel:s},l)=>{const n=()=>this._handlePanelFlowItemBack(s);return p("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:i,heading:s.title,headingLevel:this.headingLevel,key:`flow-panel-${s.uid}`,selected:!t.length&&l===e.length-1,onCalciteFlowItemBack:d=>{d.preventDefault(),n()}},s.render(),p("calcite-button",{appearance:"transparent",onclick:n,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusEditingFlowItemNode(e){this._focusEditingFlowItem&&(this._focusEditingFlowItem=!1,D(e))}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,D(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,D(e))}_renderItem(e,t,i,s){var l;return p(ve,{activeItem:this._activeItem,canMove:this._canMove,css:T,displayMode:W,dragEnabled:!t&&this.dragEnabled,item:e,key:`layerListItem-${(l=e.layer)==null?void 0:l.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:s,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:e,fromEl:t,dragEl:i,newIndex:s}){const l=w(i),n=w(e),d=w(t),c=X(t),h=X(e);c&&h&&this.viewModel.moveListItem({targetItem:l,fromParentItem:d,toParentItem:n,newIndex:s,from:c,to:h})}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:s}=e;t.insertBefore(i,t.children[s])}_sortLayers(e,t){var i,s,l,n,d,c;if(e)if(e===this._referenceListEl||e===this._baseListEl){const h=e===this._referenceListEl?"reference":"base",y=h==="base"?(l=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap)==null?void 0:l.baseLayers:h==="reference"?(c=(d=(n=this.view)==null?void 0:n.map)==null?void 0:d.basemap)==null?void 0:c.referenceLayers:null;fe(y,t)}else{const h=w(e);if(!h)return;Le(h,t)}}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if(t==="none")return;const s=e.target.selectedItems.map(l=>w(l)).filter(Boolean);i.removeAll(),i.addMany(s)}_renderEditingInput(){const{messages:e}=this,{basemapTitle:t}=this.viewModel;return p("div",{class:T.editing},p("calcite-label",null,e.basemapTitle,p("calcite-input",{afterCreate:i=>this._editTitleInput=i,label:e.basemapTitle,name:"basemaptitle",pattern:Ce,placeholder:e.basemapTitle,required:!0,title:e.basemapTitle,type:"text",value:t??void 0})))}_renderCancelButton(){const{messagesCommon:{cancel:e}}=this;return p("calcite-button",{appearance:"outline",bind:this,label:e,onclick:this._toggleEditingTitle,slot:"footer",title:e,width:"full"},e)}_renderSubmitButton(){const{messagesCommon:e}=this;return p("calcite-button",{label:e.form.submit,slot:"footer",title:e.form.submit,type:"submit",width:"full"},e.form.ok)}_renderEditingForm(){return this.editingTitle?p("form",{bind:this,class:T.editingForm,onsubmit:this._formSubmit},p("calcite-flow-item",{afterCreate:this._focusEditingFlowItemNode,afterUpdate:this._focusEditingFlowItemNode,bind:this,heading:this.visibleElements.heading?this.messages.basemapTitle:void 0,headingLevel:this.headingLevel,selected:this.openedLayers.length===0&&this._openedPanelItems.length===0,onCalciteFlowItemBack:e=>{e.preventDefault(),this._toggleEditingTitle()}},this._renderEditingInput(),this._renderCancelButton(),this._renderSubmitButton())):null}_renderEditTitleButton(){const{editingTitle:e,visibleElements:t,messagesCommon:i}=this,s=i.edit;return t.editTitleButton&&!e?p("calcite-action",{bind:this,icon:"pencil",onclick:this._toggleEditingTitle,slot:"header-actions-end",text:s,title:s}):null}_renderNoLayersInfoMessage(e){return p("div",{slot:"message"},e)}_renderNoLayersInfo(e,t){return p("div",{class:T.itemMessage},p("calcite-notice",{icon:"information",key:t,kind:"info",open:!0,width:"full"},this._renderNoLayersInfoMessage(e)))}_renderItems(){const{collapsed:e,visible:t,visibleElements:{closeButton:i,collapseButton:s,heading:l,flow:n},messages:d,viewModel:c}=this,h=[p("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:i,closed:!t,collapsed:e,collapsible:s,heading:l?c.basemapTitle??d.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!this.editingTitle&&this.openedLayers.length===0&&this._openedPanelItems.length===0,onCalciteFlowItemClose:()=>this.visible=!1},this._renderEditTitleButton(),this._renderReferenceSection(),this._renderBaseSection()),this._renderEditingForm(),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return t?[n?p("calcite-flow",{key:"root-flow"},h):h,this._renderItemTooltips()]:null}_renderLayerFlowItem(e,t){var n;const{messages:i,openedLayers:s}=this,l=e.title||this.messages.untitledLayer;return p("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:l,heading:i[e.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:t,onCalciteFlowItemBack:d=>{d.preventDefault(),s.pop();const c=s.at(-1);c?this._focusLayerFlowItem=c.uid:this._focusRootFlowItem=!0}},(n=this._layerListMap.get(e))==null?void 0:n.render())}_renderList(e,t,i){const{messages:s,dragEnabled:l,selectionMode:n,filterPlaceholder:d,baseFilterText:c,referenceFilterText:h,_baseFilterEnabled:y,_referenceFilterEnabled:L,_rootGroupUid:u}=this,C=t==="reference"?s.noReferenceLayers:s.noBaseLayers,F=t==="reference"?L:y;return p("calcite-block",{class:T.section,collapsible:!0,heading:t==="reference"?s.referenceHeading:s.baseHeading,headingLevel:Ie(this.headingLevel),key:`block-${t}`,open:!0},(e==null?void 0:e.length)===0?this._renderNoLayersInfo(C,t):null,p("calcite-list",{afterCreate:m=>{t==="reference"?this._referenceListEl=m:this._baseListEl=m,m.addEventListener("focusin",this._setActiveItem),m.addEventListener("focusout",this._clearActiveItem)},afterRemoved:m=>{t==="reference"?this._referenceListEl=null:this._baseListEl=null,m.removeEventListener("focusin",this._setActiveItem),m.removeEventListener("focusout",this._clearActiveItem)},canPull:m=>this._canMove(m,"pull"),canPut:m=>this._canMove(m,"put"),displayMode:W,filterProps:we,[S]:t,"data-layer-type":u,dragEnabled:l,filterEnabled:F,filterPlaceholder:d,filterText:F?t==="reference"?h:c:"",group:u,key:`list-${t}`,label:s.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:n,onCalciteListChange:m=>this._handleCalciteListChange(m),onCalciteListDragEnd:m=>this._handleCalciteListDragEnd(m.detail),onCalciteListFilter:m=>{var M;return this[t==="reference"?"referenceFilterText":"baseFilterText"]=((M=m.currentTarget)==null?void 0:M.filterText)??""},onCalciteListOrderChange:m=>this._onCalciteListOrderChange(m.detail)},e==null?void 0:e.toArray().map(m=>this._renderItem(m,i)),e!=null&&e.length&&F?p("div",{class:T.filterNoResults,slot:"filter-no-results"},p("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoLayersInfoMessage(C))):null))}_renderBaseSection(){const{_visibleBaseItems:e}=this;return this.visibleElements.baseLayers?this._renderList(e,"base",(e==null?void 0:e.length)===1):null}_renderReferenceSection(){return this.visibleElements.referenceLayers?this._renderList(this._visibleReferenceItems,"reference",!1):null}_toggleEditingTitle(){const{editingTitle:e}=this,t=!e;this.editingTitle=t,t?this._focusEditingFlowItem=!0:this._focusRootFlowItem=!0}_formSubmit(e){var i;e.preventDefault();const t=(i=this._editTitleInput)==null?void 0:i.value;t!=null&&t.trim()&&(this.basemapTitle=t),this._toggleEditingTitle()}};function X(e){var t;return(t=e==null?void 0:e.closest(`[${S}]`))==null?void 0:t.getAttribute(S)}r([a()],o.prototype,"_baseListEl",void 0),r([a()],o.prototype,"_referenceListEl",void 0),r([a()],o.prototype,"_activeItem",void 0),r([a()],o.prototype,"_tooltipReferenceMap",void 0),r([a()],o.prototype,"_focusRootFlowItem",void 0),r([a()],o.prototype,"_focusPanelFlowItem",void 0),r([a()],o.prototype,"_focusLayerFlowItem",void 0),r([a()],o.prototype,"_focusEditingFlowItem",void 0),r([a()],o.prototype,"_layerListMap",void 0),r([a()],o.prototype,"_visibleBaseItems",null),r([a()],o.prototype,"_visibleReferenceItems",null),r([a()],o.prototype,"_openedPanelItems",null),r([a()],o.prototype,"_totalBaseItems",null),r([a()],o.prototype,"_totalReferenceItems",null),r([a()],o.prototype,"_baseFilterEnabled",null),r([a()],o.prototype,"_referenceFilterEnabled",null),r([a()],o.prototype,"_renderedOpenLayerFlowItems",null),r([a()],o.prototype,"basemapTitle",null),r([a({readOnly:!0})],o.prototype,"catalogLayerList",void 0),r([a()],o.prototype,"catalogOptions",void 0),r([a()],o.prototype,"collapsed",void 0),r([a()],o.prototype,"dragEnabled",void 0),r([a()],o.prototype,"editingTitle",void 0),r([a()],o.prototype,"filterPlaceholder",void 0),r([a()],o.prototype,"baseFilterPredicate",void 0),r([a()],o.prototype,"baseFilterText",void 0),r([a()],o.prototype,"referenceFilterPredicate",void 0),r([a()],o.prototype,"referenceFilterText",void 0),r([a()],o.prototype,"listItemCanGiveFunction",void 0),r([a()],o.prototype,"listItemCanReceiveFunction",void 0),r([a()],o.prototype,"baseListItemCreatedFunction",null),r([a()],o.prototype,"headingLevel",void 0),r([a()],o.prototype,"icon",null),r([a()],o.prototype,"knowledgeGraphOptions",void 0),r([a()],o.prototype,"label",null),r([a()],o.prototype,"layerTablesEnabled",void 0),r([a()],o.prototype,"mapImageOptions",void 0),r([a(),j("esri/widgets/BasemapLayerList/t9n/BasemapLayerList")],o.prototype,"messages",void 0),r([a(),j("esri/t9n/common")],o.prototype,"messagesCommon",void 0),r([a()],o.prototype,"minFilterItems",void 0),r([a({readOnly:!0})],o.prototype,"openedLayers",void 0),r([a({readOnly:!0})],o.prototype,"openedLayerLists",void 0),r([a()],o.prototype,"referenceListItemCreatedFunction",null),r([a({readOnly:!0})],o.prototype,"tableList",void 0),r([a({readOnly:!0})],o.prototype,"baseItems",null),r([a({readOnly:!0})],o.prototype,"referenceItems",null),r([a({type:ee})],o.prototype,"selectedItems",void 0),r([a()],o.prototype,"selectionMode",void 0),r([a()],o.prototype,"tileOptions",void 0),r([a()],o.prototype,"view",null),r([Ee("trigger-action"),a({type:Y})],o.prototype,"viewModel",void 0),r([a()],o.prototype,"visibilityAppearance",void 0),r([a({type:Z,nonNullable:!0})],o.prototype,"visibleElements",void 0),o=r([U("esri.widgets.BasemapLayerList")],o);const Me=o;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const Be=ae`@layer{arcgis-basemap-layer-list{display:block}}`,Pe=Fe(Me),O=class O extends te{constructor(){super(...arguments),this.widget=Pe(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.baseFilterPredicate=this.widget.baseFilterPredicate,this.baseFilterText=this.widget.baseFilterText,this.baseListItemCreatedFunction=this.widget.baseListItemCreatedFunction,this.basemapTitle=this.widget.basemapTitle,this.catalogOptions=this.widget.catalogOptions,this.collapsed=this.widget.collapsed,this.dragEnabled=this.widget.dragEnabled,this.editingTitle=this.widget.editingTitle,this.filterPlaceholder=this.widget.filterPlaceholder,this.headingLevel=this.widget.headingLevel,this.hideBaseLayers=this.widget.visibleElements.baseLayers,this.hideFlow=this.widget.visibleElements.flow,this.hideHeading=this.widget.visibleElements.heading,this.hideReferenceLayers=this.widget.visibleElements.referenceLayers,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.icon=this.widget.icon,this.label=this.widget.label,this.minFilterItems=this.widget.minFilterItems,this.position="bottom-left",this.referenceFilterPredicate=this.widget.referenceFilterPredicate,this.referenceFilterText=this.widget.referenceFilterText,this.referenceListItemCreatedFunction=this.widget.referenceListItemCreatedFunction,this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showEditTitleButton=this.widget.visibleElements.editTitleButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.state=this.viewModel.state,this.visibilityAppearance=this.widget.visibilityAppearance,this.arcgisPropertyChange=ie()("state"),this.arcgisReady=se(),this.arcgisTriggerAction=oe(()=>this.widget,"trigger-action")}get baseItems(){return this.widget.baseItems}get catalogLayerList(){return this.widget.catalogLayerList}get referenceItems(){return this.widget.referenceItems}async destroy(){await this.manager.destroy()}};O.properties={autoDestroyDisabled:5,baseFilterPredicate:0,baseFilterText:1,baseItems:32,baseListItemCreatedFunction:0,basemapTitle:1,catalogLayerList:32,catalogOptions:0,collapsed:7,dragEnabled:5,editingTitle:5,filterPlaceholder:1,headingLevel:9,hideBaseLayers:5,hideFlow:5,hideHeading:5,hideReferenceLayers:5,hideStatusIndicators:5,icon:1,label:1,minFilterItems:9,position:1,referenceElement:1,referenceFilterPredicate:0,referenceFilterText:1,referenceItems:32,referenceListItemCreatedFunction:0,selectedItems:0,selectionMode:1,showCloseButton:5,showCollapseButton:5,showEditTitleButton:5,showErrors:5,showFilter:5,showTemporaryLayerIndicators:5,state:3,visibilityAppearance:1},O.shadowRootOptions=re,O.styles=Be;let H=O;le("arcgis-basemap-layer-list",H);export{H as ArcgisBasemapLayerList};
