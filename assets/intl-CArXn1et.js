import{l as U,d as m,m as B,u as E}from"./Promise-CZrWwByK.js";import{c as h}from"./subclass-BR3PhgZG.js";import{U as L,n as M}from"./assets-BNizZMOZ.js";const N={ar:"ar-u-nu-latn"};let w=new WeakMap,y={};function $(t){const n=t||y;if(!w.has(n)){const e=m(),r=N[m()]||e;w.set(n,new Intl.NumberFormat(r,t))}return w.get(n)}function W(t={}){const n={};return t.digitSeparator!=null&&(n.useGrouping=t.digitSeparator),t.places!=null&&(n.minimumFractionDigits=n.maximumFractionDigits=t.places),n}function C(t,n){return Object.is(t,-0)&&(t=0),$(n).format(t)}function G(t,n=m()){var r,a;if(!t)return null;let e=b.get(n);if(!e){const i=$().formatToParts(12345.6),u=[...$({useGrouping:!1}).format(9876543210)].reverse(),c=new Map(u.map((o,f)=>[o,f])),s=new RegExp(`[${(r=i.find(o=>o.type==="group"))==null?void 0:r.value}]`,"g"),p=new RegExp(`[${(a=i.find(o=>o.type==="decimal"))==null?void 0:a.value}]`),l=new RegExp(`[${u.join("")}]`,"g"),d=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,g=/[-\u2212\u2013\u2014\u2015]/g;e=o=>{if((o=o.trim().replaceAll(s,"").replace(p,".").replace(l,A=>String(c.get(A))).replaceAll(d,"").replaceAll(g,"-"))==="")return null;const f=Number(o);return isNaN(f)?null:f},b.set(n,e)}return e(t)}U(()=>{w=new WeakMap,y={}});const b=new Map;async function j(t,n,e,r){const a=n.exec(e);if(!a)throw new h("esri-intl:invalid-bundle",`Bundle id "${e}" is not compatible with the pattern "${n}"`);const i=a[1]?`${a[1]}/`:"",u=a[2],c=B(r),s=`${i}${u}.json`,p=c?`${i}${u}_${c}.json`:s;let l;try{l=await R(t(p))}catch(d){if(p===s)throw new h("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:d});try{l=await R(t(s))}catch(g){throw new h("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:g})}}return l}async function R(t){if(x.fetchBundleAsset!=null)return x.fetchBundleAsset(t);const n=await L(t,{responseType:"text"});return JSON.parse(n.data)}class k{constructor({base:n="",pattern:e,location:r=new URL(window.location.href)}){let a;a=typeof r=="string"?i=>new URL(i,new URL(r,window.location.href)).href:r instanceof URL?i=>new URL(i,r).href:r,this.pattern=typeof e=="string"?new RegExp(`^${e}`):e,this.getAssetUrl=a,n=n?n.endsWith("/")?n:n+"/":"",this.matcher=new RegExp(`^${n}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(n,e){return j(this.getAssetUrl,this.matcher,n,e)}}function v(t){return new k(t)}const x={};E(v({pattern:"esri/",location:M}));export{W as i,C as l,G as o};
