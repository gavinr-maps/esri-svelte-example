const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Legend-BpzP4Y12.js","./Accessor-BHnuXKD2.js","./reactiveUtils-BR0C1Kq4.js","./Evented-DCWccWGU.js","./SimpleObservable-7oieNGD8.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./jsxFactory-CLjKarlq.js","./intl-Do3GEEJ7.js","./Promise-CmQqe-ke.js","./uuid-Cl5lrJ4c.js","./featureReductionUtils-Caulfaw_.js","./Color-gncXBiLc.js","./colorUtils-Rxh2V3ai.js","./mathUtils-DV9iOXpW.js","./screenUtils-_ZIvrt5o.js","./opacityUtils-CSd4XoR2.js","./Point-XGrwlf63.js","./writer-B2bQV2uU.js","./EffectView-BDbE94Th.js","./jsonUtils-TjZmCq6l.js","./utils-DYurMneM.js","./mat4f32-DcsiF_Rp.js","./mat4-Fi6iAz29.js","./vec3f64-BLpZdpfb.js","./common-DQOJ18NT.js","./displayFilterUtils-DV_nOx_h.js","./ExportImageParameters-D29STznD.js","./scaleUtils-CfLu-sg1.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils--wN8JjVc.js","./layerUtils-dJgsXxkC.js","./pixelRangeUtils-ouDveaCT.js","./jsonUtils-DD1NMzWj.js","./typeUtils-CfF4cYo5.js","./ClassBreaksRenderer-BBSNkSFx.js","./enumeration-Cr5WIZs4.js","./commonProperties-bGHL1a5M.js","./colorRamps-Dkx8zIVn.js","./SizeVariable-IzD1bP2e.js","./Clonable-DvJsj5LF.js","./visualVariableUtils-Bp9QCb8E.js","./Graphic-CFXUQZlS.js","./ActionToggle-__-l4AdQ.js","./Identifiable-BrT7zvUW.js","./jsonUtils-Cu7OBRmN.js","./Extent-CBBGeHb-.js","./Polyline-BmuD2-ZN.js","./typeUtils-BSg8Y507.js","./TextSymbol-BQ_NW9Xo.js","./collectionUtils-CbaToa73.js","./Portal-CTRRujjZ.js","./aaBoundingBox-CeBivBRq.js","./lengthUtils-DjJgJFRg.js","./ColorStop-CDpeFWOz.js","./jsonUtils-Dzgxk9pw.js","./defaults-Dwxdhopq.js","./defaultsJSON-GKolV7NZ.js","./RendererLegendOptions-mgfHoilI.js","./LRUCache-DS2O1kTf.js","./MemCache-CDoaVBHf.js","./Version-9k2AOv05.js","./FieldsIndex-DFdVonga.js","./timeZoneUtils-COos5xIr.js","./utils-B91u8350.js","./defaultCIMValues-DII_GG3u.js","./enums-BJSSbDkD.js","./HeatmapColorStop-c4wClnpW.js","./heatmapUtils-DA7NmY3d.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./SimpleRenderer-gSw1WaJS.js","./UniqueValueRenderer-Cri3tgP5.js","./diffUtils-CMkuJvD2.js","./styleUtils-BB-zx7mT.js","./rendererConversion-BVZEj5DN.js","./cimSymbolUtils-azhJhO4Y.js","./symbolUtils-C5ImIHMe.js","./utils-9nq77ifz.js","./colorUtils-BAowQmkN.js","./mat2df32-orApM5a3.js","./mat2d-D9DBP-jx.js","./webStyleSymbolUtils-DEYm8EyF.js","./devEnvironmentUtils-CnNDiFMM.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./utils-p7rkm04s.js","./timeUtils-D2X862bk.js","./utils-DLmnG8WZ.js","./themeUtils-C3zvZbsE.js","./utils-BjWhcOkE.js","./substitute-D1XJWgT5.js","./Heading-DYbI16WN.js","./globalCss-CZa70j6i.js"])))=>i.map(i=>d[i]);
import{N as v,r as n,m as l,a as w,g as O,ax as y,G as M}from"./Accessor-BHnuXKD2.js";import{d,P as h,V as b}from"./reactiveUtils-BR0C1Kq4.js";import{n as I}from"./Identifiable-BrT7zvUW.js";import{a as P}from"./cast-BA_-jlhc.js";import{p as A,c as E,a as k}from"./ActionToggle-__-l4AdQ.js";import{_ as V}from"./index-tefRSezt.js";import{O as x,n as p}from"./jsxFactory-CLjKarlq.js";import{x as D,b as T,a as F,u as f,p as H,d as N}from"./layerListUtils-BIu86t6C.js";import{e as C}from"./widget-AxfSz_k8.js";let o=class extends I.IdentifiableMixin(x){constructor(t,i){super(t,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([d(()=>this._canCreateLegend,()=>this._createLegend(),h),d(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),h)])}destroy(){this._legend=v(this._legend)}get _canCreateLegend(){const{content:t,listItem:i}=this;if(!i)return!1;const r="legend";return t===r||t!=null&&!!Array.isArray(t)&&t.includes(r)}get _legendOptions(){const{listItem:t,_legendLayerInfo:i}=this,r=t==null?void 0:t.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var m;const t=(m=this.listItem)==null?void 0:m.layer;if(!t||t.type==="subtype-sublayer")return null;const i=D(t)?t:null,r=t==null?void 0:t.parent,a=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,u="";return a&&r?{layer:r,title:u,sublayerIds:[a.mapLayerId]}:{layer:t,title:u}}get disabled(){var a;const{listItem:t,_legend:i,content:r}=this;return!t||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,i=this._getFirstWidget();return this._get("icon")??(!t&&i?i.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return p("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{_legend:i,disabled:r,open:a}=this;return t&&!r&&a?t==="legend"&&i?p("div",{key:"legend-widget"},i.render()):typeof t=="string"?p("div",{innerHTML:t,key:t}):C(t)?p("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?p("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:i}=this;return i?Array.isArray(t)?t.map(r=>this._renderContent(r)):this._renderContent(t):null}async _createLegend(){if(v(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:t}=await V(()=>import("./Legend-BpzP4Y12.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94]),import.meta.url),i=new t(this._legendOptions);this._legend=i}_attachToNode(t){t.appendChild(this)}_updateLegend(){const t=this._legend;t&&t.set(this._legendOptions)}_getWidget(t){return t==="legend"?this._legend:C(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(t)}};n([l()],o.prototype,"_legend",void 0),n([l()],o.prototype,"_canCreateLegend",null),n([l()],o.prototype,"_legendOptions",null),n([l()],o.prototype,"_legendLayerInfo",null),n([l()],o.prototype,"className",void 0),n([l()],o.prototype,"content",void 0),n([l()],o.prototype,"disabled",null),n([l()],o.prototype,"flowEnabled",void 0),n([l()],o.prototype,"icon",null),n([l()],o.prototype,"image",void 0),n([l()],o.prototype,"listItem",void 0),n([l()],o.prototype,"open",void 0),n([l()],o.prototype,"title",null),n([l()],o.prototype,"visible",void 0),o=n([w("esri.widgets.LayerList.ListItemPanel")],o);const S=o;var c;const W=b.ofType({key:"type",defaultKeyValue:"button",base:A,typeMap:{button:E,toggle:k}}),L=b.ofType(W),_="layer",g="child-list-mode",z="hide";let s=c=class extends I.IdentifiableMixin(O){constructor(e){super(e),this.actionsSections=new L,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(b.ofType(c)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([d(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),h),d(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),h),d(()=>this.view,e=>this._updateChildrenView(e),h),d(()=>this.panel,e=>this._setListItemOnPanel(e),h)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(r=>r.layer===i)??null}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new S(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=y(this,"layer.layer");return(!e||e&&y(this,"layer.layer.loaded"))&&y(this,"layer.title")||y(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return!!((e=this.layer)!=null&&e.visible)}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!T(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return F(this.layer)}clone(){return new c({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){var t;(t=this.children)==null||t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,r=e.filter(a=>!i.some(u=>u.layer===a));i.addMany(this._createChildItems(r,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(r=>!!r.layer&&!e.includes(r.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(g),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(g),this.listModeDisabled||this.addHandles(e.toArray().map(t=>d(()=>t.listMode,()=>this._compileChildren(e))),g)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(i=>f(i)!==z);e!=null&&e.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),_)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(i=>t||H(i)?new c({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(M)}_watchLayerProperties(e){if(this.removeHandles(_),this.removeHandles(g),!e)return;if((!this.listModeDisabled&&f(e))==="hide-children")return void this.children.destroyAll();const t=N(e);t&&this.addHandles(d(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},h),_)}};n([l({type:L})],s.prototype,"actionsSections",void 0),n([l()],s.prototype,"actionsOpen",void 0),n([l()],s.prototype,"checkPublishStatusEnabled",void 0),n([l({type:b.ofType(s)})],s.prototype,"children",void 0),n([l()],s.prototype,"childrenSortable",void 0),n([l({readOnly:!0})],s.prototype,"connectionStatus",null),n([l({readOnly:!0})],s.prototype,"error",null),n([l()],s.prototype,"hidden",void 0),n([l({readOnly:!0})],s.prototype,"incompatible",null),n([l()],s.prototype,"layer",void 0),n([l({readOnly:!0})],s.prototype,"layerView",null),n([l()],s.prototype,"listItemCreatedFunction",void 0),n([l({nonNullable:!0})],s.prototype,"listModeDisabled",void 0),n([l()],s.prototype,"open",void 0),n([l({type:S})],s.prototype,"panel",void 0),n([P("panel")],s.prototype,"castPanel",null),n([l()],s.prototype,"parent",void 0),n([l({value:!0})],s.prototype,"sortable",null),n([l()],s.prototype,"title",null),n([l({readOnly:!0})],s.prototype,"publishing",null),n([l({readOnly:!0})],s.prototype,"updating",null),n([l()],s.prototype,"view",void 0),n([l()],s.prototype,"visible",null),n([l({readOnly:!0})],s.prototype,"visibleAtCurrentScale",null),n([l({readOnly:!0})],s.prototype,"visibleAtCurrentTimeExtent",null),n([l({readOnly:!0})],s.prototype,"visibilityMode",null),s=c=n([w("esri.widgets.LayerList.ListItem")],s);const X=s;export{X as O};
