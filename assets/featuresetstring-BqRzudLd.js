import{N as y}from"./arcadeUtils-BE8Aletj.js";import{i as a,U as s,F as T,d as p,K as c,G as f,a as d,r as m,N as b,B as v,T as A,Z as g,_ as x,a0 as F,Y as V,a1 as j,a2 as D}from"./languageUtils-JGnUBrxZ.js";import{E as w}from"./shared-OyXfj1UM.js";import"./geometry-D964gYQX.js";import"./subclass-BZA_h8Db.js";import"./Extent-Bf3YTe7m.js";import"./tslib.es6-B3Jf3DVX.js";import"./Point-Cg0-ChZE.js";import"./Accessor-BLX9ikPh.js";import"./cast-Bjksrh93.js";import"./writer-DNAwXnhG.js";import"./assets-C43MgM-v.js";import"./index-Bh2oEzTI.js";import"./jsonMap-0cxwUWs2.js";import"./Polyline-D9YkgmM_.js";import"./mathUtils-C4_ghTv4.js";import"./TimeOnly-DOn_Hy89.js";import"./UnknownTimeZone-BkowvBs8.js";import"./date-DlqISzcw.js";import"./locale-C9TlLpzi.js";import"./deepClone-CWS5qiGp.js";import"./ImmutableArray-BPVd6ESQ.js";import"./jsonUtils-CEfjT-BK.js";import"./featureConversionUtils-D14h8iad.js";import"./aaBoundingBox-BE7cC1jD.js";import"./OptimizedFeature-6cJ-QFG5.js";import"./OptimizedGeometry-BF8iz5FO.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./FieldsIndex-DpwHKAMX.js";import"./fieldUtils-tmQlKvWo.js";import"./intl-CChhNOV8.js";import"./messages-OmQvZhAg.js";import"./number-CUaGJe2K.js";import"./hash-CcEbRgUF.js";import"./uuid-fwrPAdZb.js";import"./Portal-C10FKnaA.js";import"./Loadable-BabW5Xcc.js";import"./Promise-B2Hu02L7.js";import"./Query-5Xpquc1r.js";import"./enumeration-Ba5njXdz.js";import"./DataLayerSource-BKkswDvG.js";import"./Field-ybkHhtnK.js";import"./fieldType-BuzM0UHS.js";import"./FullTextSearch-Csd1Hktu.js";import"./Clonable-D3rtuBWg.js";import"./TimeExtent-DocT5yPf.js";import"./timeUtils-8fb_2oAt.js";function l(e,r){return e&&e.domain?e.domain.type==="coded-value"||e.domain.type==="codedValue"?y.convertObjectToArcadeDictionary({type:"codedValue",name:e.domain.name,dataType:w[e.field.type],codedValues:e.domain.codedValues.map(n=>({name:n.name,code:n.code}))},v(r)):y.convertObjectToArcadeDictionary({type:"range",name:e.domain.name,dataType:w[e.field.type],min:e.domain.minValue,max:e.domain.maxValue},v(r)):null}function At(e){e.mode==="async"&&(e.functions.domain=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,2,3,r,n),s(t[0]))return l(T(t[0],p(t[1]),t[2]===void 0?void 0:t[2]),r);if(c(t[0]))return await t[0]._ensureLoaded(),l(f(p(t[1]),t[0],null,t[2]===void 0?void 0:t[2]),r);throw new d(r,m.InvalidParameter,n)})},e.functions.subtypes=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,1,1,r,n),s(t[0])){const i=b(t[0]);return i?y.convertObjectToArcadeDictionary(i,v(r)):null}if(c(t[0])){await t[0]._ensureLoaded();const i=t[0].subtypeMetaData();return i?y.convertObjectToArcadeDictionary(i,v(r)):null}throw new d(r,m.InvalidParameter,n)})},e.functions.domainname=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,2,4,r,n),s(t[0]))return A(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const i=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return g(i,t[2])}throw new d(r,m.InvalidParameter,n)})},e.signatures.push({name:"domainname",min:2,max:4}),e.functions.domaincode=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,2,4,r,n),s(t[0]))return x(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const i=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return F(i,t[2])}throw new d(r,m.InvalidParameter,n)})},e.signatures.push({name:"domaincode",min:2,max:4}),e.functions.text=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,1,2,r,n),c(t[0])){const i=V(t[1],"");if(i==="")return t[0].castToText();if(i.toLowerCase()==="schema")return t[0].convertToText("schema",o.abortSignal);if(i.toLowerCase()==="featureset")return t[0].convertToText("featureset",o.abortSignal);throw new d(r,m.InvalidParameter,n)}return j(t[0],t[1])})},e.functions.gdbversion=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,1,1,r,n),s(t[0]))return t[0].gdbVersion();if(c(t[0]))return(await t[0].load()).gdbVersion;throw new d(r,m.InvalidParameter,n)})},e.functions.schema=function(r,n){return e.standardFunctionAsync(r,n,async(o,u,t)=>{if(a(t,1,1,r,n),c(t[0]))return await t[0].load(),y.convertObjectToArcadeDictionary(t[0].schema(),v(r));if(s(t[0])){const i=D(t[0]);return i?y.convertObjectToArcadeDictionary(i,v(r)):null}throw new d(r,m.InvalidParameter,n)})})}export{At as registerFunctions};
