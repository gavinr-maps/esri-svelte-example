const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-button-D_Agetwz.js","./button-9P4PM9SO.js","./jsxFactory-CJa39Fro.js","./tslib.es6-B3Jf3DVX.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./subclass-BZA_h8Db.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./Accessor-BLX9ikPh.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./Evented-BHRw9x22.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./form-BZPQ5PUM.js","./dom-D_AJDzAj.js","./interactive-y84HQRWL.js","./label-DEe8AW1C.js","./component-6CIDVndn.js","./loadable-DM18hPdE.js","./locale-A4FuYD8q.js","./key-D63ExP77.js","./observers-D2xgmA06.js","./t9n-D0ry3MEw.js","./icon-BQO9J86c.js","./loader-C-zIPscB.js"])))=>i.map(i=>d[i]);
import{r as s}from"./tslib.es6-B3Jf3DVX.js";import{b as p}from"./Accessor-BLX9ikPh.js";import{m as r,a as d,n as m}from"./subclass-BZA_h8Db.js";import{watch as h,syncAndInitial as c,when as v}from"./reactiveUtils-C5zUhJQJ.js";import{_}from"./index-Bh2oEzTI.js";import{B as g,r as y,n as i}from"./jsxFactory-CJa39Fro.js";import{n as w}from"./UnitSelect-Bx5aDsPO.js";let u=class extends p{constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,(e==null?void 0:e.visible)!=null&&(this.visible=e.visible)}initialize(){this.addHandles(h(()=>({ready:this.view!=null&&this.view.ready,supported:this.supported}),({ready:e,supported:t})=>{!e||t||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},c))}destroy(){this.removeTool(),this.view=null}get active(){return this.tool!=null&&this.tool.active}get disabled(){return this.view==null||!this.view.ready||!this.supported}get supported(){return this.view==null||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),e!=null&&this.addHandles(e.tools.on("after-remove",l=>{l.item===this.tool&&this._set("tool",null)}),t)}set visible(e){this._set("visible",e),this.tool!=null&&(this.tool.visible=e)}createTool(e={interactive:!1}){if(this.removeTool(),this.view==null||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),v(()=>t.created,()=>{t.active&&this.view!=null&&(this.view.activeTool=null)},{initial:!0,once:!0})):t.destroy()}removeTool(){var l;const e=this.tool;if(e==null)return;const t=(l=this.view)==null?void 0:l.tools;t!=null?t.remove(e):e.destroy(),this._set("tool",null)}logError(...e){m.getLogger(this).error(...e)}};s([r({constructOnly:!0})],u.prototype,"tool",void 0),s([r()],u.prototype,"active",null),s([r()],u.prototype,"disabled",null),s([r()],u.prototype,"supported",null),s([r({value:null})],u.prototype,"view",null),s([r({type:Boolean,value:!0})],u.prototype,"visible",null),u=s([d("esri.widgets.support.InteractiveToolViewModel")],u);const o="esri-measurement-widget-content",a={base:o,actions:`${o}__actions`,error:`${o}__error`,hint:`${o}__hint`,hintText:`${o}__hint-text`,panelError:`${o}__panel--error`,settings:`${o}__settings`,measurement:`${o}__measurement`,measurementItem:`${o}__measurement-item`,measurementItemDisabled:`${o}__measurement-item--disabled`,measurementItemTitle:`${o}__measurement-item__title`,measurementItemValue:`${o}__measurement-item__value`};let n=class extends g{constructor(e,t){super(e,t)}loadDependencies(){return y({button:()=>_(()=>import("./calcite-button-D_Agetwz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url)})}render(){return i("div",{class:a.base},this._renderContent())}_renderContent(){const{supported:e,active:t,state:l}=this;switch(l){case"disabled":case"ready":return e?t?this._renderHint():this._renderActions():this._renderUnsupportedMessage();case"measuring":case"measured":return[this._renderSettings(),this._renderMeasurement(),this._renderActions()]}}_renderUnsupportedMessage(){return i("section",{class:a.error,key:"unsupported"},i("p",null,this.messages.unsupported))}_renderHint(){const{messages:e}=this;return i("section",{class:a.hint,key:"hint"},i("p",{class:a.hintText},e.hint))}_renderSettings(){return i("div",{class:a.settings,key:"settings"},i(w,{options:this.unitOptions,selectLabel:this.messages.unit,value:this.unit,onChange:this.onUnitChange}))}_renderMeasurement(){return i("section",{class:a.measurement,key:"measurement"},this.measurementItems.map(e=>this._renderMeasurementItem(e)))}_renderMeasurementItem({key:e,title:t,value:l}){return i("div",{class:this.classes(a.measurementItem,l==null&&a.measurementItemDisabled),key:e},i("span",{class:a.measurementItemTitle},t),i("span",{"aria-live":"polite",class:a.measurementItemValue},l??this.messages.notApplicable))}_renderActions(){const{messages:e}=this;return i("div",{class:a.actions},i("calcite-button",{class:this.newMeasurementButtonClass,disabled:this.state==="disabled",onclick:this.onNewMeasurementClick},e.newMeasurement))}};s([r()],n.prototype,"active",void 0),s([r()],n.prototype,"measurementItems",void 0),s([r()],n.prototype,"messages",void 0),s([r()],n.prototype,"newMeasurementButtonClass",void 0),s([r()],n.prototype,"onNewMeasurementClick",void 0),s([r()],n.prototype,"onUnitChange",void 0),s([r()],n.prototype,"state",void 0),s([r()],n.prototype,"supported",void 0),s([r()],n.prototype,"unit",void 0),s([r()],n.prototype,"unitOptions",void 0),n=s([d("esri.widgets.support.MeasurementWidgetContent")],n);export{u as p,n as u};
