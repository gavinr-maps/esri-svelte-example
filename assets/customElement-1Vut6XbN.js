const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index--OBudxYA.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./label-CHHpnzD0.js","./dom-DEluURzl.js","./guid-ejniuQmw.js","./index-09m8YzVy.js","./index-DwIhxbHs.js","./observers-Co4E8E8j.js","./index-fFnlo_g2.js","./ref-D9wHsL_T.js","./directive-helpers-DaBykg1t.js","./keyed-CU1C-h1n.js","./Validation-BYp9DS84.js","./form-BzoUrXC7.js","./interactive-DTzfFku4.js","./key-CZcQa38B.js","./loadable-XBvaWFYY.js","./locale-CXx8I9ox.js","./math-BpAtBkbz.js","./useT9n-C1Hrfc-A.js","./index-jjUP6Yam.js","./index-CMxz6F2k.js","./static-DLD4WjLv.js","./component-CBVlbUuE.js","./index-CtvJE4Qe.js"])))=>i.map(i=>d[i]);
import{_ as v,L as D,u as W,c as B,n as V,i as A,a as P}from"./index-4eY77cms.js";import{r as i,m as n,a as b,g as $,B as R}from"./Accessor-BmwT4B0c.js";import{t as x}from"./memoize-DmxaQ-k8.js";import{i as O,n as I,a as N,b as H,p as z,s as U,c as F}from"./weather-zOic7P_q.js";import{O as M,n as o,c as L,e as j,v as k,i as _}from"./jsxFactory-Cnml7uXM.js";import{e as T}from"./globalCss-vQlnDsEX.js";import{e as q}from"./Heading-BcR6CGTM.js";import{d as G,A as J}from"./reactiveUtils-XM7cS2OP.js";import{P as K}from"./useWidget-BajufX8l.js";import"./JSONSupport-DcrLLGjL.js";import"./enumeration-DpvDkLNI.js";import"./cast-CsZslgGN.js";import"./intl-Duiy0OzY.js";import"./Promise-DfET-uns.js";import"./Evented-Dw4_VOGn.js";import"./uuid-Cl5lrJ4c.js";import"./mathUtils-Cfq9PL9W.js";import"./SimpleObservable-CvOkykwM.js";import"./index-C5b9dHRB.js";import"./component-utils-D0ciaaZ_.js";const u="esri-weather",y={base:u,content:`${u}__content`,hasError:`${u}__content--has-error`,selector:`${u}__selector`,options:`${u}__options`,optionsHidden:`${u}__options--hidden`,error:`${u}__error`,warning:`${u}__warning`},Q={base:`${`${u}__labeled-slider`}`};var p,c;(function(e){e.Disabled="disabled",e.Ready="ready",e.Error="error"})(p||(p={})),function(e){e.NotVisible="not-visible",e.LocalScene="local-scene",e.NoAtmosphere="no-atmosphere",e.UnsupportedView="unsupported-view"}(c||(c={}));let d=class extends M{constructor(t){super(t),this._onChange=r=>{this.onChange(r.currentTarget.value)}}render(){const{label:t}=this;return o("div",{class:Q.base},o("calcite-label",{scale:"s"},t,o("calcite-slider",{"aria-label":t,disabled:this.disabled,max:1,min:0,step:.01,value:this.value,onCalciteSliderChange:this._onChange,onCalciteSliderInput:this._onChange})))}loadDependencies(){return L({label:()=>v(()=>import("./index--OBudxYA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url),slider:()=>v(()=>import("./index-09m8YzVy.js"),__vite__mapDeps([16,17,1,2,3,4,5,6,7,8,9,10,11,12,14,15,18,19,20,21,22,23,24,25,26,13,27,28,29,30]),import.meta.url)})}};i([n()],d.prototype,"value",void 0),i([n()],d.prototype,"onChange",void 0),i([n()],d.prototype,"disabled",void 0),d=i([b("esri.widgets.Weather.LabeledSlider")],d);let m=class extends ${constructor(e){super(e),this.header=!0}};i([n({type:Boolean,nonNullable:!0})],m.prototype,"header",void 0),m=i([b("esri.widgets.Weather.VisibleElements")],m);const S=m;let h=class extends ${constructor(e){super(e),this.view=null,this._weatherByType={sunny:new z,cloudy:new H,rainy:new N,snowy:new I,foggy:new O},this._settingWeather=!1}initialize(){this.addHandles([G(()=>this.current,e=>{this._settingWeather||e==null||(this._weatherByType={...this._weatherByType,[e.type]:e})},J)])}get state(){const e=this.view;return e!=null&&e.ready?this.error!=null?this.error===c.NotVisible?p.Ready:p.Error:p.Ready:p.Disabled}get weatherByType(){return this._weatherByType}get error(){const e=this.view;return e!=null&&e.ready?e.type!=="3d"?c.UnsupportedView:e.viewingMode==="local"?c.LocalScene:e.environment.atmosphereEnabled?e.environment.weatherAvailable?null:c.NotVisible:c.NoAtmosphere:null}get current(){var e;return((e=this._environment)==null?void 0:e.weather)??this._weatherByType.sunny}set current(e){const t=this._environment;t&&(t.weather=e)}get _environment(){const e=this.view;return e!=null&&e.type==="3d"?e.environment:null}setWeatherByType(e){if(!U(e,R.getLogger(this)))return;const t=this._environment;t!=null&&(this._settingWeather=!0,t.weather=this._weatherByType[e],this._settingWeather=!1)}setSnowCoverEnabled(e){const t=this.current;"snowCover"in t&&(t.snowCover=e?"enabled":"disabled")}};i([n()],h.prototype,"view",void 0),i([n()],h.prototype,"state",null),i([n()],h.prototype,"_weatherByType",void 0),i([n()],h.prototype,"weatherByType",null),i([n()],h.prototype,"error",null),i([n()],h.prototype,"current",null),i([n()],h.prototype,"_environment",null),h=i([b("esri.widgets.Weather.WeatherViewModel")],h);const X=h,Y={sunny:"brightness",cloudy:"partly-cloudy",rainy:"rain",snowy:"snow",foggy:"fog"};let l=class extends M{constructor(e){super(e),this.viewModel=new X,this.headingLevel=4,this.visibleElements=new S,this._renderWeatherTypeButton=t=>{const r=this.viewModel,a=this.messages[t].label,s=r.state===p.Disabled,g=!s&&r.current.type===t;return o("calcite-button",{appearance:g?"solid":"outline","aria-checked":g?"true":"false",disabled:s,iconStart:Y[t],key:`${t}-type-button`,kind:g?"brand":"neutral",label:a,onclick:()=>{g||r.setWeatherByType(t)},scale:"l",title:a})},this._memoizedCallbacks=x(t=>({onCloudCoverChange:r=>{"cloudCover"in t&&(t.cloudCover=r)},onPrecipitationChange:r=>{"precipitation"in t&&(t.precipitation=r)},onFogStrengthChange:r=>{"fogStrength"in t&&(t.fogStrength=r)},onSnowCoverChange:r=>{this.viewModel.setSnowCoverEnabled(r.currentTarget.checked)}}))}render(){const e=this.viewModel.state===p.Disabled;return o("div",{"aria-label":this.messages.widgetLabelAccessible,class:this.classes(y.base,T.widget,e&&T.widgetDisabled),role:"region"},this._renderContent())}loadDependencies(){return L({button:()=>v(()=>import("./index-jjUP6Yam.js"),__vite__mapDeps([31,32,1,2,3,4,5,6,7,8,9,10,11,12,15,30,17,14,18,20,21,33,24,25,13,27,34]),import.meta.url),checkbox:()=>v(()=>import("./index-CtvJE4Qe.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,11,12,20,21,14,15,24,25,26,13,27]),import.meta.url),icon:()=>v(()=>import("./index-DwIhxbHs.js").then(e=>e.i),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,14,15,18]),import.meta.url),label:()=>v(()=>import("./index--OBudxYA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)})}get view(){var e;return(e=this.viewModel)==null?void 0:e.view}set view(e){this.viewModel&&(this.viewModel.view=e)}get icon(){return"partly-cloudy"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get _errorMessage(){const e=this.messages.error;switch(this.viewModel.error){case c.LocalScene:return e.localScene;case c.NoAtmosphere:return e.noAtmosphere;case c.UnsupportedView:return e.unsupported;default:return null}}get _warningMessage(){var e;return this.viewModel.error===c.NotVisible&&this.view!=null&&((e=this.view)==null?void 0:e.type)==="3d"&&this.view.environment.atmosphereEnabled?this.messages.error.notVisible:null}_renderContent(){const{headingLevel:e,messages:t,viewModel:r,visibleElements:a}=this,s=this._warningMessage,g=r.current,f=r.state===p.Error;return o(_,null,a.header?o(q,{level:e},t.widgetLabel):null,f?o("div",{class:y.error,key:"error"},this._errorMessage):null,o("div",{class:k({[y.content]:!0,[y.hasError]:f}),key:"content"},o("div",{"aria-label":t.weatherType,class:y.selector,key:"type-selector",role:"radiogroup"},F.map(this._renderWeatherTypeButton)),Object.values(r.weatherByType).map(E=>o("div",{class:k({[y.options]:!0,[y.optionsHidden]:E.type!==(g==null?void 0:g.type)}),key:"options-container"},this._renderOptions(E))),s!=null?this._renderWarning(s):null))}_renderOptions(e){const{viewModel:t,messages:r}=this,a=t.state===p.Disabled,s=this._memoizedCallbacks(e);switch(e.type){case"sunny":return o(d,{disabled:a,key:"sunny-cover",label:r.sunny.cloudCover,value:e.cloudCover,onChange:s.onCloudCoverChange});case"cloudy":return o(d,{disabled:a,key:"cloudy-cover",label:r.cloudy.cloudCover,value:e.cloudCover,onChange:s.onCloudCoverChange});case"rainy":return o(_,null,o(d,{disabled:a,key:"rainy-cover",label:r.rainy.cloudCover,value:e.cloudCover,onChange:s.onCloudCoverChange}),o(d,{disabled:a,key:"rainy-precipitation",label:r.rainy.precipitation,value:e.precipitation,onChange:s.onPrecipitationChange}));case"snowy":return o(_,null,o(d,{disabled:a,key:"snowy-cloud-cover",label:r.snowy.cloudCover,value:e.cloudCover,onChange:s.onCloudCoverChange}),o(d,{disabled:a,key:"snowy-precipitation",label:r.snowy.precipitation,value:e.precipitation,onChange:s.onPrecipitationChange}),o("calcite-label",{key:"snow-cover",layout:"inline",scale:"s",title:r.snowy.snowCoverTooltip},o("calcite-checkbox",{checked:e.snowCover==="enabled",disabled:a,onCalciteCheckboxChange:s.onSnowCoverChange}),r.snowy.snowCover));case"foggy":return o(d,{disabled:a,key:"foggy-cover",label:r.foggy.fogStrength,value:e.fogStrength,onChange:s.onFogStrengthChange})}}_renderWarning(e){return o("div",{class:y.warning,key:"warning"},o("calcite-icon",{icon:"exclamation-mark-triangle",scale:"s"}),e)}};i([n()],l.prototype,"viewModel",void 0),i([n()],l.prototype,"view",null),i([n()],l.prototype,"headingLevel",void 0),i([n({type:S,nonNullable:!0})],l.prototype,"visibleElements",void 0),i([n()],l.prototype,"icon",null),i([n()],l.prototype,"label",null),i([n(),j("esri/widgets/Weather/t9n/Weather")],l.prototype,"messages",void 0),i([n()],l.prototype,"_errorMessage",null),i([n()],l.prototype,"_warningMessage",null),l=i([b("esri.widgets.Weather")],l);const Z=l;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const ee=A`@layer{arcgis-weather{display:block}}`,te=K(Z),w=class w extends D{constructor(){super(...arguments),this.widget=te(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.headingLevel=this.widget.headingLevel,this.hideHeader=this.widget.visibleElements.header,this.icon=this.widget.icon,this.label=this.widget.label,this.position="bottom-left",this.state=this.viewModel.state,this.arcgisPropertyChange=W()("state"),this.arcgisReady=B()}async destroy(){await this.manager.destroy()}};w.properties={autoDestroyDisabled:5,headingLevel:9,hideHeader:5,icon:1,label:1,position:1,referenceElement:1,state:3},w.shadowRootOptions=V,w.styles=ee;let C=w;P("arcgis-weather",C);export{C as ArcgisWeather};
