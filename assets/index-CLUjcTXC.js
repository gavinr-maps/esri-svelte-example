const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./time-zones-Cf0cMbpH.js","./index-p4VH55K1-C9CfJ195.js","./index-fK6BbF3_.js","./index-BBBR8c-K.js","./region-Cdi-Ncy5.js","./index-z0VEbrRQ.js"])))=>i.map(i=>d[i]);
import"./index-73bQemcW.js";import"./index-Ch_sYKt7.js";import"./index-BnH8ZLT5.js";import"./index-Bb6Bx1n-.js";import"./index-GVt5zfuo.js";import"./index-f8ydkm1H.js";import{i as M,L as V,c as g,q as k,x as y,E as x,s as U,_ as b}from"./index-tefRSezt.js";import{S as A}from"./jsxFactory-CLjKarlq.js";import{n as N}from"./ref-Ccn4I0kT.js";import{c as L}from"./repeat-Cgn4lGS8.js";import{i as G}from"./keyed-CdPY5MOf.js";import{v as q,T as W}from"./label-BLne9qNB.js";import{m as j,p as Q}from"./interactive-B8siLByk.js";import{r as H}from"./loadable-DOQnSSjG.js";import{D as J,O as K,W as X,B as Y}from"./form-B15gmg4q.js";import{s as ee}from"./useT9n-CJAswmP1.js";import{Q as te}from"./locale-CXx8I9ox.js";import"./dom--xxYYVQF.js";import"./guid-ejniuQmw.js";import"./observers-BdozwIHb.js";import"./key-CZcQa38B.js";import"./component-CFGnHAqh.js";import"./live-BIBBLA6F.js";import"./directive-helpers-C0aXnQdc.js";import"./core-zHisM37C.js";import"./filter-Cs9GmjDF.js";import"./escapeRegExp-UP7ghjt8.js";import"./debounce-DbkufipY.js";import"./floating-ui-BkLjHVN3.js";import"./openCloseComponent-dw_x67D_.js";import"./Validation-O1TFEQW-.js";import"./utils3-CmcdYP7V.js";import"./text-CbTMlb2o.js";import"./Accessor-BHnuXKD2.js";import"./intl-Do3GEEJ7.js";import"./Promise-CmQqe-ke.js";import"./cast-BA_-jlhc.js";import"./JSONSupport-CGdeqxpk.js";import"./Evented-DCWccWGU.js";import"./reactiveUtils-BR0C1Kq4.js";import"./SimpleObservable-7oieNGD8.js";import"./uuid-Cl5lrJ4c.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const oe={offset:"offset"},ie=60;function $(o){return o.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace("âˆ’","-")}function ae(o,e){const t=w(o,"en-US",e).replace("GMT","");return t===""?0:Number($(t))*ie}function se(){return new Date().getTimezoneOffset()*-1}function ne(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}async function re(o){if(o==="offset")return t=>t;const{normalize:e}=await b(async()=>{const{normalize:t}=await import("./time-zones-Cf0cMbpH.js");return{normalize:t}},__vite__mapDeps([0,1]),import.meta.url);return e}async function le(o,e,t,i,r){if(t==="name"){const{groupByName:n}=await b(async()=>{const{groupByName:a}=await import("./index-fK6BbF3_.js");return{groupByName:a}},__vite__mapDeps([2,0,1]),import.meta.url);return(await n()).map(({label:a})=>({label:a,value:a,metadata:{filterValue:a}})).filter(a=>!!a).sort()}const d=r==="user"?o:r==="utc"?"fr":"en-GB",p=i.getTime();if(t==="region"){const[{groupByRegion:n},{getCountry:a,global:m}]=await Promise.all([b(()=>import("./index-BBBR8c-K.js"),__vite__mapDeps([3,0,1,4]),import.meta.url),b(()=>import("./region-Cdi-Ncy5.js"),__vite__mapDeps([4,1]),import.meta.url)]);return(await n()).map(({label:s,tzs:c})=>(c.sort((l,h)=>{const T=I(l,e),C=I(h,e),u="Etc/GMT";if(l.startsWith(u)&&h.startsWith(u)){const f=l.substring(u.length),P=h.substring(u.length),F=f===""?0:parseInt(f);return(P===""?0:parseInt(P))-F}return T.localeCompare(C)}),{label:_(e,s),items:c.map(l=>{const h=$(w(l,d,p)),T=I(l,e),C=s===m?`${I(m,e)} Etc`:B(l),u=a(l),f=_(e,u);return{label:T,value:l,metadata:{country:f===T?void 0:f,filterValue:C,offset:h}}})})).sort((s,c)=>s.label===m?-1:c.label===m?1:s.label.localeCompare(c.label))}const[{groupByOffset:Z},{DateEngine:R}]=await Promise.all([b(()=>import("./index-z0VEbrRQ.js"),__vite__mapDeps([5,0,1,4]),import.meta.url),b(()=>import("./index-Bx95W_6e.js"),[],import.meta.url)]),E=await Z({dateEngine:new R,groupDateRange:1,startDate:new Date(p).toISOString()}),S=new Intl.ListFormat(o,{style:"long",type:"conjunction"}),D=["Factory","Etc/UTC"];return E.forEach(n=>{const a=[];let m=0;n.tzs.forEach((s,c)=>{D.includes(s)&&m++,a[c]=m}),n.tzs=n.tzs.filter(s=>!D.includes(s)),n.labelTzIdx=n.labelTzIdx.map(s=>s-a[s]).filter(s=>s>=0&&s<n.tzs.length)}),E.map(({labelTzIdx:n,tzs:a})=>{const m=a[0],s=$(w(m,d,p)),c=ae(m,p),l=n.map(h=>I(a[h],e));return{label:he(e,s,S.format(l)),value:c,metadata:{filterValue:a.map(h=>B(h))}}}).filter(n=>!!n).sort((n,a)=>n.value-a.value)}function I(o,e){return e[o]||ce(o)}function me(o,e,t){return t.timeZoneRegionLabel.replace("{city}",o).replace("{country}",_(t,e))}function _(o,e){return o[e]||e}function ce(o){return o.split("/").pop()}function B(o){return o.replace(/_/g," ")}function he(o,e,t){return o.timeZoneLabel.replace("{offset}",e).replace("{cities}",t)}function w(o,e,t=Date.now()){return o==="Factory"&&(o="Etc/GMT"),te(e,{timeZone:o,timeZoneName:"shortOffset"}).formatToParts(t).find(({type:i})=>i==="timeZoneName").value}function pe(o){return o.items!==void 0}function de(o){return pe(o[0])?o.flatMap(e=>e.items):o}function z(o,e,t){return t==null?null:de(o).find(i=>i[e]==t)}const ue=M`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}.offset{white-space:nowrap}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}`,v=class v extends V{constructor(){super(...arguments),this.clearable=!1,this.disabled=!1,this.maxItems=0,this.messages=ee({blocking:!0}),this.mode="offset",this.offsetStyle="user",this.open=!1,this.overlayPositioning="absolute",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputTimeZoneBeforeClose=g({cancelable:!1}),this.calciteInputTimeZoneBeforeOpen=g({cancelable:!1}),this.calciteInputTimeZoneChange=g({cancelable:!1}),this.calciteInputTimeZoneClose=g({cancelable:!1}),this.calciteInputTimeZoneOpen=g({cancelable:!1})}get value(){return this._value}set value(e){this._value=e}async setFocus(){await H(this),await this.comboboxEl.setFocus()}connectedCallback(){super.connectedCallback(),J(this),q(this)}async load(){this.normalizer=await re(this.mode),await this.updateTimeZoneItems();const e=this.value,t=this.normalizeValue(e);this.value=t||(e===""?t:void 0),this.updateTimeZoneSelection();const i=this.selectedTimeZoneItem?`${this.selectedTimeZoneItem.value}`:"";K(this,i),this.value=i}willUpdate(e){e.has("value")&&this.hasUpdated&&this.handleValueChange(this.value,e.get("value")),(e.has("messages")||e.has("mode")&&(this.hasUpdated||this.mode!=="offset")||e.has("referenceDate"))&&this.handleTimeZoneItemPropsChange(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openChanged()}updated(){j(this)}loaded(){this.overrideSelectedLabelForRegion(this.open),this.openChanged()}disconnectedCallback(){super.disconnectedCallback(),X(this),W(this)}async handleTimeZoneItemPropsChange(){!this.timeZoneItems||!this.hasUpdated||(await this.updateTimeZoneItems(),this.updateTimeZoneSelection())}openChanged(){this.comboboxEl&&(this.comboboxEl.open=this.open)}async handleValueChange(e,t){const i=this.normalizeValue(e);if(!i){if(this.clearable){this._value=i,this.selectedTimeZoneItem=null;return}this._value=t,this.selectedTimeZoneItem=this.findTimeZoneItem(t);return}const r=this.findTimeZoneItem(i);if(!r){this._value=t;return}this._value=i,this.selectedTimeZoneItem=r,i!==e&&(await this.updateComplete,this.overrideSelectedLabelForRegion(this.open))}onLabelClick(){this.setFocus()}setComboboxRef(e){this.comboboxEl=e}overrideSelectedLabelForRegion(e){if(this.mode!=="region"||!this.selectedTimeZoneItem)return;const{label:t,metadata:i}=this.selectedTimeZoneItem;this.comboboxEl.selectedItems[0].textLabel=!i.country||e?t:me(t,i.country,this.messages)}onComboboxBeforeClose(e){e.stopPropagation(),this.overrideSelectedLabelForRegion(!1),this.calciteInputTimeZoneBeforeClose.emit()}onComboboxBeforeOpen(e){e.stopPropagation(),this.overrideSelectedLabelForRegion(!0),this.calciteInputTimeZoneBeforeOpen.emit()}onComboboxChange(e){e.stopPropagation();const t=e.target.selectedItems[0];if(!t){this._value="",this.selectedTimeZoneItem=null,this.calciteInputTimeZoneChange.emit();return}const i=this.findTimeZoneItemByLabel(t.getAttribute("data-label")),r=`${i.value}`;this.value===r&&i.label===this.selectedTimeZoneItem.label||(this._value=r,this.selectedTimeZoneItem=i,this.calciteInputTimeZoneChange.emit())}onComboboxClose(e){e.stopPropagation(),this.open=!1,this.calciteInputTimeZoneClose.emit()}onComboboxOpen(e){this.open=!0,e.stopPropagation(),this.calciteInputTimeZoneOpen.emit()}findTimeZoneItem(e){return z(this.timeZoneItems,"value",e)}findTimeZoneItemByLabel(e){return z(this.timeZoneItems,"label",e)}async updateTimeZoneItems(){this.timeZoneItems=await this.createTimeZoneItems()}updateTimeZoneSelection(){if(this.value===""&&this.clearable){this.selectedTimeZoneItem=null;return}const e=this.mode==="offset"?se():ne(),t=this.value===""||!this.value?e:this.value;this.selectedTimeZoneItem=this.findTimeZoneItem(t)||this.findTimeZoneItem(e)}async createTimeZoneItems(){return!this.messages._lang||!this.messages?[]:le(this.messages._lang,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()),this.offsetStyle)}normalizeValue(e){return e=e===void 0?"":e,e&&this.normalizer(e)}render(){return Q({disabled:this.disabled,children:y`<calcite-combobox .clearDisabled=${!this.clearable} .disabled=${this.disabled} .label=${this.messages.chooseTimeZone} lang=${this.messages._lang??x} .maxItems=${this.maxItems} @calciteComboboxBeforeClose=${this.onComboboxBeforeClose} @calciteComboboxBeforeOpen=${this.onComboboxBeforeOpen} @calciteComboboxChange=${this.onComboboxChange} @calciteComboboxClose=${this.onComboboxClose} @calciteComboboxOpen=${this.onComboboxOpen} .overlayPositioning=${this.overlayPositioning} .placeholder=${this.mode==="name"?this.messages.namePlaceholder:this.mode==="offset"?this.messages.offsetPlaceholder:this.messages.regionPlaceholder} placeholder-icon=search .readOnly=${this.readOnly} .scale=${this.scale} .selectionMode=${this.clearable?"single":"single-persist"} .status=${this.status} .validationIcon=${this.validationIcon} .validationMessage=${this.validationMessage} ${N(this.setComboboxRef)}>${this.renderItems()}</calcite-combobox>${Y({component:this})}`})}renderItems(){return this.mode==="region"?this.renderRegionItems():L(this.timeZoneItems,({label:e})=>e,e=>{const t=this.selectedTimeZoneItem===e,{label:i,metadata:r,value:d}=e;return y`<calcite-combobox-item data-label=${i??x} .metadata=${r} .selected=${t} .textLabel=${i} .value=${d}></calcite-combobox-item>`})}renderRegionItems(){return this.timeZoneItems.flatMap(({label:e,items:t})=>G(e,y`<calcite-combobox-item-group .label=${e}>${L(t,({label:i})=>i,i=>{const r=this.selectedTimeZoneItem===i,{label:d,metadata:p,value:Z}=i;return y`<calcite-combobox-item data-label=${d??x} .description=${p.country} .metadata=${p} .selected=${r} .textLabel=${d} .value=${Z}><span class=${U(oe.offset)} slot=content-end>${p.offset}</span></calcite-combobox-item>`})}</calcite-combobox-item-group>`))}};v.properties={clearable:7,disabled:7,form:3,maxItems:11,messageOverrides:0,mode:3,name:3,offsetStyle:3,open:7,overlayPositioning:3,readOnly:7,referenceDate:1,required:7,scale:3,status:3,validationIcon:[3,{converter:k}],validationMessage:1,validity:0,value:1},v.shadowRootOptions={mode:"open",delegatesFocus:!0},v.styles=ue;let O=v;A("calcite-input-time-zone",O);export{O as InputTimeZone};
