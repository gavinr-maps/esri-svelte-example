const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-action-Bys6x4p_.js","./action-D0Er9Ef6.js","./jsxFactory-CJa39Fro.js","./tslib.es6-B3Jf3DVX.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./subclass-BZA_h8Db.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./Accessor-BLX9ikPh.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./Evented-BHRw9x22.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./dom-D_AJDzAj.js","./interactive-y84HQRWL.js","./loadable-DM18hPdE.js","./locale-A4FuYD8q.js","./key-D63ExP77.js","./observers-D2xgmA06.js","./component-6CIDVndn.js","./t9n-D0ry3MEw.js","./icon-BQO9J86c.js","./loader-C-zIPscB.js","./calcite-button-D_Agetwz.js","./button-9P4PM9SO.js","./form-BZPQ5PUM.js","./label-DEe8AW1C.js","./calcite-list-item-vbKS6alm.js","./utils3-BrU6GrkI.js","./resources4-DXHY1U7R.js","./handle-Ct1HP3bl.js","./calcite-list-C4jOVpC-.js","./filter-yN6-jZOU.js","./debounce-BOqmhDXu.js","./input2-BReyTnf4.js","./Validation-Bz9yoU6e.js","./input-j1u1wOBY.js","./input-message-CWvsvdFk.js","./progress-BXyickl_.js","./scrim-DPa2aeKh.js"])))=>i.map(i=>d[i]);
import{_ as v}from"./index-Bh2oEzTI.js";import{r as t}from"./tslib.es6-B3Jf3DVX.js";import{j as S}from"./Accessor-BLX9ikPh.js";import{m as s,a as g}from"./subclass-BZA_h8Db.js";import{e as E,B as $,r as k,n as l}from"./jsxFactory-CJa39Fro.js";import{c as V}from"./Analysis-605EM8LG.js";import{h as G}from"./SlicePlane-CdDvBULA.js";import{V as L}from"./Collection-CEdjem1-.js";import{t as I,n as A}from"./collectionUtils-D_lHIu88.js";import{_ as B}from"./AnalysisViewModel-2GZlQIqD.js";import{e as b}from"./globalCss-CZa70j6i.js";import{e as T}from"./Heading-C-odFCu-.js";import"./intl-CChhNOV8.js";import"./date-DlqISzcw.js";import"./jsonMap-0cxwUWs2.js";import"./locale-C9TlLpzi.js";import"./messages-OmQvZhAg.js";import"./assets-C43MgM-v.js";import"./Evented-BHRw9x22.js";import"./Promise-B2Hu02L7.js";import"./reactiveUtils-C5zUhJQJ.js";import"./asyncUtils-CWX51uTe.js";import"./shared-B3wH2qpO.js";import"./SimpleObservable-KocWTzVy.js";import"./uuid-fwrPAdZb.js";import"./cast-Bjksrh93.js";import"./Clonable-D3rtuBWg.js";import"./Identifiable-B1UbsKNt.js";import"./geometry-D964gYQX.js";import"./Extent-Bf3YTe7m.js";import"./Point-Cg0-ChZE.js";import"./writer-DNAwXnhG.js";import"./Polyline-D9YkgmM_.js";import"./mathUtils-C4_ghTv4.js";import"./Cyclical-oTUX3aX7.js";import"./persistable-DjaiFmiM.js";import"./MD5-C9MwAd2G.js";import"./multiOriginJSONSupportUtils-C0wm8_Yw.js";import"./resourceExtension-D8MnQ6oV.js";import"./persistableUrlUtils-fa1mAujs.js";let c=class extends V{constructor(i){super(i),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new L}set excludedLayers(i){this._set("excludedLayers",A(i,this._get("excludedLayers")))}get requiredPropertiesForEditing(){var i;return[(i=this.shape)==null?void 0:i.position]}clear(){this.shape=null}};t([s({type:["slice"]})],c.prototype,"type",void 0),t([s()],c.prototype,"tiltEnabled",void 0),t([s({types:{key:"type",base:null,typeMap:{plane:G},defaultKeyValue:"plane"}})],c.prototype,"shape",void 0),t([s({cast:I,clonable:e=>e.slice()})],c.prototype,"excludedLayers",null),t([s({type:Boolean,nonNullable:!0})],c.prototype,"excludeGroundSurface",void 0),t([s({readOnly:!0})],c.prototype,"requiredPropertiesForEditing",null),c=t([g("esri.analysis.SliceAnalysis")],c);const M=c,w=new Set;let d=class extends B{constructor(e){super(e),this.analysis=null,this.supportedViewType="3d",this.unsupportedErrorMessage="SliceViewModel is only supported in 3D views.",w.add(this)}destroy(){w.delete(this)}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get shape(){return this.analysis.shape}set shape(e){this.analysis.shape=e}get tiltEnabled(){return this.analysis.tiltEnabled}set tiltEnabled(e){this.analysis.tiltEnabled=e}get layersMode(){var e;return((e=this.tool)==null?void 0:e.layersMode)??"none"}get excludedLayers(){return this.analysis.excludedLayers}set excludedLayers(e){this.analysis.excludedLayers=L.isCollection(e)?e:new L(e)}get excludeGroundSurface(){return this.analysis.excludeGroundSurface}set excludeGroundSurface(e){this.analysis.excludeGroundSurface=e}async start(){await super.start(),w.forEach(e=>{e.view===this.view&&e!==this&&e.clear()}),this.analysisView!=null&&(this.analysisView.active=!0)}enterExcludeLayerMode(){this.tool!=null&&this.tool.enterExcludeLayerMode()}exitExcludeLayerMode(){this.tool!=null&&this.tool.exitExcludeLayerMode()}onConnectToAnalysisView(e){e.active=!0}constructAnalysis(){return new M}};t([s({type:M})],d.prototype,"analysis",void 0),t([s({readOnly:!0})],d.prototype,"state",null),t([s()],d.prototype,"shape",null),t([s()],d.prototype,"tiltEnabled",null),t([s()],d.prototype,"layersMode",null),t([s()],d.prototype,"excludedLayers",null),t([s({nonNullable:!0})],d.prototype,"excludeGroundSurface",null),d=t([g("esri.widgets.Slice.SliceViewModel")],d);const f=d,a="esri-slice",o={base:a,actions:`${a}__actions`,cancelButton:`${a}__cancel-button`,container:`${a}__container`,error:`${a}__error`,excludeButton:`${a}__exclude-button`,hint:`${a}__hint`,hintText:`${a}__hint-text`,layerItem:`${a}__layer-item`,layerList:`${a}__layer-list`,layerListHeading:`${a}__layer-list-title`,newSliceButton:`${a}__clear-button`};let r=class extends ${constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.viewModel=new f,this._onNewSliceClick=()=>{S(this.viewModel.start())}}loadDependencies(){return k({action:()=>v(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url),button:()=>v(()=>import("./calcite-button-D_Agetwz.js"),__vite__mapDeps([33,34,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,35,23,24,36,29,25,26,27,28,30,31,32]),import.meta.url),"list-item":()=>v(()=>import("./calcite-list-item-vbKS6alm.js"),__vite__mapDeps([37,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,30,25,38,39,1,29,31,32,40]),import.meta.url),list:()=>v(()=>import("./calcite-list-C4jOVpC-.js"),__vite__mapDeps([41,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,28,39,38,25,30,26,27,42,43,31,44,35,36,29,45,46,47,48,32,49]),import.meta.url)})}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(e){this.viewModel.analysis=e}get excludedLayers(){return this.viewModel.excludedLayers}set excludedLayers(e){this.viewModel.excludedLayers=e}get excludeGroundSurface(){return this.viewModel.excludeGroundSurface}set excludeGroundSurface(e){this.viewModel.excludeGroundSurface=e}get icon(){return"slice"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get hasVoxelLayers(){var i;const e=(i=this.viewModel)==null?void 0:i.view;return e!=null&&e.allLayerViews.some(u=>u.type==="voxel-3d")}render(){return l("div",{class:this.classes(o.base,b.widget,b.panel),role:"presentation"},this.visible?l("div",{class:o.container},this.viewModel.supported?[this._renderHint(),this._renderLayerList(),this._renderActions()]:this._renderUnsupported()):null)}_renderUnsupported(){return l("div",{class:o.error,key:"unsupported"},l("p",null,this.messages.unsupported))}_renderHint(){const{hasVoxelLayers:e,messages:i,viewModel:u}=this,{active:p,layersMode:y,state:m}=u;let n=null;return p&&(y==="exclude"?n=i.excludeHint:m==="ready"&&(n=e?i.voxelHint:i.hint)),n?l("div",{class:o.hint,key:"hint"},l("p",{class:o.hintText},n),l("p",{class:o.hintText},i.verticalHint)):null}_renderLayerList(){const{excludedLayers:e,excludeGroundSurface:i,headingLevel:u,messages:p,viewModel:y}=this,{layersMode:m,state:n}=y,h=n==="slicing"||n==="sliced",x=e?e.toArray().map(_=>this._renderLayerItem({uid:_.uid,title:_.title,onClick:()=>(this.excludedLayers.remove(_),!1)})):[];return i&&x.push(this._renderLayerItem({uid:"ground",title:p.ground,onClick:()=>(this.excludeGroundSurface=!1,!1)})),m!=="exclude"&&h&&x.length!==0?l("div",{class:o.layerList,key:"settings"},l(T,{class:o.layerListHeading,level:u},p.excludedLayers),l("calcite-list",{selectionMode:"none"},x)):null}_renderActions(){const{messages:e,viewModel:i}=this,{active:u,state:p}=i,y=p==="disabled",m=p==="slicing"||p==="sliced",n=i.layersMode==="exclude",h=[];return u&&!m||n||h.push(l("calcite-button",{class:o.newSliceButton,disabled:y,key:"new-slice",onclick:this._onNewSliceClick},e.newSlice)),m&&!n&&h.push(l("calcite-button",{appearance:"outline-fill",class:o.excludeButton,disabled:y,key:"exclude",onclick:()=>i.enterExcludeLayerMode()},e.excludeLayer)),u&&n&&h.push(l("calcite-button",{appearance:"outline-fill",class:o.cancelButton,disabled:y,key:"cancel-exclude",onclick:()=>i.exitExcludeLayerMode()},e.cancel)),h.length===0?null:l("div",{class:o.actions},h)}_renderLayerItem(e){const i=this.messages.includeLayer;return l("calcite-list-item",{class:o.layerItem,"data-testid":`list-item-${e.uid}`,key:e.uid,label:e.title??""},l("calcite-action",{icon:"x",onclick:e.onClick,scale:"s",slot:"actions-end",text:i,title:i}))}};t([s()],r.prototype,"active",null),t([s({constructOnly:!0,nonNullable:!0})],r.prototype,"analysis",null),t([s()],r.prototype,"excludedLayers",null),t([s()],r.prototype,"excludeGroundSurface",null),t([s()],r.prototype,"headingLevel",void 0),t([s()],r.prototype,"icon",null),t([s()],r.prototype,"label",null),t([s(),E("esri/widgets/Slice/t9n/Slice")],r.prototype,"messages",void 0),t([s()],r.prototype,"view",null),t([s({type:f})],r.prototype,"viewModel",void 0),t([s()],r.prototype,"visible",null),t([s()],r.prototype,"hasVoxelLayers",null),r=t([g("esri.widgets.Slice")],r);const be=r;export{be as default};
