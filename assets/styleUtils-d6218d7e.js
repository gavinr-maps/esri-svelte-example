import{T as c,a1 as m,a4 as d,a5 as p,a6 as b,a7 as h,a8 as w}from"./index-e8c6bcc0.js";import{e as $}from"./featureFlags-bf3d5654.js";let u={};async function j(t,r){try{return{data:(await g(t,r)).data,baseUrl:p(t),styleUrl:t}}catch(e){return b(e),null}}function N(t,r,e){const s=r.portal!=null?r.portal:h.getDefault();let n;const o=`${s.url} - ${s.user&&s.user.username} - ${t}`;return u[o]||(u[o]=U(t,s,e).then(l=>(n=l,l.fetchData())).then(l=>({data:l,baseUrl:n.itemUrl??"",styleName:t}))),u[o]}function U(t,r,e){return r.load(e).then(()=>{const s=new w({disableExtraQuery:!0,query:`owner:${y} AND type:${f} AND typekeywords:"${t}"`});return r.queryItems(s,e)}).then(({results:s})=>{var l;let n=null;const o=t.toLowerCase();if(s&&Array.isArray(s)){for(const a of s)if(((l=a.typeKeywords)==null?void 0:l.some(i=>i.toLowerCase()===o))&&a.type===f&&a.owner===y){n=a;break}}if(!n)throw new c("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(e)})}function A(t,r,e){return t&&t.styleUrl!=null?j(t.styleUrl,e):t&&t.styleName!=null?N(t.styleName,r,e):Promise.reject(new c("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function C(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function D(t,r,e=["gltf"]){if(r==="cimRef")return t.cimRef;if(t.formatInfos&&!$())for(const s of e){const n=t.formatInfos.find(o=>o.type===s);if(n)return n.href}return t.webRef}function g(t,r){const e={responseType:"json",query:{f:"json"},...r};return m(d(t),e)}const y="esri_en",f="Style",S="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{g as b,A as c,D as d,C as p,S as w};
