import{r as d,c as o,g}from"./index-Bh2oEzTI.js";import{s as n,t as l}from"./index-5cc0d3e9-BXwdUzLn.js";import{d as c}from"./component-utils-42b12dba-BfugynV_.js";import{u as w}from"./index-ee4c09de-CPW6V7nq.js";import{m as y}from"./useWidget-4dc2787d-C-ZlEsbo.js";import{u as m,g as h}from"./index-69f02a9e-wRYZXCy2.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.2
 */const u="",p=u,f=y(l),a="map-components:arcgis-directions",v=class{constructor(e){d(this,e),this.arcgisReady=o(this,"arcgisReady",7),this.arcgisPropertyChange=o(this,"arcgisPropertyChange",7),this.manager=m(this),this.widget=f(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=w()("lastRoute","state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.apiKey=this.widget.apiKey,this.icon=this.widget.icon,this.label=this.widget.label,this.routeLayerItemId=h(void 0,{set:t=>{var i;return c(t)&&!this.useDefaultRouteLayer?((i=this.widget.view)==null||i.map.remove(this.layer),this._setDefaultLayer()):t&&this.widget&&n({portalItem:{id:t}}).then(r=>{var s;this.layer=r,(s=this.widget.view)==null||s.map.add(this.layer)}).catch(console.error),t}}),this.lastRoute=this.widget.lastRoute,this.layer=this.widget.layer,this.headingLevel=this.widget.headingLevel,this.maxStops=this.widget.maxStops,this.searchProperties=this.widget.searchProperties,this.unit=this.widget.unit,this.useDefaultRouteLayer=h(!1,{set:t=>(this._setDefaultLayer(),t)}),this.hideLayerDetails=this.widget.visibleElements.layerDetails,this.hideSaveAsButton=this.widget.visibleElements.saveAsButton,this.hideSaveButton=this.widget.visibleElements.saveButton,this.position="bottom-left",this.state=this.viewModel.state}componentDidLoad(){this._setDefaultLayer()}_setDefaultLayer(){this.useDefaultRouteLayer&&!this.routeLayerItemId&&n({}).then(e=>{var t;this.layer=e,(t=this.widget.view)==null||t.map.add(this.layer)}).catch(console.error)}async destroy(){await this.manager.destroy()}async getDirections(){var e,t,i;if(((t=(e=this.widget)==null?void 0:e.viewModel)==null?void 0:t.state)!=="ready")throw new Error(`${a} - component not ready to get directions`);return await((i=this.widget)==null?void 0:i.getDirections())}async save(){var e,t,i;if(((t=(e=this.widget)==null?void 0:e.viewModel)==null?void 0:t.state)!=="ready")throw new Error(`${a} - component not ready to save directions`);return await((i=this.widget)==null?void 0:i.save())}async saveAs(e,t){var i,r,s;if(((r=(i=this.widget)==null?void 0:i.viewModel)==null?void 0:r.state)!=="ready")throw new Error(`${a} - component not ready to save directions as a Portal Item`);return await((s=this.widget)==null?void 0:s.saveAs(e,t))}async zoomToRoute(){var e,t,i;if(((t=(e=this.widget)==null?void 0:e.viewModel)==null?void 0:t.state)!=="ready")throw new Error(`${a} - component not ready to zoom to route`);(i=this.widget)==null||i.zoomToRoute()}get el(){return g(this)}};v.style=p;export{v as arcgis_directions};
