const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C6d66FVb.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DyXGQ9Xl.js","./ref-D9wHsL_T.js","./directive-helpers-DaBykg1t.js","./observers-Co4E8E8j.js","./dom-DEluURzl.js","./index-DwIhxbHs.js","./index-DVGzfobf.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./interactive-DTzfFku4.js","./key-CZcQa38B.js","./loadable-XBvaWFYY.js","./openCloseComponent-nqWrSaIH.js","./dynamicClasses-pKEMtFzB.js","./index-BPm91e5Z.js","./keyed-CU1C-h1n.js","./component-CBVlbUuE.js","./index-C7Sgjfzm.js","./resources6-Cs2_VmEC.js","./index-XCNLEnDV.js","./customElement-_nG5icNK.js","./index-DMeQur4V.js","./static-DLD4WjLv.js","./FloatingArrow-BZRr6Zld.js","./useFocusTrap-COeL24Kx.js","./focusTrapComponent-D1wJZ4RD.js","./index-DK5B8inx.js","./array-BbE1dLa5.js","./index--OBudxYA.js","./label-CHHpnzD0.js","./index-DgqiEeTY.js","./form-BzoUrXC7.js","./index-DanFJwSx.js","./index-fFnlo_g2.js","./Validation-BYp9DS84.js","./index-jjUP6Yam.js","./index-pyEU_klK.js","./index-DWeq-ojO.js","./live-D7NQ-TrC.js","./locale-CXx8I9ox.js","./input-DI9tZAPS.js","./index-BCDLx0rN.js","./filter-D4A4y0z5.js","./escapeRegExp-CdLjXKbf.js","./utils-Dtivty39.js","./index-B0pN5y8B.js","./resources5-SciNIBSe.js","./index-CtvJE4Qe.js","./GridControls-Be6_piCa.js","./Color-VJEMvW-n.js","./colorUtils-Rxh2V3ai.js","./mathUtils-Cfq9PL9W.js","./unitFormatUtils-Q7ZG7HcF.js","./ByteSizeUnit-BsxeN7wM.js","./Cyclical-Dlbl-cQK.js","./quantityUtils-BsDK158M.js","./Point-Cz2JYYmX.js","./writer-DKgfqj4X.js","./globalCss-vQlnDsEX.js","./LabeledSwitch--Ta60UQe.js","./projection-CyCZAIaD.js","./vec3f64-BLpZdpfb.js","./Extent-g5W9hy0j.js","./Polyline-s-JzsQqo.js","./projectBuffer-CQnuEMuP.js","./geodesicConstants-RQL9oKdk.js","./scaleUtils-DPfHG2g0.js","./enumeration-DpvDkLNI.js","./projectVectorToVector-CCOy_B5J.js","./projectPointToVector-BoxjK-qy.js","./defaultUnit-CHqZKPQE.js","./getDefaultUnitForView-BBSnYQvp.js","./Portal-CmmHxpLg.js","./TextSymbol-BLIQ6RKX.js","./screenUtils-_ZIvrt5o.js","./gridUtils-DPJnnI3Y.js","./geodesicUtils-Cvz9v8ds.js","./normalizeUtils-BTGdXlpz.js","./normalizeUtilsCommon-lGDszWRI.js","./jsonUtils-CwFG8yN4.js","./utils-YowqfOgk.js","./utils-B-dlKIhi.js","./editingTools-JEBHcv68.js","./Graphic-Dt0LgVGU.js","./Clonable-Z-AWS-16.js","./opacityUtils-Dim20wpZ.js","./ActionToggle-D7439N1A.js","./Identifiable-BHVfzH03.js","./typeUtils-B6WBEKDM.js","./collectionUtils-CTT-51g7.js","./aaBoundingBox-Dw3yBk2f.js","./SnappingVisualizer2D-xvUExsy2.js","./vec2-ChnYg_BJ.js","./common-DQOJ18NT.js","./vec2f64-Dy6m9Nrb.js","./enums-BTM-fOHQ.js","./RightAngleSnappingHint-BepRvd6S.js","./timeUtils-C1c_L2Fd.js","./vec32-Dvg_eL9J.js","./Query-B_2mhyL4.js","./Field-BDG0QV_T.js","./fieldType-CBeoJWlv.js","./FullTextSearch-CBnxSwz4.js","./TimeExtent-BO6BsF_x.js","./InputManager-DZ3jJnlx.js","./Queue-BQesTh_6.js","./signal-CySMLEX9.js","./keybindings-CTmT1RTo.js","./utils-BjSXFjBJ.js","./Version-Cd3TlGH0.js","./vec42-YcqnINSP.js","./vec4f64-o2zAXfmz.js","./plane-CpXmOyqq.js","./mat3f64-BBpwCtoL.js","./mat4f64-Dk4dwAN8.js","./quatf64-CCm9z-pX.js","./mathUtils-BgCEaV43.js","./sphere-Cin5efBj.js","./mat4-Fi6iAz29.js","./mat3-CR8GKnhD.js","./elevationInfoUtils-D26wVF2d.js","./unitConversionUtils-rg07EgOm.js","./lengthUtils-_77UiyVF.js","./geometry2dUtils-D9Oax6Qb.js","./SnappingVisualizer-bfo0JaXd.js","./PointSnappingHint-DWAfJfrj.js","./editPlaneUtils-Cjvg8foP.js","./UpdatingHandles-CzJ4c3KT.js","./coordinateFormatter-sQ_KRFCi.js","./GraphicsLayer-D3KyXpUc.js","./GraphicsCollection-BJ5Nr2H8.js","./Layer-DH4_Pn8a.js","./ScaleRangeLayer-Cnzwr9PT.js","./layerContainerType-C5CzMsLd.js","./jsonUtils-DZz5FrgB.js","./utils-DYurMneM.js","./mat4f32-DcsiF_Rp.js","./ElevationInfo-BPOqhCue.js","./dehydratedFeatureComparison-j4L0peJx.js","./createUtils-BLSknDZf.js","./Circle-DhDdChqp.js","./geometryEngine-CLtm9OQA.js","./geometryEngineBase-B0ZyeKAX.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-DcIAHEVL.js","./surfaceCoordinateSystems-DVyjKZ7x.js","./memoize-DmxaQ-k8.js","./ReactiveSet-DgPcISC1.js","./diffUtils-BanfihCO.js","./ViewingMode-Dodu7ZZk.js","./DrawingMode-Cvvf0VVz.js","./EditGeometryOperations-CAMJU2Wn.js","./dragEventPipeline-Dj33NxJd.js","./meshVertexSpaceUtils-AgAbm20L.js","./MeshLocalVertexSpace-CnHk-qPr.js","./hydratedFeatures-CNHxsqRS.js","./angularMeasurementUtils-hHgHLVYP.js","./SketchLabelOptions-DnwnoaXO.js","./SnappingContext-lR2hMWGP.js","./SnappingDragPipelineStep-dx2sltqU.js","./Scheduler-i_u8qdlN.js","./debugFlags-B1LM_Apo.js","./SnappingOperation-D1hMlFdT.js","./mat2d-D9DBP-jx.js","./mat2df64-CBKYtunK.js","./quat-CP7JhygC.js","./helpMessageUtils-2XpUG8Xk.js","./helpMessageUtils3d-BpdsCwtg.js","./SketchTooltipInfo-BnqQiqHr.js","./MeshTransform-mu8wTSqx.js","./axisAngleDegrees-DdLZENJj.js","./themeUtils-C3zvZbsE.js","./a11yUtils-ClKbIIe-.js","./quantityFormatUtils-Bo0-7oki.js","./directionModeIcons-Br5woIHu.js","./automaticAreaMeasurementUtils-BdEZtLRA.js","./geodesicMeasurementUtils-B-7dBAnY.js","./euclideanAreaMeasurementUtils-ButVfzxp.js","./earcut-D9gy186-.js","./triangle-B1tKFm7z.js","./lineSegment-v806maA5.js","./euclideanLengthMeasurementUtils-Bcu5HQVu.js","./spatialReferenceEllipsoidUtils-DBqQpPRa.js","./geodesicAreaMeasurementUtils-CfJYiWyy.js","./automaticLengthMeasurementUtils-4SpTQo4O.js","./geodesicLengthMeasurementUtils-B4BXDmbs.js","./InteractiveToolBase-rZBtMOMv.js","./interfaces-D6pIddIh.js","./SketchOptions-D7mgFOwQ.js","./boundedPlane-DuGhiiFM.js","./cimSymbolUtils-DzhKvmq_.js","./utils-UPZJIDfz.js","./defaultCIMValues-Bb-CUowV.js","./GraphicManipulator-D7rJmkQr.js","./defaults-FkBa0ybj.js","./defaultsJSON-GKolV7NZ.js","./drapedUtils--IsYcWNz.js","./colorUtils-DaPfwnk3.js","./drawUtils-BdkQO_cU.js","./hitTestSelectUtils-UXJPjatw.js","./screenUtils-BWEEmpSb.js","./SnappingManager-DoaI-UDx.js","./viewUtils-CV6QVz7y.js","./TextOverlayItem-Bocd_PuB.js","./formatUtils-DK6L-D15.js","./number-QOqKffTG.js","./substitute-CvdjmBYq.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./index-4eY77cms.js";import{g as C,r as l,m as i,a as m,G as O,s as Y,N as R,aR as Z}from"./Accessor-BmwT4B0c.js";import{l as x}from"./SketchOptions-D7mgFOwQ.js";import{e as ee}from"./directionModeIcons-Br5woIHu.js";import{O as z,c as H,n,e as D,T as te}from"./jsxFactory-Cnml7uXM.js";import{e as W}from"./globalCss-vQlnDsEX.js";import{r as j,t as q,o as S}from"./LabeledSwitch--Ta60UQe.js";import{V as J,d as F,P as G,a as le}from"./reactiveUtils-XM7cS2OP.js";import{d as K,p as ie}from"./SnappingManager-DoaI-UDx.js";import{d as oe,p as Q}from"./layerListUtils-BIu86t6C.js";import{v as ne}from"./LayerListViewModel-DogEbPNW.js";import{O as se}from"./ListItem-DomCK2qd.js";let g=class extends C{constructor(t){super(t),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new j({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};l([i({type:Boolean,nonNullable:!0})],g.prototype,"enabledToggle",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"featureEnabledToggle",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"gridEnabledToggle",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"header",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"layerList",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"gridControls",void 0),l([i({type:j,nonNullable:!0})],g.prototype,"gridControlsElements",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"layerListToggleLayersButton",void 0),l([i({type:Boolean,nonNullable:!0})],g.prototype,"selfEnabledToggle",void 0),g=l([m("esri.widgets.support.SnappingControls.VisibleElements")],g);const V=g;let f=class extends C{constructor(t){super(t),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};l([i({type:Boolean,nonNullable:!0})],f.prototype,"directionModePicker",void 0),l([i({type:Boolean,nonNullable:!0})],f.prototype,"header",void 0),l([i({type:Boolean,nonNullable:!0})],f.prototype,"labelsToggle",void 0),l([i({type:Boolean,nonNullable:!0})],f.prototype,"tooltipsToggle",void 0),f=l([m("esri.widgets.support.SketchTooltipControls.VisibleElements")],f);const U=f,I="esri-sketch-tooltip-controls",B={base:I,block:`${I}__block`,blockContent:`${I}__block-content`,radioButtonLabelWrapper:`${I}__radio-button-label-wrapper`};let L=class extends z{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new U,this.sketchOptions=new x,this.viewType=void 0,this._onTooltipsEnabledChange=o=>{this.sketchOptions.tooltips.enabled=o},this._onLabelsEnabledChange=o=>{this.sketchOptions.labels.enabled=o},this._onDirectionModeChange=o=>{this.sketchOptions.values.directionMode=o.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([H({block:()=>c(()=>import("./index-C6d66FVb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]),import.meta.url),label:()=>c(()=>import("./index--OBudxYA.js"),__vite__mapDeps([44,2,3,4,5,6,7,8,9,10,11,12,13,45,20,14]),import.meta.url),icon:()=>c(()=>import("./index-DwIhxbHs.js").then(e=>e.i),__vite__mapDeps([21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19]),import.meta.url),"radio-button":()=>c(()=>import("./index-DgqiEeTY.js"),__vite__mapDeps([46,2,3,4,5,6,7,8,9,10,11,12,13,17,18,43,20,14,47,25,45,27]),import.meta.url),"radio-button-group":()=>c(()=>import("./index-DanFJwSx.js"),__vite__mapDeps([48,21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19,49,27,50]),import.meta.url)}),q()])}render(){const{label:e,visibleElements:t}=this,o=this._renderContent();return n("div",{"aria-label":e,class:this.classes(B.base,W.widget)},o?n("calcite-block",{class:B.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},n("div",{class:B.blockContent,key:"content"},o)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,o=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(O);return o.length===0?null:o}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return n(S,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return n(S,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:o}=t.values;return n("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,n("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:o,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",o,e.directionModeRelative),this._renderDirectionModeOption("absolute",o,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,o){return n("calcite-label",{key:e,layout:"inline",scale:"s"},n("calcite-radio-button",{checked:e===t,scale:"s",value:e}),n("div",{class:B.radioButtonLabelWrapper,key:"label-wrapper"},n("calcite-icon",{icon:ee[e],scale:"s"}),o))}};l([i()],L.prototype,"label",null),l([i({type:U,nonNullable:!0})],L.prototype,"visibleElements",void 0),l([i(),D("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],L.prototype,"messages",void 0),l([i({nonNullable:!0,type:x})],L.prototype,"sketchOptions",void 0),l([i({type:String})],L.prototype,"viewType",void 0),L=l([m("esri.widgets.support.SketchTooltipControls")],L);const Te=L,A=e=>re(e)||ae(e),re=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},ae=e=>{const t=oe(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(const o of e[t])if(A(o))return!0}return!1},$=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(o=>$(o,t)!==!1)&&"children");var P;let v=P=class extends se{constructor(e){super(e),this.children=new J,this.parent=null}get enabled(){const{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,o=!1;for(const s of e){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?t=!0:s.enabled==="disabled"&&(o=!0),o&&t)return"indeterminate"}return o?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>{var t;return[(t=e.layer)==null?void 0:t.id,...e.childLayerIds]})}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(o=>o.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(A);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>Q(t)?new P({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(O).reverse()}};l([i()],v.prototype,"enabled",null),l([i()],v.prototype,"children",void 0),l([i()],v.prototype,"childLayerIds",null),l([i()],v.prototype,"featureSource",null),l([i({constructOnly:!0})],v.prototype,"getFeatureSnappingSources",void 0),l([i()],v.prototype,"parent",void 0),v=P=l([m("esri.widgets.support.SnappingControls.SnappingListItem")],v);let w=class extends ne{constructor(){super(...arguments),this.featureSnappingSources=new J}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var t;return!((t=e.children)!=null&&t.length)})}_compileList(){var s,r;const e=(r=(s=this.view)==null?void 0:s.map)==null?void 0:r.layers;if(!e)return;const t=e.filter(A);this._watchLayersListMode(t);const o=this._getViewableLayers(t);o!=null&&o.length?(this._createNewItems(o),this._removeItems(o),this._sortItems(o)):this._removeAllItems()}_createListItem(e){return new v({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};l([i()],w.prototype,"featureSnappingSources",void 0),l([i()],w.prototype,"operationalItems",void 0),l([i()],w.prototype,"operationalItemsFlat",null),l([i()],w.prototype,"selectableItems",null),w=l([m("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],w);let _=class extends C{constructor(e){super(e),this.layerListViewModel=new w,this.snappingOptions=new K,this.view=null}initialize(){this.addHandles([F(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},G),F(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:t})=>{e.featureSnappingSources=t},G)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>t.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>!t.enabled)}get layersEnabledCount(){var e,t;return((t=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:t.filter(o=>o.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e==null||e.forEach(o=>t?this.enableSnappingForLayer(o):this.disableSnappingForLayer(o))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:t})=>{const o=t==null?void 0:t.id;e?this.enableSnappingForLayer(o):this.disableSnappingForLayer(o)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)Q(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){var s;const t=(s=this.layerListViewModel.operationalItemsFlat.find(r=>{var a;return((a=r.layer)==null?void 0:a.id)===e}))==null?void 0:s.layer;if(!t)throw new Y("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const o=new ie({layer:t});return this.snappingOptions.featureSources.add(o),o}};l([i()],_.prototype,"allLayersEnabled",null),l([i()],_.prototype,"allLayersDisabled",null),l([i({constructOnly:!0})],_.prototype,"layerListViewModel",void 0),l([i()],_.prototype,"layersEnabledCount",null),l([i({type:K,nonNullable:!0})],_.prototype,"snappingOptions",void 0),l([i()],_.prototype,"state",null),l([i()],_.prototype,"view",void 0),_=l([m("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],_);const pe=_,b="esri-snapping-controls",y={base:b,container:`${b}__container`,toggleBlock:`${b}__toggle-block`,layerListBlock:`${b}__layer-list-block`,layerList:`${b}__layer-list`,layerListFilter:`${b}__layer-list__filter`,layerListButton:`${b}__layer-list__button`,layerListItem:`${b}__layer-list__item`,layerListGroup:`${b}__layer-list__group`,nestedContainer:`${b}__nested-container`};let p=class extends z{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new V,this._enableSnappingSwitchChange=a=>{this.snappingOptions.enabled=a},this._featureEnabledSwitchChange=a=>{this.snappingOptions.featureEnabled=a},this._gridEnabledSwitchChange=a=>{this.snappingOptions.gridEnabled=a,a&&this._startLoadGrid()},this._selfEnabledSwitchChange=a=>{this.snappingOptions.selfEnabled=a},this._onToggleLayersButtonClick=a=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),te(a.target)};const{snappingOptions:o,view:s,viewModel:r}=e;this.viewModel=r??(this._defaultViewModel=new pe({snappingOptions:o,view:s}))}normalizeCtorArgs(e){const{snappingOptions:t,view:o,viewModel:s,...r}=e;return r}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=R(this._defaultViewModel))}loadDependencies(){return Promise.all([H({block:()=>c(()=>import("./index-C6d66FVb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]),import.meta.url),button:()=>c(()=>import("./index-jjUP6Yam.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,21,20,19,17,18,38,47,25,45,27,32]),import.meta.url),input:()=>c(()=>import("./index-pyEU_klK.js"),__vite__mapDeps([52,21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19,49,53,54,18,31,17,38,47,25,26,45,27,55,32,50,15,56]),import.meta.url),list:()=>c(()=>import("./index-BCDLx0rN.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,31,21,49,53,52,54,38,47,25,26,45,27,55,32,50,56,58,59,24,60]),import.meta.url),"list-item":()=>c(()=>import("./index-B0pN5y8B.js"),__vite__mapDeps([61,21,2,3,4,5,6,7,8,9,10,11,12,13,20,14,19,22,17,18,23,24,25,26,27,28,29,1,15,30,31,32,33,34,35,36,60,62]),import.meta.url),checkbox:()=>c(()=>import("./index-CtvJE4Qe.js"),__vite__mapDeps([63,2,3,4,5,6,7,8,9,10,11,12,13,17,18,20,14,47,25,26,45,27]),import.meta.url),loader:()=>c(()=>import("./index-CMxz6F2k.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)}),q()])}initialize(){this.addHandles(F(()=>{var e;return((e=this.view)==null?void 0:e.type)==="2d"&&!!this.view.grid},e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=R(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return n("div",{"aria-label":e,class:this.classes(y.base,W.widget)},n("div",{class:y.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,o=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(t==null?void 0:t.type)==="2d"?this._renderGridEnabledToggle():null].filter(O),s=[e.enabledToggle?this._renderEnabledToggle():null,o.length>0?n("div",{class:y.nestedContainer},o):null].filter(O);return s.length===0?null:n("calcite-block",{class:y.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",label:this.label,open:!0},s)}_renderEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return n(S,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){var T;if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,o=t.layerListViewModel.operationalItems.length>9?n("calcite-input",{class:y.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:({currentTarget:{value:h}})=>{this._layerListFilter=h===""?null:new RegExp(h,"i")}}):null,s=this._secondaryElementsDisabled,r=this.layerListOpen&&!s,a=(T=t.layerListViewModel.operationalItems)==null?void 0:T.find(h=>!!h.children.length);return n("calcite-block",{class:y.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:r,onCalciteBlockToggle:h=>this.layerListOpen=h.currentTarget.open},o,this._renderToggleLayersButton(),n("calcite-list",{class:y.layerList,displayMode:a?"nested":"flat",label:e==null?void 0:e.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){var M;const{view:e,visibleElements:t,snappingManager:o,snappingOptions:s,_openAndReady:r}=this,{gridEnabled:a,enabled:T}=s;(r||(e==null?void 0:e.type)==="2d"&&e.grid)&&this._startLoadGrid();const h=(M=this._gridLoadTask)==null?void 0:M.value,k=h&&(e==null?void 0:e.type)==="2d"&&n(h,{snappingManager:o,snappingOptions:s,view:e,visibleElements:t.gridControlsElements});return n("calcite-block",{class:y.layerListBlock,collapsible:!0,disabled:!a||!T,heading:this.messages.gridOptionsHeading,key:"grid-block",open:r,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},k??n("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=le(async()=>(await c(async()=>{const{default:t}=await import("./GridControls-Be6_piCa.js");return{default:t}},__vite__mapDeps([64,7,8,3,65,66,67,4,5,6,9,11,10,12,68,69,70,71,72,73,2,13,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222]),import.meta.url)).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(o=>{switch(t?$(o,t):null){case"children":{const s=o.children.filter(r=>$(r,t)!==!1);return this._renderLayerListItemGroup(o,s)}case"self":case null:return this._renderLayerListItemOrGroup(o);case!1:return $(o.parent,t)==="self"?this._renderLayerListItemOrGroup(o):null}}).toArray().filter(O)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,o=e?t.disableAllLayers:t.enableAllLayers;return n("calcite-button",{appearance:"transparent",class:y.layerListButton,label:o,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},o)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,o=e.title||t,s=()=>{var r;this.viewModel.toggleSnappingForLayers([(r=e.layer)==null?void 0:r.id],e.enabled!=="enabled")};return n("calcite-list-item",{class:y.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:o,onCalciteListItemSelect:r=>{r.stopPropagation(),s()}},n("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:s}))}_renderLayerListItemGroup(e,t){const{messages:o}=this,{children:s,title:r}=e,a=r||o.untitledLayer,T=r&&r!==""?r:Z(),h=!!(t!=null&&t.length),k=t??s,M=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")},X=k==null?void 0:k.find(N=>!!N.children.length);return n("calcite-list-item",{class:y.layerListGroup,key:T,label:a,open:h,onCalciteListItemSelect:N=>{N.stopPropagation(),M()}},n("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:M}),n("calcite-list",{displayMode:X?"nested":"flat",label:o==null?void 0:o.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(k)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};l([i()],p.prototype,"_defaultViewModel",void 0),l([i()],p.prototype,"_layerListFilter",void 0),l([i()],p.prototype,"_gridLoadTask",void 0),l([i()],p.prototype,"_openAndReady",null),l([i()],p.prototype,"label",null),l([i({type:Boolean,nonNullable:!0})],p.prototype,"layerListOpen",void 0),l([i({type:Boolean,nonNullable:!0})],p.prototype,"gridOptionsOpen",void 0),l([i(),D("esri/widgets/support/SnappingControls/t9n/SnappingControls")],p.prototype,"messages",void 0),l([i(),D("esri/t9n/common")],p.prototype,"messagesCommon",void 0),l([i()],p.prototype,"snappingOptions",null),l([i()],p.prototype,"snappingManager",void 0),l([i()],p.prototype,"view",null),l([i()],p.prototype,"viewModel",null),l([i({type:V,nonNullable:!0})],p.prototype,"visibleElements",void 0),l([i()],p.prototype,"_enabledToggleDisabled",null),l([i()],p.prototype,"_secondaryElementsDisabled",null),p=l([m("esri.widgets.support.SnappingControls")],p);const ke=p;let u=class extends C{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};l([i({type:Boolean,nonNullable:!0})],u.prototype,"point",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"polyline",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"polygon",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"rectangle",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"circle",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"multipoint",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"mesh",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"freehandPolyline",void 0),l([i({type:Boolean,nonNullable:!0})],u.prototype,"freehandPolygon",void 0),u=l([m("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],u);let E=class extends C{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};l([i({nonNullable:!0})],E.prototype,"rectangle-selection",void 0),l([i({nonNullable:!0})],E.prototype,"lasso-selection",void 0),l([i({nonNullable:!0})],E.prototype,"custom-selection",void 0),E=l([m("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],E);let d=class extends C{constructor(e){super(e),this.createTools=new u,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new E,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new V,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};l([i({type:u,nonNullable:!0})],d.prototype,"createTools",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"directionModePicker",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"duplicateButton",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"deleteButton",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"selectionCountLabel",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"labelsToggle",void 0),l([i({type:E,nonNullable:!0})],d.prototype,"selectionTools",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"settingsMenu",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"snappingControls",void 0),l([i({type:V,nonNullable:!0})],d.prototype,"snappingControlsElements",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"tooltipsToggle",void 0),l([i({type:Boolean,nonNullable:!0})],d.prototype,"undoRedoMenu",void 0),d=l([m("esri.widgets.Sketch.VisibleElements")],d);export{ke as f,Te as k,U as l,V as n,d as p,u as s};
