import{e as n}from"./Evented-CXIxDjmW.js";import{c as h,b as d}from"./subclass-BR3PhgZG.js";import{w as c}from"./Extent-B4rrMrqp.js";import{N as l}from"./DynamicLayerView3D-BCVt6pmt.js";import{m as f}from"./WMSLayerView-BkSmmRWw.js";import"./Accessor-D6mNnsWy.js";import"./Point-TlcsOcXV.js";import"./jsonMap-DCC6W5ex.js";import"./writer-3zufXUNV.js";import"./assets-BNizZMOZ.js";import"./index-BVncS3aY.js";import"./reactiveUtils-BFQ0BtrB.js";import"./shared-B3wH2qpO.js";import"./Polyline-BQFeqYXi.js";import"./mathUtils-ClvKsMak.js";import"./RenderGeometry-C4TY81Cr.js";import"./vec2f64-Diu2Kaa8.js";import"./vec3f32-Cw9Q6TO_.js";import"./DoubleArray-CF_CpVBS.js";import"./Texture-DjTh7HwY.js";import"./NormalAttribute.glsl-Dqf1UPF9.js";import"./interfaces-B8ge7Jg9.js";import"./BindType-BmZEZMMh.js";import"./compilerUtils-BA04t1lN.js";import"./VertexAttribute-BnAa5VW0.js";import"./Util-BMqL_pkg.js";import"./vec42-B1mBkh1w.js";import"./vec4f64-CBQL1T0x.js";import"./enums-BlUEVwJR.js";import"./Texture-BbJIOVx_.js";import"./basicInterfaces-wONHx_SN.js";import"./vec2-B_ymkwGp.js";import"./mat3-DRqs2t5W.js";import"./mat3f64-BBpwCtoL.js";import"./mat4f64-Dk4dwAN8.js";import"./mat4-ybYUU6jq.js";import"./ShaderTechniqueConfiguration-D3UbJ2mX.js";import"./doublePrecisionUtils-B0owpBza.js";import"./Indices-B6BGScAS.js";import"./Material-BN_i9QRJ.js";import"./ViewingMode-Dodu7ZZk.js";import"./triangle-DtfDEZcP.js";import"./sphere-DIv2hmik.js";import"./plane-Bz78OrLf.js";import"./quatf64-BrpT0VRp.js";import"./mathUtils-kvswLROa.js";import"./lineSegment-A3_mEhFF.js";import"./lengthUtils-vgIBtB6M.js";import"./renderState-PYzNpa1K.js";import"./requestImageUtils-BkbekjsQ.js";import"./orientedBoundingBox-WyW1LZfF.js";import"./quat-ChS85qAG.js";import"./spatialReferenceEllipsoidUtils-DuE2W35w.js";import"./computeTranslationToOriginAndRotation-CFxYfzBj.js";import"./projectBuffer-iyGwL2dv.js";import"./geodesicConstants-kj1AtlGg.js";import"./ElevationProvider-eMOI1-3B.js";import"./boundedPlane-Xr4Vx-V9.js";import"./verticalOffsetUtils-CU5zOPGb.js";import"./unitConversionUtils-BUA_O87q.js";import"./hydratedFeatures-DHwl8sGq.js";import"./geometry-CnaxvJsv.js";import"./Graphic-Bi5hWHps.js";import"./PopupTemplate-D8mXPxzU.js";import"./Clonable-cKbRam6-.js";import"./fieldUtils-C5R42-PY.js";import"./intl-CArXn1et.js";import"./Promise-CZrWwByK.js";import"./enumeration--HlxOQ_N.js";import"./Color-DDUWtbqR.js";import"./colorUtils-CS9vdHXB.js";import"./ActionToggle-C0Z1k2jc.js";import"./Identifiable-BLvpQbOc.js";import"./symbols-CfvYGR4J.js";import"./TextSymbol-zZq0BA1M.js";import"./screenUtils-PfxkaaMN.js";import"./materialUtils-CQ3JLQ1x.js";import"./opacityUtils-BT7mQkwC.js";import"./aaBoundingBox-BGxkJAW0.js";import"./persistableUrlUtils-Dx61-x4K.js";import"./collectionUtils-Dm1icNvk.js";import"./Portal-DCqdz-K4.js";import"./jsonUtils-DtWlwXHP.js";import"./projectVectorToVector-BLdiwuTJ.js";import"./projectPointToVector-C-hGM2ap.js";import"./projection-tSh-0UvX.js";import"./frustum-6KI4j9vx.js";import"./axisAngleDegrees-CHCWDIqP.js";import"./weather-B51D8kuv.js";import"./Scheduler-CDoWuxMK.js";import"./signal-DzOfzcfh.js";import"./debugFlags-B3L9P_UW.js";import"./Float4DrawUniform-CWdxHXQ-.js";import"./NestedMap-DgiGbX8E.js";import"./Octree-BnKLop8B.js";import"./InterleavedLayout-UIhsB8jd.js";import"./BufferView-B7Z-dzh4.js";import"./floatRGBA-C8rGFKJ0.js";import"./Intersector-pThUjfQo.js";import"./glUtil-C6KhMg1m.js";import"./VertexElementDescriptor-BOD-G50G.js";import"./MemCache-C6WUx-5V.js";import"./VertexArrayObject-Cwnso4un.js";import"./BufferObject-CjYoWxgZ.js";import"./LayerView3D-B6WbYlXn.js";import"./heightModelInfoUtils-C5nNknML.js";import"./HeightModelInfo-CzO-kRMK.js";import"./arcgisLayerUrl-ETqee4Bd.js";import"./projectExtentUtils-C9TgtdUr.js";import"./geometryServiceUtils-C-iODloP.js";import"./project-DXhIgRZA.js";import"./utils-Blh5cXWv.js";import"./utils-Bh7lx_TM.js";import"./ImageMaterial.glsl-CE7Ov3rX.js";import"./VertexColor.glsl-BROYASAm.js";import"./DefaultLayouts-Bz7P2wdj.js";import"./ColorMaterial.glsl-8RSfQ59m.js";import"./LayerView-CbIY_4n2.js";import"./UpdatingHandles-CMtXpTiG.js";import"./layerViewUtils-D2JqIDZ8.js";import"./RefreshableLayerView-BClKL0FL.js";import"./ExportWMSImageParameters-BI_JqfG1.js";import"./timeSupport-DeLDxidC.js";import"./timeUtils-FF8YLCMd.js";import"./TimeExtent-Dl-qaORu.js";import"./timeUtils-DQR2jUPL.js";import"./utils-CXgSw6Sd.js";import"./tagSymbols-BPcGfZon.js";let o=class extends f(l){constructor(){super(...arguments),this.type="wms-3d"}initialize(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new h("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view"))),this._updatingHandles.add(()=>{var t;return(t=this.exportImageParameters)==null?void 0:t.version},()=>{this._updatingHandles.addPromise(this.refreshDebounced())})}createFetchPopupFeaturesQuery(t){const p=this.findExtentInfoAt(t),i=p.extent,r=new c(i[0],i[1],i[2],i[3],this._spatialReference),m=p.imageSize,e=m.width,a=m.height,s=r.width/e;return{extent:r,width:e,height:a,x:Math.round((t.x-r.xmin)/s),y:Math.round((r.ymax-t.y)/s)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};o=n([d("esri.views.3d.layers.WMSLayerView3D")],o);const Ai=o;export{Ai as default};
