function ao(t,e,r,n){var s,o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,r,i):s(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function co(t,e){return function(r,n){e(r,n,t)}}function lo(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(f){try{u(n.next(f))}catch(h){i(h)}}function c(f){try{u(n.throw(f))}catch(h){i(h)}}function u(f){f.done?o(f.value):s(f.value).then(a,c)}u((n=n.apply(t,[])).next())})}function uo(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}return e}var Wr=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function fo(t){function e(o){t.error=t.hasError?new Wr(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}const Gr={remove:()=>{}};function y(t){return t?{remove(){t&&(t(),t=void 0)}}:Gr}function Ue(t){t.forEach(e=>e==null?void 0:e.remove())}function ho(t){Ue(t),t.length=0}function Hr(t){return y(()=>Ue(t))}function po(t){return y(()=>{var e;return(e=t())==null?void 0:e.remove()})}function go(t){return y(()=>t==null?void 0:t.abort())}function yo(t){return y(t!=null?()=>t.destroy():void 0)}function Jr(t){return{setTimeout:(e,r)=>{const n=t.setTimeout(e,r);return y(()=>t.clearTimeout(n))}}}const Kr=Jr(globalThis);let k;function l(t){return typeof k[t]=="function"?k[t]=k[t](globalThis):k[t]}var Me,Ie,De,xe;k=(Me=globalThis.dojoConfig)!=null&&Me.has||(Ie=globalThis.esriConfig)!=null&&Ie.has?{...(De=globalThis.dojoConfig)==null?void 0:De.has,...(xe=globalThis.esriConfig)==null?void 0:xe.has}:{},l.add=(t,e,r,n)=>{(n||k[t]===void 0)&&(k[t]=e),r&&l(t)},l.cache=k,l.add("big-integer-warning-enabled",!0),l.add("esri-deprecation-warnings",!0),l.add("esri-tests-disable-screenshots",!1),l.add("esri-tests-use-full-window",!1),l.add("esri-tests-post-to-influx",!0),l.add("esri-cim-animations-enable-status","enabled"),l.add("esri-cim-animations-spotlight",!1),l.add("esri-cim-animations-freeze-time",!1),l.add("enable-feature:multiple-highlights",!0),(()=>{var e;l.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(l.add("host-browser",t),l.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),l.add("dom",t),l("host-browser")){const r=navigator,n=r.userAgent,s=r.appVersion,o=parseFloat(s);if(l.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),l.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),l.add("khtml",s.includes("Konqueror")?o:void 0),l.add("edge",parseFloat(n.split("Edge/")[1])||void 0),l.add("opr",parseFloat(n.split("OPR/")[1])||void 0),l.add("webkit",!l("wp")&&!l("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),l.add("chrome",!l("edge")&&!l("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),l.add("android",!l("wp")&&parseFloat(n.split("Android ")[1])||void 0),l.add("safari",!s.includes("Safari")||l("wp")||l("chrome")||l("android")||l("edge")||l("opr")?void 0:parseFloat(s.split("Version/")[1])),l.add("mac",s.includes("Macintosh")),!l("wp")&&/(iPhone|iPod|iPad)/.test(n)){const i=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",c=parseFloat(a.replace(/_/,".").replaceAll("_",""));l.add(i,c),l.add("ios",c)}l("webkit")||(!n.includes("Gecko")||l("wp")||l("khtml")||l("edge")||l.add("mozilla",o),l("mozilla")&&l.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),r=/iPhone/i.test(t);e&&l.add("esri-mobile",e),r&&l.add("esri-iPhone",r),l.add("esri-geolocation",!!navigator.geolocation)}l.add("esri-wasm","WebAssembly"in globalThis),l.add("esri-performance-mode-frames-between-render",20),l.add("esri-force-performance-mode",!1),l.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),l.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),l.add("esri-atomics","Atomics"in globalThis),l.add("esri-workers","Worker"in globalThis),l.add("web-feat:cache","caches"in globalThis),l.add("esri-workers-arraybuffer-transfer",!l("safari")||Number(l("safari"))>=12),l.add("workers-pool-size",8),l.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),l.add("featurelayer-simplify-payload-size-factors",[1,1,4]),l.add("featurelayer-fast-triangulation-enabled",!0),l.add("featurelayer-animation-enabled",!0),l.add("featurelayer-snapshot-enabled",!0),l.add("featurelayer-snapshot-point-min-threshold",8e4),l.add("featurelayer-snapshot-point-max-threshold",4e5),l.add("featurelayer-snapshot-point-coverage",.1),l.add("featurelayer-query-max-depth",4),l.add("featurelayer-query-pausing-enabled",!1),l.add("featurelayer-advanced-symbols",!1),l.add("featurelayer-pbf",!0),l.add("featurelayer-pbf-statistics",!1),l.add("feature-layers-workers",!0),l.add("feature-polyline-generalization-factor",1),l.add("mapview-transitions-duration",200),l.add("mapview-essential-goto-duration",200),l.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),l.add("mapserver-pbf-version-support",10.81),l.add("mapservice-popup-identify-max-tolerance",20),l.add("request-queue-concurrency-hosted",16),l.add("request-queue-concurrency-non-hosted",4),l.add("curve-densification-coarse-segments",128),l.add("curve-densification-max-segments",2e3),l.add("curve-densification-min-segments",3),l.add("curve-densification-pixels-per-segment",16),l.add("view-readyState-waiting-delay",1e3),l.add("gradient-depth-bias",.01),l.add("gradient-depth-epsilon",1e-8),l("host-webworker")||l("host-browser")&&(l.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),l.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{l.add("esri-image-decode",!0,!0,!0)}).catch(()=>{l.add("esri-image-decode",!1,!0,!0)})}return!1}),l.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function mo(t){}function $o(t){return()=>t}function bo(t){return t}let J=class S{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*S._m}getInt(){return this._seed=(S._a*this._seed+S._c)%S._m,this._seed}getFloat(){return this.getInt()/(S._m-1)}getIntRange(e,r){return Math.round(this.getFloatRange(e,r))}getFloatRange(e,r){const n=r-e;return e+this.getInt()/S._m*n}};J._m=2147483647,J._a=48271,J._c=0;const Yr=1.5,vo=1/Yr,_o=.5;function wo(t,e){if(!e)return t;for(const r of e)t.push(r);return t}function ze(t){return t}function Zr(t,e=ze){if(!t||t.length===0)return;let r=t[0],n=e(r);for(let s=1;s<t.length;++s){const o=t[s],i=Number(e(o));i>n&&(n=i,r=o)}return r}function Ao(t,e=ze){return Zr(t,r=>-e(r))}function To(t,e){return e?t.filter((r,n,s)=>s.findIndex(e.bind(null,r))===n):Array.from(new Set(t))}function Xr(t,e,r){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(r){for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ko(t,e){let r=t.length!==e.length;r&&(t.length=e.length);for(let n=0;n<e.length;++n)t[n]!==e[n]&&(t[n]=e[n],r=!0);return r}function Oo(t,e,r){let n,s;return r?(n=e.filter(o=>!t.some(i=>r(i,o))),s=t.filter(o=>!e.some(i=>r(i,o)))):(n=e.filter(o=>!t.includes(o)),s=t.filter(o=>!e.includes(o))),{added:n,removed:s}}function So(t){return t&&typeof t.length=="number"}function Eo(t,e){const r=t.length;if(r===0)return[];const n=[];for(let s=0;s<r;s+=e)n.push(t.slice(s,s+e));return n}function jo(t,e,r){const n=t.length;let s=0,o=n-1;for(;s<o;){const a=s+Math.floor((o-s)/2);e>t[a]?s=a+1:o=a}const i=t[s];return r?e>=t[n-1]?-1:i===e?s:s-1:i===e?s:-1}let Fe=class{constructor(){this.last=0}};const Le=new Fe;function St(t,e,r,n){n=n||Le;const s=Math.max(0,n.last-10);for(let i=s;i<r;++i)if(t[i]===e)return n.last=i,i;const o=Math.min(s,r);for(let i=0;i<o;++i)if(t[i]===e)return n.last=i,i;return-1}function Co(t,e,r,n){const s=t.length,o=St(t,e,s,n);if(o!==-1)return t[o]=t[s-1],t.pop(),e}const v=new Set;function Qr(t,e,r=t.length,n=e.length,s,o){if(n===0||r===0)return r;v.clear();for(let a=0;a<n;++a)v.add(e[a]);s=s||Le;const i=Math.max(0,s.last-10);for(let a=i;a<r;++a)if(v.has(t[a])&&(o==null||o.push(t[a]),v.delete(t[a]),t[a]=t[r-1],--r,--a,v.size===0||r===0))return v.clear(),r;for(let a=0;a<i;++a)if(v.has(t[a])&&(o==null||o.push(t[a]),v.delete(t[a]),t[a]=t[r-1],--r,--a,v.size===0||r===0))return v.clear(),r;return v.clear(),r}function Po(t,e){let r=0;for(let n=0;n<t.length;++n){const s=t[n];e(s,n)&&(t[r]=s,r++)}t.length=r}function Mo(t,e,r){const n=t.length;if(e>=n)return t.slice();const s=qe(r),o=new Set,i=[];for(;i.length<e;){const a=Math.floor(s()*n);o.has(a)||(o.add(a),i.push(t[a]))}return i}function qe(t){return t?(se.seed=t,()=>se.getFloat()):Math.random}const se=new J;function Io(t,e){const r=qe(e);for(let n=t.length-1;n>0;n--){const s=Math.floor(r()*(n+1)),o=t[n];t[n]=t[s],t[s]=o}return t}function tn(t,e){const r=t.indexOf(e);return r!==-1?(t.splice(r,1),e):null}function Do(t,e){return t!=null}const xo=[];function Ro(t){return t instanceof ArrayBuffer}function Wt(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function Be(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function Ve(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function Gt(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function We(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function Ht(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function Ge(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function ft(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function ht(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Uo(t){return"buffer"in t}const zo=1024;function Fo(t){return ht(t)||ft(t)||Ht(t)||Gt(t)||Wt(t)}function Lo(t){return ht(t)||ft(t)}function qo(t){return ht(t)?179769e303:ft(t)?3402823e32:Ge(t)?4294967295:We(t)?65535:Be(t)||Ve(t)?255:Ht(t)?2147483647:Gt(t)?32767:Wt(t)?127:256}function Bo(t,e){let r;for(r in t)t.hasOwnProperty(r)&&t[r]===void 0&&delete t[r];return t}function A(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Ye(t);if(e!=null)return e;if(He(t))return t.clone();if(Je(t))return t.map(A);if(Ke(t))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const n of Object.getOwnPropertyNames(t))r[n]=A(t[n]);return r}function oe(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=Ye(t);if(e!=null)return e;if(Je(t)){let n=!0;const s=t.map(o=>{const i=oe(o);return o!=null&&i==null&&(n=!1),i});return n?s:null}if(He(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(Ke(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],o=oe(s);if(s!=null&&o==null)return null;r[n]=o}return r}function He(t){return typeof t.clone=="function"}function Je(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Ke(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function ie(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Ye(t){if(Wt(t)||Be(t)||Ve(t)||Gt(t)||We(t)||Ht(t)||Ge(t)||ft(t)||ht(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[r,n]of t)e.set(r,A(n));return e}if(t instanceof Set){const e=new Set;for(const r of t)e.add(A(r));return e}return null}function Jt(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function en(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Xr(t,e):t instanceof Set?e instanceof Set&&nn(t,e):t instanceof Map?e instanceof Map&&sn(t,e):!!ie(t)&&ie(e)&&rn(t,e))}function rn(t,e){if(t===null||e===null)return!1;const r=Object.keys(t);if(e===null||Object.keys(e).length!==r.length)return!1;for(const n of r)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function nn(t,e){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}function sn(t,e){if(t.size!==e.size)return!1;for(const[r,n]of t){const s=e.get(r);if(s!==n||s===void 0&&!e.has(r))return!1}return!0}function on(t,e,r=!1){return Qe(t,e,r)}function Ze(t,e){if(e!=null)return e[t]||Xe(t.split("."),!1,e)}function dt(t,e,r){const n=t.split("."),s=n.pop(),o=Xe(n,!0,r);o&&s&&(o[s]=e)}function ae(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const r=e;if(t.length!==r.length)return!0;for(let n=0;n<t.length;n++)if(ae(t[n],r[n]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const r in t)if(ae(t[r],e[r]))return!0;return!1}return t!==e}function Xe(t,e,r){let n=r;for(const s of t){if(n==null)return;if(!(s in n)){if(!e)return;n[s]={}}n=n[s]}return n}function Qe(t,e,r){return e?Object.keys(e).reduce((n,s)=>{let o=n[s],i=e[s];return o===i?n:o===void 0?(n[s]=A(i),n):(Array.isArray(i)||Array.isArray(n)?(o=o?Array.isArray(o)?n[s]=o.slice():n[s]=[o]:n[s]=[],i&&(Array.isArray(i)||(i=[i]),r?i.forEach(a=>{o.includes(a)||o.push(a)}):n[s]=i.slice())):i&&typeof i=="object"?n[s]=Qe(o,i,r):n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[s]=i),n)},t||{}):t}var Re;const T={apiKey:void 0,applicationName:"",applicationUrl:(Re=globalThis.location)==null?void 0:Re.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(on(T,globalThis.esriConfig,!0),delete T.has),!T.assetsPath){{const t="4.32";T.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}T.defaultAssetsPath=T.assetsPath}const an=/\{([^}]+)\}/g;function ce(t){return t??""}function Vo(t,e){return e?t.replaceAll(an,typeof e=="object"?(r,n)=>ce(Ze(n,e)):(r,n)=>ce(e(n))):t}function Wo(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>e!=null&&e.includes(r)?r:`\\${r}`)}function cn(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e}let le;function Go(t){return le??(le=new DOMParser),le.parseFromString(t||"","text/html").body.innerText||""}function Ho(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Jo(t,...e){let r=t[0];for(let n=0;n<e.length;++n)r+=e[n]+t[n+1];return r}const ue={info:0,warn:1,error:2,none:3};let b=class ${constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,$._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=$.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,$._loggers.get(e)||new $({module:e})}_log(e,r,...n){if(this._matchLevel(e)){if(r!=="always"&&!$._throttlingDisabled){const s=un(n),o=this._loggedMessages[e].get(s);if(r==="once"&&o!=null||r==="oncePerTick"&&o&&o>=$._tickCounter)return;this._loggedMessages[e].set(s,$._tickCounter),$._scheduleTickCounterIncrement()}for(const s of T.log.interceptors)if(s(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,r){let n=this;for(;n!=null;){const s=n[e];if(s!=null)return s;n=n.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",ln)}_matchLevel(e){const r=T.log.level||"warn";return ue[this._parentWithMember("level",r)]<=ue[e]}static _scheduleTickCounterIncrement(){$._tickCounterScheduled||($._tickCounterScheduled=!0,Promise.resolve().then(()=>{$._tickCounter++,$._tickCounterScheduled=!1}))}};function ln(t,e,...r){console[t](`[${e}]`,...r)}function un(...t){return cn(JSON.stringify(t,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}b._loggers=new Map,b._tickCounter=0,b._tickCounterScheduled=!1,b._throttlingDisabled=!1;function fn(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,n)=>n===""?"$":(Ze(n,e)??"").toString())}let tr=class{constructor(e,r,n=void 0){this.name=e,this.details=n,this.message=(r&&fn(r,n))??""}toString(){return"["+this.name+"]: "+this.message}},q=class er extends tr{constructor(e,r,n){super(e,r,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return A(r)}catch{return"[object]"}}))}}catch(e){throw b.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new er(e.name,e.message,e.details)}};q.prototype.type="error";function rr(t){return hn(t)||nr(t)}function hn(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function nr(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function dn(t,e,r){if(!rr(t))throw new TypeError("target is not a Evented or EventTarget object");return nr(t)?pn(t,e,r):t.on(e,r)}function pn(t,e,r,n){if(Array.isArray(e)){const s=e.slice();for(const o of s)t.addEventListener(o,r,n);return y(()=>{for(const o of s)t.removeEventListener(o,r,n)})}return t.addEventListener(e,r,n),y(()=>t.removeEventListener(e,r,n))}function sr(t,e,r){if(!rr(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,r);const n=dn(t,e,s=>{n.remove(),r.call(t,s)});return n}function Yo(t,e){if(t==null)throw new Error(e??"value is None")}function gn(t){return t==null||t.destroy(),null}function Zo(t){return t==null||t.dispose(),null}function yn(t){return t==null||t.remove(),null}function Xo(t){return t==null||t.abort(),null}function Qo(t){return t==null||t.release(),null}function ti(t,e,r){return t!=null&&e!=null?r!=null?r(t,e):t.equals(e):t===e}function ei(t,e){return t==null?void 0:t[e]}function ri(t,e){let r;return t.some((n,s)=>(r=e(n,s),r!=null)),r??void 0}function I(t="Aborted"){return new q("AbortError",t)}function or(t,e="Aborted"){if(ir(t))throw I(e)}function pt(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function ir(t){const e=pt(t);return e!=null&&e.aborted}function ni(t){if(gt(t))throw t}function si(t){if(!gt(t))throw t}function Q(t,e){const r=pt(t);if(r!=null){if(!r.aborted)return sr(r,"abort",()=>e());e()}}function oi(t,e){const r=pt(t);if(r!=null)return or(r),sr(r,"abort",()=>e(I()))}function ii(t,e){return pt(e)==null?t:new Promise((r,n)=>{let s=Q(e,()=>n(I()));const o=()=>{s=yn(s)};t.then(o,o),t.then(r,n)})}function gt(t){return(t==null?void 0:t.name)==="AbortError"}async function ai(t){try{return await t}catch(e){if(!gt(e))throw e;return}}async function ci(t,e=b.getLogger("esri")){try{return await t}catch(r){gt(r)||e.error(r)}}async function mn(t){if(!t)return;if(typeof t.forEach!="function"){const r=Object.keys(t),n=r.map(i=>t[i]),s=await mn(n),o={};return r.map((i,a)=>o[i]=s[a]),o}const e=t;return Promise.allSettled(e).then(r=>Array.from(e,(n,s)=>{const o=r[s];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))}async function li(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function ui(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function $n(t,e=void 0,r){const n=new AbortController;return Q(r,()=>n.abort()),new Promise((s,o)=>{let i=setTimeout(()=>{i=0,s(e)},t);Q(n,()=>{i&&(clearTimeout(i),o(I()))})})}function fi(t,e,r,n){const s=r&&"abort"in r?r:null;n!=null||s||(n=r);let o=setTimeout(()=>{o=0,s==null||s.abort()},e);const i=()=>n||new q("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(o===0)throw i();return clearTimeout(o),a},a=>{throw clearTimeout(o),o===0?i():a})}function hi(t,e){const r=new AbortController,n=setTimeout(()=>r.abort(),e);return Q(t,()=>{r.abort(),clearTimeout(n)}),{...t,signal:r.signal}}function bn(t){return t&&typeof t.then=="function"}function fe(t){return bn(t)?t:Promise.resolve(t)}function di(t,e=-1){let r,n,s,o,i=null;const a=(...c)=>{if(r){n=c,o&&o.reject(I()),o=Et();const p=o.promise;if(i){const C=i;i=null,C.abort()}return p}if(s=o||Et(),o=null,e>0){const p=new AbortController;r=fe(t(...c,p.signal));const C=r;$n(e).then(()=>{r===C&&(o?p.abort():i=p)})}else r=1,r=fe(t(...c));const u=()=>{const p=n;n=s=r=i=null,p!=null&&a(...p)},f=r,h=s;return f.then(u,u),f.then(h.resolve,h.reject),h.promise};return a}function Et(){let t,e;const r=new Promise((s,o)=>{t=s,e=o}),n=s=>{t(s)};return n.resolve=s=>t(s),n.reject=s=>e(s),n.timeout=(s,o)=>Kr.setTimeout(()=>n.reject(o),s),n.promise=r,n}function pi(t,e){return t.then(e,e)}async function gi(t){await Promise.resolve(),or(t)}function yi(t,e){for(const r of t.values())if(e(r))return!0;return!1}function mi(t,e){for(const r of t.values())if(e(r))return r;return null}function vn(t,e,r){const n=t.get(e);if(n!==void 0)return n;const s=r();return t.set(e,s),s}function $i(t){const e=new Map;return r=>(e.has(r)||e.set(r,t(r)),e.get(r))}const P=()=>b.getLogger("esri.core.accessorSupport.ensureTypes");function _n(t){return t==null?t:new Date(t)}function wn(t){return t==null?t:!!t}function An(t){return t==null?t:t.toString()}function Tn(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function kn(t){return t==null?t:Math.round(parseFloat(t))}function On(t){return null}function Sn(t,e){return r=>{let n=t(r);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function ar(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function tt(t,e){return e!=null&&t&&!(e instanceof t)}function cr(t){return t&&"isCollection"in t}function he(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function En(t,e){if(!(e!=null&&e.constructor)||!cr(e.constructor))return jt(t,e)?e:new t(e);const r=he(t.prototype.itemType),n=he(e.constructor.prototype.itemType);return r?n?r===n?e:r.prototype.isPrototypeOf(n.prototype)?new t(e):(jt(t,e),e):new t(e):e}function jt(t,e){return!!ar(e)&&(P().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+yt(t)+"'"),!0)}function jn(t,e){return e==null?e:cr(t)?En(t,e):tt(t,e)?jt(t,e)?e:new t(e):e}function yt(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const Nn=new WeakMap;function Cn(t){switch(t){case Number:return e=>Tn(e);case Kt:return kn;case Boolean:return wn;case String:return An;case Date:return _n;case Yt:return On;default:return vn(Nn,t,()=>jn.bind(null,t))}}function j(t,e){const r=Cn(t);return arguments.length===1?r:r(e)}function z(t,e,r){return arguments.length===1?z.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,r)):[t(e,r)])}function Pn(t,e){return arguments.length===1?z(r=>j(t,r)):z(r=>j(t,r),e)}function lr(t,e,r){return e!==0&&Array.isArray(r)?r.map(n=>lr(t,e-1,n)):t(r)}function et(t,e,r){if(arguments.length===2)return o=>et(t,e,o);if(!r)return r;r=lr(t,e,r);let n=e,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let o=0;o<n;o++)r=[r];return r}function Mn(t,e,r){return arguments.length===2?et(n=>j(t,n),e):et(n=>j(t,n),e,r)}function ur(t){return!!Array.isArray(t)&&!t.some(e=>{const r=typeof e;return!(r==="string"||r==="number"||r==="function"&&t.length>1)})}function Nt(t,e){if(arguments.length===2)return Nt(t).call(null,e);const r=new Set,n=t.filter(a=>typeof a!="function"),s=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||r.add(a);let o=null,i=null;return(a,c)=>{if(a==null)return a;const u=typeof a,f=u==="string"||u==="number";return f&&(r.has(a)||s.some(h=>u==="string"&&h===String||u==="number"&&h===Number))||u==="object"&&s.some(h=>!tt(a,h))?a:(f&&n.length?(o||(o=n.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),P().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof a=="object"&&s.length?(i||(i=s.map(h=>yt(h)).join(", ")),P().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${i}`)):P().error("Accessor#set",`'${a}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function Ct(t,e){if(arguments.length===2)return Ct(t).call(null,e);const r={},n=[],s=[];for(const c in t.typeMap){const u=t.typeMap[c];r[c]=j(u),n.push(yt(u)),s.push(c)}const o=()=>`'${n.join("', '")}'`,i=()=>`'${s.join("', '")}'`,a=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!tt(t.base,c)||c==null)return c;const u=a(c)||t.defaultKeyValue,f=r[u];if(!f)return P().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!tt(t.typeMap[u],c))return c;if(typeof t.key=="string"&&!ar(c)){const h={};for(const p in c)p!==t.key&&(h[p]=c[p]);return f(h)}return f(c)}}let Kt=class{},Yt=class{};const _i={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function In(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function fr(t){switch(t.type){case"native":return j(t.value);case"array":return z(fr(t.value));case"one-of":return Dn(t);default:return null}}function Dn(t){let e=null;return(r,n)=>Mt(r,t)?r:(e==null&&(e=Pt(t)),P().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function Pt(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Kt:return"integer";case Date:return"date";case Yt:return"null";default:return yt(t.value)}case"array":return`array of ${Pt(t.value)}`;case"one-of":{const e=t.values.map(r=>Pt(r));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function Mt(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Kt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case Yt:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(r=>!Mt(r,e.value));case"one-of":return e.values.some(r=>Mt(t,r))}}function hr(t){return t.__accessor__??null}function xn(t,e){var r;return((r=t==null?void 0:t.metadata)==null?void 0:r[e])!=null}function Rn(t,e,r){return r?rt(t,e,{policy:r,path:""}):rt(t,e,null)}function rt(t,e,r){return e?Object.keys(e).reduce((n,s)=>{const o=s;let i=null,a="merge";if(r&&(i=r.path?`${r.path}.${s}`:s,a=r.policy(i)),a==="replace"||a==="replace-arrays"&&Array.isArray(n[o]))return n[o]=e[o],n;if(n[o]===void 0)return n[o]=A(e[o]),n;let c=n[o],u=e[o];if(c===u)return n;if(Array.isArray(u)||Array.isArray(n))c=c?Array.isArray(c)?n[o]=c.slice():n[o]=[c]:n[o]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(f=>{c.includes(f)||c.push(f)}));else if(u&&typeof u=="object")if(r){const f=r.path;r.path=i,n[o]=rt(c,u,r),r.path=f}else n[o]=rt(c,u,null);else n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[o]=u);return n},t||{}):t}function dr(t){return Array.isArray(t)?t:t.split(".")}function de(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Un(t){if(Array.isArray(t)){const e=[];for(const r of t)e.push(...de(r));return e}return de(t)}function pr(t,e,r,n){const s=Un(e);if(s.length!==1){const o=s.map(i=>n(t,i,r));return Hr(o)}return n(t,s[0],r)}function gr(t,e){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=hr(e);return xn(n,r)?n.get(r):e[r]}function yr(t,e,r){if(t==null)return t;const n=gr(e[r],t);return!n&&r<e.length-1?void 0:r===e.length-1?n:yr(n,e,r+1)}function mt(t,e,r=0){return typeof e!="string"||e.includes(".")?yr(t,dr(e),r):gr(e,t)}function nt(t,e){return mt(t,e)}function wi(t,e){return mt(e,t)!==void 0}function B(t){let e=t.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!r){e=Object.create(e);for(const n in e)e[n]=A(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function mr(t,e){const r=B(t);let n=r[e];return n||(n=r[e]={}),n}function zn(t,e){return Rn(t,e,Ln)}const Fn=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Ln(t){return Fn.test(t)?"replace":"merge"}function st(t,e,r){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))st(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),o=s.splice(-1,1)[0];return void st(nt(t,s),o,r)}const n=t.__accessor__;n!=null&&qn(e,n),t[e]=r}}function qn(t,e){if(l("esri-unknown-property-errors")&&!Bn(t,e))throw new q("set:unknown-property",Vn(t,e))}function Bn(t,e){return e.metadata[t]!=null}function Vn(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function Wn(t={}){return(e,r)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,r),s=mr(e,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&b.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const o=t.aliasOf;if(o){const c=typeof o=="string"?o:o.source,u=typeof o=="string"?null:o.overridable===!0;let f;s.dependsOn=[c],s.get=function(){let h=nt(this,c);if(typeof h=="function"){f||(f=c.split(".").slice(0,-1).join("."));const p=nt(this,f);p&&(h=h.bind(p))}return h},s.readOnly||(s.set=u?function(h){this._override(r,h)}:function(h){st(this,c,h)})}const i=t.type,a=t.types;if(!s.cast){let c;i?c=Gn(i):a&&(c=Array.isArray(a)?z(Ct(a[0])):Ct(a)),t.cast=Hn(t.cast,c)}zn(s,t),t.range&&(s.cast=Sn(s.cast,t.range))}}function Ai(t,e,r){const n=mr(t,r);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function Gn(t){let e=0,r=t;if(In(t))return fr(t);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],e++;const n=r;if(ur(n))return e===0?Nt(n):et(Nt(n),e);if(e===1)return Pn(n);if(e>1)return Mn(n,e);const s=t;return s.from?s.from:j(s)}function Hn(t,e){if(t||e)return t?e?(r,n)=>e(t(r,n),n):t:e}const $r=Symbol("Accessor-beforeDestroy");var m;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(m||(m={}));var d;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(d||(d={}));let $t=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const ot=new $t,x=[];let R=ot;function bt(t){R.onAccessed(t)}let K=!1,Y=!1;function O(t,e,r){if(K)return Zt(t,e,r);let n=null;return br(t),n=e.call(r),vr(),n}function Jn(t,e){return O(ot,t,e)}function Zt(t,e,r){const n=K;K=!0,br(t);let s=null;try{s=e.call(r)}catch(o){Y&&b.getLogger("esri.core.accessorSupport.tracking").error(o)}return vr(),K=n,s}function br(t){R=t,x.push(t)}function vr(){const t=x.length;if(t>1){const e=x.pop();R=x[t-2],e.onTrackingEnd()}else if(t===1){const e=x.pop();R=ot,e.onTrackingEnd()}else R=ot}function _r(t,e){if(e.flags&d.DepTrackingInitialized)return;e.flags|=d.DepTrackingInitialized;const r=Y;Y=!1,e.flags&d.AutoTracked?Zt(e.trackingTarget,e.metadata.get,t):wr(t,e),Y=r}const Kn=[];function wr(t,e){e.flags&d.ExplicitlyTracking||(e.flags|=d.ExplicitlyTracking,Zt(e.trackingTarget,()=>{const r=e.metadata.dependsOn||Kn;for(const n of r)if(typeof n!="string"||n.includes(".")){const s=dr(n);for(let o=0,i=t;o<s.length&&i!=null&&typeof i=="object";++o)i=pe(i,s[o],o!==s.length-1)}else pe(t,n,!1)}),e.flags&=~d.ExplicitlyTracking)}function pe(t,e,r){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const o=parseInt(n,10);if(!isNaN(o))return Array.isArray(t)?t[o]:t.at(o)}const s=hr(t);if(s){const o=s.propertiesByName.get(n);o&&(bt(o),_r(t,o))}return r?t[n]:void 0}function Yn(t){if(t.json&&t.json.origins){const e=t.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(e[n]){const s=e[n];r[n].forEach(o=>{e[o]=s}),delete e[n]}}}let Ar=class extends tr{constructor(e,r,n){super(e,r,n)}};Ar.prototype.type="warning";function Tr(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const It=()=>b.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function ge(t,e,r){var n,s;t&&(!r&&!e.read||(n=e.read)!=null&&n.reader||((s=e.read)==null?void 0:s.enabled)===!1||ts(t)&&dt("read.reader",Zn(t),e))}function Zn(t){var r,n;const e=t.ndimArray??0;if(e>1)return Qn(t);if(e===1)return ye(t);if("type"in t&&Or(t.type)){const s=(n=(r=t.type.prototype)==null?void 0:r.itemType)==null?void 0:n.Type,o=ye(typeof s=="function"?{type:s}:{types:s});return(i,a,c)=>{const u=o(i,a,c);return u&&new t.type(u)}}return Xt(t)}function Xt(t){return"type"in t?Xn(t.type):es(t.types)}function Xn(t){return t.prototype.read?(e,r,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void It().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const o=new t;return o.read(e,n),o}:t.fromJSON}function kr(t,e,r,n){return n!==0&&Array.isArray(e)?e.map(s=>kr(t,s,r,n-1)):t(e,void 0,r)}function Qn(t){const e=Xt(t),r=kr.bind(null,e),n=t.ndimArray??0;return(s,o,i)=>{if(s==null)return s;s=r(s,i,n);let a=n,c=s;for(;a>0&&Array.isArray(c);)a--,c=c[0];if(c!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function ye(t){const e=Xt(t);return(r,n,s)=>{if(r==null)return r;if(Array.isArray(r)){const i=[];for(const a of r){const c=e(a,void 0,s);c!==void 0&&i.push(c)}return i}const o=e(r,void 0,s);return o!==void 0?[o]:void 0}}function Or(t){if(!Tr(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?Qt(e.Type):Sr(e.Type))}function ts(t){return"types"in t?Sr(t.types):Qt(t.type)}function Qt(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Or(t))}function Sr(t){for(const e in t.typeMap)if(!Qt(t.typeMap[e]))return!1;return!0}function es(t){let e=null;const r=t.errorContext??"type",n=t.validate;return(s,o,i)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void It().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=rs(t));const c=t.key;if(typeof c!="string")return;const u=s[c],f=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!f){const p=`Type '${u||"unknown"}' is not supported`;return i!=null&&i.messages&&s&&i.messages.push(new Ar(`${r}:unsupported`,p,{definition:s,context:i})),void It().error(p)}const h=new f;return h.read(s,i),n?n(h):h}}function rs(t){var r,n;const e={};for(const s in t.typeMap){const o=t.typeMap[s],i=B(o.prototype);if(typeof t.key=="function")continue;const a=i[t.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=o;continue}const c=(n=a.json)==null?void 0:n.write;if(!(c!=null&&c.writer)){e[s]=o;continue}const u=c.target,f=typeof u=="string"?u:t.key,h={};c.writer(s,h,f),h[f]&&(e[h[f]]=o)}return e}function ns(t){if(t.json||(t.json={}),$e(t.json),be(t.json),me(t.json),t.json.origins)for(const e in t.json.origins)$e(t.json.origins[e]),be(t.json.origins[e]),me(t.json.origins[e]);return!0}function me(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function $e(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function be(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function ve(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const r=(t==null?void 0:t.ndimArray)??0;t&&(r===1||"type"in t&&Tr(t.type))?e.write.writer=as:r>1?e.write.writer=cs(r):e.types?Array.isArray(e.types)?e.write.writer=os(e.types[0]):e.write.writer=ss(e.types):e.write.writer=F}function ss(t){return(e,r,n,s)=>e?Er(e,t,s)?F(e,r,n,s):void 0:F(e,r,n,s)}function Er(t,e,r){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(r!=null&&r.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&t&&r.messages.push(new q(`${n}:unsupported`,s,{definition:t,context:r})),b.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function os(t){return(e,r,n,s)=>!e||!Array.isArray(e)?F(e,r,n,s):F(e.filter(o=>Er(o,t,s)),r,n,s)}function F(t,e,r,n){dt(r,it(t,n),e)}function it(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?is(t):t}function is(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function as(t,e,r,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(o=>it(o,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[it(t,n)],dt(r,s,e)}function jr(t,e,r){return r!==0&&Array.isArray(t)?t.map(n=>jr(n,e,r-1)):it(t,e)}function cs(t){return(e,r,n,s)=>{let o;if(e===null)o=null;else{o=jr(e,s,t);let i=t,a=o;for(;i>0&&Array.isArray(a);)i--,a=a[0];if(a!==void 0)for(let c=0;c<i;c++)o=[o]}dt(n,o,r)}}function Oi(t,e){return te(t,"any",e==null?void 0:e.origin)}function Si(t,e){return te(t,"read",e==null?void 0:e.origin)}function Ei(t,e){return te(t,"write",e==null?void 0:e.origin)}function te(t,e,r){let n=t==null?void 0:t.json;if(n!=null&&n.origins&&r){let s;s=r==="link-chart"?n.origins[r]&&(e==="any"||e in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],s&&(e==="any"||e in s)&&(n=s)}return n}function ls(t){var r;const e=us(t);if(t.json.origins)for(const n in t.json.origins){const s=t.json.origins[n],o=s.types?fs(s):e;ge(o,s,!1),s.types&&!s.write&&((r=t.json.write)!=null&&r.enabled)&&(s.write={...t.json.write}),ve(o,s)}ge(e,t.json,!0),ve(e,t.json)}function us(t){return t.json.types?Dt(t.json):t.type?Nr(t):Dt(t)}function fs(t){return t.type?Nr(t):Dt(t)}function Nr(t){if(!t.type)return;let e=0,r=t.type;for(;Array.isArray(r)&&!ur(r);)r=r[0],e++;return{type:r,ndimArray:e}}function Dt(t){if(!t.types)return;let e=0,r=t.types;for(;Array.isArray(r);)r=r[0],e++;return{types:r,ndimArray:e}}function hs(t){ns(t)&&(Yn(t),ls(t))}const wt=new Set,At=new Set;function ds(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,gs(e);const r=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!wt.has(s.initialize)&&(wt.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!At.has(s.destroy)&&(At.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);wt.clear(),At.clear();const o=class extends e{constructor(...a){if(super(...a),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=r.length-1;c>=0;c--)r[c].call(this)}}),n.length){let c=!1;const u=this[$r];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){c=!0,u.call(this);for(let f=0;f<n.length;f++)n[f].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=B(e.prototype),o.prototype.declaredClass=t;const i=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:i,configurable:!0}),o}}function ps(t,e){return e.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n===void 0)return;r.mutable&&bt(n);const s=r.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n!==void 0)return n.getComputed(r)}}function gs(t){const e=t.prototype,r=B(e),n={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];hs(o),n[s]={enumerable:!0,configurable:!0,get:ps(s,o),set(i){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&o.readOnly?_e("read-only",s):a.lifecycle===m.CONSTRUCTED&&o.constructOnly?_e("construct-only",s):void a.set(s,i)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(t.prototype,n)}const _e=(t,e)=>{b.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)},we=new WeakMap;function ys(t,e,r=!1){const n=`🛑 DEPRECATED - ${e}`;if(!r)return void t.warn(n);let s=we.get(t);s||(s=new Set,we.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}function ms(t,e,r={}){if(l("esri-deprecation-warnings")){const{moduleName:n}=r;vt(t,`Function: ${(n?n+"::":"")+e+"()"}`,r)}}function ji(t,e,r={}){if(l("esri-deprecation-warnings")){const{moduleName:n}=r;vt(t,`Property: ${(n?n+"::":"")+e}`,r)}}function Ni(t,e,r,n={}){if(l("esri-deprecation-warnings")){const{moduleName:s}=n;vt(t,`'${(s?s+"::":"")+e}' value: ${r}`,n)}}function Ci(t,e,r={}){l("esri-deprecation-warnings")&&vt(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...r})}function vt(t,e,r={}){if(l("esri-deprecation-warnings")){const{replacement:n,version:s,see:o,warnOnce:i}=r;let a=e;if(n&&(a+=`
	🛠️ Replacement: ${n}`),s&&(a+=`
	⚙️ Version: ${s}`),o)if(Array.isArray(o)){a+=`
	🔗 See for more details:`;for(const c of o)a+=`
		${c}`}else a+=`
	🔗 See ${o} for more details.`;ys(t,a,i)}}function Pi(t){const e=[];return function*(){yield*e;for(const r of t)e.push(r),yield r}}function Mi(t,e){for(const r of t)if(r!=null&&e(r))return r}function Ae(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let ee=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(r=>{e+=r.length}),e}add(e,r){if(Ae(e)){const n=this._getOrCreateGroup(r);for(const s of e)ke(s)&&n.push(s)}else ke(e)&&this._getOrCreateGroup(r).push(e);return this}forEach(e,r){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&r&&n.forEach(r)}}has(e){return this._groups.has(V(e))}remove(e){if(typeof e!="string"&&Ae(e)){for(const r of e)this.remove(r);return this}return this.has(e)?(Te(this._getGroup(e)),this._groups.delete(V(e)),this):this}removeAll(){return this._groups.forEach(Te),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(V(e),r),r}_getGroup(e){return this._groups.get(V(e))}};function V(t){return t||"_default_"}function Te(t){for(const e of t)e instanceof ee?e.removeAll():e.remove()}function ke(t){return t!=null&&(!!t.remove||t instanceof ee)}function $s(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function bs(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let _t=class xt{constructor(e,r,n,s=1,o=0){this._ctor=e,this._acquireFunction=r,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o;for(let i=0;i<o;i++)this._pool[i]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let r;if(xt.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...e):bs(r)&&r.acquire(...e),r}release(e){e&&!xt.test.disabled&&(this._releaseFunction?this._releaseFunction(e):$s(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let r=e;r<this._pool.length;++r){const n=this._pool[r];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};_t.test={disabled:!1};let vs=class{constructor(e,r){this._observers=e,this._observer=r}remove(){tn(this._observers,this._observer)}},_s=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return ws;this._observers==null&&(this._observers=[]);const r=this._observers;let n=!1,s=!1;const o=r.length;for(let i=0;i<o;++i){const a=r[i];if(a.destroyed)s=!0;else if(a===e){n=!0;break}}return n||(r.push(e),s&&this._removeDestroyedObservers()),new vs(r,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const r=e.length;let n=0;for(let s=0;s<r;++s){for(;s+n<r&&e[s+n].destroyed;)++n;if(n>0){if(!(s+n<r))break;e[s]=e[s+n]}}e.length=r-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const r of e)r.onCommitted();this._observers=null}}};const ws=y();var g;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(g||(g={}));const Ri=g.USER+1;function As(t){switch(t){case"defaults":return g.DEFAULTS;case"service":return g.SERVICE;case"portal-item":return g.PORTAL_ITEM;case"web-scene":return g.WEB_SCENE;case"web-map":return g.WEB_MAP;case"link-chart":return g.LINK_CHART;case"user":return g.USER;default:return null}}function Rt(t){switch(t){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.LINK_CHART:return"link-chart";case g.USER:return"user"}}function Ui(t){return Rt(t)}let Oe=class extends _s{constructor(e,r){super(),this.propertyName=e,this.metadata=r,this.trackingTarget=new $t(this),this.flags=0,this.flags=d.Dirty|(r.nonNullable?d.NonNullable:0)|(r.hasOwnProperty("value")?d.HasDefaultValue:0)|(r.get===void 0?d.DepTrackingInitialized:0)|(r.dependsOn===void 0?d.AutoTracked:0)}destroy(){this.flags&d.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&bt(this);const r=e.store,n=this.propertyName,s=this.flags,o=r.get(n);if(s&d.Computing||~s&d.Dirty&&r.has(n))return o;this.flags|=d.Computing;const i=e.host;let a;s&d.AutoTracked?a=O(this.trackingTarget,this.metadata.get,i):(wr(i,this),a=this.metadata.get.call(i)),this.flags|=d.DepTrackingInitialized,r.set(n,a,g.COMPUTED);const c=r.get(n);return c===o?this.flags&=~d.Dirty:Jn(this.commit,this),this.flags&=~d.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~d.Dirty,this.onCommitted()}onInvalidated(){~this.flags&d.Overridden&&(this.flags|=d.Dirty);const e=this._observers;if(e&&e.length>0)for(const r of e)r.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const r=e.slice();for(const n of r)n.onCommitted()}}},Ts=class Cr{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new Cr;return this._values.forEach((n,s)=>{e&&e.has(s)||r.set(s,A(n))}),r}get(e){return this._values.get(e)}originOf(){return g.USER}keys(){return[...this._values.keys()]}set(e,r){this._values.set(e,r)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function W(t,e,r){return t!==void 0}function Se(t,e,r,n){return t!==void 0&&(!(r==null&&t.flags&d.NonNullable)||(n.lifecycle,m.INITIALIZING,!1))}let ks=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=m.INITIALIZING,this.store=new Ts,this.mutable=!0,this._origin=g.USER;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const s=new Oe(n,r[n]);this.propertiesByName.set(n,s)}this.metadata=r}initialize(){this.lifecycle=m.CONSTRUCTING}constructed(){this.lifecycle=m.CONSTRUCTED}destroy(){this.lifecycle=m.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==m.INITIALIZING}get(e){const r=this.propertiesByName.get(e);if(r.metadata.get)return r.getComputed(this);this.mutable&&bt(r);const n=this.store;return n.has(e)?n.get(e):r.metadata.value}originOf(e){const r=this.store.originOf(e);if(r===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&d.HasDefaultValue)return"defaults"}return Rt(r)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const r=this.propertiesByName.get(e);if(W(r))return this.store.has(e)?this.store.get(e):r.metadata.value}internalSet(e,r){const n=this.propertiesByName.get(e);W(n)&&this._internalSet(n,r)}getDependsInfo(e,r,n){const s=this.propertiesByName.get(r);if(!W(s))return"";const o=new $t,i=O(o,()=>{var u;return(u=s.metadata.get)==null?void 0:u.call(e)});let a=`${n}${e.declaredClass.split(".").pop()}.${r}: ${i}
`;const c=o.accessed??new Set;if(c.size===0)return a;n+="  ";for(const u of c)u instanceof Oe&&(a+=`${n}${u.propertyName}: undefined
`);return a}setAtOrigin(e,r,n){const s=this.propertiesByName.get(e);if(W(s))return this._setAtOrigin(s,r,n)}isOverridden(e){const r=this.propertiesByName.get(e);return r!==void 0&&!!(r.flags&d.Overridden)}clearOverride(e){const r=this.propertiesByName.get(e);r&&r.flags&d.Overridden&&(r.flags&=~d.Overridden,r.notifyChange())}override(e,r){const n=this.propertiesByName.get(e);if(!Se(n,e,r,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,r),{valid:i,value:a}=o;if(Tt.release(o),!i)return;r=a}n.flags|=d.Overridden,this._internalSet(n,r)}set(e,r){const n=this.propertiesByName.get(e);if(!Se(n,e,r,this))return;const s=n.metadata.cast;if(s){const i=this._cast(s,r),{valid:a,value:c}=i;if(Tt.release(i),!a)return;r=c}const o=n.metadata.set;o?o.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(e){this._origin=As(e)}getDefaultOrigin(){return Rt(this._origin)}notifyChange(e){const r=this.propertiesByName.get(e);r!==void 0&&r.notifyChange()}invalidate(e){const r=this.propertiesByName.get(e);r!==void 0&&r.invalidate()}commit(e){const r=this.propertiesByName.get(e);r!==void 0&&r.commit()}_internalSet(e,r){const n=this.lifecycle!==m.INITIALIZING?this._origin:g.DEFAULTS;this._setAtOrigin(e,r,n)}_setAtOrigin(e,r,n){const s=this.store,o=e.propertyName;s.has(o,n)&&Jt(r,s.get(o))&&~e.flags&d.Overridden&&n===s.originOf(o)||(e.invalidate(),s.set(o,r,n),e.commit(),_r(this.host,e))}_cast(e,r){const n=Tt.acquire();return n.valid=!0,n.value=r,e&&(n.value=e.call(this.host,r,n)),n}},Os=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Tt=new _t(Os);let Ss;function Es(){return Ss}var Ee;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(Ee||(Ee={}));function js(t){t.length=0}let Pr=class{constructor(e=50,r=50){this._pool=new _t(Array,void 0,js,r,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return kt.acquire()}static release(e){return kt.release(e)}static prune(){kt.prune()}};const kt=new Pr(100);let Ns=class extends _t{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const r=super.acquire(...e);return this._set.delete(r),r}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const G=[];function Mr(t){G.push(t),G.length===1&&queueMicrotask(()=>{const e=G.slice();G.length=0;for(const r of e)r()})}let Ir=class{constructor(e,r=30){this.name=e,this._counter=0,this._samples=new Array(r)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,r)=>e-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,r)=>e+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Ut;(function(t){const e=(o,i,a,c)=>{let u=i,f=i;const h=a>>>1,p=o[u-1];for(;f<=h;){f=u<<1,f<a&&c(o[f-1],o[f])<0&&++f;const C=o[f-1];if(c(C,p)<=0)break;o[u-1]=C,u=f}o[u-1]=p},r=(o,i)=>o<i?-1:o>i?1:0;function n(o,i,a,c){i===void 0&&(i=0),a===void 0&&(a=o.length),c===void 0&&(c=r);for(let f=a>>>1;f>i;f--)e(o,f,a,c);const u=i+1;for(let f=a-1;f>i;f--){const h=o[i];o[i]=o[f],o[f]=h,e(o,u,f,c)}}function*s(o,i,a,c){i===void 0&&(i=0),a===void 0&&(a=o.length),c===void 0&&(c=r);for(let f=a>>>1;f>i;f--)e(o,f,a,c),yield;const u=i+1;for(let f=a-1;f>i;f--){const h=o[i];o[i]=o[f],o[f]=h,e(o,u,f,c),yield}}t.sort=n,t.iterableSort=s})(Ut||(Ut={}));const je=Ut,Cs=1.5,Ps=1.1;let Dr=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Fe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Ne(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const r=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];e(s)&&r.push(s)}return r}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,r){const n=this.data.indexOf(e,r);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let r=e;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,r=e.length){for(let n=0;n<r;n++)this.data[this._length++]=e[n]}fill(e,r){for(let n=0;n<r;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Ne(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const r=St(this.data,e,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(St(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,r=e.length,n){this.length=Qr(this.data,e,this.length,r,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,r){if(e>=this.length||r>=this.length||e===r)return;const n=this.data[e];this.data[e]=this.data[r],this.data[r]=n}sort(e){je.sort(this.data,0,this.length,e)}iterableSort(e){return je.iterableSort(this.data,0,this.length,e)}some(e,r){for(let n=0;n<this.length;++n)if(e.call(r,this.data[n],n,this.data))return!0;return!1}find(e,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)if(e.call(r,n[o]))return n[o]}filterInPlace(e,r){let n=0;for(let s=0;s<this._length;++s){const o=this.data[s];e.call(r,o,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=o,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(e,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)e.call(r,n[o],o,n)}forEach(e,r){this.data.slice(0,this.length).forEach(e,r)}map(e,r){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=e.call(r,this.data[s],s,this.data);return n}reduce(e,r){let n=r;for(let s=0;s<this.length;++s)n=e(n,this.data[s],s,this.data);return n}has(e){const r=this.length,n=this.data;for(let s=0;s<r;++s)if(n[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Ne(t){t.data.length>Cs*t.length&&(t.data.length=Math.floor(t.length*Ps))}function Gi(t){return t}function Hi(t){return 1e3*t}function Ji(t){return t}function Ki(t){return .001*t}let Ms=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Is=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},zt=0,Ft=0;const D={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Lt=["prepare","preRender","render","postRender","update","finish"],qt=[],N=new Dr;class Ds{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,xr()}}function xs(){E!=null&&(cancelAnimationFrame(E),E=requestAnimationFrame(re))}function xr(){E==null&&(zt=performance.now(),E=requestAnimationFrame(re))}const at={frameTasks:N,willDispatch:!1,clearFrameTasks:Us,dispatch:Ur,executeFrameTasks:zs,reschedule:xs};function Rs(t){const e=new Is(t);return qt.push(e),at.willDispatch||(at.willDispatch=!0,Mr(Ur)),e}function Xi(t){const e=new Ms(t);return N.push(e),xr(),new Ds(e)}let E=null;function Us(t=!1){N.forAll(e=>{e.removed=!0}),t&&Rr()}function Qi(t){Ft=Math.max(0,t)}function re(){const t=performance.now();E=null,E=N.some(r=>!r.paused&&!r.removed)?requestAnimationFrame(re):null,at.executeFrameTasks(t)}function zs(t){const e=t-zt;zt=t;const r=Ft>0?Ft:1e3/60,n=Math.max(0,e-r);D.time=t,D.frameDuration=r-n;for(let s=0;s<Lt.length;s++){const o=performance.now(),i=Lt[s];N.forAll(a=>{var c;a.paused||a.removed||(s===0&&a.ticks++,a.phases[i]&&(D.elapsedFrameTime=performance.now()-t,D.deltaTime=a.ticks===0?0:e,(c=a.phases[i])==null||c.call(a,D)))}),qs[s].push(performance.now()-o)}Rr(),Bs.push(performance.now()-t)}const H=new Dr;function Rr(){N.forAll(t=>{t.removed&&H.push(t)}),N.removeUnorderedMany(H.data,H.length),H.clear()}function Ur(){for(;qt.length;){const t=qt.shift();t.isActive&&t.callback()}at.willDispatch=!1}function Fs(t=1,e){const r=Et(),n=()=>{ir(e)?r.reject(I()):t===0?r():(--t,Mr(()=>n()))};return n(),r.promise}function Ls(t){return Fs(1,t)}async function ta(t){await Ls(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const qs=Lt.map(t=>new Ir(t)),Bs=new Ir("total");function Vs(t,e){for(const r of t.values())if(e(r))return!0;return!1}function Ce(t,e){if(!e)return t;for(const r of e)r!=null&&t.add(r);return t}function ea(t,e){return e!=null&&t.add(e),t}function Ws(t,e){const r=new Set;return Ce(r,t),Ce(r,e),r}function Gs(t,e){const r=new Set;for(const n of e)t.has(n)&&r.add(n);return r}function ra(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const r of t)if(!e.has(r))return!1;return!0}function na(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}function Hs(t,e){const r=new Set(t);for(const n of e)r.delete(n);return r}function sa(t,e){return Hs(Ws(t,e),Gs(t,e))}function oa(t){let e;for(e of t);return e}let Js=0;const ia=0;function Ot(){return++Js}class ne extends $t{constructor(e){super(new Ks(e)),this._observer&&Pe.register(this,new WeakRef(this._observer),this)}destroy(){var e,r;this._observer&&Pe.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(r=this._observer)==null||r.destroy()}}let Ks=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Ys}};const Pe=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Ys(){}let M=!1;const ct=[];function zr(t,e){let r=new ne(o),n=null,s=!1;function o(){if(!r||s)return;if(M)return void Lr(o);const a=n;r.clear(),M=!0,s=!0,n=O(r,t),s=!1,M=!1,e(n,a),qr()}function i(){r&&(r.destroy(),r=null,n=null)}return s=!0,n=O(r,t),s=!1,y(i)}function Fr(t,e){let r=new ne(s),n=null;function s(){e(n,i)}function o(){r&&(r.destroy(),r=null),n=null}function i(){return r?(r.clear(),n=O(r,t),n):null}return i(),y(o)}function ca(t,e){let r=!1,n=!1;const s=!!(e!=null&&e.sync);let o=new ne(()=>{r||n||(n=!0,s?i():queueMicrotask(i))});function i(){n=!1,o&&!r&&(M?Lr(i):(o.clear(),M=!0,r=!0,O(o,t),r=!1,M=!1,qr()))}function a(){o&&(o.destroy(),o=null)}return r=!0,O(o,t),r=!1,y(a)}function Lr(t){ct.includes(t)||ct.unshift(t)}function qr(){for(;ct.length;)ct.pop()()}var U;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(U||(U={}));let L=class{constructor(){this.uid=Ot(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,r,n,s,o){return this.pool.acquire(U.Untracked,e,r,n,s,o,Jt)}static acquireTracked(e,r,n,s){return this.pool.acquire(U.Tracked,e,r,n,null,null,s)}notify(e,r){this.type===U.Untracked?this.callback.call(this.target,e,r,this.path,this.target):this.callback.call(null,e,r,void 0,void 0)}acquire(e,r,n,s,o,i,a){this.uid=Ot(),this.removed=!1,this.type=e,this.oldValue=r,this.callback=n,this.getValue=s,this.target=o,this.path=i,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Ot(),this.removed=!0}};L.pool=new Ns(L);const Z=new Pr,w=new Set;let lt;function ut(t){w.delete(t),w.add(t),lt||(lt=Rs(Qs))}function Zs(t){if(t.removed)return;const e=t.oldValue,r=t.getValue();t.equals(e,r)||(t.oldValue=r,t.notify(r,e))}function Xs(t){for(const e of w.values())e.target===t&&(e.removed=!0)}function Qs(){let t=10;for(;lt&&t--;){lt=null;const e=to(),r=Z.acquire();for(const n of e){const s=n.uid;Zs(n),s===n.uid&&n.removed&&r.push(n)}for(const n of w)n.removed&&(r.push(n),w.delete(n));for(const n of r)L.pool.release(n);Z.release(r),Z.release(e),Bt.forEach(n=>n())}}function to(){const t=Z.acquire();t.length=w.size;let e=0;for(const r of w)t[e]=r,++e;return w.clear(),t}const Bt=new Set;function ua(t){return Bt.add(t),y(()=>Bt.delete(t))}function eo(t,e,r){let n=pr(t,e,r,(s,o,i)=>{let a,c,u=Fr(()=>mt(s,o),(f,h)=>{var p;((p=s.__accessor__)==null?void 0:p.lifecycle)===m.DESTROYED||a&&a.uid!==c?n.remove():(a||(a=L.acquireUntracked(f,i,h,s,o),c=a.uid),ut(a))});return y(()=>{u.remove(),a&&(a.uid!==c||a.removed||(a.removed=!0,ut(a)),a=null),n=u=null})});return n}function ro(t,e,r){const n=pr(t,e,r,(s,o,i)=>{let a=!1;return zr(()=>mt(s,o),(c,u)=>{s.__accessor__.lifecycle!==m.DESTROYED?a||(a=!0,Jt(u,c)||i.call(s,c,u,o,s),a=!1):n.remove()})});return n}function no(t,e,r,n=!1){return t.__accessor__&&t.__accessor__.lifecycle!==m.DESTROYED?n?ro(t,e,r):eo(t,e,r):y()}function so(t,e,r){let n,s,o=Fr(t,(i,a)=>{n&&n.uid!==s?o.remove():(n||(n=L.acquireTracked(i,e,a,r),s=n.uid),ut(n))});return y(()=>{o.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,ut(n)),n=null),o=null})}function oo(t,e,r){let n=!1;return zr(t,(s,o)=>{n||(n=!0,r(o,s)||e(s,o),n=!1)})}function fa(t,e,r=!1,n=en){return r?oo(t,e,n):so(t,e,n)}function ha(t){return Vs(w,e=>e.oldValue===t)}var Br,Vr;function io(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const _=Symbol("Accessor-Handles"),Vt=Symbol("Accessor-Initialized");let da=class X{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const o=this;class i extends o{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}B(i.prototype);for(const a in e){const c=e[a];i.prototype[a]=typeof c=="function"?function(...u){const f=this.inherited;let h;this.inherited=function(...p){if(o.prototype[a])return o.prototype[a].apply(this,p)};try{h=c.apply(this,u)}catch(p){throw this.inherited=f,p}return this.inherited=f,h}:e[a]}for(const a in r){const c=io(r[a]);Wn(c)(i.prototype,a)}return ds(n)(i)}static freeze(e){return e instanceof X?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof X?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var n;if(this[Br]=null,this[Vr]=!1,this.constructor===X)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new ks(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),e.length>0&&(r.ctorArgs=((n=this.normalizeCtorArgs)==null?void 0:n.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,r=e.ctorArgs;e.initialize(),r&&(this.set(r),e.ctorArgs=null),e.constructed(),this.initialize(),this[Vt]=!0}initialize(){}[$r](){this[_]=gn(this[_])}destroy(){var e;this.destroyed||(Xs(this),this.__accessor__.destroy(),(e=Es())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Vt]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===m.DESTROYED||!1}commitProperty(e){nt(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,r){return st(this,e,r),this}watch(e,r,n){return ms(b.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),no(this,e,r,n)}addHandles(e,r){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}(this[_]??(this[_]=new ee)).add(e,r)}removeHandles(e){var r;(r=this[_])==null||r.remove(e)}removeAllHandles(){var e;(e=this[_])==null||e.removeAll()}removeHandlesReference(e){var r;(r=this[_])==null||r.removeReference(e)}hasHandles(e){var r;return((r=this[_])==null?void 0:r.has(e))===!0}_override(e,r){r===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,r){r==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,r){return this.__accessor__.internalSet(e,r),this}};Br=_,Vr=Vt;export{Kt as $,qe as A,b as B,Io as C,or as D,gt as E,tn as F,Do as G,ir as H,zo as I,Uo as J,Qo as K,j as L,l as M,gn as N,T as O,ri as P,is as Q,Ze as R,bn as S,ca as T,Ar as U,ni as V,Zn as W,Co as X,ui as Y,mn as Z,dt as _,ds as a,Ri as a$,Dr as a0,Wo as a1,vt as a2,Et as a3,Q as a4,oi as a5,I as a6,ii as a7,_t as a8,Ai as a9,yo as aA,go as aB,Mr as aC,Zo as aD,Be as aE,We as aF,So as aG,He as aH,Yt as aI,Gt as aJ,Ht as aK,jo as aL,Eo as aM,An as aN,mo as aO,Ae as aP,_i as aQ,Ot as aR,ji as aS,Hi as aT,Ji as aU,ee as aV,Xi as aW,Lo as aX,qo as aY,Fo as aZ,Bo as a_,mr as aa,As as ab,gi as ac,Xr as ad,ti as ae,Tn as af,$n as ag,Rt as ah,St as ai,bo as aj,Fe as ak,Pi as al,Mi as am,uo as an,fo as ao,Oo as ap,pt as aq,cn as ar,Ro as as,dn as at,lo as au,Go as av,Gi as aw,nt as ax,Ge as ay,li as az,_s as b,sa as b$,Ho as b0,ta as b1,si as b2,Pr as b3,Fs as b4,yi as b5,co as b6,mi as b7,ei as b8,Ir as b9,ea as bA,Ce as bB,sr as bC,_o as bD,Yr as bE,vo as bF,ms as bG,Ve as bH,$i as bI,Jt as bJ,Po as bK,pi as bL,ne as bM,O as bN,Ni as bO,fi as bP,Mo as bQ,Ao as bR,Ls as bS,Ue as bT,po as bU,ae as bV,Sn as bW,wo as bX,oa as bY,$o as bZ,hi as b_,fe as ba,Ct as bb,fa as bc,rr as bd,Si as be,mt as bf,Oi as bg,wi as bh,Ei as bi,Rn as bj,Ui as bk,on as bl,To as bm,J as bn,Kr as bo,Ws as bp,na as bq,ra as br,Hs as bs,Gs as bt,ci as bu,Ns as bv,ua as bw,ha as bx,ho as by,Vs as bz,A as c,Ci as c0,Jo as c1,xo as c2,Ki as c3,ia as c4,ko as c5,Qi as c6,Vo as d,y as e,Rs as f,da as g,jn as h,Xo as i,ai as j,di as k,yn as l,Wn as m,kn as n,vn as o,hr as p,Yo as q,ao as r,q as s,Hr as t,g as u,oe as v,ft as w,ht as x,bt as y,en as z};
