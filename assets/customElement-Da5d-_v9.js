const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DVGzfobf.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./ref-D9wHsL_T.js","./directive-helpers-DaBykg1t.js","./dom-DEluURzl.js","./guid-ejniuQmw.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./interactive-DTzfFku4.js","./key-CZcQa38B.js","./loadable-XBvaWFYY.js","./observers-Co4E8E8j.js","./openCloseComponent-nqWrSaIH.js","./dynamicClasses-pKEMtFzB.js","./index-XCNLEnDV.js","./resources6-Cs2_VmEC.js","./index-C7Sgjfzm.js","./index-DwIhxbHs.js","./component-CBVlbUuE.js","./index-pyEU_klK.js","./index-fFnlo_g2.js","./index-DWeq-ojO.js","./live-D7NQ-TrC.js","./keyed-CU1C-h1n.js","./static-DLD4WjLv.js","./form-BzoUrXC7.js","./label-CHHpnzD0.js","./locale-CXx8I9ox.js","./Validation-BYp9DS84.js","./useT9n-C1Hrfc-A.js","./input-DI9tZAPS.js","./index-BVlRRyQC.js","./index--OBudxYA.js","./index-BciJpaKz.js","./index-BPm91e5Z.js","./index-CMxz6F2k.js","./index-C6d66FVb.js","./index-DyXGQ9Xl.js","./customElement-_nG5icNK.js","./index-DMeQur4V.js","./FloatingArrow-BZRr6Zld.js","./useFocusTrap-COeL24Kx.js","./focusTrapComponent-D1wJZ4RD.js","./index-DK5B8inx.js","./array-BbE1dLa5.js","./index-CK-Mi3hP.js","./index-BYx-hdGk.js","./index-BtUFGore.js","./core-zHisM37C.js","./filter-D4A4y0z5.js","./escapeRegExp-CdLjXKbf.js","./utils3-Iojtwv7b.js","./index-CP8r2QEY.js","./text-C54aRk62.js","./index-CV25o1as.js","./resources4-Crg87oFz.js","./index-C6rrpqn6.js","./index-09m8YzVy.js","./math-BpAtBkbz.js","./index-Bts9-rBr.js"])))=>i.map(i=>d[i]);
import{_ as w,L as z,c as q,n as j,a as J}from"./index-4eY77cms.js";import{g as V,r as o,m as a,a as N,B as D,s as $}from"./Accessor-BmwT4B0c.js";import{V as K,d as S,v as Q,P as X}from"./reactiveUtils-XM7cS2OP.js";import{O as W,n as s,c as B,e as P}from"./jsxFactory-Cnml7uXM.js";import{n as R}from"./cast-CsZslgGN.js";import{h as Y}from"./Color-VJEMvW-n.js";import{d as I,u as k}from"./TextSymbol-BLIQ6RKX.js";import{b as G}from"./Graphic-Dt0LgVGU.js";import{f as Z}from"./intl-Duiy0OzY.js";import{h as tt}from"./UpdatingHandles-CzJ4c3KT.js";import{h as it}from"./GraphicsLayer-D3KyXpUc.js";import{e as O}from"./layerUtils-DzPrZLjb.js";import{h as et}from"./Promise-DfET-uns.js";import{P as st}from"./useWidget-BajufX8l.js";import"./Evented-Dw4_VOGn.js";import"./SimpleObservable-CvOkykwM.js";import"./uuid-Cl5lrJ4c.js";import"./JSONSupport-DcrLLGjL.js";import"./colorUtils-Rxh2V3ai.js";import"./mathUtils-Cfq9PL9W.js";import"./enumeration-DpvDkLNI.js";import"./screenUtils-_ZIvrt5o.js";import"./writer-DKgfqj4X.js";import"./Clonable-Z-AWS-16.js";import"./opacityUtils-Dim20wpZ.js";import"./Point-Cz2JYYmX.js";import"./ActionToggle-D7439N1A.js";import"./Identifiable-BHVfzH03.js";import"./jsonUtils-CwFG8yN4.js";import"./Extent-g5W9hy0j.js";import"./Polyline-s-JzsQqo.js";import"./typeUtils-B6WBEKDM.js";import"./collectionUtils-CTT-51g7.js";import"./Portal-CmmHxpLg.js";import"./vec3f64-BLpZdpfb.js";import"./aaBoundingBox-Dw3yBk2f.js";import"./GraphicsCollection-BJ5Nr2H8.js";import"./Layer-DH4_Pn8a.js";import"./TimeExtent-BO6BsF_x.js";import"./timeUtils-C1c_L2Fd.js";import"./ScaleRangeLayer-Cnzwr9PT.js";import"./layerContainerType-C5CzMsLd.js";import"./jsonUtils-DZz5FrgB.js";import"./utils-DYurMneM.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-Fi6iAz29.js";import"./common-DQOJ18NT.js";import"./ElevationInfo-BPOqhCue.js";import"./unitConversionUtils-rg07EgOm.js";import"./lengthUtils-_77UiyVF.js";import"./index-C5b9dHRB.js";import"./component-utils-D0ciaaZ_.js";let b=class extends V{constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};o([a({type:Boolean,nonNullable:!0})],b.prototype,"arrowsToggle",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"capSelect",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"colorPicker",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"stylePicker",void 0),o([a({type:Boolean,nonNullable:!0})],b.prototype,"widthInput",void 0),b=o([N("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],b);const L=b,g="esri-un-associations",v={divControlsSymbolPicker:`${g}__div-controls-symbol-picker`,dropdown:`${g}__dropdown`,dropdownItemLineCap:`${g}__dropdown-item-line-cap`,dropdownItemLinePattern:`${g}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${g}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${g}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${g}__dropdown-trigger`,labelAndToggle:`${g}__label-and-toggle`};let E=class extends W{constructor(i,e){super(i,e),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new I,this.messages=null,this.showArrows=!1,this.visibleElements=new L,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:i,lineColor:e,lineStyle:n,lineWidth:c,showArrows:l}},visibleElements:r}=this,m=this.lineSymbol;return s("div",{class:v.divControlsSymbolPicker},r.arrowsToggle?this._renderToggle(l,this.showArrows,m,"marker"):void 0,r.capSelect?this._renderLineStylePicker(i,this._lineCapTypes,m,"cap"):void 0,r.colorPicker&&m.color?this._renderColorPicker(e,m.color.toHex(),m,"color"):void 0,r.stylePicker?this._renderLineStylePicker(n,this._lineStyleTypes,m,"style"):void 0,r.widthInput?this._renderNumberInput(c,m.width.toString(),m,"width"):void 0)}loadDependencies(){return B({dropdown:()=>w(()=>import("./index-DVGzfobf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),"dropdown-group":()=>w(()=>import("./index-XCNLEnDV.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,22,26]),import.meta.url),"dropdown-item":()=>w(()=>import("./index-C7Sgjfzm.js"),__vite__mapDeps([27,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,13,14,21,29,19,26]),import.meta.url),input:()=>w(()=>import("./index-pyEU_klK.js"),__vite__mapDeps([30,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,32,33,14,34,13,35,36,19,20,37,21,38,29,39,40,41]),import.meta.url),"input-number":()=>w(()=>import("./index-BVlRRyQC.js"),__vite__mapDeps([42,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,32,33,14,34,13,36,19,20,37,21,38,29,39,41,40]),import.meta.url),label:()=>w(()=>import("./index--OBudxYA.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,9,10,11,12,37,15,16]),import.meta.url),switch:()=>w(()=>import("./index-BciJpaKz.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,36,19,20,37,21]),import.meta.url)})}_afterComponentCreate(i){"value"in i&&i.value!=null&&"setNumberValue"in i&&i.setNumberValue({committing:!1,value:i.value,origin:"direct"})}_renderColorPicker(i,e,n,c){return s("calcite-label",{scale:"s"},i,s("calcite-input",{scale:"s",type:"color",value:e,onCalciteInputInput:l=>{const r=l.currentTarget;n.set(c,new Y(r.value))}}))}_renderLineStylePicker(i,e,n,c){const l=c==="style",r="esri/widgets/UtilityNetworkAssociations/assets/img";function m(y,d){return s("calcite-dropdown-item",{label:y,selected:n[d]===y},s("div",{class:l?v.dropdownItemLinePattern:v.dropdownItemLineCap,style:`background-image:url(${R(`${r}/line-${l?"patterns":"caps"}/${y}.png`)})`}))}return s("calcite-label",{scale:"s"},i,s("calcite-dropdown",{class:v.dropdown,onCalciteDropdownSelect:y=>{const d=y.currentTarget;n.set(c,d.selectedItems[0].label)}},s("div",{class:v.dropdownTrigger,role:"button",slot:"trigger"},s("div",{class:l?v.dropdownSelectedItemLinePattern:v.dropdownSelectedItemLineCap,style:`background-image:url(${R(`${r}/line-${l?"patterns":"caps"}/${n[c]}.png`)})`})),s("calcite-dropdown-group",null,e.map(y=>m(y,c)))))}_renderNumberInput(i,e,n,c){return s("calcite-label",{scale:"s"},i,s("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:e,onCalciteInputNumberChange:l=>{const r=l.currentTarget;n.set(c,r.value)}}))}_renderToggle(i,e,n,c){return s("div",{class:v.labelAndToggle},s("calcite-label",{scale:"s"},i),s("calcite-switch",{bind:this,checked:e,onCalciteSwitchChange:l=>{l.currentTarget.checked?n.set(c,new k({style:"arrow"})):n.set(c,null)}}))}};o([a()],E.prototype,"lineSymbol",void 0),o([a(),P("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],E.prototype,"messages",void 0),o([a()],E.prototype,"showArrows",void 0),o([a({type:L,nonNullable:!0})],E.prototype,"visibleElements",void 0),E=o([N("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],E);const U=E,ot={noAssociationTypeSpecified:-2147208504};let A=class extends V{constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new tt,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new I({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new K,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new I({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await Z("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then(()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([S(()=>[this.view,this.utilityNetwork],async()=>{var r,m;const{loadErrors:i,messages:{info:{noUtilityNetwork:e,noView:n}}}=this;this._initialValidationsFinished=!1,i.removeAll();let c=!1,l=!1;this.removeAssociations(),((r=this.view)==null?void 0:r.type)==="2d"?(O(this.view,this._internalGraphicsLayerConnectivity),O(this.view,this._internalGraphicsLayerStructuralAttachment),c=!0):(this.loadErrors.push(n),D.getLogger(this).error(new $("utilityNetworkAssociations:missing-property",n))),((m=this.utilityNetwork)==null?void 0:m.type)==="utility"?l=!0:(this.loadErrors.push(e),D.getLogger(this).error(new $("utilityNetworkAssociations:missing-property",e))),c&&l&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0},{initial:!0}),S(()=>{var i;return[(i=this.view)==null?void 0:i.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]},async()=>{var i;(i=this.view)!=null&&i.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()}),S(()=>[this.showArrowsConnectivity],()=>{const i=this.connectivityAssociationsLineSymbol.clone();i.marker=null,this.showArrowsConnectivity&&(i.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const e of this._internalGraphicsLayerConnectivity.graphics)e.symbol=i}),S(()=>[this.showArrowsStructuralAttachment],()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();i.marker=null,this.showArrowsStructuralAttachment&&(i.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const e of this._internalGraphicsLayerStructuralAttachment.graphics)e.symbol=i}),S(()=>{const{cap:i,color:e,style:n,width:c,marker:l}=this.connectivityAssociationsLineSymbol;return[i,e,n,c,l]},()=>{const i=this.connectivityAssociationsLineSymbol.clone();for(const e of this._internalGraphicsLayerConnectivity.graphics)e.symbol=i;this.showArrowsConnectivity=!1,i.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,i.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),S(()=>{const{cap:i,color:e,style:n,width:c,marker:l}=this.structuralAttachmentAssociationsLineSymbol;return[i,e,n,c,l]},()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();for(const e of this._internalGraphicsLayerStructuralAttachment.graphics)e.symbol=i;this.showArrowsStructuralAttachment=!1,i.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,i.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),et(t)])})}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":this.executionError!==""?"warning":this._initialValidationsFinished?"ready":"loading"}get utilityNetwork(){return this.utilityNetwork}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}get view(){return this.view}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){var l,r,m,y;const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:i,noAssociationTypeSpecified:e}},utilityNetwork:n}=this;this._set("executionError","");const c={extent:(l=this.view)==null?void 0:l.extent,gdbVersion:(r=this.utilityNetwork)==null?void 0:r.gdbVersion,maxGeometryCount:this.maxAllowableAssociations,moment:(m=this.utilityNetwork)==null?void 0:m.historicMoment,outSpatialReference:(y=this.view)==null?void 0:y.spatialReference.clone(),returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations};this._updatingHandles.addPromise(n==null?void 0:n.synthesizeAssociationGeometries(c).then(d=>{let _=[],x=[];return d!=null&&d.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",t)):(d==null?void 0:d.associations.length)===0?(this.removeAssociations(),void this._set("executionError",i)):void(d&&(_=d==null?void 0:d.associations.filter(({associationType:C})=>C==="connectivity").map(C=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new G({geometry:C.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol}))),x=d.associations.filter(({associationType:C})=>C==="attachment").map(C=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new G({geometry:C.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol}))),this._internalGraphicsLayerConnectivity.removeAll(),_.length>0&&this._internalGraphicsLayerConnectivity.addMany(_),this._internalGraphicsLayerStructuralAttachment.removeAll(),x.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(x)))},d=>{var x;let _="Error: "+d;d instanceof $&&((x=d.details)!=null&&x.raw)&&(d.details.raw.extendedCode===ot.noAssociationTypeSpecified?_=e:_=d.details.message),this._set("executionError",_)}))}_createInternalGraphicsLayer(t){return new it({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&((t=this.view)!=null&&t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};o([a()],A.prototype,"_initialValidationsFinished",void 0),o([a()],A.prototype,"autoRefreshAssociations",void 0),o([a({type:I,nonNullable:!0})],A.prototype,"connectivityAssociationsLineSymbol",void 0),o([a({readOnly:!0})],A.prototype,"executionError",void 0),o([a({type:Boolean,value:!0})],A.prototype,"includeConnectivityAssociations",null),o([a({type:Boolean,value:!0})],A.prototype,"includeStructuralAttachmentAssociations",null),o([a()],A.prototype,"loadErrors",void 0),o([a()],A.prototype,"maxAllowableAssociations",void 0),o([a()],A.prototype,"messages",void 0),o([a()],A.prototype,"showAssociationsEnabled",void 0),o([a()],A.prototype,"showArrowsConnectivity",void 0),o([a()],A.prototype,"showArrowsStructuralAttachment",void 0),o([a({readOnly:!0})],A.prototype,"state",null),o([a({type:I,nonNullable:!0})],A.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),o([a()],A.prototype,"utilityNetwork",null),o([a()],A.prototype,"view",null),A=o([N("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],A);const H=A;let f=class extends V{constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=new L,this.structuralAttachmentAssociationsSettings=new L}};o([a({type:Boolean,nonNullable:!0})],f.prototype,"maxAllowableAssociationsSlider",void 0),o([a({type:L,nonNullable:!0})],f.prototype,"connectivityAssociationsSettings",void 0),o([a({type:L,nonNullable:!0})],f.prototype,"structuralAttachmentAssociationsSettings",void 0),f=o([N("esri.widgets.UtilityNetworkAssociations.VisibleElements")],f);const F=f,p="esri-un-associations",h={action:`${p}__action`,actionRefresh:`${p}__action-refresh`,blockContent:`${p}__block-content`,blockSectionSettings:`${p}__block-section-settings`,combobox:`${p}__combobox`,comboboxItem:`${p}__combobox-item`,divControlsMain:`${p}__div-controls-main`,label:`${p}__label`,labelAndCombobox:`${p}__label-and-combobox`,labelAndSlider:`${p}__label-and-slider`,labelAndToggle:`${p}__label-and-toggle`,panel:`${p}__panel`,slider:`${p}__slider`,statusIconContainer:`${p}__status-icon-container`,statusIconWarning:`${p}__status-icon-warning`,switch:`${p}__switch`,switchContainer:`${p}__switch-container`,widgetContainer:`${p}__widget-container`};let u=class extends W{constructor(t,i){super(t,i),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new H,this.visibleElements=new F}initialize(){this.addHandles([S(()=>{var t;return[(t=this.view)==null?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]},()=>{this.autoRefreshAssociations===!0&&(this.showAssociationsEnabled===!0?this.viewModel.showAssociations():this.viewModel.removeAssociations())}),S(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.utilityNetworks},t=>{t==null||t.items.forEach(async(i,e)=>{i.loaded||await i.load(),e===0&&(this.utilityNetwork=i)})},X),Q(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.utilityNetworks},"change",t=>{const i=t.target;t.added.forEach(async e=>{e.loaded||await e.load()}),t.removed.some(e=>{var n;return e.layerUrl===((n=this.utilityNetwork)==null?void 0:n.layerUrl)})&&(this.utilityNetwork=null),this.utilityNetwork=i.length?i.getItemAt(0):null})])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return s("div",{class:h.widgetContainer},s("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return B({action:()=>w(()=>import("./index-BPm91e5Z.js"),__vite__mapDeps([45,46,1,2,3,4,5,6,7,8,9,10,11,12,16,40,28,15,22,34,14,13,19,21,29]),import.meta.url),block:()=>w(()=>import("./index-C6d66FVb.js"),__vite__mapDeps([47,46,1,2,3,4,5,6,7,8,9,10,11,12,16,40,48,13,14,22,15,28,0,17,18,19,20,21,23,24,45,34,29,27,26,25,49,50,35,51,52,53,54,55]),import.meta.url),"block-section":()=>w(()=>import("./index-CK-Mi3hP.js"),__vite__mapDeps([56,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,44,13,14,36,19,20,37,21,34,40]),import.meta.url),icon:()=>w(()=>import("./index-DwIhxbHs.js").then(t=>t.i),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22]),import.meta.url),combobox:()=>w(()=>import("./index-BYx-hdGk.js"),__vite__mapDeps([57,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,58,13,14,21,19,20,29,40,34,33,59,60,61,18,17,36,37,23,39,62]),import.meta.url),"combobox-item":()=>w(()=>import("./index-CP8r2QEY.js"),__vite__mapDeps([63,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,34,14,19,62,29,64]),import.meta.url),label:()=>w(()=>import("./index--OBudxYA.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,9,10,11,12,37,15,16]),import.meta.url),notice:()=>w(()=>import("./index-CV25o1as.js"),__vite__mapDeps([65,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,13,14,21,66,23,29,40]),import.meta.url),panel:()=>w(()=>import("./index-C6rrpqn6.js").then(t=>t.i),__vite__mapDeps([67,46,1,2,3,4,5,6,7,8,9,10,11,12,16,40,28,15,22,45,34,14,13,19,21,29,50,17,18,23,35,51,52,53,20,54,55,48]),import.meta.url),slider:()=>w(()=>import("./index-09m8YzVy.js"),__vite__mapDeps([68,28,1,2,3,4,5,6,7,8,9,10,11,12,15,16,22,31,13,14,34,39,36,19,20,37,21,38,69,40]),import.meta.url),switch:()=>w(()=>import("./index-BciJpaKz.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,36,19,20,37,21]),import.meta.url),tooltip:()=>w(()=>import("./index-Bts9-rBr.js"),__vite__mapDeps([70,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,15,16,18,23,51,34]),import.meta.url)})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.currentTarget.checked}_getLoadErrorMessagesAsNotices(t,i){return s("calcite-notice",{closable:!1,key:`error-notice-${i}`,kind:"warning",open:!0,scale:"s"},s("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.currentTarget.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:i}}=this;i!=="ready"&&i!=="warning"||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:i}}=this;if(i)return s("calcite-block-section",{class:h.blockSectionSettings,text:t},s(U,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:i}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return s("div",{class:h.labelAndToggle,key:"connectivityAssociationsToggleDiv"},s("calcite-label",{class:h.label},t),s("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderComboboxItem({heading:t,value:i,selected:e}){return s("calcite-combobox-item",{class:h.comboboxItem,heading:t,selected:e,textLabel:t,value:i})}_renderContent(){const{viewModel:{loadErrors:t,state:i}}=this;return i==="disabled"?s("div",{class:h.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):s("calcite-panel",{class:h.panel,disabled:i==="loading"},s("div",{class:h.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,i,e){return s("div",{key:t,slot:"control"},s("calcite-action",{id:i,loading:!0,text:e}),s("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:i},s("span",null,e)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:i}}=this;if(i)return s("div",{class:h.labelAndSlider,key:"maxAllowableAssociationsSliderDiv"},s("calcite-label",{class:h.label},t),s("calcite-slider",{bind:this,class:h.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:i},viewModel:{state:e}}=this,n=`${this.id}-refresh-action`;if(e!=="disabled")return s("div",{class:h.actionRefresh,slot:"control"},s("calcite-action",{bind:this,class:h.action,icon:"refresh-f",id:n,loading:e==="loading",onclick:this._refreshAssociations,text:t}),s("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:n},s("span",null,e==="loading"?i:t)))}_renderSettingsPane(){var l,r;const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:i,connectivityAssociationsSettings:e,structuralAttachmentAssociationsSettings:n}}=this,c=(r=((l=this.view)==null?void 0:l.map).utilityNetworks)==null?void 0:r.items;if((c==null?void 0:c.length)!==1||i||e||n)return s("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},s("div",{class:h.divControlsMain},this._renderUtilityNetworkSettings(),this._renderMaxAllowableAssociationsSlider()),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:i},viewModel:{state:e}}=this,n=`${this.id}-show-associations-switch`;if(e!=="disabled")return e==="loading"?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,i):s("div",{class:h.switchContainer,key:"switchDiv",slot:"control"},s("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:h.switch,id:n,onCalciteSwitchChange:this._showAssociationsSwitchChange}),s("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:n},s("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:i,state:e}}=this;switch(e){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,i);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:i}}=this;if(i)return s("calcite-block-section",{class:h.blockSectionSettings,text:t},s(U,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:i}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return s("div",{class:h.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},s("calcite-label",{class:h.label},t),s("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_renderUtilityNetworkSettings(){var n,c;const{messages:{input:{utilityNetwork:t}}}=this,i=(c=((n=this.view)==null?void 0:n.map).utilityNetworks)==null?void 0:c.items;if((i==null?void 0:i.length)===1)return null;const e=i==null?void 0:i.map(l=>{var d;const r=l.title,m=l.layerUrl,y=l.layerUrl===((d=this.utilityNetwork)==null?void 0:d.layerUrl);return this._renderComboboxItem({heading:r,value:m,selected:y})});return s("div",{class:h.labelAndCombobox,key:"utilityNetworkComboboxDiv"},s("calcite-label",{class:h.label},t),s("calcite-combobox",{class:h.combobox,clearDisabled:!0,label:"",maxItems:3,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:l=>{const r=i==null?void 0:i.find(m=>m.layerUrl===l.currentTarget.value);this.utilityNetwork=r}},e))}_showAssociationsSwitchChange({currentTarget:t}){const{viewModel:i}=this;this.showAssociationsEnabled=t.checked,this._associationsOptionsEnabled=t.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.currentTarget.checked}_renderWarningIcon(t,i,e){return e?s("div",{class:h.statusIconContainer,key:t,slot:"control"},s("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}),s("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:i},s("span",null,e))):s("div",{class:h.statusIconContainer,key:t,slot:"control"},s("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}))}};o([a()],u.prototype,"autoRefreshAssociations",null),o([a()],u.prototype,"connectivityAssociationsLineSymbol",null),o([a()],u.prototype,"icon",null),o([a()],u.prototype,"includeConnectivityAssociations",null),o([a()],u.prototype,"includeStructuralAttachmentAssociations",null),o([a()],u.prototype,"label",null),o([a()],u.prototype,"maxAllowableAssociations",null),o([a()],u.prototype,"maxAllowableAssociationsSliderMax",null),o([a()],u.prototype,"maxAllowableAssociationsSliderMin",null),o([a()],u.prototype,"maxAllowableAssociationsSliderStep",null),o([a(),P("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],u.prototype,"messages",void 0),o([a(),P("esri/t9n/common")],u.prototype,"messagesCommon",void 0),o([a()],u.prototype,"showArrowsConnectivity",null),o([a()],u.prototype,"showArrowsStructuralAttachment",null),o([a()],u.prototype,"showAssociationsEnabled",null),o([a()],u.prototype,"structuralAttachmentAssociationsLineSymbol",null),o([a()],u.prototype,"utilityNetwork",null),o([a()],u.prototype,"view",null),o([a({type:H})],u.prototype,"viewModel",void 0),o([a({type:F,nonNullable:!0})],u.prototype,"visibleElements",void 0),u=o([N("esri.widgets.UtilityNetworkAssociations")],u);const nt=u;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const at=st(nt),M=class M extends z{constructor(){super(...arguments),this.widget=at(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.autoRefreshAssociationsDisabled=this.widget.autoRefreshAssociations,this.connectivityAssociationsLineSymbol=this.widget.connectivityAssociationsLineSymbol,this.includeConnectivityAssociationsDisabled=this.widget.includeConnectivityAssociations,this.includeStructuralAttachmentAssociationsDisabled=this.widget.includeStructuralAttachmentAssociations,this.maxAllowableAssociations=this.widget.maxAllowableAssociations,this.maxAllowableAssociationsSliderMax=this.widget.maxAllowableAssociationsSliderMax,this.maxAllowableAssociationsSliderMin=this.widget.maxAllowableAssociationsSliderMin,this.maxAllowableAssociationsSliderStep=this.widget.maxAllowableAssociationsSliderStep,this.position="bottom-left",this.showArrowsConnectivity=this.widget.showArrowsConnectivity,this.showArrowsStructuralAttachment=this.widget.showArrowsStructuralAttachment,this.showAssociationsEnabled=this.widget.showAssociationsEnabled,this.structuralAttachmentAssociationsLineSymbol=this.widget.structuralAttachmentAssociationsLineSymbol,this.utilityNetwork=this.widget.utilityNetwork,this.showConnectivityAssociationsSettingsArrowsToggle=this.widget.visibleElements.connectivityAssociationsSettings.arrowsToggle,this.visibleElementsConnectivityAssociationsSettingsArrowsToggle=!1,this.showConnectivityAssociationsSettingsCapSelect=this.widget.visibleElements.connectivityAssociationsSettings.capSelect,this.visibleElementsConnectivityAssociationsSettingsCapSelect=!1,this.hideConnectivityAssociationsSettingsColorPicker=this.widget.visibleElements.connectivityAssociationsSettings.colorPicker,this.visibleElementsConnectivityAssociationsSettingsColorPicker=!0,this.hideConnectivityAssociationsSettingsStylePicker=this.widget.visibleElements.connectivityAssociationsSettings.stylePicker,this.visibleElementsConnectivityAssociationsSettingsStylePicker=!0,this.hideConnectivityAssociationsSettingsWidthInput=this.widget.visibleElements.connectivityAssociationsSettings.widthInput,this.visibleElementsConnectivityAssociationsSettingsWidthInput=!0,this.showMaxAllowableAssociationsSlider=this.widget.visibleElements.maxAllowableAssociationsSlider,this.visibleElementsMaxAllowableAssociationsSlider=!1,this.showStructuralAttachmentAssociationsSettingsArrowsToggle=this.widget.visibleElements.structuralAttachmentAssociationsSettings.arrowsToggle,this.visibleElementsStructuralAttachmentAssociationsSettingsArrowsToggle=!1,this.showStructuralAttachmentAssociationsSettingsCapSelect=this.widget.visibleElements.structuralAttachmentAssociationsSettings.capSelect,this.visibleElementsStructuralAttachmentAssociationsSettingsCapSelect=!1,this.hideStructuralAttachmentAssociationsSettingsColorPicker=this.widget.visibleElements.structuralAttachmentAssociationsSettings.colorPicker,this.visibleElementsStructuralAttachmentAssociationsSettingsColorPicker=!0,this.hideStructuralAttachmentAssociationsSettingsStylePicker=this.widget.visibleElements.structuralAttachmentAssociationsSettings.stylePicker,this.visibleElementsStructuralAttachmentAssociationsSettingsStylePicker=!0,this.hideStructuralAttachmentAssociationsSettingsWidthInput=this.widget.visibleElements.structuralAttachmentAssociationsSettings.widthInput,this.visibleElementsStructuralAttachmentAssociationsSettingsWidthInput=!0,this.icon=this.widget.icon,this.label=this.widget.label,this.arcgisReady=q()}async destroy(){await this.manager.destroy()}async load(){var i,e;if((i=this.el.view)!=null&&i.map&&this.el.view.map.portalItem){await this.el.view.map.load();const n=(e=this.el.view.map.utilityNetworks)==null?void 0:e.getItemAt(0);await(n==null?void 0:n.load()),this.utilityNetwork=n}}willUpdate(i){this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsArrowsToggle"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsCapSelect"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsColorPicker"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsStylePicker"),this._handleVisibilityChange(i,"ConnectivityAssociationsSettingsWidthInput"),this._handleVisibilityChange(i,"MaxAllowableAssociationsSlider"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsArrowsToggle"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsCapSelect"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsStylePicker"),this._handleVisibilityChange(i,"StructuralAttachmentAssociationsSettingsWidthInput")}_handleVisibilityChange(i,e){const n=`show${e}`,c=`hide${e}`,l=`visibleElements${e}`,r=this;i.has(n)?r[l]=!!r[n]:i.has(c)?r[l]=!r[c]:i.has(l)&&(console.warn(`${this.el.tagName.toLowerCase()}: The property ${l} is deprecated. Use ${n in r?n:c} instead.`),n in r?r[n]=!!r[l]:c in r&&(r[c]=!r[l]))}};M.properties={autoDestroyDisabled:5,autoRefreshAssociationsDisabled:5,connectivityAssociationsLineSymbol:0,includeConnectivityAssociationsDisabled:5,includeStructuralAttachmentAssociationsDisabled:5,maxAllowableAssociations:9,maxAllowableAssociationsSliderMax:9,maxAllowableAssociationsSliderMin:9,maxAllowableAssociationsSliderStep:9,position:1,referenceElement:1,showArrowsConnectivity:5,showArrowsStructuralAttachment:5,showAssociationsEnabled:5,structuralAttachmentAssociationsLineSymbol:0,utilityNetwork:0,showConnectivityAssociationsSettingsArrowsToggle:5,visibleElementsConnectivityAssociationsSettingsArrowsToggle:5,showConnectivityAssociationsSettingsCapSelect:5,visibleElementsConnectivityAssociationsSettingsCapSelect:5,hideConnectivityAssociationsSettingsColorPicker:5,visibleElementsConnectivityAssociationsSettingsColorPicker:5,hideConnectivityAssociationsSettingsStylePicker:5,visibleElementsConnectivityAssociationsSettingsStylePicker:5,hideConnectivityAssociationsSettingsWidthInput:5,visibleElementsConnectivityAssociationsSettingsWidthInput:5,showMaxAllowableAssociationsSlider:5,visibleElementsMaxAllowableAssociationsSlider:5,showStructuralAttachmentAssociationsSettingsArrowsToggle:5,visibleElementsStructuralAttachmentAssociationsSettingsArrowsToggle:5,showStructuralAttachmentAssociationsSettingsCapSelect:5,visibleElementsStructuralAttachmentAssociationsSettingsCapSelect:5,hideStructuralAttachmentAssociationsSettingsColorPicker:5,visibleElementsStructuralAttachmentAssociationsSettingsColorPicker:5,hideStructuralAttachmentAssociationsSettingsStylePicker:5,visibleElementsStructuralAttachmentAssociationsSettingsStylePicker:5,hideStructuralAttachmentAssociationsSettingsWidthInput:5,visibleElementsStructuralAttachmentAssociationsSettingsWidthInput:5,icon:1,label:1},M.shadowRootOptions=j;let T=M;J("arcgis-utility-network-associations",T);export{T as ArcgisUtilityNetworkAssociations};
