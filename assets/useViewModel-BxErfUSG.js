import{p,w as a}from"./index-tefRSezt.js";import{A as l}from"./index-BkKcLxWB.js";import{p as n}from"./component-utils-DWY0IMHC.js";/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const f=(i,e)=>(t,o)=>w(t,i,o);class d extends l{hostConnected(){this.component.manager.loadedCalled&&n(this.component)}async hostLoad(){await super.hostLoad(),!this.component.manager.destroyed&&this._watchMetaProperties()}hostLoaded(){var h;const{el:e}=this.component,t=((h=e.shadowRoot)==null?void 0:h.firstElementChild)??e.firstElementChild??void 0;e.childElem=t??e.childElem;let o=!1;const c=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view,set:r=>{const m=this.component.el.view,s=r;this._instance.view=s,this._instance.map=s==null?void 0:s.map,this._watchViewDestroy(),this.component.requestUpdate("view",m),r&&!o&&(o=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),c&&(this._instance.view=c),this.component.el.isConnected&&(n(this.component),this._watchViewDestroy())}hostDisconnected(){var e,t;typeof this.component.el.childElem=="object"&&((t=(e=this.component.el.view)==null?void 0:e.ui)==null||t.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){a(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&n(this.component)}),a(this.component,"referenceElement",()=>n(this.component))}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var t;return((t=this.component.el.view)==null?void 0:t.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}}const w=p(d);export{f as u};
