import{r as l}from"./tslib.es6-B3Jf3DVX.js";import"./geometry-D964gYQX.js";import{m as i,a as x}from"./subclass-BZA_h8Db.js";import{o as m}from"./writer-DNAwXnhG.js";import{z as f}from"./TileInfo-Dphjf6xH.js";import{e as S}from"./TileInfoTilemapCache-BBp-yLg6.js";import{T as I}from"./TilemapCache-BatDkYWf.js";import{g as O}from"./Point-Cg0-ChZE.js";const b=h=>{let t=class extends h{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var r,e;(e=(r=this.tilemapCache)==null?void 0:r.destroy)==null||e.call(r)}readMinScale(r,e){return e.minLOD!=null&&e.maxLOD!=null?r:0}readMaxScale(r,e){return e.minLOD!=null&&e.maxLOD!=null?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,e,y){var u;const v=(u=e.capabilities)==null?void 0:u.includes("Tilemap");let{minLOD:n,maxLOD:a,minScale:s,maxScale:c}=e;if(n==null&&a==null&&s!==0&&c!==0){const o=p=>Math.round(1e4*p)/1e4;s=o(s||e.tileInfo.lods[0].scale),c=o(c||e.tileInfo.lods[e.tileInfo.lods.length-1].scale);for(const p of e.tileInfo.lods){const d=o(p.scale);n=d>=s?p.level:n,a=d>=c?p.level:a}}if(v)return new I({layer:this,minLOD:n,maxLOD:a});if(e.tileInfo){const o=new f;return o.read(e.tileInfo,y),new S(o,n,a)}return null}};return l([i({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),l([i()],t.prototype,"minScale",void 0),l([m("service","minScale")],t.prototype,"readMinScale",null),l([i()],t.prototype,"maxScale",void 0),l([m("service","maxScale")],t.prototype,"readMaxScale",null),l([i({type:O})],t.prototype,"spatialReference",void 0),l([i({readOnly:!0})],t.prototype,"supportsBlankTile",null),l([i({type:f})],t.prototype,"tileInfo",void 0),l([i()],t.prototype,"tilemapCache",void 0),l([m("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),l([i()],t.prototype,"version",void 0),t=l([x("esri.layers.mixins.ArcGISCachedService")],t),t};export{b as p};
