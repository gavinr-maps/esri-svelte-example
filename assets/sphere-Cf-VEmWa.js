import{ch as w,g0 as a,g6 as T,cD as P,cl as l,cE as N,cF as g,cI as $,cH as d,s as V,aa as X,g7 as j,ci as R,g8 as Y,dD as B,cG as J,g9 as h,ck as K,ga as _,eE as q,gb as Q,gc as U,g1 as W}from"./index-B1qcMJFy.js";import{L as v,a as x}from"./vec42-B-sS29RP.js";import{n as z,r as C}from"./vec4f64-CCf6w8sj.js";import{s as tt}from"./ObjectStack-aJ7Mjxbo.js";import{c as f,f as nt}from"./plane-CxxdxNVW.js";function et(t,e){const n=w(t,e)/(a(t)*a(e));return-T(n)}function D(t){return t?O(P(t.origin),P(t.direction)):O(l(),l())}function O(t,e){return{origin:t,direction:e}}function Tt(t,e){const n=it.get();return n.origin=t,n.direction=e,n}function ot(t,e,n=D()){return N(n.origin,t),g(n.direction,e,t),n}function rt(t,e,n){const o=w(t.direction,g(n,e,t.origin));return $(n,t.origin,d(n,t.direction,o)),n}const it=new tt(()=>D()),ct=E();function E(){return z()}const st=v,ut=v;function Z(t,e){return x(e,t)}function at(t,e){return C(t[0],t[1],t[2],e)}function ft(t){return t}function gt(t){t[0]=t[1]=t[2]=t[3]=0}function lt(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function M(t){return t[3]}function dt(t){return t}function pt(t,e,n,o){return C(t,e,n,o)}function ht(t,e,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+e,n}function mt(t,e,n){return V.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t!==n&&Z(t,n),n}function y(t,e,n){if(e==null||!k(t,e,m))return!1;let{t0:o,t1:r}=m;if((o<0||r<o&&r>0)&&(o=r),o<0)return!1;if(n){const{origin:i,direction:c}=e;n[0]=i[0]+c[0]*o,n[1]=i[1]+c[1]*o,n[2]=i[2]+c[2]*o}return!0}function $t(t,e,n){const o=ot(e,n);if(!k(t,o,m))return[];const{origin:r,direction:i}=o,{t0:c,t1:s}=m,u=p=>{const S=l();return W(S,r,i,p),L(t,S,S)};return Math.abs(c-s)<X()?[u(c)]:[u(c),u(s)]}const m={t0:0,t1:0};function k(t,e,n){const{origin:o,direction:r}=e,i=Mt;i[0]=o[0]-t[0],i[1]=o[1]-t[1],i[2]=o[2]-t[2];const c=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(c===0)return!1;const s=2*(r[0]*i[0]+r[1]*i[1]+r[2]*i[2]),u=s*s-4*c*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const p=Math.sqrt(u);return n.t0=(-s-p)/(2*c),n.t1=(-s+p)/(2*c),!0}const Mt=l();function yt(t,e){return y(t,e,null)}function St(t,e,n){if(y(t,e,n))return n;const o=F(t,e,f.get());return $(n,e.origin,d(f.get(),e.direction,j(e.origin,o)/a(e.direction))),n}function F(t,e,n){const o=f.get(),r=nt.get();R(o,e.origin,e.direction);const i=M(t);R(n,o,e.origin),d(n,n,1/a(n)*i);const c=G(t,e.origin),s=et(e.origin,n);return Y(r,s+c,o),B(n,n,r),n}function bt(t,e,n){return y(t,e,n)?n:(rt(e,t,n),L(t,n,n))}function L(t,e,n){const o=g(f.get(),e,t),r=d(f.get(),o,t[3]/a(o));return $(n,r,t)}function xt(t,e){const n=g(f.get(),e,t),o=J(n),r=t[3]*t[3];return Math.sqrt(Math.abs(o-r))}function G(t,e){const n=g(f.get(),e,t),o=a(n),r=M(t),i=r+Math.abs(r-o);return T(r/i)}const b=l();function H(t,e,n,o){const r=g(b,e,t);switch(n){case h.X:{const i=_(r,b)[2];return q(o,-Math.sin(i),Math.cos(i),0)}case h.Y:{const i=_(r,b),c=i[1],s=i[2],u=Math.sin(c);return q(o,-u*Math.cos(s),-u*Math.sin(s),Math.cos(c))}case h.Z:return K(o,r);default:return}}function I(t,e){const n=g(A,e,t);return a(n)-t[3]}function At(t,e,n,o){const r=I(t,e),i=H(t,e,h.Z,A),c=d(A,i,n-r);return $(o,e,c)}function Et(t,e){const n=Q(t,e),o=M(t);return n<=o*o}function Lt(t,e,n=z()){const o=j(t,e),r=t[3],i=e[3];return o+i<r?(x(n,t),n):o+r<i?(x(n,e),n):(U(n,t,e,(o+i-r)/(2*o)),n[3]=(o+r+i)/2,n)}const A=l(),Pt=E();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:ct,altitudeAt:I,angleToSilhouette:G,axisAt:H,clear:gt,closestPoint:bt,closestPointOnSilhouette:F,containsPoint:Et,copy:Z,create:E,distanceToSilhouette:xt,elevate:ht,equals:ut,exactEquals:st,fromCenterAndRadius:at,fromRadius:lt,fromValues:pt,getCenter:dt,getRadius:M,intersectLine:$t,intersectRay:y,intersectRayClosestSilhouette:St,intersectsRay:yt,projectPoint:L,setAltitudeAt:At,setExtent:mt,tmpSphere:Pt,union:Lt,wrap:ft},Symbol.toStringTag,{value:"Module"}));export{yt as I,Z as O,M as V,dt as Z,D as d,Tt as p,Et as s,E as w};
