import{M as _E,r as sE,s as PE,l as cE}from"./mathUtils-C4_ghTv4.js";import{b as $,e as EE,t as W,s as ME,z as oE,a6 as OE,Z as NE,O as iE,a7 as LE,u as GE,S as WE,G as FE,p as fE,a8 as TE,a9 as IE}from"./Point-Cg0-ChZE.js";import{s as pE}from"./geodesicConstants-DWQLYX7F.js";var E;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(E||(E={}));const HE={[E.WGS84]:{[E.CGCS2000]:r,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:r,[E.SPHERICAL_ECEF]:H,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:o,[E.PLATE_CARREE]:O,[E.WGS84]:r,[E.WGS84_ECEF]:i},[E.CGCS2000]:{[E.CGCS2000]:r,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:r,[E.SPHERICAL_ECEF]:H,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:o,[E.PLATE_CARREE]:O,[E.WGS84]:r,[E.WGS84_ECEF]:i},[E.GCSMARS2000]:{[E.CGCS2000]:null,[E.GCSMARS2000]:r,[E.GCSMOON2000]:null,[E.LON_LAT]:r,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:x,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.GCSMOON2000]:{[E.CGCS2000]:null,[E.GCSMARS2000]:null,[E.GCSMOON2000]:r,[E.LON_LAT]:r,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:y,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.WEB_MERCATOR]:{[E.CGCS2000]:I,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:I,[E.SPHERICAL_ECEF]:nE,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:r,[E.PLATE_CARREE]:eE,[E.WGS84]:I,[E.WGS84_ECEF]:CE},[E.WGS84_ECEF]:{[E.CGCS2000]:L,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:L,[E.SPHERICAL_ECEF]:SE,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:uE,[E.PLATE_CARREE]:dE,[E.WGS84]:L,[E.WGS84_ECEF]:r},[E.SPHERICAL_ECEF]:{[E.CGCS2000]:N,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:N,[E.SPHERICAL_ECEF]:r,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:aE,[E.PLATE_CARREE]:UE,[E.WGS84]:N,[E.WGS84_ECEF]:rE},[E.SPHERICAL_MARS_PCPF]:{[E.CGCS2000]:null,[E.GCSMARS2000]:v,[E.GCSMOON2000]:null,[E.LON_LAT]:v,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:r,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.SPHERICAL_MOON_PCPF]:{[E.CGCS2000]:null,[E.GCSMARS2000]:null,[E.GCSMOON2000]:z,[E.LON_LAT]:z,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:r,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.UNKNOWN]:{[E.CGCS2000]:null,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:null,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:r,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.LON_LAT]:{[E.CGCS2000]:r,[E.GCSMARS2000]:r,[E.GCSMOON2000]:r,[E.LON_LAT]:r,[E.SPHERICAL_ECEF]:H,[E.SPHERICAL_MARS_PCPF]:x,[E.SPHERICAL_MOON_PCPF]:y,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:o,[E.PLATE_CARREE]:O,[E.WGS84]:r,[E.WGS84_ECEF]:i},[E.PLATE_CARREE]:{[E.CGCS2000]:p,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:p,[E.SPHERICAL_ECEF]:KE,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:wE,[E.PLATE_CARREE]:r,[E.WGS84]:p,[E.WGS84_ECEF]:BE}};function tE(t,C,n=lE()){return t==null||C==null?null:bE(t,C,n).projector}function yE(t,C){switch(tE(t,C,RE)){case r:return"copy3";case H:return"wgs84ToSphericalECEF";case o:return"wgs84ToWebMercator";case O:return"wgs84ToPlateCarree";case i:return"wgs84ToWGS84ECEF";case I:return"webMercatorToWGS84";case nE:return"webMercatorToSphericalECEF";case CE:return"webMercatorToWGS84ECEF";case eE:return"webMercatorToPlateCarree";case L:return"wgs84ECEFToWGS84";case SE:return"wgs84ECEFToSphericalECEF";case uE:return"wgs84ECEFToWebMercator";case N:return"sphericalECEFToWGS84";case aE:return"sphericalECEFToWebMercator";case v:return"sphericalMarsPCPFToMars2000";case z:return"sphericalMoonPCPFToMoon2000";case rE:return"sphericalECEFToWGS84ECEF";case x:return"mars2000ToSphericalPCPF";case y:return"moon2000ToSphericalPCPF";default:return null}}function V(t,C){return t?C.spatialReference===t?C.spatialReferenceId:(C.spatialReference=t,"metersPerUnit"in C&&(C.metersPerUnit=oE(t,1)),OE(t)?C.spatialReferenceId=E.SPHERICAL_ECEF:NE(t)?C.spatialReferenceId=E.WGS84:iE(t)?C.spatialReferenceId=E.WEB_MERCATOR:LE(t)?C.spatialReferenceId=E.PLATE_CARREE:t.wkt===GE.wkt?C.spatialReferenceId=E.WGS84_ECEF:t.wkid===WE.CGCS2000?C.spatialReferenceId=E.CGCS2000:t.wkt===FE.wkt?C.spatialReferenceId=E.SPHERICAL_MARS_PCPF:t.wkt===fE.wkt?C.spatialReferenceId=E.SPHERICAL_MOON_PCPF:TE(t)?C.spatialReferenceId=E.GCSMARS2000:IE(t)?C.spatialReferenceId=E.GCSMOON2000:C.spatialReferenceId=E.UNKNOWN):E.UNKNOWN}function r(t,C,n,e){t!==n&&(n[e++]=t[C++],n[e++]=t[C++],n[e]=t[C])}function I(t,C,n,e){n[e]=d*(t[C]/G),n[e+1]=d*(AE-2*Math.atan(Math.exp(-t[C+1]/G))),n[e+2]=t[C+2]}function nE(t,C,n,e){const S=t[C]/G,u=AE-2*Math.atan(Math.exp(-t[C+1]/G)),l=G+t[C+2],a=Math.cos(u)*l;n[e]=Math.cos(S)*a,n[e+1]=Math.sin(S)*a,n[e+2]=Math.sin(u)*l}function CE(t,C,n,e){I(t,C,n,e),i(n,e,n,e)}function hE(t,C,n,e,S){const u=.4999999*w,l=sE(h*t[C+1],-u,u),a=Math.sin(l);n[e++]=h*t[C]*S.radius,n[e++]=S.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[e]=t[C+2]}function o(t,C,n,e){hE(t,C,n,e,W)}function O(t,C,n,e){n[e]=t[C]*X,n[e+1]=t[C+1]*X,n[e+2]=t[C+2]}function p(t,C,n,e){n[e]=t[C]*Y,n[e+1]=t[C+1]*Y,n[e+2]=t[C+2]}function eE(t,C,n,e){I(t,C,n,e),O(n,e,n,e)}function dE(t,C,n,e){L(t,C,n,e),O(n,e,n,e)}function UE(t,C,n,e){N(t,C,n,e),O(n,e,n,e)}function KE(t,C,n,e){p(t,C,n,e),H(n,e,n,e)}function wE(t,C,n,e){p(t,C,n,e),o(n,e,n,e)}function BE(t,C,n,e){p(t,C,n,e),i(n,e,n,e)}function D(t,C,n,e,S){const u=S+t[C+2],l=h*t[C+1],a=h*t[C],R=Math.cos(l)*u;n[e]=Math.cos(a)*R,n[e+1]=Math.sin(a)*R,n[e+2]=Math.sin(l)*u}function y(t,C,n,e){D(t,C,n,e,$.radius)}function x(t,C,n,e){D(t,C,n,e,EE.radius)}function H(t,C,n,e){D(t,C,n,e,W.radius)}function Z(t,C,n,e,S){const u=t[C],l=t[C+1],a=t[C+2],R=Math.sqrt(u*u+l*l+a*a),_=cE(a/(R===0?1:R)),A=Math.atan2(l,u);n[e++]=d*A,n[e++]=d*_,n[e]=R-S}function z(t,C,n,e){Z(t,C,n,e,$.radius)}function v(t,C,n,e){Z(t,C,n,e,EE.radius)}function N(t,C,n,e){Z(t,C,n,e,W.radius)}function aE(t,C,n,e){N(t,C,n,e),o(n,e,n,e)}function rE(t,C,n,e){N(t,C,n,e),i(n,e,n,e)}function mE(t,C,n,e,S){const u=h*t[C],l=h*t[C+1],a=t[C+2],R=Math.sin(l),_=Math.cos(l),A=S.radius/Math.sqrt(1-S.eccentricitySquared*R*R);n[e++]=(A+a)*_*Math.cos(u),n[e++]=(A+a)*_*Math.sin(u),n[e++]=(A*(1-S.eccentricitySquared)+a)*R}function i(t,C,n,e){mE(t,C,n,e,W)}function L(t,C,n,e){const S=pE,u=t[C],l=t[C+1],a=t[C+2];let R,_,A,c,M,B,K,s,P,U,m,b,g,F,f,j,q,k,T,J,Q;R=Math.abs(a),_=u*u+l*l,A=Math.sqrt(_),c=_+a*a,M=Math.sqrt(c),J=Math.atan2(l,u),B=a*a/c,K=_/c,F=S.a2/M,f=S.a3-S.a4/M,K>.3?(s=R/M*(1+K*(S.a1+F+B*f)/M),T=Math.asin(s),U=s*s,P=Math.sqrt(1-U)):(P=A/M*(1-B*(S.a5-F-K*f)/M),T=Math.acos(P),U=1-P*P,s=Math.sqrt(U)),m=1-W.eccentricitySquared*U,b=W.radius/Math.sqrt(m),g=S.a6*b,F=A-b*P,f=R-g*s,q=P*F+s*f,j=P*f-s*F,k=j/(g/m+q),T+=k,Q=q+j*k/2,a<0&&(T=-T),n[e++]=d*J,n[e++]=d*T,n[e]=Q}function SE(t,C,n,e){L(t,C,n,e),H(n,e,n,e)}function uE(t,C,n,e){L(t,C,n,e),o(n,e,n,e)}function bE(t,C,n){if(t==null||C==null||n.source.spatialReference===t&&n.dest.spatialReference===C)return n;const e=V(t,n.source),S=V(C,n.dest);return e===E.UNKNOWN&&S===E.UNKNOWN?ME(t,C)?n.projector=r:n.projector=null:n.projector=HE[e][S],n}function lE(){return{source:{spatialReference:null,spatialReferenceId:E.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:E.UNKNOWN,metersPerUnit:1},projector:r}}const xE={spatialReference:null,spatialReferenceId:E.UNKNOWN},zE={spatialReference:null,spatialReferenceId:E.UNKNOWN},RE=lE(),h=PE(1),d=_E(1),w=Math.PI,AE=.5*w,G=W.radius,X=G*w/180,Y=180/(G*w);function gE(t,C,n,e,S,u,l=Math.floor(t.length/3)){const a=tE(C,S,RE);if(a==null)return!1;if(a===r){if(t===e&&n===u)return!0;const _=n+3*l;for(let A=n,c=u;A<_;A++,c++)e[c]=t[A];return!0}const R=n+3*l;for(let _=n,A=u;_<R;_+=3,A+=3)a(t,_,e,A);return!0}const vE=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:gE},Symbol.toStringTag,{value:"Module"}));export{Y as A,lE as C,RE as E,V as F,tE as G,hE as H,HE as L,E as N,yE as W,bE as a,zE as e,r as f,o as h,xE as l,gE as n,vE as p,Z as y};
