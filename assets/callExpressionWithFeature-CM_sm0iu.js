import{B as u,s as c}from"./Accessor-BHnuXKD2.js";import{B as p,H as l,D as d,C as f}from"./quantizationUtils-2Az-xHPA.js";import"./Extent-CBBGeHb-.js";import"./Point-XGrwlf63.js";import"./cast-BA_-jlhc.js";import"./index-tefRSezt.js";import"./JSONSupport-CGdeqxpk.js";import"./writer-B2bQV2uU.js";import"./Polyline-BmuD2-ZN.js";import"./mathUtils-DV9iOXpW.js";function L(o,r,e,n,t){if(o==null)return null;const a=o.references("geometry")&&t?g(r,n,t):r,s=o.repurposeFeature(a);try{return o.evaluate({...e,$feature:s},o.services)}catch(m){return u.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",m),null}}const i=new Map;function g(o,r,e){const{transform:n,hasZ:t,hasM:a}=e;i.has(r)||i.set(r,y(r));const s=i.get(r)(o.geometry,n,t,a);return{...o,geometry:s}}function y(o){const r={};switch(o){case"esriGeometryPoint":return(e,n,t,a)=>f(n,r,e,t,a);case"esriGeometryPolygon":return(e,n,t,a)=>d(n,r,e,t,a);case"esriGeometryPolyline":return(e,n,t,a)=>l(n,r,e,t,a);case"esriGeometryMultipoint":return(e,n,t,a)=>p(n,r,e,t,a);default:return u.getLogger("esri.views.2d.support.arcadeOnDemand").error(new c("mapview-arcade",`Unable to handle geometryType: ${o}`)),e=>e}}export{L as default};
