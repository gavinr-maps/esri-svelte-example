import{P as m}from"./cast-BA_-jlhc.js";import{s as n}from"./Accessor-BHnuXKD2.js";import{f as u,i as g,s as v}from"./utils-Cy8wFNQo.js";import{r as w}from"./serverVersionUtils-CT0ARoHu.js";import"./index-tefRSezt.js";import"./JSONSupport-CGdeqxpk.js";const i=new Map;async function M(s,r,a,p){i.has(s)||await w(i,s);const e=i.get(s);if(((e==null?void 0:e.serverVersion)??0)<=11.1)throw new n("alterVersion:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!r)throw new n("alterVersion:missing-guid","guid for version is missing");const o=u(s),c=a.toJSON(),f=g(o.query,{query:v({...c,f:"json"}),...p,authMode:"immediate",method:"post"});r.startsWith("{")&&(r=r.slice(1,-1));const h=`${o.path}/versions/${r}/alter`,{data:t}=await m(h,f);return!!t&&t.success}export{M as alterVersion,i as serverVersionCacheMap};
