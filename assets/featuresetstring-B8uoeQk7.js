import{a as o,H as m,ab as b,m as p,B as c,ac as f,b as d,r as u,ad as T,N as y,W as v,ae as A,af as g,ag as x,ah as V,P as F,ai as P,aj as j,ak as w}from"./arcadeUtils-CEAwR0QG.js";import"./geometry-DpwwkAX1.js";import"./subclass-BR3PhgZG.js";import"./Extent-DHjqVB-p.js";import"./Evented-CXIxDjmW.js";import"./Accessor-D6mNnsWy.js";import"./Point-DB4Hp4hH.js";import"./jsonMap-DCC6W5ex.js";import"./writer-3zufXUNV.js";import"./assets-C2mb-ea2.js";import"./index-CeCSsEgo.js";import"./Polyline-D97hl-6E.js";import"./mathUtils-ClvKsMak.js";import"./TimeOnly-cvONhzoK.js";import"./UnknownTimeZone-D0GlcniK.js";import"./Promise-CZrWwByK.js";import"./ImmutableArray-BPVd6ESQ.js";import"./Field-C8SaaeoI.js";import"./enumeration--HlxOQ_N.js";import"./fieldType-CIG5ey7e.js";import"./number-CrcpkfNb.js";import"./jsonUtils-Cma_7A64.js";import"./featureConversionUtils-DdoZh_25.js";import"./aaBoundingBox-rJEWaOSN.js";import"./OptimizedFeature-7juV2tZm.js";import"./OptimizedGeometry-vU5jWBvU.js";import"./OptimizedFeatureSet-Blu9Ckm7.js";import"./FieldsIndex-IOXc-mnc.js";import"./fieldUtils-CNduWQU9.js";import"./intl-Dpfm8vPB.js";import"./hash-CcEbRgUF.js";import"./uuid-fwrPAdZb.js";import"./Portal-liet8xHC.js";function l(a,n){return a&&a.domain?a.domain.type==="coded-value"||a.domain.type==="codedValue"?y.convertObjectToArcadeDictionary({type:"codedValue",name:a.domain.name,dataType:w[a.field.type],codedValues:a.domain.codedValues.map(e=>({name:e.name,code:e.code}))},v(n)):y.convertObjectToArcadeDictionary({type:"range",name:a.domain.name,dataType:w[a.field.type],min:a.domain.minValue,max:a.domain.maxValue},v(n)):null}function ot(a){a.mode==="async"&&(a.functions.domain=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,2,3,n,e),m(t[0]))return l(b(t[0],p(t[1]),t[2]===void 0?void 0:t[2]),n);if(c(t[0]))return await t[0]._ensureLoaded(),l(f(p(t[1]),t[0],null,t[2]===void 0?void 0:t[2]),n);throw new d(n,u.InvalidParameter,e)})},a.functions.subtypes=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,1,1,n,e),m(t[0])){const r=T(t[0]);return r?y.convertObjectToArcadeDictionary(r,v(n)):null}if(c(t[0])){await t[0]._ensureLoaded();const r=t[0].subtypeMetaData();return r?y.convertObjectToArcadeDictionary(r,v(n)):null}throw new d(n,u.InvalidParameter,e)})},a.functions.domainname=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,2,4,n,e),m(t[0]))return A(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const r=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return g(r,t[2])}throw new d(n,u.InvalidParameter,e)})},a.signatures.push({name:"domainname",min:2,max:4}),a.functions.domaincode=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,2,4,n,e),m(t[0]))return x(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const r=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return V(r,t[2])}throw new d(n,u.InvalidParameter,e)})},a.signatures.push({name:"domaincode",min:2,max:4}),a.functions.text=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,1,2,n,e),c(t[0])){const r=F(t[1],"");if(r==="")return t[0].castToText();if(r.toLowerCase()==="schema")return t[0].convertToText("schema",i.abortSignal);if(r.toLowerCase()==="featureset")return t[0].convertToText("featureset",i.abortSignal);throw new d(n,u.InvalidParameter,e)}return P(t[0],t[1])})},a.functions.gdbversion=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,1,1,n,e),m(t[0]))return t[0].gdbVersion();if(c(t[0]))return(await t[0].load()).gdbVersion;throw new d(n,u.InvalidParameter,e)})},a.functions.schema=function(n,e){return a.standardFunctionAsync(n,e,async(i,s,t)=>{if(o(t,1,1,n,e),c(t[0]))return await t[0].load(),y.convertObjectToArcadeDictionary(t[0].schema(),v(n));if(m(t[0])){const r=j(t[0]);return r?y.convertObjectToArcadeDictionary(r,v(n)):null}throw new d(n,u.InvalidParameter,e)})})}export{ot as registerFunctions};
