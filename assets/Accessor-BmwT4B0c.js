function ao(e,t,r,n){var s,o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function lo(e,t){return function(r,n){t(r,n,e)}}function co(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(f){try{u(n.next(f))}catch(h){i(h)}}function l(f){try{u(n.throw(f))}catch(h){i(h)}}function u(f){f.done?o(f.value):s(f.value).then(a,l)}u((n=n.apply(e,[])).next())})}function uo(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}return t}var Wr=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function fo(e){function t(o){e.error=e.hasError?new Wr(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return t(i),s()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}const Gr={remove:()=>{}};function y(e){return e?{remove(){e&&(e(),e=void 0)}}:Gr}function Ut(e){e.forEach(t=>t==null?void 0:t.remove())}function ho(e){Ut(e),e.length=0}function Hr(e){return y(()=>Ut(e))}function po(e){return y(()=>{var t;return(t=e())==null?void 0:t.remove()})}function go(e){return y(()=>e==null?void 0:e.abort())}function yo(e){return y(e!=null?()=>e.destroy():void 0)}function Jr(e){return{setTimeout:(t,r)=>{const n=e.setTimeout(t,r);return y(()=>e.clearTimeout(n))}}}const Kr=Jr(globalThis);let k;function c(e){return typeof k[e]=="function"?k[e]=k[e](globalThis):k[e]}var Mt,It,Dt,xt;k=(Mt=globalThis.dojoConfig)!=null&&Mt.has||(It=globalThis.esriConfig)!=null&&It.has?{...(Dt=globalThis.dojoConfig)==null?void 0:Dt.has,...(xt=globalThis.esriConfig)==null?void 0:xt.has}:{},c.add=(e,t,r,n)=>{(n||k[e]===void 0)&&(k[e]=t),r&&c(e)},c.cache=k,c.add("big-integer-warning-enabled",!0),c.add("esri-deprecation-warnings",!0),c.add("esri-tests-disable-screenshots",!1),c.add("esri-tests-use-full-window",!1),c.add("esri-tests-post-to-influx",!0),c.add("esri-cim-animations-enable-status","enabled"),c.add("esri-cim-animations-spotlight",!1),c.add("esri-cim-animations-freeze-time",!1),c.add("enable-feature:multiple-highlights",!0),(()=>{var t;c.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(c.add("host-browser",e),c.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),c.add("dom",e),c("host-browser")){const r=navigator,n=r.userAgent,s=r.appVersion,o=parseFloat(s);if(c.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),c.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),c.add("khtml",s.includes("Konqueror")?o:void 0),c.add("edge",parseFloat(n.split("Edge/")[1])||void 0),c.add("opr",parseFloat(n.split("OPR/")[1])||void 0),c.add("webkit",!c("wp")&&!c("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),c.add("chrome",!c("edge")&&!c("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),c.add("android",!c("wp")&&parseFloat(n.split("Android ")[1])||void 0),c.add("safari",!s.includes("Safari")||c("wp")||c("chrome")||c("android")||c("edge")||c("opr")?void 0:parseFloat(s.split("Version/")[1])),c.add("mac",s.includes("Macintosh")),!c("wp")&&/(iPhone|iPod|iPad)/.test(n)){const i=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));c.add(i,l),c.add("ios",l)}c("webkit")||(!n.includes("Gecko")||c("wp")||c("khtml")||c("edge")||c.add("mozilla",o),c("mozilla")&&c.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&c.add("esri-mobile",t),r&&c.add("esri-iPhone",r),c.add("esri-geolocation",!!navigator.geolocation)}c.add("esri-wasm","WebAssembly"in globalThis),c.add("esri-performance-mode-frames-between-render",20),c.add("esri-force-performance-mode",!1),c.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),c.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),c.add("esri-atomics","Atomics"in globalThis),c.add("esri-workers","Worker"in globalThis),c.add("web-feat:cache","caches"in globalThis),c.add("esri-workers-arraybuffer-transfer",!c("safari")||Number(c("safari"))>=12),c.add("workers-pool-size",8),c.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),c.add("featurelayer-simplify-payload-size-factors",[1,1,4]),c.add("featurelayer-fast-triangulation-enabled",!0),c.add("featurelayer-animation-enabled",!0),c.add("featurelayer-snapshot-enabled",!0),c.add("featurelayer-snapshot-point-min-threshold",8e4),c.add("featurelayer-snapshot-point-max-threshold",4e5),c.add("featurelayer-snapshot-point-coverage",.1),c.add("featurelayer-query-max-depth",4),c.add("featurelayer-query-pausing-enabled",!1),c.add("featurelayer-advanced-symbols",!1),c.add("featurelayer-pbf",!0),c.add("featurelayer-pbf-statistics",!1),c.add("feature-layers-workers",!0),c.add("feature-polyline-generalization-factor",1),c.add("mapview-transitions-duration",200),c.add("mapview-essential-goto-duration",200),c.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),c.add("mapserver-pbf-version-support",10.81),c.add("mapservice-popup-identify-max-tolerance",20),c.add("request-queue-concurrency-hosted",16),c.add("request-queue-concurrency-non-hosted",4),c.add("curve-densification-coarse-segments",128),c.add("curve-densification-max-segments",2e3),c.add("curve-densification-min-segments",3),c.add("curve-densification-pixels-per-segment",16),c.add("view-readyState-waiting-delay",1e3),c.add("gradient-depth-bias",.01),c.add("gradient-depth-epsilon",1e-8),c("host-webworker")||c("host-browser")&&(c.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),c.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{c.add("esri-image-decode",!0,!0,!0)}).catch(()=>{c.add("esri-image-decode",!1,!0,!0)})}return!1}),c.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function mo(e){}function $o(e){return()=>e}function bo(e){return e}let J=class S{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*S._m}getInt(){return this._seed=(S._a*this._seed+S._c)%S._m,this._seed}getFloat(){return this.getInt()/(S._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const n=r-t;return t+this.getInt()/S._m*n}};J._m=2147483647,J._a=48271,J._c=0;const Yr=1.5,vo=1/Yr,_o=.5;function wo(e,t){if(!t)return e;for(const r of t)e.push(r);return e}function zt(e){return e}function Zr(e,t=zt){if(!e||e.length===0)return;let r=e[0],n=t(r);for(let s=1;s<e.length;++s){const o=e[s],i=Number(t(o));i>n&&(n=i,r=o)}return r}function Ao(e,t=zt){return Zr(e,r=>-t(r))}function To(e,t){return t?e.filter((r,n,s)=>s.findIndex(t.bind(null,r))===n):Array.from(new Set(e))}function Xr(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ko(e,t){let r=e.length!==t.length;r&&(e.length=t.length);for(let n=0;n<t.length;++n)e[n]!==t[n]&&(e[n]=t[n],r=!0);return r}function Oo(e,t,r){let n,s;return r?(n=t.filter(o=>!e.some(i=>r(i,o))),s=e.filter(o=>!t.some(i=>r(i,o)))):(n=t.filter(o=>!e.includes(o)),s=e.filter(o=>!t.includes(o))),{added:n,removed:s}}function So(e){return e&&typeof e.length=="number"}function Eo(e,t){const r=e.length;if(r===0)return[];const n=[];for(let s=0;s<r;s+=t)n.push(e.slice(s,s+t));return n}function jo(e,t,r){const n=e.length;let s=0,o=n-1;for(;s<o;){const a=s+Math.floor((o-s)/2);t>e[a]?s=a+1:o=a}const i=e[s];return r?t>=e[n-1]?-1:i===t?s:s-1:i===t?s:-1}let Ft=class{constructor(){this.last=0}};const Lt=new Ft;function Se(e,t,r,n){n=n||Lt;const s=Math.max(0,n.last-10);for(let i=s;i<r;++i)if(e[i]===t)return n.last=i,i;const o=Math.min(s,r);for(let i=0;i<o;++i)if(e[i]===t)return n.last=i,i;return-1}function Co(e,t,r,n){const s=e.length,o=Se(e,t,s,n);if(o!==-1)return e[o]=e[s-1],e.pop(),t}const v=new Set;function Qr(e,t,r=e.length,n=t.length,s,o){if(n===0||r===0)return r;v.clear();for(let a=0;a<n;++a)v.add(t[a]);s=s||Lt;const i=Math.max(0,s.last-10);for(let a=i;a<r;++a)if(v.has(e[a])&&(o==null||o.push(e[a]),v.delete(e[a]),e[a]=e[r-1],--r,--a,v.size===0||r===0))return v.clear(),r;for(let a=0;a<i;++a)if(v.has(e[a])&&(o==null||o.push(e[a]),v.delete(e[a]),e[a]=e[r-1],--r,--a,v.size===0||r===0))return v.clear(),r;return v.clear(),r}function Po(e,t){let r=0;for(let n=0;n<e.length;++n){const s=e[n];t(s,n)&&(e[r]=s,r++)}e.length=r}function Mo(e,t,r){const n=e.length;if(t>=n)return e.slice();const s=qt(r),o=new Set,i=[];for(;i.length<t;){const a=Math.floor(s()*n);o.has(a)||(o.add(a),i.push(e[a]))}return i}function qt(e){return e?(st.seed=e,()=>st.getFloat()):Math.random}const st=new J;function Io(e,t){const r=qt(t);for(let n=e.length-1;n>0;n--){const s=Math.floor(r()*(n+1)),o=e[n];e[n]=e[s],e[s]=o}return e}function en(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Do(e,t){return e!=null}const xo=[];function Ro(e){return e instanceof ArrayBuffer}function We(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function Bt(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function Vt(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function Ge(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function Wt(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function He(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function Gt(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function fe(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function he(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function Uo(e){return"buffer"in e}const zo=1024;function Fo(e){return he(e)||fe(e)||He(e)||Ge(e)||We(e)}function Lo(e){return he(e)||fe(e)}function qo(e){return he(e)?179769e303:fe(e)?3402823e32:Gt(e)?4294967295:Wt(e)?65535:Bt(e)||Vt(e)?255:He(e)?2147483647:Ge(e)?32767:We(e)?127:256}function Bo(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function A(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=Yt(e);if(t!=null)return t;if(Ht(e))return e.clone();if(Jt(e))return e.map(A);if(Kt(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const n of Object.getOwnPropertyNames(e))r[n]=A(e[n]);return r}function ot(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=Yt(e);if(t!=null)return t;if(Jt(e)){let n=!0;const s=e.map(o=>{const i=ot(o);return o!=null&&i==null&&(n=!1),i});return n?s:null}if(Ht(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(Kt(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const n of Object.getOwnPropertyNames(e)){const s=e[n],o=ot(s);if(s!=null&&o==null)return null;r[n]=o}return r}function Ht(e){return typeof e.clone=="function"}function Jt(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function Kt(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function it(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Yt(e){if(We(e)||Bt(e)||Vt(e)||Ge(e)||Wt(e)||He(e)||Gt(e)||fe(e)||he(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,n]of e)t.set(r,A(n));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(A(r));return t}return null}function Je(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function tn(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Xr(e,t):e instanceof Set?t instanceof Set&&nn(e,t):e instanceof Map?t instanceof Map&&sn(e,t):!!it(e)&&it(t)&&rn(e,t))}function rn(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const n of r)if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}function nn(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function sn(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e){const s=t.get(r);if(s!==n||s===void 0&&!t.has(r))return!1}return!0}function on(e,t,r=!1){return Qt(e,t,r)}function Zt(e,t){if(t!=null)return t[e]||Xt(e.split("."),!1,t)}function de(e,t,r){const n=e.split("."),s=n.pop(),o=Xt(n,!0,r);o&&s&&(o[s]=t)}function at(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let n=0;n<e.length;n++)if(at(e[n],r[n]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(at(e[r],t[r]))return!0;return!1}return e!==t}function Xt(e,t,r){let n=r;for(const s of e){if(n==null)return;if(!(s in n)){if(!t)return;n[s]={}}n=n[s]}return n}function Qt(e,t,r){return t?Object.keys(t).reduce((n,s)=>{let o=n[s],i=t[s];return o===i?n:o===void 0?(n[s]=A(i),n):(Array.isArray(i)||Array.isArray(n)?(o=o?Array.isArray(o)?n[s]=o.slice():n[s]=[o]:n[s]=[],i&&(Array.isArray(i)||(i=[i]),r?i.forEach(a=>{o.includes(a)||o.push(a)}):n[s]=i.slice())):i&&typeof i=="object"?n[s]=Qt(o,i,r):n.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(n[s]=i),n)},e||{}):e}var Rt;const T={apiKey:void 0,applicationName:"",applicationUrl:(Rt=globalThis.location)==null?void 0:Rt.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(on(T,globalThis.esriConfig,!0),delete T.has),!T.assetsPath){{const e="4.32";T.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}T.defaultAssetsPath=T.assetsPath}const an=/\{([^}]+)\}/g;function lt(e){return e??""}function Vo(e,t){return t?e.replaceAll(an,typeof t=="object"?(r,n)=>lt(Zt(n,t)):(r,n)=>lt(t(n))):e}function Wo(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function ln(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let ct;function Go(e){return ct??(ct=new DOMParser),ct.parseFromString(e||"","text/html").body.innerText||""}function Ho(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function Jo(e,...t){let r=e[0];for(let n=0;n<t.length;++n)r+=t[n]+e[n+1];return r}const ut={info:0,warn:1,error:2,none:3};let b=class ${constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,$._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=$.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,$._loggers.get(t)||new $({module:t})}_log(t,r,...n){if(this._matchLevel(t)){if(r!=="always"&&!$._throttlingDisabled){const s=un(n),o=this._loggedMessages[t].get(s);if(r==="once"&&o!=null||r==="oncePerTick"&&o&&o>=$._tickCounter)return;this._loggedMessages[t].set(s,$._tickCounter),$._scheduleTickCounterIncrement()}for(const s of T.log.interceptors)if(s(t,this.module,...n))return;this._inheritedWriter()(t,this.module,...n)}}_parentWithMember(t,r){let n=this;for(;n!=null;){const s=n[t];if(s!=null)return s;n=n.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",cn)}_matchLevel(t){const r=T.log.level||"warn";return ut[this._parentWithMember("level",r)]<=ut[t]}static _scheduleTickCounterIncrement(){$._tickCounterScheduled||($._tickCounterScheduled=!0,Promise.resolve().then(()=>{$._tickCounter++,$._tickCounterScheduled=!1}))}};function cn(e,t,...r){console[e](`[${t}]`,...r)}function un(...e){return ln(JSON.stringify(e,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}b._loggers=new Map,b._tickCounter=0,b._tickCounterScheduled=!1,b._throttlingDisabled=!1;function fn(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,n)=>n===""?"$":(Zt(n,t)??"").toString())}let er=class{constructor(t,r,n=void 0){this.name=t,this.details=n,this.message=(r&&fn(r,n))??""}toString(){return"["+this.name+"]: "+this.message}},q=class tr extends er{constructor(t,r,n){super(t,r,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return A(r)}catch{return"[object]"}}))}}catch(t){throw b.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new tr(t.name,t.message,t.details)}};q.prototype.type="error";function rr(e){return hn(e)||nr(e)}function hn(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function nr(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function dn(e,t,r){if(!rr(e))throw new TypeError("target is not a Evented or EventTarget object");return nr(e)?pn(e,t,r):e.on(t,r)}function pn(e,t,r,n){if(Array.isArray(t)){const s=t.slice();for(const o of s)e.addEventListener(o,r,n);return y(()=>{for(const o of s)e.removeEventListener(o,r,n)})}return e.addEventListener(t,r,n),y(()=>e.removeEventListener(t,r,n))}function sr(e,t,r){if(!rr(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const n=dn(e,t,s=>{n.remove(),r.call(e,s)});return n}function Yo(e,t){if(e==null)throw new Error(t??"value is None")}function gn(e){return e==null||e.destroy(),null}function Zo(e){return e==null||e.dispose(),null}function yn(e){return e==null||e.remove(),null}function Xo(e){return e==null||e.abort(),null}function Qo(e){return e==null||e.release(),null}function ei(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function ti(e,t){return e==null?void 0:e[t]}function ri(e,t){let r;return e.some((n,s)=>(r=t(n,s),r!=null)),r??void 0}function I(e="Aborted"){return new q("AbortError",e)}function or(e,t="Aborted"){if(ir(e))throw I(t)}function pe(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function ir(e){const t=pe(e);return t!=null&&t.aborted}function ni(e){if(ge(e))throw e}function si(e){if(!ge(e))throw e}function Q(e,t){const r=pe(e);if(r!=null){if(!r.aborted)return sr(r,"abort",()=>t());t()}}function oi(e,t){const r=pe(e);if(r!=null)return or(r),sr(r,"abort",()=>t(I()))}function ii(e,t){return pe(t)==null?e:new Promise((r,n)=>{let s=Q(t,()=>n(I()));const o=()=>{s=yn(s)};e.then(o,o),e.then(r,n)})}function ge(e){return(e==null?void 0:e.name)==="AbortError"}async function ai(e){try{return await e}catch(t){if(!ge(t))throw t;return}}async function li(e,t=b.getLogger("esri")){try{return await e}catch(r){ge(r)||t.error(r)}}async function mn(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),n=r.map(i=>e[i]),s=await mn(n),o={};return r.map((i,a)=>o[i]=s[a]),o}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(n,s)=>{const o=r[s];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))}async function ci(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function ui(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function $n(e,t=void 0,r){const n=new AbortController;return Q(r,()=>n.abort()),new Promise((s,o)=>{let i=setTimeout(()=>{i=0,s(t)},e);Q(n,()=>{i&&(clearTimeout(i),o(I()))})})}function fi(e,t,r,n){const s=r&&"abort"in r?r:null;n!=null||s||(n=r);let o=setTimeout(()=>{o=0,s==null||s.abort()},t);const i=()=>n||new q("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(a=>{if(o===0)throw i();return clearTimeout(o),a},a=>{throw clearTimeout(o),o===0?i():a})}function hi(e,t){const r=new AbortController,n=setTimeout(()=>r.abort(),t);return Q(e,()=>{r.abort(),clearTimeout(n)}),{...e,signal:r.signal}}function bn(e){return e&&typeof e.then=="function"}function ft(e){return bn(e)?e:Promise.resolve(e)}function di(e,t=-1){let r,n,s,o,i=null;const a=(...l)=>{if(r){n=l,o&&o.reject(I()),o=Ee();const p=o.promise;if(i){const C=i;i=null,C.abort()}return p}if(s=o||Ee(),o=null,t>0){const p=new AbortController;r=ft(e(...l,p.signal));const C=r;$n(t).then(()=>{r===C&&(o?p.abort():i=p)})}else r=1,r=ft(e(...l));const u=()=>{const p=n;n=s=r=i=null,p!=null&&a(...p)},f=r,h=s;return f.then(u,u),f.then(h.resolve,h.reject),h.promise};return a}function Ee(){let e,t;const r=new Promise((s,o)=>{e=s,t=o}),n=s=>{e(s)};return n.resolve=s=>e(s),n.reject=s=>t(s),n.timeout=(s,o)=>Kr.setTimeout(()=>n.reject(o),s),n.promise=r,n}function pi(e,t){return e.then(t,t)}async function gi(e){await Promise.resolve(),or(e)}function yi(e,t){for(const r of e.values())if(t(r))return!0;return!1}function mi(e,t){for(const r of e.values())if(t(r))return r;return null}function vn(e,t,r){const n=e.get(t);if(n!==void 0)return n;const s=r();return e.set(t,s),s}function $i(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const P=()=>b.getLogger("esri.core.accessorSupport.ensureTypes");function _n(e){return e==null?e:new Date(e)}function wn(e){return e==null?e:!!e}function An(e){return e==null?e:e.toString()}function Tn(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function kn(e){return e==null?e:Math.round(parseFloat(e))}function On(e){return null}function Sn(e,t){return r=>{let n=e(r);return t.step!=null&&(n=Math.round(n/t.step)*t.step),t.min!=null&&(n=Math.max(t.min,n)),t.max!=null&&(n=Math.min(t.max,n)),n}}function ar(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function ee(e,t){return t!=null&&e&&!(t instanceof e)}function lr(e){return e&&"isCollection"in e}function ht(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function En(e,t){if(!(t!=null&&t.constructor)||!lr(t.constructor))return je(e,t)?t:new e(t);const r=ht(e.prototype.itemType),n=ht(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(je(e,t),t):new e(t):t}function je(e,t){return!!ar(t)&&(P().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+ye(e)+"'"),!0)}function jn(e,t){return t==null?t:lr(e)?En(e,t):ee(e,t)?je(e,t)?t:new e(t):t}function ye(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const Nn=new WeakMap;function Cn(e){switch(e){case Number:return t=>Tn(t);case Ke:return kn;case Boolean:return wn;case String:return An;case Date:return _n;case Ye:return On;default:return vn(Nn,e,()=>jn.bind(null,e))}}function j(e,t){const r=Cn(e);return arguments.length===1?r:r(t)}function z(e,t,r){return arguments.length===1?z.bind(null,e):t&&(Array.isArray(t)?t.map(n=>e(n,r)):[e(t,r)])}function Pn(e,t){return arguments.length===1?z(r=>j(e,r)):z(r=>j(e,r),t)}function cr(e,t,r){return t!==0&&Array.isArray(r)?r.map(n=>cr(e,t-1,n)):e(r)}function te(e,t,r){if(arguments.length===2)return o=>te(e,t,o);if(!r)return r;r=cr(e,t,r);let n=t,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let o=0;o<n;o++)r=[r];return r}function Mn(e,t,r){return arguments.length===2?te(n=>j(e,n),t):te(n=>j(e,n),t,r)}function ur(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Ne(e,t){if(arguments.length===2)return Ne(e).call(null,t);const r=new Set,n=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let o=null,i=null;return(a,l)=>{if(a==null)return a;const u=typeof a,f=u==="string"||u==="number";return f&&(r.has(a)||s.some(h=>u==="string"&&h===String||u==="number"&&h===Number))||u==="object"&&s.some(h=>!ee(a,h))?a:(f&&n.length?(o||(o=n.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),P().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof a=="object"&&s.length?(i||(i=s.map(h=>ye(h)).join(", ")),P().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${i}`)):P().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Ce(e,t){if(arguments.length===2)return Ce(e).call(null,t);const r={},n=[],s=[];for(const l in e.typeMap){const u=e.typeMap[l];r[l]=j(u),n.push(ye(u)),s.push(l)}const o=()=>`'${n.join("', '")}'`,i=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!ee(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,f=r[u];if(!f)return P().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!ee(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!ar(l)){const h={};for(const p in l)p!==e.key&&(h[p]=l[p]);return f(h)}return f(l)}}let Ke=class{},Ye=class{};const _i={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function In(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function fr(e){switch(e.type){case"native":return j(e.value);case"array":return z(fr(e.value));case"one-of":return Dn(e);default:return null}}function Dn(e){let t=null;return(r,n)=>Me(r,e)?r:(t==null&&(t=Pe(e)),P().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}function Pe(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ke:return"integer";case Date:return"date";case Ye:return"null";default:return ye(e.value)}case"array":return`array of ${Pe(e.value)}`;case"one-of":{const t=e.values.map(r=>Pe(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Me(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ke:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Ye:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!Me(r,t.value));case"one-of":return t.values.some(r=>Me(e,r))}}function hr(e){return e.__accessor__??null}function xn(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function Rn(e,t,r){return r?re(e,t,{policy:r,path:""}):re(e,t,null)}function re(e,t,r){return t?Object.keys(t).reduce((n,s)=>{const o=s;let i=null,a="merge";if(r&&(i=r.path?`${r.path}.${s}`:s,a=r.policy(i)),a==="replace"||a==="replace-arrays"&&Array.isArray(n[o]))return n[o]=t[o],n;if(n[o]===void 0)return n[o]=A(t[o]),n;let l=n[o],u=t[o];if(l===u)return n;if(Array.isArray(u)||Array.isArray(n))l=l?Array.isArray(l)?n[o]=l.slice():n[o]=[l]:n[o]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(f=>{l.includes(f)||l.push(f)}));else if(u&&typeof u=="object")if(r){const f=r.path;r.path=i,n[o]=re(l,u,r),r.path=f}else n[o]=re(l,u,null);else n.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(n[o]=u);return n},e||{}):e}function dr(e){return Array.isArray(e)?e:e.split(".")}function dt(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Un(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...dt(r));return t}return dt(e)}function pr(e,t,r,n){const s=Un(t);if(s.length!==1){const o=s.map(i=>n(e,i,r));return Hr(o)}return n(e,s[0],r)}function gr(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=hr(t);return xn(n,r)?n.get(r):t[r]}function yr(e,t,r){if(e==null)return e;const n=gr(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:yr(n,t,r+1)}function me(e,t,r=0){return typeof t!="string"||t.includes(".")?yr(e,dr(t),r):gr(t,e)}function ne(e,t){return me(e,t)}function wi(e,t){return me(t,e)!==void 0}function B(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const n in t)t[n]=A(t[n]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function mr(e,t){const r=B(e);let n=r[t];return n||(n=r[t]={}),n}function zn(e,t){return Rn(e,t,Ln)}const Fn=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Ln(e){return Fn.test(e)?"replace":"merge"}function se(e,t,r){if(e&&t)if(typeof t=="object")for(const n of Object.getOwnPropertyNames(t))se(e,n,t[n]);else{if(t.includes(".")){const s=t.split("."),o=s.splice(-1,1)[0];return void se(ne(e,s),o,r)}const n=e.__accessor__;n!=null&&qn(t,n),e[t]=r}}function qn(e,t){if(c("esri-unknown-property-errors")&&!Bn(e,t))throw new q("set:unknown-property",Vn(e,t))}function Bn(e,t){return t.metadata[e]!=null}function Vn(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function Wn(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(t,r),s=mr(t,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in e&&b.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=n.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const o=e.aliasOf;if(o){const l=typeof o=="string"?o:o.source,u=typeof o=="string"?null:o.overridable===!0;let f;s.dependsOn=[l],s.get=function(){let h=ne(this,l);if(typeof h=="function"){f||(f=l.split(".").slice(0,-1).join("."));const p=ne(this,f);p&&(h=h.bind(p))}return h},s.readOnly||(s.set=u?function(h){this._override(r,h)}:function(h){se(this,l,h)})}const i=e.type,a=e.types;if(!s.cast){let l;i?l=Gn(i):a&&(l=Array.isArray(a)?z(Ce(a[0])):Ce(a)),e.cast=Hn(e.cast,l)}zn(s,e),e.range&&(s.cast=Sn(s.cast,e.range))}}function Ai(e,t,r){const n=mr(e,r);n.json||(n.json={});let s=n.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function Gn(e){let t=0,r=e;if(In(e))return fr(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const n=r;if(ur(n))return t===0?Ne(n):te(Ne(n),t);if(t===1)return Pn(n);if(t>1)return Mn(n,t);const s=e;return s.from?s.from:j(s)}function Hn(e,t){if(e||t)return e?t?(r,n)=>t(e(r,n),n):e:t}const $r=Symbol("Accessor-beforeDestroy");var m;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(m||(m={}));var d;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(d||(d={}));let $e=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const oe=new $e,x=[];let R=oe;function be(e){R.onAccessed(e)}let K=!1,Y=!1;function O(e,t,r){if(K)return Ze(e,t,r);let n=null;return br(e),n=t.call(r),vr(),n}function Jn(e,t){return O(oe,e,t)}function Ze(e,t,r){const n=K;K=!0,br(e);let s=null;try{s=t.call(r)}catch(o){Y&&b.getLogger("esri.core.accessorSupport.tracking").error(o)}return vr(),K=n,s}function br(e){R=e,x.push(e)}function vr(){const e=x.length;if(e>1){const t=x.pop();R=x[e-2],t.onTrackingEnd()}else if(e===1){const t=x.pop();R=oe,t.onTrackingEnd()}else R=oe}function _r(e,t){if(t.flags&d.DepTrackingInitialized)return;t.flags|=d.DepTrackingInitialized;const r=Y;Y=!1,t.flags&d.AutoTracked?Ze(t.trackingTarget,t.metadata.get,e):wr(e,t),Y=r}const Kn=[];function wr(e,t){t.flags&d.ExplicitlyTracking||(t.flags|=d.ExplicitlyTracking,Ze(t.trackingTarget,()=>{const r=t.metadata.dependsOn||Kn;for(const n of r)if(typeof n!="string"||n.includes(".")){const s=dr(n);for(let o=0,i=e;o<s.length&&i!=null&&typeof i=="object";++o)i=pt(i,s[o],o!==s.length-1)}else pt(e,n,!1)}),t.flags&=~d.ExplicitlyTracking)}function pt(e,t,r){const n=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(n,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.at(o)}const s=hr(e);if(s){const o=s.propertiesByName.get(n);o&&(be(o),_r(e,o))}return r?e[n]:void 0}function Yn(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(t[n]){const s=t[n];r[n].forEach(o=>{t[o]=s}),delete t[n]}}}let Ar=class extends er{constructor(t,r,n){super(t,r,n)}};Ar.prototype.type="warning";function Tr(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Ie=()=>b.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function gt(e,t,r){var n,s;e&&(!r&&!t.read||(n=t.read)!=null&&n.reader||((s=t.read)==null?void 0:s.enabled)===!1||es(e)&&de("read.reader",Zn(e),t))}function Zn(e){var r,n;const t=e.ndimArray??0;if(t>1)return Qn(e);if(t===1)return yt(e);if("type"in e&&Or(e.type)){const s=(n=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:n.Type,o=yt(typeof s=="function"?{type:s}:{types:s});return(i,a,l)=>{const u=o(i,a,l);return u&&new e.type(u)}}return Xe(e)}function Xe(e){return"type"in e?Xn(e.type):ts(e.types)}function Xn(e){return e.prototype.read?(t,r,n)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void Ie().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const o=new e;return o.read(t,n),o}:e.fromJSON}function kr(e,t,r,n){return n!==0&&Array.isArray(t)?t.map(s=>kr(e,s,r,n-1)):e(t,void 0,r)}function Qn(e){const t=Xe(e),r=kr.bind(null,t),n=e.ndimArray??0;return(s,o,i)=>{if(s==null)return s;s=r(s,i,n);let a=n,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function yt(e){const t=Xe(e);return(r,n,s)=>{if(r==null)return r;if(Array.isArray(r)){const i=[];for(const a of r){const l=t(a,void 0,s);l!==void 0&&i.push(l)}return i}const o=t(r,void 0,s);return o!==void 0?[o]:void 0}}function Or(e){if(!Tr(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?Qe(t.Type):Sr(t.Type))}function es(e){return"types"in e?Sr(e.types):Qe(e.type)}function Qe(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Or(e))}function Sr(e){for(const t in e.typeMap)if(!Qe(e.typeMap[t]))return!1;return!0}function ts(e){let t=null;const r=e.errorContext??"type",n=e.validate;return(s,o,i)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void Ie().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=rs(e));const l=e.key;if(typeof l!="string")return;const u=s[l],f=u?t[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!f){const p=`Type '${u||"unknown"}' is not supported`;return i!=null&&i.messages&&s&&i.messages.push(new Ar(`${r}:unsupported`,p,{definition:s,context:i})),void Ie().error(p)}const h=new f;return h.read(s,i),n?n(h):h}}function rs(e){var r,n;const t={};for(const s in e.typeMap){const o=e.typeMap[s],i=B(o.prototype);if(typeof e.key=="function")continue;const a=i[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=o;continue}const l=(n=a.json)==null?void 0:n.write;if(!(l!=null&&l.writer)){t[s]=o;continue}const u=l.target,f=typeof u=="string"?u:e.key,h={};l.writer(s,h,f),h[f]&&(t[h[f]]=o)}return t}function ns(e){if(e.json||(e.json={}),$t(e.json),bt(e.json),mt(e.json),e.json.origins)for(const t in e.json.origins)$t(e.json.origins[t]),bt(e.json.origins[t]),mt(e.json.origins[t]);return!0}function mt(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function $t(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function bt(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function vt(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&Tr(e.type))?t.write.writer=as:r>1?t.write.writer=ls(r):t.types?Array.isArray(t.types)?t.write.writer=os(t.types[0]):t.write.writer=ss(t.types):t.write.writer=F}function ss(e){return(t,r,n,s)=>t?Er(t,e,s)?F(t,r,n,s):void 0:F(t,r,n,s)}function Er(e,t,r){for(const n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(r!=null&&r.messages){const n=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new q(`${n}:unsupported`,s,{definition:e,context:r})),b.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function os(e){return(t,r,n,s)=>!t||!Array.isArray(t)?F(t,r,n,s):F(t.filter(o=>Er(o,e,s)),r,n,s)}function F(e,t,r,n){de(r,ie(e,n),t)}function ie(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?is(e):e}function is(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function as(e,t,r,n){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(o=>ie(o,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[ie(e,n)],de(r,s,t)}function jr(e,t,r){return r!==0&&Array.isArray(e)?e.map(n=>jr(n,t,r-1)):ie(e,t)}function ls(e){return(t,r,n,s)=>{let o;if(t===null)o=null;else{o=jr(t,s,e);let i=e,a=o;for(;i>0&&Array.isArray(a);)i--,a=a[0];if(a!==void 0)for(let l=0;l<i;l++)o=[o]}de(n,o,r)}}function Oi(e,t){return et(e,"any",t==null?void 0:t.origin)}function Si(e,t){return et(e,"read",t==null?void 0:t.origin)}function Ei(e,t){return et(e,"write",t==null?void 0:t.origin)}function et(e,t,r){let n=e==null?void 0:e.json;if(n!=null&&n.origins&&r){let s;s=r==="link-chart"?n.origins[r]&&(t==="any"||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],s&&(t==="any"||t in s)&&(n=s)}return n}function cs(e){var r;const t=us(e);if(e.json.origins)for(const n in e.json.origins){const s=e.json.origins[n],o=s.types?fs(s):t;gt(o,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),vt(o,s)}gt(t,e.json,!0),vt(t,e.json)}function us(e){return e.json.types?De(e.json):e.type?Nr(e):De(e)}function fs(e){return e.type?Nr(e):De(e)}function Nr(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!ur(r);)r=r[0],t++;return{type:r,ndimArray:t}}function De(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function hs(e){ns(e)&&(Yn(e),cs(e))}const we=new Set,Ae=new Set;function ds(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,gs(t);const r=[],n=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!we.has(s.initialize)&&(we.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!Ae.has(s.destroy)&&(Ae.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);we.clear(),Ae.clear();const o=class extends t{constructor(...a){if(super(...a),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),n.length){let l=!1;const u=this[$r];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let f=0;f<n.length;f++)n[f].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=B(t.prototype),o.prototype.declaredClass=e;const i=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:i,configurable:!0}),o}}function ps(e,t){return t.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n===void 0)return;r.mutable&&be(n);const s=r.store;return s.has(e)?s.get(e):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n!==void 0)return n.getComputed(r)}}function gs(e){const t=e.prototype,r=B(t),n={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];hs(o),n[s]={enumerable:!0,configurable:!0,get:ps(s,o),set(i){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&o.readOnly?_t("read-only",s):a.lifecycle===m.CONSTRUCTED&&o.constructOnly?_t("construct-only",s):void a.set(s,i)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(e.prototype,n)}const _t=(e,t)=>{b.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)},wt=new WeakMap;function ys(e,t,r=!1){const n=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(n);let s=wt.get(e);s||(s=new Set,wt.set(e,s)),s.has(t)||(s.add(t),e.warn(n))}function ms(e,t,r={}){if(c("esri-deprecation-warnings")){const{moduleName:n}=r;ve(e,`Function: ${(n?n+"::":"")+t+"()"}`,r)}}function ji(e,t,r={}){if(c("esri-deprecation-warnings")){const{moduleName:n}=r;ve(e,`Property: ${(n?n+"::":"")+t}`,r)}}function Ni(e,t,r,n={}){if(c("esri-deprecation-warnings")){const{moduleName:s}=n;ve(e,`'${(s?s+"::":"")+t}' value: ${r}`,n)}}function Ci(e,t,r={}){c("esri-deprecation-warnings")&&ve(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function ve(e,t,r={}){if(c("esri-deprecation-warnings")){const{replacement:n,version:s,see:o,warnOnce:i}=r;let a=t;if(n&&(a+=`
	ðŸ› ï¸ Replacement: ${n}`),s&&(a+=`
	âš™ï¸ Version: ${s}`),o)if(Array.isArray(o)){a+=`
	ðŸ”— See for more details:`;for(const l of o)a+=`
		${l}`}else a+=`
	ðŸ”— See ${o} for more details.`;ys(e,a,i)}}function Pi(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Mi(e,t){for(const r of e)if(r!=null&&t(r))return r}function At(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let tt=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(At(t)){const n=this._getOrCreateGroup(r);for(const s of t)kt(s)&&n.push(s)}else kt(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(n=>n.forEach(t));else{const n=this._getGroup(t);n&&r&&n.forEach(r)}}has(t){return this._groups.has(V(t))}remove(t){if(typeof t!="string"&&At(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(Tt(this._getGroup(t)),this._groups.delete(V(t)),this):this}removeAll(){return this._groups.forEach(Tt),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(V(t),r),r}_getGroup(t){return this._groups.get(V(t))}};function V(e){return e||"_default_"}function Tt(e){for(const t of e)t instanceof tt?t.removeAll():t.remove()}function kt(e){return e!=null&&(!!e.remove||e instanceof tt)}function $s(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function bs(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let _e=class xe{constructor(t,r,n,s=1,o=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o;for(let i=0;i<o;i++)this._pool[i]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(xe.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):bs(r)&&r.acquire(...t),r}release(t){t&&!xe.test.disabled&&(this._releaseFunction?this._releaseFunction(t):$s(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const n=this._pool[r];this._dispose(n)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};_e.test={disabled:!1};let vs=class{constructor(t,r){this._observers=t,this._observer=r}remove(){en(this._observers,this._observer)}},_s=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return ws;this._observers==null&&(this._observers=[]);const r=this._observers;let n=!1,s=!1;const o=r.length;for(let i=0;i<o;++i){const a=r[i];if(a.destroyed)s=!0;else if(a===t){n=!0;break}}return n||(r.push(t),s&&this._removeDestroyedObservers()),new vs(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let n=0;for(let s=0;s<r;++s){for(;s+n<r&&t[s+n].destroyed;)++n;if(n>0){if(!(s+n<r))break;t[s]=t[s+n]}}t.length=r-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const ws=y();var g;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(g||(g={}));const Ri=g.USER+1;function As(e){switch(e){case"defaults":return g.DEFAULTS;case"service":return g.SERVICE;case"portal-item":return g.PORTAL_ITEM;case"web-scene":return g.WEB_SCENE;case"web-map":return g.WEB_MAP;case"link-chart":return g.LINK_CHART;case"user":return g.USER;default:return null}}function Re(e){switch(e){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.LINK_CHART:return"link-chart";case g.USER:return"user"}}function Ui(e){return Re(e)}let Ot=class extends _s{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new $e(this),this.flags=0,this.flags=d.Dirty|(r.nonNullable?d.NonNullable:0)|(r.hasOwnProperty("value")?d.HasDefaultValue:0)|(r.get===void 0?d.DepTrackingInitialized:0)|(r.dependsOn===void 0?d.AutoTracked:0)}destroy(){this.flags&d.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&be(this);const r=t.store,n=this.propertyName,s=this.flags,o=r.get(n);if(s&d.Computing||~s&d.Dirty&&r.has(n))return o;this.flags|=d.Computing;const i=t.host;let a;s&d.AutoTracked?a=O(this.trackingTarget,this.metadata.get,i):(wr(i,this),a=this.metadata.get.call(i)),this.flags|=d.DepTrackingInitialized,r.set(n,a,g.COMPUTED);const l=r.get(n);return l===o?this.flags&=~d.Dirty:Jn(this.commit,this),this.flags&=~d.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~d.Dirty,this.onCommitted()}onInvalidated(){~this.flags&d.Overridden&&(this.flags|=d.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const n of r)n.onCommitted()}}},Ts=class Cr{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Cr;return this._values.forEach((n,s)=>{t&&t.has(s)||r.set(s,A(n))}),r}get(t){return this._values.get(t)}originOf(){return g.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function W(e,t,r){return e!==void 0}function St(e,t,r,n){return e!==void 0&&(!(r==null&&e.flags&d.NonNullable)||(n.lifecycle,m.INITIALIZING,!1))}let ks=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=m.INITIALIZING,this.store=new Ts,this.mutable=!0,this._origin=g.USER;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const s=new Ot(n,r[n]);this.propertiesByName.set(n,s)}this.metadata=r}initialize(){this.lifecycle=m.CONSTRUCTING}constructed(){this.lifecycle=m.CONSTRUCTED}destroy(){this.lifecycle=m.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==m.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&be(r);const n=this.store;return n.has(t)?n.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const n=this.propertiesByName.get(t);if(n!==void 0&&n.flags&d.HasDefaultValue)return"defaults"}return Re(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(W(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const n=this.propertiesByName.get(t);W(n)&&this._internalSet(n,r)}getDependsInfo(t,r,n){const s=this.propertiesByName.get(r);if(!W(s))return"";const o=new $e,i=O(o,()=>{var u;return(u=s.metadata.get)==null?void 0:u.call(t)});let a=`${n}${t.declaredClass.split(".").pop()}.${r}: ${i}
`;const l=o.accessed??new Set;if(l.size===0)return a;n+="  ";for(const u of l)u instanceof Ot&&(a+=`${n}${u.propertyName}: undefined
`);return a}setAtOrigin(t,r,n){const s=this.propertiesByName.get(t);if(W(s))return this._setAtOrigin(s,r,n)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&d.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&d.Overridden&&(r.flags&=~d.Overridden,r.notifyChange())}override(t,r){const n=this.propertiesByName.get(t);if(!St(n,t,r,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,r),{valid:i,value:a}=o;if(Te.release(o),!i)return;r=a}n.flags|=d.Overridden,this._internalSet(n,r)}set(t,r){const n=this.propertiesByName.get(t);if(!St(n,t,r,this))return;const s=n.metadata.cast;if(s){const i=this._cast(s,r),{valid:a,value:l}=i;if(Te.release(i),!a)return;r=l}const o=n.metadata.set;o?o.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(t){this._origin=As(t)}getDefaultOrigin(){return Re(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const n=this.lifecycle!==m.INITIALIZING?this._origin:g.DEFAULTS;this._setAtOrigin(t,r,n)}_setAtOrigin(t,r,n){const s=this.store,o=t.propertyName;s.has(o,n)&&Je(r,s.get(o))&&~t.flags&d.Overridden&&n===s.originOf(o)||(t.invalidate(),s.set(o,r,n),t.commit(),_r(this.host,t))}_cast(t,r){const n=Te.acquire();return n.valid=!0,n.value=r,t&&(n.value=t.call(this.host,r,n)),n}},Os=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Te=new _e(Os);let Ss;function Es(){return Ss}var Et;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(Et||(Et={}));function js(e){e.length=0}let Pr=class{constructor(t=50,r=50){this._pool=new _e(Array,void 0,js,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return ke.acquire()}static release(t){return ke.release(t)}static prune(){ke.prune()}};const ke=new Pr(100);let Ns=class extends _e{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const G=[];function Mr(e){G.push(e),G.length===1&&queueMicrotask(()=>{const t=G.slice();G.length=0;for(const r of t)r()})}let Ir=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Ue;(function(e){const t=(o,i,a,l)=>{let u=i,f=i;const h=a>>>1,p=o[u-1];for(;f<=h;){f=u<<1,f<a&&l(o[f-1],o[f])<0&&++f;const C=o[f-1];if(l(C,p)<=0)break;o[u-1]=C,u=f}o[u-1]=p},r=(o,i)=>o<i?-1:o>i?1:0;function n(o,i,a,l){i===void 0&&(i=0),a===void 0&&(a=o.length),l===void 0&&(l=r);for(let f=a>>>1;f>i;f--)t(o,f,a,l);const u=i+1;for(let f=a-1;f>i;f--){const h=o[i];o[i]=o[f],o[f]=h,t(o,u,f,l)}}function*s(o,i,a,l){i===void 0&&(i=0),a===void 0&&(a=o.length),l===void 0&&(l=r);for(let f=a>>>1;f>i;f--)t(o,f,a,l),yield;const u=i+1;for(let f=a-1;f>i;f--){const h=o[i];o[i]=o[f],o[f]=h,t(o,u,f,l),yield}}e.sort=n,e.iterableSort=s})(Ue||(Ue={}));const jt=Ue,Cs=1.5,Ps=1.1;let Dr=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Ft,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Nt(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const n=this.data.indexOf(t,r);return n!==-1&&n<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let n=0;n<r;n++)this.data[this._length++]=t[n]}fill(t,r){for(let n=0;n<r;n++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Nt(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=Se(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Se(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,n){this.length=Qr(this.data,t,this.length,r,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const n=this.data[t];this.data[t]=this.data[r],this.data[r]=n}sort(t){jt.sort(this.data,0,this.length,t)}iterableSort(t){return jt.iterableSort(this.data,0,this.length,t)}some(t,r){for(let n=0;n<this.length;++n)if(t.call(r,this.data[n],n,this.data))return!0;return!1}find(t,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)if(t.call(r,n[o]))return n[o]}filterInPlace(t,r){let n=0;for(let s=0;s<this._length;++s){const o=this.data[s];t.call(r,o,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=o,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(t,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)t.call(r,n[o],o,n)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=t.call(r,this.data[s],s,this.data);return n}reduce(t,r){let n=r;for(let s=0;s<this.length;++s)n=t(n,this.data[s],s,this.data);return n}has(t){const r=this.length,n=this.data;for(let s=0;s<r;++s)if(n[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function Nt(e){e.data.length>Cs*e.length&&(e.data.length=Math.floor(e.length*Ps))}function Gi(e){return e}function Hi(e){return 1e3*e}function Ji(e){return e}function Ki(e){return .001*e}let Ms=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Is=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},ze=0,Fe=0;const D={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Le=["prepare","preRender","render","postRender","update","finish"],qe=[],N=new Dr;class Ds{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,xr()}}function xs(){E!=null&&(cancelAnimationFrame(E),E=requestAnimationFrame(rt))}function xr(){E==null&&(ze=performance.now(),E=requestAnimationFrame(rt))}const ae={frameTasks:N,willDispatch:!1,clearFrameTasks:Us,dispatch:Ur,executeFrameTasks:zs,reschedule:xs};function Rs(e){const t=new Is(e);return qe.push(t),ae.willDispatch||(ae.willDispatch=!0,Mr(Ur)),t}function Xi(e){const t=new Ms(e);return N.push(t),xr(),new Ds(t)}let E=null;function Us(e=!1){N.forAll(t=>{t.removed=!0}),e&&Rr()}function Qi(e){Fe=Math.max(0,e)}function rt(){const e=performance.now();E=null,E=N.some(r=>!r.paused&&!r.removed)?requestAnimationFrame(rt):null,ae.executeFrameTasks(e)}function zs(e){const t=e-ze;ze=e;const r=Fe>0?Fe:1e3/60,n=Math.max(0,t-r);D.time=e,D.frameDuration=r-n;for(let s=0;s<Le.length;s++){const o=performance.now(),i=Le[s];N.forAll(a=>{var l;a.paused||a.removed||(s===0&&a.ticks++,a.phases[i]&&(D.elapsedFrameTime=performance.now()-e,D.deltaTime=a.ticks===0?0:t,(l=a.phases[i])==null||l.call(a,D)))}),qs[s].push(performance.now()-o)}Rr(),Bs.push(performance.now()-e)}const H=new Dr;function Rr(){N.forAll(e=>{e.removed&&H.push(e)}),N.removeUnorderedMany(H.data,H.length),H.clear()}function Ur(){for(;qe.length;){const e=qe.shift();e.isActive&&e.callback()}ae.willDispatch=!1}function Fs(e=1,t){const r=Ee(),n=()=>{ir(t)?r.reject(I()):e===0?r():(--e,Mr(()=>n()))};return n(),r.promise}function Ls(e){return Fs(1,e)}async function ea(e){await Ls(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const qs=Le.map(e=>new Ir(e)),Bs=new Ir("total");function Vs(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Ct(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function ta(e,t){return t!=null&&e.add(t),e}function Ws(e,t){const r=new Set;return Ct(r,e),Ct(r,t),r}function Gs(e,t){const r=new Set;for(const n of t)e.has(n)&&r.add(n);return r}function ra(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function na(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Hs(e,t){const r=new Set(e);for(const n of t)r.delete(n);return r}function sa(e,t){return Hs(Ws(e,t),Gs(e,t))}function oa(e){let t;for(t of e);return t}let Js=0;const ia=0;function Oe(){return++Js}class nt extends $e{constructor(t){super(new Ks(t)),this._observer&&Pt.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&Pt.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}}let Ks=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Ys}};const Pt=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Ys(){}let M=!1;const le=[];function zr(e,t){let r=new nt(o),n=null,s=!1;function o(){if(!r||s)return;if(M)return void Lr(o);const a=n;r.clear(),M=!0,s=!0,n=O(r,e),s=!1,M=!1,t(n,a),qr()}function i(){r&&(r.destroy(),r=null,n=null)}return s=!0,n=O(r,e),s=!1,y(i)}function Fr(e,t){let r=new nt(s),n=null;function s(){t(n,i)}function o(){r&&(r.destroy(),r=null),n=null}function i(){return r?(r.clear(),n=O(r,e),n):null}return i(),y(o)}function la(e,t){let r=!1,n=!1;const s=!!(t!=null&&t.sync);let o=new nt(()=>{r||n||(n=!0,s?i():queueMicrotask(i))});function i(){n=!1,o&&!r&&(M?Lr(i):(o.clear(),M=!0,r=!0,O(o,e),r=!1,M=!1,qr()))}function a(){o&&(o.destroy(),o=null)}return r=!0,O(o,e),r=!1,y(a)}function Lr(e){le.includes(e)||le.unshift(e)}function qr(){for(;le.length;)le.pop()()}var U;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(U||(U={}));let L=class{constructor(){this.uid=Oe(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,n,s,o){return this.pool.acquire(U.Untracked,t,r,n,s,o,Je)}static acquireTracked(t,r,n,s){return this.pool.acquire(U.Tracked,t,r,n,null,null,s)}notify(t,r){this.type===U.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,n,s,o,i,a){this.uid=Oe(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=n,this.getValue=s,this.target=o,this.path=i,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Oe(),this.removed=!0}};L.pool=new Ns(L);const Z=new Pr,w=new Set;let ce;function ue(e){w.delete(e),w.add(e),ce||(ce=Rs(Qs))}function Zs(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Xs(e){for(const t of w.values())t.target===e&&(t.removed=!0)}function Qs(){let e=10;for(;ce&&e--;){ce=null;const t=eo(),r=Z.acquire();for(const n of t){const s=n.uid;Zs(n),s===n.uid&&n.removed&&r.push(n)}for(const n of w)n.removed&&(r.push(n),w.delete(n));for(const n of r)L.pool.release(n);Z.release(r),Z.release(t),Be.forEach(n=>n())}}function eo(){const e=Z.acquire();e.length=w.size;let t=0;for(const r of w)e[t]=r,++t;return w.clear(),e}const Be=new Set;function ua(e){return Be.add(e),y(()=>Be.delete(e))}function to(e,t,r){let n=pr(e,t,r,(s,o,i)=>{let a,l,u=Fr(()=>me(s,o),(f,h)=>{var p;((p=s.__accessor__)==null?void 0:p.lifecycle)===m.DESTROYED||a&&a.uid!==l?n.remove():(a||(a=L.acquireUntracked(f,i,h,s,o),l=a.uid),ue(a))});return y(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,ue(a)),a=null),n=u=null})});return n}function ro(e,t,r){const n=pr(e,t,r,(s,o,i)=>{let a=!1;return zr(()=>me(s,o),(l,u)=>{s.__accessor__.lifecycle!==m.DESTROYED?a||(a=!0,Je(u,l)||i.call(s,l,u,o,s),a=!1):n.remove()})});return n}function no(e,t,r,n=!1){return e.__accessor__&&e.__accessor__.lifecycle!==m.DESTROYED?n?ro(e,t,r):to(e,t,r):y()}function so(e,t,r){let n,s,o=Fr(e,(i,a)=>{n&&n.uid!==s?o.remove():(n||(n=L.acquireTracked(i,t,a,r),s=n.uid),ue(n))});return y(()=>{o.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,ue(n)),n=null),o=null})}function oo(e,t,r){let n=!1;return zr(e,(s,o)=>{n||(n=!0,r(o,s)||t(s,o),n=!1)})}function fa(e,t,r=!1,n=tn){return r?oo(e,t,n):so(e,t,n)}function ha(e){return Vs(w,t=>t.oldValue===e)}var Br,Vr;function io(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const _=Symbol("Accessor-Handles"),Ve=Symbol("Accessor-Initialized");let da=class X{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class i extends o{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}B(i.prototype);for(const a in t){const l=t[a];i.prototype[a]=typeof l=="function"?function(...u){const f=this.inherited;let h;this.inherited=function(...p){if(o.prototype[a])return o.prototype[a].apply(this,p)};try{h=l.apply(this,u)}catch(p){throw this.inherited=f,p}return this.inherited=f,h}:t[a]}for(const a in r){const l=io(r[a]);Wn(l)(i.prototype,a)}return ds(n)(i)}static freeze(t){return t instanceof X?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof X?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var n;if(this[Br]=null,this[Vr]=!1,this.constructor===X)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new ks(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((n=this.normalizeCtorArgs)==null?void 0:n.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[Ve]=!0}initialize(){}[$r](){this[_]=gn(this[_])}destroy(){var t;this.destroyed||(Xs(this),this.__accessor__.destroy(),(t=Es())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Ve]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===m.DESTROYED||!1}commitProperty(t){ne(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return se(this,t,r),this}watch(t,r,n){return ms(b.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),no(this,t,r,n)}addHandles(t,r){if(this.destroyed){const n=Array.isArray(t)?t:[t];for(const s of n)s.remove();return}(this[_]??(this[_]=new tt)).add(t,r)}removeHandles(t){var r;(r=this[_])==null||r.remove(t)}removeAllHandles(){var t;(t=this[_])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[_])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[_])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};Br=_,Vr=Ve;export{Ke as $,qt as A,b as B,Io as C,or as D,ge as E,en as F,Do as G,ir as H,zo as I,Uo as J,Qo as K,j as L,c as M,gn as N,T as O,ri as P,is as Q,Zt as R,bn as S,la as T,Ar as U,ni as V,Zn as W,Co as X,ui as Y,mn as Z,de as _,ds as a,Ri as a$,Dr as a0,Wo as a1,ve as a2,Ee as a3,Q as a4,oi as a5,I as a6,ii as a7,_e as a8,Ai as a9,yo as aA,go as aB,Mr as aC,Zo as aD,Bt as aE,Wt as aF,So as aG,Ht as aH,Ye as aI,jo as aJ,Ge as aK,He as aL,Eo as aM,An as aN,mo as aO,At as aP,_i as aQ,Oe as aR,ji as aS,Hi as aT,Ji as aU,tt as aV,Xi as aW,Lo as aX,qo as aY,Fo as aZ,Bo as a_,mr as aa,As as ab,gi as ac,Xr as ad,ei as ae,Tn as af,$n as ag,Re as ah,Se as ai,bo as aj,Ft as ak,Mi as al,Pi as am,uo as an,fo as ao,Oo as ap,pe as aq,ln as ar,Ro as as,dn as at,co as au,Go as av,Gi as aw,ne as ax,Gt as ay,ci as az,_s as b,sa as b$,Ho as b0,ea as b1,si as b2,Pr as b3,Fs as b4,yi as b5,lo as b6,mi as b7,ti as b8,ft as b9,ta as bA,Ct as bB,sr as bC,_o as bD,Yr as bE,vo as bF,ms as bG,Vt as bH,$i as bI,Je as bJ,Po as bK,pi as bL,nt as bM,O as bN,Ni as bO,fi as bP,Mo as bQ,Ao as bR,Ls as bS,Ut as bT,po as bU,at as bV,Sn as bW,wo as bX,oa as bY,$o as bZ,hi as b_,Ir as ba,Ce as bb,fa as bc,rr as bd,Si as be,me as bf,Oi as bg,wi as bh,Ei as bi,Rn as bj,Ui as bk,on as bl,To as bm,J as bn,Kr as bo,Ws as bp,na as bq,ra as br,Hs as bs,Gs as bt,li as bu,Ns as bv,ua as bw,ha as bx,ho as by,Vs as bz,A as c,Ci as c0,Jo as c1,xo as c2,Ki as c3,ia as c4,ko as c5,Qi as c6,Vo as d,y as e,Rs as f,da as g,jn as h,Xo as i,ai as j,di as k,yn as l,Wn as m,kn as n,vn as o,hr as p,Yo as q,ao as r,q as s,Hr as t,g as u,ot as v,fe as w,he as x,be as y,tn as z};
