const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BPm91e5Z.js","./index-CMxz6F2k.js","./jsxFactory-Cnml7uXM.js","./Accessor-BmwT4B0c.js","./intl-Duiy0OzY.js","./Promise-DfET-uns.js","./cast-CsZslgGN.js","./index-4eY77cms.js","./index-Cx51aysm.css","./JSONSupport-DcrLLGjL.js","./Evented-Dw4_VOGn.js","./reactiveUtils-XM7cS2OP.js","./SimpleObservable-CvOkykwM.js","./uuid-Cl5lrJ4c.js","./guid-ejniuQmw.js","./useT9n-C1Hrfc-A.js","./index-DwIhxbHs.js","./dom-DEluURzl.js","./observers-Co4E8E8j.js","./keyed-CU1C-h1n.js","./directive-helpers-DaBykg1t.js","./ref-D9wHsL_T.js","./interactive-DTzfFku4.js","./loadable-XBvaWFYY.js","./component-CBVlbUuE.js","./index-jjUP6Yam.js","./static-DLD4WjLv.js","./form-BzoUrXC7.js","./label-CHHpnzD0.js","./index-B0pN5y8B.js","./index-DVGzfobf.js","./floating-ui-IixYHfbQ.js","./debounce-DbkufipY.js","./key-CZcQa38B.js","./openCloseComponent-nqWrSaIH.js","./dynamicClasses-pKEMtFzB.js","./index-C7Sgjfzm.js","./resources6-Cs2_VmEC.js","./index-XCNLEnDV.js","./customElement-_nG5icNK.js","./utils-Dtivty39.js","./resources5-SciNIBSe.js","./index-BCDLx0rN.js","./index-DyXGQ9Xl.js","./index-fFnlo_g2.js","./index-DWeq-ojO.js","./index-pyEU_klK.js","./live-D7NQ-TrC.js","./locale-CXx8I9ox.js","./Validation-BYp9DS84.js","./input-DI9tZAPS.js","./filter-D4A4y0z5.js","./escapeRegExp-CdLjXKbf.js"])))=>i.map(i=>d[i]);
import{_ as x,L as $,u as k,c as G,n as V,i as A,a as I}from"./index-4eY77cms.js";import{r as s,m as i,a as M,j as D}from"./Accessor-BmwT4B0c.js";import{O as P,c as C,n as l,e as O}from"./jsxFactory-Cnml7uXM.js";import{c as T}from"./Analysis-DG4TFZ53.js";import{h as B}from"./SlicePlane-oF-O5hhm.js";import{V as L}from"./reactiveUtils-XM7cS2OP.js";import{n as H,t as R}from"./collectionUtils-CTT-51g7.js";import{_ as N}from"./AnalysisViewModel-4Fbl73KT.js";import{e as f}from"./globalCss-vQlnDsEX.js";import{e as q}from"./Heading-BcR6CGTM.js";import{P as F}from"./useWidget-BajufX8l.js";import"./intl-Duiy0OzY.js";import"./Promise-DfET-uns.js";import"./cast-CsZslgGN.js";import"./JSONSupport-DcrLLGjL.js";import"./Evented-Dw4_VOGn.js";import"./uuid-Cl5lrJ4c.js";import"./Clonable-Z-AWS-16.js";import"./Identifiable-BHVfzH03.js";import"./Cyclical-Dlbl-cQK.js";import"./mathUtils-Cfq9PL9W.js";import"./persistable-C1YjaxW7.js";import"./MD5-C9MwAd2G.js";import"./multiOriginJSONSupportUtils-C0wm8_Yw.js";import"./resourceExtension-DiQ4lOGT.js";import"./Point-Cz2JYYmX.js";import"./writer-DKgfqj4X.js";import"./SimpleObservable-CvOkykwM.js";import"./index-C5b9dHRB.js";import"./component-utils-D0ciaaZ_.js";let u=class extends T{constructor(t){super(t),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new L}set excludedLayers(t){this._set("excludedLayers",H(t,this._get("excludedLayers")))}get requiredPropertiesForEditing(){var t;return[(t=this.shape)==null?void 0:t.position]}clear(){this.shape=null}};s([i({type:["slice"]})],u.prototype,"type",void 0),s([i()],u.prototype,"tiltEnabled",void 0),s([i({types:{key:"type",base:null,typeMap:{plane:B},defaultKeyValue:"plane"}})],u.prototype,"shape",void 0),s([i({cast:R,clonable:e=>e.slice()})],u.prototype,"excludedLayers",null),s([i({type:Boolean,nonNullable:!0})],u.prototype,"excludeGroundSurface",void 0),s([i({readOnly:!0})],u.prototype,"requiredPropertiesForEditing",null),u=s([M("esri.analysis.SliceAnalysis")],u);const S=u,_=new Set;let d=class extends N{constructor(e){super(e),this.analysis=null,this.supportedViewType="3d",this.unsupportedErrorMessage="SliceViewModel is only supported in 3D views.",_.add(this)}destroy(){_.delete(this)}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get shape(){return this.analysis.shape}set shape(e){this.analysis.shape=e}get tiltEnabled(){return this.analysis.tiltEnabled}set tiltEnabled(e){this.analysis.tiltEnabled=e}get layersMode(){var e;return((e=this.tool)==null?void 0:e.layersMode)??"none"}get excludedLayers(){return this.analysis.excludedLayers}set excludedLayers(e){this.analysis.excludedLayers=L.isCollection(e)?e:new L(e)}get excludeGroundSurface(){return this.analysis.excludeGroundSurface}set excludeGroundSurface(e){this.analysis.excludeGroundSurface=e}async start(){await super.start(),_.forEach(e=>{e.view===this.view&&e!==this&&e.clear()}),this.analysisView!=null&&(this.analysisView.active=!0)}enterExcludeLayerMode(){this.tool!=null&&this.tool.enterExcludeLayerMode()}exitExcludeLayerMode(){this.tool!=null&&this.tool.exitExcludeLayerMode()}onConnectToAnalysisView(e){e.active=!0}constructAnalysis(){return new S}};s([i({type:S})],d.prototype,"analysis",void 0),s([i({readOnly:!0})],d.prototype,"state",null),s([i()],d.prototype,"shape",null),s([i()],d.prototype,"tiltEnabled",null),s([i()],d.prototype,"layersMode",null),s([i()],d.prototype,"excludedLayers",null),s([i({nonNullable:!0})],d.prototype,"excludeGroundSurface",null),d=s([M("esri.widgets.Slice.SliceViewModel")],d);const E=d,o="esri-slice",a={base:o,actions:`${o}__actions`,cancelButton:`${o}__cancel-button`,container:`${o}__container`,error:`${o}__error`,excludeButton:`${o}__exclude-button`,hint:`${o}__hint`,hintText:`${o}__hint-text`,layerItem:`${o}__layer-item`,layerList:`${o}__layer-list`,layerListHeading:`${o}__layer-list-title`,newSliceButton:`${o}__clear-button`};let r=class extends P{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.viewModel=new E,this._onNewSliceClick=()=>{D(this.viewModel.start())}}loadDependencies(){return C({action:()=>x(()=>import("./index-BPm91e5Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),button:()=>x(()=>import("./index-jjUP6Yam.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,21,20,26,27,22,28,23,24]),import.meta.url),"list-item":()=>x(()=>import("./index-B0pN5y8B.js"),__vite__mapDeps([29,16,2,3,4,5,6,7,8,9,10,11,12,13,17,14,18,30,21,20,31,32,22,33,23,34,35,1,15,0,19,24,36,37,38,39,40,41]),import.meta.url),list:()=>x(()=>import("./index-BCDLx0rN.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,43,21,20,18,17,19,16,44,45,46,47,26,27,22,33,28,23,48,24,49,50,51,52,32,40]),import.meta.url)})}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(e){this.viewModel.analysis=e}get excludedLayers(){return this.viewModel.excludedLayers}set excludedLayers(e){this.viewModel.excludedLayers=e}get excludeGroundSurface(){return this.viewModel.excludeGroundSurface}set excludeGroundSurface(e){this.viewModel.excludeGroundSurface=e}get icon(){return"slice"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get hasVoxelLayers(){var t;const e=(t=this.viewModel)==null?void 0:t.view;return e!=null&&e.allLayerViews.some(p=>p.type==="voxel-3d")}render(){return l("div",{class:this.classes(a.base,f.widget,f.panel),role:"presentation"},this.visible?l("div",{class:a.container},this.viewModel.supported?[this._renderHint(),this._renderLayerList(),this._renderActions()]:this._renderUnsupported()):null)}_renderUnsupported(){return l("div",{class:a.error,key:"unsupported"},l("p",null,this.messages.unsupported))}_renderHint(){const{hasVoxelLayers:e,messages:t,viewModel:p}=this,{active:c,layersMode:y,state:m}=p;let n=null;return c&&(y==="exclude"?n=t.excludeHint:m==="ready"&&(n=e?t.voxelHint:t.hint)),n?l("div",{class:a.hint,key:"hint"},l("p",{class:a.hintText},n),l("p",{class:a.hintText},t.verticalHint)):null}_renderLayerList(){const{excludedLayers:e,excludeGroundSurface:t,headingLevel:p,messages:c,viewModel:y}=this,{layersMode:m,state:n}=y,h=n==="slicing"||n==="sliced",w=e?e.toArray().map(g=>this._renderLayerItem({uid:g.uid,title:g.title,onClick:()=>(this.excludedLayers.remove(g),!1)})):[];return t&&w.push(this._renderLayerItem({uid:"ground",title:c.ground,onClick:()=>(this.excludeGroundSurface=!1,!1)})),m!=="exclude"&&h&&w.length!==0?l("div",{class:a.layerList,key:"settings"},l(q,{class:a.layerListHeading,level:p},c.excludedLayers),l("calcite-list",{label:c.excludedLayers,selectionMode:"none"},w)):null}_renderActions(){const{messages:e,viewModel:t}=this,{active:p,state:c}=t,y=c==="disabled",m=c==="slicing"||c==="sliced",n=t.layersMode==="exclude",h=[];return p&&!m||n||h.push(l("calcite-button",{class:a.newSliceButton,disabled:y,key:"new-slice",onclick:this._onNewSliceClick},e.newSlice)),m&&!n&&h.push(l("calcite-button",{appearance:"outline-fill",class:a.excludeButton,disabled:y,key:"exclude",onclick:()=>t.enterExcludeLayerMode()},e.excludeLayer)),p&&n&&h.push(l("calcite-button",{appearance:"outline-fill",class:a.cancelButton,disabled:y,key:"cancel-exclude",onclick:()=>t.exitExcludeLayerMode()},e.cancel)),h.length===0?null:l("div",{class:a.actions},h)}_renderLayerItem(e){const t=this.messages.includeLayer;return l("calcite-list-item",{class:a.layerItem,"data-testid":`list-item-${e.uid}`,key:e.uid,label:e.title??""},l("calcite-action",{icon:"x",onclick:e.onClick,scale:"s",slot:"actions-end",text:t,title:t}))}};s([i()],r.prototype,"active",null),s([i({constructOnly:!0,nonNullable:!0})],r.prototype,"analysis",null),s([i()],r.prototype,"excludedLayers",null),s([i()],r.prototype,"excludeGroundSurface",null),s([i()],r.prototype,"headingLevel",void 0),s([i()],r.prototype,"icon",null),s([i()],r.prototype,"label",null),s([i(),O("esri/widgets/Slice/t9n/Slice")],r.prototype,"messages",void 0),s([i()],r.prototype,"view",null),s([i({type:E})],r.prototype,"viewModel",void 0),s([i()],r.prototype,"visible",null),s([i()],r.prototype,"hasVoxelLayers",null),r=s([M("esri.widgets.Slice")],r);const U=r;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.12 */const j=A`@layer{arcgis-slice{display:block}}`,K=F(U),v=class v extends ${constructor(){super(...arguments),this.widget=K(this),this.viewModel=this.widget.viewModel,this.analysis=this.widget.analysis,this.autoDestroyDisabled=!1,this.excludeGroundSurface=this.viewModel.excludeGroundSurface,this.excludedLayers=this.viewModel.excludedLayers,this.headingLevel=this.widget.headingLevel,this.icon=this.widget.icon,this.label=this.widget.label,this.position="bottom-left",this.shape=this.viewModel.shape,this.state=this.viewModel.state,this.tiltEnabled=this.viewModel.tiltEnabled,this.arcgisPropertyChange=k()("analysis","state"),this.arcgisReady=G()}async clear(){var t;(t=this.widget)==null||t.viewModel.clear()}async destroy(){await this.manager.destroy()}async start(){var t;(t=this.widget)==null||t.viewModel.start()}};v.properties={analysis:0,autoDestroyDisabled:5,excludeGroundSurface:5,excludedLayers:0,headingLevel:9,icon:1,label:1,position:1,referenceElement:1,shape:0,state:3,tiltEnabled:5},v.shadowRootOptions=V,v.styles=j;let b=v;I("arcgis-slice",b);export{b as ArcgisSlice};
