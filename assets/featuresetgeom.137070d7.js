import{w as e,A as n,am as t,z as r,$ as a}from"./arcadeUtils.5b619627.js";import{g as i,c as s}from"./SpatialFilter.6d6764bf.js";import{gN as l,fV as o,gO as c}from"./vendor.d0a39f0f.js";import{w as u,A as f,x as p,O as d,p as m,g as R,h as S}from"./geometryEngineAsync.aca6f819.js";import"./number.65ee9777.js";import"./FeatureSetReader.3c31cb94.js";import"./centroid.1404a86d.js";import"./WhereClause.1eaac7f4.js";function h(e){return e instanceof o}function y(r,a,S,y,g){return g(r,a,(function(r,a,g){if(g.length<2)return y(new Error("Missing Parameters"));if(null===(g=e(g))[0]&&null===g[1])return l(!1);if(n(g[0]))return g[1]instanceof o?l(new i({parentfeatureset:g[0],relation:S,relationGeom:g[1]})):null===g[1]?l(new s({parentfeatureset:g[0]})):y("Spatial Relation cannot accept this parameter type");if(h(g[0])){if(h(g[1])){let e=null;switch(S){case"esriSpatialRelEnvelopeIntersects":e=R(t(g[0]),t(g[1]));break;case"esriSpatialRelIntersects":e=R(g[0],g[1]);break;case"esriSpatialRelContains":e=m(g[0],g[1]);break;case"esriSpatialRelOverlaps":e=d(g[0],g[1]);break;case"esriSpatialRelWithin":e=p(g[0],g[1]);break;case"esriSpatialRelTouches":e=f(g[0],g[1]);break;case"esriSpatialRelCrosses":e=u(g[0],g[1])}return null!==e?e:c(new Error("Unrecognised Relationship"))}return n(g[1])?l(new i({parentfeatureset:g[1],relation:S,relationGeom:g[0]})):null===g[1]?l(!1):y("Spatial Relation cannot accept this parameter type")}return null!==g[0]?y("Spatial Relation cannot accept this parameter type"):n(g[1])?l(new s({parentfeatureset:g[1]})):g[1]instanceof o||null===g[1]?l(!1):void 0}))}function g(t){"async"===t.mode&&(t.functions.intersects=function(e,n){return y(e,n,"esriSpatialRelIntersects",t.failDefferred,t.standardFunctionAsync)},t.functions.envelopeintersects=function(e,n){return y(e,n,"esriSpatialRelEnvelopeIntersects",t.failDefferred,t.standardFunctionAsync)},t.signatures.push({name:"envelopeintersects",min:"2",max:"2"}),t.functions.contains=function(e,n){return y(e,n,"esriSpatialRelContains",t.failDefferred,t.standardFunctionAsync)},t.functions.overlaps=function(e,n){return y(e,n,"esriSpatialRelOverlaps",t.failDefferred,t.standardFunctionAsync)},t.functions.within=function(e,n){return y(e,n,"esriSpatialRelWithin",t.failDefferred,t.standardFunctionAsync)},t.functions.touches=function(e,n){return y(e,n,"esriSpatialRelTouches",t.failDefferred,t.standardFunctionAsync)},t.functions.crosses=function(e,n){return y(e,n,"esriSpatialRelCrosses",t.failDefferred,t.standardFunctionAsync)},t.functions.relate=function(i,l){return t.standardFunctionAsync(i,l,(function(t,i,l){if(l=e(l),r(l,3,3),h(l[0])&&h(l[1]))return S(l[0],l[1],a(l[2]));if(l[0]instanceof o&&null===l[1])return!1;if(l[1]instanceof o&&null===l[0])return!1;if(n(l[0])&&null===l[1])return new s({parentfeatureset:l[0]});if(n(l[1])&&null===l[0])return new s({parentfeatureset:l[1]});if(n(l[0])&&l[1]instanceof o)return l[0].relate(l[1],a(l[2]));if(n(l[1])&&l[0]instanceof o)return l[1].relate(l[0],a(l[2]));if(null===l[0]&&null===l[1])return!1;throw new Error("Illegal Argument")}))})}export{g as registerFunctions};
