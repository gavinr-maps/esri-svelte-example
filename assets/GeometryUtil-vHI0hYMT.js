import{c as z,_ as k,A as x,o as ot,E as Lt,g as V,u as F,P as mt,s as X}from"./vec32-Dvg_eL9J.js";import{r as b,n as G,t as Mt}from"./vec3f32-nZdmKIgz.js";import{n as U,t as gt,r as dt}from"./vec3f64-BLpZdpfb.js";import{t as bt}from"./aaBoundingBox-CeBivBRq.js";import{n as q,f as v,b as At}from"./FloatArray-BCfeX8wo.js";import{w as yt,o as Et}from"./Indices-Db9lERgy.js";import{M as Ut,l as xt,x as Ct}from"./plane-4dpuo6-e.js";import{k as Ft}from"./sphere-DQxj5tsv.js";import{t as T}from"./Attribute-B-NAci_J.js";import{e as Nt}from"./Material-Ba8x5bbY.js";import{s as Y}from"./InterleavedLayout-Dvj-Snan.js";import{e as y}from"./VertexAttribute-Cq4MnHjR.js";var wt;(function(c){function r(o,l){const f=o[l],n=o[l+1],h=o[l+2];return Math.sqrt(f*f+n*n+h*h)}function e(o,l){const f=o[l],n=o[l+1],h=o[l+2],w=1/Math.sqrt(f*f+n*n+h*h);o[l]*=w,o[l+1]*=w,o[l+2]*=w}function t(o,l,f){o[l]*=f,o[l+1]*=f,o[l+2]*=f}function s(o,l,f,n,h,w=l){(h=h||o)[w]=o[l]+f[n],h[w+1]=o[l+1]+f[n+1],h[w+2]=o[l+2]+f[n+2]}function O(o,l,f,n,h,w=l){(h=h||o)[w]=o[l]-f[n],h[w+1]=o[l+1]-f[n+1],h[w+2]=o[l+2]-f[n+2]}c.length=r,c.normalize=e,c.scale=t,c.add=s,c.subtract=O})(wt||(wt={}));const Z=wt,ct=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],vt=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],Vt=[0,0,1,0,1,1,0,1],Gt=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Pt=new Array(36);for(let c=0;c<6;c++)for(let r=0;r<6;r++)Pt[6*c+r]=c;const B=new Array(36);for(let c=0;c<6;c++)B[6*c]=0,B[6*c+1]=1,B[6*c+2]=2,B[6*c+3]=2,B[6*c+4]=3,B[6*c+5]=0;function h0(c,r){Array.isArray(r)||(r=[r,r,r]);const e=new Array(24);for(let t=0;t<8;t++)e[3*t]=ct[t][0]*r[0],e[3*t+1]=ct[t][1]*r[1],e[3*t+2]=ct[t][2]*r[2];return new v(c,[[y.POSITION,new T(e,Gt,3,!0)],[y.NORMAL,new T(vt,Pt,3)],[y.UV0,new T(Vt,B,2)]])}const at=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],qt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],zt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],Dt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function l0(c,r){Array.isArray(r)||(r=[r,r,r]);const e=new Array(18);for(let t=0;t<6;t++)e[3*t]=at[t][0]*r[0],e[3*t+1]=at[t][1]*r[1],e[3*t+2]=at[t][2]*r[2];return new v(c,[[y.POSITION,new T(e,zt,3,!0)],[y.NORMAL,new T(qt,Dt,3)]])}const tt=b(-.5,0,-.5),nt=b(.5,0,-.5),et=b(0,0,.5),st=b(0,.5,0),_=G(),H=G(),K=G(),Q=G(),W=G();z(_,tt,st),z(H,tt,nt),k(K,_,H),x(K,K),z(_,nt,st),z(H,nt,et),k(Q,_,H),x(Q,Q),z(_,et,st),z(H,et,tt),k(W,_,H),x(W,W);const ft=[tt,nt,et,st],jt=[0,-1,0,K[0],K[1],K[2],Q[0],Q[1],Q[2],W[0],W[1],W[2]],kt=[0,1,2,3,1,0,3,2,1,3,0,2],Bt=[0,0,0,1,1,1,2,2,2,3,3,3];function u0(c,r){Array.isArray(r)||(r=[r,r,r]);const e=new Array(12);for(let t=0;t<4;t++)e[3*t]=ft[t][0]*r[0],e[3*t+1]=ft[t][1]*r[1],e[3*t+2]=ft[t][2]*r[2];return new v(c,[[y.POSITION,new T(e,kt,3,!0)],[y.NORMAL,new T(jt,Bt,3)]])}function c0(c,r,e,t,s={uv:!0}){const O=-Math.PI,o=2*Math.PI,l=-Math.PI/2,f=Math.PI,n=Math.max(3,Math.floor(e)),h=Math.max(2,Math.floor(t)),w=(n+1)*(h+1),m=q(3*w),P=q(3*w),N=q(2*w),A=[];let a=0;for(let i=0;i<=h;i++){const d=[],u=i/h,S=l+u*f,R=Math.cos(S);for(let E=0;E<=n;E++){const D=E/n,p=O+D*o,C=Math.cos(p)*R,L=Math.sin(S),$=-Math.sin(p)*R;m[3*a]=C*r,m[3*a+1]=L*r,m[3*a+2]=$*r,P[3*a]=C,P[3*a+1]=L,P[3*a+2]=$,N[2*a]=D,N[2*a+1]=u,d.push(a),++a}A.push(d)}const M=new Array;for(let i=0;i<h;i++)for(let d=0;d<n;d++){const u=A[i][d],S=A[i][d+1],R=A[i+1][d+1],E=A[i+1][d];i===0?(M.push(u),M.push(R),M.push(E)):i===h-1?(M.push(u),M.push(S),M.push(R)):(M.push(u),M.push(S),M.push(R),M.push(R),M.push(E),M.push(u))}const g=[[y.POSITION,new T(m,M,3,!0)],[y.NORMAL,new T(P,M,3,!0)]];return s.uv&&g.push([y.UV0,new T(N,M,2,!0)]),s.offset&&(g[0][0]=y.OFFSET,g.push([y.POSITION,new T(Float64Array.from(s.offset),yt(M.length),3,!0)])),new v(c,g)}function a0(c,r,e,t){const s=Zt(r,e,t);return new v(c,s)}function Zt(c,r,e){const t=c;let s,O;if(e)s=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],O=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const n=t*(1+Math.sqrt(5))/2;s=[-t,n,0,t,n,0,-t,-n,0,t,-n,0,0,-t,n,0,t,n,0,-t,-n,0,t,-n,n,0,-t,n,0,t,-n,0,-t,-n,0,t],O=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let n=0;n<s.length;n+=3)Z.scale(s,n,c/Z.length(s,n));let o={};function l(n,h){n>h&&([n,h]=[h,n]);const w=n.toString()+"."+h.toString();if(o[w])return o[w];let m=s.length;return s.length+=3,Z.add(s,3*n,s,3*h,s,m),Z.scale(s,m,c/Z.length(s,m)),m/=3,o[w]=m,m}for(let n=0;n<r;n++){const h=O.length,w=new Array(4*h);for(let m=0;m<h;m+=3){const P=O[m],N=O[m+1],A=O[m+2],a=l(P,N),M=l(N,A),g=l(A,P),i=4*m;w[i]=P,w[i+1]=a,w[i+2]=g,w[i+3]=N,w[i+4]=M,w[i+5]=a,w[i+6]=A,w[i+7]=g,w[i+8]=M,w[i+9]=a,w[i+10]=M,w[i+11]=g}O=w,o={}}const f=At(s);for(let n=0;n<f.length;n+=3)Z.normalize(f,n);return[[y.POSITION,new T(At(s),O,3,!0)],[y.NORMAL,new T(f,O,3,!0)]]}function f0(c,r={}){const{normal:e,position:t,color:s,rotation:O,size:o,centerOffsetAndDistance:l,uvs:f,featureAttribute:n,objectAndLayerIdColor:h=null}=r,w=t?gt(t):U(),m=e?gt(e):dt(0,0,1),P=s?[255*s[0],255*s[1],255*s[2],s.length>3?255*s[3]:255]:[255,255,255,255],N=o!=null&&o.length===2?o:[1,1],A=O!=null?[O]:[0],a=yt(1),M=[[y.POSITION,new T(w,a,3,!0)],[y.NORMAL,new T(m,a,3,!0)],[y.COLOR,new T(P,a,4,!0)],[y.SIZE,new T(N,a,2)],[y.ROTATION,new T(A,a,1,!0)]];if(f&&M.push([y.UV0,new T(f,a,f.length)]),l!=null){const g=[l[0],l[1],l[2],l[3]];M.push([y.CENTEROFFSETANDDISTANCE,new T(g,a,4)])}if(n){const g=[n[0],n[1],n[2],n[3]];M.push([y.FEATUREATTRIBUTE,new T(g,a,4)])}return new v(c,M,null,Nt.Point,h)}const _t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function i0(c,r=_t){const e=new Array(12);for(let n=0;n<4;n++)for(let h=0;h<3;h++)e[3*n+h]=r[n][h];const t=[0,1,2,2,3,0],s=[0,0,1],O=[0,0,0,0,0,0],o=[0,0,1,0,1,1,0,1],l=[255,255,255,255],f=[[y.POSITION,new T(e,t,3,!0)],[y.NORMAL,new T(s,O,3,!0)],[y.UV0,new T(o,t,2,!0)],[y.COLOR,new T(l,O,4,!0)]];return new v(c,f)}function Ht(c,r,e,t,s=!0,O=!0){let o=0;const l=r,f=c;let n=b(0,o,0),h=b(0,o+f,0),w=b(0,-1,0),m=b(0,1,0);t&&(o=f,h=b(0,0,0),n=b(0,o,0),w=b(0,1,0),m=b(0,-1,0));const P=[h,n],N=[w,m],A=e+2,a=Math.sqrt(f*f+l*l);if(t)for(let u=e-1;u>=0;u--){const S=u*(2*Math.PI/e),R=b(Math.cos(S)*l,o,Math.sin(S)*l);P.push(R);const E=b(f*Math.cos(S)/a,-l/a,f*Math.sin(S)/a);N.push(E)}else for(let u=0;u<e;u++){const S=u*(2*Math.PI/e),R=b(Math.cos(S)*l,o,Math.sin(S)*l);P.push(R);const E=b(f*Math.cos(S)/a,l/a,f*Math.sin(S)/a);N.push(E)}const M=new Array,g=new Array;if(s){for(let u=3;u<P.length;u++)M.push(1),M.push(u-1),M.push(u),g.push(0),g.push(0),g.push(0);M.push(P.length-1),M.push(2),M.push(1),g.push(0),g.push(0),g.push(0)}if(O){for(let u=3;u<P.length;u++)M.push(u),M.push(u-1),M.push(0),g.push(u),g.push(u-1),g.push(1);M.push(0),M.push(2),M.push(P.length-1),g.push(1),g.push(2),g.push(N.length-1)}const i=q(3*A);for(let u=0;u<A;u++)i[3*u]=P[u][0],i[3*u+1]=P[u][1],i[3*u+2]=P[u][2];const d=q(3*A);for(let u=0;u<A;u++)d[3*u]=N[u][0],d[3*u+1]=N[u][1],d[3*u+2]=N[u][2];return[[y.POSITION,new T(i,M,3,!0)],[y.NORMAL,new T(d,g,3,!0)]]}function w0(c,r,e,t,s,O=!0,o=!0){return new v(c,Ht(r,e,t,s,O,o))}function O0(c,r,e,t,s,O,o){const l=s?Mt(s):b(1,0,0),f=O?Mt(O):b(0,0,0);o??(o=!0);const n=G();x(n,l);const h=G();V(h,n,Math.abs(r));const w=G();V(w,h,-.5),F(w,w,f);const m=b(0,1,0);Math.abs(1-mt(n,m))<.2&&ot(m,0,0,1);const P=G();k(P,n,m),x(P,P),k(m,P,n);const N=2*t+(o?2:0),A=t+(o?2:0),a=q(3*N),M=q(3*A),g=q(2*N),i=new Array(3*t*(o?4:2)),d=new Array(3*t*(o?4:2));o&&(a[3*(N-2)]=w[0],a[3*(N-2)+1]=w[1],a[3*(N-2)+2]=w[2],g[2*(N-2)]=0,g[2*(N-2)+1]=0,a[3*(N-1)]=a[3*(N-2)]+h[0],a[3*(N-1)+1]=a[3*(N-2)+1]+h[1],a[3*(N-1)+2]=a[3*(N-2)+2]+h[2],g[2*(N-1)]=1,g[2*(N-1)+1]=1,M[3*(A-2)]=-n[0],M[3*(A-2)+1]=-n[1],M[3*(A-2)+2]=-n[2],M[3*(A-1)]=n[0],M[3*(A-1)+1]=n[1],M[3*(A-1)+2]=n[2]);const u=(p,C,L)=>{i[p]=C,d[p]=L};let S=0;const R=G(),E=G();for(let p=0;p<t;p++){const C=p*(2*Math.PI/t);V(R,m,Math.sin(C)),V(E,P,Math.cos(C)),F(R,R,E),M[3*p]=R[0],M[3*p+1]=R[1],M[3*p+2]=R[2],V(R,R,e),F(R,R,w),a[3*p]=R[0],a[3*p+1]=R[1],a[3*p+2]=R[2],g[2*p]=p/t,g[2*p+1]=0,a[3*(p+t)]=a[3*p]+h[0],a[3*(p+t)+1]=a[3*p+1]+h[1],a[3*(p+t)+2]=a[3*p+2]+h[2],g[2*(p+t)]=p/t,g[2*p+1]=1;const L=(p+1)%t;u(S++,p,p),u(S++,p+t,p),u(S++,L,L),u(S++,L,L),u(S++,p+t,p),u(S++,L+t,L)}if(o){for(let p=0;p<t;p++){const C=(p+1)%t;u(S++,N-2,A-2),u(S++,p,A-2),u(S++,C,A-2)}for(let p=0;p<t;p++){const C=(p+1)%t;u(S++,p+t,A-1),u(S++,N-1,A-1),u(S++,C+t,A-1)}}const D=[[y.POSITION,new T(a,i,3,!0)],[y.NORMAL,new T(M,d,3,!0)],[y.UV0,new T(g,i,2,!0)]];return new v(c,D)}function M0(c,r,e,t,s,O){t=t||10,s=s==null||s,Y(r.length>1);const o=[[0,0,0]],l=[],f=[];for(let n=0;n<t;n++){l.push([0,-n-1,-(n+1)%t-1]);const h=n/t*2*Math.PI;f.push([Math.cos(h)*e,Math.sin(h)*e])}return Jt(c,f,r,o,l,s,O)}function Jt(c,r,e,t,s,O,o=b(0,0,0)){const l=r.length,f=q(e.length*l*3+(6*t.length||0)),n=q(e.length*l*3+(t?6:0)),h=new Array,w=new Array;let m=0,P=0;const N=U(),A=U(),a=U(),M=U(),g=U(),i=U(),d=U(),u=U(),S=U(),R=U(),E=U(),D=U(),p=U(),C=Ut();ot(S,0,1,0),z(A,e[1],e[0]),x(A,A),O?(F(u,e[0],o),x(a,u)):ot(a,0,0,1),pt(A,a,S,S,g,a,It),X(M,a),X(D,g);for(let I=0;I<t.length;I++)V(i,g,t[I][0]),V(u,a,t[I][2]),F(i,i,u),F(i,i,e[0]),f[m++]=i[0],f[m++]=i[1],f[m++]=i[2];n[P++]=-A[0],n[P++]=-A[1],n[P++]=-A[2];for(let I=0;I<s.length;I++)h.push(s[I][0]>0?s[I][0]:-s[I][0]-1+t.length),h.push(s[I][1]>0?s[I][1]:-s[I][1]-1+t.length),h.push(s[I][2]>0?s[I][2]:-s[I][2]-1+t.length),w.push(0),w.push(0),w.push(0);let L=t.length;const $=t.length-1;for(let I=0;I<e.length;I++){let Ot=!1;I>0&&(X(N,A),I<e.length-1?(z(A,e[I+1],e[I]),x(A,A)):Ot=!0,F(R,N,A),x(R,R),F(E,e[I-1],M),xt(e[I],R,C),Ct(C,Ft(E,N),u)?(z(u,u,e[I]),x(a,u),k(g,R,a),x(g,g)):pt(R,M,D,S,g,a,It),X(M,a),X(D,g)),O&&(F(u,e[I],o),x(p,u));for(let j=0;j<l;j++)if(V(i,g,r[j][0]),V(u,a,r[j][1]),F(i,i,u),x(d,i),n[P++]=d[0],n[P++]=d[1],n[P++]=d[2],F(i,i,e[I]),f[m++]=i[0],f[m++]=i[1],f[m++]=i[2],!Ot){const lt=(j+1)%l;h.push(L+j),h.push(L+l+j),h.push(L+lt),h.push(L+lt),h.push(L+l+j),h.push(L+l+lt);for(let ut=0;ut<6;ut++){const Rt=h.length-6;w.push(h[Rt+ut]-$)}}L+=l}const Tt=e[e.length-1];for(let I=0;I<t.length;I++)V(i,g,t[I][0]),V(u,a,t[I][1]),F(i,i,u),F(i,i,Tt),f[m++]=i[0],f[m++]=i[1],f[m++]=i[2];const rt=P/3;n[P++]=A[0],n[P++]=A[1],n[P++]=A[2];const ht=L-l;for(let I=0;I<s.length;I++)h.push(s[I][0]>=0?L+s[I][0]:-s[I][0]-1+ht),h.push(s[I][2]>=0?L+s[I][2]:-s[I][2]-1+ht),h.push(s[I][1]>=0?L+s[I][1]:-s[I][1]-1+ht),w.push(rt),w.push(rt),w.push(rt);const St=[[y.POSITION,new T(f,h,3,!0)],[y.NORMAL,new T(n,w,3,!0)]];return new v(c,St)}function g0(c,r,e,t){Y(r.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Y(r[0].length===3,"createPolylineGeometry(): malformed vertex"),Y(e==null||e.length===r.length,"createPolylineGeometry: need same number of points and normals"),Y(e==null||e[0].length===3,"createPolylineGeometry(): malformed normal");const s=bt(3*r.length),O=new Array(2*(r.length-1));let o=0,l=0;for(let n=0;n<r.length;n++){for(let h=0;h<3;h++)s[o++]=r[n][h];n>0&&(O[l++]=n-1,O[l++]=n)}const f=[[y.POSITION,new T(s,O,3,!0)]];if(e){const n=q(3*e.length);let h=0;for(let w=0;w<r.length;w++)for(let m=0;m<3;m++)n[h++]=e[w][m];f.push([y.NORMAL,new T(n,O,3,!0)])}return t&&f.push([y.COLOR,new T(t,Et(t.length/4),4)]),new v(c,f,null,Nt.Line)}function A0(c,r,e,t,s,O=0){const o=new Array(18),l=[[-e,O,s/2],[t,O,s/2],[0,r+O,s/2],[-e,O,-s/2],[t,O,-s/2],[0,r+O,-s/2]],f=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let n=0;n<6;n++)o[3*n]=l[n][0],o[3*n+1]=l[n][1],o[3*n+2]=l[n][2];return new v(c,[[y.POSITION,new T(o,f,3,!0)]])}function p0(c,r){const e=c.getMutableAttribute(y.POSITION).data;for(let t=0;t<e.length;t+=3){const s=e[t],O=e[t+1],o=e[t+2];ot(J,s,O,o),Lt(J,J,r),e[t]=J[0],e[t+1]=J[1],e[t+2]=J[2]}}function I0(c,r=c){const e=c.attributes,t=e.get(y.POSITION).data,s=e.get(y.NORMAL).data;if(s){const O=r.getMutableAttribute(y.NORMAL).data;for(let o=0;o<s.length;o+=3){const l=s[o+1];O[o+1]=-s[o+2],O[o+2]=l}}if(t){const O=r.getMutableAttribute(y.POSITION).data;for(let o=0;o<t.length;o+=3){const l=t[o+1];O[o+1]=-t[o+2],O[o+2]=l}}}function it(c,r,e,t,s){return!(Math.abs(mt(r,c))>s)&&(k(e,c,r),x(e,e),k(t,e,c),x(t,t),!0)}function pt(c,r,e,t,s,O,o){return it(c,r,s,O,o)||it(c,e,s,O,o)||it(c,t,s,O,o)}const It=.99619469809,J=U();export{l0 as B,h0 as F,pt as M,p0 as O,w0 as a,Ht as c,u0 as e,O0 as f,A0 as g,Jt as i,f0 as l,I0 as m,c0 as o,M0 as p,Zt as r,a0 as s,i0 as u,g0 as w};
