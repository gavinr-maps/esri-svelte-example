const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-dropdown-BWiyYCou.js","./jsxFactory-CJa39Fro.js","./tslib.es6-B3Jf3DVX.js","./intl-CChhNOV8.js","./date-DlqISzcw.js","./jsonMap-0cxwUWs2.js","./subclass-BZA_h8Db.js","./locale-C9TlLpzi.js","./messages-OmQvZhAg.js","./Accessor-BLX9ikPh.js","./assets-C43MgM-v.js","./index-Bh2oEzTI.js","./index-2kwcjS9-.css","./Evented-BHRw9x22.js","./Promise-B2Hu02L7.js","./reactiveUtils-C5zUhJQJ.js","./asyncUtils-CWX51uTe.js","./Collection-CEdjem1-.js","./shared-B3wH2qpO.js","./SimpleObservable-KocWTzVy.js","./uuid-fwrPAdZb.js","./cast-Bjksrh93.js","./dom-D_AJDzAj.js","./floating-ui-Bma_zPVt.js","./debounce-BOqmhDXu.js","./interactive-y84HQRWL.js","./key-D63ExP77.js","./loadable-DM18hPdE.js","./observers-D2xgmA06.js","./openCloseComponent-CmOrfBN-.js","./calcite-dropdown-group-Dh1qXhLo.js","./resources3-Qm0M2nV8.js","./calcite-dropdown-item-CSOgQFgr.js","./component-6CIDVndn.js","./icon-BQO9J86c.js","./calcite-input-DAafN6Cc.js","./input2-BReyTnf4.js","./form-BZPQ5PUM.js","./label-DEe8AW1C.js","./locale-A4FuYD8q.js","./t9n-D0ry3MEw.js","./Validation-Bz9yoU6e.js","./input-j1u1wOBY.js","./input-message-CWvsvdFk.js","./progress-BXyickl_.js","./calcite-input-number-BjjBFtSg.js","./input-number-BVYRKcQu.js","./calcite-label-B1FxWqaL.js","./calcite-switch-CkUGVtze.js","./switch-Drd7BD6R.js","./calcite-action-Bys6x4p_.js","./action-D0Er9Ef6.js","./loader-C-zIPscB.js","./calcite-block-M0XyV5ob.js","./conditionalSlot-R5D9krYS.js","./Heading-D7P0OjYI.js","./action-menu-C6uYzPu-.js","./array-BMcQdnYi.js","./popover-Q5ruM4hh.js","./focusTrapComponent-BSUg_DLj.js","./FloatingArrow-BBdsG5MP.js","./handle-Ct1HP3bl.js","./scrim-DPa2aeKh.js","./calcite-block-section-BPfKIFKK.js","./calcite-icon-Cu0W9dtm.js","./calcite-notice-DSp0z_Oh.js","./resources2-DjkgwdyM.js","./calcite-panel-qSfJTr42.js","./panel-BdAbXPwM.js","./calcite-slider-GqQeL3Ah.js","./math-CPc4dlb6.js","./calcite-tooltip-rE_jVYtd.js"])))=>i.map(i=>d[i]);
import{_ as p}from"./index-Bh2oEzTI.js";import{r as s}from"./tslib.es6-B3Jf3DVX.js";import{watch as C}from"./reactiveUtils-C5zUhJQJ.js";import{m as o,a as $,n as P,b as N}from"./subclass-BZA_h8Db.js";import{e as I,B as O,n as e,r as U}from"./jsxFactory-CJa39Fro.js";import{c as R}from"./assets-C43MgM-v.js";import{l as W}from"./Color-BCS62Hs5.js";import{d as f,u as k}from"./TextSymbol-D8QO_KUV.js";import{b as T}from"./Accessor-BLX9ikPh.js";import{d as V}from"./Graphic-DsxsIjhH.js";import"./intl-CChhNOV8.js";import{V as F}from"./Collection-CEdjem1-.js";import{h as z}from"./UpdatingHandles-GfwcIh5z.js";import q from"./GraphicsLayer-i3FeUJ_n.js";import{e as G}from"./layerUtils-BS1Di3Pm.js";import{g as j}from"./locale-C9TlLpzi.js";import{h as J}from"./messages-OmQvZhAg.js";import"./asyncUtils-CWX51uTe.js";import"./Evented-BHRw9x22.js";import"./shared-B3wH2qpO.js";import"./SimpleObservable-KocWTzVy.js";import"./Promise-B2Hu02L7.js";import"./uuid-fwrPAdZb.js";import"./cast-Bjksrh93.js";import"./colorUtils-0bJDPow9.js";import"./mathUtils-C4_ghTv4.js";import"./jsonMap-0cxwUWs2.js";import"./enumeration-Ba5njXdz.js";import"./screenUtils-_ZIvrt5o.js";import"./writer-DNAwXnhG.js";import"./geometry-D964gYQX.js";import"./Extent-Bf3YTe7m.js";import"./Point-Cg0-ChZE.js";import"./Polyline-D9YkgmM_.js";import"./PopupTemplate-BHMhS05j.js";import"./Clonable-D3rtuBWg.js";import"./fieldUtils-tmQlKvWo.js";import"./date-DlqISzcw.js";import"./ActionToggle-iT4slXc7.js";import"./Identifiable-B1UbsKNt.js";import"./symbols-CNimns--.js";import"./materialUtils-DarhapKC.js";import"./opacityUtils-C68Tlu6_.js";import"./vec3f64-BLpZdpfb.js";import"./aaBoundingBox-BE7cC1jD.js";import"./persistableUrlUtils-fa1mAujs.js";import"./collectionUtils-D_lHIu88.js";import"./Portal-C10FKnaA.js";import"./Loadable-BabW5Xcc.js";import"./jsonUtils-CEfjT-BK.js";import"./GraphicsCollection-FfahqxsR.js";import"./Layer-CVt7Hb5J.js";import"./TimeExtent-DocT5yPf.js";import"./timeUtils-8fb_2oAt.js";import"./BlendLayer-CXM4n_Ge.js";import"./jsonUtils-CSnQD004.js";import"./parser-CTsgEym6.js";import"./utils-93yNk4Xc.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-GpOFENPA.js";import"./common-DQOJ18NT.js";import"./ScaleRangeLayer-Bb8Ig1Hz.js";import"./ElevationInfo-CA5m_tHv.js";import"./unitConversionUtils-BMfW9yAe.js";import"./lengthUtils-DL1-FDQQ.js";let b=class extends T{constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};s([o({type:Boolean,nonNullable:!0})],b.prototype,"arrowsToggle",void 0),s([o({type:Boolean,nonNullable:!0})],b.prototype,"capSelect",void 0),s([o({type:Boolean,nonNullable:!0})],b.prototype,"colorPicker",void 0),s([o({type:Boolean,nonNullable:!0})],b.prototype,"stylePicker",void 0),s([o({type:Boolean,nonNullable:!0})],b.prototype,"widthInput",void 0),b=s([$("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],b);const M=b,v="esri-un-associations",_={divControlsSymbolPicker:`${v}__div-controls-symbol-picker`,dropdown:`${v}__dropdown`,dropdownItemLineCap:`${v}__dropdown-item-line-cap`,dropdownItemLinePattern:`${v}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${v}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${v}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${v}__dropdown-trigger`,labelAndToggle:`${v}__label-and-toggle`};let L=class extends O{constructor(i,n){super(i,n),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new f,this.messages=null,this.showArrows=!1,this.visibleElements=new M,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:i,lineColor:n,lineStyle:r,lineWidth:l,showArrows:c}},visibleElements:u}=this,A=this.lineSymbol;return e("div",{class:_.divControlsSymbolPicker},u.arrowsToggle?this._renderToggle(c,this.showArrows,A,"marker"):void 0,u.capSelect?this._renderLineStylePicker(i,this._lineCapTypes,A,"cap"):void 0,u.colorPicker&&A.color?this._renderColorPicker(n,A.color.toHex(),A,"color"):void 0,u.stylePicker?this._renderLineStylePicker(r,this._lineStyleTypes,A,"style"):void 0,u.widthInput?this._renderNumberInput(l,A.width.toString(),A,"width"):void 0)}loadDependencies(){return U({dropdown:()=>p(()=>import("./calcite-dropdown-BWiyYCou.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url),"dropdown-group":()=>p(()=>import("./calcite-dropdown-group-Dh1qXhLo.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,28,31]),import.meta.url),"dropdown-item":()=>p(()=>import("./calcite-dropdown-item-CSOgQFgr.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,27,33,25,31,34,28]),import.meta.url),input:()=>p(()=>import("./calcite-input-DAafN6Cc.js"),__vite__mapDeps([35,36,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,37,25,26,38,33,27,39,28,40,41,42,34,43,44]),import.meta.url),"input-number":()=>p(()=>import("./calcite-input-number-BjjBFtSg.js"),__vite__mapDeps([45,46,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,37,25,26,38,33,27,39,28,40,41,42,34,43,44]),import.meta.url),label:()=>p(()=>import("./calcite-label-B1FxWqaL.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,38,22,33]),import.meta.url),switch:()=>p(()=>import("./calcite-switch-CkUGVtze.js"),__vite__mapDeps([48,49,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,37,25,26,38,33,27]),import.meta.url)})}_afterComponentCreate(i){"value"in i&&i.value!=null&&"setNumberValue"in i&&i.setNumberValue({committing:!1,value:i.value,origin:"direct"})}_renderColorPicker(i,n,r,l){return e("calcite-label",{scale:"s"},i,e("calcite-input",{scale:"s",type:"color",value:n,onCalciteInputInput:c=>{const u=c.target;r.set(l,new W(u.value))}}))}_renderLineStylePicker(i,n,r,l){const c=l==="style",u="esri/widgets/UtilityNetworkAssociations/assets/img";function A(y,d){return e("calcite-dropdown-item",{label:y,selected:r[d]===y},e("div",{class:c?_.dropdownItemLinePattern:_.dropdownItemLineCap,style:`background-image:url(${R(`${u}/line-${c?"patterns":"caps"}/${y}.png`)})`}))}return e("calcite-label",{scale:"s"},i,e("calcite-dropdown",{class:_.dropdown,onCalciteDropdownSelect:y=>{const d=y.target;r.set(l,d.selectedItems[0].label)}},e("div",{class:_.dropdownTrigger,role:"button",slot:"trigger"},e("div",{class:c?_.dropdownSelectedItemLinePattern:_.dropdownSelectedItemLineCap,style:`background-image:url(${R(`${u}/line-${c?"patterns":"caps"}/${r[l]}.png`)})`})),e("calcite-dropdown-group",null,n.map(y=>A(y,l)))))}_renderNumberInput(i,n,r,l){return e("calcite-label",{scale:"s"},i,e("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:n,onCalciteInputNumberChange:c=>{const u=c.target;r.set(l,u.value)}}))}_renderToggle(i,n,r,l){return e("div",{class:_.labelAndToggle},e("calcite-label",{scale:"s"},i),e("calcite-switch",{bind:this,checked:n,onCalciteSwitchChange:c=>{c.target.checked?r.set(l,new k({style:"arrow"})):r.set(l,null)}}))}};s([o()],L.prototype,"lineSymbol",void 0),s([o(),I("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],L.prototype,"messages",void 0),s([o()],L.prototype,"showArrows",void 0),s([o({type:M,nonNullable:!0})],L.prototype,"visibleElements",void 0),L=s([$("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],L);const D=L,K={noAssociationTypeSpecified:-2147208504};let m=class extends T{constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new z,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new f({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new F,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new f({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await J("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then(()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([C(()=>[this.view,this.utilityNetwork],async()=>{var u,A;const{loadErrors:i,messages:{info:{noUtilityNetwork:n,noView:r}}}=this;this._initialValidationsFinished=!1,i.removeAll();let l=!1,c=!1;this.removeAssociations(),((u=this.utilityNetwork)==null?void 0:u.type)!=="utility"?(this.loadErrors.push(n),P.getLogger(this).error(new N("utilityNetworkAssociations:missing-property",n))):(this.utilityNetwork.loaded||await this.utilityNetwork.load(),l=!0),((A=this.view)==null?void 0:A.type)!=="2d"?(this.loadErrors.push(r),P.getLogger(this).error(new N("utilityNetworkAssociations:missing-property",r))):(G(this.view,this._internalGraphicsLayerConnectivity),G(this.view,this._internalGraphicsLayerStructuralAttachment),c=!0),l&&c&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0},{initial:!0}),C(()=>{var i;return[(i=this.view)==null?void 0:i.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]},async()=>{var i;(i=this.view)!=null&&i.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()}),C(()=>[this.showArrowsConnectivity],()=>{const i=this.connectivityAssociationsLineSymbol.clone();i.marker=null,this.showArrowsConnectivity&&(i.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const n of this._internalGraphicsLayerConnectivity.graphics)n.symbol=i}),C(()=>[this.showArrowsStructuralAttachment],()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();i.marker=null,this.showArrowsStructuralAttachment&&(i.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const n of this._internalGraphicsLayerStructuralAttachment.graphics)n.symbol=i}),C(()=>{const{cap:i,color:n,style:r,width:l,marker:c}=this.connectivityAssociationsLineSymbol;return[i,n,r,l,c]},()=>{const i=this.connectivityAssociationsLineSymbol.clone();for(const n of this._internalGraphicsLayerConnectivity.graphics)n.symbol=i;this.showArrowsConnectivity=!1,i.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,i.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),C(()=>{const{cap:i,color:n,style:r,width:l,marker:c}=this.structuralAttachmentAssociationsLineSymbol;return[i,n,r,l,c]},()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();for(const n of this._internalGraphicsLayerStructuralAttachment.graphics)n.symbol=i;this.showArrowsStructuralAttachment=!1,i.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,i.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),j(t)])})}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":this.executionError!==""?"warning":this._initialValidationsFinished?"ready":"loading"}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){var c,u,A,y;const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:i,noAssociationTypeSpecified:n}},utilityNetwork:r}=this;this._set("executionError","");const l={extent:(c=this.view)==null?void 0:c.extent,gdbVersion:(u=this.utilityNetwork)==null?void 0:u.gdbVersion,maxGeometryCount:this.maxAllowableAssociations,moment:(A=this.utilityNetwork)==null?void 0:A.historicMoment,outSpatialReference:(y=this.view)==null?void 0:y.spatialReference.clone(),returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations};this._updatingHandles.addPromise(r==null?void 0:r.synthesizeAssociationGeometries(l).then(d=>{let g=[],E=[];return d!=null&&d.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",t)):(d==null?void 0:d.associations.length)===0?(this.removeAssociations(),void this._set("executionError",i)):void(d&&(g=d==null?void 0:d.associations.filter(({associationType:S})=>S==="connectivity").map(S=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new k({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new V({geometry:S.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol}))),E=d.associations.filter(({associationType:S})=>S==="attachment").map(S=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new k({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new V({geometry:S.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol}))),this._internalGraphicsLayerConnectivity.removeAll(),g.length>0&&this._internalGraphicsLayerConnectivity.addMany(g),this._internalGraphicsLayerStructuralAttachment.removeAll(),E.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(E)))},d=>{var E;let g="Error: "+d;d instanceof N&&((E=d.details)!=null&&E.raw)&&(d.details.raw.extendedCode===K.noAssociationTypeSpecified?g=n:g=d.details.message),this._set("executionError",g)}))}_createInternalGraphicsLayer(t){return new q({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&((t=this.view)!=null&&t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};s([o()],m.prototype,"_initialValidationsFinished",void 0),s([o()],m.prototype,"autoRefreshAssociations",void 0),s([o({type:f,nonNullable:!0})],m.prototype,"connectivityAssociationsLineSymbol",void 0),s([o({readOnly:!0})],m.prototype,"executionError",void 0),s([o({type:Boolean,value:!0})],m.prototype,"includeConnectivityAssociations",null),s([o({type:Boolean,value:!0})],m.prototype,"includeStructuralAttachmentAssociations",null),s([o()],m.prototype,"loadErrors",void 0),s([o()],m.prototype,"maxAllowableAssociations",void 0),s([o()],m.prototype,"messages",void 0),s([o()],m.prototype,"showAssociationsEnabled",void 0),s([o()],m.prototype,"showArrowsConnectivity",void 0),s([o()],m.prototype,"showArrowsStructuralAttachment",void 0),s([o({readOnly:!0})],m.prototype,"state",null),s([o({type:f,nonNullable:!0})],m.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),s([o()],m.prototype,"utilityNetwork",null),s([o()],m.prototype,"view",null),m=s([$("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],m);const B=m;let x=class extends T{constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=null,this.structuralAttachmentAssociationsSettings=null}};s([o({type:Boolean,nonNullable:!0})],x.prototype,"maxAllowableAssociationsSlider",void 0),s([o({type:M,nonNullable:!0})],x.prototype,"connectivityAssociationsSettings",void 0),s([o({type:M,nonNullable:!0})],x.prototype,"structuralAttachmentAssociationsSettings",void 0),x=s([$("esri.widgets.UtilityNetworkAssociations.VisibleElements")],x);const H=x,w="esri-un-associations",h={action:`${w}__action`,actionRefresh:`${w}__action-refresh`,blockContent:`${w}__block-content`,blockSectionSettings:`${w}__block-section-settings`,divControlsMain:`${w}__div-controls-main`,label:`${w}__label`,labelAndSlider:`${w}__label-and-slider`,labelAndToggle:`${w}__label-and-toggle`,slider:`${w}__slider`,statusIconContainer:`${w}__status-icon-container`,statusIconWarning:`${w}__status-icon-warning`,switch:`${w}__switch`,switchContainer:`${w}__switch-container`,widgetContainer:`${w}__widget-container`};let a=class extends O{constructor(t,i){super(t,i),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new B,this.visibleElements=new H}initialize(){this.addHandles([C(()=>{var t;return[(t=this.view)==null?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]},()=>{this.autoRefreshAssociations===!0&&(this.showAssociationsEnabled===!0?this.viewModel.showAssociations():this.viewModel.removeAssociations())})])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return e("div",{class:h.widgetContainer},e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return U({action:()=>p(()=>import("./calcite-action-Bys6x4p_.js"),__vite__mapDeps([50,51,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,25,27,39,26,28,33,40,34,52]),import.meta.url),block:()=>p(()=>import("./calcite-block-M0XyV5ob.js"),__vite__mapDeps([53,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,54,28,22,25,39,26,40,55,27,29,23,24,51,33,34,52,56,57,58,59,60,61,62]),import.meta.url),"block-section":()=>p(()=>import("./calcite-block-section-BPfKIFKK.js"),__vite__mapDeps([63,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,26,39,28,40,27,34,49,37,25,38,33]),import.meta.url),icon:()=>p(()=>import("./calcite-icon-Cu0W9dtm.js"),__vite__mapDeps([64,34,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,28]),import.meta.url),label:()=>p(()=>import("./calcite-label-B1FxWqaL.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,38,22,33]),import.meta.url),notice:()=>p(()=>import("./calcite-notice-DSp0z_Oh.js"),__vite__mapDeps([65,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,54,28,22,27,39,26,40,66,29,33,34]),import.meta.url),panel:()=>p(()=>import("./calcite-panel-qSfJTr42.js"),__vite__mapDeps([67,68,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,25,27,28,56,57,26,51,39,33,40,34,52,58,23,24,59,29,55,60,62]),import.meta.url),slider:()=>p(()=>import("./calcite-slider-GqQeL3Ah.js"),__vite__mapDeps([69,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,37,25,26,38,33,27,39,28,70]),import.meta.url),switch:()=>p(()=>import("./calcite-switch-CkUGVtze.js"),__vite__mapDeps([48,49,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,37,25,26,38,33,27]),import.meta.url),tooltip:()=>p(()=>import("./calcite-tooltip-rE_jVYtd.js"),__vite__mapDeps([71,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,29,60]),import.meta.url)})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.target.checked}_getLoadErrorMessagesAsNotices(t,i){return e("calcite-notice",{closable:!1,key:`error-notice-${i}`,kind:"warning",open:!0,scale:"s"},e("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.target.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:i}}=this;i!=="ready"&&i!=="warning"||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(D,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:i}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return e("div",{class:h.labelAndToggle,key:"connectivityAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderContent(){const{viewModel:{loadErrors:t,state:i}}=this;return i==="disabled"?e("div",{class:h.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):e("calcite-panel",{disabled:i==="loading"},e("div",{class:h.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,i,n){return e("div",{key:t,slot:"control"},e("calcite-action",{id:i,loading:!0,text:n}),e("calcite-tooltip",{referenceElement:i},e("span",null,n)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:i}}=this;if(i)return e("div",{class:h.labelAndSlider},e("calcite-label",{class:h.label},t),e("calcite-slider",{bind:this,class:h.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:i},viewModel:{state:n}}=this,r=`${this.id}-refresh-action`;if(n!=="disabled")return e("div",{class:h.actionRefresh,slot:"control"},e("calcite-action",{bind:this,class:h.action,icon:"refresh-f",id:r,loading:n==="loading",onclick:this._refreshAssociations,text:t}),e("calcite-tooltip",{referenceElement:r},e("span",null,n==="loading"?i:t)))}_renderSettingsPane(){const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:i,connectivityAssociationsSettings:n,structuralAttachmentAssociationsSettings:r}}=this;if(i||n||r)return e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderMaxAllowableAssociationsSlider(),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:i},viewModel:{state:n}}=this,r=`${this.id}-show-associations-switch`;if(n!=="disabled")return n==="loading"?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,i):e("div",{class:h.switchContainer,key:"switchDiv",slot:"control"},e("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:h.switch,id:r,onCalciteSwitchChange:this._showAssociationsSwitchChange}),e("calcite-tooltip",{referenceElement:r},e("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:i,state:n}}=this;switch(n){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,i);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(D,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:i}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return e("div",{class:h.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_showAssociationsSwitchChange(t){const{viewModel:i}=this;this.showAssociationsEnabled=t.target.checked,this._associationsOptionsEnabled=t.target.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.target.checked}_renderWarningIcon(t,i,n){return n?e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}),e("calcite-tooltip",{referenceElement:i},e("span",null,n))):e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}))}};s([o()],a.prototype,"autoRefreshAssociations",null),s([o()],a.prototype,"connectivityAssociationsLineSymbol",null),s([o()],a.prototype,"icon",null),s([o()],a.prototype,"includeConnectivityAssociations",null),s([o()],a.prototype,"includeStructuralAttachmentAssociations",null),s([o()],a.prototype,"label",null),s([o()],a.prototype,"maxAllowableAssociations",null),s([o()],a.prototype,"maxAllowableAssociationsSliderMax",null),s([o()],a.prototype,"maxAllowableAssociationsSliderMin",null),s([o()],a.prototype,"maxAllowableAssociationsSliderStep",null),s([o(),I("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],a.prototype,"messages",void 0),s([o(),I("esri/t9n/common")],a.prototype,"messagesCommon",void 0),s([o()],a.prototype,"showArrowsConnectivity",null),s([o()],a.prototype,"showArrowsStructuralAttachment",null),s([o()],a.prototype,"showAssociationsEnabled",null),s([o()],a.prototype,"structuralAttachmentAssociationsLineSymbol",null),s([o()],a.prototype,"utilityNetwork",null),s([o()],a.prototype,"view",null),s([o({type:B})],a.prototype,"viewModel",void 0),s([o({type:H,nonNullable:!0})],a.prototype,"visibleElements",void 0),a=s([$("esri.widgets.UtilityNetworkAssociations")],a);const li=a;export{li as default};
