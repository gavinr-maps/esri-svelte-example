import"./index-73bQemcW.js";import"./index-BFcysx8f.js";import"./index-BZzzyJf2.js";import{S as R}from"./jsxFactory-CLjKarlq.js";import{i as c}from"./keyed-CdPY5MOf.js";import{i as C,L as g,c as p,x as a,s as y,B as f}from"./index-tefRSezt.js";import{e as $,n as u}from"./ref-Ccn4I0kT.js";import{x as h}from"./dom--xxYYVQF.js";import{t as T}from"./key-CZcQa38B.js";import{m as v,p as S}from"./interactive-B8siLByk.js";import{s as k}from"./component-CFGnHAqh.js";import"./observers-BdozwIHb.js";import"./loadable-DOQnSSjG.js";import"./useT9n-CJAswmP1.js";import"./Accessor-BHnuXKD2.js";import"./intl-Do3GEEJ7.js";import"./Promise-CmQqe-ke.js";import"./cast-BA_-jlhc.js";import"./JSONSupport-CGdeqxpk.js";import"./Evented-DCWccWGU.js";import"./reactiveUtils-BR0C1Kq4.js";import"./SimpleObservable-7oieNGD8.js";import"./uuid-Cl5lrJ4c.js";import"./directive-helpers-C0aXnQdc.js";import"./guid-ejniuQmw.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const A={lastVisibleRow:"last-visible-row"},I=C`@charset "UTF-8";:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{--calcite-internal-table-row-background: var(--calcite-table-row-background, var(--calcite-color-foreground-1));--calcite-internal-table-row-border-color: var(--calcite-table-row-border-color, transparent);display:contents}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) tr{pointer-events:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}tr{border-block-end:1px solid var(--calcite-internal-table-row-border-color);background-color:var(--calcite-internal-table-row-background)}tr.last-visible-row{border-block-end:0}@-moz-document url-prefix(){tr{box-shadow:inset 0 -1px 0 0 var(--calcite-internal-table-row-border-color)}tr.last-visible-row{box-shadow:inset 0 -1px 0 0 transparent}}:host([item-hidden]){display:none}`,b=class b extends g{constructor(){super(),this.rowCells=[],this.tableRowSlotEl=$(),this.itemHidden=!1,this.disabled=!1,this.interactionMode="interactive",this.numbered=!1,this.selected=!1,this.selectionMode="none",this.calciteInternalTableRowFocusRequest=p({cancelable:!1}),this.calciteInternalTableRowSelect=p({cancelable:!1}),this.calciteTableRowSelect=p({cancelable:!1}),this.handleSelectionOfRow=()=>{(this.rowType==="body"||this.rowType==="head"&&this.selectionMode==="multiple")&&this.calciteTableRowSelect.emit()},this.handleKeyboardSelection=e=>{T(e.key)&&(e.key===" "&&e.preventDefault(),this.handleSelectionOfRow())},this.listenOn(document,"calciteInternalTableRowFocusChange",this.calciteInternalTableRowFocusChangeHandler)}load(){this.listenOn(this.el.shadowRoot,"slotchange",this.handleSlotChange)}willUpdate(e){(e.has("bodyRowCount")||e.has("scale")||e.has("selected")&&(this.hasUpdated||this.selected!==!1)||e.has("selectedRowCount")||e.has("interactionMode")&&(this.hasUpdated||this.interactionMode!=="interactive"))&&this.handleCellChanges(),(e.has("numbered")&&(this.hasUpdated||this.numbered!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none"))&&this.handleDelayedCellChanges(),e.has("selected")&&this.calciteInternalTableRowSelect.emit()}updated(){v(this)}loaded(){this.tableRowEl&&this.rowCells.length>0&&this.updateCells()}handleSlotChange(){this.updateCells()}handleCellChanges(){this.tableRowEl&&this.rowCells.length>0&&this.updateCells()}handleDelayedCellChanges(){this.tableRowEl&&this.rowCells.length>0&&requestAnimationFrame(()=>this.updateCells())}calciteInternalTableRowFocusChangeHandler(e){var t;if(e.target.contains(this.el)){const s=e.detail.cellPosition,i=e.detail.rowPosition,o=e.detail.destination,n=e.detail.lastCell;if(i===this.positionAll){if(this.disabled){const d=o==="last"?"previous":o==="first"?"next":o;this.emitTableRowFocusRequest(s,this.positionAll,d);return}const r=n?this.rowCells[this.rowCells.length-1]:(t=this.rowCells)==null?void 0:t.find((d,l)=>l+1===s);r&&r.setFocus()}}}keyDownHandler(e){var n;if(this.interactionMode!=="interactive")return;const t=e.target,s=e.key,i=e.ctrlKey,o=this.rowCells;if(t.matches("calcite-table-cell")||t.matches("calcite-table-header"))switch(s){case"ArrowUp":this.emitTableRowFocusRequest(t.positionInRow,this.positionAll,"previous"),e.preventDefault();break;case"ArrowDown":this.emitTableRowFocusRequest(t.positionInRow,this.positionAll,"next"),e.preventDefault();break;case"PageUp":this.emitTableRowFocusRequest(t.positionInRow,this.positionAll,"first"),e.preventDefault();break;case"PageDown":this.emitTableRowFocusRequest(t.positionInRow,this.positionAll,"last"),e.preventDefault();break;case"ArrowLeft":h(o,t,"previous",!1),e.preventDefault();break;case"ArrowRight":h(o,t,"next",!1),e.preventDefault();break;case"Home":i?(this.emitTableRowFocusRequest(1,this.positionAll,"first"),e.preventDefault()):(h(o,t,"first",!1),e.preventDefault());break;case"End":i?(this.emitTableRowFocusRequest((n=this.rowCells)==null?void 0:n.length,this.positionAll,"last",!0),e.preventDefault()):(h(o,t,"last",!1),e.preventDefault());break}}emitTableRowFocusRequest(e,t,s,i){this.calciteInternalTableRowFocusRequest.emit({cellPosition:e,rowPosition:t,destination:s,lastCell:i})}updateCells(){var o,n,r,d;const e=this.alignment?this.alignment:this.rowType!=="head"?"center":"start",t=(n=(o=this.tableRowSlotEl.value)==null?void 0:o.assignedElements({flatten:!0}))==null?void 0:n.filter(l=>l.matches("calcite-table-cell")||l.matches("calcite-table-header")),s=(d=Array.from((r=this.tableRowEl)==null?void 0:r.querySelectorAll("calcite-table-header, calcite-table-cell")))==null?void 0:d.filter(l=>l.numberCell||l.selectionCell),i=s?s.concat(t):t;i.length>0&&(i==null||i.forEach((l,m)=>{l.interactionMode=this.interactionMode,l.lastCell=m===i.length-1,l.parentRowAlignment=e,l.parentRowIsSelected=this.selected,l.parentRowType=this.rowType,l.positionInRow=m+1,l.scale=this.scale,l.nodeName==="CALCITE-TABLE-CELL"&&(l.readCellContentsToAT=this.readCellContentsToAT,l.disabled=this.disabled)})),this.rowCells=i||[],this.cellCount=i==null?void 0:i.length}renderSelectionIcon(){const e=this.selectionMode==="multiple"&&this.selected?"check-square-f":this.selectionMode==="multiple"?"square":this.selected?"circle-f":"circle";return a`<calcite-icon .icon=${e} .scale=${k(this.scale)}></calcite-icon>`}renderSelectableCell(){return this.rowType==="head"?c("selection-head",a`<calcite-table-header alignment=center .bodyRowCount=${this.bodyRowCount} @click=${this.handleSelectionOfRow} @keydown=${this.handleKeyboardSelection} .parentRowAlignment=${this.alignment} .selectedRowCount=${this.selectedRowCount} .selectedRowCountLocalized=${this.selectedRowCountLocalized} .selectionCell=${!0} .selectionMode=${this.selectionMode}></calcite-table-header>`):this.rowType==="body"?c("selection-body",a`<calcite-table-cell alignment=center @click=${this.handleSelectionOfRow} @keydown=${this.handleKeyboardSelection} .parentRowAlignment=${this.alignment} .parentRowIsSelected=${this.selected} .parentRowPositionLocalized=${this.positionSectionLocalized} .selectionCell=${!0}>${this.renderSelectionIcon()}</calcite-table-cell>`):c("selection-foot",a`<calcite-table-cell alignment=center .parentRowAlignment=${this.alignment} .selectionCell=${!0}></calcite-table-cell>`)}renderNumberedCell(){return this.rowType==="head"?c("numbered-head",a`<calcite-table-header alignment=center .numberCell=${!0} .parentRowAlignment=${this.alignment}></calcite-table-header>`):this.rowType==="body"?c("numbered-body",a`<calcite-table-cell alignment=center .numberCell=${!0} .parentRowAlignment=${this.alignment}>${this.positionSectionLocalized}</calcite-table-cell>`):c("numbered-foot",a`<calcite-table-cell alignment=center .numberCell=${!0} .parentRowAlignment=${this.alignment}></calcite-table-cell>`)}render(){return S({disabled:this.disabled,children:a`<tr .ariaRowIndex=${this.positionAll+1} .ariaSelected=${this.selected} class=${y({[A.lastVisibleRow]:this.lastVisibleRow})} @keydown=${this.keyDownHandler} ${u(e=>{e&&(this.tableRowEl=e,f(a`${this.numbered&&this.renderNumberedCell()||""}${this.selectionMode!=="none"&&this.renderSelectableCell()||""}<slot ${u(this.tableRowSlotEl)}></slot>`,e))})}></tr>`})}};b.properties={alignment:3,itemHidden:7,bodyRowCount:9,cellCount:9,disabled:7,interactionMode:1,lastVisibleRow:5,numbered:5,positionAll:9,positionSection:9,positionSectionLocalized:1,readCellContentsToAT:5,rowType:1,scale:1,selected:7,selectedRowCount:9,selectedRowCountLocalized:1,selectionMode:1},b.styles=I;let w=b;R("calcite-table-row",w);export{w as TableRow};
