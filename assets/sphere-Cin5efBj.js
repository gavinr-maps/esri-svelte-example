import{aC as nt,ad as L}from"./Accessor-BmwT4B0c.js";import{l as rt,b as it}from"./mathUtils-Cfq9PL9W.js";import{p as et}from"./mat4-Fi6iAz29.js";import{s as E,c as g,P as _,u as $,g as d,_ as q,A as S,R as ot,o as p,r as M,j as st,E as ct,p as U,I as ut,v as at,q as ft}from"./vec32-Dvg_eL9J.js";import{t as T,n as h}from"./vec3f64-BLpZdpfb.js";import{a as j,L as V}from"./vec42-YcqnINSP.js";import{n as X,r as Y}from"./vec4f64-o2zAXfmz.js";import{e as ht}from"./common-DQOJ18NT.js";import{n as b}from"./Polyline-s-JzsQqo.js";import{r as mt,s as gt}from"./mat3-CR8GKnhD.js";import{e as lt}from"./mat3f64-BBpwCtoL.js";import{c as f,a as dt,b as $t}from"./plane-CpXmOyqq.js";class Mt{constructor(r){this._allocator=r,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&nt(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const r=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*z);this._items.length=Math.min(r,this._items.length),this._itemsPtr=0}_grow(){for(let r=0;r<Math.max(8,Math.min(this._items.length,z));r++)this._items.push(this._allocator())}}const z=1024;function x(t){return t?Z(T(t.origin),T(t.direction)):Z(h(),h())}function Z(t,r){return{origin:t,direction:r}}function en(t,r){return L(t.origin,r.origin)&&L(t.direction,r.direction)}function on(t,r){const n=bt.get();return n.origin=t,n.direction=r,n}function sn(t,r=x()){return pt(t.origin,t.direction,r)}function _t(t,r,n=x()){return E(n.origin,t),g(n.direction,r,t),n}function pt(t,r,n=x()){return E(n.origin,t),E(n.direction,r),n}function cn(t,r){const n=q(f.get(),S(f.get(),t.direction),g(f.get(),r,t.origin));return _(n,n)}function Pt(t,r,n){const i=_(t.direction,g(n,r,t.origin));return $(n,t.origin,d(n,t.direction,i)),n}function un(t,r,n,i){const e=t.origin,o=r.origin,s=t.direction,c=r.direction,u=_(S(R,s),S(B,c));if(Math.abs(u)>=1)return null;const a=q(R,s,c),m=ot(y,o,e),v=mt(F,s[0],s[1],s[2],-c[0],-c[1],-c[2],a[0],a[1],a[2]),l=gt(F,v);if(l==null)return[n,i];const W=_(p(R,l[0],l[3],l[6]),m),tt=_(p(B,l[1],l[4],l[7]),m);return $(n,e,d(y,s,W)),$(i,o,d(y,c,tt)),[n,i]}const bt=new Mt(()=>x()),y=h(),R=h(),B=h(),F=lt();function N(t,r){const n=M(t),i=rt(t[2]/n),e=Math.atan2(t[1]/n,t[0]/n);return p(r,n,i,e),r}const qt=k();function k(){return X()}const St=V,wt=V;function D(t,r){return j(r,t)}function xt(t,r){return Y(t[0],t[1],t[2],r)}function At(t){return t}function vt(t){t[0]=t[1]=t[2]=t[3]=0}function yt(t,r){return t[0]=t[1]=t[2]=0,t[3]=r,t}function P(t){return t[3]}function Rt(t){return t}function Ct(t,r,n,i){return Y(t,r,n,i)}function Et(t,r,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+r,n}function jt(t,r,n){return t!==n&&D(t,n),n}function Ot(t,r){return r}function A(t,r,n){if(r==null||!G(t,r,w))return!1;let{t0:i,t1:e}=w;if((i<0||e<i&&e>0)&&(i=e),i<0)return!1;if(n){const{origin:o,direction:s}=r;n[0]=o[0]+s[0]*i,n[1]=o[1]+s[1]*i,n[2]=o[2]+s[2]*i}return!0}function kt(t,r,n){const i=_t(r,n);if(!G(t,i,w))return[];const{origin:e,direction:o}=i,{t0:s,t1:c}=w,u=a=>{const m=h();return ft(m,e,o,a),I(t,m,m)};return Math.abs(s-c)<ht()?[u(s)]:[u(s),u(c)]}const w={t0:0,t1:0};function G(t,r,n){const{origin:i,direction:e}=r,o=It;o[0]=i[0]-t[0],o[1]=i[1]-t[1],o[2]=i[2]-t[2];const s=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(s===0)return!1;const c=2*(e[0]*o[0]+e[1]*o[1]+e[2]*o[2]),u=c*c-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return n.t0=(-c-a)/(2*s),n.t1=(-c+a)/(2*s),!0}const It=h();function Lt(t,r){return A(t,r,null)}function Tt(t,r,n){if(A(t,r,n))return n;const i=H(t,r,f.get());return $(n,r.origin,d(f.get(),r.direction,U(r.origin,i)/M(r.direction))),n}function H(t,r,n){const i=f.get(),e=dt.get();q(i,r.origin,r.direction);const o=P(t);q(n,i,r.origin),d(n,n,1/M(n)*o);const s=J(t,r.origin),c=$t(r.origin,n);return et(e,c+s,i),ct(n,n,e),n}function zt(t,r,n,i){const e=P(t),o=e*e,s=r+.5*Math.PI,c=n*n+o-2*Math.cos(s)*n*e,u=Math.sqrt(c),a=c-o;if(a<=0)return .5;const m=Math.sqrt(a),v=Math.acos(m/u)-Math.asin(e/(u/Math.sin(s)));return Math.min(1,(v+.5*i)/i)}function Zt(t,r,n){return A(t,r,n)?n:(Pt(r,t,n),I(t,n,n))}function I(t,r,n){const i=g(f.get(),r,t),e=d(f.get(),i,t[3]/M(i));return $(n,e,t)}function Bt(t,r){const n=g(f.get(),r,t),i=st(n),e=t[3]*t[3];return Math.sqrt(Math.abs(i-e))}function J(t,r){const n=g(f.get(),r,t),i=M(n),e=P(t),o=e+Math.abs(e-i);return it(e/o)}const C=h();function K(t,r,n,i){const e=g(C,r,t);switch(n){case b.X:{const o=N(e,C)[2];return p(i,-Math.sin(o),Math.cos(o),0)}case b.Y:{const o=N(e,C),s=o[1],c=o[2],u=Math.sin(s);return p(i,-u*Math.cos(c),-u*Math.sin(c),Math.cos(s))}case b.Z:return S(i,e);default:return}}function Q(t,r){const n=g(O,r,t);return M(n)-t[3]}function Ft(t,r,n,i){const e=Q(t,r),o=K(t,r,b.Z,O),s=d(O,o,n-e);return $(i,r,s)}function Nt(t,r){const n=at(t,r),i=P(t);return n<=i*i}function Ut(t,r,n=X()){const i=U(t,r),e=t[3],o=r[3];return i+o<e?(j(n,t),n):i+e<o?(j(n,r),n):(ut(n,t,r,(i+o-e)/(2*i)),n[3]=(i+e+o)/2,n)}const O=h(),Vt=k(),an=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:qt,altitudeAt:Q,angleToSilhouette:J,axisAt:K,cameraFrustumCoverage:zt,clear:vt,closestPoint:Zt,closestPointOnSilhouette:H,containsPoint:Nt,copy:D,create:k,distanceToSilhouette:Bt,elevate:Et,equals:wt,exactEquals:St,fromCenterAndRadius:xt,fromRadius:yt,fromValues:Ct,getCenter:Rt,getExtent:Ot,getRadius:P,intersectLine:kt,intersectRay:A,intersectRayClosestSilhouette:Tt,intersectsRay:Lt,projectPoint:I,setAltitudeAt:Ft,setExtent:jt,tmpSphere:Vt,union:Ut,wrap:At},Symbol.toStringTag,{value:"Module"}));export{I as $,qt as C,k as E,A as F,Lt as H,kt as I,H as K,yt as L,un as M,P as N,xt as O,zt as Q,_t as S,At as T,Rt as U,Ct as V,St as _,D as a,x as b,Ut as c,an as f,Nt as i,on as k,pt as q,Mt as s,Bt as t,Vt as u,sn as v,cn as w,en as x};
