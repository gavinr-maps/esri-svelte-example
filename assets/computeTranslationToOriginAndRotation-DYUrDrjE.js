import{s as p}from"./mathUtils-Cfq9PL9W.js";import{s as N,q as O,o as S}from"./mat4-Fi6iAz29.js";import{n as A}from"./vec3f64-BLpZdpfb.js";import{F as M,N as r,L}from"./projectBuffer-CQnuEMuP.js";import{c as P}from"./Point-Cz2JYYmX.js";function R(s,u,n){const C=Math.sin(s),f=Math.cos(s),e=Math.sin(u),o=Math.cos(u),t=n;return t[0]=-C,t[4]=-e*f,t[8]=o*f,t[12]=0,t[1]=f,t[5]=-e*C,t[9]=o*C,t[13]=0,t[2]=0,t[6]=o,t[10]=e,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,t}function T(s,u,n){return R(s,u,n),N(n,n),n}function h(s,u,n,C){const f=M(s,C);if(f==null)return!1;const e=f.source.spatialReferenceId,o=f.dest.spatialReferenceId;if(e===o&&!a(o)&&(e!==r.UNKNOWN||P(s,C)))return O(n,u),!0;if(a(o)){const E=L[e][r.LON_LAT],l=L[r.LON_LAT][o];return E!=null&&l!=null&&(E(u,0,c,0),l(c,0,i,0),R(_*c[0],_*c[1],n),n[12]=i[0],n[13]=i[1],n[14]=i[2],!0)}const t=a(e);if((o===r.WEB_MERCATOR||o===r.PLATE_CARREE||o===r.WGS84||o===r.CGCS2000)&&(e===r.WGS84||t||e===r.WEB_MERCATOR||e===r.CGCS2000)){const E=L[e][r.LON_LAT],l=L[r.LON_LAT][o];return E!=null&&l!=null&&(E(u,0,c,0),l(c,0,i,0),t?T(_*c[0],_*c[1],n):S(n),n[12]=i[0],n[13]=i[1],n[14]=i[2],!0)}return!1}function a(s){return s===r.SPHERICAL_ECEF||s===r.SPHERICAL_MARS_PCPF||s===r.SPHERICAL_MOON_PCPF||s===r.WGS84_ECEF}const _=p(1),c=A(),i=A();export{h as m,R as n};
