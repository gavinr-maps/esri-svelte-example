import{r as e,m as t,a as D,g as B,c as Q,_ as X,s as Z}from"./Accessor-BHnuXKD2.js";import ee from"./FeatureLayer-9fyQxXYm.js";import{f as te}from"./TemporalLayer-CYEvmdjr.js";import{o as Y}from"./cast-BA_-jlhc.js";import{a as T}from"./Clonable-DvJsj5LF.js";import{S as C}from"./JSONSupport-CGdeqxpk.js";import{N as G}from"./Point-XGrwlf63.js";import{p as ie}from"./TimeExtent-J5qnUFx_.js";import{A as q}from"./interfaces-CL2NbQte.js";let N=class extends B{set horizontalWKID(o){o?G({wkid:+o})?this._set("horizontalWKID",+o):this._set("horizontalWKID",o):this._set("horizontalWKID",null)}set verticalWKID(o){o?this._set("verticalWKID",isFinite(o)&&G({wkid:+o})?+o:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:o,focalLength:r,principalOffsetPoint:n,radialDistortionCoefficients:l,tangentialDistortionCoefficients:s}=this;return(o==null?void 0:o.length)>1&&!Number.isNaN(r)&&(n==null?void 0:n.length)>1&&(l==null?void 0:l.length)>1&&(s==null?void 0:s.length)>1}};e([t({json:{write:!0}})],N.prototype,"affineTransformations",void 0),e([t({json:{write:!0}})],N.prototype,"focalLength",void 0),e([t({json:{write:!0}})],N.prototype,"principalOffsetPoint",void 0),e([t({json:{write:!0}})],N.prototype,"radialDistortionCoefficients",void 0),e([t({json:{write:!0}})],N.prototype,"tangentialDistortionCoefficients",void 0),e([t({json:{write:!0}})],N.prototype,"horizontalWKID",null),e([t({json:{write:!0}})],N.prototype,"verticalWKID",null),e([t({json:{write:!0}})],N.prototype,"x",void 0),e([t({json:{write:!0}})],N.prototype,"y",void 0),e([t({json:{write:!0}})],N.prototype,"z",void 0),e([t({json:{write:!0}})],N.prototype,"type",void 0),N=e([D("esri.layers.orientedImagery.core.CameraOrientation")],N);const _=N;let w=class extends T.ClonableMixin(C.JSONSupportMixin(_)){constructor(){super(...arguments),this.type=1}toString(){const{type:o,horizontalWKID:r,verticalWKID:n,x:l,y:s,z:d,heading:u,pitch:f,roll:b,affineTransformations:h,focalLength:S,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:v}=this,y=[o,r,n,l,s,d,u,f,b];return this.isAdvanced&&(h==null||h.forEach(a=>y.push(a)),y.push(S),m==null||m.forEach(a=>y.push(a)),g==null||g.forEach(a=>y.push(a)),v==null||v.forEach(a=>y.push(a))),y.map(a=>Number.isNaN(a)?"":a).join("|")}};e([t({json:{write:!0}})],w.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"heading",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"z",void 0),w=e([D("esri.layers.orientedImagery.core.CameraOrientationHPR")],w);const oe=w;let I=class extends T.ClonableMixin(C.JSONSupportMixin(_)){constructor(){super(...arguments),this.type=4}toString(){const{type:o,latitude:r,longitude:n,ellipsoidRadius:l,squaredEccentricity:s,properties:d}=this,u=`${d}`.split("|");return u.splice(1,1),`${o}|${r}|${n}|${l}|${s}|${u.join("|")}`}};e([t({json:{write:!0}})],I.prototype,"type",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"latitude",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"longitude",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"ellipsoidRadius",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"squaredEccentricity",void 0),e([t({json:{write:!0}})],I.prototype,"properties",void 0),I=e([D("esri.layers.orientedImagery.core.CameraOrientationLTP")],I);const re=I;let j=class extends T.ClonableMixin(C.JSONSupportMixin(_)){constructor(){super(...arguments),this.type=2}toString(){const{type:o,horizontalWKID:r,verticalWKID:n,x:l,y:s,z:d,omega:u,phi:f,kappa:b,affineTransformations:h,focalLength:S,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:v}=this,y=[o,r,n,l,s,d,u,f,b];return this.isAdvanced&&(h==null||h.forEach(a=>y.push(a)),y.push(S),m==null||m.forEach(a=>y.push(a)),g==null||g.forEach(a=>y.push(a)),v==null||v.forEach(a=>y.push(a))),y.map(a=>isNaN(a)?"":a).join("|")}};e([t({json:{write:!0}})],j.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"omega",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"phi",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"kappa",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"z",void 0),j=e([D("esri.layers.orientedImagery.core.CameraOrientationOPK")],j);const ne=j;let P=class extends T.ClonableMixin(C.JSONSupportMixin(_)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:o,focalLength:r,principalOffsetPoint:n,radialDistortionCoefficients:l,tangentialDistortionCoefficients:s}=this;return(o==null?void 0:o.length)>1||!Number.isNaN(r)||(n==null?void 0:n.length)>1||(l==null?void 0:l.length)>1||(s==null?void 0:s.length)>1}toString(){const{type:o,horizontalWKID:r,verticalWKID:n,x:l,y:s,z:d,yaw:u,pitch:f,roll:b,affineTransformations:h,focalLength:S,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:v}=this,y=[o,r,n,l,s,d,u,f,b];return this.isAdvanced&&(h==null||h.forEach(a=>y.push(a)),y.push(S),m==null||m.forEach(a=>y.push(a)),m==null||m.forEach(a=>y.push(a)),g==null||g.forEach(a=>y.push(a)),v==null||v.forEach(a=>y.push(a))),y.map(a=>Number.isNaN(a)?"":a).join("|")}};e([t({json:{write:!0}})],P.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"yaw",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"z",void 0),P=e([D("esri.layers.orientedImagery.core.CameraOrientationYPR")],P);const ae=P;var x;(function(i){i[i.HPR=1]="HPR",i[i.OPK=2]="OPK",i[i.YPR=3]="YPR",i[i.LTP=4]="LTP"})(x||(x={}));const $=new Map;$.set(`${x.OPK}`,{desc:"Using Omega Phi Kappa",constructor:ne}),$.set(`${x.HPR}`,{desc:"Using Heading, Pitch and Roll",constructor:oe}),$.set(`${x.YPR}`,{desc:"Using Yaw, Pitch and Roll",constructor:ae}),$.set(`${x.LTP}`,{desc:"Using Local Tangent Plane",constructor:re});let O=class extends T.ClonableMixin(C){constructor(){super(...arguments),this.url=null}};e([t({type:Number,json:{write:!0}})],O.prototype,"lod",void 0),e([t({type:String,json:{write:!0}})],O.prototype,"rasterFunction",void 0),e([t({type:String,json:{write:!0}})],O.prototype,"url",void 0),O=e([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],O);let U=class extends T.ClonableMixin(C){constructor(){super(...arguments),this.constantElevation=null}};e([t({type:Number,json:{write:!0}})],U.prototype,"constantElevation",void 0),U=e([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],U);const se=i=>i!=null&&typeof i.constantElevation=="number",Ke=i=>{var o;return i!=null&&((o=i.url)==null?void 0:o.length)>0};function pe(i,o,r){return o&&(i=`${o}${i}`),r&&(i+=`${r}`),i}function le(i,o,r){let{url:n}=i;return n?(n=pe(n,o,r),new O({...i,url:n})):null}function ue(i,o,r){return i&&(se(i)?new U(i):le(i,o,r))}const F=new Y({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),A=new Y({Feet:"feet",Meter:"meter"}),H=new Y({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique","":null}),z=new Map;function ye(i){const[o,r,n,l,s,d,u,f,b,h,S,m,g,v,y,a,E,K,L,R,M,W]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:n,y:l,z:s,omega:d,phi:u,kappa:f,...k([b,h,S,m,g,v],[a,E],[K,L,R],[M,W],y)}}z.set(`${x.HPR}`,ce),z.set(`${x.YPR}`,de),z.set(`${x.OPK}`,ye),z.set(`${x.LTP}`,me);const V=i=>{const o=i.map(r=>parseFloat(r)).filter(r=>!isNaN(r));if(o.length===i.length)return o};function k(i,o,r,n,l){const s=V(i),d=V(o),u=V(r),f=V(n);return{affineTransformations:(s==null?void 0:s.length)===6?s:void 0,focalLength:(s==null?void 0:s.length)===6?parseFloat(l):void 0,principalOffsetPoint:(d==null?void 0:d.length)!==2?[0,0]:d,radialDistortionCoefficients:(u==null?void 0:u.length)!==3?[0,0,0]:u,tangentialDistortionCoefficients:(f==null?void 0:f.length)!==2?[0,0]:f}}function ce(i){const[o,r,n,l,s,d,u,f,b,h,S,m,g,v,y,a,E,K,L,R,M,W]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:n,y:l,z:s,heading:d,pitch:u,roll:f,...k([b,h,S,m,g,v],[a,E],[K,L,R],[M,W],y)}}function de(i){const[o,r,n,l,s,d,u,f,b,h,S,m,g,v,y,a,E,K,L,R,M,W]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:n,y:l,z:s,yaw:d,pitch:u,roll:f,...k([b,h,S,m,g,v],[a,E],[K,L,R],[M,W],y)}}function me(i){var b;const[o,r,n,l,s,...d]=i.slice(1),u=z.get(s),f=(b=$.get(s))==null?void 0:b.constructor;return!u||!f?null:{latitude:o,longitude:r,ellipsoidRadius:n,squaredEccentricity:l,properties:new f(u([s,"",...d]))}}function Le(i){if(!i)return null;const o=`${i}`.split("|");if(o.length===0)return null;const r=$.get(o[0]);if(!r)return null;const n=z.get(o[0]);return n?new r.constructor(n(o)):null}function fe(i){return Array.isArray(i)&&(i==null?void 0:i.length)===9&&!i.some(isNaN)}const he=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),J=(i,o)=>!he.has(o)&&i,ge=(i,o,r)=>{const n=`orientedImageryProperties.${i}`;return{name:n,write:o?{ignoreOrigin:!0,target:n,writer:o}:{ignoreOrigin:!0},read:r?{ignoreOrigin:!0,source:n,reader:r}:{ignoreOrigin:!0}}};function ve(i){return i.json&&(i.json.origins=i.json.origins??{},i.json.origins["web-scene"]={write:!1,read:!1}),i}function c(i,o,r,n){const{name:l,write:s,read:d}=ge(i,o,r),u={name:l,write:s,read:d,origins:{service:{name:`orientedImageryInfo.${l}`,write:o,read:r},"web-scene":{name:l,write:J(s,i),read:J(d,i)},"web-map":{name:l,write:s,read:d}}};return n&&u.origins&&(u.type=n,u.origins["web-map"].type=n,u.origins["web-scene"].type=n),u}let p=class extends ee{constructor(){super(...arguments),this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:i,demPathPrefix:o,demPathSuffix:r}=this;return ue(i,o,r)}async save(i){return this._debouncedSaveOperations(q.SAVE,i)}async saveAs(i,o){return this._debouncedSaveOperations(q.SAVE_AS,o,i)}findFirstValidLayerId(i){var o,r;return(r=(o=i.layers)==null?void 0:o.find(n=>this.supportedSourceTypes.has(n.type)))==null?void 0:r.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new Z("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([t({type:Number,json:c("cameraHeading")})],p.prototype,"cameraHeading",void 0),e([t({type:Number,json:c("cameraHeight")})],p.prototype,"cameraHeight",void 0),e([t({type:Number,json:c("cameraPitch")})],p.prototype,"cameraPitch",void 0),e([t({type:Number,json:c("cameraRoll")})],p.prototype,"cameraRoll",void 0),e([t({type:Number,json:c("coveragePercent")})],p.prototype,"coveragePercent",void 0),e([t({type:String,json:c("demPathPrefix")})],p.prototype,"demPathPrefix",void 0),e([t({type:String,json:c("demPathSuffix")})],p.prototype,"demPathSuffix",void 0),e([t({type:String,json:c("depthImagePathPrefix")})],p.prototype,"depthImagePathPrefix",void 0),e([t({type:String,json:c("depthImagePathSuffix")})],p.prototype,"depthImagePathSuffix",void 0),e([t({type:Object,json:c("elevationSource")})],p.prototype,"elevationSource",void 0),e([t({readOnly:!0})],p.prototype,"effectiveElevationSource",null),e([t({type:Number,json:c("farDistance")})],p.prototype,"farDistance",void 0),e([t()],p.prototype,"geometryType",void 0),e([t({type:Number,json:c("horizontalFieldOfView")})],p.prototype,"horizontalFieldOfView",void 0),e([t({type:String,json:c("horizontalMeasurementUnit")})],p.prototype,"horizontalMeasurementUnit",void 0),e([t({type:String,json:{...c("imageGeometryField"),default:"ImageGeometry"}})],p.prototype,"imageGeometryField",void 0),e([t({type:String,json:c("imagePathPrefix")})],p.prototype,"imagePathPrefix",void 0),e([t({type:String,json:c("imagePathSuffix")})],p.prototype,"imagePathSuffix",void 0),e([t({type:String,json:{...c("imageReferenceField"),default:"OIObjectID"}})],p.prototype,"imageReferenceField",void 0),e([t({type:Number,json:c("imageRotation")})],p.prototype,"imageRotation",void 0),e([t({type:Number,json:c("maximumDistance")})],p.prototype,"maximumDistance",void 0),e([t({type:Number,json:c("nearDistance")})],p.prototype,"nearDistance",void 0),e([t({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],p.prototype,"operationalLayerType",void 0),e([t({json:{...c("orientationAccuracy",(i,o,r)=>{X(r,i.join(";"),o)},i=>{var r;const o=(r=i==null?void 0:i.split(";"))==null?void 0:r.map(Number);return fe(o)?o:[0,0,0,0,0,0,0,0,0]},String)}})],p.prototype,"orientationAccuracy",void 0),e([t({json:{...c("orientedImageryType",H.write,H.read,H.jsonValues.slice(1))}})],p.prototype,"orientedImageryType",void 0),e([t({json:{read:!1},value:"oriented-imagery",readOnly:!0})],p.prototype,"type",void 0),e([t({type:F.apiValues,json:{...c("timeIntervalUnit",F.write,F.read,F.jsonValues)}})],p.prototype,"timeIntervalUnit",void 0),e([t(ve(Q(te)))],p.prototype,"useViewTime",void 0),e([t({type:Number,json:c("verticalFieldOfView")})],p.prototype,"verticalFieldOfView",void 0),e([t({type:A.apiValues,json:{...c("verticalMeasurementUnit",A.write,A.read,A.jsonValues)}})],p.prototype,"verticalMeasurementUnit",void 0),e([t({type:String,json:c("videoPathPrefix")})],p.prototype,"videoPathPrefix",void 0),e([t({type:String,json:c("videoPathSuffix")})],p.prototype,"videoPathSuffix",void 0),e([t({type:ie,json:{origins:{"web-scene":{write:!1,read:!1}}}})],p.prototype,"visibilityTimeExtent",void 0),p=e([D("esri.layers.OrientedImageryLayer")],p);const we=p,Re=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));export{Le as D,Re as O,x as P,we as S,ue as a,_ as b,H as f,U as i,se as l,$ as n,Ke as p,pe as s};
