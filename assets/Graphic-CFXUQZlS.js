const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./webStyleSymbolUtils-DEYm8EyF.js","./devEnvironmentUtils-CnNDiFMM.js","./Accessor-BHnuXKD2.js","./cast-BA_-jlhc.js","./index-tefRSezt.js","./index-Cx51aysm.css","./JSONSupport-CGdeqxpk.js","./Portal-CTRRujjZ.js","./Promise-CmQqe-ke.js","./writer-B2bQV2uU.js","./Extent-CBBGeHb-.js","./Point-XGrwlf63.js","./jsonUtils-Dzgxk9pw.js","./layerUtils-dJgsXxkC.js","./TextSymbol-BQ_NW9Xo.js","./Color-gncXBiLc.js","./colorUtils-Rxh2V3ai.js","./mathUtils-DV9iOXpW.js","./enumeration-Cr5WIZs4.js","./screenUtils-_ZIvrt5o.js","./reactiveUtils-BR0C1Kq4.js","./Evented-DCWccWGU.js","./SimpleObservable-7oieNGD8.js","./defaults-Dwxdhopq.js","./defaultsJSON-GKolV7NZ.js","./styleUtils-BB-zx7mT.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./Clonable-DvJsj5LF.js","./opacityUtils-CSd4XoR2.js","./ActionToggle-__-l4AdQ.js","./Identifiable-BrT7zvUW.js","./jsonUtils-Cu7OBRmN.js","./Polyline-BmuD2-ZN.js","./typeUtils-BSg8Y507.js","./collectionUtils-CbaToa73.js","./vec3f64-BLpZdpfb.js","./aaBoundingBox-CeBivBRq.js"])))=>i.map(i=>d[i]);
import{r as o,m as s,a as l,c as a,$ as x,g as Qe,bb as ts,S as Bs,B as ue,ar as Js,U as Go,a2 as Ko,s as Ws,D as Vs,W as Hs,aR as Gs,c0 as Ks}from"./Accessor-BHnuXKD2.js";import{a as D}from"./Clonable-DvJsj5LF.js";import{V as u,v as Ys,C as Xs,p as Yo}from"./reactiveUtils-BR0C1Kq4.js";import{S as c}from"./JSONSupport-CGdeqxpk.js";import{o as os,i as gt,a as ss,p as Fo,r as is,m as rs,Y as Co,K as ns,ak as ls,f as as,h as vt,J as Qs,V as Zs,e as ei}from"./cast-BA_-jlhc.js";import{r as O,o as Q}from"./writer-B2bQV2uU.js";import{a5 as ti,_ as ps,X as oi,r as si,ad as ii}from"./opacityUtils-CSd4XoR2.js";import{r as d}from"./enumeration-Cr5WIZs4.js";import{Y as ri}from"./Promise-CmQqe-ke.js";import{h as b}from"./Color-gncXBiLc.js";import{p as ni,c as li,a as ai}from"./ActionToggle-__-l4AdQ.js";import{f as ys}from"./jsonUtils-Cu7OBRmN.js";import{l as pi}from"./typeUtils-BSg8Y507.js";import{n as N,e as yi,b as ci,a as cs,c as di,f as ui,p as hi,g as mi,h as fi,S as Mo,d as Ro,y as $t,m as xt}from"./TextSymbol-BQ_NW9Xo.js";import{t as bi,n as wi}from"./collectionUtils-CbaToa73.js";import{C as St}from"./Portal-CTRRujjZ.js";import{o as M,e as Se}from"./screenUtils-_ZIvrt5o.js";import{t as ds,r as vi}from"./vec3f64-BLpZdpfb.js";import{a as To}from"./aaBoundingBox-CeBivBRq.js";import{_ as gi}from"./index-tefRSezt.js";let st=class extends c{constructor(t){super(t),this.type=null}};o([s({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],st.prototype,"type",void 0),st=o([l("esri.popup.content.Content")],st);const B=st,ot=new os({asc:"ascending",desc:"descending"});let Ne=class extends D.ClonableMixin(c){constructor(t){super(t),this.field=null,this.order="ascending"}};o([s({type:String,json:{write:!0}})],Ne.prototype,"field",void 0),o([s({type:ot.apiValues,json:{type:ot.jsonValues,read:ot.read,write:ot.write}})],Ne.prototype,"order",void 0),Ne=o([l("esri.popup.support.AttachmentsOrderByInfo")],Ne);const $i=Ne;let J=class extends D.ClonableMixin(B){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};o([s({type:String,json:{write:!0}})],J.prototype,"description",void 0),o([s({type:["auto","preview","list"],json:{write:!0}})],J.prototype,"displayType",void 0),o([s({type:[$i],json:{write:!0}})],J.prototype,"orderByFields",void 0),o([s({type:String,json:{write:!0}})],J.prototype,"title",void 0),o([s({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],J.prototype,"type",void 0),J=o([l("esri.popup.content.AttachmentsContent")],J);const He=J;var Rt;let ee=Rt=class extends B{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Rt({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?a(this.outFields):null})}};o([s()],ee.prototype,"creator",void 0),o([s()],ee.prototype,"destroyer",void 0),o([s()],ee.prototype,"outFields",void 0),o([s({type:["custom"],readOnly:!0})],ee.prototype,"type",void 0),ee=Rt=o([l("esri.popup.content.CustomContent")],ee);const xi=ee;var Tt;let me=Tt=class extends c{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Tt({title:this.title,expression:this.expression})}};o([s({type:String,json:{write:!0}})],me.prototype,"title",void 0),o([s({type:String,json:{write:!0}})],me.prototype,"expression",void 0),o([s({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],me.prototype,"returnType",void 0),me=Tt=o([l("esri.popup.ElementExpressionInfo")],me);const Si=me;var zt;let Le=zt=class extends B{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new zt({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};o([s({type:Si,json:{write:!0}})],Le.prototype,"expressionInfo",void 0),o([s({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Le.prototype,"type",void 0),Le=zt=o([l("esri.popup.content.ExpressionContent")],Le);const jt=Le;let fe=class extends D.ClonableMixin(c){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};o([d(ri)],fe.prototype,"dateFormat",void 0),o([s({type:Boolean,json:{write:!0}})],fe.prototype,"digitSeparator",void 0),o([s({type:x,json:{write:!0}})],fe.prototype,"places",void 0),fe=o([l("esri.popup.support.FieldInfoFormat")],fe);const ji=fe;var kt;let L=kt=class extends c{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new kt({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};o([s({type:String,json:{write:!0}})],L.prototype,"fieldName",void 0),o([s({type:ji,json:{write:!0}})],L.prototype,"format",void 0),o([s({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],L.prototype,"isEditable",void 0),o([s({type:String,json:{write:!0}})],L.prototype,"label",void 0),o([d(new os({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],L.prototype,"stringFieldOption",void 0),o([s({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],L.prototype,"statisticType",void 0),o([s({type:String,json:{write:!0}})],L.prototype,"tooltip",void 0),o([s({type:Boolean,json:{write:!0}})],L.prototype,"visible",void 0),L=kt=o([l("esri.popup.FieldInfo")],L);const us=L;var At;let q=At=class extends B{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new At(a({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};o([s({type:Object,json:{write:!0}})],q.prototype,"attributes",void 0),o([s({type:String,json:{write:!0}})],q.prototype,"description",void 0),o([s({type:[us]})],q.prototype,"fieldInfos",void 0),o([O("fieldInfos")],q.prototype,"writeFieldInfos",null),o([s({type:String,json:{write:!0}})],q.prototype,"title",void 0),o([s({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],q.prototype,"type",void 0),q=At=o([l("esri.popup.content.FieldsContent")],q);const Ge=q;let te=class extends c{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};o([s({type:String,json:{write:!0}})],te.prototype,"altText",void 0),o([s({type:String,json:{write:!0}})],te.prototype,"caption",void 0),o([s({type:String,json:{write:!0}})],te.prototype,"title",void 0),o([s({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],te.prototype,"type",void 0),te=o([l("esri.popup.content.mixins.MediaInfo")],te);const zo=te;var Dt;let oe=Dt=class extends Qe{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new Dt({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};o([s()],oe.prototype,"color",void 0),o([s()],oe.prototype,"fieldName",void 0),o([s()],oe.prototype,"tooltip",void 0),o([s()],oe.prototype,"value",void 0),oe=Dt=o([l("esri.popup.content.support.ChartMediaInfoValueSeries")],oe);const Oi=oe;var Pt;let W=Pt=class extends c{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Pt({colors:a(this.colors),fields:a(this.fields),normalizeField:this.normalizeField,series:a(this.series),tooltipField:this.tooltipField})}};o([s({type:[b],json:{type:[[x]],write:!0}})],W.prototype,"colors",void 0),o([s({type:[String],json:{write:{isRequired:!0}}})],W.prototype,"fields",void 0),o([s({type:String,json:{write:!0}})],W.prototype,"normalizeField",void 0),o([s({type:[Oi],json:{read:!1}})],W.prototype,"series",void 0),o([s({type:String,json:{write:!0}})],W.prototype,"tooltipField",void 0),W=Pt=o([l("esri.popup.content.support.ChartMediaInfoValue")],W);const Ni=W;let Ie=class extends zo{constructor(t){super(t),this.type=null,this.value=void 0}};o([s({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ie.prototype,"type",void 0),o([s({type:Ni,json:{write:{isRequired:!0}}})],Ie.prototype,"value",void 0),Ie=o([l("esri.popup.content.mixins.ChartMediaInfo")],Ie);const Ot=Ie,Nt=gt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var qt;let it=qt=class extends Ot{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new qt({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};o([s({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],it.prototype,"type",void 0),it=qt=o([l("esri.popup.content.BarChartMediaInfo")],it);const hs=it;var Et;let rt=Et=class extends Ot{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new Et({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};o([s({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],rt.prototype,"type",void 0),rt=Et=o([l("esri.popup.content.ColumnChartMediaInfo")],rt);const ms=rt;var Ut;let _e=Ut=class extends c{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Ut({linkURL:this.linkURL,sourceURL:this.sourceURL})}};o([s({type:String,json:{write:!0}})],_e.prototype,"linkURL",void 0),o([s({type:String,json:{write:{isRequired:!0}}})],_e.prototype,"sourceURL",void 0),_e=Ut=o([l("esri.popup.content.support.ImageMediaInfoValue")],_e);const Li=_e;var Bt;let be=Bt=class extends zo{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new Bt({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};o([s({type:Number,json:{write:!0}})],be.prototype,"refreshInterval",void 0),o([s({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],be.prototype,"type",void 0),o([s({type:Li,json:{write:{isRequired:!0}}})],be.prototype,"value",void 0),be=Bt=o([l("esri.popup.content.ImageMediaInfo")],be);const fs=be;var Jt;let nt=Jt=class extends Ot{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new Jt({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};o([s({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],nt.prototype,"type",void 0),nt=Jt=o([l("esri.popup.content.LineChartMediaInfo")],nt);const bs=nt;var Wt;let lt=Wt=class extends Ot{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new Wt({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};o([s({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:Nt.write,isRequired:!0}}})],lt.prototype,"type",void 0),lt=Wt=o([l("esri.popup.content.PieChartMediaInfo")],lt);const ws=lt,Vt={base:zo,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":hs,"column-chart":ms,"line-chart":bs,"pie-chart":ws,image:fs}};var Ht;let I=Ht=class extends B{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?fs.fromJSON(t):t.type==="barchart"?hs.fromJSON(t):t.type==="columnchart"?ms.fromJSON(t):t.type==="linechart"?bs.fromJSON(t):t.type==="piechart"?ws.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new Ht(a({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};o([s()],I.prototype,"activeMediaInfoIndex",void 0),o([s({type:Object,json:{write:!0}})],I.prototype,"attributes",void 0),o([s({type:String,json:{write:!0}})],I.prototype,"description",void 0),o([s({types:[Vt]})],I.prototype,"mediaInfos",void 0),o([Q("mediaInfos")],I.prototype,"readMediaInfos",null),o([O("mediaInfos")],I.prototype,"writeMediaInfos",null),o([s({type:String,json:{write:!0}})],I.prototype,"title",void 0),o([s({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],I.prototype,"type",void 0),I=Ht=o([l("esri.popup.content.MediaContent")],I);const Ke=I;var Gt;let Fe=Gt=class extends c{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Gt({field:this.field,order:this.order})}};o([s({type:String,json:{write:!0}})],Fe.prototype,"field",void 0),o([s({type:["asc","desc"],json:{write:!0}})],Fe.prototype,"order",void 0),Fe=Gt=o([l("esri.popup.support.RelatedRecordsInfoFieldOrder")],Fe);const vs=Fe;let T=class extends D.ClonableMixin(B){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};o([s({type:String,json:{write:!0}})],T.prototype,"description",void 0),o([s({type:Number,json:{type:x,write:!0}})],T.prototype,"displayCount",void 0),o([s({type:["list"],json:{write:{isRequired:!0}}})],T.prototype,"displayType",void 0),o([s({type:[vs],json:{write:!0}})],T.prototype,"orderByFields",void 0),o([s({type:Number,json:{type:x,write:{isRequired:!0}}})],T.prototype,"relationshipId",void 0),o([s({type:String,json:{write:!0}})],T.prototype,"title",void 0),o([s({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],T.prototype,"type",void 0),T=o([l("esri.popup.content.RelationshipContent")],T);const Ye=T;var Kt;let Ce=Kt=class extends B{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Kt({text:this.text})}};o([s({type:String,json:{write:!0}})],Ce.prototype,"text",void 0),o([s({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ce.prototype,"type",void 0),Ce=Kt=o([l("esri.popup.content.TextContent")],Ce);const Xe=Ce;let E=class extends D.ClonableMixin(c){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};o([s({type:String,json:{write:!0}})],E.prototype,"title",void 0),o([s({type:String,json:{write:!0}})],E.prototype,"description",void 0),o([s({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],E.prototype,"type",void 0),o([s({type:Number,json:{type:x,write:!0}})],E.prototype,"associatedNetworkSourceId",void 0),o([s({type:Number,json:{type:x,write:!0}})],E.prototype,"associatedAssetGroup",void 0),o([s({type:Number,json:{type:x,write:!0}})],E.prototype,"associatedAssetType",void 0),E=o([l("esri.popup.support.UtilityNetworkAssociationType")],E);const Ii=E;let V=class extends D.ClonableMixin(B){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};o([s({type:String,json:{write:!0}})],V.prototype,"description",void 0),o([s({type:Number,json:{type:x,write:!0}})],V.prototype,"displayCount",void 0),o([s({type:String,json:{write:!0}})],V.prototype,"title",void 0),o([s({type:[Ii],json:{write:!0}})],V.prototype,"associationTypes",void 0),o([d({utilityNetworkAssociations:"utility-network-associations"})],V.prototype,"type",void 0),V=o([l("esri.popup.content.UtilityNetworkAssociationsContent")],V);const ko=V,_i={base:null,key:"type",typeMap:{attachment:He,media:Ke,text:Xe,expression:jt,field:Ge,relationship:Ye,utilityNetworkAssociations:ko}},Fi={base:null,key:"type",typeMap:{attachment:He,media:Ke,text:Xe,expression:jt,field:Ge,relationship:Ye}};var Yt;let se=Yt=class extends c{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Yt({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};o([s({type:String,json:{write:!0}})],se.prototype,"name",void 0),o([s({type:String,json:{write:!0}})],se.prototype,"title",void 0),o([s({type:String,json:{write:!0}})],se.prototype,"expression",void 0),o([s({type:["string","number"],json:{write:!0}})],se.prototype,"returnType",void 0),se=Yt=o([l("esri.popup.ExpressionInfo")],se);const Ci=se;var Xt;let Me=Xt=class extends c{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Xt({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};o([s({type:Boolean,json:{write:!0}})],Me.prototype,"returnTopmostRaster",void 0),o([s({type:Boolean,json:{write:!0}})],Me.prototype,"showNoDataRecords",void 0),Me=Xt=o([l("esri.popup.LayerOptions")],Me);const Mi=Me;var Qt;let Re=Qt=class extends c{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Qt({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?a(this.orderByFields):null})}};o([s({type:Boolean,json:{write:!0}})],Re.prototype,"showRelatedRecords",void 0),o([s({type:[vs],json:{write:!0}})],Re.prototype,"orderByFields",void 0),Re=Qt=o([l("esri.popup.RelatedRecordsInfo")],Re);const Xo=Re,Oe="relationships/",Qo="expression/",Ri=u.ofType({key:"type",defaultKeyValue:"button",base:ni,typeMap:{button:li,toggle:ai}}),Ti={base:B,key:"type",typeMap:{media:Ke,custom:xi,text:Xe,attachments:He,fields:Ge,expression:jt,relationship:Ye,utilityNetworkAssociations:ko}},gs=new Set(["attachments","fields","media","text","expression","relationship"]),zi=new Set([...gs,"utility-network-associations"]);let m=class extends D.ClonableMixin(c){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>ts(Ti,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Bs(e)?e:(ue.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeWebSceneContent(e,t,i,r){this._writePopupTemplateContent(e,t,r)}writeWebMapContent(e,t,i,r){this._writePopupTemplateContent(e,t,r)}writeFieldInfos(e,t,i,r){const{content:n}=this,p=Array.isArray(n)?n:null;if(e){const y=p?p.filter(h=>h.type==="fields"):[],S=y.length&&y.every(h=>{var R;return(R=h.fieldInfos)==null?void 0:R.length});t.fieldInfos=e.filter(Boolean).map(h=>{const R=h.toJSON(r);return S&&(R.visible=!1),R})}if(p)for(const y of p)y.type==="fields"&&this._writeFieldsContent(y,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),ti(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writePopupTemplateContent(e,t,i){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(r=>(i==null?void 0:i.origin)==="web-scene"?gs.has(r.type):zi.has(r.type)).map(r=>r==null?void 0:r.toJSON(i)),t.popupElements.forEach(r=>{r.type==="attachments"?this._writeAttachmentContent(t):r.type==="media"?this._writeMediaContent(r,t):r.type==="text"?this._writeTextContent(r,t):r.type==="relationship"&&this._writeRelationshipContent(r,t)})):t.description=e}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=a(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const n=t.fieldInfos.find(p=>{var y,S;return((y=p.fieldName)==null?void 0:y.toLowerCase())===((S=r.fieldName)==null?void 0:S.toLowerCase())});n?n.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){var n,p;const i=((n=e.orderByFields)==null?void 0:n.map(y=>this._toFieldOrderJSON(y,e.relationshipId)))||[],r=[...((p=t.relatedRecordsInfo)==null?void 0:p.orderByFields)||[],...i];t.relatedRecordsInfo={showRelatedRecords:!0,...(r==null?void 0:r.length)&&{orderByFields:r}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=a(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const r={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!t||r.mediaInfos||(n.mediaInfos=t,r.mediaInfos=!0),Ke.fromJSON(n)):n.type==="text"?(n.text||!e||r.description||(n.text=e,r.description=!0),Xe.fromJSON(n)):n.type==="attachments"?He.fromJSON(n):n.type==="fields"?Ge.fromJSON(n):n.type==="expression"?jt.fromJSON(n):n.type==="relationship"?Ye.fromJSON(n):n.type==="utilityNetworkAssociations"?ko.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!(t!=null&&t.startsWith(Oe)))return null;const r=t.replace(Oe,"").split("/");if(r.length!==2)return null;const n=parseInt(r[0],10),p=r[1];return!Number.isNaN(n)&&p?Ye.fromJSON({relationshipId:n,orderByFields:[{field:p,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:r}=e;return{field:`${Oe}${t}/${r}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:r={showRelatedRecords:!1}}){const n=[];e?n.push(new Xe({text:e})):n.push(new Ge),Array.isArray(t)&&t.length&&n.push(Ke.fromJSON({mediaInfos:t})),i&&n.push(He.fromJSON({displayType:"auto"}));const{showRelatedRecords:p,orderByFields:y}=r;return p&&(y!=null&&y.length)&&y.forEach(S=>{const h=this._toRelationshipContent(S);h&&n.push(h)}),n.length?n:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,n)=>[...r,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):t==="relationship"||t==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,n=r||{},{fields:p,normalizeField:y,tooltipField:S,sourceURL:h,linkURL:R}=n,Mt=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(h),...this._extractFieldNames(R),...p??[]];return y&&Mt.push(y),S&&Mt.push(S),Mt}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>ps(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:t,visible:i})=>!(i!==void 0&&!i||!t||t.startsWith(Oe)||t.startsWith(Qo))).map(t=>t.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,n=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return oi(e).filter(t=>!(t.indexOf(Oe)===0||t.indexOf(Qo)===0))}};o([s({type:Ri})],m.prototype,"actions",void 0),o([s()],m.prototype,"content",void 0),o([ss("content")],m.prototype,"castContent",null),o([Q("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],m.prototype,"readContent",null),o([O("web-scene","content",{popupElements:{type:u.ofType(Fi)},showAttachments:{type:Boolean},mediaInfos:{type:u.ofType(Vt)},description:{type:String},relatedRecordsInfo:{type:Xo}})],m.prototype,"writeWebSceneContent",null),o([O("content",{popupElements:{type:u.ofType(_i)},showAttachments:{type:Boolean},mediaInfos:{type:u.ofType(Vt)},description:{type:String},relatedRecordsInfo:{type:Xo}})],m.prototype,"writeWebMapContent",null),o([s({type:[Ci],json:{write:!0}})],m.prototype,"expressionInfos",void 0),o([s({type:[us]})],m.prototype,"fieldInfos",void 0),o([O("fieldInfos")],m.prototype,"writeFieldInfos",null),o([s({type:Mi})],m.prototype,"layerOptions",void 0),o([O("layerOptions")],m.prototype,"writeLayerOptions",null),o([s({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],m.prototype,"lastEditInfoEnabled",void 0),o([s()],m.prototype,"outFields",void 0),o([s()],m.prototype,"overwriteActions",void 0),o([s()],m.prototype,"returnGeometry",void 0),o([s({json:{type:String}})],m.prototype,"title",void 0),o([O("title")],m.prototype,"writeTitle",null),m=o([l("esri.PopupTemplate")],m);const ki=m;var Zt;let H=Zt=class extends N{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(p=>{const y=p.valueExpressionInfo;return y?ps(e,t,y.expression):null});await Promise.all(n)}}}clone(){return new Zt({data:a(this.data)})}hash(){return Js(JSON.stringify(this.data)).toString()}};o([s({json:{write:!1}})],H.prototype,"color",void 0),o([s({json:{write:!0}})],H.prototype,"data",void 0),o([Q("data",["symbol"])],H.prototype,"readData",null),o([O("data",{})],H.prototype,"writeData",null),o([d({CIMSymbolReference:"cim"},{readOnly:!0})],H.prototype,"type",void 0),H=Zt=o([l("esri.symbols.CIMSymbol")],H);const he=H;let we=class extends c{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};o([s({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],we.prototype,"enabled",void 0),o([O("enabled")],we.prototype,"writeEnabled",null),o([s({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],we.prototype,"type",void 0),we=o([l("esri.symbols.Symbol3DLayer")],we);const P=we;function Ai(e,t){const i=t.transparency!=null?si(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new b([r[0]||0,r[1]||0,r[2]||0,i]):null}function Di(e,t){t.color=e.toJSON().slice(0,3);const i=ii(e.a);i!==0&&(t.transparency=i)}function Z(e){return{type:b,nonNullable:e==null?void 0:e.nonNullable,json:{type:[x],default:null,read:{source:["color","transparency"],reader:Ai},write:{target:{color:{type:[x],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:x}},writer:Di}}}}const A={type:Number,cast:M,json:{write:!0}};let ie=class extends c{constructor(t){super(t),this.color=new b([0,0,0,1]),this.extensionLength=0,this.size=Se(1)}clone(){}cloneProperties(){return{color:a(this.color),size:this.size,extensionLength:this.extensionLength}}};o([s({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ie.prototype,"type",void 0),o([s(Z({colorRequiredOnWrite:!0}))],ie.prototype,"color",void 0),o([s({...A,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],ie.prototype,"extensionLength",void 0),o([s(A)],ie.prototype,"size",void 0),ie=o([l("esri.symbols.edges.Edges3D")],ie);const Ao=ie;var eo;let at=eo=class extends Ao{constructor(e){super(e),this.type="sketch"}clone(){return new eo(this.cloneProperties())}};o([d({sketch:"sketch"},{readOnly:!0})],at.prototype,"type",void 0),at=eo=o([l("esri.symbols.edges.SketchEdges3D")],at);const Pi=at;var to;let pt=to=class extends Ao{constructor(e){super(e),this.type="solid"}clone(){return new to(this.cloneProperties())}};o([d({solid:"solid"},{readOnly:!0})],pt.prototype,"type",void 0),pt=to=o([l("esri.symbols.edges.SolidEdges3D")],pt);const qi=pt,$s={types:{key:"type",base:Ao,typeMap:{solid:qi,sketch:Pi}},json:{write:!0}};var oo;let $=oo=class extends c{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?ds(this.emissiveFactor):null};return new oo(e)}};o([s(Z())],$.prototype,"color",void 0),o([s({type:[Number],json:{write:!1}})],$.prototype,"emissiveFactor",void 0),$=oo=o([l("esri.symbols.support.Symbol3DMaterial")],$);var so;let G=so=class extends P{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new so({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};o([d({Extrude:"extrude"},{readOnly:!0})],G.prototype,"type",void 0),o([s({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],G.prototype,"size",void 0),o([s({type:$,json:{write:!0}})],G.prototype,"material",void 0),o([s({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],G.prototype,"castShadows",void 0),o([s($s)],G.prototype,"edges",void 0),G=so=o([l("esri.symbols.ExtrudeSymbol3DLayer")],G);const xs=G;let yt=class extends c{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};o([s({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yt.prototype,"type",void 0),yt=o([l("esri.symbols.patterns.LinePattern3D")],yt);const Ss=yt,Ei=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var io;const Ui=gt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Te=io=class extends Ss{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new io(e)}};o([s({type:["style"],json:{write:{isRequired:!0}}})],Te.prototype,"type",void 0),o([d(Ui),s({type:Ei,json:{write:{isRequired:!0}}})],Te.prototype,"style",void 0),Te=io=o([l("esri.symbols.patterns.LineStylePattern3D")],Te);const Do=Te;let ct=class extends c{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};o([s({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ct.prototype,"type",void 0),ct=o([l("esri.symbols.patterns.Pattern3D")],ct);const js=ct,Bi=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var ro;let ze=ro=class extends js{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new ro({style:this.style})}};o([s({type:["style"],json:{write:{isRequired:!0}}})],ze.prototype,"type",void 0),o([s({type:Bi,json:{read:!0,write:{isRequired:!0}}})],ze.prototype,"style",void 0),ze=ro=o([l("esri.symbols.patterns.StylePattern3D")],ze);const Os=ze,Ji={types:{key:"type",base:js,typeMap:{style:Os}},json:{write:!0}},Ns={types:{key:"type",base:Ss,typeMap:{style:Do}},json:{write:!0}},Be=new b("white"),Wi=new b([255,255,255,0]);function Vi(e){return e.r===0&&e.g===0&&e.b===0}var no;let Je=no=class extends ${constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?ds(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new no(e)}};o([d({multiply:"multiply",replace:"replace",tint:"tint"})],Je.prototype,"colorMixMode",void 0),Je=no=o([l("esri.symbols.support.Symbol3DFillMaterial")],Je);function Br(e,{isPrimitive:t,width:i,depth:r,height:n}){const p=t?10:1;if(i==null&&n==null&&r==null)return[p*e[0],p*e[1],p*e[2]];const y=vi(i,r,n);let S;for(let h=0;h<3;h++){const R=y[h];if(R!=null){S=R/e[h];break}}for(let h=0;h<3;h++)y[h]==null&&(y[h]=e[h]*S);return y}const Hi=To(-.5,-.5,-.5,.5,.5,.5),Gi=To(-.5,-.5,0,.5,.5,1),Ki=To(-.5,-.5,0,.5,.5,.5);function Jr(e){switch(e){case"sphere":case"cube":case"diamond":return Hi;case"cylinder":case"cone":case"inverted-cone":return Gi;case"tetrahedron":return Ki;default:return}}const Po=["butt","square","round"],Yi=[...Po,"none"],Ls=["miter","bevel","round"];var lo;let re=lo=class extends c{constructor(e){super(e),this.color=new b([0,0,0,1]),this.size=Se(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new lo(e)}};o([s(Z({colorRequiredOnWrite:!0}))],re.prototype,"color",void 0),o([s({...A,json:{write:{isRequired:!0}}})],re.prototype,"size",void 0),o([s(Ns)],re.prototype,"pattern",void 0),o([s({type:Po,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],re.prototype,"patternCap",void 0),re=lo=o([l("esri.symbols.support.Symbol3DOutline")],re);var dt;let U=dt=class extends P{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new dt(e)}static fromSimpleFillSymbol(e){var r,n,p;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Do({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((n=e.outline)==null?void 0:n.color)??Be).clone(),pattern:t};return t&&((p=e.outline)!=null&&p.cap)&&(i.patternCap=e.outline.cap),new dt({material:new Je({color:(e.color??Wi).clone()}),pattern:e.style&&e.style!=="solid"?new Os({style:e.style}):null,outline:i})}};o([d({Fill:"fill"},{readOnly:!0})],U.prototype,"type",void 0),o([s({type:Je,json:{write:!0}})],U.prototype,"material",void 0),o([s(Ji)],U.prototype,"pattern",void 0),o([s({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],U.prototype,"castShadows",void 0),o([s({type:re,json:{write:!0}})],U.prototype,"outline",void 0),o([s($s)],U.prototype,"edges",void 0),U=dt=o([l("esri.symbols.FillSymbol3DLayer")],U);const Ze=U;var ao;const Xi=gt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ne=ao=class extends c{constructor(e){super(e)}readHref(e,t,i){return e?Fo(e,i):t.dataURI}writeHref(e,t,i,r){e&&(is(e)?t.dataURI=e:(t.href=rs(e,r),Co(t.href)&&(t.href=ns(t.href))))}clone(){return new ao({href:this.href,primitive:this.primitive})}};o([s({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ne.prototype,"href",void 0),o([Q("href")],ne.prototype,"readHref",null),o([O("href",{href:{type:String},dataURI:{type:String}})],ne.prototype,"writeHref",null),o([d(Xi)],ne.prototype,"primitive",void 0),ne=ao=o([l("esri.symbols.support.IconSymbol3DLayerResource")],ne);const Wr="circle";var po;let $e=po=class extends Qe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new po({x:this.x,y:this.y})}};o([s({type:Number})],$e.prototype,"x",void 0),o([s({type:Number})],$e.prototype,"y",void 0),$e=po=o([l("esri.symbols.support.Symbol3DAnchorPosition2D")],$e);var yo;let ke=yo=class extends c{constructor(e){super(e),this.color=new b([0,0,0,1]),this.size=Se(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new yo(e)}};o([s(Z({colorRequiredOnWrite:!0}))],ke.prototype,"color",void 0),o([s({...A,json:{write:{isRequired:!0}}})],ke.prototype,"size",void 0),ke=yo=o([l("esri.symbols.support.Symbol3DIconOutline")],ke);var ve;const Is="esri.symbols.IconSymbol3DLayer";let _=ve=class extends P{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new ve({anchor:this.anchor,anchorPosition:a(this.anchorPosition),enabled:this.enabled,material:a(this.material),outline:a(this.outline),resource:a(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Be,i=Zo(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Be).clone()}:null;return new ve({size:e.size,angle:e.angle,resource:{primitive:Zi(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||Vi(e.color)?Be:e.color,i=Zo(e);return new ve({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new ve({resource:{href:ls({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};o([s({type:$,json:{write:!0}})],_.prototype,"material",void 0),o([s({type:ne,json:{write:!0}})],_.prototype,"resource",void 0),o([d({Icon:"icon"},{readOnly:!0})],_.prototype,"type",void 0),o([s({...A,json:{write:{isRequired:!0}}})],_.prototype,"size",void 0),o([d({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],_.prototype,"anchor",void 0),o([s({type:$e,json:{type:[Number],read:{reader:e=>new $e({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],_.prototype,"anchorPosition",void 0),o([s({type:ke,json:{write:!0}})],_.prototype,"outline",void 0),o([s({type:Number,json:{write:!0,default:0}})],_.prototype,"angle",void 0),_=ve=o([l(Is)],_);const de=_;function Zo(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=es(e.xoffset),n=es(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function es(e){return isFinite(e)?e:0}const Qi={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Zi(e){return Qi[e]||(ue.getLogger(Is).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let le=class extends D.ClonableMixin(c){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};o([s({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],le.prototype,"type",void 0),o([s({type:yi,json:{default:"begin-end",write:!0}})],le.prototype,"placement",void 0),o([s({type:ci,json:{default:"arrow",write:!0}})],le.prototype,"style",void 0),o([s({type:b,json:{type:[x],default:null,write:!0}})],le.prototype,"color",void 0),le=o([l("esri.symbols.LineStyleMarker3D")],le);const co=le;var ut;let z=ut=class extends P{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Se(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new ut(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??Se(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Do({style:e.style}):null,material:new $({color:(e.color||Be).clone()}),marker:e.marker?new co({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new ut(t)}};o([s({type:$,json:{write:!0}})],z.prototype,"material",void 0),o([d({Line:"line"},{readOnly:!0})],z.prototype,"type",void 0),o([s({type:Ls,json:{write:!0,default:"miter"}})],z.prototype,"join",void 0),o([s({type:Po,json:{write:!0,default:"butt"}})],z.prototype,"cap",void 0),o([s({...A,json:{write:{isRequired:!0}}})],z.prototype,"size",void 0),o([s(Ns)],z.prototype,"pattern",void 0),o([s({types:{key:"type",base:co,typeMap:{style:co}},json:{write:!0}})],z.prototype,"marker",void 0),z=ut=o([l("esri.symbols.LineSymbol3DLayer")],z);const et=z;var uo;const er=gt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Ae=uo=class extends c{clone(){return new uo({href:this.href,primitive:this.primitive})}};o([s({type:String,json:{read:as,write:vt}})],Ae.prototype,"href",void 0),o([d(er)],Ae.prototype,"primitive",void 0),Ae=uo=o([l("esri.symbols.support.ObjectSymbol3DLayerResource")],Ae);const Hr="sphere";var ho;let ce=ho=class extends Qe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new ho({x:this.x,y:this.y,z:this.z})}};o([s({type:Number})],ce.prototype,"x",void 0),o([s({type:Number})],ce.prototype,"y",void 0),o([s({type:Number})],ce.prototype,"z",void 0),ce=ho=o([l("esri.symbols.support.Symbol3DAnchorPosition3D")],ce);var mo;let f=mo=class extends P{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new mo({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};o([s({type:$,json:{write:!0}})],f.prototype,"material",void 0),o([s({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],f.prototype,"castShadows",void 0),o([s({type:Ae,json:{write:!0}})],f.prototype,"resource",void 0),o([d({Object:"object"},{readOnly:!0})],f.prototype,"type",void 0),o([s({type:Number,json:{write:!0}})],f.prototype,"width",void 0),o([s({type:Number,json:{write:!0}})],f.prototype,"height",void 0),o([s({type:Number,json:{write:!0}})],f.prototype,"depth",void 0),o([d({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],f.prototype,"anchor",void 0),o([s({type:ce,json:{type:[Number],read:{reader:e=>new ce({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],f.prototype,"anchorPosition",void 0),o([s({type:Number,json:{write:!0}})],f.prototype,"heading",void 0),o([s({type:Number,json:{write:!0}})],f.prototype,"tilt",void 0),o([s({type:Number,json:{write:!0}})],f.prototype,"roll",void 0),o([s({readOnly:!0})],f.prototype,"isPrimitive",null),f=mo=o([l("esri.symbols.ObjectSymbol3DLayer")],f);const qo=f;var fo;let w=fo=class extends P{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new fo({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};o([s({type:$,json:{write:!0}})],w.prototype,"material",void 0),o([s({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],w.prototype,"castShadows",void 0),o([d({Path:"path"},{readOnly:!0})],w.prototype,"type",void 0),o([s({type:["circle","quad"],json:{write:!0,default:"circle"}})],w.prototype,"profile",void 0),o([s({type:Ls,json:{write:!0,default:"miter"}})],w.prototype,"join",void 0),o([s({type:Yi,json:{write:!0,default:"butt"}})],w.prototype,"cap",void 0),o([s({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],w.prototype,"width",void 0),o([Q("width",["width","size","height"])],w.prototype,"readWidth",null),o([s({type:Number,json:{write:!0}})],w.prototype,"height",void 0),o([Q("height",["height","size","width"])],w.prototype,"readHeight",null),o([s({type:["center","bottom","top"],json:{write:!0,default:"center"}})],w.prototype,"anchor",void 0),o([s({type:["heading","all"],json:{write:!0,default:"all"}})],w.prototype,"profileRotation",void 0),w=fo=o([l("esri.symbols.PathSymbol3DLayer")],w);const Eo=w;var bo;let xe=bo=class extends c{constructor(){super(...arguments),this.color=new b([0,0,0,1]),this.size=0}clone(){const e={color:a(this.color),size:this.size};return new bo(e)}};o([s(Z())],xe.prototype,"color",void 0),o([s(A)],xe.prototype,"size",void 0),xe=bo=o([l("esri.symbols.support.Symbol3DHalo")],xe);let We=class extends D.ClonableMixin(c){constructor(t){super(t),this.color=null}};o([s(Z())],We.prototype,"color",void 0),We=o([l("esri.symbols.support.Symbol3DTextBackground")],We);var ht;let v=ht=class extends P{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new ht({enabled:this.enabled,font:this.font&&a(this.font),halo:this.halo&&a(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:a(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new ht({font:e.font!=null?e.font.clone():new cs,halo:tr(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new $({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new We({color:e.backgroundColor.clone()}):null})}};function tr(e,t){return e&&t!=null&&t>0?new xe({color:a(e),size:t}):null}o([s({type:cs,json:{write:!0}})],v.prototype,"font",null),o([O("font")],v.prototype,"writeFont",null),o([s({type:xe,json:{write:!0}})],v.prototype,"halo",void 0),o([s({...di,json:{default:"center",write:!0}})],v.prototype,"horizontalAlignment",void 0),o([s({...ui,json:{default:1,write:!0}})],v.prototype,"lineHeight",void 0),o([s({type:$,json:{write:!0}})],v.prototype,"material",void 0),o([s({type:We,json:{write:!0}})],v.prototype,"background",void 0),o([s(A)],v.prototype,"size",null),o([s({type:String,json:{write:!0}})],v.prototype,"text",void 0),o([d({Text:"text"},{readOnly:!0})],v.prototype,"type",void 0),o([s({...hi,json:{default:"baseline",write:!0}})],v.prototype,"verticalAlignment",void 0),v=ht=o([l("esri.symbols.TextSymbol3DLayer")],v);const je=v;var wo;let K=wo=class extends P{constructor(e){super(e),this.color=vo.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new wo({color:a(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};o([s({type:b,nonNullable:!0,json:{type:[x],write:(e,t,i)=>t[i]=e.toArray(b.AlphaMode.UNLESS_OPAQUE),default:()=>vo.clone(),defaultEquals:e=>e.toCss(!0)===vo.toCss(!0)}})],K.prototype,"color",void 0),o([d({Water:"water"},{readOnly:!0})],K.prototype,"type",void 0),o([s({type:["small","medium","large"],json:{write:!0,default:"medium"}})],K.prototype,"waterbodySize",void 0),o([s({type:Number,json:{write:!0,default:null}})],K.prototype,"waveDirection",void 0),o([s({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],K.prototype,"waveStrength",void 0),K=wo=o([l("esri.symbols.WaterSymbol3DLayer")],K);const _s=K,vo=new b([0,119,190]);var go;let ae=go=class extends Qe{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new go({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};o([s({type:String})],ae.prototype,"name",void 0),o([s({type:String})],ae.prototype,"styleUrl",void 0),o([s({type:String})],ae.prototype,"styleName",void 0),o([s({type:St})],ae.prototype,"portal",void 0),ae=go=o([l("esri.symbols.support.StyleOrigin")],ae);const $o=ae;var xo;let Ve=xo=class extends Qe{constructor(){super(...arguments),this.url=""}clone(){return new xo({url:this.url})}};o([s({type:String})],Ve.prototype,"url",void 0),Ve=xo=o([l("esri.symbols.support.Thumbnail")],Ve);const Fs={icon:de,object:qo,line:et,path:Eo,fill:Ze,extrude:xs,text:je,water:_s},or=u.ofType({base:P,key:"type",typeMap:Fs,errorContext:"symbol-layer"});let k=class extends N{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||u;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&ue.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){wi(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const n=Fo(t.styleUrl,r);return new $o({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new $o({portal:(r==null?void 0:r.portal)||St.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new Go("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,n){if(t.styleUrl&&t.name){let p=rs(t.styleUrl,n);Co(p)&&(p=ns(p)),i.styleOrigin={styleUrl:p,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!Qs(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Go("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof P||t&&Fs[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};o([s({json:{read:!1,write:!1}})],k.prototype,"color",null),o([s({type:or,nonNullable:!0,json:{write:!0}}),ss(bi)],k.prototype,"symbolLayers",null),o([s({type:$o})],k.prototype,"styleOrigin",void 0),o([Q("styleOrigin")],k.prototype,"readStyleOrigin",null),o([O("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k.prototype,"writeStyleOrigin",null),o([s({type:Ve,json:{read:!1}})],k.prototype,"thumbnail",void 0),o([s({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k.prototype,"type",void 0),k=o([l("esri.symbols.Symbol3D")],k);const tt=k;let De=class extends c{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};o([s({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],De.prototype,"type",void 0),o([s({readOnly:!0})],De.prototype,"visible",void 0),De=o([l("esri.symbols.callouts.Callout3D")],De);const Cs=De;var So;let mt=So=class extends c{constructor(e){super(e),this.color=new b("white")}clone(){return new So({color:a(this.color)})}};o([s(Z({colorRequiredOnWrite:!0}))],mt.prototype,"color",void 0),mt=So=o([l("esri.symbols.callouts.LineCallout3DBorder")],mt);const sr=mt;var jo;let Y=jo=class extends Cs{constructor(e){super(e),this.type="line",this.color=new b([0,0,0,1]),this.size=Se(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new jo({color:a(this.color),size:this.size,border:a(this.border)})}};o([d({line:"line"})],Y.prototype,"type",void 0),o([s(Z({colorRequiredOnWrite:!0}))],Y.prototype,"color",void 0),o([s({...A,json:{write:{isRequired:!0}}})],Y.prototype,"size",void 0),o([s({type:sr,json:{write:!0}})],Y.prototype,"border",void 0),o([s({readOnly:!0})],Y.prototype,"visible",null),Y=jo=o([l("esri.symbols.callouts.LineCallout3D")],Y);const Ms=Y;function Uo(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Rs(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!Uo(e)}function Yr(e){return e.type==="point-3d"||e.type==="label-3d"}function Xr(e){return e.horizontalAlignment==="center"}const Ts={types:{key:"type",base:Cs,typeMap:{line:Ms}},json:{write:!0}};var Oo;let ge=Oo=class extends c{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Oo({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};o([s({...A,json:{write:{isRequired:!0}}})],ge.prototype,"screenLength",void 0),o([s({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ge.prototype,"minWorldLength",void 0),o([s({type:Number,json:{write:!0}})],ge.prototype,"maxWorldLength",void 0),ge=Oo=o([l("esri.symbols.support.Symbol3DVerticalOffset")],ge);const Bo=ge;var ft;const zs=u.ofType({base:null,key:"type",typeMap:{text:je}});let X=ft=class extends tt{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new zs,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Rs(this)}hasVisibleVerticalOffset(){return Uo(this)}clone(){return new ft({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail),callout:a(this.callout),verticalOffset:a(this.verticalOffset)})}static fromTextSymbol(e){return new ft({symbolLayers:new u([je.fromTextSymbol(e)])})}};o([s({type:Bo,json:{write:!0}})],X.prototype,"verticalOffset",void 0),o([s(Ts)],X.prototype,"callout",void 0),o([s({json:{read:!1,write:!1}})],X.prototype,"styleOrigin",void 0),o([s({type:zs})],X.prototype,"symbolLayers",void 0),o([d({LabelSymbol3D:"label-3d"},{readOnly:!0})],X.prototype,"type",void 0),X=ft=o([l("esri.symbols.LabelSymbol3D")],X);const Jo=X;var bt;const ks=u.ofType({base:null,key:"type",typeMap:{line:et,path:Eo}}),ir=u.ofType({base:null,key:"type",typeMap:{line:et,path:Eo}});let Pe=bt=class extends tt{constructor(e){super(e),this.symbolLayers=new ks,this.type="line-3d"}clone(){return new bt({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromSimpleLineSymbol(e){return new bt({symbolLayers:new u([et.fromSimpleLineSymbol(e)])})}};o([s({type:ks,json:{type:ir}})],Pe.prototype,"symbolLayers",void 0),o([d({LineSymbol3D:"line-3d"},{readOnly:!0})],Pe.prototype,"type",void 0),Pe=bt=o([l("esri.symbols.LineSymbol3D")],Pe);const Lt=Pe;var wt;const As=u.ofType({base:null,key:"type",typeMap:{fill:Ze}});let qe=wt=class extends tt{constructor(e){super(e),this.symbolLayers=new As,this.type="mesh-3d"}clone(){return new wt({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromSimpleFillSymbol(e){return new wt({symbolLayers:new u([Ze.fromSimpleFillSymbol(e)])})}};o([s({type:As})],qe.prototype,"symbolLayers",void 0),o([d({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],qe.prototype,"type",void 0),qe=wt=o([l("esri.symbols.MeshSymbol3D")],qe);const Wo=qe;function rr(e,t,i){return t.imageData?ls({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Ds(t.url,i)}function Ds(e,t){if(!Co(e)){const i=lr(t);if(i)return Zs(i,"images",e)}return Fo(e,t)}function nr(e,t,i,r){if(is(e)){const n=ei(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&vt(i.url,t,"url",r)}else vt(e,t,"url",r)}const Ps={json:{read:{source:["imageData","url"],reader:rr},write:{writer(e,t,i,r){nr(e,t,this.source,r)}}}},qs={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=Ds(t.url,i)),r}}}};function lr(e){var n,p;if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(p=e.url)==null?void 0:p.path:null}var No;let j=No=class extends mi{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=M(i)),r!=null&&(n.height=M(r)),n}clone(){const e=new No({color:a(this.color),height:this.height,outline:a(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",a(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};o([d({esriPFS:"picture-fill"},{readOnly:!0})],j.prototype,"type",void 0),o([s(Ps)],j.prototype,"url",void 0),o([s({type:Number,json:{write:!0}})],j.prototype,"xscale",void 0),o([s({type:Number,json:{write:!0}})],j.prototype,"yscale",void 0),o([s({type:Number,cast:M,json:{write:!0}})],j.prototype,"width",void 0),o([s({type:Number,cast:M,json:{write:!0}})],j.prototype,"height",void 0),o([s({type:Number,cast:M,json:{write:!0}})],j.prototype,"xoffset",void 0),o([s({type:Number,cast:M,json:{write:!0}})],j.prototype,"yoffset",void 0),o([s(qs)],j.prototype,"source",void 0),j=No=o([l("esri.symbols.PictureFillSymbol")],j);const Vo=j;var Lo;let F=Lo=class extends fi{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=M(t)),i!=null&&(r.height=M(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new Lo({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",a(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};o([s({json:{write:!1}})],F.prototype,"color",void 0),o([d({esriPMS:"picture-marker"},{readOnly:!0})],F.prototype,"type",void 0),o([s(Ps)],F.prototype,"url",void 0),o([s(qs)],F.prototype,"source",void 0),o([s({type:Number,cast:M,json:{write:!0}})],F.prototype,"height",void 0),o([Q("height",["height","size"])],F.prototype,"readHeight",null),o([s({type:Number,cast:M,json:{write:!0}})],F.prototype,"width",void 0),o([s({json:{write:!1}})],F.prototype,"size",void 0),F=Lo=o([l("esri.symbols.PictureMarkerSymbol")],F);const It=F;var pe;const Es=u.ofType({base:null,key:"type",typeMap:{icon:de,object:qo,text:je}});let ye=pe=class extends tt{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Es,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Rs(this)}hasVisibleVerticalOffset(){return Uo(this)}clone(){return new pe({verticalOffset:a(this.verticalOffset),callout:a(this.callout),styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new pe({symbolLayers:new u([de.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new pe({symbolLayers:new u([de.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,n;if(((n=(r=e.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new pe(i!=null&&i.callout?{symbolLayers:new u([de.fromCIMSymbol(e)]),callout:new Ms({size:.5,color:new b([0,0,0])}),verticalOffset:new Bo({screenLength:40})}:{symbolLayers:new u([de.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new pe({symbolLayers:new u([je.fromTextSymbol(e)])})}};o([s({type:Bo,json:{write:!0}})],ye.prototype,"verticalOffset",void 0),o([s(Ts)],ye.prototype,"callout",void 0),o([s({type:Es,json:{origins:{"web-scene":{write:!0}}}})],ye.prototype,"symbolLayers",void 0),o([d({PointSymbol3D:"point-3d"},{readOnly:!0})],ye.prototype,"type",void 0),ye=pe=o([l("esri.symbols.PointSymbol3D")],ye);const _t=ye;var Ee;const Us=u.ofType({base:null,key:"type",typeMap:{extrude:xs,fill:Ze,icon:de,line:et,object:qo,text:je,water:_s}});let Ue=Ee=class extends tt{constructor(e){super(e),this.symbolLayers=new Us,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Ko(ue.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Ko(ue.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Ys(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Xs))}clone(){return new Ee({styleOrigin:a(this.styleOrigin),symbolLayers:a(this.symbolLayers),thumbnail:a(this.thumbnail)})}static fromJSON(e){var i;const t=new Ee;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Ee({symbolLayers:new u([Ze.fromSimpleFillSymbol(e)])})}};o([s({type:Us,json:{write:!0}})],Ue.prototype,"symbolLayers",void 0),o([d({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ue.prototype,"type",void 0),Ue=Ee=o([l("esri.symbols.PolygonSymbol3D")],Ue);const Ft=Ue;var Io;let C=Io=class extends N{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:St.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new Io({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new Ws("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,i=t?this._fetchCacheKey:null;if(t!=null){const y=i&&t.get(i);if(y)return y.clone()}const{resolveWebStyleSymbol:r}=await gi(()=>import("./webStyleSymbolUtils-DEYm8EyF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url);Vs(e);const n=r(this,{portal:this.portal},e);n.catch(y=>{ue.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",y)});const p=await n;return t!=null&&t.set(i,p.clone()),p}};o([s({json:{write:!1}})],C.prototype,"color",void 0),o([s({type:String,json:{write:!0}})],C.prototype,"styleName",void 0),o([s({type:St,json:{write:!1}})],C.prototype,"portal",void 0),o([s({type:String,json:{read:as,write:vt}})],C.prototype,"styleUrl",void 0),o([s({type:Ve,json:{read:!1}})],C.prototype,"thumbnail",void 0),o([s({type:String,json:{write:!0}})],C.prototype,"name",void 0),o([d({styleSymbolReference:"web-style"},{readOnly:!0})],C.prototype,"type",void 0),o([s()],C.prototype,"_fetchCacheKey",null),C=Io=o([l("esri.symbols.WebStyleSymbol")],C);const Ct=C;function Qr(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Zr(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ho={base:N,key:"type",typeMap:{"simple-fill":Mo,"picture-fill":Vo,"picture-marker":It,"simple-line":Ro,"simple-marker":$t,text:xt,"label-3d":Jo,"line-3d":Lt,"mesh-3d":Wo,"point-3d":_t,"polygon-3d":Ft,"web-style":Ct,cim:he},errorContext:"symbol"},en={base:N,key:"type",typeMap:{"picture-marker":It,"simple-marker":$t,"point-3d":_t,cim:he},errorContext:"symbol"},tn={base:N,key:"type",typeMap:{"simple-line":Ro,"line-3d":Lt,cim:he},errorContext:"symbol"},on={base:N,key:"type",typeMap:{"simple-fill":Mo,"picture-fill":Vo,"polygon-3d":Ft,cim:he},errorContext:"symbol"},sn={base:N,key:"type",typeMap:{"picture-marker":It,"simple-marker":$t,text:xt,"web-style":Ct,cim:he},errorContext:"symbol"},rn=Hs({types:Ho}),nn={base:N,key:"type",typeMap:{"simple-fill":Mo,"picture-fill":Vo,"picture-marker":It,"simple-line":Ro,"simple-marker":$t,text:xt,"line-3d":Lt,"mesh-3d":Wo,"point-3d":_t,"polygon-3d":Ft,"web-style":Ct,cim:he},errorContext:"symbol"},ln={base:N,key:"type",typeMap:{text:xt,"label-3d":Jo},errorContext:"symbol"},an={base:N,key:"type",typeMap:{"line-3d":Lt,"mesh-3d":Wo,"point-3d":_t,"polygon-3d":Ft,"web-style":Ct,cim:he},errorContext:"symbol"},pn={base:N,key:"type",typeMap:{"label-3d":Jo},errorContext:"symbol"},yn=ts(Ho);var _o;function ar(e){if(!e)return null;const t={};for(const i in e){const r=ys(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function pr(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let g=_o=class extends D.ClonableMixin(c){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Gs(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Ks(ue.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new _o({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:pr(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:c.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(n.action=r),e==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Yo(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Yo(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};o([s({value:null,json:{read:ar}})],g.prototype,"aggregateGeometries",null),o([s({value:null})],g.prototype,"attributes",null),o([s({value:null,types:pi,json:{read:ys}})],g.prototype,"geometry",null),o([s({type:Boolean})],g.prototype,"isAggregate",void 0),o([s({clonable:"reference"})],g.prototype,"layer",void 0),o([s({clonable:"reference"})],g.prototype,"origin",void 0),o([s({type:ki})],g.prototype,"popupTemplate",void 0),o([s({clonable:"reference"})],g.prototype,"sourceLayer",void 0),o([s({value:null,types:Ho})],g.prototype,"symbol",null),o([s({clonable:!1,json:{read:!1,write:!1}})],g.prototype,"_version",void 0),o([s({type:Boolean,value:!0})],g.prototype,"visible",null),g=_o=o([l("esri.Graphic")],g);const cn=g;export{Eo as $,Ct as A,Jo as B,rn as C,nn as D,Ho as E,Hr as F,Wr as G,sn as H,Ci as I,ko as J,$s as K,an as L,en as M,Oi as N,Si as O,ln as P,Ke as Q,Xe as R,Zr as S,pn as T,Br as U,tn as V,on as W,vs as X,Ii as Y,de as Z,qo as _,Ge as a,Xr as a0,Yr as a1,$e as a2,Z as a3,cn as b,He as c,he as d,Ve as e,It as f,Jr as g,Ms as h,$o as i,sr as j,$i as k,yn as l,ji as m,us as n,Qr as o,Bo as p,ki as q,$ as r,Lt as s,Ft as t,Wo as u,Ze as v,_t as w,qi as x,et as y,je as z};
